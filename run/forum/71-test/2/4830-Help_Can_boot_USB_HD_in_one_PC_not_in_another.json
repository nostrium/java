{
  "id": "4830",
  "title": "Help! Can boot USB HD in one PC, not in another",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "36787",
      "timestamp": "2008-06-03T07:43:01+00:00",
      "author": "Paulus",
      "content": "I really could use some help of the experts.  \n\nI have a WD Essentials 500GB external USB HD.  \nI have created (under Windows) 3 primary partitions on it, and set 1 partition as bootable.  \nI have installed grub4dos as boot loader.  \n\nSo far so good.  \n\nIf I insert this disk in one PC, and select boot from USB device, it will flawlessly start up grub4dos, and boot  \nwhatever I want from the bootable partition.  \n\nHowever, if I try the same from another PC, suddenly it won\u0027t boot, and I get a \"Disk Error, press any key to continue\" error.  \nThis BIOS recognizes the HD as a USB-ZIP device.  \n\nI\u0027ve tried looking everywhere, but I just cannot get the information I need: how to make this USB HD work when it\u0027s  \nrecognised by that BIOS as USB-ZIP, while at the same time keeping my partitions?  \n\nAny help is greatly appreciated!   \n"
    },
    {
      "id": "36790",
      "timestamp": "2008-06-03T08:24:55+00:00",
      "author": "was_jaclaz",
      "content": "\u003e I\u0027ve tried looking everywhere, but I just cannot get the information I need: how to make this USB HD work when it\u0027s  \n\u003e recognised by that BIOS as USB-ZIP, while at the same time keeping my partitions?\n\nHmmm, you\u0027ll need to experiment a bit, but maybe there is a way.  \n\nActually you are the first one AFAIK reporting a BIOS that sees a hard disk as USB-ZIP, I have waited such a report for years .... ( :wink: just kidding).  \n\nSeriously there is makebootfat:  \n[http://www.boot-land.../?showtopic\u003d761](http://www.boot-land.net/forums/?showtopic\u003d761 \"External link\")  \n\nDo read the referenced posts on 911CD, makebootfat comes also with a \"special\" MBR that can be \"tweaked\" to be used **three** ways:   \nNormal MBR  \nBootsector  \nZIP MBR  \n\nWhether it will work on a HD or it should pose any of the ZIP format restrictions, I cannot say.  \n\n\"Standard\" ZIP specifications are here:  \n[http://www.win.tue.n.../zip/zip-1.html](http://www.win.tue.nl/~aeb/linux/zip/zip-1.html \"External link\")  \n\nYou will need a fairly good familiarity with a hex editor and similar low-level software in order to do the experiments, please post if you need any help in finding the \"right\" tools and for hints on how to use them, and also some familiarity with the concepts behind MBR\u0027s and bootsectors, reading these pages beforehand is advised:  \n[http://thestarman.pcministry.com/](http://thestarman.pcministry.com/ \"External link\")  \n\n\u003cbr /\u003e\n\njaclaz   \n"
    },
    {
      "id": "36805",
      "timestamp": "2008-06-03T10:51:16+00:00",
      "author": "Paulus",
      "content": "\u003e Seriously there is makebootfat:  \n\u003e [http://www.boot-land.../?showtopic\u003d761](http://www.boot-land.net/forums/?showtopic\u003d761 \"External link\")  \n\u003e\n\u003e Do read the referenced posts on 911CD, makebootfat comes also with a \"special\" MBR that can be \"tweaked\" to be used **three** ways:   \n\u003e Normal MBR  \n\u003e Bootsector  \n\u003e ZIP MBR  \n\u003e\n\u003e Whether it will work on a HD or it should pose any of the ZIP format restrictions, I cannot say.\n\nI already looked at makebootfat, but the only thing I can learn from the documentation, is that an USB-ZIP format  \nis presented in a very specific format (mine isn\u0027t presented like this when running under Windows), and cannot have  \nmore than one partition (my USB HD does have 3 partitions, and still it is recognised as USB-ZIP by the BIOS)  \n\nIn my situation I explicitly want to have more than one partition to separate \"data\" from \"boot code\"  \n\n\u003e \"Standard\" ZIP specifications are here:  \n\u003e [http://www.win.tue.n.../zip/zip-1.html](http://www.win.tue.nl/~aeb/linux/zip/zip-1.html \"External link\")\n\n\u003cbr /\u003e\n\nThanks! I did not find any information till now...  \n\n\u003e You will need a fairly good familiarity with a hex editor and similar low-level software in order to do the experiments, please post if you need any help in finding the \"right\" tools and for hints on how to use them, and also some familiarity with the concepts behind MBR\u0027s and bootsectors, reading these pages beforehand is advised:  \n\u003e [http://thestarman.pcministry.com/](http://thestarman.pcministry.com/ \"External link\")  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e jaclaz\n\nThose pages I also looked thoroughly through, I also downloaded all relevant tools.  \n\nStill I cannot see what I should do to make my USB HD bootable under this BIOS that recognises it as USB-ZIP.  \n\nThe funny thing is that this same BIOS will recognise a USB Stick as an USB-HDD bootable device!  \nRunning Windows however, the USB stick shows as a \"removable\" device, and I cannot put any partitions on  \nit (at least not with Windows disk manager), and the USB HD shows as a real \"fixed\" harddisk.  \nThus Windows looks at these devices exactly how I expect it to be, only the BIOS acts \"weird\".  \n\nAny idea what I should do?   \n"
    },
    {
      "id": "36810",
      "timestamp": "2008-06-03T11:25:21+00:00",
      "author": "was_jaclaz",
      "content": "Yep, the idea is to use the info available to simulate as much as possible the ZIP \"specifications\".   \nI would try:  \nhaving the boot (active) partition in 4th entry  \nuse a FAT 16 06 partition with CHS ***n*** /64/32 with ***n*** either 96 or 239  \ntry also a 0E partition with same CHS geometry  \nuse the \"triple use\" makebootfat MBR code, as it is possible that the BIOS calls \"ZIP-DRIVE\" an actual \"super-floppy\"  \n\nI am afraid I cannot help you more specifically, as I have no way to test the behaviour of your \"queer\" BIOS.  \n\nProvided that you are willing to completely wipe your hard disk for the sake of experimenting, I could provide you with a few pre-made MBR\u0027s to test with.  \n\nAbout the USB stick, seen as removable, read here:  \n[http://www.boot-land...?showtopic\u003d4560](http://www.boot-land.net/forums/?showtopic\u003d4560 \"External link\")  \nor try using SWISSKNIFE for partitioning it:  \n[http://www.compuapps.../swissknife.htm](http://www.compuapps.com/Download/swissknife/swissknife.htm \"External link\")  \n\nIf you are one of the lucky ones, you could even be able to find the utility to \"flip\" the removable bit, start from here:  \n[http://www.911cd.net...showtopic\u003d15776](http://www.911cd.net/forums//index.php?showtopic\u003d15776 \"External link\")  \n[http://www.911cd.net...showtopic\u003d15923](http://www.911cd.net/forums//index.php?showtopic\u003d15923 \"External link\")  \n\nYou may also be interested in some of the info in my (everyday more outdated) page:  \n[http://home.graffiti...B/USBstick.html](http://home.graffiti.net/jaclaz:graffiti.net/Projects/USB/USBstick.html \"External link\")  \n\njaclaz   \n"
    },
    {
      "id": "36814",
      "timestamp": "2008-06-03T12:40:41+00:00",
      "author": "Paulus",
      "content": "\u003e Yep, the idea is to use the info available to simulate as much as possible the ZIP \"specifications\".   \n\u003e I would try:  \n\u003e having the boot (active) partition in 4th entry  \n\u003e use a FAT 16 06 partition with CHS ***n*** /64/32 with ***n*** either 96 or 239  \n\u003e try also a 0E partition with same CHS geometry  \n\u003e use the \"triple use\" makebootfat MBR code, as it is possible that the BIOS calls \"ZIP-DRIVE\" an actual \"super-floppy\"  \n\u003e\n\u003e I am afraid I cannot help you more specifically, as I have no way to test the behaviour of your \"queer\" BIOS.  \n\u003e\n\u003e Provided that you are willing to completely wipe your hard disk for the sake of experimenting, I could provide you with a few pre-made MBR\u0027s to test with.\n\nThe thing is, this USB HD is my backup device and hosts all my important data, so wiping is not an option.  \n\n\u003cbr /\u003e\n\n\u003e You may also be interested in some of the info in my (everyday more outdated) page:  \n\u003e [http://home.graffiti...B/USBstick.html](http://home.graffiti.net/jaclaz:graffiti.net/Projects/USB/USBstick.html \"External link\")  \n\u003e\n\u003e jaclaz\n\nBefore posting here, I already studied your page and all related links there ;-) It has a lot of useful info!  \n\nWhat I currently do not understand is how my BIOS thinks this drive is a USB-ZIP device. Is that due to the chip inside the USB HD?  \nIt can hardly be due to the MBR, as that is a grub4dos one based on a HD geometry.  \n\nI\u0027m thinking of trying a trick with an extended partition.  \nIs it possible to make one extended partition and manipulate it into the 4th entry of the partition table?  \nIn that way it could be possible to \"comply\" to the ZIP standard.  \n\nIs there any more info on how booting from a superfloppy/USB-ZIP drive takes place?   \n"
    },
    {
      "id": "36819",
      "timestamp": "2008-06-03T13:37:19+00:00",
      "author": "was_jaclaz",
      "content": "\u003e The thing is, this USB HD is my backup device and hosts all my important data, so wiping is not an option.\nYep, I expected someting like that. ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)  \n\n\u003cbr /\u003e\n\n\u003e What I currently do not understand is how my BIOS thinks this drive is a USB-ZIP device. Is that due to the chip inside the USB HD?  \n\u003e It can hardly be due to the MBR, as that is a grub4dos one based on a HD geometry.\nIf the same hard disk (and chip) is seen \"properly\" on another PC, the problem is in the BIOS, no doubt about that, maybe there is an update for it?  \n\n\u003e I\u0027m thinking of trying a trick with an extended partition.  \n\u003e Is it possible to make one extended partition and manipulate it into the 4th entry of the partition table?  \n\u003e In that way it could be possible to \"comply\" to the ZIP standard.\nYou can ***try*** with the newish \"partnew\" command of grub4dos:  \n[http://www.boot-land...opic\u003d3287\\\u0026st\u003d45](http://www.boot-land.net/forums/?showtopic\u003d3287\u0026st\u003d45 \"External link\")  \nbut I ***WOULD NOT*** recommend experimenting with it (or anything else) on a drive with data on it.  \nWhy not making a fourth primary partition?  \nThat would eliminate at least one of the possibly critical factors.   \n\n\u003e Is there any more info on how booting from a superfloppy/USB-ZIP drive takes place?\nAs you have seen on the referenced page:  \n[http://www.win.tue.n.../zip/zip-1.html](http://www.win.tue.nl/~aeb/linux/zip/zip-1.html \"External link\")  \nthere are actually TWO \"kinds\" of ZIP formatting, a \"HD-like\" one with MBR and a \"super-floppy\" one.  \nThe point is again in the BIOS.  \n\"good\" BIOSes just check that at offset 511 and 512 there is the \"magic signature\" 55AA and execute whatever code is in 1st sector of the device ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)  \n\"picky\" BIOSes may make any number of additional checks, like the initial jump instructions:  \nEB3C90 FAT12/FAT16 bootsector  \nEB5890 FAT32 bootsector  \nEB5290 NTFS bootsector  \n33C08E Standard 2K/XP MBR  \nFAFC31 FREEDOS MBR  \nEB5E80 grldr.mbr  \nEB5890 makebootfat MBR (start to see a pattern? ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif) )  \n\nAnd/or partition ID in partition table, see FAQ #10:  \n[http://www.911cd.net...o...181\\\u0026st\u003d1880](http://www.911cd.net/forums//index.php?showtopic\u003d14181\u0026st\u003d1880 \"External link\")  \n\nAlso, have a look at this:  \n[http://www.boot-land...topic\u003d1123\\\u0026st\u003d6](http://www.boot-land.net/forums/?showtopic\u003d1123\u0026st\u003d6 \"External link\")  \n\nand to the linked to oldish report by **sangin** :  \n[http://www.911cd.net...o...181\\\u0026st\u003d1880](http://www.911cd.net/forums//index.php?showtopic\u003d14181\u0026st\u003d1880 \"External link\")  \nfor which to date there is no \"rational\" explanation  \n\n\u003cbr /\u003e\n\nOn a completely different approach, can you try to use PLOP:  \n[http://www.plop.at/e...mngrusblog.html](http://www.plop.at/en/bootmngrusblog.html \"External link\")  \n[http://www.plop.at/e...tmanagerdl.html](http://www.plop.at/en/bootmanagerdl.html \"External link\")  \n(either the NO-INSTALL floppy or CD)  \n[http://download.plop...bt50rc12flp.zip](http://download.plop.at/plop/bootmngr/plpbt50rc12flp.zip \"External link\")  \n[http://download.plop...50rc12cdflp.zip](http://download.plop.at/plop/bootmngr/plpbt50rc12cdflp.zip \"External link\")  \n\nas \"kicker\" disk and see what happens?  \n\nIf it works, it would be the best workaround until you can afford to buy a USB hard disk that you can use for experiments.  \n\nI would be very interested to find a way to have your BIOS booting, but don\u0027t want to hypothetically put your data at risk. ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)   \n\nIf you have your own means to create some space on the drive AND shift existing partitions towards the end of the drive (yes, a few BIOS do not support booting from a partition that begins beyond first 8 Gb or Cylinder 1024) so that the \"experimental\" partition is at the beginning of the drive, right after the hidden sectors, then you can attach your MBR here and I\u0027ll try to build manually some alternatives for you to try.  \nHDhacker:  \n[http://dimio.altervista.org/eng/](http://dimio.altervista.org/eng/ \"External link\")  \nis a very convenient app to save/restore the MBR   \n\n:wink:  \n\njaclaz   \n"
    },
    {
      "id": "36869",
      "timestamp": "2008-06-03T22:14:49+00:00",
      "author": "Paulus",
      "content": "Thanks for the extra info jaclaz  \n\n\u003e I would be very interested to find a way to have your BIOS booting, but don\u0027t want to hypothetically put your data at risk. :wink:\n\nDoes it help to know the troublesome BIOS is a 1.09 version on a Dell Inspiron 531 (NVidia MCP61 chipset)?  \n\nThe funny thing is, on older Dell systems this USB-HDD DOES boot...  \n\nAlso the Inspiron 531 does boot of USB stick (which it \"recognizes\" as USB-HDD, go figure)   \n"
    },
    {
      "id": "37439",
      "timestamp": "2008-06-12T00:05:05+00:00",
      "author": "niche99",
      "content": "Is the hardware configuration very different between the PC that boots from USB and the PC that doesn\u0027t?  \nMaybe one PC is Uni-core and the other is Dual-core? I\u0027ve found this to be a problem and still is, I\u0027m lazy :wink: .  \nHave a google for MySysprep it attempts to solve Hal problems during Pre Installation phases, with better procesor detection.  \n\nniche99   \n"
    },
    {
      "id": "37456",
      "timestamp": "2008-06-12T09:51:02+00:00",
      "author": "was_jaclaz",
      "content": "\u003e Is the hardware configuration very different between the PC that boots from USB and the PC that doesn\u0027t?  \n\u003e Maybe one PC is Uni-core and the other is Dual-core?\n\nNO.  \n\nThe problem Paulus is reporting is a disk/filesystem one, that happens long before any different driver (for different hardware) may be loaded.  \n\njaclaz   \n"
    }
  ]
}