{
  "id": "18300",
  "title": "A delicate issue",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "169173",
      "timestamp": "2013-03-11T16:23:15+00:00",
      "author": "mindgame",
      "content": "Hello,\n\nI have spent the better part of the entire weekend trying to recover from the mess up that occured last week.\n\nDuring the latest format of my laptop I managed to mess up the partitions. The original backup/recovery partition that came with my HP notebook became the active/1 partition when I installed Windows XP, thus my system was put on a logical/non-active partition instead. I remember having initial problems with this but after configuring boot.ini properly I managed to get it running anyhow.\n\nThen last week after getting my hands of Paragon Partition Manager I checked out their \"Boot Wizard\" just to see what it offered. Apparently that changed my configuration. The next time I rebooted a certain Paragon Boot GUI showed up instead of the usual Microsoft menu where you select your OS. However the only thing that the Paragon loader allowed me to select was the active partition; that is the HP recovery drive so it was stuck in a loop.\n\nGiven my current environment I have/had no immediate option of getting my hands on a physical Windows XP CD so I opted for trying to resolve things through USB.\n\nI had very little success getting anything to boot from there but eventually I managed to boot the \"Ultimate Boot CD\" that offers a bunch of utilities. I went through the various partition utilities to see if there was anything that I would be confident using being a fairly novice PC user. Somehow I must have changed a thing or two though as the Paragon boot selection had vanished, leaving me with the dreaded \"Non-system disk or disk error, replace and strike any key when ready...\" message.\n\nSince then my goal has been to try and get the Windows XP Recovery Console, cmdcons, running to try and resolve the issue without losing any data. However with the few utilities Ive tried (WinToFlash, the HP drive format utility, ?) the only thing I managed to get from them was the \"NTLDR missing\" message.\n\nI have only managed to run UBCD and UBCD4Win so far and while the second one allows a lot of things to be done Im still not confident in using \"foreign\" tools such as TestDisk to change the configuration of the partitions due to the risk of data loss as Im in an environment where I cannot do a backup of my whole system and Im not confident that changing the active partition would actually solve the issue.\n\nI tried using diskpart to change the active partition to my system drive but has no effect as my system is still on a non-primary/not the first partition.\n\nFrom the utilities offered in UBCD4Win I dont see anything wrong with my partitions other than the fact that my system partition (D:) isnt bootable but I will try to get a log from Testdisk if necessary.\n\nIs there an easy way to get cmdcons/Windows XP Recovery Console running through UBCD4Win or a similar fairly novice-friendly environment? Or is there a different yet still cautious procedure?\n\nI only have a single 16 GB USB Flash drive at my disposal right now.\n\nI am/was running Windows XP Professional with SP3\n\nThank you Wizards.\n\n**Edited by mindgame, 11 March 2013 - 04:25 PM.**\n"
    },
    {
      "id": "169178",
      "timestamp": "2013-03-11T17:32:19+00:00",
      "author": "mindgame",
      "content": "One thing just came to mind - I have been creating all the USB setups/configurations on a different computer running Windows 7. Is that why the cmdcons/Windows Recovery Console configs come up with NTLDR missing? Or is there something scrambled about my bootloader/mbr?\n\n"
    },
    {
      "id": "169179",
      "timestamp": "2013-03-11T17:35:55+00:00",
      "author": "Wonko the Sane",
      "content": "Well, there are two kinds of issues.   \nFirst one is the actual issue ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)  \nThe other one is the idea that a Recovery Console could be of \\*any\\* use to repair that \"botched\" system. ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)  \n\nReally, short of torture, you seemingly applied to that poor disk \\*anything\\* (and the contrary of it) ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png), the Recovery Console is a very limited environment (when compared to UBCD4WIN or any \"featured\" PE 1.xx), maybe you need only some help/assistance in using the tools withing UBCD4win, instead? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\nAnyway, do you have a CD burner or you need/want the Recovery console on the USB stick?  \n\nThis should be latest \"verified/reproducible\" approach/method for USB stick:  \n[http://www.911cd.net...showtopic\u003d24880](http://www.911cd.net/forums//index.php?showtopic\u003d24880 \"External link\")  \n\nFor CD, this remains valid:  \n\u003chttp://reboot.pro/?showtopic\u003d2254\u003e\n\u003e One thing just came to mind - I have been creating all the USB setups/configurations on a different computer running Windows 7. Is that why the cmdcons/Windows Recovery Console configs come up with NTLDR missing? Or is there something scrambled about my bootloader/mbr?\n\nSure :smile:, for a \"flat\" recovery console, you need to run\n\n```\n\nbootsect /NT52 E:\n```\n\n(or whatever drive letter the partition on the stick has instead of E:), see:  \n[http://technet.micro...7(v\u003dws.10).aspx](http://technet.microsoft.com/en-us/library/cc749177(v\u003dws.10).aspx \"External link\")  \n\n\u003cbr /\u003e\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko\n\n"
    },
    {
      "id": "169183",
      "timestamp": "2013-03-11T19:14:02+00:00",
      "author": "steve6375",
      "content": "[This](http://sites.google.com/a/rmprepusb.com/www/tutorials/fixnobootxp \"External link\") may be of some help?\n\n"
    },
    {
      "id": "169200",
      "timestamp": "2013-03-12T08:22:41+00:00",
      "author": "dummkopf007",
      "content": "![:idea:](http://reboot.pro/public/style_emoticons/default/idea.gif) you could try ModeConverter, if the **usb** device drive letter *is seen* the program should boot from an iso ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)\n\n[http://reboot.pro/to...e-2#entry165555](http://reboot.pro/topic/17271-create-a-cdfs-iso9660-partition-on-a-usb-flash-drive/page-2#entry165555 \"\")\n\nhope this helps!\n\n**Edited by dummkopf007, 12 March 2013 - 08:23 AM.**\n"
    },
    {
      "id": "169212",
      "timestamp": "2013-03-12T15:43:17+00:00",
      "author": "mindgame",
      "content": "Thanks!\n\nI managed to get into Windows Recovery Console...\n\nI did a bootcfg /scan which didn\u0027t locate any windows installations, which doesnt surprise me as my system is on a logical partition.\n\nI did a fixboot on my primary partition C: (useless HP backup partition) and logical partition D: (system) which didn\u0027t help matters.\n\nI\u0027m hesitant to do a fixmbr as I dont know the full extent of what it could cause. Perhaps if I can do a backup of the current mbr through a utility preferably available in UBCD4Win...\n\nAnyway I booted up again through ubcd and went to diskpart, marked D: as active - nothing then marked C: active - I got the Paragon Boot manager back, now showing the primary partition C: (useless HP backup partition) and an unnamed logical partition of some sort which wasn\u0027t booting either.\n\nSo I\u0027ve run testdisk again and made a couple of logs which I\u0027m hoping you could help enlighten me on what\u0027s going on - whether I should try a fixmbr or try to fix things manually through testdisk or another utility.\n\nDisk:\n\n```\n#1363100652 Disk /dev/sda - 160 GB / 149 GiB - CHS 19457 255 63\n 1 : start\u003d    16065, size\u003d291579750, Id\u003d0F, E\n 5 : start\u003d    16128, size\u003d 45817317, Id\u003d07, L\n 6 : start\u003d 45833508, size\u003d245762307, Id\u003d07, L\n 2 : start\u003d293703344, size\u003d 18878464, Id\u003d07, P\n```\n\n```\n\nTue Mar 12 15:02:48 2013\nCommand line: TestDisk\n\nTestDisk 6.11.3, Data Recovery Utility, May 2009\nChristophe GRENIER \u003cgrenier@cgsecurity.org\u003e\nhttp://www.cgsecurity.org\nOS: Windows XP SP2\nCompiler: GCC 4.3, Cygwin 1005.25 - May  6 2009 20:35:43\next2fs lib: 1.41.4, ntfs lib: 10:0:0, reiserfs lib: 0.3.1-rc8, ewf lib: 20080501\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(/dev/sda)\u003d160041885696\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(/dev/sdb)\u003d15623782400\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\PhysicalDrive0)\u003d160041885696\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\PhysicalDrive1)\u003d15623782400\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\C:)\u003d9665773568\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\D:)\u003d23458466304\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\E:)\u003d125830301184\nfilewin32_getfilesize(\\\\.\\F:) GetFileSize err Incorrect function.\n\nfilewin32_setfilepointer(\\\\.\\F:) SetFilePointer err Incorrect function.\n\nWarning: can\u0027t get size for \\\\.\\F:\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\X:)\u003d15619774464\nfile_pread(4,1,buffer,312592769(19457/254/63)) lseek err Invalid argument\nfile_pread(5,1,buffer,30516947(2221/217/63)) lseek err Invalid argument\nHard disk list\nDisk /dev/sda - 160 GB / 149 GiB - CHS 19457 255 63, sector size\u003d512 - Hitachi HTS543216L9A300\nDisk /dev/sdb - 15 GB / 14 GiB - CHS 2221 218 63, sector size\u003d512 - USB DISK 2.0\n\nPartition table type (auto): Intel\nDisk /dev/sda - 160 GB / 149 GiB - Hitachi HTS543216L9A300\nPartition table type: Intel\n\nInterface Advanced\nGeometry from i386 MBR: head\u003d255 sector\u003d63\nNTFS at 18282/47/54\nNTFS at 1/1/1\nNTFS at 2853/1/1\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d8\nget_geometry_from_list_part_aux head\u003d8 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d16 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d32 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d64 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d128 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d8\n 1 E extended LBA             1   0  1 18150 254 63  291579750\n 5 L HPFS - NTFS              1   1  1  2852 254 63   45817317\n     NTFS, 23 GB / 21 GiB\n   X extended              2853   0  1 18150 254 63  245762370\n 6 L HPFS - NTFS           2853   1  1 18150 254 63  245762307\n     NTFS, 125 GB / 117 GiB\n 2 P HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\n     NTFS, 9665 MB / 9218 MiB\n\nAnalyse Disk /dev/sda - 160 GB / 149 GiB - CHS 19457 255 63\nGeometry from i386 MBR: head\u003d255 sector\u003d63\nNTFS at 18282/47/54\nNTFS at 1/1/1\nNTFS at 2853/1/1\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d8\nget_geometry_from_list_part_aux head\u003d8 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d16 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d32 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d64 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d128 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d8\nCurrent partition structure:\n 1 E extended LBA             1   0  1 18150 254 63  291579750\n 2 P HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\nNo partition is bootable\nLogical partition must not be bootable\n 5 L HPFS - NTFS              1   1  1  2852 254 63   45817317\n   X extended              2853   0  1 18150 254 63  245762370\n 6 L HPFS - NTFS           2853   1  1 18150 254 63  245762307\nBackup partition structure\npartition_save\nAsk the user for vista mode\nAllow partial last cylinder : No\nsearch_vista_part: 0\n\nsearch_part()\nDisk /dev/sda - 160 GB / 149 GiB - CHS 19457 255 63\nNTFS at 0/1/1\nfilesystem size           291604417\nsectors_per_cluster       8\nmft_lcn                   10\nmftmirr_lcn               1007033\nclusters_per_mft_record   -10\nclusters_per_index_record 1\n     HPFS - NTFS              0   1  1 18151 137 34  291604417\n     NTFS, 149 GB / 139 GiB\nFAT32 at 18151/137/35\nFAT1 : 4110-6150\nFAT2 : 6151-8191\nstart_rootdir : 8192 root cluster : 2\nData : 8192-2097151\nsectors : 2097152\ncluster_size : 8\nno_of_cluster : 261120 (2 - 261121)\nfat_length 2041 calculated 2041\n\nFAT32 at 18151/137/35\n     FAT32 LBA            18151 137 35 18282  20 42    2097152 [HP_TOOLS]\n     FAT32, 1073 MB / 1024 MiB\nNTFS at 18282/47/54\nfilesystem size           18878464\nsectors_per_cluster       8\nmft_lcn                   786432\nmftmirr_lcn               1179903\nclusters_per_mft_record   -10\nclusters_per_index_record 1\n     HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\n     NTFS, 9665 MB / 9218 MiB\nfile_pread(4,2,buffer,312581810(19457/81/3)) lseek err Invalid argument\nfile_pread(4,1,buffer,312581810(19457/81/3)) lseek err Invalid argument\nfile_pread(4,8,buffer,312581816(19457/81/9)) lseek err Invalid argument\nfile_pread(4,3,buffer,312581824(19457/81/17)) lseek err Invalid argument\nfile_pread(4,3,buffer,312581871(19457/82/1)) lseek err Invalid argument\nfile_pread(4,8,buffer,312581887(19457/82/17)) lseek err Invalid argument\nfile_pread(4,11,buffer,312581934(19457/83/1)) lseek err Invalid argument\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d8 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d16 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d32 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d64 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d128 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d240 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d1\n\nResults\n   * HPFS - NTFS              0   1  1 18151 137 34  291604417\n     NTFS, 149 GB / 139 GiB\n   P FAT32 LBA            18151 137 35 18282  20 42    2097152 [HP_TOOLS]\n     FAT32, 1073 MB / 1024 MiB\n   P HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\n     NTFS, 9665 MB / 9218 MiB\n\ninterface_write()\n 1 * HPFS - NTFS              0   1  1 18151 137 34  291604417\n 2 P FAT32 LBA            18151 137 35 18282  20 42    2097152 [HP_TOOLS]\n 3 P HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\n\nsearch_part()\nDisk /dev/sda - 160 GB / 149 GiB - CHS 19457 255 63\nNTFS at 0/1/1\nfilesystem size           291604417\nsectors_per_cluster       8\nmft_lcn                   10\nmftmirr_lcn               1007033\nclusters_per_mft_record   -10\nclusters_per_index_record 1\n     HPFS - NTFS              0   1  1 18151 137 34  291604417\n     NTFS, 149 GB / 139 GiB\nNTFS at 1/1/1\nfilesystem size           45817317\nsectors_per_cluster       8\nmft_lcn                   786432\nmftmirr_lcn               2863582\nclusters_per_mft_record   -10\nclusters_per_index_record 1\n     HPFS - NTFS              1   1  1  2852 254 63   45817317\n     NTFS, 23 GB / 21 GiB\nNTFS at 2852/254/63\nfilesystem size           45817317\nsectors_per_cluster       8\nmft_lcn                   786432\nmftmirr_lcn               2863582\nclusters_per_mft_record   -10\nclusters_per_index_record 1\n     HPFS - NTFS              1   1  1  2852 254 63   45817317\n     NTFS found using backup sector!, 23 GB / 21 GiB\nNTFS at 2853/1/1\nfilesystem size           245762307\nsectors_per_cluster       8\nmft_lcn                   786432\nmftmirr_lcn               15360144\nclusters_per_mft_record   -10\nclusters_per_index_record 1\n     HPFS - NTFS           2853   1  1 18150 254 63  245762307\n     NTFS, 125 GB / 117 GiB\nNTFS at 18150/254/63\nfilesystem size           245762307\nsectors_per_cluster       8\nmft_lcn                   786432\nmftmirr_lcn               15360144\nclusters_per_mft_record   -10\nclusters_per_index_record 1\n     HPFS - NTFS           2853   1  1 18150 254 63  245762307\n     NTFS found using backup sector!, 125 GB / 117 GiB\nFAT32 at 18151/137/35\nFAT1 : 4110-6150\nFAT2 : 6151-8191\nstart_rootdir : 8192 root cluster : 2\nData : 8192-2097151\nsectors : 2097152\ncluster_size : 8\nno_of_cluster : 261120 (2 - 261121)\nfat_length 2041 calculated 2041\n\nFAT32 at 18151/137/35\n     FAT32 LBA            18151 137 35 18282  20 42    2097152 [HP_TOOLS]\n     FAT32, 1073 MB / 1024 MiB\nNTFS at 18282/47/54\nfilesystem size           18878464\nsectors_per_cluster       8\nmft_lcn                   786432\nmftmirr_lcn               1179903\nclusters_per_mft_record   -10\nclusters_per_index_record 1\n     HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\n     NTFS, 9665 MB / 9218 MiB\nfile_pread(4,2,buffer,312581810(19457/81/3)) lseek err Invalid argument\nfile_pread(4,1,buffer,312581810(19457/81/3)) lseek err Invalid argument\nfile_pread(4,8,buffer,312581816(19457/81/9)) lseek err Invalid argument\nfile_pread(4,3,buffer,312581824(19457/81/17)) lseek err Invalid argument\nfile_pread(4,3,buffer,312581871(19457/82/1)) lseek err Invalid argument\nfile_pread(4,8,buffer,312581887(19457/82/17)) lseek err Invalid argument\nfile_pread(4,11,buffer,312581934(19457/83/1)) lseek err Invalid argument\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d5\nget_geometry_from_list_part_aux head\u003d8 nbr\u003d2\nget_geometry_from_list_part_aux head\u003d16 nbr\u003d2\nget_geometry_from_list_part_aux head\u003d32 nbr\u003d2\nget_geometry_from_list_part_aux head\u003d64 nbr\u003d2\nget_geometry_from_list_part_aux head\u003d128 nbr\u003d2\nget_geometry_from_list_part_aux head\u003d240 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d5\n\nResults\n     HPFS - NTFS              0   1  1 18151 137 34  291604417\n     NTFS, 149 GB / 139 GiB\n     HPFS - NTFS              1   1  1  2852 254 63   45817317\n     NTFS, 23 GB / 21 GiB\n     HPFS - NTFS           2853   1  1 18150 254 63  245762307\n     NTFS, 125 GB / 117 GiB\n   * FAT32 LBA            18151 137 35 18282  20 42    2097152 [HP_TOOLS]\n     FAT32, 1073 MB / 1024 MiB\n   P HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\n     NTFS, 9665 MB / 9218 MiB\n\ninterface_write()\n 1 * FAT32 LBA            18151 137 35 18282  20 42    2097152 [HP_TOOLS]\n 2 P HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\nsimulate write!\n\nwrite_mbr_i386: starting...\nwrite_all_log_i386: starting...\nNo extended partition\n\nTestDisk exited normally.\n```\n\nThank you!\n\n"
    },
    {
      "id": "169223",
      "timestamp": "2013-03-12T19:52:00+00:00",
      "author": "Wonko the Sane",
      "content": "Well, you have a \"messed enough\" disk.  \nBut I need some of the history.  \nBy any chance was there a Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) or 7 installed to that PC before you installed (or attempted to) install XP to it?  \n\nHow do you remember it was partitioned originally (or when last it worked)?  \nPlease do understand that drive letters are meaningless, or essentialy so, you need to describe the partitions by their size (and optionally label).  \n\nFrom this:\n\n\u003e #1363100652 Disk /dev/sda - 160 GB / 149 GiB - CHS 19457 255 63  \n\u003e 1 : start\u003d 16065, size\u003d291579750, Id\u003d0F, E  \n\u003e 5 : start\u003d 16128, size\u003d 45817317, Id\u003d07, L  \n\u003e 6 : start\u003d 45833508, size\u003d245762307, Id\u003d07, L  \n\u003e 2 : start\u003d293703344, size\u003d 18878464, Id\u003d07, P\n\nYou can see how there are TWO \"holes\" in the partitioning AND that the partitioning is VERY unusual.  \n**HOLE! up to 16065**   \nstart\u003d16065,size\u003d291579750 \u003d\\\u003e END\u003d291595815  \nstart\u003d16128,size\u003d45817317 \u003d\\\u003e END\u003d45833445 + 63\u003d45833508 \\\u003c-size is around 23 Gb  \nstart\u003d45833508,size\u003d245762307 \u003d\\\u003e END\u003d291595815 \\\u003c-size is around 125 Gb  \n**HOLE! 293703344-291595815\u003d2107529**   \nstart\u003d293703344,size\u003d18878464\u003d\\\u003e END\u003d312581808 \\\u003c-size is around 10 Gb\n\nNormally a disk is setup with either just one primary partition or, in the case of the stupid laptops with two or three primary partitions (the second and/or third being recovery/tools).\n\nThe main partition is normally first one, i.e. it starts at either CHS 0/1/1 (LBA 63) (up to XP) or at CHS 0/32/33 (LBA 2048) Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) or later.\n\nYou have instead an Extended partition starting at LBA 16065 (which is CHS 1/0/1) ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)\n\nThis Extended partition contains two Logical volumes (which combined size are correct).\n\nThen you have another \"hole\" of around 1 Gb.\n\nFinally you have a partition starting at LBA 293703344 (which corresponds to a \"queer\" 18282/47/54).\n\nAll the partitioning, exception made for the last (primary) partition are \"compatible\" with the \"old\" XP standard, whilst the last one is \"random\".\n\nSomething really \"queer\" happened to that hard disk partitioning, as the last one is not compatible with XP partitioning tools (which do respect cylinder boundaries) and it may be either:\n\n1. an \"original\" \\[HP_RECOVERY\\] partition created with a Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) or later partitioning scheme\n2. a partition moved/resized through the use of a third party tool compatible with Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) partitioning scheme\n\nI do suspect that one way or the other, you fell in this very dangerous trap:\n\n[http://reboot.pro/to...itioning-issue/](http://reboot.pro/topic/9897-vistawin7-versus-xp-partitioning-issue/ \"\")\n\nPlease try recalling as much as you can how the disk was originally partitioned and as much as you can the sequence of partitioning/resizing/installing that you can remember.\n\nAdditionally, please do re-run test disk (and post the log) changing this setting:\n\n**Allow partial last cylinder : ~~No~~ -\\\u003e YES**\n\n(you want to check also the possibility that the old partitions were fallung outside cylinder boundaries)\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "169224",
      "timestamp": "2013-03-12T20:09:50+00:00",
      "author": "mindgame",
      "content": "\u003e Well, you have a \"messed enough\" disk.  \n\u003e But I need some of the history.  \n\u003e By any chance was there a Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) or 7 installed to that PC before you installed (or attempted to) install XP to it?  \n\u003e\n\u003e How do you remember it was partitioned originally (or when last it worked)?  \n\u003e Please do understand that drive letters are meaningless, or essentialy so, you need to describe the partitions by their size (and optionally label).  \n\u003e\n\u003e From this:\n\u003e\n\u003e You can see how there are TWO \"holes\" in the partitioning AND that the partitioning is VERY unusual.  \n\u003e **HOLE! up to 16065**   \n\u003e start\u003d16065,size\u003d291579750 \u003d\\\u003e END\u003d291595815  \n\u003e start\u003d16128,size\u003d45817317 \u003d\\\u003e END\u003d45833445 + 63\u003d45833508 \\\u003c-size is around 23 Gb  \n\u003e start\u003d45833508,size\u003d245762307 \u003d\\\u003e END\u003d291595815 \\\u003c-size is around 125 Gb  \n\u003e **HOLE! 293703344-291595815\u003d2107529**   \n\u003e start\u003d293703344,size\u003d18878464\u003d\\\u003e END\u003d312581808 \\\u003c-size is around 10 Gb\n\u003e\n\u003e Normally a disk is setup with either just one primary partition or, in the case of the stupid laptops with two or three primary partitions (the second and/or third being recovery/tools).\n\u003e\n\u003e The main partition is normally first one, i.e. it starts at either CHS 0/1/1 (LBA 63) (up to XP) or at CHS 0/32/33 (LBA 2048) Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) or later.\n\u003e\n\u003e You have instead an Extended partition starting at LBA 16065 (which is CHS 1/0/1) ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)\n\u003e\n\u003e This Extended partition contains two Logical volumes (which combined size are correct).\n\u003e\n\u003e Then you have another \"hole\" of around 1 Gb.\n\u003e\n\u003e Finally you have a partition starting at LBA 293703344 (which corresponds to a \"queer\" 18282/47/54).\n\u003e\n\u003e All the partitioning, exception made for the last (primary) partition are \"compatible\" with the \"old\" XP standard, whilst the last one is \"random\".\n\u003e\n\u003e Something really \"queer\" happened to that hard disk partitioning, as the last one is not compatible with XP partitioning tools (which do respect cylinder boundaries) and it may be either:\n\u003e\n\u003e 1. an \"original\" \\[HP_RECOVERY\\] partition created with a Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) or later partitioning scheme\n\u003e 2. a partition moved/resized through the use of a third party tool compatible with Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) partitioning scheme\n\u003e\n\u003e I do suspect that one way or the other, you fell in this very dangerous trap:\n\u003e\n\u003e [http://reboot.pro/to...itioning-issue/](http://reboot.pro/topic/9897-vistawin7-versus-xp-partitioning-issue/ \"\")\n\u003e\n\u003e Please try recalling as much as you can how the disk was originally partitioned and as much as you can the sequence of partitioning/resizing/installing that you can remember.\n\u003e\n\u003e Additionally, please do re-run test disk (and post the log) changing this setting:\n\u003e\n\u003e **Allow partial last cylinder : ~~No~~ -\\\u003e YES**\n\u003e\n\u003e (you want to check also the possibility that the old partitions were fallung outside cylinder boundaries)\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nThank you Wonko.\n\nYou are right, the HP laptop originally came with some version of Vista pre-installed. I did one \"format\" (windows xp setup) and perhaps one more later on where I deleted the previous partitions except the HP recovery one and created the current configuration. Due to me deleting the previous partitions it seemed that the windows xp setup \"bumped\" the \\[HP_RECOVERY\\] partition to be the primary/active one. The 22 GB is my system partition while the 120ish GB one is my storage partition, both logical partitions.\n\nI think 1 GB makes up a hidden \\[HP_TOOLS\\] partition as well that I would guess is the test utilities I have available from HP in the BIOS menu...\n\nThe HP_RECOVERY and my extended/logical partitions seem perfectly accessible.\n\nI backed up MBR with MBRWiz and did the fixmbr through cmdcons but it didnt help. Rather when I booted back into UBCD4Win and used diskpart to select my primary partition as active again I still got the Paragon boot manager when I restarted which I thought a \"fixmbr\" would have gotten rid of... hmm\n\n"
    },
    {
      "id": "169225",
      "timestamp": "2013-03-12T20:39:23+00:00",
      "author": "Wonko the Sane",
      "content": "Good. :smile:\n\nOn which partition are currenty the files:\n\nNTLDR\n\nBOOT.INI\n\nNTDETECT.COM\n\n? (two possibilities, the Primary \\[HP_RECOVERY\\] one or the 22 GB one)\n\nWhat is the scope?\n\nLike booting from the system \"as is\" (in the sense of managing to boot it without touching current partitioning) or \"fixing it\u0027s partitioning\"?\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "169227",
      "timestamp": "2013-03-12T20:47:51+00:00",
      "author": "mindgame",
      "content": "\u003e Good. :smile:  \n\u003e\n\u003e On which partition are currenty the files:\n\u003e\n\u003e NTLDR\n\u003e\n\u003e BOOT.INI\n\u003e\n\u003e NTDETECT.COM\n\u003e\n\u003e ? (two possibilities, the Primary \\[HP_RECOVERY\\] one or the 22 GB one)\n\u003e\n\u003e What is the scope?\n\u003e\n\u003e Like booting from the system \"as is\" (in the sense of managing to boot it without touching current partitioning) or \"fixing it\u0027s partitioning\"?\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nAllow partial last cylinder is/was already set to \u0027Yes\u0027\n\nThey are on the primary \\[HP_RECOVERY\\]\n\nThe initial reason that I ran Paragon Partition Manager was to check if I could maybe do something about the partitioning as I knew it wasn\u0027t ideal although my system was running and stable.\n\nNow I\u0027m satisfied to get it running again with current partitioning until I get an environment where I can backup/copy everything before attempting to correct the partitions. A running system with no loss of data is really my #1 concern now...\n\nThanks!\n\n**Edited by mindgame, 12 March 2013 - 08:53 PM.**\n"
    },
    {
      "id": "169243",
      "timestamp": "2013-03-13T09:38:03+00:00",
      "author": "Wonko the Sane",
      "content": "The simplest approach would be IMHO to:\n\n1. create a (very small, around 8 Mb) primary partition in the \"first hole\"\n2. set it as active\n3. format it as FAT\n4. copy to it the three files NTLDR, NTDETECT.COM and BOOT.INI\n5. add to it a grub4dos grldr (just in case)\n\nYou have a working UBCD4WIN, cannot say if it has Disk Management working, can you check?\n\nIn the worst case we can create one such partition entry in the MBR directly with Tiny Hexer.\n\nIn ubcd4win you also have mbrfix (and mbrwiz) that should provide a handy way to backup the MBR before fiddling with it and restore the \"standard\" Windows XP MBR.\n\nGet the grldr file from here:\n\n[http://code.google.c.../downloads/list](http://code.google.com/p/grub4dos-chenall/downloads/list \"External link\")\n\n[http://code.google.c...-03.7z\\\u0026can\u003d2\\\u0026q\u003d](http://code.google.com/p/grub4dos-chenall/downloads/detail?name\u003dgrub4dos-0.4.5c-2013-03-03.7z\u0026can\u003d2\u0026q\u003d \"External link\")\n\nMake a copy of the BOOT.INI you have and edit it so that it contains:\n\n```\n\n\n\n[boot loader]\nTimeout\u003d30\ndefault\u003dmulti(0)disk(0)rdisk(0)partition(1)\\WINDOWS\n[operating systems]\nmulti(0)disk(0)rdisk(0)partition(1)\\WINDOWS\u003d\"Microsoft Windows XP Professional 1\" /noexecute\u003doptin /fastdetect\nmulti(0)disk(0)rdisk(0)partition(2)\\WINDOWS\u003d\"Microsoft Windows XP Professional 2\" /noexecute\u003doptin /fastdetect\nmulti(0)disk(0)rdisk(0)partition(3)\\WINDOWS\u003d\"Microsoft Windows XP Professional 3\" /noexecute\u003doptin /fastdetect\nmulti(0)disk(0)rdisk(0)partition(4)\\WINDOWS\u003d\"Microsoft Windows XP Professional 4\" /noexecute\u003doptin /fastdetect\nmulti(0)disk(0)rdisk(0)partition(5)\\WINDOWS\u003d\"Microsoft Windows XP Professional 5\" /noexecute\u003doptin /fastdetect\nC:\\grldr\u003d\"Grub4dos\"\n```\n\nBoot from the UBCD4WIn and run mbrfix:\n\n[http://www.sysint.no...ting/mbrfix.htm](http://www.sysint.no/nedlasting/mbrfix.htm \"External link\")\n\nMbrFix /drive \\\u003cnum\\\u003e driveinfo \\\u003c-- num will be 0 if you booted from CD and most probably 1 if you booted form the USB stick, in any case make sure that the \\\u003cnum\\\u003e that you are using reports about the \"right\" (internal) disk drive.\n\nThen:\n\nMbrFix /drive \\\u003cnum\\\u003e savembr \\\u003cfile\\\u003e \\\u003c-- make a backup of current MBR \"as is\".\n\nMbrFix /drive \\\u003cnum\\\u003e fixmbr \\\u003c-- restore the \"standard\" 2K/XP MBR CODE\n\nNow reboot, run Disk Manager (if you have it) and create the small initial partition.\n\nFormat it as FAT.\n\nMake sure that it is Active.\n\nCopy to it the mentioned files.\n\nReboot, and hopefully you should see the 5 options to boot XP and the grub4dos option.\n\nPost if you have any issue BEFORE doing something you are not confident in doing.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "169268",
      "timestamp": "2013-03-13T16:16:03+00:00",
      "author": "mindgame",
      "content": "\u003e The simplest approach would be IMHO to:\n\u003e\n\u003e 1. create a (very small, around 8 Mb) primary partition in the \"first hole\"\n\u003e 2. set it as active\n\u003e 3. format it as FAT\n\u003e 4. copy to it the three files NTLDR, NTDETECT.COM and BOOT.INI\n\u003e 5. add to it a grub4dos grldr (just in case)\n\u003e\n\u003e You have a working UBCD4WIN, cannot say if it has Disk Management working, can you check?\n\u003e\n\u003e In the worst case we can create one such partition entry in the MBR directly with Tiny Hexer.\n\u003e\n\u003e In ubcd4win you also have mbrfix (and mbrwiz) that should provide a handy way to backup the MBR before fiddling with it and restore the \"standard\" Windows XP MBR.\n\u003e\n\u003e Get the grldr file from here:\n\u003e\n\u003e [http://code.google.c.../downloads/list](http://code.google.com/p/grub4dos-chenall/downloads/list \"External link\")\n\u003e\n\u003e [http://code.google.c...-03.7z\\\u0026can\u003d2\\\u0026q\u003d](http://code.google.com/p/grub4dos-chenall/downloads/detail?name\u003dgrub4dos-0.4.5c-2013-03-03.7z\u0026can\u003d2\u0026q\u003d \"External link\")\n\u003e\n\u003e Make a copy of the BOOT.INI you have and edit it so that it contains:\n\u003e\n\u003e ```\n\u003e\n\u003e\n\u003e [boot loader]\n\u003e Timeout\u003d30\n\u003e default\u003dmulti(0)disk(0)rdisk(0)partition(1)\\WINDOWS\n\u003e [operating systems]\n\u003e multi(0)disk(0)rdisk(0)partition(1)\\WINDOWS\u003d\"Microsoft Windows XP Professional 1\" /noexecute\u003doptin /fastdetect\n\u003e multi(0)disk(0)rdisk(0)partition(2)\\WINDOWS\u003d\"Microsoft Windows XP Professional 2\" /noexecute\u003doptin /fastdetect\n\u003e multi(0)disk(0)rdisk(0)partition(3)\\WINDOWS\u003d\"Microsoft Windows XP Professional 3\" /noexecute\u003doptin /fastdetect\n\u003e multi(0)disk(0)rdisk(0)partition(4)\\WINDOWS\u003d\"Microsoft Windows XP Professional 4\" /noexecute\u003doptin /fastdetect\n\u003e multi(0)disk(0)rdisk(0)partition(5)\\WINDOWS\u003d\"Microsoft Windows XP Professional 5\" /noexecute\u003doptin /fastdetect\n\u003e C:\\grldr\u003d\"Grub4dos\"\n\u003e ```\n\u003e\n\u003e Boot from the UBCD4WIn and run mbrfix:\n\u003e\n\u003e [http://www.sysint.no...ting/mbrfix.htm](http://www.sysint.no/nedlasting/mbrfix.htm \"External link\")\n\u003e\n\u003e MbrFix /drive \\\u003cnum\\\u003e driveinfo \\\u003c-- num will be 0 if you booted from CD and most probably 1 if you booted form the USB stick, in any case make sure that the \\\u003cnum\\\u003e that you are using reports about the \"right\" (internal) disk drive.\n\u003e\n\u003e Then:\n\u003e\n\u003e MbrFix /drive \\\u003cnum\\\u003e savembr \\\u003cfile\\\u003e \\\u003c-- make a backup of current MBR \"as is\".\n\u003e\n\u003e MbrFix /drive \\\u003cnum\\\u003e fixmbr \\\u003c-- restore the \"standard\" 2K/XP MBR CODE\n\u003e\n\u003e Now reboot, run Disk Manager (if you have it) and create the small initial partition.\n\u003e\n\u003e Format it as FAT.\n\u003e\n\u003e Make sure that it is Active.\n\u003e\n\u003e Copy to it the mentioned files.\n\u003e\n\u003e Reboot, and hopefully you should see the 5 options to boot XP and the grub4dos option.\n\u003e\n\u003e Post if you have any issue BEFORE doing something you are not confident in doing.\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nBy Disk Management/manager you mean the \"windows\" one? If so yes that is accessible in UBCD4Win. The problem I have is that the only unallocated space that shows up in it is exactly 1.00 GB which I believe contains the \\[HP_TOOLS\\] I have available in the bios menu...\n\nI did a backup of the mbr again and tried fixmbr again with Mbrfix. Instead of the HP message \"non-system disk or disk error, replace and strike any key when ready\" I now got a blank screen with blinking cursor... This leads me to believe that the windows recovery console was only operating on the USB when I issued fixboot and fixmbr even though the RC prompted me to logon onto my actual windows installation.\n\n\u003cbr /\u003e\n\nIt seemed like APLC was disabled after all when glancing over the last log so here is a new one with APLC set to \u0027Yes\u0027\n\nThanks.\n\n```\nWed Mar 13 14:48:03 2013\nCommand line: TestDisk\n\nTestDisk 6.11.3, Data Recovery Utility, May 2009\nChristophe GRENIER \u003cgrenier@cgsecurity.org\u003e\nhttp://www.cgsecurity.org\nOS: Windows XP SP2\nCompiler: GCC 4.3, Cygwin 1005.25 - May  6 2009 20:35:43\next2fs lib: 1.41.4, ntfs lib: 10:0:0, reiserfs lib: 0.3.1-rc8, ewf lib: 20080501\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(/dev/sda)\u003d160041885696\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(/dev/sdb)\u003d15623782400\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\PhysicalDrive0)\u003d160041885696\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\PhysicalDrive1)\u003d15623782400\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\C:)\u003d9665773568\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\D:)\u003d23458466304\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\E:)\u003d125830301184\nfilewin32_getfilesize(\\\\.\\F:) GetFileSize err Incorrect function.\n\nfilewin32_setfilepointer(\\\\.\\F:) SetFilePointer err Incorrect function.\n\nWarning: can\u0027t get size for \\\\.\\F:\ndisk_get_size_win32 IOCTL_DISK_GET_LENGTH_INFO(\\\\.\\X:)\u003d15619774464\nfile_pread(4,1,buffer,312592769(19457/254/63)) lseek err Invalid argument\nfile_pread(5,1,buffer,30516947(2221/217/63)) lseek err Invalid argument\nHard disk list\nDisk /dev/sda - 160 GB / 149 GiB - CHS 19457 255 63, sector size\u003d512 - Hitachi HTS543216L9A300\nDisk /dev/sdb - 15 GB / 14 GiB - CHS 2221 218 63, sector size\u003d512 - USB DISK 2.0\n\nPartition table type (auto): Intel\nDisk /dev/sda - 160 GB / 149 GiB - Hitachi HTS543216L9A300\nPartition table type: Intel\nNew options :\n Dump : No\n Cylinder boundary : Yes\n Allow partial last cylinder : Yes\n Expert mode : No\nComputes LBA from CHS for Disk /dev/sda - 160 GB / 149 GiB - CHS 19458 255 63\n\nAnalyse Disk /dev/sda - 160 GB / 149 GiB - CHS 19458 255 63\nGeometry from i386 MBR: head\u003d255 sector\u003d63\nNTFS at 18282/47/54\nNTFS at 1/1/1\nNTFS at 2853/1/1\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d8\nget_geometry_from_list_part_aux head\u003d8 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d16 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d32 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d64 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d128 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d8\nCurrent partition structure:\n 1 E extended LBA             1   0  1 18150 254 63  291579750\n 2 * HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\n 5 L HPFS - NTFS              1   1  1  2852 254 63   45817317\n   X extended              2853   0  1 18150 254 63  245762370\n 6 L HPFS - NTFS           2853   1  1 18150 254 63  245762307\nAsk the user for vista mode\nAllow partial last cylinder : Yes\nsearch_vista_part: 1\n\nsearch_part()\nDisk /dev/sda - 160 GB / 149 GiB - CHS 19458 255 63\nNTFS at 0/1/1\nfilesystem size           291604417\nsectors_per_cluster       8\nmft_lcn                   10\nmftmirr_lcn               1007033\nclusters_per_mft_record   -10\nclusters_per_index_record 1\n     HPFS - NTFS              0   1  1 18151 137 34  291604417\n     NTFS, 149 GB / 139 GiB\nFAT32 at 18151/137/35\nFAT1 : 4110-6150\nFAT2 : 6151-8191\nstart_rootdir : 8192 root cluster : 2\nData : 8192-2097151\nsectors : 2097152\ncluster_size : 8\nno_of_cluster : 261120 (2 - 261121)\nfat_length 2041 calculated 2041\n\nFAT32 at 18151/137/35\n     FAT32 LBA            18151 137 35 18282  20 42    2097152 [HP_TOOLS]\n     FAT32, 1073 MB / 1024 MiB\nNTFS at 18282/47/54\nfilesystem size           18878464\nsectors_per_cluster       8\nmft_lcn                   786432\nmftmirr_lcn               1179903\nclusters_per_mft_record   -10\nclusters_per_index_record 1\n     HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\n     NTFS, 9665 MB / 9218 MiB\nfile_pread(4,2,buffer,312581810(19457/81/3)) lseek err Invalid argument\nfile_pread(4,1,buffer,312581810(19457/81/3)) lseek err Invalid argument\nfile_pread(4,8,buffer,312581816(19457/81/9)) lseek err Invalid argument\nfile_pread(4,3,buffer,312581824(19457/81/17)) lseek err Invalid argument\nfile_pread(4,3,buffer,312581871(19457/82/1)) lseek err Invalid argument\nfile_pread(4,8,buffer,312581887(19457/82/17)) lseek err Invalid argument\nfile_pread(4,11,buffer,312581934(19457/83/1)) lseek err Invalid argument\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d8 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d16 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d32 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d64 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d128 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d240 nbr\u003d1\nget_geometry_from_list_part_aux head\u003d255 nbr\u003d1\n\nResults\n   * HPFS - NTFS              0   1  1 18151 137 34  291604417\n     NTFS, 149 GB / 139 GiB\n   P FAT32 LBA            18151 137 35 18282  20 42    2097152 [HP_TOOLS]\n     FAT32, 1073 MB / 1024 MiB\n   P HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\n     NTFS, 9665 MB / 9218 MiB\n\ninterface_write()\n 1 * HPFS - NTFS              0   1  1 18151 137 34  291604417\n 2 P FAT32 LBA            18151 137 35 18282  20 42    2097152 [HP_TOOLS]\n 3 P HPFS - NTFS          18282  47 54 19457  80 63   18878464 [HP_RECOVERY]\nsimulate write!\n\nwrite_mbr_i386: starting...\nwrite_all_log_i386: starting...\nNo extended partition\n\nTestDisk exited normally.\n```\n\n\u003cbr /\u003e\n\n**Edited by mindgame, 13 March 2013 - 04:20 PM.**\n"
    },
    {
      "id": "169272",
      "timestamp": "2013-03-13T16:44:58+00:00",
      "author": "Wonko the Sane",
      "content": "There is a (very small) \"hole\" before the large Extended partition, usable from 0/1/1 to 0/254/63 or from LBA 63 with length 16002 sectors, as the extended partition starts on 1/0/1 or LBA 16065.\n\nIf you get to Disk Management (yes, the \"XP\" one) in UBCD4win and select the Extended partition, you might be able to use the \"left arrow\" on keyboard to select this little space (and then create a partition in it). ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nThe size of it is so small that you will probably need to maximize the Disk Manager window to just see a \"vertical line\" selected...\n\nIf you cannot do the above, try if Tiny Hexer works from UBCD4win (it should) and if it can open \\\\\\\\.\\\\Physicaldrive0 or \\\\\\\\.\\\\Physicaldrive1 (FIle-\\\u003eDisk-\\\u003eOpen Drive), (it also should work alright) then I will give you the Hex codes to be manually typed in the partition table.\n\nYou haven\u0027t yet cleared if you are running the UBCD4win from CD\\\\DVD or from USB stick, as said, be VERY careful about choosing the right disk (or \\\\\\\\.\\\\Physicaldrive***n***), this:\n\n\u003e *I did a backup of the mbr again and tried fixmbr again with Mbrfix. Instead of the HP message \"non-system disk or disk error, replace and strike any key when ready\" I now got a blank screen with blinking cursor... This leads me to believe that the windows recovery console was only operating on the USB when I issued fixboot and fixmbr even though the RC prompted me to logon onto my actual windows installation.*\n\nmay also mean that you had disks \"swapped\", testdisk:\n\n\u003e Hard disk list  \n\u003e Disk /dev/sda - 160 GB / 149 GiB - CHS 19457 255 63, sector size\u003d512 - Hitachi HTS543216L9A300  \n\u003e Disk /dev/sdb - 15 GB / 14 GiB - CHS 2221 218 63, sector size\u003d512 - USB DISK 2.0\n\nsees the 160 Gb disk as sda, which corresponds to \\\\\\\\.\\\\Physicaldrive0, but the recovery console (or other tools) may see it with a different order.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "169338",
      "timestamp": "2013-03-14T11:43:18+00:00",
      "author": "mindgame",
      "content": "I am running everything from USB. I am careful about selecting the right drive.\n\nThis is the best \"view\" I can get with disk manager; I\u0027m not able to select any \"hole\"\n\n![MzZKITI.png](http://i.imgur.com/MzZKITI.png)\n\nI\u0027m hesitant about hex editing stuff, something could go wrong even if I type in the exact things you provide me? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nThanks\n\n"
    },
    {
      "id": "169343",
      "timestamp": "2013-03-14T12:54:56+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I am running everything from USB. I am careful about selecting the right drive.\n\u003e\n\u003e This is the best \"view\" I can get with disk manager; I\u0027m not able to select any \"hole\"\n\nYes, once you have like in the image, selected the Extended partition, what happens if you press the \"\\\u003c-\" (left arrow key) on your keyboard?\n\nAt least here, even if the (tiny when compared to the overall size of the disk) first partition on a disk is represented as an \"almost invisible\" vertical line I can select it alright this way.\n\nTry another thing. ![:idea:](http://reboot.pro/public/style_emoticons/default/idea.gif)\n\nCick on the menu:\n\nview-\\\u003eSettings\n\nchoose the \"Scaling\" tab.\n\nSet BOTH the radio buttons to \"All the same size\".\n\nYou should now be able to see the first non-allocated space before the Extended partition. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n\u003e I\u0027m hesitant about hex editing stuff, something could go wrong even if I type in the exact things you provide me? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\u003e\n\u003e Thanks\n\nWell, you can save/backup the current MBR, nothing will prevent you to restore it if anything goes wrong, as a matter of fact you should already have a backup of it, made with:\n\n```\nMbrFix /drive \u003cnum\u003e savembr \u003cfile\u003e \u003c-- make a backup of current MBR \"as is\".\n```\n\nIf you prefer, you can send/post to me the copy of the saved MBR, and I will edit it.\n\nAll you will have to do is to replace it.\n\nActually, independently from whether you prefer to edit yourself the MBR or simply replace the edited one, it would be advisable that I have a look at it. (just to make double sure that what we have seen with testdisk is correct and to verify that there is not some other issue, like, as an example partition entry in \"wrong\" order).\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "169351",
      "timestamp": "2013-03-14T14:18:32+00:00",
      "author": "mindgame",
      "content": "\u003e Yes, once you have like in the image, selected the Extended partition, what happens if you press the \"\\\u003c-\" (left arrow key) on your keyboard?\n\u003e\n\u003e At least here, even if the (tiny when compared to the overall size of the disk) first partition on a disk is represented as an \"almost invisible\" vertical line I can select it alright this way.\n\u003e\n\u003e Try another thing. ![:idea:](http://reboot.pro/public/style_emoticons/default/idea.gif)\n\u003e\n\u003e Cick on the menu:\n\u003e\n\u003e view-\\\u003eSettings\n\u003e\n\u003e choose the \"Scaling\" tab.\n\u003e\n\u003e Set BOTH the radio buttons to \"All the same size\".\n\u003e\n\u003e You should now be able to see the first non-allocated space before the Extended partition. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\u003e\n\u003e Well, you can save/backup the current MBR, nothing will prevent you to restore it if anything goes wrong, as a matter of fact you should already have a backup of it, made with:\n\u003e\n\u003e ```\n\u003e MbrFix /drive \u003cnum\u003e savembr \u003cfile\u003e \u003c-- make a backup of current MBR \"as is\".\n\u003e ```\n\u003e\n\u003e If you prefer, you can send/post to me the copy of the saved MBR, and I will edit it.\n\u003e\n\u003e All you will have to do is to replace it.\n\u003e\n\u003e Actually, independently from whether you prefer to edit yourself the MBR or simply replace the edited one, it would be advisable that I have a look at it. (just to make double sure that what we have seen with testdisk is correct and to verify that there is not some other issue, like, as an example partition entry in \"wrong\" order).\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nI tried all the view configurations to no avail HOWEVER the diskpart that is available in the Windows RC identified those initial \\~8 mb of free storage and let me create the new partition, after that I just booted into UBCD4Win, did the formatting and the stuff you described and voila my system is now bootable again ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nMission accomplished for now! ![:worship:](http://reboot.pro/public/style_emoticons/default/worship.gif)\n\nThanks a bunch!\n\n"
    },
    {
      "id": "169357",
      "timestamp": "2013-03-14T15:18:50+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I tried all the view configurations to no avail HOWEVER the diskpart that is available in the Windows RC identified those initial \\~8 mb of free storage and let me create the new partition, after that I just booted into UBCD4Win, did the formatting and the stuff you described and voila my system is now bootable again ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Mission accomplished for now! ![:worship:](http://reboot.pro/public/style_emoticons/default/worship.gif)\n\u003e\n\u003e Thanks a bunch!\n\nGood :smile:.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    }
  ]
}