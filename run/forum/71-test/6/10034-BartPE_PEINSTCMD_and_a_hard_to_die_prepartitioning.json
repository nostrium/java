{
  "id": "10034",
  "title": "BartPE PEINST.CMD and a hard to die pre-partitioning",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "87360",
      "timestamp": "2009-12-21T10:36:55+00:00",
      "author": "wilma05",
      "content": "\u003e great tutorial so far, but this only works if the target drive already has a ntldr and a boot.ini-file, because the OS is already installed on it for example.  \n\u003e\n\u003e What if I want to create a HDD that just contains the BartPE? What kind of ntldr and boot.ini am I supposed to use?! I tried to copy those of my internal system disk, but after peinst went on fine, I get an MBR Error upon boot...  \n\u003e\n\u003e I appreciate any helpful hints...\n\n\u003cbr /\u003e\n\ngreat!  \n\nEDIT by jaclaz:  \nTOPIC split from:  \n[http://www.boot-land...?showtopic\u003d4866](http://www.boot-land.net/forums/index.php?showtopic\u003d4866 \"External link\")   \n"
    },
    {
      "id": "87366",
      "timestamp": "2009-12-21T11:34:06+00:00",
      "author": "was_jaclaz",
      "content": "\u003e great tutorial so far, but this only works if the target drive already has a ntldr and a boot.ini-file, because the OS is already installed on it for example.  \n\u003e\n\u003e What if I want to create a HDD that just contains the BartPE? What kind of ntldr and boot.ini am I supposed to use?! I tried to copy those of my internal system disk, but after peinst went on fine, I get an MBR Error upon boot...  \n\u003e\n\u003e I appreciate any helpful hints...\n\nWell, there is no such thing as \"a\" MBR error.  \nYou should state the exact error you get.  \nWhat you need is actually simple:  \nPartition/Format the HD from XP  \nCopy to it:  \nNTLDR  \nBOOT.INI  \n(the BOOT.INI needs to have at least two entries) this:  \n[http://diddy.boot-la...all_windows.htm](http://diddy.boot-land.net/grub4dos/files/install_windows.htm \"External link\")  \nwill do.  \n\nTry booting from the HD, if you get to the BOOT.INI choices, it\u0027s OK.  \nIf you have an error, post describing exactly HOW you partitioned/formatted the device and the exact error you are getting.  \n\nI presume you have a working .iso of BartPE, don\u0027t you?  \n\nIf yes, simply (assuming you have the .iso mounted as D:\\\\ and the device you want to put BartPE to as E:\\\\):  \n\n* copy from D:\\\\I386\\\\SETUPLDR.BIN to the ROOT of E:\\\\\n* copy from D:\\\\I386\\\\NTDETCT.COM to the ROOT of E:\\\\\n* copy the whole contents of the D:\\\\ to E:\\\\\n* rename E:\\\\I386\\\\ to E:\\\\minint\n* delete E:\\\\NTLDR\n* delete E:\\\\BOOT.INI\n* rename E:\\\\SETUPLDR.BIN to E:\\\\NTLDR\n* try booting from the device\n\n\u003cbr /\u003e\n\nINSTEAD of step #4, it is advised that you modify SETUPLDR.BIN, as some (actually old and deprecated) BartPE plugins use the \\\\I386\\\\ path hardcoded:  \n[http://www.911cd.net...showtopic\u003d17504](http://www.911cd.net/forums//index.php?showtopic\u003d17504 \"External link\")  \n\nINSTEAD of steps #5, #6 and #7 you may want to add grldr and menu.lst from the grub4dos package:  \n[http://nufans.net/grub4dos/](http://nufans.net/grub4dos/ \"External link\")  \n[http://nufans.net/gr...-2009-10-16.zip](http://nufans.net/grub4dos/grub4dos-0.4.4-2009-10-16.zip \"External link\")  \n\nSo that you have multi-boot capabilities.  \nGuide is here:  \n[http://diddy.boot-la...os/Grub4dos.htm](http://diddy.boot-land.net/grub4dos/Grub4dos.htm \"External link\")  \n\nHowever a suitable entry to add in menu.lst is:  \n\n```\ntitle find and load SETUPLDR.BIN of 1.x PE\u0026#39;s\n\nfind --set-root --ignore-floppies --ignore-cd /setupldr.bin\n\nchainloader /setupldr.bin\n```\n\n\u003cbr /\u003e\n\nIf you want to keep a \"single boot\", INSTEAD of step #7 you may want to use my batch and change the name of the loader in the bootsector:  \n[http://www.boot-land...?showtopic\u003d2362](http://www.boot-land.net/forums/?showtopic\u003d2362 \"External link\")  \nthis way there won\u0027t be confusion later with the SETUPLDR.BIN renamed to NTLDR.  \n\n:wink:  \n\njaclaz   \n"
    },
    {
      "id": "87375",
      "timestamp": "2009-12-21T12:34:46+00:00",
      "author": "wilma05",
      "content": "hold on a second - why isnt a boot.ini, that looks like:  \n\n\\[boot loader\\]  \ntimeout\u003d5  \ndefault\u003dc:\\\\peboot.bin  \n\\[operating systems\\]  \nc:\\\\peboot.bin\u003d\"Bart\"  \n\ndoing the trick?  \n\nplus: I\u0027m a noob. Could you please base your guide upon Shirins tutorial? Yours reads like starting from scratch...   \n"
    },
    {
      "id": "87376",
      "timestamp": "2009-12-21T12:47:23+00:00",
      "author": "was_jaclaz",
      "content": "\u003e hold on a second - why isnt a boot.ini, that looks like:  \n\u003e\n\u003e \\[boot loader\\]  \n\u003e timeout\u003d5  \n\u003e default\u003dc:\\\\peboot.bin  \n\u003e \\[operating systems\\]  \n\u003e c:\\\\peboot.bin\u003d\"Bart\"  \n\u003e\n\u003e doing the trick?\n\nBecause (**Wild** guess since you fail to report the exact error you get and steps you took) the peboot.bin (which is a copy of the bootsector of the hard disk, but with NTLDR name edited to PELDR) somehow was not created properly:  \n\u003e echo PEINST: Installing PE Bootsector (peboot.bin)  \n\u003e **%_base%mkbt.exe -x -c %_target% %_target%\\\\peboot.bin**   \n\u003e if errorlevel 1 goto _abort  \n\u003e echo PEINST: Updating peboot.bin  \n\u003e **%_base%nt2peldr.exe %_target%\\\\peboot.bin**   \n\u003e if errorlevel 1 goto _abort  \n\u003e echo PEINST: Updating boot.ini  \n\u003e echo PEINST: Setting timeout to 30 seconds  \n\u003e rem bootcfg.exe /Timeout 30  \n\u003e rem if errorlevel 1 goto _abort  \n\u003e echo PEINST: Adding BartPE entry to %_target%\\\\boot.ini  \n\u003e findstr /I /B /L /V \"%_target%\\\\peboot.bin\" %_target%\\\\boot.ini \\\u003e %_target%\\\\boot$.ini  \n\u003e echo %_target%\\\\peboot.bin\u003d\"Boot BartPE (by PE Builder)\" \\\u003e\\\u003e %_target%\\\\boot$.ini  \n\u003e attrib -r -h -s %_target%\\\\boot.ini  \n\u003e if errorlevel 1 goto _abort  \n\u003e del /q /f %_target%\\\\boot.ini  \n\u003e if errorlevel 1 goto _abort  \n\u003e ren %_target%\\\\boot$.ini boot.ini  \n\u003e if errorlevel 1 goto _abort  \n\u003e attrib +r +h +s %_target%\\\\boot.ini  \n\u003e echo PEINST: Installing PE Loader (peldr)  \n\u003e **copy %_source%\\\\i386\\\\setupldr.bin %_target%\\\\peldr**   \n\u003e if errorlevel 1 goto _abort  \n\u003e echo PEINST: PE-Loader installed...  \n\u003e pause  \n\u003e goto _main\n\nOr you are using a peboot.bin copied form another drive....  \nOr you are missing a PELDR file....  \nOr .....  \n\n\u003e plus: I\u0027m a noob. Could you please base your guide upon Shirins tutorial? Yours reads like starting from scratch...\nYep, that was EXACTLY the idea.  \nI summed up the few steps that PEINST.CMD (that is the object of the tutorial) does automagically.  \nSince it didn\u0027t work, and you did not gave us details on the problem, I suggested by-passing it and try doing things manually.  \n\njaclaz   \n"
    },
    {
      "id": "87379",
      "timestamp": "2009-12-21T13:11:20+00:00",
      "author": "wilma05",
      "content": "ok, here\u0027s what I did (again):  \n\n1) formatted a 60GB OCZ SSD and assigned D:\\\\  \n2) copied ntldr and boot.ini from my running WinXP (on C:\\\\) to D:\\\\, so that peinst wont return errors  \n3) went through Shirins tutorial (result: [http://tinyurl.com/yecph49)](http://tinyurl.com/yecph49) \"External link\")  \n4) replaced D:\\\\boot.ini with a self-created boot.ini, containing:  \n\n\\[boot loader\\]  \ntimeout\u003d30  \ndefault\u003dc:\\\\peboot.bin  \n\\[operating systems\\]  \nc:\\\\peboot.bin\u003d\"Boot BartPE (by PE Builder)\"   \n\n5) reboot - here\u0027s what I receive:  \n[http://tinyurl.com/ycenuhh](http://tinyurl.com/ycenuhh \"External link\")  \n\nof course, I\u0027ve selected the proper boot device, not the CD/DVD drive - awkward...   \n"
    },
    {
      "id": "87384",
      "timestamp": "2009-12-21T13:53:02+00:00",
      "author": "was_jaclaz",
      "content": "\u003e 1) formatted a 60GB OCZ SSD and assigned D:\\\\  \n\u003e 2) copied ntldr and boot.ini from my running WinXP (on C:\\\\) to D:\\\\, so that peinst wont return errors  \n\u003e **2 bis) try booting at this point (BOOT.INI should have two entries, or a longish timeout so that it will pause)**   \n\u003e 3) went through Shirins tutorial (result: [http://tinyurl.com/yecph49)](http://tinyurl.com/yecph49) \"External link\")  \n\u003e 4) replaced D:\\\\boot.ini with a self-created boot.ini, containing:\n\nHow is the OCZ SSD seen by windows \"Fixed\" or \"Removable\"?  \n\nDid you use Windows XP Disk management to Partition it?  \nOr you just re-formatted it?  \nDoes it has a MBR?  \n\nBTW, you shoud rotate clockwise your monitor 90 degrees:  \n[http://tinyurl.com/yecph49)](http://tinyurl.com/yecph49) \"External link\")  \n![:merc:](http://reboot.pro/public/style_emoticons/default/merc.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)   \n\njaclaz   \n"
    },
    {
      "id": "87386",
      "timestamp": "2009-12-21T14:14:09+00:00",
      "author": "wilma05",
      "content": "\u003e try booting at this point (BOOT.INI should have two entries, or a longish timeout so that it will pause)\n\nsame result - wants to boot from CD/DVD for some reasons...  \n\n\u003cbr /\u003e\n\n\u003e How is the OCZ SSD seen by windows \"Fixed\" or \"Removable\"?\n\nhow do I find out? its connected directly to an onboard SATA port  \n\n\u003e Did you use Windows XP Disk management to Partition it?\n\nfirst I formatted it with the format-option in peinst - then with XP disk mgmt. No change.  \n\n\u003e Does it has a MBR?\n\nisnt it wiped by formating? I dont know whats in the MBR  \n\nnow the boot.ini contains:  \n\n\\[boot loader\\]  \ntimeout\u003d30  \ndefault\u003dmulti(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS  \n\\[operating systems\\]  \nmulti(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS\u003d\"Microsoft Windows XP Professional\" /noexecute\u003doptin /fastdetect  \n**D:\\\\** peboot.bin\u003d\"Boot BartPE (by PE Builder)\"   \n\nI guess I should change D:\\\\ into C:\\\\ before reboot?   \n"
    },
    {
      "id": "87389",
      "timestamp": "2009-12-21T14:38:27+00:00",
      "author": "was_jaclaz",
      "content": "\u003e same result - wants to boot from CD/DVD for some reasons...\n\nOK, we found the problem.  \n\nYour SSD is NOT bootable, since PEINST.CMD \"copies\" settings from it, if they are wrong, it won\u0027t boot as well.  \n\n\u003e first I formatted it with the format-option in peinst - then with XP disk mgmt. No change.\nSo, if for any reason, the SSD came formatted as super-floppy you did NOT touch it\u0027s structure, by partitioning it, and it remains an unpartitoned drive.  \nA HD-like device needs to have a MBR and to be partitioned.  \nGo into disk management and delete the volume.  \nThen try creating a new Partition.  \nFormat it from within disk management.  \nTry again copying NTLDR+BOOT.INI and try booting.  \n\n\u003e how do I find out? its connected directly to an onboard SATA port\n\nOpen a command prompt.  \nDISKPART \\[ENTER\\]  \nLIST DISK \\[ENTER\\] \\\u003c-post output  \nLIST VOLUME \\[ENTER\\] \\\u003c-post output  \nEXIT \\[ENTER\\]  \nExample:  \n\n```\nC\u0026#58;\\\u003ediskpart\n\n\n\nMicrosoft DiskPart versione 5.1.3565\n\n\n\nCopyright \u0026#40;C\u0026#41; 1999-2003 Microsoft Corporation.\n\nDal computer CINQUE\n\n\n\nDISKPART\u003e list disk\n\n\n\n  Disco n.  Stato\t   Dim.\t Libera   Din  Gpt\n\n  --------  ----------  -------  -------  ---  ---\n\n  Disco 0\tPronto\t   298 GB\t  0 B\n\n  Disco 1\tPronto\t   298 GB\t  0 B\n\n\n\nDISKPART\u003e list volume\n\n\n\n  Volume n.  Lett. Etichetta\tFs\t Tipo\t\tDim.\t Stato\t  Info\n\n  ----------  ---  -----------  -----  ----------  -------  ---------  --------\n\n  Volume 0\t P   Nuovo\t\tCDFS   DVD-ROM\t  185 MB\n\n  Volume 1\t E\t\t\t\t\t   CD-ROM\t\t  0 B\n\n  Volume 2\t C\t\t\t\tNTFS   Partizione   298 GB  Integro\tSistema\n\n  Volume 3\t D\t\t\t\tNTFS   Partizione   298 GB  Integro\n\n  Volume 4\t F\t\t\t\t\t   Rimovibile\t  0 B\n\n  Volume 5\t G\t\t\t\t\t   Rimovibile\t  0 B\n\n  Volume 6\t H\t\t\t\t\t   Rimovibile\t  0 B\n\n  Volume 7\t I\t\t\t\t\t   Rimovibile\t  0 B\n\n\n\nDISKPART\u003e exit\n\n\n\nChiusura di DiskPart in corso...\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\njaclaz   \n"
    },
    {
      "id": "87392",
      "timestamp": "2009-12-21T14:52:41+00:00",
      "author": "wilma05",
      "content": "this gets stranger by the minute  \n\nI\u0027m so sick of this \"MBR\"-thing, its a complete mystery to me. How am I supposed to have a look at it, wipe it or rebuild it? Preferably under Windows?  \n\nSo I tried something different now - I took another disk, went through the whole procedure again, boot.ini now looks like:  \n\n\\[boot loader\\]  \ntimeout\u003d30  \ndefault\u003dmulti(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS  \n\\[operating systems\\]  \nmulti(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS\u003d\"Microsoft Windows XP Professional\" /noexecute\u003doptin /fastdetect  \nC:\\\\peboot.bin\u003d\"Boot BartPE (by PE Builder)\"   \n\nThis time I\u0027m still not able to boot, but I get a different error ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)   \n\n[http://tinyurl.com/yaau67z](http://tinyurl.com/yaau67z \"External link\") (sorry for 180°)  \n\n\"MBR Error 1\" and after Enter \"MBR Error 2\"  \n\nso what do I know now?  \n\n- the 60 GB SSD seems to be messed up completly  \n- the replacement drive delivers \"MBR Error\"  \n\nDisk part infos as follows:  \n\n```\nDISKPART\u003e LIST DISK\n\n\n\n  Datentr.  Status\t  Größe\tFrei\t Dyn  GPT\n\n  --------  ----------  -------  -------  ---  ---\n\n\t   0\tOnline\t\t60 GB\t  0 B\n\n\t   1\tOnline\t   119 GB\t  0 B\n\n\t   4\tOnline\t\t15 GB\t  0 B\n\n\n\nDISKPART\u003e list volume\n\n\n\n  Volume\t  Bst  Bezeichnung  DS\t Typ\t\t Größe\tStatus\t Info\n\n  ----------  ---  -----------  -----  ----------  -------  ---------  --------\n\n  Volume 0\t G\t\t\t\t\t   DVD\t\t\t 0 B\n\n  Volume 1\t F\t\t\t\t\t   DVD\t\t\t 0 B\n\n  Volume 2\t I\t\t\t\t\t   DVD\t\t\t 0 B\n\n  Volume 3\t C   C main\t   NTFS   Partition\t 60 GB  OK\t\t System\n\n  Volume 4\t E   acronis\t  NTFS   Partition\t119 GB  OK\n\n  Volume 5\t D   Volume\t   NTFS   Partition\t 15 GB  OK\n```\n\n\u003cbr /\u003e\n\nD should be the BartPE-drive...  \n\n\u003e Go into disk management and delete the volume.  \n\u003e Then try creating a new Partition.  \n\u003e Format it from within disk management.  \n\u003e Try again copying NTLDR+BOOT.INI and try booting.\n\nyou must be kidding, I did that several times - the 60GB SSD remained unbootable. Is a new MBR written by that procedure?!  \n\nwhen I connect the 60 GB SSD again, its also shown under diskpart. This isnt saying anything about boot-ability as it seems.   \n"
    },
    {
      "id": "87396",
      "timestamp": "2009-12-21T15:09:51+00:00",
      "author": "was_jaclaz",
      "content": "\u003e you must be kidding, I did that several times - the 60GB SSD remained unbootable. Is a new MBR written by that procedure?!\n\nIt should, but in some cases \"remnants\" of a previous format/partitioning may remain.  \n\nWhat do you want to fix?  \n\nThe SSD or the disk?  \n\nIn any case the best approach is to start \"clean\".  \n\nWipe first few sectors, then re-boot.  \nAnd try again with XP Disk Management.  \n\nHere is how to wipe first few sectors:  \n[http://www.boot-land...topic\u003d3453\\\u0026st\u003d8](http://www.boot-land.net/forums/?showtopic\u003d3453\u0026st\u003d8 \"External link\")  \n\nBe VERY accurate when giving the number of physical drive.  \nIn your previous report it looks like it is 4, though where are #2 and #3? ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\nJust in case, use this batch ddlistw:  \n[http://www.boot-land...?showtopic\u003d8219](http://www.boot-land.net/forums/index.php?showtopic\u003d8219 \"External link\")  \n[http://www.boot-land...?...c\u003d8219\\\u0026st\u003d2](http://www.boot-land.net/forums/index.php?showtopic\u003d8219\u0026st\u003d2 \"External link\")  \nto make sure.  \n\nIf it still doesn\u0027t boot, use dsf***o*** as follows:  \ndsf**o** \\\\\\\\.\\\\PHYSICALDRIVE2 0 51200 J:\\\\first100sectors.dat  \nAgain be careful on which drive you specify.  \n\nThen compress first100sectors.dat into a .zip archive and post it here as an attachment.  \n\n\u003cbr /\u003e\n\njaclaz   \n"
    },
    {
      "id": "87397",
      "timestamp": "2009-12-21T15:15:39+00:00",
      "author": "wilma05",
      "content": "but why is the error returned by disk2 different than the one returned by the ssd? both drives were encrypted once but got wiped meantime (Acronis DriveCleanser). So remains should have been cleared a long time ago...  \n\nbesides, I changed the drive letter in the boot.ini from D:\\\\peboot.bin to C:\\\\peboot.bin after disabling write protection for the boot.ini - thats correct I guess?   \n"
    },
    {
      "id": "87398",
      "timestamp": "2009-12-21T15:20:49+00:00",
      "author": "was_jaclaz",
      "content": "\u003e but why is the error returned by disk2 different than the one returned by the ssd? both drives were encrypted once but got wiped meantime (Acronis DriveCleanser). So remains should have been cleared a long time ago...\n\n\u003e .... in some cases \"remnants\" of a previous format/partitioning may remain.\n\nAnd this is another peace of info you completely failed to provide.  \nIf you have Acronis apps installed, they can play \"strange\" tricks.  \n\n\u003e besides, I changed the drive letter in the boot.ini from D:\\\\peboot.bin to C:\\\\peboot.bin after disabling write protection for the boot.ini - thats correct I guess?\nSure, but it has nothing to do with the problem you are having.  \n\njaclaz   \n"
    },
    {
      "id": "87399",
      "timestamp": "2009-12-21T15:41:03+00:00",
      "author": "wilma05",
      "content": "yes, I know, just wanted to make sure.  \n\nI just want a tool in order to \"see\" the MBR mess, wipe this bloody thing and rebuild **basic** boot structures.  \n\nSo I guess Acronis isnt the first choice when wiping is needed?  \n\nanother post scriptum: diskpart only \"sees\" 3 disks. 5 are attached, but two of them are encrypted. So its not displaying Truecrypt volumes? Why is it?  \n\nAs am able to boot into another BartPE: isnt there an app which wipes the first few sectors **reliably** ?   \n"
    },
    {
      "id": "87402",
      "timestamp": "2009-12-21T16:02:10+00:00",
      "author": "was_jaclaz",
      "content": "\u003e As am able to boot into another BartPE: isnt there an app which wipes the first few sectors **reliably**?\n\nI just gave you one. (and it does work **reliably** )  \n\nMost other \"wipe\" tools will wipe the whole device (which takes a looooong time and is perfectly unneeded).  \n\nYou can use MBRFIX:  \n[http://www.sysint.no...ting/mbrfix.htm](http://www.sysint.no/nedlasting/mbrfix.htm \"External link\")  \n\n```\nMbrFix /drive \u003cnum\u003e clean\n\nMbrFix /drive \u003cnum\u003e fixmbr\n```\n\nWill clean the partition tables and write new 2K/XP MBR code  \nOr MBRWIZ:  \n[http://mbrwizard.com/](http://mbrwizard.com/ \"External link\")  \n[http://mbrwizard.com/examples.php#wipe](http://mbrwizard.com/examples.php#wipe \"External link\")  \nWipe the entire first head on Disk n: MBRWiz /Wipe\u003dHEAD /Disk\u003dn  \nWipe Sectors 64 through 100 on Disk n: MBRWiz /Wipe\u003d64-100 /Disk\u003dn  \n\nIf you want something more \"visual\" use a disk editor.  \nTiny Hexer has a Script for doing exactly that:  \n[http://www.boot-land...?showtopic\u003d8734](http://www.boot-land.net/forums/index.php?showtopic\u003d8734 \"External link\")  \n\njaclaz   \n"
    },
    {
      "id": "87406",
      "timestamp": "2009-12-21T16:13:15+00:00",
      "author": "wilma05",
      "content": "\u003e MbrFix /drive \\\u003cnum\\\u003e clean\n\nare you sure it kills the whole damn thing? Not only the partition table?  \n\n\u003e Most other \"wipe\" tools will wipe the whole device (which takes a looooong time and is perfectly unneeded).\n\nAcronis DriveCleanser seems to do something different anyhow...   \n"
    },
    {
      "id": "87409",
      "timestamp": "2009-12-21T16:31:47+00:00",
      "author": "was_jaclaz",
      "content": "\u003e are you sure it kills the whole damn thing? Not only the partition table?\nIs my english that bad?  \n\u003e I just gave you one. (and it does work **reliably**)\ndsfi **WILL** wipe.  \n\n\u003e You can use MBRFIX:  \n\u003e [http://www.sysint.no...ting/mbrfix.htm](http://www.sysint.no/nedlasting/mbrfix.htm \"External link\")  \n\u003e\n\u003e ```\n\u003e MbrFix /drive \u003cnum\u003e clean\n\u003e\n\u003e MbrFix /drive \u003cnum\u003e fixmbr\n\u003e ```\n\u003e\n\u003e Will **clean the partition tables** and write new 2K/XP MBR code\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\nCan you see anywhere in the above that it \"kills the whole damn thing\"?  \nMBRFIX **will NOT** wipe \"the whole damn thing\"  \n\n\u003e **Or** MBRWIZ:  \n\u003e [http://mbrwizard.com/](http://mbrwizard.com/ \"External link\")  \n\u003e [http://mbrwizard.com/examples.php#wipe](http://mbrwizard.com/examples.php#wipe \"External link\")  \n\u003e **Wipe the entire first head** on Disk n: MBRWiz /Wipe\u003dHEAD /Disk\u003dn  \n\u003e **Wipe** Sectors 64 through 100 on Disk n: MBRWiz /Wipe\u003d64-100 /Disk\u003dn\nMBRWIZ **WILL** wipe.  \n\nAs well Tiny Hexer **WILL** .  \n\n\u003e Acronis DriveCleanser seems to do something different anyhow...\nWhatever.  \n\nI gave you at the moment ...let me count .... 1, 2, 3, 4 different ways to solve your problem, ALL of them working **reliably** : I guess they are enough. ![:merc:](http://reboot.pro/public/style_emoticons/default/merc.gif)   \n\nMaybe it\u0027s time you read the \"common sense advice\" attached to Rules ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif):  \n[http://www.boot-land...act\u003dboardrules#](http://www.boot-land.net/forums/index.php?act\u003dboardrules# \"External link\")  \n\nThis thread is becoming longish, I will split it in a new thread in:  \n[http://www.boot-land...hp?showforum\u003d71](http://www.boot-land.net/forums/index.php?showforum\u003d71 \"External link\")  \n\n\u003cbr /\u003e\n\nPlease acknowledge about this split in your next post.  \n\njaclaz   \n"
    },
    {
      "id": "87411",
      "timestamp": "2009-12-21T16:39:22+00:00",
      "author": "wilma05",
      "content": "I\u0027ll update you after I\u0027ve slayed this §@ç#ing MBR on both drives.   \n\npeinst-procedure I\u0027ve taken seem to be fine with you otherwise, so I will do exactly the same thing after murdering MBR   \n"
    },
    {
      "id": "87473",
      "timestamp": "2009-12-21T22:23:16+00:00",
      "author": "wilma05",
      "content": "whats the use of ntldr after peldr got created? Is it possible to delete it afterwards? As no regular OS is installed?   \n"
    },
    {
      "id": "87498",
      "timestamp": "2009-12-22T08:34:00+00:00",
      "author": "was_jaclaz",
      "content": "\u003e whats the use of ntldr after peldr got created? Is it possible to delete it afterwards? As no regular OS is installed?\n\nThe \"normal\" boot sequence is:  \nMBR-\\\u003eBootsector invoking NTLDR-\\\u003eNTLDR-\\\u003eBOOT.INI with choice for PEBOOT.BIN-\\\u003ePEBOOT.BIN-\\\u003ePELDR  \n\nIf you re-read this:  \n[http://www.boot-land...?...\u003d10034\\\u0026st\u003d1](http://www.boot-land.net/forums/index.php?s\u003d\u0026showtopic\u003d10034\u0026st\u003d1 \"External link\")  \n\nYou have two ways:  \nMBR-\\\u003eBootsector invoking NTLDR-\\\u003ePELDR renamed as NTLDR  \nMBR-\\\u003eBootsector invoking PELDR-\\\u003ePELDR  \n\nThe latter is advised, in order to have not \"misnamed\" files around.  \n\nAnd can be achieved by:  \n\n* using the linked to batch  \n  or\n* copying the PEBOOT.BIN to the partition bootsector  \n  or\n* hexediting manually with a disk editor the string NTLDR in the bootsector to PELDR\n\n\u003cbr /\u003e\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\njaclaz   \n"
    },
    {
      "id": "87500",
      "timestamp": "2009-12-22T08:42:48+00:00",
      "author": "wilma05",
      "content": "dont get me wrong, all is working fine now. But I wonder about a few things:  \n\n- how does a regular Windows boot work? What kind of information does \"multi(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS\" in boot.ini provide? What is bootfont.bin, cmldr, ntldr,IO.SYS, NTDETECT.COM at root and so on  \n\n- Why does peinst need ntldr in root dir in order to install BartPE to hard? As it has Windows files from CD anyhow...  \n\n- The \"normal\" boot sequence is:  \n\u003e MBR-\\\u003eBootsector invoking NTLDR-\\\u003eNRLDR-\\\u003eBOOT.INI\n\nwhats nrldr?  \n\n- why is peldr 257 KB whereas ntldr is only 246 KB?  \n\n- what happens if I would delete ntldr now? stuck at boot? because ntldr is needed to \"chainload\" peldr later on?   \n"
    },
    {
      "id": "87519",
      "timestamp": "2009-12-22T10:38:50+00:00",
      "author": "was_jaclaz",
      "content": "\u003e dont get me wrong, all is working fine now.\nGood. ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\n\u003e But I wonder about a few things:  \n\u003e\n\u003e - how does a regular Windows boot work? What kind of information does \"multi(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS\" in boot.ini provide? What is bootfont.bin, cmldr, ntldr,IO.SYS, NTDETECT.COM at root and so on  \n\u003e\n\u003e - Why does peinst need ntldr in root dir in order to install BartPE to hard? As it has Windows files from CD anyhow...  \n\u003e\n\u003e -\nWell, this is not a crash course on the answer to \"everything you wanted to know about booting a NT based systema and never dared to ask\".  \nThere is google, something like \"multi(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS\" is called \"arcpath\".  \n\n\u003e whats nrldr?\nSorry typo. I meant NTLDR, corrected. ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\n\u003cbr /\u003e\n\nWhy different versions of NTLDR have different sizes?  \nWhy different versions of SETUPLDR.BIN have different sizes?  \nThe above two questions are all (more or less ![:merc:](http://reboot.pro/public/style_emoticons/default/merc.gif)) acceptable, but   \n\u003e - why is peldr 257 KB whereas ntldr is only 246 KB?\nSounds a lot like \"why elephants can\u0027t fly?\" :cool:  \n[http://www.boot-land...?...\u003d2425\\\u0026st\u003d18](http://www.boot-land.net/forums/index.php?showtopic\u003d2425\u0026st\u003d18 \"External link\")  \n\nNTLDR and SETUPLDR.BIN are two DIFFERENT loaders that load different things.  \n\n\u003e - what happens if I would delete ntldr now? stuck at boot? because ntldr is needed to \"chainload\" peldr later on?\nYep, you would \"break a link\" in the chain I explained to you.  \n\njaclaz   \n"
    },
    {
      "id": "87602",
      "timestamp": "2009-12-22T23:21:02+00:00",
      "author": "wilma05",
      "content": "ok -one question left: is it possible to integrate further programs/plugins into BartPE AFTER install to hard?   \n"
    },
    {
      "id": "87604",
      "timestamp": "2009-12-22T23:54:57+00:00",
      "author": "was_jaclaz",
      "content": "\u003e ok -one question left: is it possible to integrate further programs/plugins into BartPE AFTER install to hard?\nSure it is possible :wink:.  \n\nThough cannot really say if it is \"advisable\".  \n\nBasically the whole \"complication\" of plugins is the need to do everything before writing it (forever) on a .iso.  \n\nA PE on a Write/Read support, like a USB stick gives more freedom, though it is still not as-easy-as-a-normal-install-on-real-XP.  \n\nBooting the kernel with the /minint switch (which is what PE\u0027s do) creates a Registry in memory, which is of course \"volatile\", but noone prevents you to backup it after a program has been added, and to replace the \"original\" one with the moddified copy offline. (as an example booted from another PE or from a \"full\" OS), same applies to other files that the program may add in ramdisk.  \n\nCannot say if there is any example around of this approach. ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\nIn other words, you replace a \"known, documented\" complication with another possibly less complex, but far less documented one.  \n\nOf course all \"portable apps\" will work allright.  \n\n:cool:  \n\njaclaz   \n"
    },
    {
      "id": "87605",
      "timestamp": "2009-12-22T23:57:44+00:00",
      "author": "wilma05",
      "content": "hm, ok  \n\n\u003e NTLDR and SETUPLDR.BIN are two DIFFERENT loaders that load different things.\n\n...and you dont wanna tell me what exactly this stuff is loading? How is ntldr \"called\" in first place?!   \n"
    },
    {
      "id": "87607",
      "timestamp": "2009-12-23T00:35:15+00:00",
      "author": "was_jaclaz",
      "content": "\u003e ...and you dont wanna tell me what exactly this stuff is loading? How is ntldr \"called\" in first place?!\n\nWell, **NT** LDR loads either ***NT*** , 2K, XP or 2003.  \n**SETUP** LDR.BIN loads either the ***SETUP*** for 2K, XP or 2003 or a PE environment based on XP or 2003.  \nIt isn\u0027t that difficult, if you think a bit about it. :wink:  \n\nI hope you don\u0027t want to \"mix\" things, we already had members with this approach:  \n[http://www.boot-land...?showtopic\u003d8744](http://www.boot-land.net/forums/index.php?showtopic\u003d8744 \"External link\")  \nand we already gave all the answers we were able to give.  \n\nAnd I already told you what normally calls the NTLDR in the first place: the bootsector or PBR.  \n\nThe board is full of info related exactly to your (unsolved) questions.  \nTake some time searching it and browsing it, you will find many answers.  \n\nOne thread out of many that you may find interesting:  \n[http://www.boot-land...?showtopic\u003d3765](http://www.boot-land.net/forums/index.php?showtopic\u003d3765 \"External link\")  \n\nAnother one on 911CD (another place where you will be able to find many answers):  \n[http://www.911cd.net...o...\u003d16980\\\u0026st\u003d8](http://www.911cd.net/forums//index.php?showtopic\u003d16980\u0026st\u003d8 \"External link\")  \n\n\u003cbr /\u003e\n\njaclaz   \n"
    }
  ]
}