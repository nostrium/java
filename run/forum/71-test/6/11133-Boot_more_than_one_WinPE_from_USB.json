{
  "id": "11133",
  "title": "Boot more than one WinPE from USB",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "98178",
      "timestamp": "2010-04-17T16:23:15+00:00",
      "author": "myspacee",
      "content": "Hello to all,  \ncollect from varius post boot grub string that allow me to boot  \nvarius OS from my USB:  \n\n```\ntitle BartPe\n\nfind --set-root /minint/setupldr.bin\n\nchainloader /minint/setupldr.bin\n\n\n\ntitle Hiren 10.3\n\nmap \u0026#40;hd0,0\u0026#41;/HBCD/boot.img \u0026#40;fd0\u0026#41;\n\nmap --hook\n\nmap \u0026#40;hd0\u0026#41; \u0026#40;hd1\u0026#41;\n\nmap \u0026#40;hd1\u0026#41; \u0026#40;hd0\u0026#41;\n\nmap --hook\n\nchainloader \u0026#40;fd0\u0026#41;+1\n\nrootnoverify \u0026#40;fd0\u0026#41;\n\n\n\n\n\ntitle Acronis True Image 8 \u0026#91;+ Universal Restore\u0026#93;\n\nmap  \u0026#40;hd0,0\u0026#41;/IMG/Acronis/Acronis.iso  \u0026#40;hd32\u0026#41;\n\nmap  --hook\n\nchainloader  \u0026#40;hd32\u0026#41;\n\nboot\n\n\n\ntitle Acronis True Image Home 10\n\nmap  \u0026#40;hd0,0\u0026#41;/IMG/Acronis10/acronis10.iso  \u0026#40;hd32\u0026#41;\n\nmap  --hook\n\nchainloader  \u0026#40;hd32\u0026#41;\n\nboot\n\n\n\n\n\ntitle __________________________________ LINUX ________________________________\n\nroot\n\n\n\ntitle Damn Small Linux - dsl-4.4.10\n\nmap \u0026#40;hd0,0\u0026#41;/KNOPPIX/boot-usb.img \u0026#40;fd0\u0026#41;\n\nmap --hook\n\nmap \u0026#40;hd0\u0026#41; \u0026#40;hd1\u0026#41;\n\nmap \u0026#40;hd1\u0026#41; \u0026#40;hd0\u0026#41;\n\nmap --hook\n\nchainloader \u0026#40;fd0\u0026#41;+1\n\nrootnoverify \u0026#40;fd0\u0026#41;\n\n\n\ntitle UBCD 4.11\n\nfind --set-root  /IMG/ubcd/ubcd411.iso\n\nmap /IMG/ubcd/ubcd411.iso \u0026#40;hd32\u0026#41;\n\nmap --hook\n\nroot \u0026#40;hd32\u0026#41;\n\nchainloader \u0026#40;hd32\u0026#41;\n\n\n\ntitle __________________________________ SECURITY _____________________________\n\nroot\n\n\n\ntitle Kon-Boot \u0026#91;LINUX login\u0026#58; kon-usr | when leave\u0026#58; kon-fix\u0026#93; \u0026#91;WIN without pwd!\u0026#93;\n\nmap \u0026#40;hd0,0\u0026#41;/IMG/konboot/FD0-konboot-v1.1-2in1.img \u0026#40;fd0\u0026#41;\n\nmap --hook\n\nmap \u0026#40;hd0\u0026#41; \u0026#40;hd1\u0026#41;\n\nmap \u0026#40;hd1\u0026#41; \u0026#40;hd0\u0026#41;\n\nmap --hook\n\nchainloader \u0026#40;fd0\u0026#41;+1\n\nrootnoverify \u0026#40;fd0\u0026#41;\n\n\n\ntitle ophcrack XP 2.3.1\n\nroot \u0026#40;hd0,0\u0026#41;\n\nkernel /tables/ophcrack/bzImage quiet vga\u003dnormal lang\u003dC kmap\u003dit screen\u003d1024x768x16 autologin\n\ninitrd /tables/ophcrack/rootfs.gz\n\n\n\ntitle NTPasswd - Offline NT Password and Registry Editor \u0026#40;NT/2K/XP/2K3/VISTA\u0026#41;\n\nmap  \u0026#40;hd0,0\u0026#41;/IMG/NTPasswd/cd080802.iso  \u0026#40;hd32\u0026#41;\n\nmap  --hook\n\nchainloader  \u0026#40;hd32\u0026#41;\n\nboot\n\n\n\ntitle Passware WindowsKey 9.7.1572 - Password Editor \u0026#40;NT/2K/XP/2K3/VISTA/SEVEN\u0026#41;\n\nfind --set-root /$WIN_NT$.~BT/ntldr\n\nchainloader /$WIN_NT$.~BT/ntldr\n\n\n\n\n\ntitle __________________________________ UTILITY ______________________________\n\nroot\n\n\n\ntitle AVG en_90_100114 \u0026#91;http\u0026#58;//www.avg.com/us-en/avg-rescue-cd\u0026#93;\n\nkernel /AVG/vmlinuz max_loop\u003d255 vga\u003d791 initrd\u003dinitrd.lzm init\u003dlinuxrc\n\ninitrd /AVG/initrd.lzm\n\n\n\ntitle Avira AntiVir Rescue System\n\nkernel /antivir/Avira/vmlinuz vga\u003d769 initrd\u003dinitrd.gz ramdisk_size\u003d133551 root\u003d/dev/ram0 rw  console\u003d/dev/vc/4\n\ninitrd /antivir/Avira/initrd.gz\n\n\n\n#title Acronis True Image 8 \u0026#91;+ Universal Restore\u0026#93; - \u0026#40;in Ram\u0026#41;\n\n#map  --mem  \u0026#40;hd0,0\u0026#41;/IMG/Acronis/Acronis.iso  \u0026#40;hd32\u0026#41;\n\n#map  --hook\n\n#chainloader  \u0026#40;hd32\u0026#41;\n\n#boot\n\n\n\ntitle ophcrack XP 2.3.1 - \u0026#40;lowram\u0026#41;\n\nroot \u0026#40;hd0,0\u0026#41;\n\nkernel /tables/ophcrack/bzImage quiet vga\u003dnormal lang\u003dC kmap\u003dit screen\u003d800x600x16 ophcrack\u003dlowram autologin\n\ninitrd /tables/ophcrack/rootfs.gz\n\n\n\ntitle DOS SATA CD driver\n\nmap \u0026#40;hd0,0\u0026#41;/IMG/SATA/CDsata.IMA \u0026#40;fd0\u0026#41;\n\nmap --hook\n\nmap \u0026#40;hd0\u0026#41; \u0026#40;hd1\u0026#41;\n\nmap \u0026#40;hd1\u0026#41; \u0026#40;hd0\u0026#41;\n\nmap --hook\n\nchainloader \u0026#40;fd0\u0026#41;+1\n\nrootnoverify \u0026#40;fd0\u0026#41;\n\n\n\ntitle Boot Floppy\n\nchainloader \u0026#40;fd0\u0026#41;+1\n\nrootnoverify \u0026#40;fd0\u0026#41;\n\nsavedefault --wait\u003d2\n\n\n\ntitle Boot CD\n\ncdrom --init\n\nmap --hook\n\nchainloader \u0026#40;cd0\u0026#41;\n\n\n\ntitle Reboot\n\nsavedefault --wait\u003d2\n\nreboot\n```\n\n\u003cbr /\u003e\n\nNow i\u0027ve encoutered a problem. 2 OS are based on XP usb feature:  \n- BartPe  \n- Passware WindowsKey 9.7.1572   \n\nAfter few test note that presence of TXTSETUP.SIF file on USB root boot one  \nor onother PE OS.  \n\nSo i\u0027m here to ask if is possible to boot 2 PE OS from same USB,  \nor as alternative, if GRUB has renaming file feature/syntax.  \n\nthank you all for support and sorry for not so good english,  \n\nm.   \n"
    },
    {
      "id": "98231",
      "timestamp": "2010-04-18T00:52:41+00:00",
      "author": "maanu",
      "content": "IF that password PE boots fine from MININT folder all right then use the following command ,   \n\n( save that password pe files to I386 folder at usb )   \n\ntitle boot it   \nmap --mem /I386/SETUPLDR.BIN (rd)  \nwrite --offset\u003d0x2060 (rd)+1 \\\\xEB\\\\x1A  \nwrite --offset\u003d0x2a516 (rd)+1 \\\\\\\\I386\\\\\\\\txtsetup.sif\\\\0\\\\0\\\\0  \nwrite --offset\u003d0x2a5f6 (rd)+1 \\\\\\\\I386\\\\\\\\system32\\\\\\\\\\\\0\\\\0\\\\0  \nchainloader (rd)+1   \n"
    },
    {
      "id": "98480",
      "timestamp": "2010-04-21T09:15:03+00:00",
      "author": "myspacee",
      "content": "Thank you for reply,  \nstudy a bit problem and modify you seggested strings with :  \n\n```\ntitle Passware WindowsKey 9.7.1572\n\nmap --mem /I386/SETUPLDR.BIN \u0026#40;rd\u0026#41;\n\nwrite --offset\u003d0x2060 \u0026#40;rd\u0026#41;+1 /xEB/x1A\n\nwrite --offset\u003d0x2a516 \u0026#40;rd\u0026#41;+1 /I386/TXTSETUP.SIF//0/0/0\n\nwrite --offset\u003d0x2a5f6 \u0026#40;rd\u0026#41;+1 /I386/SYSTEM32//0/0/0\n\nchainloader \u0026#40;rd\u0026#41;+1\n```\n\n\u003cbr /\u003e\n\nWith this i can obtain \u0027dual\u0027 boot these entry return to me :  \nTXTSETUP.SIF missing error 18  \n\nIs there any way to :  \n- use map or find command to say GRUB search this file there ?  \n- rename file on device before run GRUB command ? (problem is TXTSETUP.SIF presence in usb root)  \n- this program is like XP recovery console, not PE as my first post, any special command to boot recovery console ?  \n\nThank you for any info,  \n\nm.   \n"
    },
    {
      "id": "98486",
      "timestamp": "2010-04-21T10:18:03+00:00",
      "author": "maanu",
      "content": "compare it with mine code , (specially 3rd and 4th line , )   \n\n\u003e map --mem /I386/SETUPLDR.BIN (rd)  \n\u003e write --offset\u003d0x2060 (rd)+1 \\\\xEB\\\\x1A  \n\u003e write --offset\u003d0x2a516 (rd)+1 \\\\\\\\I386**\\\\\\\\** txtsetup.sif\\\\0\\\\0\\\\0  \n\u003e write --offset\u003d0x2a5f6 (rd)+1 \\\\\\\\I386\\\\\\\\system32**\\\\\\\\\\\\** 0\\\\0\\\\0  \n\u003e chainloader (rd)+1\n\nuse my entry EXACTLY . and preferable from commandline .   \n\nby the way , u can use the other tool for password issues . NTpwd . it is good enough .,   \n"
    },
    {
      "id": "98542",
      "timestamp": "2010-04-21T17:45:46+00:00",
      "author": "myspacee",
      "content": "i used exactly your entry and have Bartpe booting then black screen.  \n\nTry from commandline let me know if there are some problem ?  \n\nAny info about XP recovery console boot from usb ?  \nis possible to rename file on device before run GRUB command ?  \n\nthank you for all support,  \n\nm.   \n"
    }
  ]
}