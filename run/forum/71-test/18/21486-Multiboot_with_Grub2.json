{
  "id": "21486",
  "title": "Multiboot with Grub2",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "203242",
      "timestamp": "2017-04-07T12:01:07+00:00",
      "author": "BackTime",
      "content": "Hi\n\nI have a problem with adding a Windows OS image for Grub 2 for multiboot pendrive below I am presenting a current post - please help. The idea is to create a single Grub2 menu for both Efi and Uefi\n\n```\nI have a problem with adding a Windows OS image for Grub 2 for multiboot pendrive below I am presenting a current post - please help. The idea is to create a single Grub2 menu for both Efi and Uefi\n```\n\n\u003e menuentry \"Instalacja Windows Vista/7/8/8.1/10 \" --class winusb {  \n\u003e search --file /bootmgr --set\u003droot  \n\u003e insmod ntldr  \n\u003e ntldr /bootmgr  \n\u003e }  \n\u003e menuentry \"Windows XP\" --class icon-xp{  \n\u003e echo \"Proszę czekać...\"  \n\u003e }  \n\u003e menuentry \"Windows 8 Live Rescue Disk\" --class win8{  \n\u003e echo \"Proszę czekać...\"  \n\u003e }  \n\u003e menuentry \"Windows 10 Live Rescue Disk\" --class win{  \n\u003e echo \"Proszę czekać...\"  \n\u003e }\n\n\u003cbr /\u003e\n\n**Edited by BackTime, 07 April 2017 - 12:01 PM.**\n"
    },
    {
      "id": "203243",
      "timestamp": "2017-04-07T12:06:05+00:00",
      "author": "steve6375",
      "content": "You normally boot using\n\nchainloader /xxx/yyy/zzz.EFI\n\nYou will need the right modules added.\n\n"
    },
    {
      "id": "203247",
      "timestamp": "2017-04-07T12:36:04+00:00",
      "author": "BackTime",
      "content": "Thanks for replying in such a layout I have one more question whether there is an option to add next to the options menu option for Grub not for Grub 2 setting an icon that corresponds only to this entry?\n\n"
    },
    {
      "id": "203248",
      "timestamp": "2017-04-07T12:42:57+00:00",
      "author": "steve6375",
      "content": "Sorry, I don\u0027t understand??\n\nWhat is Grub? Do you mean grub4dos?\n\n"
    },
    {
      "id": "203249",
      "timestamp": "2017-04-07T12:51:33+00:00",
      "author": "BackTime",
      "content": "That\u0027s exactly what Grub4Dos is for, as well as Grub2 where I can have efi files? How do they create or get from images?\n\n**Edited by BackTime, 07 April 2017 - 12:57 PM.**\n"
    },
    {
      "id": "203250",
      "timestamp": "2017-04-07T13:00:43+00:00",
      "author": "steve6375",
      "content": "Sorry, I do not understand you?\n\ngrub4dos will not work with UEFI.\n\nYou must use grub2.\n\nPlease ask your questions more clearly.\n\n"
    },
    {
      "id": "203252",
      "timestamp": "2017-04-07T15:49:52+00:00",
      "author": "BackTime",
      "content": "Suppose I have a LieWindows 10 PE image file created and now the question of where do I get the efi file? Another question, can you give an example from start to finish for running Windows Live image in Efi and Uefi mode?\n\n**Edited by BackTime, 07 April 2017 - 03:50 PM.**\n"
    },
    {
      "id": "203253",
      "timestamp": "2017-04-07T16:06:21+00:00",
      "author": "steve6375",
      "content": "If there is a \\\\EFI\\\\BOOT\\\\BOOTX64.EFI file then it supports UEFI booting.\n\nIf not, then you will have to add the UEFI boot files and BCd, etc.yourself. You can obtain the files from a standard MS ISO.\n\nP.S. [http://www.easy2boot...things-to-know/](http://www.easy2boot.com/useful-things-to-know/ \"External link\") may help.\n\nYou also need to Google for how to set up the BCD using BootIce, see\n\nhttp://www.rmprepusb.com/tutorials/127-make-dual-32-64bit-pe\n\nfor help\n\n**Edited by steve6375, 07 April 2017 - 04:34 PM.**\n"
    },
    {
      "id": "203272",
      "timestamp": "2017-04-09T11:44:58+00:00",
      "author": "BackTime",
      "content": "For Efi mode, BCD is started, but for UEFI there is no problem. Ntldr.mod file can not be found. Any suggestions ?\n\n![kej6vo.png](http://i64.tinypic.com/kej6vo.png)\n\nCode to run the installer:\n\n\u003e menuentry \"Instalacja Windows \" --class winusb {  \n\u003e search --file /boot/bootmgr --set\u003droot  \n\u003e insmod ntldr  \n\u003e ntldr /boot/bootmgr  \n\u003e }\n\u003e\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "203273",
      "timestamp": "2017-04-09T11:55:43+00:00",
      "author": "nguyentu",
      "content": "Ntldr is used to load WinNT5 ntldr and WinNT6 bootmgr. They do not support UEFI, so this module does not exist on Grub2 EFI. You need to boot into Legacy mode.\n\n"
    },
    {
      "id": "203274",
      "timestamp": "2017-04-09T12:06:32+00:00",
      "author": "Wonko the Sane",
      "content": "Wait a minute.\n\nCan you describe the difference between EFI and UEFI? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "203285",
      "timestamp": "2017-04-10T15:38:07+00:00",
      "author": "BackTime",
      "content": "The idea of the operation itself is that one bootloader used to hold both Efi and Legacy loading on a similar principle as Linux and the following entry - for both entries 1 works the same as linux itself starts.  \n\n\u003e menuentry \"Linux Mint 18 live ISO (32bit)\" --class linuxmint {  \n\u003e echo \"Proszę czekać...\"  \n\u003e set isofile\u003d\"/ISO/linuxmint-18-cinnamon-32bit.iso\"  \n\u003e loopback loop $isofile  \n\u003e linux (loop)/casper/vmlinuz boot\u003dcasper iso-scan/filename\u003d$isofile  \n\u003e initrd (loop)/casper/initrd.lz  \n\u003e }\n\u003e\nIn this layout I have a question if you can not do this please give sample A to Z for windows installer in Efi for Grub2\n\n"
    },
    {
      "id": "203295",
      "timestamp": "2017-04-12T15:47:07+00:00",
      "author": "Blackcrack",
      "content": "Hi,\n\njust a idea/suggestion :\n\nwe need just an portable Grub2-Manager who works with grub2 for dos and into windows..\n\na Grub2 and 1 Manager who it is portable and have the rules of Grub into and can therewith\n\nwork and configuring from a installed Windows\n\n(into the bootpartition (search and install /update nt bootpartition,Ntldr and bootpart of the Harddisk of Windows and update it))\n\nand who can read linuxpartitions and be in able for handle them with fs-modules for grub-manager\n\nand make it possible for boot founded Linuxsystems. (maybe edit the grub-configuration on the linux-partition and config/save it)\n\nand manage it with this grafical Gui for Grub 1/2 Into NT.\n\nif this can anyone programming, would it securely a really well thing also for WinNt (MS and ReactOS)\n\nbecause then be we are in able more easily handle that out from WindowsNT\n\nbest regards\n\nBlacky\n\n"
    },
    {
      "id": "203296",
      "timestamp": "2017-04-12T23:22:46+00:00",
      "author": "memoarfaa",
      "content": "1-rename Windows efi boot file \"efi\\\\boot\\\\bootx64.efi\" to \"efi\\\\boot\\\\Winbootx64.efi\"\n\n```\nif [ \"${grub_platform}\" \u003d\u003d \"efi\" ]; then\n    menuentry \"Instalacja Windows UEFI-GPT\"--class winusb {\n        search --file /bootmgr --set\u003droot\n        insmod part_gpt\n        insmod fat\n        insmod chain\n        chainloader /efi/boot/Winbootx64.efi\n    }\nfi\nif [ \"${grub_platform}\" \u003d\u003d \"pc\" ]; then\n    menuentry \"Instalacja Windows \" --class winusb {\nsearch --file /bootmgr --set\u003droot\ninsmod ntldr\nntldr /boot/bootmgr\n}\nfi\n```\n\n\u003cbr /\u003e\n\n**Edited by memoarfaa, 12 April 2017 - 11:40 PM.**\n"
    },
    {
      "id": "203300",
      "timestamp": "2017-04-13T10:11:02+00:00",
      "author": "Wonko the Sane",
      "content": "Good :smile:, EFI and UEFI are still the SAME thing, the improbability level got back to \"normal\"...\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    }
  ]
}