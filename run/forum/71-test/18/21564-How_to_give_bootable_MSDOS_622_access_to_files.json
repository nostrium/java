{
  "id": "21564",
  "title": "How to give bootable MS-DOS 6.22 access to files?",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "204123",
      "timestamp": "2017-07-15T23:35:50+00:00",
      "author": "Kaos-Industries",
      "content": "Hey there,\n\nI used [WinSetupFromUSB](https://www.winsetupfromusb.com \"External link\") to create a multi-bootable USB that allows me to boot into MS-DOS 6.22, in addition to installers for Windows 7 and Vista. I need DOS 6.22 in order to run some legacy programs on very expensive hardware that I can\u0027t run the risk of trying another version of DOS or FreeDOS on.\n\nDOS 6.22 and the Windows 7 installers boot well enough, but the problem I\u0027m now having is that I have no way of supplying the legacy programs I need to run to DOS 6.22 once its been booted from the USB. Copying these programs to the root of the USB doesn\u0027t seem to work; as soon as DOS is booted, all it sees are the 40 files that it comes packaged with.\n\n**Where in the bootable USB do I put my programs so that MS-DOS 6.22 can access it?** If there is no such place, is there any other way to easily give DOS access to those programs?\n\nThanks in advance, I\u0027d really appreciate some help on this.\n\n**Edited by Kaos-Industries, 15 July 2017 - 11:43 PM.**\n"
    },
    {
      "id": "204126",
      "timestamp": "2017-07-16T09:08:43+00:00",
      "author": "steve6375",
      "content": "MS-DOS can only read FAT drives. Is the USB formatted as FAT32?\n\nI am not sure that WinSetupFromUSB makes the USB drive visible as a BIOS drive - if you run FDISK when booted to DOS, can you see the USB drive listed by FDISK? If not then you may have to tweak the grub4dos menu for the DOS ISO.\n\nEasy2Boot will do what you want easily (one menu and access to USB drive).\n\nIt already contains a FreeDos menu entry which will allow you to boot to FreeDOS and run files on an NTFS or FAT32 USB drive.\n\nHowever, if you want to run executables from the USB drive using your DOS 6.22 ISO, you will need to use the Make_E2B_USB_Drive.cmd button to make a FAT32 USB drive, then add your Windows and DOS ISOs by copying them over. The DOS iso file should be given the .isodos file extension.\n\nEdit - MS-DOS 6.22 does not support FAT32. You would need a DOS 7.1 ISO and a FAT32 USB drive.\n\nAnother way would be to add you executables, etc. inside the .ISO file using an ISO editor. Then when you boot is as .ISODOS, drive B: will contain your executables under MS-DOS and you can run from a FAT32 or NTFS USB drive.\n\n**Edited by steve6375, 16 July 2017 - 09:21 AM.**\n"
    },
    {
      "id": "204127",
      "timestamp": "2017-07-16T09:41:27+00:00",
      "author": "Wonko the Sane",
      "content": "MS-DOS 6.22, that is. **(and DOS 7.0 aka Windows 95)**\n\nMS-DOS ~~7.0~~ **7.1** **(aka Windows 95 OSR2)**onwards can access FAT32.\n\n@Kaos-Industries\n\nIf you have to run a specific version of MS-DOS to run legacy programs on very expensive hardware, then surely you can afford to have a DEDICATED DOS ONLY USB stick.\n\nMind you there is no known reason to assume that the multibooting may EVER lead to any kind of \"corruption\" of the environment, but if you cannot risk to test the software with a newer DOS version, then you shouldn\u0027t risk (even if it is a little/tiny risk) that.\n\nTry making a plain, partitioned, FAT16, non-multiboot USB stick with MS-DOS 6.22 and your software (and nothing else).\n\nHow exactly to do that is another thing, what I would personally ddo would be to make a \"normal\" install of the DOS into a VM (actually a specific one, the QEMU) on an image of suitable size and then dd the image to the USB stick.\n\nYou should make the RAW image larger than around 512 Mb (but not larger than 2 Gb) to make sure that both the BIOS of the VM and the real hardware detect the geometry as 255/63.\n\nSee here:  \n[http://reboot.pro/to...isk-boot-image/](http://reboot.pro/topic/15839-pengos-guide-to-making-a-dos-hard-disk-boot-image/ \"\")\n\nFor a complete set of instructions (they are about FreeDOS and/or Windows 98, i.e. DOS 7.1, but you can use the same with DOS and particularly DOS 6.22 as long as you use FAT16 and a disk size in the given range).\n\nHaving the DOS on a .iso is not usually a good idea (because the .iso is read only) and surely your software needs to save some info somewhere.\n\nIt is possible to use a ramdisk (but then the whole stuff would be \"volatile\" ) or mount another volume (with a RW filesystem that MSDOS 6.22 can understand, which must then be ether FAT12 or FAT16) but it would be more complex and possibly (it really depends on the software) it may not work as that would be another (non-C:\\\\ ) drive letter (there are possible workarounds/solutions to this issue, but they represent a further complication).\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "204129",
      "timestamp": "2017-07-16T09:55:04+00:00",
      "author": "steve6375",
      "content": "[http://www.rmprepusb...torials/freedos](http://www.rmprepusb.com/tutorials/freedos \"External link\") This may also help as it contains info on making a DOS 6.22 USB drive.\n\nNote that once you have a working USB DOS 6.22 flash drive, you can use RMPrepUSB to make an image of the drive and add it to an E2B USB drive as a .imghd file. You can also use various utilities to edit the .img file and add/delete files at any later time.\n\n"
    },
    {
      "id": "204147",
      "timestamp": "2017-07-16T23:54:54+00:00",
      "author": "Kaos-Industries",
      "content": "\u003e MS-DOS can only read FAT drives. Is the USB formatted as FAT32?\n\u003e\n\u003e I am not sure that WinSetupFromUSB makes the USB drive visible as a BIOS drive - if you run FDISK when booted to DOS, can you see the USB drive listed by FDISK? If not then you may have to tweak the grub4dos menu for the DOS ISO.\n\u003e\n\u003e Easy2Boot will do what you want easily (one menu and access to USB drive).\n\u003e\n\u003e It already contains a FreeDos menu entry which will allow you to boot to FreeDOS and run files on an NTFS or FAT32 USB drive.\n\u003e\n\u003e However, if you want to run executables from the USB drive using your DOS 6.22 ISO, you will need to use the Make_E2B_USB_Drive.cmd button to make a FAT32 USB drive, then add your Windows and DOS ISOs by copying them over. The DOS iso file should be given the .isodos file extension.\n\u003e\n\u003e Edit - MS-DOS 6.22 does not support FAT32. You would need a DOS 7.1 ISO and a FAT32 USB drive.\n\u003e\n\u003e Another way would be to add you executables, etc. inside the .ISO file using an ISO editor. Then when you boot is as .ISODOS, drive B: will contain your executables under MS-DOS and you can run from a FAT32 or NTFS USB drive.\n\u003e\nThe USB is definitely formatted as FAT32, and as mentioned, boots fine. Does the USB need to formatted as FAT16 just to see the legacy program files on the USB? I always assumed that if it runs on the USB that it should also be read files from it?\n\nI tried E2B when initially trying to set this up, but I\u0027m not fond of the E2B boot menu and found that it added way too many nested menus and menu items for me that would take a while to customise to my heart\u0027s content. This is why I currently prefer using WinSetupFromUSB, which boots by default into grub4DOS resulting in a simple but good-looking boot menu from the outset.\n\nAs for the final method, at this point that definitely seems like the more attractive, easiest option. I tried doing it today - I extracted all the files from the original DOS 6.22 ISO, and used ImgBurn to write those files as well as the legacy executables into a new ISO. I even experimented with making it bootable from within ImgBurn, using the original ISO as the boot file, but still couldn\u0027t get it working. Is there a specific process involved in creating a bootable DOS image from files? Am I missing something?\n\n\u003e MS-DOS 6.22, that is.\n\u003e\n\u003e MS-DOS 7.0 onwards can access FAT32.\n\u003e\n\u003e @Kaos-Industries\n\u003e\n\u003e If you have to run a specific version of MS-DOS to run legacy programs on very expensive hardware, then surely you can afford to have a DEDICATED DOS ONLY USB stick.\n\u003e\n\u003e Mind you there is no known reason to assume that the multibooting may EVER lead to any kind of \"corruption\" of the environment, but if you cannot risk to test the software with a newer DOS version, then you shouldn\u0027t risk (even if it is a little/tiny risk) that.\n\u003e\n\u003e Try making a plain, partitioned, FAT16, non-multiboot USB stick with MS-DOS 6.22 and your software (and nothing else).\n\u003e\n\u003e How exactly to do that is another thing, what I would personally ddo would be to make a \"normal\" install of the DOS into a VM (actually a specific one, the QEMU) on an image of suitable size and then dd the image to the USB stick.\n\u003e\n\u003e You should make the RAW image larger than around 512 Mb (but not larger than 2 Gb) to make sure that both the BIOS of the VM and the real hardware detect the geometry as 255/63.\n\u003e\n\u003e See here:  \n\u003e [http://reboot.pro/to...isk-boot-image/](http://reboot.pro/topic/15839-pengos-guide-to-making-a-dos-hard-disk-boot-image/ \"\")\n\u003e\n\u003e For a complete set of instructions (they are about FreeDOS and/or Windows 98, i.e. DOS 7.1, but you can use the same with DOS and particularly DOS 6.22 as long as you use FAT16 and a disk size in the given range).\n\u003e\n\u003e Having the DOS on a .iso is not usually a good idea (because the .iso is read only) and surely your software needs to save some info somewhere.\n\u003e\n\u003e It is possible to use a ramdisk (but then the whole stuff would be \"volatile\" ) or mount another volume (with a RW filesystem that MSDOS 6.22 can understand, which must then be ether FAT12 or FAT16) but it would be more complex and possibly (it really depends on the software) it may not work as that would be another (non-C:\\\\ ) drive letter (there are possible workarounds/solutions to this issue, but they represent a further complication).\n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\u003e\n\u003e Wonko\n\nI extend the same question to you - what\u0027s meant by FAT32 support? My USB is FAT32, and I always assumed that if I get to the point where DOS 6.22 boots successfully from it, then compatibility isn\u0027t the issue. Is this not the case?\n\nAs I said on the other thread, I don\u0027t think the multibooting will be a problem, as unlike with the DOS version, there\u0027s nothing to really suggest that multibooting will introduce any new problems.\n\nRegarding the read-only thing, I looked into it today, and from what I can tell, those in the industry tend to also run the legacy programs using ISOs from bootable USBs, so it doesn\u0027t look like that issue will introduce any problem. All the program is doing is writing or removing a few characters from the memory addresses of a vehicle, so it doesn\u0027t seem like it would be particularly memory intensive, even for DOS.\n\n\u003e [http://www.rmprepusb...torials/freedos](http://www.rmprepusb.com/tutorials/freedos \"External link\") This may also help as it contains info on making a DOS 6.22 USB drive.\n\u003e\n\u003e Note that once you have a working USB DOS 6.22 flash drive, you can use RMPrepUSB to make an image of the drive and add it to an E2B USB drive as a .imghd file. You can also use various utilities to edit the .img file and add/delete files at any later time.\n\nThis wouldn\u0027t work because RMPrep only allows for the creation of a single-boot USB, and I\u0027m trying to create a multiboot USB. As explained above, I\u0027d rather stick to WinSetup cause it uses grub4DOS, which I prefer the UI and simplicity of, and unlike E2B, it doesn\u0027t have a whole host of default sub-menu items to clean up before I\u0027m comfortable using it.\n\n-------------\n\nOkay, I\u0027ve decided to take the plunge and try out FreeDOS, in the hope that it\u0027ll give me access to executables via the root of the bootable USB.\n\nHow would I install a bootable version of it with WinSetupFromUSB? Does it have anything to do with the \"floppy.img\" it comes with? That particular file can\u0027t be used with Winsetup because it only supports ISOs.\n\nThanks to you both for all the help so far.\n\n"
    },
    {
      "id": "204148",
      "timestamp": "2017-07-17T00:08:49+00:00",
      "author": "Kaos-Industries",
      "content": "Okay, I\u0027ve just tried using the tutorial here: [http://www.rmprepusb...table-USB-drive](http://www.rmprepusb.com/tutorials/freedos#TOC-Create-a-standard-FreeDOS-bootable-USB-drive \"External link\")with RMPrepUSB to install FreeDOS in the expectation that I can then revisit it with WinSetup later to add the Windows Installer ISOs. Unfortunately, it seems the method outlined in the tutorial puts the FreeDOS/.IOSYS on the MBR, loading it before grub4DOS, even after grub4DOS has been installed. How would I make it so that grub4DOS is loaded first, and FreeDOS loaded from that menu? The process you were describing in the other thread, Wonko, where a menu entry on grub4DOS boots directly into the FreeDOS bootable would be welcome here.\n\nIn addition, although the executables show up when this version of FreeDOS is booted via floppy mode, I get the error \"You haven\u0027t got enough memory!\" It\u0027s looking bleak, so far.\n\n**Edited by Kaos-Industries, 17 July 2017 - 12:13 AM.**\n"
    },
    {
      "id": "204149",
      "timestamp": "2017-07-17T07:51:41+00:00",
      "author": "Wonko the Sane",
      "content": "Somehow you are \"mixing\" a few concepts (don\u0027t worry, it is normal, but when doing this kind of things there is a necessity to be rigorous/exact).\n\nMS-DOS 6.22 does not \"understand\" FAT32, it (the DOS 6.22) was released two years before the FAT32 was \"invented\" and the first OS to be able to access it was Windows 95 **OSR2** (or DOS ~~7.0~~ **7.1** if you prefer). Even NT 4.00 does not understand FAT32.\n\nFAT32 was devised to be - while very similar overall to FAT 16 in structure - a \"new\" filesystem with a \"wider\" range of possibilities.\n\nThe physical limit in size of a FAT16 volume is - in practice - 1 Gb (it is possible to go as large as 2 Gb, but it is normally NOT advised).\n\nThere is NO IO.SYS \"in the MBR\" in your stick, actually there is no \"IO.SYS\", FreeDOS has kernel.sys as \"main OS file\".\n\nThe normal booting sequence in a MBR \"style\" device is the following:\n\nBIOS-\\\u003eMBR-\\\u003ePBR of the active partition in MBR\u0027s partition table-\\\u003eKernel.sys\n\nMultibooting is not a problem per se, but it does imply (in the case of MS-DOS 6.22) some limitations (the FAT 16 format of the volume is one of them) or - in order to avoid these limitations - the introduction of more complex \"overlays\".\n\nSome (smaller) limitations/inconveniences may be due to the desire to multiboot with 7, to boot via BOOTMGR, etc.\n\nAnd now you have to understand how each and every \"automated\" tool, such as WinsetupFromUSB or RMPREPUSB are designed to do something along a given \"path\".\n\nParticularly WinSetupFromUSB is designed to solve the issue of installing several versions of Windows from USB, and in order to do this may (or may not) need some specific setting that may (or may not) be contrasting with your declared goal of running the DOS from the stick ti run the \"specific software\" for the \"expensive hardware\".\n\nThere is no way to know without knowing the specifics of the given software.\n\nRMPREPUSB, though more \"flexible\" in some senses, suffers in part of the same issues, it defaults to some settings/ways that may (or may not) be compatible with your intended use.\n\nAnyway, as always, FORGET (temporarily) about menu.lst.\n\nGrub4dos provides a command line interface, in it you can test the commands before writing them in a menu.lst entry.\n\nThe commands needed to boot a FreeDOS (provided that the FreeDOS is installed \"normally\" in a partition of the stick are usually:\n\n```\n\nfind --set-root /kernel.sys\nchainloader /kernel.sys\nboot\n```\n\nThose commands, once tested and successful will translate in a menu.lst entry such as:\n\n```\n\ntitle FreedosÂ \nfind --set-root /kernel.sys\nchainloader /kernel.sys\n```\n\nBut on a \"static\" USB stick, it would make more sense to hardcode the device \\*like\\*:\n\nroot (hd0,0)\n\nchainloader /kernel.sys\n\nAnyway, if the FreeDOS right now doesn\u0027t boot directly in a way suitable to run your programs, that must (should) be fixed BEFORE adding grub4dos (or anything else) to the mix.\n\nNow, be nice, forget (temporarily) about multibooting and grub4dos and anything else and just follow the given tutorial:\n\n[http://reboot.pro/to...isk-boot-image/](http://reboot.pro/topic/15839-pengos-guide-to-making-a-dos-hard-disk-boot-image/ \"\")\n\nif your QEMU install on the image works, and works correctly with your software, AND it continues working once transferred to the USB stick, THEN (and only THEN) we will add more complications, multibooting, grub4dos, etc.\n\nIF there are issues of any kind, believe me, it is better to find and solve them BEFORE adding complications to the build.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "204150",
      "timestamp": "2017-07-17T07:52:15+00:00",
      "author": "steve6375",
      "content": "That RMPrepUSb tutorial installs grub4dos to the MBR (Step 5).\n\nOnce you have a working USb drive, you can convert it to an ISO using RMPrepUSB - File - Make grub4dos ISO file from drive\n\n"
    },
    {
      "id": "204151",
      "timestamp": "2017-07-17T07:57:26+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Once you have a working USb drive, you can convert it to an ISO using RMPrepUSB - File - Make grub4dos ISO file from drive\n\nPerfect. ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)\n\n\u003e Having the DOS on a .iso is not usually a good idea (because the .iso is read only) and surely your software needs to save some info somewhere.\n\n![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "204153",
      "timestamp": "2017-07-17T08:17:56+00:00",
      "author": "steve6375",
      "content": "So make a FAT16 USB drive using your original msdos 6.22 files and add your executables.\n\nTest it.\n\nNote that DOS executables don\u0027t *just work*. You often need to load drivers in a config.sys file and autoexec.bat file.\n\nMany executables require special DOS versions or environments.\n\nOne DOS program might work and another might not.\n\nSo the \u0027not enough memory\u0027 error is a symptom of this.\n\nDo you actually have a working example (in any form) of these mysterious DOS executables + DOS OS files?\n\nOr are you trying to cobble together DOS plus these special executables and get them to work for the first time?\n\n"
    },
    {
      "id": "204154",
      "timestamp": "2017-07-17T09:44:14+00:00",
      "author": "steve6375",
      "content": "Freedos tip: Instead of himem.exe in the FDCONFIG.SYS file, try jemmex.exe\n\nThis may solve the \u0027not enough memory\u0027 issue.\n\ne.g.\n\n```\nshell\u003d\\COMFREE.COM /E:512 /P\u003dfdauto.bat\nDOS\u003dHIGH\ndevice\u003d\\FREEDOS\\jemmex.exe\n```\n\nYou can obtain jemmex.exe from the freedos project site www.freedos.org\n\nand copy it to the FREEDOS folder on the USB drive.\n\n"
    },
    {
      "id": "204155",
      "timestamp": "2017-07-17T12:13:52+00:00",
      "author": "wendy",
      "content": "It\u0027s actually DOS 7.10, from Windows OS/R2 and later that support it. The more compatible DOS is one mastered from Windows 98 or 98SE. They\u0027re pretty much the same.\n\nWhere DOS is accessing a non FAT partition, you need some sort of installable FS driver. This is usually a real-mode thing that greatly limits the available space. You are better off inking something like BartPE or some modern version of PE.\n\n"
    },
    {
      "id": "204156",
      "timestamp": "2017-07-17T12:18:51+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e It\u0027s actually DOS 7.10, from Windows OS/R2 and later that support it.\n\nYou are right, my bad :blush: , I kinda forgot the first release of Windows 95.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "204163",
      "timestamp": "2017-07-17T21:58:48+00:00",
      "author": "Kaos-Industries",
      "content": "\u003e Somehow you are \"mixing\" a few concepts (don\u0027t worry, it is normal, but when doing this kind of things there is a necessity to be rigorous/exact).\n\u003e\n\u003e MS-DOS 6.22 does not \"understand\" FAT32, it (the DOS 6.22) was released two years before the FAT32 was \"invented\" and the first OS to be able to access it was Windows 95 **OSR2** (or DOS ~~7.0~~ **7.1** if you prefer). Even NT 4.00 does not understand FAT32.\n\u003e\n\u003e FAT32 was devised to be - while very similar overall to FAT 16 in structure - a \"new\" filesystem with a \"wider\" range of possibilities.\n\u003e\n\u003e The physical limit in size of a FAT16 volume is - in practice - 1 Gb (it is possible to go as large as 2 Gb, but it is normally NOT advised).\n\u003e\n\u003e **Multibooting is not a problem per se, but it does imply (in the case of MS-DOS 6.22) some limitations (the FAT 16 format of the volume is one of them)** or - in order to avoid these limitations - the introduction of more complex \"overlays\".\n\u003e\n\u003e Some (smaller) limitations/inconveniences may be due to the desire to multiboot with 7, to boot via BOOTMGR, etc.\n\nThis is what I\u0027m having trouble understanding, and what I\u0027m yet to get an explanation of. If DOS 6.22 requires a FAT16 USB, how is it that I\u0027m able to run it fine on a FAT32 one, with the only problem being an inability to see other executables?\n\n\u003e So make a FAT16 USB drive using your original msdos 6.22 files and add your executables.\n\u003e\n\u003e Test it.\n\u003e\n\u003e Note that DOS executables don\u0027t *just work*. You often need to load drivers in a config.sys file and autoexec.bat file.\n\u003e\n\u003e Many executables require special DOS versions or environments.\n\u003e\n\u003e One DOS program might work and another might not.\n\u003e\n\u003e So the \u0027not enough memory\u0027 error is a symptom of this.\n\u003e\n\u003e **Do you actually have a working example (in any form) of these mysterious DOS executables + DOS OS files?**\n\u003e\n\u003e **Or are you trying to cobble together DOS plus these special executables and get them to work for the first time?**\n\nYes, when starting out on this project I used the version of DOS packaged within Rufus, which is a modified (to make bootable) version of DOS 8.0, which originally came integrated with Windows ME. Rufus pulls it from the diskcopy.dll file found on all pre-Windows 10 computers. The executables worked fine on this version, but I continued searching out 6.22 for the reasons of compatibility once actually using the software to communicate to the vehicle, and because Rufus doesn\u0027t support multibooting.\n\n"
    },
    {
      "id": "204164",
      "timestamp": "2017-07-17T23:22:17+00:00",
      "author": "ady",
      "content": "\u003e This is what I\u0027m having trouble understanding, and what I\u0027m yet to get an explanation of. If DOS 6.22 requires a FAT16 USB, how is it that I\u0027m able to run it fine on a FAT32 one, with the only problem being an inability to see other executables?\n\nLet\u0027s use some hypothetical example, just to try to clarify the different concepts (hopefully).  \n\nLet\u0027s assume we use grub4dos, and then use the \"mapping\" options / capabilities of grub4dos on an \"MS-DOS 6.22\" image file (e.g. a bootable floppy image). The image file itself can be located on a FAT32 volume, while the image file could contain a FAT12 or FAT16 volume, which is what MS-DOS 6.22 sees.  \n\nIn this hypothetical example, the DOS image _file_ is located on a FAT32 volume, and the \"internal\" file system within the DOS image is FAT12 or FAT16. Using the \"mapping\" features of grub4dos, you are not booting the DOS kernel directly from grub4dos, but rather you are \"chainloading\".  \n\nThe existence of 2 different volumes, one within the image file and another one in which the image file itself resides, is one possible explanation as to why the additional DOS programs \"cannot be found\" by MS-DOS (booted within the image).  \n\nIn contrast, when you use RUFUS, it formats your USB device with one FAT16 partition (when the partition in the USB device is relatively \"small\") and the DOS kernel is located directly on this FAT16 volume. In this case, there is no need to \"map\" an additional (FAT12 or FAT16) image file.  \n\nPlease note that FreeDOS can also be installed on a FAT32 volume (when the partition is recognized by RUFUS as relatively \"big enough\"), but MS-DOS 6.22 does not support such file system.  \n\nI hope this hypothetical example clarifies the matter of the FAT32 vs. FAT16 volumes (I hope it won\u0027t make things more difficult to understand).\n\n"
    },
    {
      "id": "204165",
      "timestamp": "2017-07-17T23:33:24+00:00",
      "author": "steve6375",
      "content": "If the executables worked fine on the DOS 8 flash drives - why don\u0027t you use them?\n\nYou can follow the RMPrepUSB tutorial to add a \\\\menu.lst file and install grub4dos onto the flash drive.\n\nThen use RMPrepUSB to make a bootable ISO.\n\nThen add the bootable ISO to your WinSetupFromUSB drive.\n\n"
    },
    {
      "id": "204166",
      "timestamp": "2017-07-18T00:06:27+00:00",
      "author": "Kaos-Industries",
      "content": "\u003e So make a FAT16 USB drive using your original msdos 6.22 files and add your executables.\n\u003e\n\u003e Test it.\n\nTrying this, but I\u0027m getting really frustrated with RMPrepUSB\u0027s settings for step 5. What do the two actions actually mean, and which should I select? The only way to link directly to the ISO file for my DOS 6.22 boot file is to click No (i.e. make it extract the contents of the ISO to the drive). Is this what I want?\n\n\u003e Let\u0027s use some hypothetical example, just to try to clarify the different concepts (hopefully).  \n\u003e\n\u003e Let\u0027s assume we use grub4dos, and then use the \"mapping\" options / capabilities of grub4dos on an \"MS-DOS 6.22\" image file (e.g. a bootable floppy image). The image file itself can be located on a FAT32 volume, while the image file could contain a FAT12 or FAT16 volume, which is what MS-DOS 6.22 sees.  \n\u003e\n\u003e In this hypothetical example, the DOS image _file_ is located on a FAT32 volume, and the \"internal\" file system within the DOS image is FAT12 or FAT16. Using the \"mapping\" features of grub4dos, you are not booting the DOS kernel directly from grub4dos, but rather you are \"chainloading\".  \n\u003e\n\u003e The existence of 2 different volumes, one within the image file and another one in which the image file itself resides, is one possible explanation as to why the additional DOS programs \"cannot be found\" by MS-DOS (booted within the image).  \n\u003e\n\u003e In contrast, when you use RUFUS, it formats your USB device with one FAT16 partition (when the partition in the USB device is relatively \"small\") and the DOS kernel is located directly on this FAT16 volume. In this case, there is no need to \"map\" an additional (FAT12 or FAT16) image file.  \n\u003e\n\u003e Please note that FreeDOS can also be installed on a FAT32 volume (when the partition is recognized by RUFUS as relatively \"big enough\"), but MS-DOS 6.22 does not support such file system.  \n\u003e\n\u003e I hope this hypothetical example clarifies the matter of the FAT32 vs. FAT16 volumes (I hope it won\u0027t make things more difficult to understand).\n\nSo for MS-DOS 6.22, the filesystem of the USB itself can be FAT32, which is why DOS runs on top of it with grub4DOS, but the internal filesystem of the MS-DOS ISO is FAT16?\n\n\u003e If the executables worked fine on the DOS 8 flash drives - why don\u0027t you use them?\n\u003e\n\u003e You can follow the RMPrepUSB tutorial to add a \\\\menu.lst file and install grub4dos onto the flash drive.\n\u003e\n\u003e Then use RMPrepUSB to make a bootable ISO.\n\u003e\n\u003e Then add the bootable ISO to your WinSetupFromUSB drive.\n\nAt the time I decided it wasn\u0027t worth the risk, but I suppose my fears about compatibility have been somewhat assuaged since. If you can guarantee me that DOS 8.0 is closer to MS-DOS 6.22, and therefore less likely to FUBAR things than FreeDOS is, then I don\u0027t see why that\u0027s not a route I can try. However, who\u0027s to say the bootable ISO I generate with RMPrepUSB won\u0027t function the same way as the MS-DOS 6.22 one did when I tried to use it in WinSetupFromUSB?\n\n\u003e Now, be nice, forget (temporarily) about multibooting and grub4dos and anything else and just follow the given tutorial:\n\u003e\n\u003e [http://reboot.pro/to...isk-boot-image/](http://reboot.pro/topic/15839-pengos-guide-to-making-a-dos-hard-disk-boot-image/ \"\")\n\u003e\n\u003e if your QEMU install on the image works, and works correctly with your software, AND it continues working once transferred to the USB stick, THEN (and only THEN) we will add more complications, multibooting, grub4dos, etc.\n\u003e\n\u003e IF there are issues of any kind, believe me, it is better to find and solve them BEFORE adding complications to the build.\n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\u003e\n\u003e Wonko\n\nAttempting this now.\n\nEDIT: I\u0027ve had a look at that tutorial and it\u0027s way above my head. You were talking about adding layers of complexity, and I can\u0027t see how following a tutorial with whole new tools that I\u0027ve never used before - least of all, command line tools - is going to do anything but that when I\u0027m already having trouble with the basics that others have suggested like creating a FAT16 USB. If it means getting DOS 6.22, which has become a sort of challenge now, then I\u0027d consider it IF it made sense to me, but the link to QEMU from it is dead. I searched it, downloaded it, and don\u0027t even know how to boot it. Tried the QtEMU GUI, but that seems vastly outdated and doesn\u0027t have an option for DOS. More than that, the tutorial looks like it was written for someone who knows what they\u0027re doing with QEMU, and that\u0027s definitely not me. Right now, I feel like it\u0027s only going to make me rip my hair out.\n\nIs there an alternative method to go the DOS 6.22 route other than that tutorial?\n\n**Edited by Kaos-Industries, 18 July 2017 - 01:02 AM.**\n"
    },
    {
      "id": "204169",
      "timestamp": "2017-07-18T07:59:29+00:00",
      "author": "Wonko the Sane",
      "content": "WHICH command line tools? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nQemu Manager is GUI.\n\nRMPREPUSB is GUI.\n\nIMDISK (optional) is GUI.\n\nOf course FDISK, FORMAT and SYS are command line, since they are run into the DOS environment.\n\nAnd of course you need some (floppy or CD) image(s) with the actual DOS.\n\nThe original site is down, but you can get QEMU Manager via Wayback Machine:\n\n[https://web.archive....etupqemuk70.exe](https://web.archive.org/web/20120506095037/http://www.davereyn.co.uk/qem/setupqemuk70.exe \"External link\")\n\nThere is a detailed help file in the form of a .pdf (that should be already in the installer) but that you can get here:\n\n[https://web.archive....emumanager7.pdf](https://web.archive.org/web/20120506094712/http://www.davereyn.co.uk/qem/qemumanager7.pdf \"External link\")\n\nI suggested the VM way because it is the one that gives the more possibilities to experiment, since you were willing to make a complex multiboot setup, and it is also (as I see it) the most practical and easy path, particularly for someone that is familiar with the \"normal\" way to install DOS on a \"real\" machine.\n\nA Virtual Machine is nothing but a \"replica\" of a \"real machine\" with the (distinct) advantage that it runs on your OS, and allows to experiment without the need of rebooting the host machine numberless times (as you would need to do if you go \"physical\").\n\nPersonally (but of course your mileage may vary) if really your software is (was) designed for MS-DOS 6.22 and it is a specialized software to drive \"expensive\" machines, I would try keeping it running on MS-DOS 6.22, we don\u0027t know how it would behave on a more recent version of MS-DOS (more likely that it will work flawlessly) or on FreeDOS (less likely to b capable of runnign it flawlessly).\n\nIn good ol\u0027 DOS 5.0 and 6.0/6.22 times programmers had to take all sorts of \"shortcuts\" to manage to run complex software in the (limited) DOS environment, including the use of undocumented DOS functions.\n\nIt is a kind of a bet, maybe a newly installed FreeDOS (with a procedure that you are not at all familiar with) will work just fine, maybe it won\u0027t, but in the case it won\u0027t it will be extremely difficult to find out WHAT is the reason why it doesn\u0027t work (is it the FreeDos, is it the USB stick, is it the BIOS, is it something else?).\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "204170",
      "timestamp": "2017-07-18T08:26:41+00:00",
      "author": "steve6375",
      "content": "\u003e Trying this, but I\u0027m getting really frustrated with RMPrepUSB\u0027s settings for step 5. What do the two actions actually mean, and which should I select? The only way to link directly to the ISO file for my DOS 6.22 boot file is to click No (i.e. make it extract the contents of the ISO to the drive). Is this what I want?\n\u003e\nRMPrepUSB has a context-sensitive help box. Also when you click on the \u0027Choose Source\u0027 button it says to select NO to extract files from an ISO (it uses 7zip).\n\nYou need to extract the files from the ISO and copy them onto the USB drive. You can either use option 5 and choose \u0027No\u0027 for extraction, or don\u0027t use option 5 at all and then after the USB drive is made, simply extract the files from whatever bootable ISO you want to use and copy the files onto the USB drive.  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![CaptureRMPRepCOPY.JPG](http://reboot.pro/uploads/monthly_07_2017/post-17818-0-32500100-1500366326_thumb.jpg)](http://reboot.pro/uploads/monthly_07_2017/post-17818-0-32500100-1500366326.jpg \"CaptureRMPRepCOPY.JPG - Size: 25.28KB\"){#ipb-attach-url-16034-0-17357700-1676066439}\n\n"
    },
    {
      "id": "204172",
      "timestamp": "2017-07-18T16:16:01+00:00",
      "author": "cdob",
      "content": "\u003e So for MS-DOS 6.22, the filesystem of the USB itself can be FAT32, which is why DOS runs on top of it with grub4DOS, but the internal filesystem of the MS-DOS ISO is FAT16?\nYes, there is a FAT16. Actually a ElTorito floppy emulation, there is a floppy image inside this boot ISO.  \n\n\u003cbr /\u003e\n\n\u003e Is there an alternative method to go the DOS 6.22 route other than that tutorial?\nUse a existing vhd image.  \n[http://www.trappers....l-pc-image-vhd/](http://www.trappers.tk/site/2010/11/16/bare-msdos-6-22-virtual-pc-image-vhd/ \"External link\")  \n\nMount the vhd image at Windows 7 and up disk management, copy your custom files. Dismount the vhd image.  \nCopy the vhd image to the USB drive, defragment the file.  \nBoot the vhd image at grub4dos,  \n\n```\ntitle /dos/msdos622.vhd\nmap /dos/msdos622.vhd (hd0)\nmap --rehook\nroot (hd0,0)\nchainloader +1\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "204173",
      "timestamp": "2017-07-18T23:06:26+00:00",
      "author": "Kaos-Industries",
      "content": "\u003e WHICH command line tools? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\u003e\n\u003e Qemu Manager is GUI.\n\u003e\n\u003e RMPREPUSB is GUI.\n\u003e\n\u003e IMDISK (optional) is GUI.\n\u003e\n\u003e Of course FDISK, FORMAT and SYS are command line, since they are run into the DOS environment.\n\u003e\n\u003e And of course you need some (floppy or CD) image(s) with the actual DOS.\n\u003e\n\u003e The original site is down, but you can get QEMU Manager via Wayback Machine:\n\u003e\n\u003e [https://web.archive....etupqemuk70.exe](https://web.archive.org/web/20120506095037/http://www.davereyn.co.uk/qem/setupqemuk70.exe \"External link\")\n\u003e\n\u003e There is a detailed help file in the form of a .pdf (that should be already in the installer) but that you can get here:\n\u003e\n\u003e [https://web.archive....emumanager7.pdf](https://web.archive.org/web/20120506094712/http://www.davereyn.co.uk/qem/qemumanager7.pdf \"External link\")\n\u003e\n\u003e I suggested the VM way because it is the one that gives the more possibilities to experiment, since you were willing to make a complex multiboot setup, and it is also (as I see it) the most practical and easy path, particularly for someone that is familiar with the \"normal\" way to install DOS on a \"real\" machine.\n\u003e\n\u003e A Virtual Machine is nothing but a \"replica\" of a \"real machine\" with the (distinct) advantage that it runs on your OS, and allows to experiment without the need of rebooting the host machine numberless times (as you would need to do if you go \"physical\").\n\u003e\n\u003e Personally (but of course your mileage may vary) if really your software is (was) designed for MS-DOS 6.22 and it is a specialized software to drive \"expensive\" machines, I would try keeping it running on MS-DOS 6.22, we don\u0027t know how it would behave on a more recent version of MS-DOS (more likely that it will work flawlessly) or on FreeDOS (less likely to b capable of runnign it flawlessly).\n\u003e\n\u003e In good ol\u0027 DOS 5.0 and 6.0/6.22 times programmers had to take all sorts of \"shortcuts\" to manage to run complex software in the (limited) DOS environment, including the use of undocumented DOS functions.\n\u003e\n\u003e It is a kind of a bet, maybe a newly installed FreeDOS (with a procedure that you are not at all familiar with) will work just fine, maybe it won\u0027t, but in the case it won\u0027t it will be extremely difficult to find out WHAT is the reason why it doesn\u0027t work (is it the FreeDos, is it the USB stick, is it the BIOS, is it something else?).\n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\u003e\n\u003e Wonko\n\nI agree on trying everything possible to use DOS 6.22, the less risk factors there are the better in this case.\n\nI need some help, I\u0027m stuck on this part of the \"tutorial\".\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e Add to the VM, change boot order to and boot the boot image you are using, for this example it would be the Windows 98 boot disk image (added as a FDD).\n\nFor a tutorial/guide, it\u0027s ridiculously ambiguous and I\u0027m having trouble understanding what it\u0027s saying, and the manual\u0027s not making things much clearer. After spending the last few minutes trying to figure out what it was saying and how that corresponded to the program, I installed Qemu Manager and created a VM with the following settings:\n\n[http://imgur.com/a/ckTi9](http://imgur.com/a/ckTi9 \"External link\")\n\nI then went to Boot Order and moved \"Hard Drive\" to the top, but I\u0027m still completely clueless on how to install my DOS 6.22 ISO onto that virtual harddrive.\n\nAlso, once that\u0027s done, should I be doing this part?\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e You can also add a 2nd hdd to your VM that points to a folder or your whole hdd (I would tick the read-only option to prevent data loss). This can come in handy when wanting to populate your disk image with the data you want later on. As you can simply copy from one drive to the other within the VM.\n\n"
    },
    {
      "id": "204175",
      "timestamp": "2017-07-19T03:55:08+00:00",
      "author": "Blackcrack",
      "content": "go to A: (a and b be the floppy disk\u0027s)\n\nA:\\[enter\\]\n\n\"dir\" \\[enter\\]\n\nfdisk, create a partition \u003d\\\u003e\n\nreboot with the iso ...\n\nfor getting a C: with a clean partition without format, then\n\ngo again on the bootpartition (virtual RamDrive a where be in the Workspace)\n\na: , like i remember me ..\n\nformat /autotest C:\n\nsys C: (from the bootdisk to getting the io.sys and command.com into c and marking the C: marking as boot)\n\nlook which the drive it is who be the whole folders and a couple bat files on it :\n\nc: \\[enter\\], dir \\[enter\\]\n\nd: \\[enter\\], dir \\[enter\\]\n\ne: \\[enter\\], dir \\[enter\\]\n\nthen, edit the bat files, they are all something like scriptfiles and one install the dos, one install the 3.11\n\nedit or more (more \"file\" \\[enter\\] )\n\n(command \u0027 how (parameters/switches) \u0027 what (the file , partition or other) )\n\nthe switch /p \u003d page it should work on the \"dir\" command and /w also so, check out /?\n\nor try \"more xxxxxxx.bat \" \\[enter\\]\n\nwith memmaker be you in able for automatical configuring the memory using, behind edit the\n\nautoexec.bat and the config.sys check it out..\n\nin dos have you also an help function also with cursor-keys (up-righ-left-down)\n\nall other it is self explained in the help-\"program\" have fun by dos-learning .. :smile:\n\ntype \"help\" \\[enter\\]\n\nbest regards\n\nBlacky\n\n"
    },
    {
      "id": "204176",
      "timestamp": "2017-07-19T04:25:31+00:00",
      "author": "cdob",
      "content": "\u003e I then went to Boot Order and moved \"Hard Drive\" to the top, but I\u0027m still completely clueless on how to install my DOS 6.22 ISO onto that virtual harddrive.\nAttach the DOS 6.22 ISO at Qemu Manager to a CD drive.  \nMove the Boot Order to the CD drive.  \nBoot from the CD at the virtual machine.  \nMake the hard disk bootable: fdisk, format /b and/or sys   \n"
    },
    {
      "id": "204177",
      "timestamp": "2017-07-19T10:11:35+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Attach the DOS 6.22 ISO at Qemu Manager to a CD drive.  \n\u003e Move the Boot Order to the CD drive.  \n\u003e Boot from the CD at the virtual machine.  \n\u003e Make the hard disk bootable: fdisk, format /b and/or sys\n\nThis. ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)\n\nAdditionally:\n\nIn the \"main\" Qemu Manager Windows click on the \"Drives\" button.\n\nYou should have the new \"RAW\" disk image that you just created as Hard Disk 0 and the DOS 6.22 .iso as \"CD-ROM\".\n\nYou will have also a line \"Boot order\" where you must have \"CD/DVD Drive,Hard Drive, Floppy\".\n\nThis is the same setting you would normally set in BIOS on a real machine, as \"Boot priority\" or similar.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    }
  ]
}