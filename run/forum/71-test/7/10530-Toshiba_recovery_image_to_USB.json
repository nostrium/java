{
  "id": "10530",
  "title": "Toshiba recovery image to USB",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "92531",
      "timestamp": "2010-02-25T16:37:23+00:00",
      "author": "teebee",
      "content": "Hello,  \n\nI humbly ask for help, or some pointers in the right direction, for assistance with a problem I am finding a bit of a challenge.  \n\nI have a Toshiba netbook running XP that allows me to create a recovery DVD. I have made an ISO of the recovery disk and have been fumbling around for some time now trying to get this to boot from a flash drive. The fumbling part of this statement should give you an indication of the level of progress I have made ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)   \n\nI have tried using uunetboot to load the image, but didn\u0027t have any success (booted with a default option and would go no further). I have also tried extracting the boot sector with BBIE in the hope that maybe I could figure out what to do with it a reload it to the flash drive with mkbt then copy the ISO files over, but I was out of my depth here and had no idea if this would work, so I bottled out. I am not even sure if the flash drive is supposed to FAT or NTFS formatted ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png)  \n\nIn case it may be useful, the visible structure of the ISO is reproduced (rougly) below:  \n\nIt has a bootmgr file and a setinv.ini at its root and a bunch of folders;  \nA Boot folder containing a bcd file, boot.sdi and etfsboot.com  \nAn EFI\\\\microsoft\\\\boot folder containing another bcd file  \nA HDDPrep folder containing a bootmgr file and a boot directory the same as the first, but also a sources directory with a boot.wim  \nA Sources folder with another boot.wim  \nA Tools folder containing imagex and some other bits  \nAnd a ZZImg folder with a few .swm files and a .crc (which I gather is just a multipart .wim)  \n\nMy thanks in advance,  \n\nTony   \n"
    },
    {
      "id": "92534",
      "timestamp": "2010-02-25T16:52:54+00:00",
      "author": "shamurshamur",
      "content": "try grub4dos to boot iso file.  \n\ninstall grub4dos to your usb.( you can use BOOTICE(gui tool) to install grub4dos)  \ncopy the iso file to root of your usb.  \nuse this code for booting iso file.  \n\n(assuming name of iso file is recoverydvd.iso)  \n\n```\ntitle recoverydvd\n\nfind --set-root /recoverydvd.iso\n\nmap  /recoverydvd.iso \u0026#40;0xFF\u0026#41; || map --mem /recoverydvd.iso \u0026#40;0xFF\u0026#41;\n\nmap --hook\n\nroot \u0026#40;0xFF\u0026#41;\n\nchainloader \u0026#40;0xFF\u0026#41;\n```\n\n\u003cbr /\u003e\n\ntell me if this work or if you want to ask in detail.   \n"
    },
    {
      "id": "92536",
      "timestamp": "2010-02-25T16:55:17+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e In case it may be useful, the visible structure of the ISO is reproduced (rougly) below:\n\nMaybe if you could run a:  \n\n```\nDIR  D\u0026#58; /S\u003eC\u0026#58;\\DVDdir.txt\n```\n\nthen compress DVDdir.txt in a .zip file and post it as an attachment, we would have a less rough idea of the DVD structure ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png).  \n\nGenerally speaking .SWM files are tricky business, a special app may be needed to get something out of them.  \n\nHere an user started playing the game and soon abandoned it ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif):  \n[http://www.msfn.org/...-recovery-disc/](http://www.msfn.org/board/topic/127747-create-clean-install-from-toshiba-recovery-disc/ \"External link\")  \n\nIf your DVD is like that one no need for the DIR, of course.  \n\n:wink:  \n\nWonko   \n"
    },
    {
      "id": "92579",
      "timestamp": "2010-02-25T21:04:18+00:00",
      "author": "teebee",
      "content": "Thanks Guys,  \n\nI didn\u0027t expect such a rapid response ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png)   \n\n@shamurshamur  \nI\u0027ll give grub4dos a try and let you know how I get on... thanks for the usage instructions, will save me lots of reading.  \n\n@Wonko  \nHeh... yes, maybe outputting the structure to a text file would have been more sensible. You even managed to suggest it without sarcasm, for which I thank you ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)   \n\nThe structure is very similar to the post you reference, with some very minor differences. I have attaached a zip anyway, as it is only 1kb. It looks to me like the OP of the thread was trying to strip out some of the bloatware from his images... I want to copy the entire lot to a bootable USB otherwise unmolested, so I hope this makes the task a little less tricky!  \n\nI\u0027ll let you know how I get on after having a go with grub.  \n\nCheers,  \n\nTony  \n\n#### Attached Files {#attach_wrap}\n\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003d74f69d34b4914e301501ba6dd36437ba\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d10560 \"Download attachment\") [**ToshDir.7z**](http://reboot.pro/index.php?s\u003d74f69d34b4914e301501ba6dd36437ba\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d10560 \"Download attachment\") **980bytes** 550 downloads\n\n"
    },
    {
      "id": "92597",
      "timestamp": "2010-02-26T00:41:36+00:00",
      "author": "teebee",
      "content": "Hi,  \n\nI\u0027ve made some progress, by using BOOTICE to create an UltraISO USB-HDD MBR and a PBR that points to BOOTMGR.  \n\nThe ISO has a BOOTMGR file, so I copied this onto the flash drive with the rest of the files and booted the netbook. It seemed to load up OK, as I got the Windows is loading files... progress bar and then the black boot window with the Windows style progress bar like you get when you boot Vista.   \n\nNext I get a DOS box with a title x:\\\\windows\\\\system32\\\\cmd.exe - startnet.cmd. The text in the DOS box says \u0027Waiting for ODD to become available ... \u0027 and does not progress.  \n\nI created the original recovery disk by jerry rigging a DVDRW through a 3.5\" caddy I have, as the recovery software will only run with an optical drive attached and will only output to said optical drive.  \n\nI am now stumped again, as the waiting for ODD message must mean that the recovery software is not looking for the image on the flash drive and is seeking an optical drive to restore the image from. Any ideas please?  \n\nThanks,  \n\nTony  \n\nEDIT: shamurshamur, could you tell me what file I am supposed to edit for grub with the code you specify please. Thanks ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)   \n"
    },
    {
      "id": "92598",
      "timestamp": "2010-02-26T01:32:05+00:00",
      "author": "shamurshamur",
      "content": "@teebee  \n\nfor installing grub4dos on pen drive by **bootice** :  \n1) choose option \"process MBR\"  \n2) then choose \"grub 4 dos 0.4.5a\"  \n3) press \"install/config\" button  \n4) now manually copy files \"grldr\" and \"menu.lst\" to root of the pendrive. ( get these 2 file from here [grub4dos](http://download.gna.org/grub4dos/grub4dos-0.4.4.zip \"External link\"))  \n\nThe code which i have given , should be copied in to file menu.lst ( use any text editor) .  \nThe iso file(recoverydvd.iso) you are copying to the pen drive should be contiguous ( it should be defragmented after copying)  \n\n**PS** :  \ni am not guranteeing that this method will work , and after seeing the freakishly large size of the iso file i am less hopeful.  \n\nread the threads mentioned by @wankothesane in previous post.  \n\ncheers!!   \n"
    },
    {
      "id": "92600",
      "timestamp": "2010-02-26T01:47:51+00:00",
      "author": "teebee",
      "content": "Thanks shamsurshamshur,  \n\nI\u0027ve just tried loading manually with grub, by booting into grub and entering those commands from the command line (I\u0027ve just seen your post) and I got the following message after executing the chainloader (0xFF) command:  \n\nLoad segment: 0x0 System Type: 0x0 Sector Count: 0X4  \nLoad RBA: 0x37 Boot Type: 0 \u003d No Emulation  \n\nNot sure if that would be the expected outcome from entering the commands into menu.lst, I assume that is a sort of batch file for grub and would have the same effect?  \n\nThanks for your help so far... even if I get nothing more than the headache this has given me, at least I have learnt a thing or two today ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)   \n"
    },
    {
      "id": "92601",
      "timestamp": "2010-02-26T01:52:50+00:00",
      "author": "teebee",
      "content": "Edit: @shamurshamur (I put to many sh\u0027s in ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) )  \n\nI can see why you may be concerned about the iso size. Is it likely that an image of that size would remain in contiguous sectors, even if the disk was defragmented after copy??  \n\nTa,  \n\nTony   \n"
    },
    {
      "id": "92602",
      "timestamp": "2010-02-26T02:19:26+00:00",
      "author": "teebee",
      "content": "Shamur, I popped your code in the menu.lst file and I got the thing to boot ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)  \n\nUnfortunately, I got exactly as far as the other method I tried in my post #5 ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)  \n\nI think that is the proverbial fat lady I hear singing, so time to abandon this particular cause for one that has better possibility of a successful outcome.  \n\nThanks to both yourself and Wonko for the guidance.  \n\nTony   \n"
    },
    {
      "id": "92617",
      "timestamp": "2010-02-26T08:53:29+00:00",
      "author": "Wonko the Sane",
      "content": "teebee, I guess that both you and shamurshamur were a bit too optimistic. ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)  \n\nI mean, nice try ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) but it was likely that it wouldn\u0027t have worked, the grub4dos emulation of a CD/DVD is only \"partial\", and the stoopid guys at Toshiba (not that they are worse than those at Sony or HP, BTW ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) ) like to have things done in a complex way.  \n\nI would try the manual imagex approach:  \n[http://www.msfn.org/...showtopic\u003d89955](http://www.msfn.org/board/index.php?showtopic\u003d89955 \"External link\")  \n[http://www.msfn.org/...howtopic\u003d109293](http://www.msfn.org/board/index.php?showtopic\u003d109293 \"External link\")  \n\n![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)  \n\nWonko   \n"
    },
    {
      "id": "92643",
      "timestamp": "2010-02-26T12:47:07+00:00",
      "author": "teebee",
      "content": "\u003e teebee, I guess that both you and shamurshamur were a bit too optimistic. ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)\n\nYeah, I haven\u0027t had enough gotcha\u0027s for my optimism to wear off yet! ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png)   \n\n\u003e I would try the manual imagex approach:  \n\u003e [http://www.msfn.org/...showtopic\u003d89955](http://www.msfn.org/board/index.php?showtopic\u003d89955 \"External link\")  \n\u003e [http://www.msfn.org/...howtopic\u003d109293](http://www.msfn.org/board/index.php?showtopic\u003d109293 \"External link\")\n\nThose look very interesting, thanks. I think I understand the process using imagex discussed in the second post, though I am not sure how I could automate this through a bootloader on a flash drive.   \n\nI don\u0027t understand the bootloading process to start my own experimentation. I get that the boot partition calls a loader, but am not sure what is contained in the loader and how it is edited and whether there are further scripts after this or the loader manages the calls to something like imagex to write the image to the drive?  \n\nIs there any chance of a couple of pointers to set me off in the right direction?  \n\nCheers,  \n\nTony   \n"
    },
    {
      "id": "92646",
      "timestamp": "2010-02-26T12:54:17+00:00",
      "author": "Wonko the Sane",
      "content": "Well, no. ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png)  \n\nThe idea is to \\*somehow\\* get from the stoopid .swm image a \"good\" .wim image, if needed modify the .wim, then throw away the .swm\u0027s and use the .wim.  \n\nIn other words, you now have a set of files of which we do not have any idea of the contents, first step is transforming them in a way that the content is viewable/inspectable, if needed change the content and then hopefully have something working.  \n\nNow that you\u0027ve learned the DIR /S \\\u003eC:\\\\dir.txt ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) you need to find a way to dir the contents of the .wim.  \n\n![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)  \n\nWonko   \n"
    },
    {
      "id": "94553",
      "timestamp": "2010-03-14T15:10:13+00:00",
      "author": "teebee",
      "content": "I spent a little more time looking at this and was diverted onto another task. I have abandoned the idea for now, though may try and find some more time later to see if I can do something with the image files.  \n\nI\u0027m not sure why I would need to modify the WIM, as the image would be applied to the machine that the image was created for. The problem seems to be that the image loader is waiting for the CD drive to become available to present the image, which I assume is something to do with the ImageX config files that were set when the image was originally sent to a CD drive.  \n\nOf course, I may be misunderstanding the process and the information is being fetched from the WIM, which would be why you say I need to be able to inspect the WIM ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png)   \n\nThanks for your input anyway, if I make any further progress if and when I come back to this I will let you know.  \n\nTony   \n"
    },
    {
      "id": "99711",
      "timestamp": "2010-05-10T13:40:05+00:00",
      "author": "Rance Lucifinil",
      "content": "I usually do not use recover CD, I always reinstall my system completely, this makes me feel better. And to recover data, I use recovery software like Diskgetor, it helps me a lot.  \n\nSo recover CD is useless for me.   \n"
    },
    {
      "id": "99714",
      "timestamp": "2010-05-10T13:47:11+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I usually do not use recover CD, I always reinstall my system completely, this makes me feel better. And to recover data, I use recovery software like Diskgetor, it helps me a lot.  \n\u003e\n\u003e So recover CD is useless for me.\n\nQuite frankly, unless you are a spammer for Diskgetor (which is probable), I\u0027ve rarely seen a more pointless and out of topic post in my experience. ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\n[http://en.wikipedia....9;t_give_a_damn](http://en.wikipedia.org/wiki/Frankly,_my_dear,_I_don%27t_give_a_damn \"External link\")  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "99918",
      "timestamp": "2010-05-12T16:11:35+00:00",
      "author": "steve6375",
      "content": "Looking at the files, an ISO won\u0027t work because when it boots to WinPE, the code will look for the swm files in the X\\\\ZZimg folder of all drives (**physical** drives) and so won\u0027t find them.  \n\nTwo suggestions:  \n1. Use RMPrepUSB and format the USB pen for WinPE/Bootmgr and copy the entire contents of the DVD over (not the ISO file but ALL the files inside it).  \n2. If you REALLY want to use an ISO - make a folder called \\\\ZZImg on your USB flash drive and copy all the files from the ISO folder \\\\ZZImg to the USB folder \\\\ZZImg. Then when WinPE boots from the ISO (as you have it now) it should be able to find the \\\\ZZImg\\\\ swm files on the USB drive. If this works, you could always remove the \\\\zzImg files from the ISO file as you no longer need them. Though looking at the folder structure, other bits may not work either (e.g. may not find tools or the recovery files, etc.).  \n\n\u003cbr /\u003e\n\nHTH  \nS   \n"
    }
  ]
}