{
  "id": "20948",
  "title": "Install Grub2 on a USB key without an existing Linux installation",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "197473",
      "timestamp": "2016-01-26T12:08:00+00:00",
      "author": "Monsieur Z",
      "content": "I\u0027ve been searching for some time here and on other websites for a way to install Grub(legacy)/Grub2 (NOT GRUB4DOS) on a USB key/drive, but I didn\u0027t find anything.\n\nI need a way that can be automated (so something like the command-line grubinst.exe would be nice)\n\nI saw that grubinst.exe from Grub4DOS has a --grub2 command-line parameter, but if I use it it requires a file called \u0027g2ldr\u0027 and I can\u0027t find it. I found g2ldr.mbr and g2ldr.img in the grubutil packages, but I didn\u0027t find the real g2ldr file (apart some dead mirror links).\n\nWhat\u0027s the best way to install Grub/Grub2 on a USB drive from Windows?\n\nThanks\n\n**EDIT**: I\u0027ve just found two g2ldr files, and I\u0027ve tried putting them on an USB key with grubinst.exe --grub2 ran on them:\n\nGrub 1.98+20100804-14 [ftp://ftp.nz.freebsd.org/pub/squeeze64-bpo-3.2/g2ldr](ftp://ftp.nz.freebsd.org/pub/squeeze64-bpo-3.2/g2ldr \"External link\")\n\nGrub 1.96 [http://kebo.pens.ac.id/debian-hp/g2ldr](http://kebo.pens.ac.id/debian-hp/g2ldr \"External link\")\n\n"
    },
    {
      "id": "197486",
      "timestamp": "2016-01-27T19:05:25+00:00",
      "author": "memoarfaa",
      "content": "\u003e Thanks  \n\u003e\n\u003e **EDIT** : I\u0027ve just found two g2ldr files, and I\u0027ve tried putting them on an USB key with grubinst.exe --grub2 ran on them:  \n\u003e Grub 1.98+20100804-14 [ftp://ftp.nz.freebsd.org/pub/squeeze64-bpo-3.2/g2ldr](ftp://ftp.nz.freebsd.org/pub/squeeze64-bpo-3.2/g2ldr \"External link\")  \n\u003e Grub 1.96 [http://kebo.pens.ac.id/debian-hp/g2ldr](http://kebo.pens.ac.id/debian-hp/g2ldr \"External link\")\n\n\u003cbr /\u003e\n\nbut there are very old\n\ncreate your own with grub2 v2.2 with command line   \n\ncopy 2 binaries to one binary *g2hdr.bin + core.img*   \n\n*in* Linux \"*cat g2hdr.bin core.img \\\u003e g2ldr\"*\n\n*in windows \"* copy /b *g2hdr.bin* +*core.img* *g2ldr* \"\n\nif you want to no how to create *core.img show this page*\n\n[http://manpages.ubun...-mkimage.1.html](http://manpages.ubuntu.com/manpages/trusty/man1/grub-mkimage.1.html \"External link\")\n\n"
    },
    {
      "id": "197487",
      "timestamp": "2016-01-27T19:07:29+00:00",
      "author": "Monsieur Z",
      "content": "Yes but where is g2hdr.bin ?\n\n"
    },
    {
      "id": "197488",
      "timestamp": "2016-01-27T19:19:01+00:00",
      "author": "memoarfaa",
      "content": "here is the link\n\n[http://download.gna....-bin-w32-10.zip](http://download.gna.org/grubutil/old/grubutil-1.1-bin-w32-10.zip \"External link\")\n\n"
    },
    {
      "id": "197489",
      "timestamp": "2016-01-27T19:24:27+00:00",
      "author": "Monsieur Z",
      "content": "Yes but now I need the core.img file I have built Grub 2.02\\~beta2 on Cygwin how can I generate core.img?\n\n"
    },
    {
      "id": "197490",
      "timestamp": "2016-01-27T19:40:55+00:00",
      "author": "wimb",
      "content": "UEFI_MULTI.exe has option to make USB-stick booting with Grub2\n\n[http://reboot.pro/to...ve/#entry168079](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/#entry168079 \"\")\n\n"
    },
    {
      "id": "197491",
      "timestamp": "2016-01-27T19:42:38+00:00",
      "author": "Monsieur Z",
      "content": "I need a way to be able to do it programmatically, but I\u0027ve managed to use grubinst for that. The thing I need now is a way to get the latest g2ldr file.\n\n"
    },
    {
      "id": "197495",
      "timestamp": "2016-01-27T20:18:17+00:00",
      "author": "memoarfaa",
      "content": "the best way is\n\n1- download grub-2.02\\~beta2-for-windows link\n\n[http://alpha.gnu.org...for-windows.zip](http://alpha.gnu.org/gnu/grub/grub-2.02~beta2-for-windows.zip \"External link\")\n\nextract it open cmd then\n\npath to grub-2.02\\~beta2 folder (cd /d path )\n\nthen type this command\n\ngrub-mkimage.exe -d I386-PC -p /Grub2/BIOS -o Core.img -O i386-pc biosdisk part_msdos fat exfat ext2 ntfs normal iso9660 search_fs_file\n\n"
    },
    {
      "id": "197496",
      "timestamp": "2016-01-27T20:21:26+00:00",
      "author": "Monsieur Z",
      "content": "I get this:  \n\n```\nTom@TOM-PC ~/grub-2.02~beta2\n$ grub-mkimage.exe -d I386-PC -o Core.img -O i386-pc biosdisk part_msdos fat exfat ext2 ntfs normal iso9660 search_fs_file\ngrub-mkimage: error: cannot open `I386-PC/moddep.lst\u0027: No such file or directory.\n\nTom@TOM-PC ~/grub-2.02~beta2\n$ grub-mkimage.exe -o Core.img -O i386-pc biosdisk part_msdos fat exfat ext2 ntfs normal iso9660 search_fs_file\ngrub-mkimage: error: cannot stat `/usr/local/lib/grub/i386-pc/part_msdos.mod\u0027: No such file or directory.\n\nTom@TOM-PC ~/grub-2.02~beta2\n$ grub-mkimage.exe -o Core.img -O i386-pc biosdisk fat exfat ext2 ntfs normal iso9660 search_fs_file\ngrub-mkimage: error: cannot stat `/usr/local/lib/grub/i386-pc/exfat.mod\u0027: No such file or directory.\n\nTom@TOM-PC ~/grub-2.02~beta2\n$ grub-mkimage.exe -o Core.img -O i386-pc biosdisk fat ext2 ntfs normal iso9660 search_fs_file\ngrub-mkimage: error: cannot stat `/usr/local/lib/grub/i386-pc/search_fs_file.mod\u0027: No such file or directory.\n\nTom@TOM-PC ~/grub-2.02~beta2\n$ grub-mkimage.exe -o Core.img -O i386-pc biosdisk fat ext2 ntfs normal iso9660\ngrub-mkimage: error: invalid ELF header.\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "197501",
      "timestamp": "2016-01-28T01:05:53+00:00",
      "author": "memoarfaa",
      "content": "It seems you don\u0027t understand me so this is link to all file only but them in USB flash drive  \n\n[http://www.mediafire...3nekxp/grub2.7z](http://www.mediafire.com/download/un3yx0bjf3nekxp/grub2.7z \"External link\")  \n\nthis is how to Install Grub2 on a USB key  \nDon\u0027t use Cygwin only use windows Command Prompt (CMD.exe) follow the steps  \n\n1-download grub-2.02\\~beta2-for-windows from this link   \n\n[http://alpha.gnu.org...for-windows.zip](http://alpha.gnu.org/gnu/grub/grub-2.02~beta2-for-windows.zip \"External link\")  \n\n2- extract it \"grub-2.02\\~beta2-for-windows\" folder to any location in your hard disk  \n\nmake simple grub.cfg with below code to set prefix (encoding UTF-8 without BOM) and put it in to \"grub-2.02\\~beta2-for-windows\" folder\n\n```\nsearch.file /boot/grub/grub.cfg root\nset prefix\u003d/boot/grub\nset pager\u003d1\ninsmod all_video\ninsmod vbe\ninsmod vga\ninsmod video_bochs\ninsmod video_cirrus\ninsmod font\ninsmod gfxterm\ninsmod gfxmenu\ninsmod gettext\ninsmod jpeg\ninsmod png\n###loadfont /boot/grub/Fonts/unicode.pf2\n###theme\u003d${prefix}/themes/starfield/theme.txt\nset gfxmode\u003dauto\nterminal_output gfxterm\nset timeout\u003d300\nset color_normal\u003dgreen/black\nset color_highlight\u003dwhite/cyan\n\nmenuentry \"restart\" {\nreboot\n}\n\nmenuentry \"shutdown\" {\nhalt\n}\n\n3- but the below code with \".bat\" extensions in \"grub-2.02~beta2-for-windows\" folder eg .. makeg2ldr.bat and run\nit\n```\n\n```\n@echo off\ncd /d %~dp0\ngrub-mkimage.exe -d I386-PC -p /boot/grub -c grub.cfg -o Core.img -O i386-pc biosdisk part_msdos fat exfat ext2 ntfs normal iso9660 search_fs_file configfile\n\nCopy /B i386-pc\\lnxboot.img+Core.img G2ldr\n\nEXIT\n```\n\nnow you have G2ldr and grub.cfg in \"grub-2.02\\~beta2-for-windows\" folder  \n\n4- copy G2ldr to the root of USB flash drive\n\n5- copy grub.cfg to /boot/grub/ folder in USB flash drive\n\n6- run grubinst.exe with --grub2 command-line parameter\n\n**Edited by memoarfaa, 28 January 2016 - 01:59 AM.**\n"
    }
  ]
}