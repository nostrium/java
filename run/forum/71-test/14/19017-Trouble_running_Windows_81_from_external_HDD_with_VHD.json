{
  "id": "19017",
  "title": "Trouble running Windows 8.1 from external HDD (with VHD)",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "178222",
      "timestamp": "2013-10-12T11:40:46+00:00",
      "author": "korun",
      "content": "Hello guys, I try to install windows 8.1 on my external HDD using Windows 7 and HP Compaq 610 laptop. I have WD My Passport 500GB with two partitions (75GB + \\~400GB).\n\nI try to install Windows 8 to a VHD(saved in the 75GB partition) and then boot from external device but I get the following error after the first reboot after Windows 8.1 setup finished\n\n[ERROR IMAGE](https://photos-5.dropbox.com/t/0/AADS24L8hVPh5dMp7Llv6uj4H5lWKqSoyENM7XmGC1EexA/12/13758661/jpeg/1024x768/3/1381546800/0/2/20131011_030050.jpg/smnRWVPEu5jr-Vl10k41DjRS5AC8F0ZA8jV_3Za-4-g \"External link\")\n\nIf I place the VHD on a internal hdd partition boot succedes, but I need to use externall hdd for for the extra space I got there. Can you give me some suggestions on what should I do.\n\nI have updated the HDD firmware to the latest.\n\nHere is info of my \\`bcdedit\\` output:\n\n```\nWindows Boot Manager\n--------------------\nidentifier {9dea862c-5cdd-4e70-acc1-f32b344d4795}\ndevice partition\u003d\\Device\\HarddiskVolume1\ndescription Windows Boot Manager\nlocale en-us\ninherit {7ea2e1ac-2e61-4728-aaa3-896d9d0a9f0e}\ndefault {01a862ab-3215-11e3-82df-ace6e18ce6fc}\nresumeobject {01a862aa-3215-11e3-82df-ace6e18ce6fc}\ndisplayorder {01a862ab-3215-11e3-82df-ace6e18ce6fc}\n{faaf0d6f-eb89-11df-8dad-e0e695943637}\ntoolsdisplayorder {b2721d73-1db4-4c62-bf78-c548a880142d}\ntimeout 30\n\nWindows Boot Loader\n-------------------\nidentifier {01a862ab-3215-11e3-82df-ace6e18ce6fc}\ndevice vhd\u003d[G:]\\windowseight.vhd,locate\u003dcustom:12000002\npath \\windows\\system32\\winload.exe\ndescription Windows 8.1\nlocale en-us\ninherit {6efb52bf-1766-41db-a6b3-0ee5eff72bd7}\nallowedinmemorysettings 0x15000075\nosdevice vhd\u003d[G:]\\windowseight.vhd,locate\u003dcustom:22000002\nsystemroot \\windows\nresumeobject {01a862aa-3215-11e3-82df-ace6e18ce6fc}\nnx OptIn\nbootmenupolicy Standard\ndetecthal Yes\n\nWindows Boot Loader\n-------------------\nidentifier {faaf0d6f-eb89-11df-8dad-e0e695943637}\ndevice partition\u003dC:\npath \\Windows\\system32\\winload.exe\ndescription Windows 7\nlocale en-GB\ninherit {6efb52bf-1766-41db-a6b3-0ee5eff72bd7}\nrecoverysequence {0b48fa7d-0913-11e3-af9e-1cc1de8d6927}\nrecoveryenabled Yes\nallowedinmemorysettings 0x15000075\nosdevice partition\u003dC:\nsystemroot \\Windows\nresumeobject {faaf0d6e-eb89-11df-8dad-e0e695943637}\nnx OptIn\nbootmenupolicy Standard\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "178224",
      "timestamp": "2013-10-12T11:56:30+00:00",
      "author": "steve6375",
      "content": "See Step 3 in [http://www.rmprepusb...ls/win8vhdonusb](http://www.rmprepusb.com/tutorials/win8vhdonusb \"External link\")\n\nBoot from a Win8 install ISO and use BCDBoot and BootSect.\n\n"
    },
    {
      "id": "178226",
      "timestamp": "2013-10-12T12:01:47+00:00",
      "author": "korun",
      "content": "Thanks for the link, I will try this in a couple of hours and post the result here.\n\n"
    },
    {
      "id": "178227",
      "timestamp": "2013-10-12T13:48:34+00:00",
      "author": "korun",
      "content": "I did all the steps again and I am still getting the same error, might that be that the HDD is not ready before the bootloader executes and it cannot load the VHD? And if this is the case is there a workaround?\n\nWhen I installed on another 16GB USB with a simular method, it didn\u0027t give this error but it was way to slow for normal usage.\n\nThis is the case of a normal boot, if I go boot from USB device it says:\n\n```\nError loading operating system_\n```\n\n\u003cbr /\u003e\n\n**Edited by korun, 12 October 2013 - 01:52 PM.**\n"
    },
    {
      "id": "178229",
      "timestamp": "2013-10-12T14:41:07+00:00",
      "author": "Wonko the Sane",
      "content": "Wait a minute.\n\nWhich error is it?\n\nI cannot see the image you posted a link to (get a 404).\n\nIf it is an issue with the initial booting part it is possible that it is \"device specific\", the WD passport drives \\*may\\* have inside one of those \"green\" drives that are known troublemakers at boot time (on USB bus).\n\nIf it is a 2.5\" drive, you could try using an external power supply (typically a USB Y cable + \\*any\\* USB charger) to power on the drive BEFORE the actual PC.\n\nIf I get it right you are trying to boot from a VHD residing on the USB disk starting the boot from the BOOTMGR and \\\\boot\\\\BCD residing on your internal hard disk. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nWhat happens if you try booting \"plainly\" from USB?\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178230",
      "timestamp": "2013-10-12T14:47:51+00:00",
      "author": "korun",
      "content": "\u003e Wait a minute.\n\u003e\n\u003e Which error is it?\n\u003e\n\u003e I cannot see the image you posted a link to (get a 404).\n\u003e\n\u003e If it is an issue with the initial booting part it is possible that it is \"device specific\", the WD passport drives \\*may\\* have inside one of those \"green\" drives that are known troublemakers at boot time (on USB bus).\n\u003e\n\u003e If it is a 2.5\" drive, you could try using an external power supply (typically a USB Y cable + \\*any\\* USB charger) to power on the drive BEFORE the actual PC.\n\u003e\n\u003e If I get it right you are trying to boot from a VHD residing on the USB disk starting the boot from the BOOTMGR and \\\\boot\\\\BCD residing on your internal hard disk. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\u003e\n\u003e What happens if you try booting \"plainly\" from USB?\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nI think the same, WD might be the problem. I am trying out PLOP boot manager and it seems it will do the job, but can I don\u0027t really know how to start VHD from plop.\n\nHere is the img link:\n\n[https://www.dropbox....1011_030050.jpg](https://www.dropbox.com/s/uv6rsmps8fwd2zq/20131011_030050.jpg \"External link\")\n\n(i have currently issues with dropbox but hopefully this link will be valid)\n\n"
    },
    {
      "id": "178231",
      "timestamp": "2013-10-12T14:55:27+00:00",
      "author": "steve6375",
      "content": "Can you post bcd after running bcdboot as in the tutorial.\n\nIt can\u0027t seem to find winloader.exe so maybe the BCD has the wrong drive (I think it should be \\[boot\\] or \\[default\\] ???)\n\n"
    },
    {
      "id": "178233",
      "timestamp": "2013-10-12T15:14:59+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I think the same, WD might be the problem. I am trying out PLOP boot manager and it seems it will do the job, but can I don\u0027t really know how to start VHD from plop.\n\u003e\n\u003e Here is the img link:\n\u003e\n\u003e [https://www.dropbox....1011_030050.jpg](https://www.dropbox.com/s/uv6rsmps8fwd2zq/20131011_030050.jpg \"External link\")\n\u003e\n\u003e (i have currently issues with dropbox but hopefully this link will be valid)\n\nWell, you don\u0027t actually need PLoP (or other boot manager) apart the BOOTMGR.\n\nJust make sure that there is a copy of both the actual BOOTMGR file and of the \\\\boot\\\\BCD folder on the \"external\" hard disk\u0027s primary and active partition.\n\nOr make the partition active and copy to them the files, if the volume has been formatted under Windows Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) or later it already has the bootsector that involes BOOTMGR.\n\nThe actual \\\\boot\\\\BCD will be \"in use\", you may need to use a bcd utility or use bcdedit to create a new store in the \"external\" hard disk partition.\n\nOptionally (but it may be of use for troubleshooting) add in the same \"external\" disk active primary partition root a file (simple text file, notepad would do) called BOOT.INI with these contents:\n\u003e \\[boot loader\\]  \n\u003e Timeout\u003d30  \n\u003e default\u003dc:\\\\grldr\n\u003e\n\u003e \\[operating systems\\]  \n\u003e c:\\\\grldr\u003d\"grub4dos\"\n\u003e\nand the file grldr from this download:\n\n[https://code.google....-03.7z\\\u0026can\u003d2\\\u0026q\u003d](https://code.google.com/p/grub4dos-chenall/downloads/detail?name\u003dgrub4dos-0.4.5c-2013-03-03.7z\u0026can\u003d2\u0026q\u003d \"External link\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178234",
      "timestamp": "2013-10-12T15:21:58+00:00",
      "author": "korun",
      "content": "\u003e Can you post bcd after running bcdboot as in the tutorial.\n\u003e\n\u003e It can\u0027t seem to find winloader.exe so maybe the BCD has the wrong drive (I think it should be \\[boot\\] or \\[default\\] ???)\n\nI will.\n\nin the meantime I should note that I tried editing the bcd with both bcdedit and EasyBCD 2.2 to add the VHD in the bootloader and both tries resulted in blank screen after selecting the VHD option in the bootloader. I also tried copying the same VHD file to the C: partition and booting from there and I got it going, Windows 8.1 booted and worked no problem.\n\nAlso I should note that during the install and initial mounting the external HDD partition is mounted as I:\\\\ and when I boot in windows the drive letter is G:\\\\\n\n"
    },
    {
      "id": "178236",
      "timestamp": "2013-10-12T15:25:26+00:00",
      "author": "steve6375",
      "content": "Did you boot to WinPE and run BCDBoot? I think then it sets the BCD to \\[boot\\] rather than a drive letter.\n\n"
    },
    {
      "id": "178237",
      "timestamp": "2013-10-12T15:33:32+00:00",
      "author": "korun",
      "content": "Here is my \\`bcdedit\\` output after repeating step 3 (running cmd from live usb) from the tutorial in the #2 post. sorry for the picture quality...\n\nprocedure:\n\n[https://www.dropbox....1012_172702.jpg](https://www.dropbox.com/s/5nwaeb4ynklfsnr/20131012_172702.jpg \"External link\")\n\noutput:\n\n[https://www.dropbox....1012_172909.jpg](https://www.dropbox.com/s/7ir3im8p8famzj4/20131012_172909.jpg \"External link\")\n\n**Edited by korun, 12 October 2013 - 03:33 PM.**\n"
    },
    {
      "id": "178240",
      "timestamp": "2013-10-12T17:35:51+00:00",
      "author": "steve6375",
      "content": "The commands look OK.\n\nDid you prepare the VHD as in the tutorial in post #2?\n\n"
    },
    {
      "id": "178241",
      "timestamp": "2013-10-12T17:36:31+00:00",
      "author": "korun",
      "content": "I finally managed to boot it with PLOP in the USB option. No other options worked in both plop and windows bootmanager.\n\nedit: since we both posted in the same time :smile:) No i didn\u0027t, I had created fixed VHD from Disk Management before booting into W8 Live USB but since its practically the same I did\u0027t redo that action.\n\n**Edited by korun, 12 October 2013 - 05:38 PM.**\n"
    },
    {
      "id": "178242",
      "timestamp": "2013-10-12T17:41:46+00:00",
      "author": "steve6375",
      "content": "Sounds like the BIOS is \u0027strange\u0027 on your target system then?\n\nCan you boot it from bootmgr on a different system?\n\nIt would be interesting to install grub4dos on the USB drive and add a menu entry to boot to bootmgr\n\n```\ntitle Win8 Boot\nroot\nfind\nls (hd0,0)/\npause\nchainloader /bootmgr\n```\n\nand report back what you see. It may be that the BIOS is not booting from the USB drive as hd0. If that is the case then you can swap over the drives in grub4dos. Then you wouldn\u0027t need to use Plop.\n\n"
    },
    {
      "id": "178244",
      "timestamp": "2013-10-12T17:50:27+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e It would be interesting to install grub4dos on the USB drive and add a menu entry to boot to bootmgr\n\nWell, if I may the idea - already posted - would be to NOT install it NOR add a BOOTMGR entry for it (but simply add the grldr and the BOOT.INI file).\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178245",
      "timestamp": "2013-10-12T18:02:46+00:00",
      "author": "korun",
      "content": "I did try to load the VHD on my desktop PC and got similar error. Adding the VHD entry was done by EasyBCD. I don\u0027t remember the exact message of the error but it was kind of that the entry for VHS is invalid and only Windows 7 option was shown.\n\nAs for the grub4dos, I didn\u0027t really get the idea of what is done and how is installed so I am not sure if I can install it safely.\n\nedit: Also, I just installed windows 8 without the VHD, simply following [http://www.rmprepusb...orials/win8togo](http://www.rmprepusb.com/tutorials/win8togo \"External link\") and I still must do the same startup procedure(plop-\\\u003eusb) to get the Windows 8 running.\n\nedit2: My device is listed as NON-bootable in wd website:\n\n[http://wdc.custhelp....m-to-install-an](http://wdc.custhelp.com/app/answers/detail/a_id/1787/~/list-of-mac-bootable-wd-external-drives-and-how-to-format-them-to-install-an \"External link\")\n\nIt says for mac but I\u0027m pretty sure its messed up for windows too\n\n**Edited by korun, 12 October 2013 - 06:20 PM.**\n"
    },
    {
      "id": "178247",
      "timestamp": "2013-10-12T18:10:53+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e As for the grub4dos, I didn\u0027t really get the idea of what is done and how is installed so I am not sure if I can install it safely.\n\nThere is nothing to \"install\".\n\nYou just follow the posted instructions (post #8).\n\nThe suggested method is actually intended to AVOID installing anything and to AVOID modifying the \\\\boot\\\\BCD\\\\.\n\nThe windows BOOTMGR will \"pick\" any entry (exception made for the the arcpath ones) present in a file \"BOOT.INI\" in the same root as BOOTMGR is.  \nAnd the posted BOOT.INI wil allow to boot the grldr in the same place.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178248",
      "timestamp": "2013-10-12T18:12:21+00:00",
      "author": "steve6375",
      "content": "You can run RMPrepUSB and click on the Install Grub4dos button and then answer Yes for MBR.\n\nThat will install grub4dos\n\nThen press F4 and create a menu.lst file - contents as I posted before.\n\nThen try to boot it on your target system and report back what you observe.\n\nYou can \u0027undo\u0027 the changes by running RMPrepUSB again and selecting \u0027Bootloaders - Install Std MBR (Ctrl_M) - then delete the grldr and menu.lst file.\n\nOr you can try Wonko\u0027s method of adding a boot.ini\n\n"
    },
    {
      "id": "178249",
      "timestamp": "2013-10-12T18:19:57+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e You can \u0027undo\u0027 the changes by running RMPrepUSB again and selecting \u0027Bootloaders - Install Std MBR (Ctrl_M) - then delete the grldr and menu.lst file.\n\u003e\nOT ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif), but not much, does the \"Install Std MBR\" also re-zero the excess sectors beside the first one previously occupied by grub4dos grldr.mbr code? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png) ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\n(if not, it could be a good idea to add a provision for this in RMPREPUSB, i.e. the disk after an install an uninstall should be identical to how it was before)\n\nAs a side note, for this kind of \"temporary installs\" it could be a good idea to use the grub4dos feature of saving the original MBR on the second sector and then add a provision to RMPREPUSB to restore that MBR (as opposed to the \"standard\" one).\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178251",
      "timestamp": "2013-10-12T18:28:24+00:00",
      "author": "ztron",
      "content": "\u003e Here is my \\`bcdedit\\` output after repeating step 3 (running cmd from live usb) from the tutorial in the #2 post. sorry for the picture quality...\n\u003e\n\u003e procedure:\n\u003e\n\u003e [https://www.dropbox....1012_172702.jpg](https://www.dropbox.com/s/5nwaeb4ynklfsnr/20131012_172702.jpg \"External link\")\n\u003e\n\u003e output:\n\u003e\n\u003e [https://www.dropbox....1012_172909.jpg](https://www.dropbox.com/s/7ir3im8p8famzj4/20131012_172909.jpg \"External link\")\n\nhi korun,\n\non your procedure, where it says \"Bootcode was successfully updated\", they are a liar, it is false\n\nabove that where it says \"Access is denied\", that is the truth\n\nyou must use the FORCE switch:\n\nbootsect /nt60 i: /force\n\nbest regards,\n\nztron\n\n"
    },
    {
      "id": "178252",
      "timestamp": "2013-10-12T18:34:20+00:00",
      "author": "steve6375",
      "content": "\u003e OT ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif), but not much, does the \"Install Std MBR\" also re-zero the excess sectors beside the first one previously occupied by grub4dos grldr.mbr code? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png) ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\u003e\n\u003e (if not, it could be a good idea to add a provision for this in RMPREPUSB, i.e. the disk after an install an uninstall should be identical to how it was before)\n\u003e\n\u003e As a side note, for this kind of \"temporary installs\" it could be a good idea to use the grub4dos feature of saving the original MBR on the second sector and then add a provision to RMPREPUSB to restore that MBR (as opposed to the \"standard\" one).\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nNo, the other sectors are left alone - as I don\u0027t know what they were before...\n\nThe user can use DIskDoctor to read LBA1 and write to LBA0, or use the Disk-\\\u003eFile for LBA1 and then File-\\\u003eDisk for LBA0.\n\n"
    },
    {
      "id": "178254",
      "timestamp": "2013-10-12T18:47:14+00:00",
      "author": "korun",
      "content": "\u003e You can run RMPrepUSB and click on the Install Grub4dos button and then answer Yes for MBR.\n\u003e\n\u003e That will install grub4dos\n\u003e\n\u003e Then press F4 and create a menu.lst file - contents as I posted before.\n\u003e\n\u003e Then try to boot it on your target system and report back what you observe.\n\u003e\n\u003e You can \u0027undo\u0027 the changes by running RMPrepUSB again and selecting \u0027Bootloaders - Install Std MBR (Ctrl_M) - then delete the grldr and menu.lst file.\n\u003e\n\u003e Or you can try Wonko\u0027s method of adding a boot.ini\n\nI installed grub4dos on my external HDD (i forced listing large partitions \\~500gb). This is what I get when I boot from usb for around 2-3 seconds before I am redirected to the default windows bootloader:\n\n[https://www.dropbox....1012_204250.jpg](https://www.dropbox.com/s/d636ohhvb7ohco6/20131012_204250.jpg \"External link\")\n\nWonko\u0027s method displayed Missing operating system when booting to the usb hdd containing BOOT.INI and grldr.mbr\n\n**Edited by korun, 12 October 2013 - 07:04 PM.**\n"
    },
    {
      "id": "178257",
      "timestamp": "2013-10-12T19:15:18+00:00",
      "author": "steve6375",
      "content": "Did you have the menu.lst file present?\n\nHDD should have\n\nvhd\n\ngrldr\n\nbootmgr\n\nmenu.lst\n\n"
    },
    {
      "id": "178290",
      "timestamp": "2013-10-13T09:16:03+00:00",
      "author": "Wonko the Sane",
      "content": "The Booting mechanism is (for the \"standard\" booting):\n\n1. MBR (there needs to be the \"standard\" MBR code, i.e. any code that chainloads active primary partition)\n2. Partition (primary) must be active and contain\n3. Bootsector - invoked by the MBR code (there needs to be the \"standard\" bootsector code)\n4. BOOTMGR - invoked by the bootsector code\n5. \\\\boot\\\\BCD \\\u003c- read by the BOOTMGR\n6. BOOT.INI - read by BOOTMGR\n7. grldr \\\u003c- invoked by the entry in BOOT.INI\n\nIf grub4dos is installed the booting mechanism is the following:\n\n1. grldr.mbr \\\u003c- installed to the MBR+hidden sectors\n2. grldr \\\u003c- invoked by the grldr.mbr\n3. menu.lst \\\u003c- read by grldr\n4. BOOTMGR \\\u003c- chainloaded by the contents of menu.lst\n5. \\\\boot\\\\BCD \\\u003c- read by the BOOTMGR\n\nThe \"missing operating system\" may be due to BOOTMGR or \\\\boot\\\\BCD missing ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nThe grub4dos screenshot may be due to issues in finding the menu.lst, I seem to remember that some BIOSes may have issues, by themselves or in combination with grub4dos if the USB device is bigger than 128 Gb, it is possible that this is the case.\n\nPLoP provides an \"independent\" USB stack and thus bypasses this limitiation (if it is there).\n\n@Steve6375\n\nMaybe it is the case of testing the newish grub4dos 0.4.6a with USB stack? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178305",
      "timestamp": "2013-10-13T12:45:34+00:00",
      "author": "ztron",
      "content": "\u003e The Booting mechanism is (for the \"standard\" booting):\n\u003e\n\u003e 1. MBR (there needs to be the \"standard\" MBR code, i.e. any code that chainloads active primary partition)\n\u003e 2. Partition (primary) must be active and contain\n\u003e 3. Bootsector - invoked by the MBR code (there needs to be the \"standard\" bootsector code)\n\u003e 4. BOOTMGR - invoked by the bootsector code\n\u003e 5. \\\\boot\\\\BCD \\\u003c- read by the BOOTMGR\n\u003e 6. BOOT.INI - read by BOOTMGR\n\u003e 7. grldr \\\u003c- invoked by the entry in BOOT.INI\n\u003e\n\u003e If grub4dos is installed the booting mechanism is the following:\n\u003e\n\u003e 1. grldr.mbr \\\u003c- installed to the MBR+hidden sectors\n\u003e 2. grldr \\\u003c- invoked by the grldr.mbr\n\u003e 3. menu.lst \\\u003c- read by grldr\n\u003e 4. BOOTMGR \\\u003c- chainloaded by the contents of menu.lst\n\u003e 5. \\\\boot\\\\BCD \\\u003c- read by the BOOTMGR\n\u003e\n\u003e The \"missing operating system\" may be due to BOOTMGR or \\\\boot\\\\BCD missing ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\u003e\n\u003e The grub4dos screenshot may be due to issues in finding the menu.lst, I seem to remember that some BIOSes may have issues, by themselves or in combination with grub4dos if the USB device is bigger than 128 Gb, it is possible that this is the case.\n\u003e\n\u003e PLoP provides an \"independent\" USB stack and thus bypasses this limitiation (if it is there).\n\u003e\n\u003e @Steve6375\n\u003e\n\u003e Maybe it is the case of testing the newish grub4dos 0.4.6a with USB stack? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nhi folks, you know I am a noob  \nbut step 3 \\\u0026 4 of standard booting must be perfect for plain NT6 booting  \nif access is denied during bootsect.exe, like Korun has shown in his JPG,  \nthat is therefore imperfect  \nwhich is why I said in my above post:  \nuse the force luke  \nztron\n\n"
    },
    {
      "id": "178222",
      "timestamp": "2013-10-12T11:40:46+00:00",
      "author": "korun",
      "content": "Hello guys, I try to install windows 8.1 on my external HDD using Windows 7 and HP Compaq 610 laptop. I have WD My Passport 500GB with two partitions (75GB + \\~400GB).\n\nI try to install Windows 8 to a VHD(saved in the 75GB partition) and then boot from external device but I get the following error after the first reboot after Windows 8.1 setup finished\n\n[ERROR IMAGE](https://photos-5.dropbox.com/t/0/AADS24L8hVPh5dMp7Llv6uj4H5lWKqSoyENM7XmGC1EexA/12/13758661/jpeg/1024x768/3/1381546800/0/2/20131011_030050.jpg/smnRWVPEu5jr-Vl10k41DjRS5AC8F0ZA8jV_3Za-4-g \"External link\")\n\nIf I place the VHD on a internal hdd partition boot succedes, but I need to use externall hdd for for the extra space I got there. Can you give me some suggestions on what should I do.\n\nI have updated the HDD firmware to the latest.\n\nHere is info of my \\`bcdedit\\` output:\n\n```\nWindows Boot Manager\n--------------------\nidentifier {9dea862c-5cdd-4e70-acc1-f32b344d4795}\ndevice partition\u003d\\Device\\HarddiskVolume1\ndescription Windows Boot Manager\nlocale en-us\ninherit {7ea2e1ac-2e61-4728-aaa3-896d9d0a9f0e}\ndefault {01a862ab-3215-11e3-82df-ace6e18ce6fc}\nresumeobject {01a862aa-3215-11e3-82df-ace6e18ce6fc}\ndisplayorder {01a862ab-3215-11e3-82df-ace6e18ce6fc}\n{faaf0d6f-eb89-11df-8dad-e0e695943637}\ntoolsdisplayorder {b2721d73-1db4-4c62-bf78-c548a880142d}\ntimeout 30\n\nWindows Boot Loader\n-------------------\nidentifier {01a862ab-3215-11e3-82df-ace6e18ce6fc}\ndevice vhd\u003d[G:]\\windowseight.vhd,locate\u003dcustom:12000002\npath \\windows\\system32\\winload.exe\ndescription Windows 8.1\nlocale en-us\ninherit {6efb52bf-1766-41db-a6b3-0ee5eff72bd7}\nallowedinmemorysettings 0x15000075\nosdevice vhd\u003d[G:]\\windowseight.vhd,locate\u003dcustom:22000002\nsystemroot \\windows\nresumeobject {01a862aa-3215-11e3-82df-ace6e18ce6fc}\nnx OptIn\nbootmenupolicy Standard\ndetecthal Yes\n\nWindows Boot Loader\n-------------------\nidentifier {faaf0d6f-eb89-11df-8dad-e0e695943637}\ndevice partition\u003dC:\npath \\Windows\\system32\\winload.exe\ndescription Windows 7\nlocale en-GB\ninherit {6efb52bf-1766-41db-a6b3-0ee5eff72bd7}\nrecoverysequence {0b48fa7d-0913-11e3-af9e-1cc1de8d6927}\nrecoveryenabled Yes\nallowedinmemorysettings 0x15000075\nosdevice partition\u003dC:\nsystemroot \\Windows\nresumeobject {faaf0d6e-eb89-11df-8dad-e0e695943637}\nnx OptIn\nbootmenupolicy Standard\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "178224",
      "timestamp": "2013-10-12T11:56:30+00:00",
      "author": "steve6375",
      "content": "See Step 3 in [http://www.rmprepusb...ls/win8vhdonusb](http://www.rmprepusb.com/tutorials/win8vhdonusb \"External link\")\n\nBoot from a Win8 install ISO and use BCDBoot and BootSect.\n\n"
    },
    {
      "id": "178226",
      "timestamp": "2013-10-12T12:01:47+00:00",
      "author": "korun",
      "content": "Thanks for the link, I will try this in a couple of hours and post the result here.\n\n"
    },
    {
      "id": "178227",
      "timestamp": "2013-10-12T13:48:34+00:00",
      "author": "korun",
      "content": "I did all the steps again and I am still getting the same error, might that be that the HDD is not ready before the bootloader executes and it cannot load the VHD? And if this is the case is there a workaround?\n\nWhen I installed on another 16GB USB with a simular method, it didn\u0027t give this error but it was way to slow for normal usage.\n\nThis is the case of a normal boot, if I go boot from USB device it says:\n\n```\nError loading operating system_\n```\n\n\u003cbr /\u003e\n\n**Edited by korun, 12 October 2013 - 01:52 PM.**\n"
    },
    {
      "id": "178229",
      "timestamp": "2013-10-12T14:41:07+00:00",
      "author": "Wonko the Sane",
      "content": "Wait a minute.\n\nWhich error is it?\n\nI cannot see the image you posted a link to (get a 404).\n\nIf it is an issue with the initial booting part it is possible that it is \"device specific\", the WD passport drives \\*may\\* have inside one of those \"green\" drives that are known troublemakers at boot time (on USB bus).\n\nIf it is a 2.5\" drive, you could try using an external power supply (typically a USB Y cable + \\*any\\* USB charger) to power on the drive BEFORE the actual PC.\n\nIf I get it right you are trying to boot from a VHD residing on the USB disk starting the boot from the BOOTMGR and \\\\boot\\\\BCD residing on your internal hard disk. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nWhat happens if you try booting \"plainly\" from USB?\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178230",
      "timestamp": "2013-10-12T14:47:51+00:00",
      "author": "korun",
      "content": "\u003e Wait a minute.\n\u003e\n\u003e Which error is it?\n\u003e\n\u003e I cannot see the image you posted a link to (get a 404).\n\u003e\n\u003e If it is an issue with the initial booting part it is possible that it is \"device specific\", the WD passport drives \\*may\\* have inside one of those \"green\" drives that are known troublemakers at boot time (on USB bus).\n\u003e\n\u003e If it is a 2.5\" drive, you could try using an external power supply (typically a USB Y cable + \\*any\\* USB charger) to power on the drive BEFORE the actual PC.\n\u003e\n\u003e If I get it right you are trying to boot from a VHD residing on the USB disk starting the boot from the BOOTMGR and \\\\boot\\\\BCD residing on your internal hard disk. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\u003e\n\u003e What happens if you try booting \"plainly\" from USB?\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nI think the same, WD might be the problem. I am trying out PLOP boot manager and it seems it will do the job, but can I don\u0027t really know how to start VHD from plop.\n\nHere is the img link:\n\n[https://www.dropbox....1011_030050.jpg](https://www.dropbox.com/s/uv6rsmps8fwd2zq/20131011_030050.jpg \"External link\")\n\n(i have currently issues with dropbox but hopefully this link will be valid)\n\n"
    },
    {
      "id": "178231",
      "timestamp": "2013-10-12T14:55:27+00:00",
      "author": "steve6375",
      "content": "Can you post bcd after running bcdboot as in the tutorial.\n\nIt can\u0027t seem to find winloader.exe so maybe the BCD has the wrong drive (I think it should be \\[boot\\] or \\[default\\] ???)\n\n"
    },
    {
      "id": "178233",
      "timestamp": "2013-10-12T15:14:59+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I think the same, WD might be the problem. I am trying out PLOP boot manager and it seems it will do the job, but can I don\u0027t really know how to start VHD from plop.\n\u003e\n\u003e Here is the img link:\n\u003e\n\u003e [https://www.dropbox....1011_030050.jpg](https://www.dropbox.com/s/uv6rsmps8fwd2zq/20131011_030050.jpg \"External link\")\n\u003e\n\u003e (i have currently issues with dropbox but hopefully this link will be valid)\n\nWell, you don\u0027t actually need PLoP (or other boot manager) apart the BOOTMGR.\n\nJust make sure that there is a copy of both the actual BOOTMGR file and of the \\\\boot\\\\BCD folder on the \"external\" hard disk\u0027s primary and active partition.\n\nOr make the partition active and copy to them the files, if the volume has been formatted under Windows Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) or later it already has the bootsector that involes BOOTMGR.\n\nThe actual \\\\boot\\\\BCD will be \"in use\", you may need to use a bcd utility or use bcdedit to create a new store in the \"external\" hard disk partition.\n\nOptionally (but it may be of use for troubleshooting) add in the same \"external\" disk active primary partition root a file (simple text file, notepad would do) called BOOT.INI with these contents:\n\u003e \\[boot loader\\]  \n\u003e Timeout\u003d30  \n\u003e default\u003dc:\\\\grldr\n\u003e\n\u003e \\[operating systems\\]  \n\u003e c:\\\\grldr\u003d\"grub4dos\"\n\u003e\nand the file grldr from this download:\n\n[https://code.google....-03.7z\\\u0026can\u003d2\\\u0026q\u003d](https://code.google.com/p/grub4dos-chenall/downloads/detail?name\u003dgrub4dos-0.4.5c-2013-03-03.7z\u0026can\u003d2\u0026q\u003d \"External link\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178234",
      "timestamp": "2013-10-12T15:21:58+00:00",
      "author": "korun",
      "content": "\u003e Can you post bcd after running bcdboot as in the tutorial.\n\u003e\n\u003e It can\u0027t seem to find winloader.exe so maybe the BCD has the wrong drive (I think it should be \\[boot\\] or \\[default\\] ???)\n\nI will.\n\nin the meantime I should note that I tried editing the bcd with both bcdedit and EasyBCD 2.2 to add the VHD in the bootloader and both tries resulted in blank screen after selecting the VHD option in the bootloader. I also tried copying the same VHD file to the C: partition and booting from there and I got it going, Windows 8.1 booted and worked no problem.\n\nAlso I should note that during the install and initial mounting the external HDD partition is mounted as I:\\\\ and when I boot in windows the drive letter is G:\\\\\n\n"
    },
    {
      "id": "178236",
      "timestamp": "2013-10-12T15:25:26+00:00",
      "author": "steve6375",
      "content": "Did you boot to WinPE and run BCDBoot? I think then it sets the BCD to \\[boot\\] rather than a drive letter.\n\n"
    },
    {
      "id": "178237",
      "timestamp": "2013-10-12T15:33:32+00:00",
      "author": "korun",
      "content": "Here is my \\`bcdedit\\` output after repeating step 3 (running cmd from live usb) from the tutorial in the #2 post. sorry for the picture quality...\n\nprocedure:\n\n[https://www.dropbox....1012_172702.jpg](https://www.dropbox.com/s/5nwaeb4ynklfsnr/20131012_172702.jpg \"External link\")\n\noutput:\n\n[https://www.dropbox....1012_172909.jpg](https://www.dropbox.com/s/7ir3im8p8famzj4/20131012_172909.jpg \"External link\")\n\n**Edited by korun, 12 October 2013 - 03:33 PM.**\n"
    },
    {
      "id": "178240",
      "timestamp": "2013-10-12T17:35:51+00:00",
      "author": "steve6375",
      "content": "The commands look OK.\n\nDid you prepare the VHD as in the tutorial in post #2?\n\n"
    },
    {
      "id": "178241",
      "timestamp": "2013-10-12T17:36:31+00:00",
      "author": "korun",
      "content": "I finally managed to boot it with PLOP in the USB option. No other options worked in both plop and windows bootmanager.\n\nedit: since we both posted in the same time :smile:) No i didn\u0027t, I had created fixed VHD from Disk Management before booting into W8 Live USB but since its practically the same I did\u0027t redo that action.\n\n**Edited by korun, 12 October 2013 - 05:38 PM.**\n"
    },
    {
      "id": "178242",
      "timestamp": "2013-10-12T17:41:46+00:00",
      "author": "steve6375",
      "content": "Sounds like the BIOS is \u0027strange\u0027 on your target system then?\n\nCan you boot it from bootmgr on a different system?\n\nIt would be interesting to install grub4dos on the USB drive and add a menu entry to boot to bootmgr\n\n```\ntitle Win8 Boot\nroot\nfind\nls (hd0,0)/\npause\nchainloader /bootmgr\n```\n\nand report back what you see. It may be that the BIOS is not booting from the USB drive as hd0. If that is the case then you can swap over the drives in grub4dos. Then you wouldn\u0027t need to use Plop.\n\n"
    },
    {
      "id": "178244",
      "timestamp": "2013-10-12T17:50:27+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e It would be interesting to install grub4dos on the USB drive and add a menu entry to boot to bootmgr\n\nWell, if I may the idea - already posted - would be to NOT install it NOR add a BOOTMGR entry for it (but simply add the grldr and the BOOT.INI file).\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178245",
      "timestamp": "2013-10-12T18:02:46+00:00",
      "author": "korun",
      "content": "I did try to load the VHD on my desktop PC and got similar error. Adding the VHD entry was done by EasyBCD. I don\u0027t remember the exact message of the error but it was kind of that the entry for VHS is invalid and only Windows 7 option was shown.\n\nAs for the grub4dos, I didn\u0027t really get the idea of what is done and how is installed so I am not sure if I can install it safely.\n\nedit: Also, I just installed windows 8 without the VHD, simply following [http://www.rmprepusb...orials/win8togo](http://www.rmprepusb.com/tutorials/win8togo \"External link\") and I still must do the same startup procedure(plop-\\\u003eusb) to get the Windows 8 running.\n\nedit2: My device is listed as NON-bootable in wd website:\n\n[http://wdc.custhelp....m-to-install-an](http://wdc.custhelp.com/app/answers/detail/a_id/1787/~/list-of-mac-bootable-wd-external-drives-and-how-to-format-them-to-install-an \"External link\")\n\nIt says for mac but I\u0027m pretty sure its messed up for windows too\n\n**Edited by korun, 12 October 2013 - 06:20 PM.**\n"
    },
    {
      "id": "178247",
      "timestamp": "2013-10-12T18:10:53+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e As for the grub4dos, I didn\u0027t really get the idea of what is done and how is installed so I am not sure if I can install it safely.\n\nThere is nothing to \"install\".\n\nYou just follow the posted instructions (post #8).\n\nThe suggested method is actually intended to AVOID installing anything and to AVOID modifying the \\\\boot\\\\BCD\\\\.\n\nThe windows BOOTMGR will \"pick\" any entry (exception made for the the arcpath ones) present in a file \"BOOT.INI\" in the same root as BOOTMGR is.  \nAnd the posted BOOT.INI wil allow to boot the grldr in the same place.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178248",
      "timestamp": "2013-10-12T18:12:21+00:00",
      "author": "steve6375",
      "content": "You can run RMPrepUSB and click on the Install Grub4dos button and then answer Yes for MBR.\n\nThat will install grub4dos\n\nThen press F4 and create a menu.lst file - contents as I posted before.\n\nThen try to boot it on your target system and report back what you observe.\n\nYou can \u0027undo\u0027 the changes by running RMPrepUSB again and selecting \u0027Bootloaders - Install Std MBR (Ctrl_M) - then delete the grldr and menu.lst file.\n\nOr you can try Wonko\u0027s method of adding a boot.ini\n\n"
    },
    {
      "id": "178249",
      "timestamp": "2013-10-12T18:19:57+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e You can \u0027undo\u0027 the changes by running RMPrepUSB again and selecting \u0027Bootloaders - Install Std MBR (Ctrl_M) - then delete the grldr and menu.lst file.\n\u003e\nOT ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif), but not much, does the \"Install Std MBR\" also re-zero the excess sectors beside the first one previously occupied by grub4dos grldr.mbr code? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png) ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\n(if not, it could be a good idea to add a provision for this in RMPREPUSB, i.e. the disk after an install an uninstall should be identical to how it was before)\n\nAs a side note, for this kind of \"temporary installs\" it could be a good idea to use the grub4dos feature of saving the original MBR on the second sector and then add a provision to RMPREPUSB to restore that MBR (as opposed to the \"standard\" one).\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178251",
      "timestamp": "2013-10-12T18:28:24+00:00",
      "author": "ztron",
      "content": "\u003e Here is my \\`bcdedit\\` output after repeating step 3 (running cmd from live usb) from the tutorial in the #2 post. sorry for the picture quality...\n\u003e\n\u003e procedure:\n\u003e\n\u003e [https://www.dropbox....1012_172702.jpg](https://www.dropbox.com/s/5nwaeb4ynklfsnr/20131012_172702.jpg \"External link\")\n\u003e\n\u003e output:\n\u003e\n\u003e [https://www.dropbox....1012_172909.jpg](https://www.dropbox.com/s/7ir3im8p8famzj4/20131012_172909.jpg \"External link\")\n\nhi korun,\n\non your procedure, where it says \"Bootcode was successfully updated\", they are a liar, it is false\n\nabove that where it says \"Access is denied\", that is the truth\n\nyou must use the FORCE switch:\n\nbootsect /nt60 i: /force\n\nbest regards,\n\nztron\n\n"
    },
    {
      "id": "178252",
      "timestamp": "2013-10-12T18:34:20+00:00",
      "author": "steve6375",
      "content": "\u003e OT ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif), but not much, does the \"Install Std MBR\" also re-zero the excess sectors beside the first one previously occupied by grub4dos grldr.mbr code? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png) ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\u003e\n\u003e (if not, it could be a good idea to add a provision for this in RMPREPUSB, i.e. the disk after an install an uninstall should be identical to how it was before)\n\u003e\n\u003e As a side note, for this kind of \"temporary installs\" it could be a good idea to use the grub4dos feature of saving the original MBR on the second sector and then add a provision to RMPREPUSB to restore that MBR (as opposed to the \"standard\" one).\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nNo, the other sectors are left alone - as I don\u0027t know what they were before...\n\nThe user can use DIskDoctor to read LBA1 and write to LBA0, or use the Disk-\\\u003eFile for LBA1 and then File-\\\u003eDisk for LBA0.\n\n"
    },
    {
      "id": "178254",
      "timestamp": "2013-10-12T18:47:14+00:00",
      "author": "korun",
      "content": "\u003e You can run RMPrepUSB and click on the Install Grub4dos button and then answer Yes for MBR.\n\u003e\n\u003e That will install grub4dos\n\u003e\n\u003e Then press F4 and create a menu.lst file - contents as I posted before.\n\u003e\n\u003e Then try to boot it on your target system and report back what you observe.\n\u003e\n\u003e You can \u0027undo\u0027 the changes by running RMPrepUSB again and selecting \u0027Bootloaders - Install Std MBR (Ctrl_M) - then delete the grldr and menu.lst file.\n\u003e\n\u003e Or you can try Wonko\u0027s method of adding a boot.ini\n\nI installed grub4dos on my external HDD (i forced listing large partitions \\~500gb). This is what I get when I boot from usb for around 2-3 seconds before I am redirected to the default windows bootloader:\n\n[https://www.dropbox....1012_204250.jpg](https://www.dropbox.com/s/d636ohhvb7ohco6/20131012_204250.jpg \"External link\")\n\nWonko\u0027s method displayed Missing operating system when booting to the usb hdd containing BOOT.INI and grldr.mbr\n\n**Edited by korun, 12 October 2013 - 07:04 PM.**\n"
    },
    {
      "id": "178257",
      "timestamp": "2013-10-12T19:15:18+00:00",
      "author": "steve6375",
      "content": "Did you have the menu.lst file present?\n\nHDD should have\n\nvhd\n\ngrldr\n\nbootmgr\n\nmenu.lst\n\n"
    },
    {
      "id": "178290",
      "timestamp": "2013-10-13T09:16:03+00:00",
      "author": "Wonko the Sane",
      "content": "The Booting mechanism is (for the \"standard\" booting):\n\n1. MBR (there needs to be the \"standard\" MBR code, i.e. any code that chainloads active primary partition)\n2. Partition (primary) must be active and contain\n3. Bootsector - invoked by the MBR code (there needs to be the \"standard\" bootsector code)\n4. BOOTMGR - invoked by the bootsector code\n5. \\\\boot\\\\BCD \\\u003c- read by the BOOTMGR\n6. BOOT.INI - read by BOOTMGR\n7. grldr \\\u003c- invoked by the entry in BOOT.INI\n\nIf grub4dos is installed the booting mechanism is the following:\n\n1. grldr.mbr \\\u003c- installed to the MBR+hidden sectors\n2. grldr \\\u003c- invoked by the grldr.mbr\n3. menu.lst \\\u003c- read by grldr\n4. BOOTMGR \\\u003c- chainloaded by the contents of menu.lst\n5. \\\\boot\\\\BCD \\\u003c- read by the BOOTMGR\n\nThe \"missing operating system\" may be due to BOOTMGR or \\\\boot\\\\BCD missing ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nThe grub4dos screenshot may be due to issues in finding the menu.lst, I seem to remember that some BIOSes may have issues, by themselves or in combination with grub4dos if the USB device is bigger than 128 Gb, it is possible that this is the case.\n\nPLoP provides an \"independent\" USB stack and thus bypasses this limitiation (if it is there).\n\n@Steve6375\n\nMaybe it is the case of testing the newish grub4dos 0.4.6a with USB stack? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178305",
      "timestamp": "2013-10-13T12:45:34+00:00",
      "author": "ztron",
      "content": "\u003e The Booting mechanism is (for the \"standard\" booting):\n\u003e\n\u003e 1. MBR (there needs to be the \"standard\" MBR code, i.e. any code that chainloads active primary partition)\n\u003e 2. Partition (primary) must be active and contain\n\u003e 3. Bootsector - invoked by the MBR code (there needs to be the \"standard\" bootsector code)\n\u003e 4. BOOTMGR - invoked by the bootsector code\n\u003e 5. \\\\boot\\\\BCD \\\u003c- read by the BOOTMGR\n\u003e 6. BOOT.INI - read by BOOTMGR\n\u003e 7. grldr \\\u003c- invoked by the entry in BOOT.INI\n\u003e\n\u003e If grub4dos is installed the booting mechanism is the following:\n\u003e\n\u003e 1. grldr.mbr \\\u003c- installed to the MBR+hidden sectors\n\u003e 2. grldr \\\u003c- invoked by the grldr.mbr\n\u003e 3. menu.lst \\\u003c- read by grldr\n\u003e 4. BOOTMGR \\\u003c- chainloaded by the contents of menu.lst\n\u003e 5. \\\\boot\\\\BCD \\\u003c- read by the BOOTMGR\n\u003e\n\u003e The \"missing operating system\" may be due to BOOTMGR or \\\\boot\\\\BCD missing ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\u003e\n\u003e The grub4dos screenshot may be due to issues in finding the menu.lst, I seem to remember that some BIOSes may have issues, by themselves or in combination with grub4dos if the USB device is bigger than 128 Gb, it is possible that this is the case.\n\u003e\n\u003e PLoP provides an \"independent\" USB stack and thus bypasses this limitiation (if it is there).\n\u003e\n\u003e @Steve6375\n\u003e\n\u003e Maybe it is the case of testing the newish grub4dos 0.4.6a with USB stack? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nhi folks, you know I am a noob  \nbut step 3 \\\u0026 4 of standard booting must be perfect for plain NT6 booting  \nif access is denied during bootsect.exe, like Korun has shown in his JPG,  \nthat is therefore imperfect  \nwhich is why I said in my above post:  \nuse the force luke  \nztron\n\n"
    },
    {
      "id": "178307",
      "timestamp": "2013-10-13T13:08:00+00:00",
      "author": "Wonko the Sane",
      "content": "@ztron\n\nYes, this is very possible :smile:.\n\nThe string \"Missing operating system\" is in the \"standard\" MBR and it is then shown because the bootsector is not bootable (i.e. the bootsect.exe did not produce the desired effect on the volume).\n\nI didn\u0027t noticed that output :blush:\n\nIt\u0027s \"queer\" however that a bootasector on a USB device is \"locked\", but then again, since it is 8.1, everything is possible.\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "178314",
      "timestamp": "2013-10-13T14:55:06+00:00",
      "author": "steve6375",
      "content": "Post #22 shows it has booted to grldr. If grub4dos is running and a menu.lst is loaded, the bootmgr bootsector is not needed as we chainload direct to \\\\bootmgr.\n\nAlso the original posts showed that it had booted to bootmgr. So even though bootsect failed it should be bootable (depends on exact history of what was done to partition and format the drive)???\n\nThe behaviour of the system seems most odd and it would be nice to get some diagnostic results as I requested and you \u0027half\u0027 replied in post #22.\n\nIf you install grub4dos and have grldr and menu.lst present then it should boot to the grub4dos menu. Did you do this - if so why didn\u0027t you see the menu?\n\n"
    },
    {
      "id": "178321",
      "timestamp": "2013-10-13T16:07:48+00:00",
      "author": "Wonko the Sane",
      "content": "@Steve\n\nThere are seemingly two separate issues.\n\n1. The \"non-install\" way failed because the bootsector - probably - is not the \"standard\" Windows Vista ![:ph34r:](https://reboot.pro/public/style_emoticons/default/scared9.gif) or later invoking bootmanager (i.e. the bootsect.exe was not successful). (end of the issue).\n2. The \"install\" way failed because somehow the grldr.mbr cannot find the grldr OR the grldr booted from the installed grldr.mbr cannot find the menu.lst.\n\nIf the menu.lst cannot be found, it should however go to a grub\\\u003e prompt, so it seems more like the grldr.mbr cannot find the grldr.\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "178331",
      "timestamp": "2013-10-13T16:31:00+00:00",
      "author": "korun",
      "content": "\u003e Post #22 shows it has booted to grldr. If grub4dos is running and a menu.lst is loaded, the bootmgr bootsector is not needed as we chainload direct to \\\\bootmgr.\n\u003e\n\u003e Also the original posts showed that it had booted to bootmgr. So even though bootsect failed it should be bootable (depends on exact history of what was done to partition and format the drive)???\n\u003e\n\u003e The behaviour of the system seems most odd and it would be nice to get some diagnostic results as I requested and you \u0027half\u0027 replied in post #22.\n\u003e\n\u003e If you install grub4dos and have grldr and menu.lst present then it should boot to the grub4dos menu. Did you do this - if so why didn\u0027t you see the menu?\n\nI was busy so I did the steps again:\n\n[https://www.dropbox....2013 182425.bmp](https://www.dropbox.com/s/az0redjbbvn1x8q/RMPrepUSB%20v.2.1.714%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28c%292008-2013%20RM%20Education%20plc%20%5BSSi%5D%2010132013%20182425.bmp \"External link\")\n\n[https://www.dropbox....2013 182124.bmp](https://www.dropbox.com/s/8xp3cyx7py4mabh/CProgram%20FilesRMPrepUSBgrubinst.exe%2010132013%20182124.bmp \"External link\")\n\nI now have \\`grldr\\` and \\`menu.lst\\` files in the root of the first partition of my drive (added there automatically) but my WIndows install is in the other (second) partition.\n\nEDIT:\n\nAnd again when I try to boot from usb from the bios option it fails with the same error. If i go into USB with plop it boots to the grub4dos bootloader and I have Win 8 option but it tries to boot from the same partition as the grub loader while the Windows 8 System is on the other (second) hdd partition.\n\nI guess the USB drive or the bios fail to load quickly enough to boot from the hdd and plop is handling that in a better way.\n\n**Edited by korun, 13 October 2013 - 04:37 PM.**\n"
    },
    {
      "id": "178341",
      "timestamp": "2013-10-13T17:03:18+00:00",
      "author": "steve6375",
      "content": "menu.lst is not added automatically?\n\nWhat is in your menu.lst?\n\nSo are you saying you get the drives listed (white text on black screen) and then what happens?\n\nYou should see a menu?\n\nWhen you say you run plop - is this booting from a Plop CD?\n\n"
    },
    {
      "id": "178348",
      "timestamp": "2013-10-13T17:24:26+00:00",
      "author": "ztron",
      "content": "hi again,  \nWOnko, good to get your message.  \nSteve, you too and thanks because I have enjoyed your site a lot.  \nSo far I only use GRUB Legacy not G4D yet.  \nRMPrepUSB neither but it looks advanced and convenient at the same time, a virtual work of art.  \nAnd of course this site :-)  \nI\u0027m learning so much from everyone here, so far I just boot the old-fashioned way.  \nlooking again at the korun \"Procedure\" JPG, appears like the WD Passport consisted of volumes H: \\\u0026 I: at the time within the diskpart screen.  \nCan not be sure which volume is at the beginning of the HDD and which at the end. They are nicely labeled though, so I will soon make a guess.  \nI must also assume these are both primary partitions, or maybe I overlooked some posted confirmation.  \nI have a WD Passport 1TB which I declined to do boot work since it is a Passport version having an included SES (SCSI Enclosure Services) device which requires installing a non-native Windows driver (plus installed windows app to control), while at the same time the regular Windows USB storage driver for the remainder of the HDD loads automatically upon plugging in to USB. One cable, two functional devices inside, similar to the USB controllers having a sometimes seen USB-CDROM section in addition to USB-HDD section.  \nI have never installed the SES driver from WD or WU on any PC\u0027s so far, and info from WD is confusing enough so that it is difficult to be sure whether a virtual CD would appear (or be optional and configurable with the WD Smartware which I do not install to Windows either) after such an SES driver was added to any Windows.  \nWith many of the \"My Passport\" SES models there are corresponding similar models having no SES property.  \nIn my use on W81preview there is still no native SES driver and I do not connect to WU, and never see a VCD either.  \nOnly one little suffusion of yellow in Device Manager for the non-installed SES device :-)  \nAnd I am happy to just use the USB 3.0 1TB of factory NTFS storage like noobs are expected to do ;-)  \nAnd even happier with the now discontinued USB 2.0 IOmega eGo Helium 1TB which boots wonderfully.  \nThis was purchased after the sad Passport as consolation to myself.  \neGo Helium was as low as $39US when first discontinued before \"Singapore flooding\" price-rise.  \nBoth of these were obtained early, and have non-AF HDD\u0027s inside therefore sectors are 512B although both controllers are rumored to function with at least 2TB HDD\u0027s. And perhaps 4096B sectors, which I would rather not have.  \nAnyway, The factory label for the WD preformatted USB storage volume is \"My Passport\".  \nSo I now assume korun has shrunk the factory NTFS volume, then partitioned and formatted  \nthe final space as NTFS and labeled it USBOS.  \nstrike that last sentence, while I was typing, korun has now confirmed this by posting his partition table.  \nalso looking at the newly posted RMPrepUSB panel, on all but a vey old PC I prefer FAT32 over FAT16, and I always keep my FAT32\u0027s below the original 32GB, and FAT16\u0027s below the original 2GB, but that\u0027s just me being old-fashioned.  \nCluster size can be also be a consideration that was not as important then.  \nthere\u0027s also this:  \n[http://support.microsoft.com/kb/320284](http://support.microsoft.com/kb/320284 \"External link\")  \nBeginning a volume at 390GB away from sector0 does require the \"standard\" MBR be a really good one, as well as the bootloader itself.  \nFor instance the \"standard MBR\" of Ranish will not boot DOS further than 8GB away from sector0.  \nW8 can provide this 1TB capability but the the BOOTSECT.EXE command would then be:  \nbootsect /nt60 i: /force /mbr  \nthere would then be a double message in the Win32 console, with possibly two opportunities for failure  \neven with \"Bootcode was successfully updated\" being reported.  \nNaturally none of these considerations would be visible in the Korun \"Output\" JPG, since that is just a decent  \nlooking BCD.  \nBut if korun volume G: was a WD virtual DVDROM I would think that may be a variable I have not tackled yet as I mentioned.  \nThis detail I would like korun to clarify also. It shows no media so I hope its real. Looks like he is booted to a real  \nDVD (x:\\\\windows\\\\system32\\\\cmd.exe) so probably no worries about that in this case.  \nAlso I don\u0027t boot any .VHD yet either so what do I know anyway.  \nhope this helps  \nztron\n\n"
    },
    {
      "id": "178380",
      "timestamp": "2013-10-13T20:21:00+00:00",
      "author": "korun",
      "content": "\u003e menu.lst is not added automatically?\n\u003e\n\u003e What is in your menu.lst?\n\u003e\n\u003e So are you saying you get the drives listed (white text on black screen) and then what happens?\n\u003e\n\u003e You should see a menu?\n\u003e\n\u003e When you say you run plop - is this booting from a Plop CD?\n\nIt is added automatically (at least when i press f4) with the contents you provided me above.\n\nI added plop to the standard bootloader. When I boot to the drive from bios boot from usb option I get:\n\n[https://www.dropbox....1012_204250.jpg](https://www.dropbox.com/s/d636ohhvb7ohco6/20131012_204250.jpg \"External link\")\n\nIf I boot from usb from the plop bootmanager i get grub4dos bootloader with Win8 Boot option. If I click that I get:\n\n[https://www.dropbox....1013_221923.jpg](https://www.dropbox.com/s/azdz100yp6yrrym/20131013_221923.jpg \"External link\")\n\n\u003e hi again,  \n\u003e WOnko, good to get your message.  \n\u003e Steve, you too and thanks because I have enjoyed your site a lot.  \n\u003e So far I only use GRUB Legacy not G4D yet.  \n\u003e RMPrepUSB neither but it looks advanced and convenient at the same time, a virtual work of art.  \n\u003e And of course this site :-)  \n\u003e I\u0027m learning so much from everyone here, so far I just boot the old-fashioned way.  \n\u003e looking again at the korun \"Procedure\" JPG, appears like the WD Passport consisted of volumes H: \\\u0026 I: at the time within the diskpart screen.  \n\u003e Can not be sure which volume is at the beginning of the HDD and which at the end. They are nicely labeled though, so I will soon make a guess.  \n\u003e I must also assume these are both primary partitions, or maybe I overlooked some posted confirmation.  \n\u003e I have a WD Passport 1TB which I declined to do boot work since it is a Passport version having an included SES (SCSI Enclosure Services) device which requires installing a non-native Windows driver (plus installed windows app to control), while at the same time the regular Windows USB storage driver for the remainder of the HDD loads automatically upon plugging in to USB. One cable, two functional devices inside, similar to the USB controllers having a sometimes seen USB-CDROM section in addition to USB-HDD section.  \n\u003e I have never installed the SES driver from WD or WU on any PC\u0027s so far, and info from WD is confusing enough so that it is difficult to be sure whether a virtual CD would appear (or be optional and configurable with the WD Smartware which I do not install to Windows either) after such an SES driver was added to any Windows.  \n\u003e With many of the \"My Passport\" SES models there are corresponding similar models having no SES property.  \n\u003e In my use on W81preview there is still no native SES driver and I do not connect to WU, and never see a VCD either.  \n\u003e Only one little suffusion of yellow in Device Manager for the non-installed SES device :-)  \n\u003e And I am happy to just use the USB 3.0 1TB of factory NTFS storage like noobs are expected to do ;-)  \n\u003e And even happier with the now discontinued USB 2.0 IOmega eGo Helium 1TB which boots wonderfully.  \n\u003e This was purchased after the sad Passport as consolation to myself.  \n\u003e eGo Helium was as low as $39US when first discontinued before \"Singapore flooding\" price-rise.  \n\u003e Both of these were obtained early, and have non-AF HDD\u0027s inside therefore sectors are 512B although both controllers are rumored to function with at least 2TB HDD\u0027s. And perhaps 4096B sectors, which I would rather not have.  \n\u003e Anyway, The factory label for the WD preformatted USB storage volume is \"My Passport\".  \n\u003e So I now assume korun has shrunk the factory NTFS volume, then partitioned and formatted  \n\u003e the final space as NTFS and labeled it USBOS.  \n\u003e strike that last sentence, while I was typing, korun has now confirmed this by posting his partition table.  \n\u003e also looking at the newly posted RMPrepUSB panel, on all but a vey old PC I prefer FAT32 over FAT16, and I always keep my FAT32\u0027s below the original 32GB, and FAT16\u0027s below the original 2GB, but that\u0027s just me being old-fashioned.  \n\u003e Cluster size can be also be a consideration that was not as important then.  \n\u003e there\u0027s also this:  \n\u003e [http://support.microsoft.com/kb/320284](http://support.microsoft.com/kb/320284 \"External link\")  \n\u003e Beginning a volume at 390GB away from sector0 does require the \"standard\" MBR be a really good one, as well as the bootloader itself.  \n\u003e For instance the \"standard MBR\" of Ranish will not boot DOS further than 8GB away from sector0.  \n\u003e W8 can provide this 1TB capability but the the BOOTSECT.EXE command would then be:  \n\u003e bootsect /nt60 i: /force /mbr  \n\u003e there would then be a double message in the Win32 console, with possibly two opportunities for failure  \n\u003e even with \"Bootcode was successfully updated\" being reported.  \n\u003e Naturally none of these considerations would be visible in the Korun \"Output\" JPG, since that is just a decent  \n\u003e looking BCD.  \n\u003e But if korun volume G: was a WD virtual DVDROM I would think that may be a variable I have not tackled yet as I mentioned.  \n\u003e This detail I would like korun to clarify also. It shows no media so I hope its real. Looks like he is booted to a real  \n\u003e DVD (x:\\\\windows\\\\system32\\\\cmd.exe) so probably no worries about that in this case.  \n\u003e Also I don\u0027t boot any .VHD yet either so what do I know anyway.  \n\u003e hope this helps  \n\u003e ztron\n\u003e\nI really didn\u0027t inderstand some of the thing you wanted me to confirm, I am quite a noob and might need a second explanation :smile:)\n\n**Edited by korun, 13 October 2013 - 08:32 PM.**\n"
    },
    {
      "id": "178383",
      "timestamp": "2013-10-13T20:30:48+00:00",
      "author": "steve6375",
      "content": "What \u0027standard bootloader\u0027 is this? How did you add Plop to it? Why did you add Plop to it?\n\nWhy not format the USB drive, add grub4dos, add menu.lst, boot?\n\n"
    },
    {
      "id": "178384",
      "timestamp": "2013-10-13T20:36:48+00:00",
      "author": "korun",
      "content": "\u003e What \u0027standard bootloader\u0027 is this? How did you add Plop to it? Why did you add Plop to it?\n\u003e\n\u003e Why not format the USB drive, add grub4dos, add menu.lst, boot?\n\n[http://www.plop.at/e...ll.html#wininst](http://www.plop.at/en/bootmanager/mbrinstall.html#wininst \"External link\")\n\nI added it in the Windows boot menu because I didn\u0027t had empty CD at my hand. Later I got one and tried that way too (booting plop via CDROM) and it also worked. I installed plop to try my luck as I didn\u0027t really had much options and luckily it worked.\n\nI have grub4dos and menu.lst in the first partition of my external HDD, I just get error when I try to boot from usb even with that installed. I used your RMPrepUSB application and your instructions to do that.\n\n**Edited by korun, 13 October 2013 - 08:40 PM.**\n"
    },
    {
      "id": "178387",
      "timestamp": "2013-10-13T20:45:04+00:00",
      "author": "steve6375",
      "content": "and the error you got when just booting grub4dos + menu.lst without plop was....?\n\n"
    },
    {
      "id": "178388",
      "timestamp": "2013-10-13T20:48:41+00:00",
      "author": "steve6375",
      "content": "Is it possible that you can disable your internal HDD (via the BIOS) and try booting from the ext USB drive just using grub4dos + menu.lst?\n\nMaybe it is hanging when accessing your hard disk?\n\n"
    },
    {
      "id": "178394",
      "timestamp": "2013-10-13T21:34:56+00:00",
      "author": "korun",
      "content": "\u003e Is it possible that you can disable your internal HDD (via the BIOS) and try booting from the ext USB drive just using grub4dos + menu.lst?\n\u003e\n\u003e Maybe it is hanging when accessing your hard disk?\n\nThis is what I get when I boot from usb for around 2-3 seconds before I am redirected to the default windows bootloader:\n\n[https://www.dropbox....1012_204250.jpg](https://www.dropbox.com/s/d636ohhvb7ohco6/20131012_204250.jpg \"External link\")\n\nAlso BIOS doesn\u0027t allow me to disable internal hdd and as it is a laptop I am not sure if I can disconnect them physically without damaging something else :smile:).\n\n"
    },
    {
      "id": "178395",
      "timestamp": "2013-10-13T21:40:02+00:00",
      "author": "steve6375",
      "content": "You can usually remove a HDD from a laptop easily. Just remove a cover, undo a few scews that hold the drive down and slide it back to unplug it. But I quite understand if you don\u0027t want to do it. Being pragmatic, if Plop works, why not configure it (plpbt.bin using **plpcfgbtGUI.exe** ) to auto-boot to the external hard disk.\n\n"
    },
    {
      "id": "178439",
      "timestamp": "2013-10-14T15:43:38+00:00",
      "author": "ztron",
      "content": "I think my short answer to the first problem would be to repeat Tutorial 90 from RMPrepUSB,\n\nusing the following command in place of bootsect /nt60 i:\n\nbootsect /nt60 i: /force /mbr\n\nztron\n\nalso if it was me I would probably confirm that the Passport is actually bootable to begin with\n\non your compaq laptop\n\nin a simple way like DOS\n\n\u003cbr /\u003e\n\n"
    }
  ]
}