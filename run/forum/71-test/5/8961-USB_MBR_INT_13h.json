{
  "id": "8961",
  "title": "USB MBR INT 13h",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "77344",
      "timestamp": "2009-09-06T05:06:25+00:00",
      "author": "DavidTemplar",
      "content": "Hi all,  \n\nI have writen a small mbr in assembler that when written to a usb stick will boot up... however after booting I cannot get INT 13h to read any sectors on the usb stick... all help is appreciated.  \n\nDoes the code have to go into protected mode to read the usb stick\u0027s sectors?  \n\nDoes it have to use INT 13h extended functions? The memory stick is only 1GB.  \n\nA small code snippet would be helpful that after boot reads 1 sector of the memory stick starting a sector 2 and then loads that code to memory xxxx location, that I can then jmp to start execution at that memory location.  \n\nThanks in advance   \n"
    },
    {
      "id": "77347",
      "timestamp": "2009-09-06T07:04:30+00:00",
      "author": "karyonix",
      "content": "Why do you need a new MBR program ?  \n\nYou can read SYSLINUX MBR source at   \n[http://git.kernel.or...e;f\u003dmbr;hb\u003dHEAD](http://git.kernel.org/?p\u003dboot/syslinux/syslinux.git;a\u003dtree;f\u003dmbr;hb\u003dHEAD \"External link\")  \nor download GRUB4DOS source from   \n[http://sourceforge.n...grub4dos/files/](http://sourceforge.net/projects/grub4dos/files/ \"External link\")   \nor download Debian MBR source package from   \n[http://packages.debi.../source/sid/mbr](http://packages.debian.org/source/sid/mbr \"External link\")   \n"
    },
    {
      "id": "77349",
      "timestamp": "2009-09-06T07:30:26+00:00",
      "author": "DavidTemplar",
      "content": "I have already done it the other ways and I just want to do it my way... do you know how bios int 13h LBA mode works?   \n"
    },
    {
      "id": "77361",
      "timestamp": "2009-09-06T09:18:45+00:00",
      "author": "karyonix",
      "content": "See \"IBM/MS INT 13 Extensions\" category in [http://www.ctyme.com/intr/cat-008.htm](http://www.ctyme.com/intr/cat-008.htm \"External link\") .  \n\nI never write assembly program that use INT13 Extension before but this is what I think how to do it.  \n- You check for INT13 Extension\u0027s existent first.   \n- Fill LBA and number of sectors in a \"disk address packet\" structure and set structure\u0027s address and function code in registers and call INT13.   \n"
    }
  ]
}