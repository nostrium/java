{
  "id": "22474",
  "title": "Boot same disk either GPT or MBR?",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "218404",
      "timestamp": "2021-06-17T21:20:28+00:00",
      "author": "Al Gorithm",
      "content": "Hello All. Apologies if this is the wrong forum; if so, please redirect.\n\nIn my BIOS boot-order, some devices show up twice: once as normal, and once as UEFI device; and the BIOS allows selection of either to boot from. Having done some reading, it seems as though a GPT partitioned disk still contains a traditional MBR.\n\nQuestion: Is it possible to successfully boot the same disk (SSD), by either GPT or MBR (perhaps to different partition on the disk)?\n\nReason: I would like to selectively boot one of two different partitions on the same disk, but don\u0027t want to have to select from a boot menu at each and every boot. I would like to automatically boot every time into the first partition, unless at boot time I press the F12 key to enter the boot menu, and manually select to boot the second partition. The caveat is that the second partition should be an MBR partition for Grub4DOS.\n\nBackground (not necessary to question, but to keep on-topic): Years ago, I played around with RMPrepUSB and Grub4DOS, and came across a tutorial to create a small partition on the system\u0027s internal drive and place Grub4DOS into the partition boot record, and then use that partition to hold and boot a Clonezilla Live image (or any other image for that matter) to create a backup image of the main drive, without needing a USB stick; an idea which I liked.\n\nSo, on my numbers two and three systems (I have three desktop systems relevant here), each of which has a 120GB SATA3 SSD system disk and a 2TB data HDD, I created such a partition, so that the drive layouts are thus:\n\nSystem 2:\n\nSSD: \\| System Reserved \\| C: Window \\| Recovery \\|\n\nHDD: \\| D: Data \\| E: Grub4DOS/Clonezilla \\|\n\nSystem 3:\n\nSSD: \\| C: Window \\| Recovery \\|\n\nHDD: \\| D: Data \\| E: Grub4DOS/Clonezilla \\|\n\n(No idea why one system has a Windows System Reserved Partition and the other does not. Both systems previously had earlier versions of Windows (7/8) when they were upgraded (by clean install) to Windows 10 years ago.)\n\nBoth systems are UEFI/GPT capable, but are configured as BIOS/MBR. Each is set to automatically boot C: on the SSD, unless F12 is used to enter the boot menu and select E: on the HDD, which boots Grub4DOS. All works fine.\n\nI should note that I build all my systems myself, with an eye (or ear) toward silent computing, so my newest system (which is now several years old) was built with an SSD only, and no HDD. It\u0027s layout is:\n\nSystem 1:\n\nSSD: \\| C: Windows \\| Recovery \\| D: Data \\| E: for Grub4DOS/Clonezilla \\|\n\nOn this system, which is also configured as BIOS/MBR (though is UEFI/GPT capable), although the small partition (E:) is there, I never did get around to installing Grub4DOS/Clonezilla. And I\u0027m not sure how I would boot it if it were there.\n\nThe SATA3 SSD on this system is 500GB (big mistake), as at the time it seemed like the Windows partition could be relatively small, and leave sufficient room for a reasonable sized data partition. Well, the Windows partition has grown and now become full, and needs to be enlarged. I have ordered a 1TB M.2 NVMe SSD, which will become my D: Data partition, and will leave plenty of room on the SATA3 SSD to enlarge the Windows partition.\n\nMy understanding is that there should be no problem in using an M.2 NVMe SSD on a BIOS/MBR-configured system (which is EUFI capable), as long as it is used only for data, and not to boot. But this still leaves the question asked at the top of this post.\n\nSupposing that the SATA3 SSD was converted to GPT, and the system configured as UEFI to boot the Windows partition, could that same drive still be booted as MBR from the F12 boot menu? And if so, Grub4DOS could be placed in the MBR to boot E:, but would have no effect when the system was booted as GPT.\n\nIf this is a hopeless idea, don\u0027t hesitate to say so. Or any alternative solutions would be welcomed as well. But all of this is just as a matter of convenience, to have the Clonezilla Live image available on local storage, without needing a USB stick, as is also the case with the other two systems. The primary goal will be to migrate D: Data to the new M.2 SSD, and enlarge the Windows partition.\n\nThanks for any thoughts.\n\n"
    },
    {
      "id": "218405",
      "timestamp": "2021-06-17T22:58:35+00:00",
      "author": "alacran",
      "content": "On usuall Bios or CSM mode boot the HD is MBR partitioned. HD max size is 2 TB. Max of 4 primary partitions or 3 primary partitions and a extended partition with multiple logical partitions.\n\nOn usuall UEFI boot the HD is GPT partitioned. No problem if HD is bigger than 2 TB. Many partitions are possible.\n\nThere is no advantage in UEFI + GPT unless your HD is bigger than 2 TB.\n\nThere are some tricks to boot on Bios or CSM mode from a GPT partitioned HD, but it is complicated and totally unnecessary in your case.\n\nIn your actual Bios or CSM mode boot you can add to bootable partition grld.mbr and grld files and create or edit your actual menu.lst, and (if you haven\u0027t done it) by means of [BootIce](http://reboot.pro/index.php?app\u003ddownloads\u0026showfile\u003d592 \"\") it is very easy to add an entry to boot from OS(s) on other primary or logical partitions or boot also grld.mbr from grub4dos v046a (for Bios), on your menu.lst you can make entries to boot from other OS(s), some ISO(s) or Ramboot Mini-VHD(s) files manually, or by means of [UEFI MULTI](http://reboot.pro/index.php?showtopic\u003d22254\u0026hl\u003d%2Buefi+%2Bmulti \"\") and/or [VHD_WIMBOOT](http://reboot.pro/index.php?showtopic\u003d21977\u0026hl\u003dvhd_wimboot \"\"), to create the respective entries automatically, both programs made by **wimb**.\n\nIn UEFI + GPT boot, you can\u0027t do same as on previous paragraph, as using UEFI + Secure Boot you can only boot Windows OS(s), in this case it is necessary to boot first to [grub2](http://reboot.pro/index.php?showtopic\u003d22429#entry217505 \"\") and from it load the Windows OS(s) or [grub4dos for UEFI](http://reboot.pro/index.php?showtopic\u003d22400\u0026hl\u003d%2Bgrub4dos+%2Bfor+%2Buefi \"\"), or dissable Secure Boot and boot directly to grub4dos for UEFI replacing the bootmgfw.efi with the respective \\*.efi file from grub4dos for UEFI renaming it to bootmgfw.efi, in UEFI + GPT case also same tools from **wimb** mentioned on previous paragraph will work to create the respective entries automatically.\n\nSo far I\u0027m using this version of [grub4dos v046a](http://dl.grub4dos.chenall.net/grub4dos-0.4.6a-2021-01-27.7z \"External link\") (for Bios) and there are no bugs in it.\n\nSo far I\u0027m using this version of [grub4dos for UEFI](http://dl.grub4dos.chenall.net/grub4dos-for_UEFI-2021-02-10.7z \"External link\") and there are no bugs in it.\n\nSo you have available alternatives to choose, but I strongly recommend keep Bios or CSM mode boot and MBR partitioned HD.\n\nalacran\n\n"
    },
    {
      "id": "218406",
      "timestamp": "2021-06-17T23:30:37+00:00",
      "author": "alacran",
      "content": "From a MBR partitioned disk having first primary partition active and FAT-32 formated, it is possible to boot OS(s) installed on other primary partitions as Bios/CSM or as UEFI, this approch is very used for USB devices to make them capables to boot both ways, see [USB Format Tool](http://reboot.pro/index.php?showtopic\u003d22254\u0026hl\u003d%2Buefi+%2Bmulti \"\") by wimb.\n\n**WARNING:** USB Format Tool fully erase all info on the disk before repartition it.\n\nalacran\n\n"
    },
    {
      "id": "218407",
      "timestamp": "2021-06-17T23:36:59+00:00",
      "author": "antonino61",
      "content": "My dear Alacr√°n, for a start pls let me o.t. as well. I wanna jump at the chance of telling you my findings on win11. did the same purging as I always do on win10, including my brute force sessions. I can tell u that over 90% of the reductions have worked, except registry1staid, which yields an unbootable version (probably as it dirupts the taskbar) and deviceremover (which does not even start). all cleaners work and wimb\u0027s reducer wants adjusting to the still cryptic win11 taskbar, but this is no major problem as customizable alternatives to win11 taskbar are to be expected in the months to come. overall, the system runs a little smoother and its space impact is a little lower than win10.\n\n"
    },
    {
      "id": "218408",
      "timestamp": "2021-06-17T23:47:25+00:00",
      "author": "alacran",
      "content": "You should not install or test unofficial versions of any OS, AFAIK that is a filtered version and who knows what kind of bugs and malware it can have.\n\nalacran\n\n"
    },
    {
      "id": "218409",
      "timestamp": "2021-06-17T23:51:11+00:00",
      "author": "antonino61",
      "content": "official versions will be even better, they say. btw, prio.exe is another one of the very few programs that do not work.\n\n"
    },
    {
      "id": "218410",
      "timestamp": "2021-06-18T00:09:26+00:00",
      "author": "Al Gorithm",
      "content": "Thanks for detailed post!\n\n\u003e There is no advantage in UEFI + GPT unless your HD is bigger than 2 TB.\n\nAnd I have no drives larger than 2TB (except in NAS, which is not of concern here).\n\n\u003e In your actual Bios or CSM mode boot you can add to bootable partition grld.mbr and grld files and create or edit your actual menu.lst, and (if you haven\u0027t done it) by means of [BootIce](http://reboot.pro/index.php?app\u003ddownloads\u0026showfile\u003d592 \"\") it is very easy to add an entry to boot from OS(s) on other primary or logical partitions or boot also grld.mbr from grub4dos v046a (for Bios), on your menu.lst you can make entries to boot from other OS(s), some ISO(s) or Ramboot Mini-VHD(s) files manually, or by means of [UEFI MULTI](http://reboot.pro/index.php?showtopic\u003d22254\u0026hl\u003d%2Buefi+%2Bmulti \"\") and/or [VHD_WIMBOOT](http://reboot.pro/index.php?showtopic\u003d21977\u0026hl\u003dvhd_wimboot \"\"), to create the respective entries automatically, both programs made by **wimb**.\n\nMy bootable partition is Windows 10 Professional x64 on C:, so grld.mbr and grld files would go in root of C:?\n\nThe desired boot choices are only two: Windows on C:, or Clonezilla Live image on E:. So menu.lst would contain two entries?\n\nAnd with those files in place, the system would still boot to Windows in the same way that it does now? And once there, I would enter some command to tell the system to reboot to some other partition? Or do I completely misunderstand?\n\n"
    },
    {
      "id": "218411",
      "timestamp": "2021-06-18T01:04:26+00:00",
      "author": "alacran",
      "content": "Assuming you installed Win in the usuall way, and you haven\u0027t changed the MBR to grub4dos, with the following info you will be able to boot directly to the Win OS(s) by Win boot files/folders, or from it load grld.mbr of grub4dos that will open menu.lst to select other options, which may include Win OS(s) or ISO(s) or Ramboot Mini VHD(s) etc.\n\n\u003e My bootable partition is Windows 10 Professional x64 on C:, so grld.mbr and grld files would go in root of C:?\n\nNo, that is in fact **Windows partition** or**System drive** , the bootable partition or **Boot drive** is the very first primary active partition (usually hidden and no drive letter assigned to it) where all boot files/folders reside, the one that MS incorrectly uses to name **System** or **System Reserved** (or **Reservado para el sistema**in Spanish), unless you omited its creation and put all together on same Windows partition (if that is the case see the EDIT), which is not usually very common during standard installation procedure. (but there are ways to do it).\n\nGo to Control panel, open Explorer options go to See tab, go to show hidden files and folders and select it, go to Hide OS protected files and uncheck it, acept the info in the opened message, make a click on acept or OK.\n\nNow open Disk management (%WinDir%\\\\System32\\\\diskmgmt.msc) and you can assing a letter to the **Boot drive** (I use S:) and now you can see all its content, there on the root of that S: partition/drive is where you should put grld.mbr and grld and menu.lst, and make desired changes in Windows boot menu located on S:\\\\Boot\\\\BCD by means of BootIce and/or UEFI_MULTI or VHD_WIMBOOT. After finish all the editions on menu.lst you can remove the S: drive letter if you want, but next time you need to edit menu.lst you will have to assing a letter to that partition again.\n\nDepending on the free espace available on S: you may add maybe a little ISO file that can be loaded by an entry in menu.lst but I prefer to locate all my ISO files on the folder **images** created for this pourpose on the partition dedicated to hold documents, downloads, etc., outside of the OS partition(s).\n\n**EDIT:** If after checking as mentioned, you really do not have a separate small first primary active partition to hold boot files/folders, and the partition holding the OS is the first primary active partition, in this case **Boot drive** and **Windows partition (** or**System drive)** arethe same partition, then put there grld.mbr + grld + menu.lst, it will not be any problem if doing it this way,\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![BootIce.png](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-60010400-1623980524_thumb.png)](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-60010400-1623980524.png \"BootIce.png - Size: 359.6KB\"){#ipb-attach-url-17850-0-54723800-1676066381}\n\n"
    },
    {
      "id": "218412",
      "timestamp": "2021-06-18T07:15:31+00:00",
      "author": "Wonko the Sane",
      "content": "To hopefully clarify the matter.\n\nThere are a number of programs that are boot managers (grub4dos is one of them, as well as GRUB, GRUB2, Syslinux, etc.) that double as boot loaders (often only for some, not all, OS\u0027s) and a number of OS specific boot loaders (such as NTLDR and BOOTMGR) that double as (very simple) boot managers.\n\nThe BIOS knows nothing about these programs, it simply reads the code in the MBR and executes that code.\n\nWhat you have right now is (Windows 10) BOOTMGR set as PRIMARY boot manager/boot loader, in the MBR you have code that loads the bootsector of the active partition on disk and executes the code on it, this code invokes BOOTMGR, and the code in BOOTMGR will read the settings in \\\\boot\\\\BCD (that right now only consist essentially in \"boot Windows 10\", so you have no multiple choices) and execute the choice you make.\n\nSo, at boot time:\n\nBIOS-\\\u003eMBR code-\\\u003eBootsector of Primary Active partiion (code that loads BOOTMGR)-\\\u003eBOOTMGR-\\\u003e\\\\boot\\\\BCD settings-\\\u003eyour choice (or default after timeout)\n\nAdding the grldr.mbr and grldr basically consists in adding a choice (bootable entry) to the \\\\boot\\\\BCD, so that you will have there two possible choices:\n\n1) Windows 10 (and you will boot exactly like you are doing now if you choose it)\n\n2) grub4dos/grldr (and then grldr will load the menu.lst and you will be able to choose among the entries in it)\n\nSo, in your specific case, you \\*need\\* only one entry/option in menu.lst (the one for Clonezilla), but of course you can add also an entry for Windows 10, this latter however will be more than anything else a \"go back\" as it will re-load the BOOTMGR and you will be again to the \\\\boot\\\\BCD choices between Windows 10 and grub4dos.\n\nThere are other ways (NOT recommended in your case) to install grub4dos as PRIMARY boot manager, in that case you need the two entries in grub4dos menu.lst (one for Windows 10 BOOTMGR and one for Clonezilla).\n\nIf you prefer, in the suggested setup, you won\u0027t \"touch\" grub4dos at all when booting Windows 10, and only load it when you choose to boot \\*something else\\*.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "218413",
      "timestamp": "2021-06-18T23:43:18+00:00",
      "author": "Al Gorithm",
      "content": "Thank you, @alacran and @Wonko. Yes, understood. In my No.2 and No.3 systems, one has as System Reserved partition, and the other does not. But my No.1 system (the one relevant to this discussion) does not. So now in C:\\\\, there is a Boot\\\\ directory, which contains a BCD file (which the system won\u0027t let me view).\n\nSo, then the Grub4DOS files would go in C:\\\\, as you said (in the root, I presume?). Once those files are there, what needs to be done next? Is it to use BootIce to edit BCD to add an entry for Grub4DOS?\n\nThanks for the boot sequence explanation. So as I understand it, once there are two choices in BCD, then every time I boot, I will need to select one of those two entries? The first will boot Windows just as it does now, and the second will run Grub4DOS (from C:\\\\, and therefore it is not required to have Grub4DOS in the E: partition boot sector?) which will display a menu, which I can then cause to run images from E:, such as Clonezilla Live, or GParted Live, or other?\n\nOr, if Grub4DOS was in the MBR, then at every boot there would be a Grub4DOS menu, from which to choose Windows on C:, or some live image from E:? But in either case, I would need to make a menu entry selection (or wait for a time-out) at every boot? If I have understood all of the above correctly, well and good, but if not please correct me.\n\nNow I would like to explain that on my No.2 and No.3 systems, the E: partition (with live images), is on a different physical drive than the System Partition (C:). Therefore, when one of those systems boots normally, I never have to see a menu or wait for a time-out; it simply starts Windows. When I want to run a live image, then at boot time I press F12 to enter the BIOS boot menu, and choose to boot from the second physical drive, which starts Grub4DOS.\n\nThat is the scenario I would like to achieve for system No.1, but it is complicated because C: and E: are on the same physical drive, and so the BIOS boot menu doesn\u0027t help in this case. But if set up as described above (with Grub4DOS either in C:, or in the MBR), and then if the time-out in the BCD menu in the first case, or the time-out in the Grub4DOS menu in the second case, was set to zero, then I would never have to make a selection or wait for the time-out.\n\nThe trick would be to change the menu\u0027s default, according to which way I wanted to boot next. So normally, it would always boot to Windows. When I wanted Clonezilla, I would run some Windows compatible executable (either command-line or graphical) in Windows, which would alter the menu\u0027s default to be Grub4DOS. And in the Grub4DOS menu, it would require some utility to once again set the default back to the Windows entry. I don\u0027t know if such utilities exist, or if that is asking too much, or if perhaps there is some alternative method?\n\n**Edited by Al Gorithm, 18 June 2021 - 11:46 PM.**\n"
    },
    {
      "id": "218415",
      "timestamp": "2021-06-19T03:45:01+00:00",
      "author": "alacran",
      "content": "\u003e But my No.1 system (the one relevant to this discussion) does not. So now in C:\\\\, there is a Boot\\\\ directory, which contains a BCD file (which the system won\u0027t let me view).\n\u003e\nAs previously said:\n\n\u003e Go to Control panel, open Explorer options go to See tab, go to show hidden files and folders and select it, go to Hide OS protected files and uncheck it, acept the info in the opened message, make a click on acept or OK.\n\nThen on C:\\\\ put grld.mbr, grld and menu.lst, and make desired changes in Windows boot menu located on \\\\Boot\\\\BCD by means of BootIce and/or UEFI_MULTI or VHD_WIMBOOT. After finish all the editions on menu.lst you can revert the changes made on Explorer options if you want.\n\n\u003e \u003cbr /\u003e\n\u003e\n\u003e So as I understand it, once there are two choices in BCD, then every time I boot, I will need to select one of those two entries? The first will boot Windows just as it does now, and the second will run Grub4DOS (from C:\\\\, and therefore it is not required to have Grub4DOS in the E: partition boot sector?) which will display a menu, which I can then cause to run images from E:, such as Clonezilla Live, or GParted Live, or other?\n\u003e\nOn your BCD menu, your 10 OS is the default boot option, and it will remain that way unless you change it, your only will add a new entry on it to load/run grld.mbr which will run grld and finnally load menu.lst with your desired options (when you select this option, all this is made almost instantaneously).  \n\nThe Timeout is the time (in seconds) you have available to boot from other than the default option, I suggest to change that to 10 or 5 seconds, your OS will always boot to the default option unless you select another option before the Timeout finish.\n\nSee the attached picture on my previous post.\n\nalacran\n\n"
    },
    {
      "id": "218416",
      "timestamp": "2021-06-19T06:44:30+00:00",
      "author": "Tokener",
      "content": "Hola alacran\n\nyour comment [#2](http://reboot.pro/index.php?showtopic\u003d22474#entry218405 \"\") is very interesting,\n\u003e\n\u003e boot directly to grub4dos for UEFI replacing the bootmgfw.efi with the**respective \\*.efi file** from grub4dos for UEFI renaming it to bootmgfw.efi\n\nmay I ask you: (If it\u0027s not off topic) What is the **respective\\*.efi file** in this case?\n\n"
    },
    {
      "id": "218417",
      "timestamp": "2021-06-19T08:06:09+00:00",
      "author": "alacran",
      "content": "No problem my friend.\n\nMaybe I didn\u0027t expressed the idea clearly unought, but I thought it was very obvious.\n\nBOOTIA32.EFI or BOOTX64.EFI are the two files from [grub4dos for UEFI](http://grub4dos.chenall.net/categories/for-UEFI/ \"External link\") that you can use to rename to bootmgfw.efi (depending on the OS architecture), replacing the \\\\EFI\\\\Microsoft\\\\Boot\\\\bootmgfw.efi file (it is a good practice to first rename the original file, \\[maybe as bootmgfw-original.efi\\] and not really replace it).\n\nalacran\n\n"
    },
    {
      "id": "218419",
      "timestamp": "2021-06-19T11:05:48+00:00",
      "author": "relynx",
      "content": "\u003e ...\n\u003e\n\u003e The trick would be to change the menu\u0027s default, according to which way I wanted to boot next. ...\n\n.\n\nAfter you\u0027ve managed to boot Grub4DOS from Win10 boot manager (bootmgr),  \nyou can try this:  \n\n1. Set **bootmgr** timeout (by *BootICE* or *EasyBCD* ) to 0.  \n\u003d\\\u003e boots directly to Windows 10 as default on start up;  \n\n2. In Windows 10: Start \\\u003e Power \\\u003e ***SHIFT*** **+** Restart \\\u003e other OS  \n\u003d\\\u003e boots into bootmgr menu to manually select Grub4DOS;\n\n**Edited by relynx, 19 June 2021 - 11:19 AM.**\n"
    },
    {
      "id": "218421",
      "timestamp": "2021-06-19T15:20:20+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Al Gorithm, on 19 Jun 2021 - 01:43 AM, said:  \n\u003e So, then the Grub4DOS files would go in C:\\\\, as you said (in the root, I presume?). Once those files are there, what needs to be done next? Is it to use BootIce to edit BCD to add an entry for Grub4DOS?\n\nThe grub4dos files (grldr, grldr.mbr and menu.lst) could go almost anywhere (on any disk/partition) but it is simpler to put them on the SAME disk and partition where you have your BOOTMGR and \\\\boot\\\\BCD (yes in root, again they may be put elsewhere, but keep it simple, at least until you get familiar with the tools and their usage).  \nAnd yes, Bootice will allow you to add an entry to the \\\\boot\\\\BCD invoking grldr.mbr.  \n\u003e Al Gorithm, on 19 Jun 2021 - 01:43 AM, said:  \n\u003e Thanks for the boot sequence explanation. So as I understand it, once there are two choices in BCD, then every time I boot, I will need to select one of those two entries? The first will boot Windows just as it does now, and the second will run Grub4DOS (from C:\\\\, and therefore it is not required to have Grub4DOS in the E: partition boot sector?) which will display a menu, which I can then cause to run images from E:, such as Clonezilla Live, or GParted Live, or other?\n\nYes, and no.  \nIn your case, you will likely boot 99% the Windows, so you can have it set (in boot\\\\BCD) as default (normally selected without any key press) with a short timeout (like 1 or 2 or 3 seconds, i.e. not too long as to not substantially alter your current booting time, but long enough to allow you the 1% of the time to use the arrow down key to select the \"other\" entry).  \nThis way \"normal\" boot (without any interaction will be exactly as you have it now (with a couple seconds pause added), while if you want to get to the grub4dos choices you need to pay attention at boot time and chose the grub4dos entry within the timeout.  \n\u003e Al Gorithm, on 19 Jun 2021 - 01:43 AM, said:  \n\u003e Or, if Grub4DOS was in the MBR, then at every boot there would be a Grub4DOS menu, from which to choose Windows on C:, or some live image from E:? But in either case, I would need to make a menu entry selection (or wait for a time-out) at every boot? If I have understood all of the above correctly, well and good, but if not please correct me.\n\nYes you got it right, BUT FORGET (for the moment) about installing grub4dos to the MBR (i.e. making it the PRIMARY bootmanager).  \n\u003e Al Gorithm, on 19 Jun 2021 - 01:43 AM, said:  \n\u003e Now I would like to explain that on my No.2 and No.3 systems, the E: partition (with live images), is on a different physical drive than the System Partition (C:). Therefore, when one of those systems boots normally, I never have to see a menu or wait for a time-out; it simply starts Windows. When I want to run a live image, then at boot time I press F12 to enter the BIOS boot menu, and choose to boot from the second physical drive, which starts Grub4DOS.\n\nWith all due respect, that approach makes little sense, for a couple reasons at least:  \n1) you have to \"know in advance\" what you want to boot when you switch on the machine (whilst the other way you always switch on the machine the same way and you can choose the \"other\" entry on-the-fly, of course if the timeout is very short, like 1 second, you need anyway to be attentive at boot time, personally 2 or 3 seconds are enough to make the choice and do not add to the normal booting sequence a noticeable delay).  \n2) when you boot via F12 (this may depend on the specific BIOS and/or OS booting) usually (but not always) the BIOS disk order is changed, and this is (IMHO) never a good idea, as it may result in some confusion/increased possibility of errors if dealing with the disk #  \n\u003e Al Gorithm, on 19 Jun 2021 - 01:43 AM, said:  \n\u003e That is the scenario I would like to achieve for system No.1, but it is complicated because C: and E: are on the same physical drive, and so the BIOS boot menu doesn\u0027t help in this case. But if set up as described above (with Grub4DOS either in C:, or in the MBR), and then if the time-out in the BCD menu in the first case, or the time-out in the Grub4DOS menu in the second case, was set to zero, then I would never have to make a selection or wait for the time-out.  \n\u003e\n\u003e The trick would be to change the menu\u0027s default, according to which way I wanted to boot next. So normally, it would always boot to Windows. When I wanted Clonezilla, I would run some Windows compatible executable (either command-line or graphical) in Windows, which would alter the menu\u0027s default to be Grub4DOS. And in the Grub4DOS menu, it would require some utility to once again set the default back to the Windows entry. I don\u0027t know if such utilities exist, or if that is asking too much, or if perhaps there is some alternative method?\n\nOnce said again that you don\u0027t want/need the complication of an installed grub4dos, it is of course trivial to edit from the booted windows the menu.lst (which is a simple text file) so that it behaves whichever way you want, whilst editing the (in use) \\\\boot\\\\BCD, while doable, is less trivial.  \n\nYou would need a small batch using BCDEDIT.  \nBUT the change (to the BCD or to the menu.lst) won\u0027t be \"temporary\", so you will need to also re-edit the \\\\boot\\\\BCD (or the menu.lst) back to the \"normal\" values once booted in the \"other\" OS.  \n\nYou could follow the simple and nice suggestion by relynx above to have a \"normal\" boot to windows with timeout 0 (and thus no choices) and a reboot to the other OS (more properly with access to choices, as you can still shift+restart and decide to go back to Windows).  \n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)  \nWonko\n\n"
    },
    {
      "id": "218423",
      "timestamp": "2021-06-19T19:43:44+00:00",
      "author": "cdob",
      "content": "\u003e In my BIOS boot-order, some devices show up twice: once as normal, and once as UEFI device; and the BIOS allows selection of either to boot from.\n\u003e\n\u003e Both systems are UEFI/GPT capable, but are configured as BIOS/MBR. Each is set to automatically boot C: on the SSD, unless F12 is used to enter the boot menu and select E: on the HDD, which boots Grub4DOS. All works fine.\n\n.  \nThere is a boot selection at UEFI/CSM machines. You use this already. This can be used in another way.  \n\nA BIOS\\\\UEFI firmware soluiton may be possible.  \nThere are different hardware. There wil be different results.  \nConfigure the hardware to boot at CSM and UEFI mode, disable secure boot. I understand, you use this setting already.  \n\nThere is a default UEFI boot file name  \n\\\\efi\\\\boot\\\\bootx64.efi  \n\nInstall Windows at BIOS MBR mode.  \nAdd a small FAT32 partition. Copy grub4dos UEFI to this partion \\\\efi\\\\boot\\\\bootx64.efi.  \n\nBoot the machine, press F12.  \nThe machine may detect a \\\\efi\\\\boot\\\\bootx64.efi at MBR internal disk. Or will miss it, e.g. search at a GPT disk only.  \nWhich boot menu entries do you get?\n\n.  \nBe aware, you may boot Clonezilla at UEFI mode.   \nBackup and restore the MBR partitons should be possible anyway.  \n\nIf the default UEFI boot file name fails, it may be possible to add a entry to the NVRAM.  \nThis boot setting is stored at the motherboard. This would be the next approach.\n\n"
    },
    {
      "id": "218429",
      "timestamp": "2021-06-19T21:25:56+00:00",
      "author": "Al Gorithm",
      "content": "@cdob, thanks very much. This is a direct answer to the original question. But this is somewhat over my head. I think I will try the other methods first, and come back to this method if necessary. Again, thanks.\n\n@Wonko, @alacran, and @relynx, thanks very much for your help. So, I placed grldr and grldr.mbr from [grub4dos v046a](http://dl.grub4dos.chenall.net/grub4dos-0.4.6a-2021-01-27.7z \"External link\") (from your link), and a simple menu.lst in C:\\\\, used BootIce to add an entry, and upon restart, I have a menu with the two entries. When I select the GRUB4DOS entry, GRUB4DOS does indeed boot and display its menu. But of course the menu entries don\u0027t yet do anything, since I haven\u0027t yet learned how to redirect those entries to image files on E: (a FAT32 partition).\n\nThen I tried placing grldr, grldr.mbr, and menu.lst in E:\\\\grub\\\\ (since it was said that they could be placed anywhere, and I thought to keep all the GRUB4DOS content together), and edited the BCD entry accordingly. But at boot when selecting this entry from the BCD menu, it gives an error (0xc000000d) that E:\\\\grub\\\\grldr.mbr could not be found or had an error. I tried setting the BCD entry both to BOOT(WIM)/LOCATE(VHD) (which came up by default), and to HD0 with Partition set to 5: (FAT32). But both ways resulted in the same error. What is wrong here?\n\nMeanwhile, I\u0027m studying the GRUB4DOS documentation that I can find, though many, many of the links found by searching, are now defunct.\n\n@relynx, thanks very much for your tip about SHIFT+restart, of which I was unaware, but I think it may prove an excellent help!\n\n"
    },
    {
      "id": "218433",
      "timestamp": "2021-06-20T07:34:29+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e @cdob, thanks very much. This is a direct answer to the original question. But this is somewhat over my head. I think I will try the other methods first, and come back to this method if necessary. Again, thanks.\n\u003e\n\u003e Meanwhile, I\u0027m studying the GRUB4DOS documentation that I can find, though many, many of the links found by searching, are now defunct.\n\nGet the \"basic\" (please read as \"good ol\u0027\") guide from the Wayback Machine:\n\n[https://web.archive....rub4dos_htm.zip](https://web.archive.org/web/20140901022828/http://diddy.boot-land.net/grub4dos/grub4dos_htm.zip \"External link\")\n\nTill now you are using grub4dos in a very basic manner, so all or most of what you need should already be there.\n\nThe guide is dated (i.e. newer gruib4dos versions have many added features and possibilities) but you should start from that one, then we will talk of the new possibilities,:\n\nAbout your issue with E:\\\\grub\\\\ path, you made **two** changes at the same time (changing the volume from C:\\\\ to E:\\\\ AND putting the files in a folder instead of in root), try with C:\\\\grub and with E:\\\\, it is one of the two that is creating the issue.\n\nYou should also experiment separating the grldr.mbr (that might \\*need\\* to be in root) from the actual grldr file (that may well go into a \\\\grub\\\\ subdirectory).\n\nIt is also possible that the issue is with the BOOTMGR and the E:\\\\ volume (as opposed to the C:\\\\ ), I don\u0027t seem to remember such a limitation, but it is well possible that the good MS guys continued making the BOOTMGR \"worse\" (in the sense of more limited for anything but their own OS) in Windows 10. (before it you could load grldr \"directly\" from BOOT.INI, instead of having to pass through grldr.mbr and everything was simpler).\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "218438",
      "timestamp": "2021-06-20T14:31:45+00:00",
      "author": "cdob",
      "content": "\u003e Then I tried placing grldr, grldr.mbr, and menu.lst in E:\\\\grub\\\\ (since it was said that they could be placed anywhere, and I thought to keep all the GRUB4DOS content together), and edited the BCD entry accordingly. But at boot when selecting this entry from the BCD menu, it gives an error (0xc000000d) that E:\\\\grub\\\\grldr.mbr could not be found or had an error.\n\nTry bcdedit to edit boot\\\\bcd. Run \u0027bcdedit.exe\u0027 and \u0027bcdedit.exe /v\u0027  \n\nBoth partition E: and partition locate does works here.\n\n```\n@ECHO OFF\n\ncall :add_bootsector E:\\grub\\grldr \"Start grub4dos\"\ngoto :eof\n\n:add_bootsector\n for /f \"tokens\u003d1-3\" %%a in (\u0027BCDedit.exe /create /application BOOTSECTOR\u0027) do set guid\u003d%%c\n rem BCDedit.exe /set %guid% device partition\u003d%~d1\n BCDedit.exe /set %guid% device locate\u003dcustom:12000002\n BCDedit.exe /set %guid% path %~pnx1\n BCDedit.exe /set %guid% description \"%~2\"\n BCDedit.exe /displayorder %guid% /addlast\ngoto :eof\n\n\nrem locate custom:12000002 search \"path\"\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "218454",
      "timestamp": "2021-06-20T23:30:32+00:00",
      "author": "Al Gorithm",
      "content": "Thanks. So, I copied grldr, grldr.mbr, and menu.lst to E:\\\\. All three now exist in C:\\\\, E:\\\\, and E:\\\\grub\\\\.\n\nI went to edit BCD, and I noticed that, as I previously mentioned, the BootIce \\[Boot Device\\] section has a Disk: selection with choice of either: BOOT/(WIM)/LOCATE(VHD) (I have no idea what that means), OR HD0 (my system drive); and a Partition: selection, which is empty when Disk: selection is the former, but when Disk: selection is the latter, I have chosen 5: (FAT32), which is my E:\\\\ partition. I previously tried both Disk: selections, but both gave the same error.\n\nBut, now I noticed that, as said, I had (in the \\[Options\\] section) set boot file: to E:\\\\grub\\\\grldr.mbr, and I thought, perhaps the E: is redundant, since it is already specified in the Disk: and Partition: selections above. So I removed the E: from the boot file: field, leaving just \\\\grub\\\\grldr.mbr, saved and rebooted. Sure enough, GRUB4DOS booted successfully. Hurrah! ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)\n\nNext, I will remove those three files from both C:\\\\ and E:\\\\, and leave them only in E:\\\\grub\\\\, and test to ensure that it runs successfully that way.\n\nBut, when I tried to run Clonezilla Live, it immediately gave an error about needing to update the microcode! Sorry, but there was no way to take a screenshot. After a lengthy delay, it finally said it would start a shell, because there was an error to the effect that it could not locate a filesystem or image to run. In the shell, I typed \u0027exit\u0027, which led to a kernel panic, and hung to the point I needed to use the reset button.\n\nSo I have no idea what\u0027s wrong here, but will provide what information I can. The 70GB E: drive contains:\n\nE:\\\\\n\n\\|--$RECYCLE.BIN\n\n\\|--grub\n\n\\| \\|--grub4dos-0.4.6a\n\n\\| \\| \\|--sample\n\n\\| \\| \\|--docs\n\n\\| \\|--ext\n\n\\|--images\n\n\\|--System Volume Information\n\n\\\\grub\\\\ contains the unzipped GRUB4DOS package (the grub4dos-0.4.6a\\\\ and ext\\\\ directories), as well as the three files grldr, grldr.mbr, and menu.lst.\n\n\\\\images\\\\ contains only the clonezilla-live-2.7.2-39-amd64.iso file.\n\nmenu.lst (copied from one of the other computers) contains menu entries for Restart and Shutdown, and the relevant Clonezilla menu entry is:\n\ntitle Clonezilla Live\\\\nClonezilla Live 2.7.2-39 manual mode.\\\\n\\\\n\\\\nPress arrows to highlight; ENTER or b to boot; e to edit; c for command-line.  \nfind --set-root /images/clonezilla-live-2.7.2-39-amd64.iso  \nmap /images/clonezilla-live-2.7.2-39-amd64.iso (0xff)  \nmap --hook  \nroot (0xff)  \nkernel /live/vmlinuz initrd\u003d/live/initrd.img boot\u003dlive union\u003doverlay live-config quiet noswap edd\u003don nomodeset keyboard-layouts\u003dNONE locales\u003den_US.UTF-8 vga\u003d789 utc\u003dno dhcp nosplash vmwgfx.enable_fbdev\u003d1 findiso\u003d/grub/images/clonezilla-live-2.4.7-8-amd64.iso live-media-path\u003d/live toram\u003dfilesystem.squashfs ocs_prerun\u003d\"timedatectl set-ntp off\" ocs_live_run\u003d\"ocs-live-general\" ocs_live_extra_param\u003d\"\" ocs_live_batch\u003d\"no\"  \ninitrd /live/initrd.img  \n\nMost of that doesn\u0027t mean anything to me just yet, but I suspect that the error lays somewhere in there.\n\nLikely off-topic question: is there *any way* to prevent Windows from *continually* re-creating the $RECYCLE.BIN and System Volume Information directories on this partition? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n"
    },
    {
      "id": "218455",
      "timestamp": "2021-06-21T00:24:58+00:00",
      "author": "alacran",
      "content": "I have to congratulate you, you have a very good skill to complicate the simple things.\n\nThere is un-needed to copy grldr, grldr.mbr, and menu.lst to every single drive you have.\n\nAbout BootIce just do it as per the image in my post [No. 8](http://reboot.pro/index.php?showtopic\u003d22474#entry218411 \"\"),\n\nThen glrd.mbr is found on the very first drive, it looks for grld (starting from first drive), which in turn looks for menu.lst (starting from first drive), so you DO NOT need to especify any drive as on my picture, all other instances of those files ARE NOT required and ARE NOT used in my suggested proposal.\n\nForget about all other opinions and suggestions here, do it as I said, **it is the simpler and easier way to do i**t, all other opinions are very good, but it is very clear you DO NOT have the knowledge neccessary to deal with them, as I assumed since the beginning based on your questions.\n\nGo to your PC where your want to make your Clonezilla work, see my pictures and do same thing on your OS, make pictures and keep them for future reference. They show you the partition numbers of each drive on the selected HD.\n\nOn grub4dos the first HD is (hd0) and the fisrt primary partition on that disk is (hd0,0), the second primary is (hd0,1) and so on up to (hd0,3) the last possible primary partition, the first logicall partition on the first HD is (hd0,4) and so on.\n\nThe second HD fisrt primary partition is (hd1,0).\n\nI assume you already have your Clonezilla on the drive where you want to boot from it, if not copy it there, copy your menu.lst that works fine on the other PC to the root of C: on the the PC that is not capable yet to boot Clonezilla.\n\nNow edit the copied menu.lst just changing the numbers corresponding to the drive and partition where Clonezilla is located. That should be all.  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![Select the drive.png](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-86325400-1624234206_thumb.png)](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-86325400-1624234206.png \"Select the drive.png - Size: 16.59KB\"){#ipb-attach-url-17861-0-54732200-1676066381}\n* [![Parts Manage.png](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-59519100-1624234232_thumb.png)](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-59519100-1624234232.png \"Parts Manage.png - Size: 15.64KB\"){#ipb-attach-url-17862-0-54737800-1676066381}\n* [![Partition Management.png](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-37474400-1624234247_thumb.png)](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-37474400-1624234247.png \"Partition Management.png - Size: 29.67KB\"){#ipb-attach-url-17863-0-54742600-1676066381}\n\n"
    },
    {
      "id": "218456",
      "timestamp": "2021-06-21T00:55:52+00:00",
      "author": "Al Gorithm",
      "content": "Quick update: had to copy grldr to root of E:; probably root of any drive would work, but it seems that grldr must be in root, even though other files may be in other directory.\n\nHad error in the menu command: the /images/ directory on this system is not in the /grub/ directory, as on other system. Corrected that, and now Clonezilla runs.\n\nOther questions in previous post still stand.\n\n"
    },
    {
      "id": "218457",
      "timestamp": "2021-06-21T09:48:47+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I have to congratulate you, you have a very good skill to complicate the simple things.\n\u003e\n\u003e There is un-needed to copy grldr, grldr.mbr, and menu.lst to every single drive you have.\n\u003e\n\u003e About BootIce just do it as per the image in my post [No. 8](http://reboot.pro/index.php?showtopic\u003d22474#entry218411 \"\"),\n\u003e\n\u003e Then glrd.mbr is found on the very first drive, it looks for grld (starting from first drive), which in turn looks for menu.lst (starting from first drive), so you DO NOT need to especify any drive as on my picture, all other instances of those files ARE NOT required and ARE NOT used in my suggested proposal.\n\u003e\n\u003e Forget about all other opinions and suggestions here, do it as I said, **it is the simpler and easier way to do i**t, all other opinions are very good, but it is very clear you DO NOT have the knowledge neccessary to deal with them, as I assumed since the beginning based on your questions.\n\u003e\n... and all this time I thought I was the grumpy one ... ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "218465",
      "timestamp": "2021-06-21T18:56:53+00:00",
      "author": "Al Gorithm",
      "content": "\u003e it is very clear you DO NOT have the knowledge neccessary to deal with them,  \n\nQuite right, I do not (yet) have the knowledge to deal with certain issues. Neither did you have such knowledge at some point in time, but you learned. Assuredly I do have the *skills* to deal with said issues, and I too will learn. It is not my intention to become an expert on these things, but to gain sufficient knowledge to know what I am doing, rather than just \"do it this way because I said so\".\n\nDon\u0027t get me wrong. I sincerely appreciate all of the great help given here by the regular forum members (including yourself) over the years to many, many people, and thank you all for it.\n\nAnd, I have already learned a few things, such as:\n\n1. GRUB4DOS will look for grldr only in the root of drives, and not in sub-directories.\n\n2. Setting the BCD timeout in BootIce does not seem to take effect. Even though it says it was successfully saved, when BootIce is restarted, the timeout seems to have reverted to 30 seconds.\n\n3. Even normally helpful forum members can have bad days! ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png)\n\n"
    },
    {
      "id": "218467",
      "timestamp": "2021-06-21T20:54:05+00:00",
      "author": "alacran",
      "content": "On the left part of BootIce below the rectangle you can change the boot order or add new entries, etc. including set your prefered Timeout.\n\nTo make this changes take effect you need to make a click on **Save Globals** before closing that window, **See attached picture.**\n\nI didn\u0027t have a bad day, I tried to explain you in accordance with your knowledge level, then other members came to make good suggestions, some of them very good bot not so simple, requiring a few more deeper knowledge, unnecesary by the way to solve your simple request to boot Clonezilla.\n\nThat comment you quoted, in no way had any irrespectul meaning from my part, it is a fact, and it is also a fact that you are about the same level I was before becoming a member of this forum, any knowledge I may have now, was lerned here on **reboot.pro** forum and on [**MSFN** forum](https://msfn.org/board/ \"External link\").\n\nBut first thing I learned is follow the instructions by the letter, forgetting any previous preconceived ideas I had. To verify by myself if that instuctions work fine or not.\n\nThen if there are other alternative ways to get the desired result, maybe try them also, but one by one, not mixing the procedures.\n\nYour friend\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![Timeout.png](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-00873200-1624308841_thumb.png)](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-00873200-1624308841.png \"Timeout.png - Size: 71.57KB\"){#ipb-attach-url-17867-0-54747300-1676066381}\n\n"
    },
    {
      "id": "218404",
      "timestamp": "2021-06-17T21:20:28+00:00",
      "author": "Al Gorithm",
      "content": "Hello All. Apologies if this is the wrong forum; if so, please redirect.\n\nIn my BIOS boot-order, some devices show up twice: once as normal, and once as UEFI device; and the BIOS allows selection of either to boot from. Having done some reading, it seems as though a GPT partitioned disk still contains a traditional MBR.\n\nQuestion: Is it possible to successfully boot the same disk (SSD), by either GPT or MBR (perhaps to different partition on the disk)?\n\nReason: I would like to selectively boot one of two different partitions on the same disk, but don\u0027t want to have to select from a boot menu at each and every boot. I would like to automatically boot every time into the first partition, unless at boot time I press the F12 key to enter the boot menu, and manually select to boot the second partition. The caveat is that the second partition should be an MBR partition for Grub4DOS.\n\nBackground (not necessary to question, but to keep on-topic): Years ago, I played around with RMPrepUSB and Grub4DOS, and came across a tutorial to create a small partition on the system\u0027s internal drive and place Grub4DOS into the partition boot record, and then use that partition to hold and boot a Clonezilla Live image (or any other image for that matter) to create a backup image of the main drive, without needing a USB stick; an idea which I liked.\n\nSo, on my numbers two and three systems (I have three desktop systems relevant here), each of which has a 120GB SATA3 SSD system disk and a 2TB data HDD, I created such a partition, so that the drive layouts are thus:\n\nSystem 2:\n\nSSD: \\| System Reserved \\| C: Window \\| Recovery \\|\n\nHDD: \\| D: Data \\| E: Grub4DOS/Clonezilla \\|\n\nSystem 3:\n\nSSD: \\| C: Window \\| Recovery \\|\n\nHDD: \\| D: Data \\| E: Grub4DOS/Clonezilla \\|\n\n(No idea why one system has a Windows System Reserved Partition and the other does not. Both systems previously had earlier versions of Windows (7/8) when they were upgraded (by clean install) to Windows 10 years ago.)\n\nBoth systems are UEFI/GPT capable, but are configured as BIOS/MBR. Each is set to automatically boot C: on the SSD, unless F12 is used to enter the boot menu and select E: on the HDD, which boots Grub4DOS. All works fine.\n\nI should note that I build all my systems myself, with an eye (or ear) toward silent computing, so my newest system (which is now several years old) was built with an SSD only, and no HDD. It\u0027s layout is:\n\nSystem 1:\n\nSSD: \\| C: Windows \\| Recovery \\| D: Data \\| E: for Grub4DOS/Clonezilla \\|\n\nOn this system, which is also configured as BIOS/MBR (though is UEFI/GPT capable), although the small partition (E:) is there, I never did get around to installing Grub4DOS/Clonezilla. And I\u0027m not sure how I would boot it if it were there.\n\nThe SATA3 SSD on this system is 500GB (big mistake), as at the time it seemed like the Windows partition could be relatively small, and leave sufficient room for a reasonable sized data partition. Well, the Windows partition has grown and now become full, and needs to be enlarged. I have ordered a 1TB M.2 NVMe SSD, which will become my D: Data partition, and will leave plenty of room on the SATA3 SSD to enlarge the Windows partition.\n\nMy understanding is that there should be no problem in using an M.2 NVMe SSD on a BIOS/MBR-configured system (which is EUFI capable), as long as it is used only for data, and not to boot. But this still leaves the question asked at the top of this post.\n\nSupposing that the SATA3 SSD was converted to GPT, and the system configured as UEFI to boot the Windows partition, could that same drive still be booted as MBR from the F12 boot menu? And if so, Grub4DOS could be placed in the MBR to boot E:, but would have no effect when the system was booted as GPT.\n\nIf this is a hopeless idea, don\u0027t hesitate to say so. Or any alternative solutions would be welcomed as well. But all of this is just as a matter of convenience, to have the Clonezilla Live image available on local storage, without needing a USB stick, as is also the case with the other two systems. The primary goal will be to migrate D: Data to the new M.2 SSD, and enlarge the Windows partition.\n\nThanks for any thoughts.\n\n"
    },
    {
      "id": "218405",
      "timestamp": "2021-06-17T22:58:35+00:00",
      "author": "alacran",
      "content": "On usuall Bios or CSM mode boot the HD is MBR partitioned. HD max size is 2 TB. Max of 4 primary partitions or 3 primary partitions and a extended partition with multiple logical partitions.\n\nOn usuall UEFI boot the HD is GPT partitioned. No problem if HD is bigger than 2 TB. Many partitions are possible.\n\nThere is no advantage in UEFI + GPT unless your HD is bigger than 2 TB.\n\nThere are some tricks to boot on Bios or CSM mode from a GPT partitioned HD, but it is complicated and totally unnecessary in your case.\n\nIn your actual Bios or CSM mode boot you can add to bootable partition grld.mbr and grld files and create or edit your actual menu.lst, and (if you haven\u0027t done it) by means of [BootIce](http://reboot.pro/index.php?app\u003ddownloads\u0026showfile\u003d592 \"\") it is very easy to add an entry to boot from OS(s) on other primary or logical partitions or boot also grld.mbr from grub4dos v046a (for Bios), on your menu.lst you can make entries to boot from other OS(s), some ISO(s) or Ramboot Mini-VHD(s) files manually, or by means of [UEFI MULTI](http://reboot.pro/index.php?showtopic\u003d22254\u0026hl\u003d%2Buefi+%2Bmulti \"\") and/or [VHD_WIMBOOT](http://reboot.pro/index.php?showtopic\u003d21977\u0026hl\u003dvhd_wimboot \"\"), to create the respective entries automatically, both programs made by **wimb**.\n\nIn UEFI + GPT boot, you can\u0027t do same as on previous paragraph, as using UEFI + Secure Boot you can only boot Windows OS(s), in this case it is necessary to boot first to [grub2](http://reboot.pro/index.php?showtopic\u003d22429#entry217505 \"\") and from it load the Windows OS(s) or [grub4dos for UEFI](http://reboot.pro/index.php?showtopic\u003d22400\u0026hl\u003d%2Bgrub4dos+%2Bfor+%2Buefi \"\"), or dissable Secure Boot and boot directly to grub4dos for UEFI replacing the bootmgfw.efi with the respective \\*.efi file from grub4dos for UEFI renaming it to bootmgfw.efi, in UEFI + GPT case also same tools from **wimb** mentioned on previous paragraph will work to create the respective entries automatically.\n\nSo far I\u0027m using this version of [grub4dos v046a](http://dl.grub4dos.chenall.net/grub4dos-0.4.6a-2021-01-27.7z \"External link\") (for Bios) and there are no bugs in it.\n\nSo far I\u0027m using this version of [grub4dos for UEFI](http://dl.grub4dos.chenall.net/grub4dos-for_UEFI-2021-02-10.7z \"External link\") and there are no bugs in it.\n\nSo you have available alternatives to choose, but I strongly recommend keep Bios or CSM mode boot and MBR partitioned HD.\n\nalacran\n\n"
    },
    {
      "id": "218406",
      "timestamp": "2021-06-17T23:30:37+00:00",
      "author": "alacran",
      "content": "From a MBR partitioned disk having first primary partition active and FAT-32 formated, it is possible to boot OS(s) installed on other primary partitions as Bios/CSM or as UEFI, this approch is very used for USB devices to make them capables to boot both ways, see [USB Format Tool](http://reboot.pro/index.php?showtopic\u003d22254\u0026hl\u003d%2Buefi+%2Bmulti \"\") by wimb.\n\n**WARNING:** USB Format Tool fully erase all info on the disk before repartition it.\n\nalacran\n\n"
    },
    {
      "id": "218407",
      "timestamp": "2021-06-17T23:36:59+00:00",
      "author": "antonino61",
      "content": "My dear Alacr√°n, for a start pls let me o.t. as well. I wanna jump at the chance of telling you my findings on win11. did the same purging as I always do on win10, including my brute force sessions. I can tell u that over 90% of the reductions have worked, except registry1staid, which yields an unbootable version (probably as it dirupts the taskbar) and deviceremover (which does not even start). all cleaners work and wimb\u0027s reducer wants adjusting to the still cryptic win11 taskbar, but this is no major problem as customizable alternatives to win11 taskbar are to be expected in the months to come. overall, the system runs a little smoother and its space impact is a little lower than win10.\n\n"
    },
    {
      "id": "218408",
      "timestamp": "2021-06-17T23:47:25+00:00",
      "author": "alacran",
      "content": "You should not install or test unofficial versions of any OS, AFAIK that is a filtered version and who knows what kind of bugs and malware it can have.\n\nalacran\n\n"
    },
    {
      "id": "218409",
      "timestamp": "2021-06-17T23:51:11+00:00",
      "author": "antonino61",
      "content": "official versions will be even better, they say. btw, prio.exe is another one of the very few programs that do not work.\n\n"
    },
    {
      "id": "218410",
      "timestamp": "2021-06-18T00:09:26+00:00",
      "author": "Al Gorithm",
      "content": "Thanks for detailed post!\n\n\u003e There is no advantage in UEFI + GPT unless your HD is bigger than 2 TB.\n\nAnd I have no drives larger than 2TB (except in NAS, which is not of concern here).\n\n\u003e In your actual Bios or CSM mode boot you can add to bootable partition grld.mbr and grld files and create or edit your actual menu.lst, and (if you haven\u0027t done it) by means of [BootIce](http://reboot.pro/index.php?app\u003ddownloads\u0026showfile\u003d592 \"\") it is very easy to add an entry to boot from OS(s) on other primary or logical partitions or boot also grld.mbr from grub4dos v046a (for Bios), on your menu.lst you can make entries to boot from other OS(s), some ISO(s) or Ramboot Mini-VHD(s) files manually, or by means of [UEFI MULTI](http://reboot.pro/index.php?showtopic\u003d22254\u0026hl\u003d%2Buefi+%2Bmulti \"\") and/or [VHD_WIMBOOT](http://reboot.pro/index.php?showtopic\u003d21977\u0026hl\u003dvhd_wimboot \"\"), to create the respective entries automatically, both programs made by **wimb**.\n\nMy bootable partition is Windows 10 Professional x64 on C:, so grld.mbr and grld files would go in root of C:?\n\nThe desired boot choices are only two: Windows on C:, or Clonezilla Live image on E:. So menu.lst would contain two entries?\n\nAnd with those files in place, the system would still boot to Windows in the same way that it does now? And once there, I would enter some command to tell the system to reboot to some other partition? Or do I completely misunderstand?\n\n"
    },
    {
      "id": "218411",
      "timestamp": "2021-06-18T01:04:26+00:00",
      "author": "alacran",
      "content": "Assuming you installed Win in the usuall way, and you haven\u0027t changed the MBR to grub4dos, with the following info you will be able to boot directly to the Win OS(s) by Win boot files/folders, or from it load grld.mbr of grub4dos that will open menu.lst to select other options, which may include Win OS(s) or ISO(s) or Ramboot Mini VHD(s) etc.\n\n\u003e My bootable partition is Windows 10 Professional x64 on C:, so grld.mbr and grld files would go in root of C:?\n\nNo, that is in fact **Windows partition** or**System drive** , the bootable partition or **Boot drive** is the very first primary active partition (usually hidden and no drive letter assigned to it) where all boot files/folders reside, the one that MS incorrectly uses to name **System** or **System Reserved** (or **Reservado para el sistema**in Spanish), unless you omited its creation and put all together on same Windows partition (if that is the case see the EDIT), which is not usually very common during standard installation procedure. (but there are ways to do it).\n\nGo to Control panel, open Explorer options go to See tab, go to show hidden files and folders and select it, go to Hide OS protected files and uncheck it, acept the info in the opened message, make a click on acept or OK.\n\nNow open Disk management (%WinDir%\\\\System32\\\\diskmgmt.msc) and you can assing a letter to the **Boot drive** (I use S:) and now you can see all its content, there on the root of that S: partition/drive is where you should put grld.mbr and grld and menu.lst, and make desired changes in Windows boot menu located on S:\\\\Boot\\\\BCD by means of BootIce and/or UEFI_MULTI or VHD_WIMBOOT. After finish all the editions on menu.lst you can remove the S: drive letter if you want, but next time you need to edit menu.lst you will have to assing a letter to that partition again.\n\nDepending on the free espace available on S: you may add maybe a little ISO file that can be loaded by an entry in menu.lst but I prefer to locate all my ISO files on the folder **images** created for this pourpose on the partition dedicated to hold documents, downloads, etc., outside of the OS partition(s).\n\n**EDIT:** If after checking as mentioned, you really do not have a separate small first primary active partition to hold boot files/folders, and the partition holding the OS is the first primary active partition, in this case **Boot drive** and **Windows partition (** or**System drive)** arethe same partition, then put there grld.mbr + grld + menu.lst, it will not be any problem if doing it this way,\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![BootIce.png](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-60010400-1623980524_thumb.png)](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-60010400-1623980524.png \"BootIce.png - Size: 359.6KB\"){#ipb-attach-url-17850-0-83863200-1676066381}\n\n"
    },
    {
      "id": "218412",
      "timestamp": "2021-06-18T07:15:31+00:00",
      "author": "Wonko the Sane",
      "content": "To hopefully clarify the matter.\n\nThere are a number of programs that are boot managers (grub4dos is one of them, as well as GRUB, GRUB2, Syslinux, etc.) that double as boot loaders (often only for some, not all, OS\u0027s) and a number of OS specific boot loaders (such as NTLDR and BOOTMGR) that double as (very simple) boot managers.\n\nThe BIOS knows nothing about these programs, it simply reads the code in the MBR and executes that code.\n\nWhat you have right now is (Windows 10) BOOTMGR set as PRIMARY boot manager/boot loader, in the MBR you have code that loads the bootsector of the active partition on disk and executes the code on it, this code invokes BOOTMGR, and the code in BOOTMGR will read the settings in \\\\boot\\\\BCD (that right now only consist essentially in \"boot Windows 10\", so you have no multiple choices) and execute the choice you make.\n\nSo, at boot time:\n\nBIOS-\\\u003eMBR code-\\\u003eBootsector of Primary Active partiion (code that loads BOOTMGR)-\\\u003eBOOTMGR-\\\u003e\\\\boot\\\\BCD settings-\\\u003eyour choice (or default after timeout)\n\nAdding the grldr.mbr and grldr basically consists in adding a choice (bootable entry) to the \\\\boot\\\\BCD, so that you will have there two possible choices:\n\n1) Windows 10 (and you will boot exactly like you are doing now if you choose it)\n\n2) grub4dos/grldr (and then grldr will load the menu.lst and you will be able to choose among the entries in it)\n\nSo, in your specific case, you \\*need\\* only one entry/option in menu.lst (the one for Clonezilla), but of course you can add also an entry for Windows 10, this latter however will be more than anything else a \"go back\" as it will re-load the BOOTMGR and you will be again to the \\\\boot\\\\BCD choices between Windows 10 and grub4dos.\n\nThere are other ways (NOT recommended in your case) to install grub4dos as PRIMARY boot manager, in that case you need the two entries in grub4dos menu.lst (one for Windows 10 BOOTMGR and one for Clonezilla).\n\nIf you prefer, in the suggested setup, you won\u0027t \"touch\" grub4dos at all when booting Windows 10, and only load it when you choose to boot \\*something else\\*.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "218413",
      "timestamp": "2021-06-18T23:43:18+00:00",
      "author": "Al Gorithm",
      "content": "Thank you, @alacran and @Wonko. Yes, understood. In my No.2 and No.3 systems, one has as System Reserved partition, and the other does not. But my No.1 system (the one relevant to this discussion) does not. So now in C:\\\\, there is a Boot\\\\ directory, which contains a BCD file (which the system won\u0027t let me view).\n\nSo, then the Grub4DOS files would go in C:\\\\, as you said (in the root, I presume?). Once those files are there, what needs to be done next? Is it to use BootIce to edit BCD to add an entry for Grub4DOS?\n\nThanks for the boot sequence explanation. So as I understand it, once there are two choices in BCD, then every time I boot, I will need to select one of those two entries? The first will boot Windows just as it does now, and the second will run Grub4DOS (from C:\\\\, and therefore it is not required to have Grub4DOS in the E: partition boot sector?) which will display a menu, which I can then cause to run images from E:, such as Clonezilla Live, or GParted Live, or other?\n\nOr, if Grub4DOS was in the MBR, then at every boot there would be a Grub4DOS menu, from which to choose Windows on C:, or some live image from E:? But in either case, I would need to make a menu entry selection (or wait for a time-out) at every boot? If I have understood all of the above correctly, well and good, but if not please correct me.\n\nNow I would like to explain that on my No.2 and No.3 systems, the E: partition (with live images), is on a different physical drive than the System Partition (C:). Therefore, when one of those systems boots normally, I never have to see a menu or wait for a time-out; it simply starts Windows. When I want to run a live image, then at boot time I press F12 to enter the BIOS boot menu, and choose to boot from the second physical drive, which starts Grub4DOS.\n\nThat is the scenario I would like to achieve for system No.1, but it is complicated because C: and E: are on the same physical drive, and so the BIOS boot menu doesn\u0027t help in this case. But if set up as described above (with Grub4DOS either in C:, or in the MBR), and then if the time-out in the BCD menu in the first case, or the time-out in the Grub4DOS menu in the second case, was set to zero, then I would never have to make a selection or wait for the time-out.\n\nThe trick would be to change the menu\u0027s default, according to which way I wanted to boot next. So normally, it would always boot to Windows. When I wanted Clonezilla, I would run some Windows compatible executable (either command-line or graphical) in Windows, which would alter the menu\u0027s default to be Grub4DOS. And in the Grub4DOS menu, it would require some utility to once again set the default back to the Windows entry. I don\u0027t know if such utilities exist, or if that is asking too much, or if perhaps there is some alternative method?\n\n**Edited by Al Gorithm, 18 June 2021 - 11:46 PM.**\n"
    },
    {
      "id": "218415",
      "timestamp": "2021-06-19T03:45:01+00:00",
      "author": "alacran",
      "content": "\u003e But my No.1 system (the one relevant to this discussion) does not. So now in C:\\\\, there is a Boot\\\\ directory, which contains a BCD file (which the system won\u0027t let me view).\n\u003e\nAs previously said:\n\n\u003e Go to Control panel, open Explorer options go to See tab, go to show hidden files and folders and select it, go to Hide OS protected files and uncheck it, acept the info in the opened message, make a click on acept or OK.\n\nThen on C:\\\\ put grld.mbr, grld and menu.lst, and make desired changes in Windows boot menu located on \\\\Boot\\\\BCD by means of BootIce and/or UEFI_MULTI or VHD_WIMBOOT. After finish all the editions on menu.lst you can revert the changes made on Explorer options if you want.\n\n\u003e \u003cbr /\u003e\n\u003e\n\u003e So as I understand it, once there are two choices in BCD, then every time I boot, I will need to select one of those two entries? The first will boot Windows just as it does now, and the second will run Grub4DOS (from C:\\\\, and therefore it is not required to have Grub4DOS in the E: partition boot sector?) which will display a menu, which I can then cause to run images from E:, such as Clonezilla Live, or GParted Live, or other?\n\u003e\nOn your BCD menu, your 10 OS is the default boot option, and it will remain that way unless you change it, your only will add a new entry on it to load/run grld.mbr which will run grld and finnally load menu.lst with your desired options (when you select this option, all this is made almost instantaneously).  \n\nThe Timeout is the time (in seconds) you have available to boot from other than the default option, I suggest to change that to 10 or 5 seconds, your OS will always boot to the default option unless you select another option before the Timeout finish.\n\nSee the attached picture on my previous post.\n\nalacran\n\n"
    },
    {
      "id": "218416",
      "timestamp": "2021-06-19T06:44:30+00:00",
      "author": "Tokener",
      "content": "Hola alacran\n\nyour comment [#2](http://reboot.pro/index.php?showtopic\u003d22474#entry218405 \"\") is very interesting,\n\u003e\n\u003e boot directly to grub4dos for UEFI replacing the bootmgfw.efi with the**respective \\*.efi file** from grub4dos for UEFI renaming it to bootmgfw.efi\n\nmay I ask you: (If it\u0027s not off topic) What is the **respective\\*.efi file** in this case?\n\n"
    },
    {
      "id": "218417",
      "timestamp": "2021-06-19T08:06:09+00:00",
      "author": "alacran",
      "content": "No problem my friend.\n\nMaybe I didn\u0027t expressed the idea clearly unought, but I thought it was very obvious.\n\nBOOTIA32.EFI or BOOTX64.EFI are the two files from [grub4dos for UEFI](http://grub4dos.chenall.net/categories/for-UEFI/ \"External link\") that you can use to rename to bootmgfw.efi (depending on the OS architecture), replacing the \\\\EFI\\\\Microsoft\\\\Boot\\\\bootmgfw.efi file (it is a good practice to first rename the original file, \\[maybe as bootmgfw-original.efi\\] and not really replace it).\n\nalacran\n\n"
    },
    {
      "id": "218419",
      "timestamp": "2021-06-19T11:05:48+00:00",
      "author": "relynx",
      "content": "\u003e ...\n\u003e\n\u003e The trick would be to change the menu\u0027s default, according to which way I wanted to boot next. ...\n\n.\n\nAfter you\u0027ve managed to boot Grub4DOS from Win10 boot manager (bootmgr),  \nyou can try this:  \n\n1. Set **bootmgr** timeout (by *BootICE* or *EasyBCD* ) to 0.  \n\u003d\\\u003e boots directly to Windows 10 as default on start up;  \n\n2. In Windows 10: Start \\\u003e Power \\\u003e ***SHIFT*** **+** Restart \\\u003e other OS  \n\u003d\\\u003e boots into bootmgr menu to manually select Grub4DOS;\n\n**Edited by relynx, 19 June 2021 - 11:19 AM.**\n"
    },
    {
      "id": "218421",
      "timestamp": "2021-06-19T15:20:20+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Al Gorithm, on 19 Jun 2021 - 01:43 AM, said:  \n\u003e So, then the Grub4DOS files would go in C:\\\\, as you said (in the root, I presume?). Once those files are there, what needs to be done next? Is it to use BootIce to edit BCD to add an entry for Grub4DOS?\n\nThe grub4dos files (grldr, grldr.mbr and menu.lst) could go almost anywhere (on any disk/partition) but it is simpler to put them on the SAME disk and partition where you have your BOOTMGR and \\\\boot\\\\BCD (yes in root, again they may be put elsewhere, but keep it simple, at least until you get familiar with the tools and their usage).  \nAnd yes, Bootice will allow you to add an entry to the \\\\boot\\\\BCD invoking grldr.mbr.  \n\u003e Al Gorithm, on 19 Jun 2021 - 01:43 AM, said:  \n\u003e Thanks for the boot sequence explanation. So as I understand it, once there are two choices in BCD, then every time I boot, I will need to select one of those two entries? The first will boot Windows just as it does now, and the second will run Grub4DOS (from C:\\\\, and therefore it is not required to have Grub4DOS in the E: partition boot sector?) which will display a menu, which I can then cause to run images from E:, such as Clonezilla Live, or GParted Live, or other?\n\nYes, and no.  \nIn your case, you will likely boot 99% the Windows, so you can have it set (in boot\\\\BCD) as default (normally selected without any key press) with a short timeout (like 1 or 2 or 3 seconds, i.e. not too long as to not substantially alter your current booting time, but long enough to allow you the 1% of the time to use the arrow down key to select the \"other\" entry).  \nThis way \"normal\" boot (without any interaction will be exactly as you have it now (with a couple seconds pause added), while if you want to get to the grub4dos choices you need to pay attention at boot time and chose the grub4dos entry within the timeout.  \n\u003e Al Gorithm, on 19 Jun 2021 - 01:43 AM, said:  \n\u003e Or, if Grub4DOS was in the MBR, then at every boot there would be a Grub4DOS menu, from which to choose Windows on C:, or some live image from E:? But in either case, I would need to make a menu entry selection (or wait for a time-out) at every boot? If I have understood all of the above correctly, well and good, but if not please correct me.\n\nYes you got it right, BUT FORGET (for the moment) about installing grub4dos to the MBR (i.e. making it the PRIMARY bootmanager).  \n\u003e Al Gorithm, on 19 Jun 2021 - 01:43 AM, said:  \n\u003e Now I would like to explain that on my No.2 and No.3 systems, the E: partition (with live images), is on a different physical drive than the System Partition (C:). Therefore, when one of those systems boots normally, I never have to see a menu or wait for a time-out; it simply starts Windows. When I want to run a live image, then at boot time I press F12 to enter the BIOS boot menu, and choose to boot from the second physical drive, which starts Grub4DOS.\n\nWith all due respect, that approach makes little sense, for a couple reasons at least:  \n1) you have to \"know in advance\" what you want to boot when you switch on the machine (whilst the other way you always switch on the machine the same way and you can choose the \"other\" entry on-the-fly, of course if the timeout is very short, like 1 second, you need anyway to be attentive at boot time, personally 2 or 3 seconds are enough to make the choice and do not add to the normal booting sequence a noticeable delay).  \n2) when you boot via F12 (this may depend on the specific BIOS and/or OS booting) usually (but not always) the BIOS disk order is changed, and this is (IMHO) never a good idea, as it may result in some confusion/increased possibility of errors if dealing with the disk #  \n\u003e Al Gorithm, on 19 Jun 2021 - 01:43 AM, said:  \n\u003e That is the scenario I would like to achieve for system No.1, but it is complicated because C: and E: are on the same physical drive, and so the BIOS boot menu doesn\u0027t help in this case. But if set up as described above (with Grub4DOS either in C:, or in the MBR), and then if the time-out in the BCD menu in the first case, or the time-out in the Grub4DOS menu in the second case, was set to zero, then I would never have to make a selection or wait for the time-out.  \n\u003e\n\u003e The trick would be to change the menu\u0027s default, according to which way I wanted to boot next. So normally, it would always boot to Windows. When I wanted Clonezilla, I would run some Windows compatible executable (either command-line or graphical) in Windows, which would alter the menu\u0027s default to be Grub4DOS. And in the Grub4DOS menu, it would require some utility to once again set the default back to the Windows entry. I don\u0027t know if such utilities exist, or if that is asking too much, or if perhaps there is some alternative method?\n\nOnce said again that you don\u0027t want/need the complication of an installed grub4dos, it is of course trivial to edit from the booted windows the menu.lst (which is a simple text file) so that it behaves whichever way you want, whilst editing the (in use) \\\\boot\\\\BCD, while doable, is less trivial.  \n\nYou would need a small batch using BCDEDIT.  \nBUT the change (to the BCD or to the menu.lst) won\u0027t be \"temporary\", so you will need to also re-edit the \\\\boot\\\\BCD (or the menu.lst) back to the \"normal\" values once booted in the \"other\" OS.  \n\nYou could follow the simple and nice suggestion by relynx above to have a \"normal\" boot to windows with timeout 0 (and thus no choices) and a reboot to the other OS (more properly with access to choices, as you can still shift+restart and decide to go back to Windows).  \n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)  \nWonko\n\n"
    },
    {
      "id": "218423",
      "timestamp": "2021-06-19T19:43:44+00:00",
      "author": "cdob",
      "content": "\u003e In my BIOS boot-order, some devices show up twice: once as normal, and once as UEFI device; and the BIOS allows selection of either to boot from.\n\u003e\n\u003e Both systems are UEFI/GPT capable, but are configured as BIOS/MBR. Each is set to automatically boot C: on the SSD, unless F12 is used to enter the boot menu and select E: on the HDD, which boots Grub4DOS. All works fine.\n\n.  \nThere is a boot selection at UEFI/CSM machines. You use this already. This can be used in another way.  \n\nA BIOS\\\\UEFI firmware soluiton may be possible.  \nThere are different hardware. There wil be different results.  \nConfigure the hardware to boot at CSM and UEFI mode, disable secure boot. I understand, you use this setting already.  \n\nThere is a default UEFI boot file name  \n\\\\efi\\\\boot\\\\bootx64.efi  \n\nInstall Windows at BIOS MBR mode.  \nAdd a small FAT32 partition. Copy grub4dos UEFI to this partion \\\\efi\\\\boot\\\\bootx64.efi.  \n\nBoot the machine, press F12.  \nThe machine may detect a \\\\efi\\\\boot\\\\bootx64.efi at MBR internal disk. Or will miss it, e.g. search at a GPT disk only.  \nWhich boot menu entries do you get?\n\n.  \nBe aware, you may boot Clonezilla at UEFI mode.   \nBackup and restore the MBR partitons should be possible anyway.  \n\nIf the default UEFI boot file name fails, it may be possible to add a entry to the NVRAM.  \nThis boot setting is stored at the motherboard. This would be the next approach.\n\n"
    },
    {
      "id": "218429",
      "timestamp": "2021-06-19T21:25:56+00:00",
      "author": "Al Gorithm",
      "content": "@cdob, thanks very much. This is a direct answer to the original question. But this is somewhat over my head. I think I will try the other methods first, and come back to this method if necessary. Again, thanks.\n\n@Wonko, @alacran, and @relynx, thanks very much for your help. So, I placed grldr and grldr.mbr from [grub4dos v046a](http://dl.grub4dos.chenall.net/grub4dos-0.4.6a-2021-01-27.7z \"External link\") (from your link), and a simple menu.lst in C:\\\\, used BootIce to add an entry, and upon restart, I have a menu with the two entries. When I select the GRUB4DOS entry, GRUB4DOS does indeed boot and display its menu. But of course the menu entries don\u0027t yet do anything, since I haven\u0027t yet learned how to redirect those entries to image files on E: (a FAT32 partition).\n\nThen I tried placing grldr, grldr.mbr, and menu.lst in E:\\\\grub\\\\ (since it was said that they could be placed anywhere, and I thought to keep all the GRUB4DOS content together), and edited the BCD entry accordingly. But at boot when selecting this entry from the BCD menu, it gives an error (0xc000000d) that E:\\\\grub\\\\grldr.mbr could not be found or had an error. I tried setting the BCD entry both to BOOT(WIM)/LOCATE(VHD) (which came up by default), and to HD0 with Partition set to 5: (FAT32). But both ways resulted in the same error. What is wrong here?\n\nMeanwhile, I\u0027m studying the GRUB4DOS documentation that I can find, though many, many of the links found by searching, are now defunct.\n\n@relynx, thanks very much for your tip about SHIFT+restart, of which I was unaware, but I think it may prove an excellent help!\n\n"
    },
    {
      "id": "218433",
      "timestamp": "2021-06-20T07:34:29+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e @cdob, thanks very much. This is a direct answer to the original question. But this is somewhat over my head. I think I will try the other methods first, and come back to this method if necessary. Again, thanks.\n\u003e\n\u003e Meanwhile, I\u0027m studying the GRUB4DOS documentation that I can find, though many, many of the links found by searching, are now defunct.\n\nGet the \"basic\" (please read as \"good ol\u0027\") guide from the Wayback Machine:\n\n[https://web.archive....rub4dos_htm.zip](https://web.archive.org/web/20140901022828/http://diddy.boot-land.net/grub4dos/grub4dos_htm.zip \"External link\")\n\nTill now you are using grub4dos in a very basic manner, so all or most of what you need should already be there.\n\nThe guide is dated (i.e. newer gruib4dos versions have many added features and possibilities) but you should start from that one, then we will talk of the new possibilities,:\n\nAbout your issue with E:\\\\grub\\\\ path, you made **two** changes at the same time (changing the volume from C:\\\\ to E:\\\\ AND putting the files in a folder instead of in root), try with C:\\\\grub and with E:\\\\, it is one of the two that is creating the issue.\n\nYou should also experiment separating the grldr.mbr (that might \\*need\\* to be in root) from the actual grldr file (that may well go into a \\\\grub\\\\ subdirectory).\n\nIt is also possible that the issue is with the BOOTMGR and the E:\\\\ volume (as opposed to the C:\\\\ ), I don\u0027t seem to remember such a limitation, but it is well possible that the good MS guys continued making the BOOTMGR \"worse\" (in the sense of more limited for anything but their own OS) in Windows 10. (before it you could load grldr \"directly\" from BOOT.INI, instead of having to pass through grldr.mbr and everything was simpler).\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "218438",
      "timestamp": "2021-06-20T14:31:45+00:00",
      "author": "cdob",
      "content": "\u003e Then I tried placing grldr, grldr.mbr, and menu.lst in E:\\\\grub\\\\ (since it was said that they could be placed anywhere, and I thought to keep all the GRUB4DOS content together), and edited the BCD entry accordingly. But at boot when selecting this entry from the BCD menu, it gives an error (0xc000000d) that E:\\\\grub\\\\grldr.mbr could not be found or had an error.\n\nTry bcdedit to edit boot\\\\bcd. Run \u0027bcdedit.exe\u0027 and \u0027bcdedit.exe /v\u0027  \n\nBoth partition E: and partition locate does works here.\n\n```\n@ECHO OFF\n\ncall :add_bootsector E:\\grub\\grldr \"Start grub4dos\"\ngoto :eof\n\n:add_bootsector\n for /f \"tokens\u003d1-3\" %%a in (\u0027BCDedit.exe /create /application BOOTSECTOR\u0027) do set guid\u003d%%c\n rem BCDedit.exe /set %guid% device partition\u003d%~d1\n BCDedit.exe /set %guid% device locate\u003dcustom:12000002\n BCDedit.exe /set %guid% path %~pnx1\n BCDedit.exe /set %guid% description \"%~2\"\n BCDedit.exe /displayorder %guid% /addlast\ngoto :eof\n\n\nrem locate custom:12000002 search \"path\"\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "218454",
      "timestamp": "2021-06-20T23:30:32+00:00",
      "author": "Al Gorithm",
      "content": "Thanks. So, I copied grldr, grldr.mbr, and menu.lst to E:\\\\. All three now exist in C:\\\\, E:\\\\, and E:\\\\grub\\\\.\n\nI went to edit BCD, and I noticed that, as I previously mentioned, the BootIce \\[Boot Device\\] section has a Disk: selection with choice of either: BOOT/(WIM)/LOCATE(VHD) (I have no idea what that means), OR HD0 (my system drive); and a Partition: selection, which is empty when Disk: selection is the former, but when Disk: selection is the latter, I have chosen 5: (FAT32), which is my E:\\\\ partition. I previously tried both Disk: selections, but both gave the same error.\n\nBut, now I noticed that, as said, I had (in the \\[Options\\] section) set boot file: to E:\\\\grub\\\\grldr.mbr, and I thought, perhaps the E: is redundant, since it is already specified in the Disk: and Partition: selections above. So I removed the E: from the boot file: field, leaving just \\\\grub\\\\grldr.mbr, saved and rebooted. Sure enough, GRUB4DOS booted successfully. Hurrah! ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)\n\nNext, I will remove those three files from both C:\\\\ and E:\\\\, and leave them only in E:\\\\grub\\\\, and test to ensure that it runs successfully that way.\n\nBut, when I tried to run Clonezilla Live, it immediately gave an error about needing to update the microcode! Sorry, but there was no way to take a screenshot. After a lengthy delay, it finally said it would start a shell, because there was an error to the effect that it could not locate a filesystem or image to run. In the shell, I typed \u0027exit\u0027, which led to a kernel panic, and hung to the point I needed to use the reset button.\n\nSo I have no idea what\u0027s wrong here, but will provide what information I can. The 70GB E: drive contains:\n\nE:\\\\\n\n\\|--$RECYCLE.BIN\n\n\\|--grub\n\n\\| \\|--grub4dos-0.4.6a\n\n\\| \\| \\|--sample\n\n\\| \\| \\|--docs\n\n\\| \\|--ext\n\n\\|--images\n\n\\|--System Volume Information\n\n\\\\grub\\\\ contains the unzipped GRUB4DOS package (the grub4dos-0.4.6a\\\\ and ext\\\\ directories), as well as the three files grldr, grldr.mbr, and menu.lst.\n\n\\\\images\\\\ contains only the clonezilla-live-2.7.2-39-amd64.iso file.\n\nmenu.lst (copied from one of the other computers) contains menu entries for Restart and Shutdown, and the relevant Clonezilla menu entry is:\n\ntitle Clonezilla Live\\\\nClonezilla Live 2.7.2-39 manual mode.\\\\n\\\\n\\\\nPress arrows to highlight; ENTER or b to boot; e to edit; c for command-line.  \nfind --set-root /images/clonezilla-live-2.7.2-39-amd64.iso  \nmap /images/clonezilla-live-2.7.2-39-amd64.iso (0xff)  \nmap --hook  \nroot (0xff)  \nkernel /live/vmlinuz initrd\u003d/live/initrd.img boot\u003dlive union\u003doverlay live-config quiet noswap edd\u003don nomodeset keyboard-layouts\u003dNONE locales\u003den_US.UTF-8 vga\u003d789 utc\u003dno dhcp nosplash vmwgfx.enable_fbdev\u003d1 findiso\u003d/grub/images/clonezilla-live-2.4.7-8-amd64.iso live-media-path\u003d/live toram\u003dfilesystem.squashfs ocs_prerun\u003d\"timedatectl set-ntp off\" ocs_live_run\u003d\"ocs-live-general\" ocs_live_extra_param\u003d\"\" ocs_live_batch\u003d\"no\"  \ninitrd /live/initrd.img  \n\nMost of that doesn\u0027t mean anything to me just yet, but I suspect that the error lays somewhere in there.\n\nLikely off-topic question: is there *any way* to prevent Windows from *continually* re-creating the $RECYCLE.BIN and System Volume Information directories on this partition? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n"
    },
    {
      "id": "218455",
      "timestamp": "2021-06-21T00:24:58+00:00",
      "author": "alacran",
      "content": "I have to congratulate you, you have a very good skill to complicate the simple things.\n\nThere is un-needed to copy grldr, grldr.mbr, and menu.lst to every single drive you have.\n\nAbout BootIce just do it as per the image in my post [No. 8](http://reboot.pro/index.php?showtopic\u003d22474#entry218411 \"\"),\n\nThen glrd.mbr is found on the very first drive, it looks for grld (starting from first drive), which in turn looks for menu.lst (starting from first drive), so you DO NOT need to especify any drive as on my picture, all other instances of those files ARE NOT required and ARE NOT used in my suggested proposal.\n\nForget about all other opinions and suggestions here, do it as I said, **it is the simpler and easier way to do i**t, all other opinions are very good, but it is very clear you DO NOT have the knowledge neccessary to deal with them, as I assumed since the beginning based on your questions.\n\nGo to your PC where your want to make your Clonezilla work, see my pictures and do same thing on your OS, make pictures and keep them for future reference. They show you the partition numbers of each drive on the selected HD.\n\nOn grub4dos the first HD is (hd0) and the fisrt primary partition on that disk is (hd0,0), the second primary is (hd0,1) and so on up to (hd0,3) the last possible primary partition, the first logicall partition on the first HD is (hd0,4) and so on.\n\nThe second HD fisrt primary partition is (hd1,0).\n\nI assume you already have your Clonezilla on the drive where you want to boot from it, if not copy it there, copy your menu.lst that works fine on the other PC to the root of C: on the the PC that is not capable yet to boot Clonezilla.\n\nNow edit the copied menu.lst just changing the numbers corresponding to the drive and partition where Clonezilla is located. That should be all.  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![Select the drive.png](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-86325400-1624234206_thumb.png)](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-86325400-1624234206.png \"Select the drive.png - Size: 16.59KB\"){#ipb-attach-url-17861-0-83872000-1676066381}\n* [![Parts Manage.png](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-59519100-1624234232_thumb.png)](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-59519100-1624234232.png \"Parts Manage.png - Size: 15.64KB\"){#ipb-attach-url-17862-0-83878800-1676066381}\n* [![Partition Management.png](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-37474400-1624234247_thumb.png)](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-37474400-1624234247.png \"Partition Management.png - Size: 29.67KB\"){#ipb-attach-url-17863-0-83883600-1676066381}\n\n"
    },
    {
      "id": "218456",
      "timestamp": "2021-06-21T00:55:52+00:00",
      "author": "Al Gorithm",
      "content": "Quick update: had to copy grldr to root of E:; probably root of any drive would work, but it seems that grldr must be in root, even though other files may be in other directory.\n\nHad error in the menu command: the /images/ directory on this system is not in the /grub/ directory, as on other system. Corrected that, and now Clonezilla runs.\n\nOther questions in previous post still stand.\n\n"
    },
    {
      "id": "218457",
      "timestamp": "2021-06-21T09:48:47+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I have to congratulate you, you have a very good skill to complicate the simple things.\n\u003e\n\u003e There is un-needed to copy grldr, grldr.mbr, and menu.lst to every single drive you have.\n\u003e\n\u003e About BootIce just do it as per the image in my post [No. 8](http://reboot.pro/index.php?showtopic\u003d22474#entry218411 \"\"),\n\u003e\n\u003e Then glrd.mbr is found on the very first drive, it looks for grld (starting from first drive), which in turn looks for menu.lst (starting from first drive), so you DO NOT need to especify any drive as on my picture, all other instances of those files ARE NOT required and ARE NOT used in my suggested proposal.\n\u003e\n\u003e Forget about all other opinions and suggestions here, do it as I said, **it is the simpler and easier way to do i**t, all other opinions are very good, but it is very clear you DO NOT have the knowledge neccessary to deal with them, as I assumed since the beginning based on your questions.\n\u003e\n... and all this time I thought I was the grumpy one ... ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "218465",
      "timestamp": "2021-06-21T18:56:53+00:00",
      "author": "Al Gorithm",
      "content": "\u003e it is very clear you DO NOT have the knowledge neccessary to deal with them,  \n\nQuite right, I do not (yet) have the knowledge to deal with certain issues. Neither did you have such knowledge at some point in time, but you learned. Assuredly I do have the *skills* to deal with said issues, and I too will learn. It is not my intention to become an expert on these things, but to gain sufficient knowledge to know what I am doing, rather than just \"do it this way because I said so\".\n\nDon\u0027t get me wrong. I sincerely appreciate all of the great help given here by the regular forum members (including yourself) over the years to many, many people, and thank you all for it.\n\nAnd, I have already learned a few things, such as:\n\n1. GRUB4DOS will look for grldr only in the root of drives, and not in sub-directories.\n\n2. Setting the BCD timeout in BootIce does not seem to take effect. Even though it says it was successfully saved, when BootIce is restarted, the timeout seems to have reverted to 30 seconds.\n\n3. Even normally helpful forum members can have bad days! ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png)\n\n"
    },
    {
      "id": "218467",
      "timestamp": "2021-06-21T20:54:05+00:00",
      "author": "alacran",
      "content": "On the left part of BootIce below the rectangle you can change the boot order or add new entries, etc. including set your prefered Timeout.\n\nTo make this changes take effect you need to make a click on **Save Globals** before closing that window, **See attached picture.**\n\nI didn\u0027t have a bad day, I tried to explain you in accordance with your knowledge level, then other members came to make good suggestions, some of them very good bot not so simple, requiring a few more deeper knowledge, unnecesary by the way to solve your simple request to boot Clonezilla.\n\nThat comment you quoted, in no way had any irrespectul meaning from my part, it is a fact, and it is also a fact that you are about the same level I was before becoming a member of this forum, any knowledge I may have now, was lerned here on **reboot.pro** forum and on [**MSFN** forum](https://msfn.org/board/ \"External link\").\n\nBut first thing I learned is follow the instructions by the letter, forgetting any previous preconceived ideas I had. To verify by myself if that instuctions work fine or not.\n\nThen if there are other alternative ways to get the desired result, maybe try them also, but one by one, not mixing the procedures.\n\nYour friend\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![Timeout.png](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-00873200-1624308841_thumb.png)](http://reboot.pro/uploads/monthly_06_2021/post-26560-0-00873200-1624308841.png \"Timeout.png - Size: 71.57KB\"){#ipb-attach-url-17867-0-83888100-1676066381}\n\n"
    },
    {
      "id": "218469",
      "timestamp": "2021-06-21T21:15:07+00:00",
      "author": "Al Gorithm",
      "content": "Hi @alacran. Thanks, I didn\u0027t know one needed to **Save Globals** for the timeout. I will try that next. Right now, Clonezilla is performing an image backup. ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)\n\nIn the BCD boot menu options section, there is an option to change the timeout, but it only allows three selections: 5 minutes, 30 seconds, or 5 seconds. I\u0027ll find out next whether BootIce can (successfully) set other values (including zero!), after Clonezilla is done.\n\n"
    },
    {
      "id": "218471",
      "timestamp": "2021-06-21T21:39:16+00:00",
      "author": "alacran",
      "content": "Yes, using BootIce you can select any time you want including zero, zero is NOT recommended because in case of troubles (OS not loading fine) you will not be able to boot any other option to reinstall your backup image, unless you boot from a USB stick or a CD/DVD.\n\nI use usually 10 seconds, but you may try 5 or 2 seconds, in my experience 1 second is not enough.\n\n**EDIT:** Also when you see the boot options, and you want to boot the default option, by ENTER key on keyboard it starts booting without waiting the Timeout.\n\nalacran\n\n"
    },
    {
      "id": "218472",
      "timestamp": "2021-06-21T21:49:31+00:00",
      "author": "Al Gorithm",
      "content": "Clonezilla having completed successfully, I used BootIce to change the timeout to zero, and am pleased to report that a restart resulted in booting to Windows, without seeing the BCD boot menu; and that Shift+Restart resulted in the BCD boot menu (one extra selection now necessary in this menu, in order to choose GRUB4DOS, which is no problem). Excellent, and thanks to all for the help in achieving this! ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)\n\nHaving done the above before your last post, but having now seen your post, I now changed the timeout to a short (non-zero) value, as you recommended.\n\nAlso, I decided to change my boot procedure on system no. 2 (the one with the System Reserved partition) to use the BCD boot menu, rather than the F12 BIOS boot order, as was suggested in this thread. I found out that on this system, grldr had to be in the root of C: in order to work; in the root of E: didn\u0027t work for some reason.\n\nDoes anyone have any thoughts on preventing Windows from continually re-creating the $RECYCLE.BIN and System Volume Information directories on a particular partition?\n\n"
    },
    {
      "id": "218474",
      "timestamp": "2021-06-21T22:11:54+00:00",
      "author": "alacran",
      "content": "Good to know all is working as you want.\n\nAbout:\n\u003e\n\u003e Does anyone have any thoughts on preventing Windows from continually re-creating the $RECYCLE.BIN and System Volume Information directories on a particular partition?\n\n$RECYCLE.BIN is a safe precaution, it is re-created by the OS always, but to permanently delete a file or folder keep pressed Shift Key and then delete the file/folder.\n\nI have **System Volume Information** folder deleted on my Mini VHDs and it is not re-created again just by adding a zero bytes file named same way (no extension) hidden and write protected (only readable), but for Wimboot installations that folder is required, for more info see this [Post](http://reboot.pro/index.php?showtopic\u003d22376\u0026page\u003d2#entry216344 \"\"). (Also all post mentioned in it).\n\nalacran\n\n"
    },
    {
      "id": "218477",
      "timestamp": "2021-06-22T03:41:21+00:00",
      "author": "Guest_AnonVendetta_*",
      "content": "Why the hell are you people messing with System Volume Information?! I\u0027ve never seen its\u0027 contents use more than a few KILOBYTES of space. I dont use System Restore, so that\u0027s probably why. I also dont use Windows\u0027 built in search functions, so the index file in SVI never has a chance to get big. Unless you use these 2 functions, the size shouldnt increase dramatically. Seriously, just let it be, you\u0027re getting peanuts back by deleting it. Normal people arent booting from MB disks anymore, now we have GB/TB disks.  \n\nAs for Recycle Bin, you can configure the amount of space it uses by right clicking on it. I just set it to a small value like 100MB for each volume. There\u0027s probably also a Registry entry too.   \n"
    },
    {
      "id": "218478",
      "timestamp": "2021-06-22T06:14:44+00:00",
      "author": "alacran",
      "content": "On older than 10 OS the System Volume Information folder stores System Restore, Volume Shadow Copy, and content-indexing files.\n\nAnd now on 10 it also contain Tracking Service info, dubious service that may be considered as a malware if you care about your privacy.\n\nAfter some time of OS use this folder may growup to a 10% or more of drive size (a big waste of space).\n\nNone of this is used on my OSs:\n\n* I alwas have System Restore disabled, I make periodically my own backups with [Wimlib-clc](http://reboot.pro/topic/21861-wimlib-clc/ \"\") and are ready to restore any time.\n* I don\u0027t care about Volume Shadow Copy as I prefer to make my backup images from a WinPE (faster and more reliable).\n* Indexing is also disabled as I use [SwiftSearch](https://sourceforge.net/projects/swiftsearch/ \"External link\") (faster and do not require to index files/folders).\n* You can\u0027t dissable Tracking Service, but it can not store anything if System Volume Information folder do not exists.\n\nI use to delete that folder and replace it with the mentioned zero bytes file, every time I format a partition/drive, internal or USB, just copying the zero bytes file before the folder is created (usually it appears after first reboot or replug of USB device).\n\nIn the case of Mini VHDs the waste of the space used by this folder is more critical than in standard installation, but it is requiered if you install the OS on Wimboot mode, there is stored all the info related to the linked WIM file.\n\nIt is preferable to replace the folder with the zero bytes file before install the OS (or re-deploy your backup WIM file), if done after the OS is installed and booted at least once, the OS may run a disk repair procedure on first boot after deletion/replacement, this is not repeated on future boots but it is something that may not like to some users.\n\nWell, now you have all the info, decide by yourself.\n\nalacran\n\n"
    },
    {
      "id": "218479",
      "timestamp": "2021-06-22T07:15:19+00:00",
      "author": "Guest_AnonVendetta_*",
      "content": "It\u0027s weird that you say 10 uses it to store tracking info. Because i\u0027ve been using 10 since 2015-ish and have never seen anything in this folder besides an index file and a volume GUID file...that\u0027s it. Even if it does use it to keep tracking info, you can be sure that SVI isnt the ONLY place on C drive that stores this kind of thing. Come now, MS is smarter than that, you didnt really think you would beat them at their game so easily...right?  \n\nBesides this, I run Linux in a VM if i want to do stuff that involves sensitive data (banking, online purchases, Web browsing, etc). At least I\u0027m reasonably sure that Linux doesnt track me. I\u0027m not looking at kiddy porn anyway, so even if MS knows what I do, none of it is a criminally indictable offense or incriminating.   \n"
    },
    {
      "id": "218481",
      "timestamp": "2021-06-22T07:45:18+00:00",
      "author": "alacran",
      "content": "As said:\n\n\u003e \u003cbr /\u003e\n\u003e\n\u003e Well, now you have all the info, decide by yourself.\n\u003e\nBut it may be good to take a look to this link to have an idea how big the wasted space can be in a usual installation:\n\n[Windows 10: System Volume Information more than 100GB on new PC](https://www.windowsphoneinfo.com/threads/system-volume-information-more-than-100gb-on-new-pc.456121/ \"External link\")\n\nalacran\n\n"
    }
  ]
}