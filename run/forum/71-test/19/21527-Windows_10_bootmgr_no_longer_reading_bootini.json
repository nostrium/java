{
  "id": "21527",
  "title": "Windows 10 bootmgr no longer reading boot.ini",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "203648",
      "timestamp": "2017-05-22T22:33:52+00:00",
      "author": "Uneitohr",
      "content": "Hello! I\u0027ve been testing the new bootmgr versions from Windows 10 images, Multiple Editions and Enterprise. The bootmgr from multi editions and enterprise have different checksums, and suprisingly none of them support boot.ini. The last known working edition is from windows 8.1.\n\nHere\u0027s my issue of which i\u0027d appreciate your guidance:\n\nMy USB drive is setup as: BOOTMGR -\\\u003e BOOT.INI -\\\u003e GRUB4DOS/POP\n\nNow, In order for my VHDs to boot, I need bootmgr from windows 10. If I have bootmgr from 10, I no longer have boot.ini, and thus loose grub4dos and plop.\n\nWhat could I do to have the best compatibility with VHDs and boot.ini?\n\nThank you!\n\n"
    },
    {
      "id": "203655",
      "timestamp": "2017-05-23T08:46:20+00:00",
      "author": "DarknessAngel",
      "content": "You can boot other bootloader from \u0027bootmgr\u0027 by \u0027.mbr\u0027 file\n\n"
    },
    {
      "id": "203656",
      "timestamp": "2017-05-23T10:01:14+00:00",
      "author": "Uneitohr",
      "content": "\u003e You can boot other bootloader from \u0027bootmgr\u0027 by \u0027.mbr\u0027 file\n\nSo, bootmgr could boot grldr.mbr ? Or just rename grldr to grldr.mbr?\n\n"
    },
    {
      "id": "203657",
      "timestamp": "2017-05-23T11:03:12+00:00",
      "author": "Wonko the Sane",
      "content": "Have you set the \"advanced boot options\"?\n\n[https://www.tenforum...ndows-10-a.html](https://www.tenforums.com/tutorials/22455-enable-disable-f8-advanced-boot-options-windows-10-a.html \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "203659",
      "timestamp": "2017-05-23T11:13:22+00:00",
      "author": "steve6375",
      "content": "You can boot via BCD to grldr\n\n[http://www.rmprepusb...os_from_bootmgr](http://www.rmprepusb.com/tutorials/grub4dos_from_bootmgr \"External link\")\n\n"
    },
    {
      "id": "203666",
      "timestamp": "2017-05-23T18:25:45+00:00",
      "author": "alacran",
      "content": "@ Alexander Ceed\n\nJust add grldr.mbr on same partition as bootmanager and using [BootIce](http://www.ipauly.com/ \"External link\") create a new BCD entry to load grldr.mbr, then assuming you already have grldr and menu.lst, thats all, (But you better update to a newer version).\n\nSteve6375 recommended grub4dos-0.4.6a-2017-05-15 on this post:\n\n[http://reboot.pro/to...im/#entry203580](http://reboot.pro/topic/21518-use-firadisk-without-injecting-it-to-bootwim/#entry203580 \"\")\n\ngrub4dos downloads: [http://grub4dos.chen...ries/downloads/](http://grub4dos.chenall.net/categories/downloads/ \"External link\")\n\n"
    },
    {
      "id": "203673",
      "timestamp": "2017-05-24T14:21:36+00:00",
      "author": "Uneitohr",
      "content": "Thank you!\n\n"
    },
    {
      "id": "203677",
      "timestamp": "2017-05-24T18:03:22+00:00",
      "author": "Uneitohr",
      "content": "One more thing guys. The Windows 10 bootmgr no longer sees my VHDs now. I have one Windows 10 VHD and is not seeing the entry. All other entries are displayed expect this.\n\nHere\u0027s a picture in bootice of the entry:\n\n[http://h.dropcanvas....5-24_210034.png](http://h.dropcanvas.com/wzmit/2017-05-24_210034.png \"External link\")\n\n"
    },
    {
      "id": "203678",
      "timestamp": "2017-05-24T18:37:31+00:00",
      "author": "steve6375",
      "content": "You need to specify the disk, partition and path to VHD\n\nalso you have winloade.exe - is it MBR booting and MBR BCD or UEFI BCD???\n\n"
    },
    {
      "id": "203679",
      "timestamp": "2017-05-24T18:47:40+00:00",
      "author": "Uneitohr",
      "content": "It\u0027s MBR boot, and MBR bcd. I double checked this. But the path is relative, it\u0027s on the same drive as bootmgr. On windows 8.1 this config works, as seen in the picture.\n\n"
    },
    {
      "id": "203680",
      "timestamp": "2017-05-24T19:17:42+00:00",
      "author": "steve6375",
      "content": "Same partition as bootmgr?? Was VHD in root last time?\n\n"
    },
    {
      "id": "203681",
      "timestamp": "2017-05-24T21:00:48+00:00",
      "author": "Uneitohr",
      "content": "Let me try to explain this another way: the config shown in the picture, works for bootmgr of Windows 8.1, exactly as it is. In windows 10 bootmgr it doesn\u0027t work and I don\u0027t know why.\n\n"
    },
    {
      "id": "203682",
      "timestamp": "2017-05-24T21:03:08+00:00",
      "author": "alacran",
      "content": "@ Alexander Ceed\n\nJust diferent code on Bootmanger and how it reads BCD (MS calls it improvement, not me).\n\nAlso you better check your partition lay out, 10 may have created new partitions at the very beginning of disk.\n\nThen follow steve6375 advice:\n\u003e\n\u003e You need to specify the disk, partition and path to VHD\n\nThis should work fine.\n\nalacran\n\n"
    },
    {
      "id": "203683",
      "timestamp": "2017-05-24T21:25:42+00:00",
      "author": "Uneitohr",
      "content": "They changed something in bootmgr 10 that just isn\u0027t working with old bcd configs.\n\nI\u0027m using an HDD with two partitions, one active and bootable of 137GB NTFS and the other for data, also NTFS.\n\nThe disk MBR/PBR codes are as follows:\n\n[http://h.dropcanvas.com/emzwx/disk.png](http://h.dropcanvas.com/emzwx/disk.png \"External link\")\n\n[http://h.dropcanvas....x/partition.png](http://h.dropcanvas.com/emzwx/partition.png \"External link\")\n\nI don\u0027t get it. Only the vhd entries are not listed, all the others like grub4dos or WIM are listed and working.\n\n"
    },
    {
      "id": "203684",
      "timestamp": "2017-05-24T21:55:32+00:00",
      "author": "steve6375",
      "content": "Maybe a problem with BootIce? Can you use BCDEdit to add in the VHD using Locate?\n\n"
    },
    {
      "id": "203685",
      "timestamp": "2017-05-24T23:17:50+00:00",
      "author": "nguyentu",
      "content": "It looks like the VHD\u0027s menus will not show up in Legacy BIOS mode. Try UEFI. This also happened to me.\n\n"
    },
    {
      "id": "203686",
      "timestamp": "2017-05-24T23:39:16+00:00",
      "author": "Uneitohr",
      "content": "I was using an older version of bootice and that\u0027s why it didn\u0027t work. However, now it shows the entry but outputs the error **0xc00000bb BCD cannot find a required file.**\n\n"
    },
    {
      "id": "203687",
      "timestamp": "2017-05-25T00:44:02+00:00",
      "author": "nguyentu",
      "content": "I use the bcdedit command but nothing changes, the menus are only visible on UEFI mode.\n\n"
    },
    {
      "id": "203688",
      "timestamp": "2017-05-25T02:35:32+00:00",
      "author": "devdevadev",
      "content": "\u003e I was using an older version of bootice and that\u0027s why it didn\u0027t work. However, now it shows the entry but outputs the error **0xc00000bb BCD cannot find a required file.**\n\nTry latest version from pauly\u0027s site and that should work as expected...\n\n[http://www.ipauly.co.../11/15/bootice/](http://www.ipauly.com/2015/11/15/bootice/ \"External link\")\n\n"
    },
    {
      "id": "203692",
      "timestamp": "2017-05-25T10:05:18+00:00",
      "author": "Uneitohr",
      "content": "I think the latest one is 1.3.4, from here [http://bbs.wuyou.net...hread\\\u0026tid\u003d57675](http://bbs.wuyou.net/forum.php?mod\u003dviewthread\u0026tid\u003d57675 \"External link\")\n\n"
    },
    {
      "id": "203693",
      "timestamp": "2017-05-25T11:46:06+00:00",
      "author": "Uneitohr",
      "content": "Found the issue. I spent 6 hours for this crap ![:angry:](http://reboot.pro/public/style_emoticons/default/mad.gif) . Apparently, the DVD folders for boot and EFI are not the same as the ones from a real installation of windows. Thus, I was missing the file bootvhd.dll and causded all VHD entries to be disabled. C:\\\\windows\\\\system32\\\\boot did not help either. There are different timestamps and hashes on them.\n\nNow everything works.\n\n"
    },
    {
      "id": "203694",
      "timestamp": "2017-05-25T11:53:04+00:00",
      "author": "nguyentu",
      "content": "Where did you get and put bootvhd.dll?\n\n"
    },
    {
      "id": "207747",
      "timestamp": "2018-09-17T10:16:10+00:00",
      "author": "wimb",
      "content": "Booting from VHD in BIOS mode requires to add file **bootvhd.dll** from folder **C:\\\\Windows\\\\Boot\\\\PCAT** to your Boot folder on USB.\n\nThis is automatically done when using **bcdboot.exe** in admin cmd window to add new boot entry for BCD file.\n\nFor support of **BIOS** and **UEFI** mode booting you need to do this for **BCD** files in **boot** and **efi\\\\microsoft\\\\boot** folder on FAT32 boot drive and using mounted file VHD (located on NTFS partition).\n\n**BOOTICE** does not add the required **bootvhd.dll** file ..... :wink:\n\n**BOOTICE** New entry in **BCD for BIOS** booting contains in **Application Path** wrongly **winload.efi** whereas it should be **winload.exe** for **BIOS** mode booting. ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)\n\n"
    }
  ]
}