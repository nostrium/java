{
  "id": "21687",
  "title": "ramloading Windows 10 vhd-core",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "205761",
      "timestamp": "2018-01-22T18:58:06+00:00",
      "author": "nino61",
      "content": "title W10 VHD RAM  \nmap --mem (hd0,0)/WXLT.vhd (hd0)  \nmap --hook  \nroot (hd0,0)  \nfind --set-root --ignore-floppies /bootmgr  \nchainloader /bootmgr  \n\nI have adopted this policy for years. My vhd (which is anyway faster than an ordinary machine deployment scenario on conventional booting) is only 5gb big. how? program files, program files (x86), program data, users and most of windows (exept for those subdirs that the system requires on c:\\\\ (the vhd) to arrive at the desktop interface) reside elsewhere, in d: (you will have twigged it is the physical 1st disk) and are junction-linked to c:\\\\. So, persistence is not an issue to me, unless I have to install new software, which I always do on a conventional system loading basis; nor is it preloading time an issue, as it preloads in about 6-7 secs. I also use 20gb of my ram for temp and swap (4gb (for any of those stupid programs that actually require it) with primoramdisk) and other 20gb committed to read\\\u0026write cache (primocache, which speeds up disk writing after the Windows built-in caching takes care of everything). I insist on booting off a vhd-residing core as it is the best way of having it almost unchanged in size and content, as anything new practically takes place outside of it. The steady-core vhd contains what windows seems to need to find in it in order to arrive at the interface; whatever is strictly application-bound and consequently prone to change stays outside of it. I might change windows version, but the software I use is still the same, so I do not see why it should be \"bundled\" into that specific windows software architecture. Let us consider it an extended form of relocation. The only slight issue that I have been able to keep track of is that bootup process diagnostics shows that the system persists on looking for a couple of system files on c:\\\\, without this being of practical hindrance to arriving at the windows interface. I perceive a less snappy initial bootup stage (the starred circle rotating underneath the logo at the beginning), though, probably due to the above glitch. Is there anything I can do to improve? So far, neither from the registry (cannot delete entries) nor from the windows events (I really do not know how to) have I managed to redirect the system to most of the files it insists on looking for (which are expected to be on the vhd and are in fact softlinked to it from the SSD). Any suggestions on how to redress the windows grievance and give it a smoother bootup?\n\nI am looking forward to yuor learned suggestions.  \nNino\n\n"
    },
    {
      "id": "205784",
      "timestamp": "2018-01-22T20:43:56+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e title W10 VHD RAM  \n\u003e map --mem (hd0,0)/WXLT.vhd (hd0)  \n\u003e map --hook  \n\u003e root (hd0,0)  \n\u003e find --set-root --ignore-floppies /bootmgr  \n\u003e chainloader /bootmgr\n\u003e\nAre you booting from the \\\\BOOTMGR inside the .vhd? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nIf yes, then you don\u0027t need to find anything, i.e. this would do:\n\u003e\n\u003e title W10 VHD RAM  \n\u003e map --mem (hd0,0)/WXLT.vhd (hd0)  \n\u003e map --hook  \n\u003e root (hd0,0)  \n\u003e chainloader /bootmgr\n\nNow, if you actually LIST the \"couple of files\" you are having issues with, that might help.\n\nGenerally speaking (not necessarily your case, mind you) softlinks are not \"instantaneous\", they depend on the filesystem driver (and the softlink related filter driver, cannot say if it is self-standing or integrated in the filesystem/volume driver in Windows 10) so it is possible that in the earlier part of booting they are not available.\n\nIf this is the case ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif) it is possible that the slowdown you noticed is not really due to the files residing on the SSD (which is anyway very, very fast) but rather the OS that while booting performs some desperate search for a file that is not (yet) where it believes it to be.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "205793",
      "timestamp": "2018-01-22T22:33:55+00:00",
      "author": "nino61",
      "content": "Wonko,  \ntitle W10 VHD RAM  \nmap --mem (hd0,0)/WXLT.vhd (hd0)  \nmap --hook  \nroot (hd0,0)  \nchainloader /bootmgr  \nthe \"ignore-floppies\" line I added it just yesterday, in the attempt to speed up preloading, as I must have profanely understood that the process would somehow be sped up by \"ignoring what was not needed\" (e.g. floppies). If it is totally ineffective, I will certainly remove it and restore it to the original sequence. Concerning bootmgr location, since I started ramloading vhds I have always had two of them, one on the actual SSD and the other inside the vhd, both together with their boot directories (bcdboot #:\\\\windows /s #:, you know what I mean). The few times I deleted bootmgr and its directory from the SSD root, I never got it to boot after the preloading stage. If you tell me how to boot it with bcd in vhd only, I will act accordingly. From reading the past literature here I think one of you said that in order to start the process, bcd has to be found in the ssd and then in a next stage the activities would be transferred to the bootmgr inside. If you mean that I boot directly from the vhd in such a way than my answer is yes, but I very much doubt it. I hope I am wrong anyway.  \nTalking about the couple of files glitches, as I have always suspected, @the slowdown I noticed is not really due to the files residing on the SSD (which is anyway very, very fast) but rather the OS that while booting performs some desperate search for a file that is not (yet) where it believes it to be@. As for those files that were unavailable in the earlier part of the booting, I had quite a few system lockups and BSODs before I found out which files could be safely \"exported\" to the SSD and which not for the system to complete its process to the interface. But if you say that this still does not mean that the system is not better off having them available asap, tell me if it could still be \"oriented\" or \"shown\" to them when it wants them or if they and only they should be brought back inside the vhd. Smartfix 1.5.9 with the autorun selection found the following \"couple of files\" unavailable to the system:  \n\\\\Microsoft\\\\Windows\\\\rempl\\\\shell File not found: C:\\\\Program Files\\\\rempl\\\\remsh.exe\n\n_Wow64 File not found: C:\\\\Windows\\\\SysWoW64\\\\Wow64.dll\n\n_Wow64cpu File not found: C:\\\\Windows\\\\SysWoW64\\\\Wow64cpu.dll\n\n_Wow64win File not found: C:\\\\Windows\\\\SysWoW64\\\\Wow64win.dll\n\nAny ideas that you can think of?\n\nThanx in advance.\n\nNino\n\n**Edited by nino61, 22 January 2018 - 10:38 PM.**\n"
    },
    {
      "id": "205795",
      "timestamp": "2018-01-23T10:23:14+00:00",
      "author": "Wonko the Sane",
      "content": "It is not yet clear (to me at least) how exactly the whole thing boots.\n\nThere should be no issues if you have no \\\\bootmgr or \\\\boot\\\\BCD on the SSD (as long as you have some way to load/boot to grub4dos.\n\nAs said it is likely that \\*somehow\\* you are booting in some form of \"mixed mode\" where a part of the needed boot files are actually in the .VHD loaded n RAM while a few (that are looked for there by the OS) cannot be found and thus the OS tries to find them \\*somewhere\\*, very probably on the \"plain\" hosting Disk drive/SSD.\n\nAt first sight the Wow64 should be related to the Windows 32 bit support subsystem so they shouldn\u0027t (at least in theory) be accessed during the early boot stage.\n\nThe rempl\\\\shell is more likely to be accessed early, if I get it right it is connected with scheduled tasks and computer \"wake up\".\n\nI have really no idea what SmartFix does (i.e. if it is accurate enough to detect the issue), it is more likely that it is doing a \"static\" analysis of the filesystem and those files you found are actually missing (they may actually slow down booting, but for a different reason from the one I guessed earlier).\n\nWhat happens if you create a boot log? (no idea how it works/which level of details it has on Windows 10)\n\nThe next step would be a system trace.\n\nThe problem with it is that while making one is (relatively) easy (please read as \"complex, but doable\"), analyzing the result is actually complex/difficult:\n\n[https://msfn.org/boa...ernates-slowly/](https://msfn.org/board/topic/158252-trace-why-windows-8-boots-shutsdown-or-hibernates-slowly/ \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "205886",
      "timestamp": "2018-01-26T06:39:26+00:00",
      "author": "nino61",
      "content": "Wonko,\n\nI guess I just put a foot on my mouth: the missing files were actually missing from the directories they were supposed to be; something musta gone wrong during the file \"transfers\" from vhd to ssd. Once I placed them in the right directories, the system saw them even thru the softlinks and Smartfix did not detect them as missing anymore. Probably the syswoa directory is better off inside the vhd, speedwise I mean. As regards the rest, I have tried the system with and without primocache, and I can tell u that speed is noticeably higher with it than without it. What I have not yet been able to achieve is the boot thru grub4dos without the bootfiles being on the ssd as well (it loads and in the end it yields a bsod saying Inaccessible Boot device).\n\nNino\n\n"
    },
    {
      "id": "205887",
      "timestamp": "2018-01-26T09:26:18+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e What I have not yet been able to achieve is the boot thru grub4dos without the bootfiles being on the ssd as well (it loads and in the end it yields a bsod saying Inaccessible Boot device).\n\nI am not sure to understand.\n\nWHICH boot files?\n\nThe boomgr (and conversely the \\\\boot\\\\BCD) used in your menu.lst seem to be loaded from the .vhd, which after the map --hook command becomes first disk or (hd0) just fine. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nThe grldr and menu.lst normally need to be somewhere accessible, but there is the possibility of using an unused space on disk, if you can use a \"particular\" MBR code, or use a \"Vista boot floppy image\" (though this has some issues with hybernate and with updates, which in your case of full RAM don\u0027t have any consequences anyway).\n\nThe info is here and there on this seemingly unrelated thread:\n\n[http://reboot.pro/to...in-bios-to-gpt/](http://reboot.pro/topic/19516-hack-bootmgr-to-boot-windows-in-bios-to-gpt/ \"\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "205908",
      "timestamp": "2018-01-26T19:09:38+00:00",
      "author": "nino61",
      "content": "Wonko,\n\nwhen you say somewhere accessible, do you mean inside the vhd or on the host ssd? I have boot bcd and bootmgr inside the vhd and menu.lst and grub4dos ouside on the host ssd. Is that correct?\n\nnino\n\n"
    },
    {
      "id": "206049",
      "timestamp": "2018-02-04T11:24:03+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Wonko,\n\u003e\n\u003e when you say somewhere accessible, do you mean inside the vhd or on the host ssd? I have boot bcd and bootmgr inside the vhd and menu.lst and grub4dos ouside on the host ssd. Is that correct?\n\u003e\n\u003e nino\n\nSure, that is \"correct\" and \"normal\". :smile:\n\nBut - I believe - you are using \\*something else\\* as a \"main\" bootmanager (possibly another instance of BOOTMGR and \\\\boot\\\\BCD for a \"resident\" other install of Windows).\n\nDepending on a number of factors you may be able to put also the grldr inside the .vhd using the UMBR and thus a \"static\", mapping of the file, but in that case there are a couple of caveats:\n\n1) you cannot move the .vhd, nor defragment it (internally)\n\n2) if you use the UMBR as your main MBR then the mapped grldr will become the \"main\" bootmanager (but of course you can chainload \\*anything\\* else from it)\n\n3) you will need to edit the embedded menu.lst in the grldr adding to it the provisions for the .vhd booting\n\nIf you are using another BOOTMGR and \\\\boot\\\\BCD on the SSD it could be possible (never tried/tested it) to chainload the UMBR from the \\\\boot\\\\BCD, but all in all I don\u0027t think that it is worth the hassle.\n\nOn the other hand, even if finding and loading the menu.lst is usually very fast, editing the embedded one will allow to get rid of the file (the menu.lst) and shave a few milliseconds from booting time, though what remains the biggest time consuming activities will remain the loading of the .vhd in memory and that cannot be reduced.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "206059",
      "timestamp": "2018-02-04T16:30:17+00:00",
      "author": "nino61",
      "content": "Wonko,\n\nI honestly don\u0027t know what UMBR is? All I know is that I have bootmgr and bcd on and off the vhd. For normal vhd baremetal booting I was never asked for the one inside; conversely, for pre-ramloading booting, if I do not have it inside the vhd, at the end of the preloading session I get a BOSD saying inaccessible winload.exe or something of the kind. And as far as I have tried so far, the absence of boot and bcd on the host results in the system\u0027s failing to boot. boot and bcd were preemptied (if any previously) and re-created through bcdboot c:\\\\windows /s c:\\\\ and bcdboot c:\\\\windows /s d:\\\\. If you spot anything wrong in my operation and description, pls do not hesitate to tell me and I will try to right the wrong.\n\nnino\n\n"
    },
    {
      "id": "206065",
      "timestamp": "2018-02-04T17:30:34+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Wonko,\n\u003e\n\u003e I honestly don\u0027t know what UMBR is?\n\nSure you don\u0027t, it is not like the most publicized feature around, in the already given thread:\n\n[http://reboot.pro/to...in-bios-to-gpt/](http://reboot.pro/topic/19516-hack-bootmgr-to-boot-windows-in-bios-to-gpt/ \"\")\n\nnamely here:\n\n[http://reboot.pro/to...-11#entry197690](http://reboot.pro/topic/19516-hack-bootmgr-to-boot-windows-in-bios-to-gpt/page-11#entry197690 \"\")\n\nbut you will need to read a bit on the thread to understand the reason why (and when/where) it may be useful.\n\nAnyway it wouldn\u0027t be an \"improvement\", while editing the embedded menu.lst might be ( a very marginal anyway) one.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "206490",
      "timestamp": "2018-03-21T06:25:12+00:00",
      "author": "Coclend",
      "content": "Thanks for your info\n\n"
    },
    {
      "id": "209218",
      "timestamp": "2019-02-09T05:01:27+00:00",
      "author": "quarky42",
      "content": "nino, did you do anything to the Windows 10 bootmgr to be able to load it from grub4dos? I feel like I\u0027m missing something here.\n\nI have Windows 10 x64 running inside HyperV with:\n\nTestMode ON and DetectHAL ON.\n\nfiradisk is installed and shows \"device ok\" in the device manager.\n\nMy system has 64GB of RAM. My image is just a hair under 16GB. (In fact a year ago, I had this working...I\u0027m trying to set it up again from scratch and running into problems after the bootmgr takes over and it sounds like you have yours running well. Can you give me an idea of what I can check next?)\n\nMy menu.lst:  \n\n```\nmap --mem (hd0,0)/Win10x64Ent.vhd (hd0)\nmap --hook \nrootnoverify (hd0,0)\nchainloader /bootmgr\n```\n\nWhen I step through the menu.lst I don\u0027t have any errors. The Windows 10 bootmgr takes over, sits on the spinning circle for about 15 seconds and eventually gives me a blue screen with a INACCESSIBLE BOOT DEVICE message.  \nBCDEDIT says:  \n\n```\nWindows Boot Manager\n--------------------\nidentifier              {bootmgr}\ndevice                  partition\u003d\\Device\\HarddiskVolume1\ndescription             Windows Boot Manager\nlocale                  en-US\ninherit                 {globalsettings}\ndefault                 {current}\nresumeobject            {82b54cbf-2c04-11e9-b51e-00155d5d6b02}\ndisplayorder            {current}\ntoolsdisplayorder       {memdiag}\ntimeout                 30\n\n\nWindows Boot Loader\n-------------------\nidentifier              {current}\ndevice                  partition\u003dC:\npath                    \\WINDOWS\\system32\\winload.exe\ndescription             Windows 10\nlocale                  en-US\ninherit                 {bootloadersettings}\nrecoverysequence        {2e530078-2bfc-11e9-afdd-9c2d2e857889}\ndisplaymessageoverride  Recovery\nrecoveryenabled         Yes\ntestsigning             Yes\nallowedinmemorysettings 0x15000075\nosdevice                partition\u003dC:\nsystemroot              \\WINDOWS\nresumeobject            {82b54cbf-2c04-11e9-b51e-00155d5d6b02}\nnx                      OptIn\nbootmenupolicy          Standard\ndetecthal               Yes\n```\n\nIt seems like the bootmgr from the hidden partition is being run properly but it can\u0027t find the Windows partition. I don\u0027t think this is a grub4dos problem and I don\u0027t think it is a firadisk issue, but I\u0027m not sure what is left. Thanks for any insight you might be able to give in how you got the Windows 10 bootmgr to cooperate.\n\nHow many partitions do you have in your VHD file? Mine has two...the hidden boot partition and the main windows partition. Did you modify the bootmgr / bcd files? Thanks for your time.\n\n"
    },
    {
      "id": "209219",
      "timestamp": "2019-02-09T07:42:11+00:00",
      "author": "antonino61",
      "content": "I have only one partition on my vhd (mbr, not gpt). your menu.lst entries look fine. I am not sure u can have it working on a uefi basis without tweaks or glitches. anyway, before u do anything else, try bcdboot c:\\\\windows /s c: from an administrator-level command line from the root directory of your vhd. I presume u will have to change c: in the command into some other letter, as u presumably will not yet have been able to mount it as c:\n\nI hope I have made myself understood.\n\nnino\n\n"
    },
    {
      "id": "209220",
      "timestamp": "2019-02-09T07:51:46+00:00",
      "author": "wimb",
      "content": "I think you should use **root** instead of rootnoverify.\n\n[http://diddy.boot-la...tm#rootnoverify](http://diddy.boot-land.net/grub4dos/files/commands.htm#rootnoverify \"External link\")\n\nAlso in BCD you need to set bootmenupolicy **Legacy**\n\nMore Info on Grub4dos FiraDisk menu [http://reboot.pro/to...-grub/?p\u003d208797](http://reboot.pro/topic/21917-boot-windows-8-vhd-with-grub/?p\u003d208797 \"\")\n\n[http://reboot.pro/to...ct-make-mini-8/](http://reboot.pro/topic/18467-vhd-w8-compact-make-mini-8/ \"\")\n\nAlso you should use **MBR** VHD with **one** NTFS partition.\n\nYou can use WinNTSetup for Install of Win10 in VHD as described in\n\nNo Pagefile and Hibernate Off is also important so that the VHD is not entangled to the outside ....\n\nMount the VHD and use BOOTICE Professional mode to inspect or modify the Boot\\\\BCD file inside your VHD.\n\nDoes the drive letter in Application Device and OS Device corresponds to the drive letter of the mounted VHD ?\n\nIf you see there \\\u003cUnknown\\\u003e then you need to make changes ...\n\n**testsigning** and detecthal need to be set **yes** which is already OK in your case.\n\nHow about using Win10XPE WIM file for [booting from RAMDISK](https://msfn.org/board/topic/121446-install-from-usb-after-booting-with-wim-or-vhdx/?do\u003dfindComment\u0026comment\u003d1159506 \"External link\") ?\n\n"
    },
    {
      "id": "209221",
      "timestamp": "2019-02-09T08:38:19+00:00",
      "author": "quarky42",
      "content": "\u003e I have only one partition on my vhd (mbr, not gpt). your menu.lst entries look fine. I am not sure u can have it working on a uefi basis without tweaks or glitches. anyway, before u do anything else, try bcdboot c:\\\\windows /s c: from an administrator-level command line from the root directory of your vhd. I presume u will have to change c: in the command into some other letter, as u presumably will not yet have been able to mount it as c:  \n\u003e I hope I have made myself understood.  \n\u003e nino\nMine is mbr. The first partition is hidden and contains the boot folder, BCD file and the bootmgr in the root. I am able to boot windows 10 to hyperv directly with no problem. It is only when I boot the vhd through grub4dos that I get the behavior described above. I have tried both root and rootnoverify. No difference in behavior. I\u0027ll still with root going forward. I do have a working vhd elsewhere I can dissect to try and find out why it works and why this one I tried to create fresh doesn\u0027t, too.  \n\nI have a number of things to try thanks to you and wimb. Thank you both.  \n\nI do have the page file and hiberfile turned off already.  \n\nI\u0027ll try the other stuff and see what I can figure out. Thanks.   \n\n**Edited by quarky42, 09 February 2019 - 08:45 AM.**\n"
    },
    {
      "id": "209222",
      "timestamp": "2019-02-09T09:24:50+00:00",
      "author": "Wonko the Sane",
      "content": "As a side note, another thing that you may want to try nowadays is to replace Firadisk with the new SVBUS driver by Schtrom:\n\n[http://reboot.pro/to...r-for-grub4dos/](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/ \"\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209223",
      "timestamp": "2019-02-09T10:19:50+00:00",
      "author": "antonino61",
      "content": "is it any better?\n\n"
    },
    {
      "id": "209224",
      "timestamp": "2019-02-09T12:56:46+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e is it any better?\n\nI don\u0027t know ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif) , but **you** *should*, since you tested it and reported it as working first as ramdisk only, and then also as filedisk on that very same thread:\n\n[http://reboot.pro/to...r-for-grub4dos/](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/ \"\")\n\nLoosely, the whole idea of that driver is that Windows 10 has some new behaviour that may (or may not) affect the working of older drivers (namely WinVblock, but possibly also Firadisk) expecially when used as filedisk on largish (20 Gb reported) .vhd images (explanation from the Author):\n\n[http://reboot.pro/to...b4dos/?p\u003d207138](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d207138 \"\")\n\nSo, yes, I would say that it is \"better\" specifically when booting Windows 10 from largish .vhd\u0027s.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209225",
      "timestamp": "2019-02-09T14:35:04+00:00",
      "author": "wimb",
      "content": "\u003e As a side note, another thing that you may want to try nowadays is to replace Firadisk with the new SVBUS driver by Schtrom:\n\u003e\n\u003e [http://reboot.pro/to...r-for-grub4dos/](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/ \"\")\n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\u003e\n\u003e Wonko\n\nI have used WinNTSetup to Install Win10x86 in 10 GB VHD located in 3rd partition of MBR harddisk.\n\nAfter booting I used Instx86.exe to Install SVBus in VHD\n\nI can MBR boot with Grub4dos the 10 GB W10x86.vhd file as SVBus FILEDISK\n\nBut for booting from Grub4dos as SVBus RAMDISK, then I get in Grub4dos\n\nversion grub4dos-0.4.6a-2018-12-23.7z using command\n\n```\nmap --mem (hd0,2)/W10x86.vhd (hd0)\n\n```\n\n**Error 28 Selected item cannot fit into memory**\n\nMy Computer has 16 GB RAM, so I thought it might work ....\n\nOn same system I can boot Win7x32.vhd of size 2 GB using Grub4dos and FiraDisk RAMDISK driver.\n\nWhat is the solution ?\n\n[![WinNTSetup-2019-02-09_140126.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-44142800-1549722799_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-44142800-1549722799.png \"WinNTSetup-2019-02-09_140126.png - Size: 399.11KB\"){#ipb-attach-url-16406-0-46916100-1676066409} \u003d\u003d [![SVBus-FILEDISK-2019-02-09_150106.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-41223800-1549722824_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-41223800-1549722824.png \"SVBus-FILEDISK-2019-02-09_150106.png - Size: 557.9KB\"){#ipb-attach-url-16407-0-46931300-1676066409} \u003d\u003d [![Win7x32-VHD-FiraDisk-RAMDISK-2019-02-09_152104.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-00370500-1549722847_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-00370500-1549722847.png \"Win7x32-VHD-FiraDisk-RAMDISK-2019-02-09_152104.png - Size: 496.13KB\"){#ipb-attach-url-16408-0-46941100-1676066409} \u003d\u003d [![Win10-RAM-2019-02-09_153845.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-39814900-1549723173_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-39814900-1549723173.png \"Win10-RAM-2019-02-09_153845.png - Size: 12.05KB\"){#ipb-attach-url-16409-0-46949300-1676066409}\n\n"
    },
    {
      "id": "209226",
      "timestamp": "2019-02-09T16:29:33+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I have used WinNTSetup to Install Win10x86 in 10 GB VHD located in 3rd partition of MBR harddisk.\n\u003e\n\u003e After booting I used Instx86.exe to Install SVBus in VHD\n\u003e\n\u003e I can MBR boot with Grub4dos the 10 GB W10x86.vhd file as SVBus FILEDISK\n\u003e\n\u003e But for booting from Grub4dos as SVBus RAMDISK, then I get in Grub4dos\n\u003e\n\u003e version grub4dos-0.4.6a-2018-12-23.7z using command\n\u003e\n\u003e ```\n\u003e\n\u003e map --mem (hd0,2)/W10x86.vhd (hd0)\n\u003e\n\u003e ```\n\u003e\n\u003e **Error 28 Selected item cannot fit into memory**\n\u003e\n\u003e My Computer has 16 GB RAM, so I thought it might work ....\n\u003e\n\u003e On same system I can boot Win7x32.vhd of size 2 GB using Grub4dos and FiraDisk RAMDISK driver.\n\u003e\n\u003e What is the solution ?\n\nNo ideas, though this:\n\u003e On same system I can boot Win7x32.vhd of size 2 GB using Grub4dos and FiraDisk RAMDISK driver.\n\u003e\nis totally irrelevant (from a common sense point of view).\n\nTry using the SAME size (or the same file) for Win7x32.vhd with SVBUS (both as filedisk and ramdisk) AND try using the SAME size (or the same file) W10x86.vhd with firadisk and Winvblock (both as filedisk and ramdisk) and THEN you will have something to compare.\n\nHowever, since the error happens long before the windows driver (be it Firadisk, WinvBlock or SVBUS) is used It could well be that there is something that prevents grub4dos (on your specific motherboard or the specific version of grub4dos) to see more than (say) 4 (or 8) GB of RAM.\n\nI will repeat how the Author of the driver developed it expressly in order to use largish VHD\u0027s with Windows 10 in it as Ramdisk, and I trust him it is working, you could post your questions in a new thread or in the original release thread (hoping that he will see it) or try contacting him via PM or the like.\n\nJFYI and for the record (as if you didn\u0027t know this) I use the SAME stick I used to NOT touch Vista to NOT touch Windows 10 and - being the old dinosaur I am - I have never seen 16 Gb of RAM all in a same computer, so you got the wrong person to ask this question, sorry.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209227",
      "timestamp": "2019-02-09T16:36:13+00:00",
      "author": "wimb",
      "content": "It has nothing to do with the driver Or with the Win7 / Win10 OS.\n\nEven if I use Grub4dos to load various empty VHD\u0027s into memory, then the size is limited to 2 GB max.\n\n3, 4 and 6 GB VHD all fail to load into memory allthough I have 16 GB available as RAM\n\nI am going to test now other Grub4dos version.\n\nWhat version do you prefer to test ?\n\n"
    },
    {
      "id": "209228",
      "timestamp": "2019-02-09T17:02:44+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e What version do you prefer to test ?\n\nSince the SVBUS driver was originally released in June 2018. I would try versions that were available a bit before that time, \\*like\\*:\n\n[http://grub4dos.chen....6a-2018-04-23/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.6a-2018-04-23/ \"External link\")\n\nBUT Misty (who is very reliable in his reports) posted (in November):\n\n[http://reboot.pro/to...b4dos/?p\u003d208333](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d208333 \"\")\n\nthat he had success with \"FULL\" Windows 7 (presumably waaay larger than 2 GB) on his Lenovo Thinkpad W530 with 32 GB of RAM as a Ramdisk, so another that you could try could be:\n\n[http://grub4dos.chen....6a-2018-09-19/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.6a-2018-09-19/ \"External link\")\n\nOr maybe go all the way back to 0.4.5c:\n\n[http://grub4dos.chen....5c-2016-01-18/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.5c-2016-01-18/ \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209229",
      "timestamp": "2019-02-09T17:43:51+00:00",
      "author": "wimb",
      "content": "\u003e Since the SVBUS driver was originally released in June 2018. I would try versions that were available a bit before that time, \\*like\\*:\n\u003e\n\u003e [http://grub4dos.chen....6a-2018-04-23/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.6a-2018-04-23/ \"External link\")\n\u003e\n\u003e BUT Misty (who is very reliable in his reports) posted (in November):\n\u003e\n\u003e [http://reboot.pro/to...b4dos/?p\u003d208333](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d208333 \"\")\n\u003e\n\u003e that he had success with \"FULL\" Windows 7 (presumably waaay larger than 2 GB) on his Lenovo Thinkpad W530 with 32 GB of RAM as a Ramdisk, so another that you could try could be:\n\u003e\n\u003e [http://grub4dos.chen....6a-2018-09-19/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.6a-2018-09-19/ \"External link\")\n\u003e\n\u003e Or maybe go all the way back to 0.4.5c:\n\u003e\n\u003e [http://grub4dos.chen....5c-2016-01-18/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.5c-2016-01-18/ \"External link\")\n\u003e\nThanks for your suggested versions of grub4dos to be tested in RAM loading my 10 GB file. ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)\n\nThe last one [grub4dos-0.4.5c-2016-01-18](http://grub4dos.chenall.net/downloads/grub4dos-0.4.5c-2016-01-18/ \"External link\") is working OK and all others fail in loading the 10 GB VHD into memory.\n\nBut anyway the good news is that I have got W10x86.vhd booting from SVBus RAMDISK and also as SVBus FILEDISK :smile:\n\n[![SVBus-RAMDISK-2019-02-09_182726.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-50441000-1549734215_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-50441000-1549734215.png \"SVBus-RAMDISK-2019-02-09_182726.png - Size: 618.78KB\"){#ipb-attach-url-16410-0-46956900-1676066409}\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n```\ntitle W10x86-VHD - RAMDISK\nfind --set-root --ignore-floppies /W10x86.vhd\nmap --mem /W10x86.vhd (hd0)\nmap --hook\nrootnoverify (hd0,0)\nchainloader (hd0)+1\n\ntitle W10x86-VHD - FILEDISK\nfind --set-root --ignore-floppies /W10x86.vhd\nmap /W10x86.vhd (hd0)\nmap --hook\nrootnoverify (hd0,0)\nchainloader (hd0)+1\n\n\n```\n\nMisty is [using here](http://reboot.pro/topic/21905-grub4dos-and-gpt-support/?p\u003d208505 \"\") and Vortex [here](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d206978 \"\") GRUB4DOS 0.4.5c 2016-01-18 for loading VHD into RAM\n\n"
    },
    {
      "id": "209230",
      "timestamp": "2019-02-10T00:01:54+00:00",
      "author": "antonino61",
      "content": "I did actually report svbus as being good, even better than firadisk, at loading vhds either into ram or as filedisks. My report was stricto sensu confined to that. As soon as I saw that vhds loaded as filedisk did not retain changes to win install, I no longer saw any point in keeping on using svbus to load vhds as filedisks, and limited myself to using it only on a preramloading basis, which is exactly what I have always done with firadisk, with no issues. From that point on, i found no practical advantages of either one on the other. Sorry for not updating my report any earlier than I have done right now.\n\nnino\n\n**Edited by antonino61, 10 February 2019 - 12:03 AM.**\n"
    },
    {
      "id": "209232",
      "timestamp": "2019-02-10T15:45:32+00:00",
      "author": "Wonko the Sane",
      "content": "@wimb\n\n\\*Somehow\\* we must find a way to alert chenall or yaya about the issue, from your report it seems like the 0.4.6a introduced some changes that prevent grub4dos from working properly (as the last 0.4.5c version does).\n\nUsually the \"communication officer\" is Steve6375 that (since he is usually using the latest-latest version in his Easy2Boot *et similia*) might be anyway interested in the matter.\n\nIf we don\u0027t see in a couple days a sign that Steve6375 noticed this thread, it might be the case of PM\u0027ing him.\n\n@antonino61\n\nUnless I missed it, you never specified the size of the .vhd\u0027s you experimented with, if they are below or around 2 GB most probably it doesn\u0027t make any difference.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "205761",
      "timestamp": "2018-01-22T18:58:06+00:00",
      "author": "nino61",
      "content": "title W10 VHD RAM  \nmap --mem (hd0,0)/WXLT.vhd (hd0)  \nmap --hook  \nroot (hd0,0)  \nfind --set-root --ignore-floppies /bootmgr  \nchainloader /bootmgr  \n\nI have adopted this policy for years. My vhd (which is anyway faster than an ordinary machine deployment scenario on conventional booting) is only 5gb big. how? program files, program files (x86), program data, users and most of windows (exept for those subdirs that the system requires on c:\\\\ (the vhd) to arrive at the desktop interface) reside elsewhere, in d: (you will have twigged it is the physical 1st disk) and are junction-linked to c:\\\\. So, persistence is not an issue to me, unless I have to install new software, which I always do on a conventional system loading basis; nor is it preloading time an issue, as it preloads in about 6-7 secs. I also use 20gb of my ram for temp and swap (4gb (for any of those stupid programs that actually require it) with primoramdisk) and other 20gb committed to read\\\u0026write cache (primocache, which speeds up disk writing after the Windows built-in caching takes care of everything). I insist on booting off a vhd-residing core as it is the best way of having it almost unchanged in size and content, as anything new practically takes place outside of it. The steady-core vhd contains what windows seems to need to find in it in order to arrive at the interface; whatever is strictly application-bound and consequently prone to change stays outside of it. I might change windows version, but the software I use is still the same, so I do not see why it should be \"bundled\" into that specific windows software architecture. Let us consider it an extended form of relocation. The only slight issue that I have been able to keep track of is that bootup process diagnostics shows that the system persists on looking for a couple of system files on c:\\\\, without this being of practical hindrance to arriving at the windows interface. I perceive a less snappy initial bootup stage (the starred circle rotating underneath the logo at the beginning), though, probably due to the above glitch. Is there anything I can do to improve? So far, neither from the registry (cannot delete entries) nor from the windows events (I really do not know how to) have I managed to redirect the system to most of the files it insists on looking for (which are expected to be on the vhd and are in fact softlinked to it from the SSD). Any suggestions on how to redress the windows grievance and give it a smoother bootup?\n\nI am looking forward to yuor learned suggestions.  \nNino\n\n"
    },
    {
      "id": "205784",
      "timestamp": "2018-01-22T20:43:56+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e title W10 VHD RAM  \n\u003e map --mem (hd0,0)/WXLT.vhd (hd0)  \n\u003e map --hook  \n\u003e root (hd0,0)  \n\u003e find --set-root --ignore-floppies /bootmgr  \n\u003e chainloader /bootmgr\n\u003e\nAre you booting from the \\\\BOOTMGR inside the .vhd? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nIf yes, then you don\u0027t need to find anything, i.e. this would do:\n\u003e\n\u003e title W10 VHD RAM  \n\u003e map --mem (hd0,0)/WXLT.vhd (hd0)  \n\u003e map --hook  \n\u003e root (hd0,0)  \n\u003e chainloader /bootmgr\n\nNow, if you actually LIST the \"couple of files\" you are having issues with, that might help.\n\nGenerally speaking (not necessarily your case, mind you) softlinks are not \"instantaneous\", they depend on the filesystem driver (and the softlink related filter driver, cannot say if it is self-standing or integrated in the filesystem/volume driver in Windows 10) so it is possible that in the earlier part of booting they are not available.\n\nIf this is the case ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif) it is possible that the slowdown you noticed is not really due to the files residing on the SSD (which is anyway very, very fast) but rather the OS that while booting performs some desperate search for a file that is not (yet) where it believes it to be.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "205793",
      "timestamp": "2018-01-22T22:33:55+00:00",
      "author": "nino61",
      "content": "Wonko,  \ntitle W10 VHD RAM  \nmap --mem (hd0,0)/WXLT.vhd (hd0)  \nmap --hook  \nroot (hd0,0)  \nchainloader /bootmgr  \nthe \"ignore-floppies\" line I added it just yesterday, in the attempt to speed up preloading, as I must have profanely understood that the process would somehow be sped up by \"ignoring what was not needed\" (e.g. floppies). If it is totally ineffective, I will certainly remove it and restore it to the original sequence. Concerning bootmgr location, since I started ramloading vhds I have always had two of them, one on the actual SSD and the other inside the vhd, both together with their boot directories (bcdboot #:\\\\windows /s #:, you know what I mean). The few times I deleted bootmgr and its directory from the SSD root, I never got it to boot after the preloading stage. If you tell me how to boot it with bcd in vhd only, I will act accordingly. From reading the past literature here I think one of you said that in order to start the process, bcd has to be found in the ssd and then in a next stage the activities would be transferred to the bootmgr inside. If you mean that I boot directly from the vhd in such a way than my answer is yes, but I very much doubt it. I hope I am wrong anyway.  \nTalking about the couple of files glitches, as I have always suspected, @the slowdown I noticed is not really due to the files residing on the SSD (which is anyway very, very fast) but rather the OS that while booting performs some desperate search for a file that is not (yet) where it believes it to be@. As for those files that were unavailable in the earlier part of the booting, I had quite a few system lockups and BSODs before I found out which files could be safely \"exported\" to the SSD and which not for the system to complete its process to the interface. But if you say that this still does not mean that the system is not better off having them available asap, tell me if it could still be \"oriented\" or \"shown\" to them when it wants them or if they and only they should be brought back inside the vhd. Smartfix 1.5.9 with the autorun selection found the following \"couple of files\" unavailable to the system:  \n\\\\Microsoft\\\\Windows\\\\rempl\\\\shell File not found: C:\\\\Program Files\\\\rempl\\\\remsh.exe\n\n_Wow64 File not found: C:\\\\Windows\\\\SysWoW64\\\\Wow64.dll\n\n_Wow64cpu File not found: C:\\\\Windows\\\\SysWoW64\\\\Wow64cpu.dll\n\n_Wow64win File not found: C:\\\\Windows\\\\SysWoW64\\\\Wow64win.dll\n\nAny ideas that you can think of?\n\nThanx in advance.\n\nNino\n\n**Edited by nino61, 22 January 2018 - 10:38 PM.**\n"
    },
    {
      "id": "205795",
      "timestamp": "2018-01-23T10:23:14+00:00",
      "author": "Wonko the Sane",
      "content": "It is not yet clear (to me at least) how exactly the whole thing boots.\n\nThere should be no issues if you have no \\\\bootmgr or \\\\boot\\\\BCD on the SSD (as long as you have some way to load/boot to grub4dos.\n\nAs said it is likely that \\*somehow\\* you are booting in some form of \"mixed mode\" where a part of the needed boot files are actually in the .VHD loaded n RAM while a few (that are looked for there by the OS) cannot be found and thus the OS tries to find them \\*somewhere\\*, very probably on the \"plain\" hosting Disk drive/SSD.\n\nAt first sight the Wow64 should be related to the Windows 32 bit support subsystem so they shouldn\u0027t (at least in theory) be accessed during the early boot stage.\n\nThe rempl\\\\shell is more likely to be accessed early, if I get it right it is connected with scheduled tasks and computer \"wake up\".\n\nI have really no idea what SmartFix does (i.e. if it is accurate enough to detect the issue), it is more likely that it is doing a \"static\" analysis of the filesystem and those files you found are actually missing (they may actually slow down booting, but for a different reason from the one I guessed earlier).\n\nWhat happens if you create a boot log? (no idea how it works/which level of details it has on Windows 10)\n\nThe next step would be a system trace.\n\nThe problem with it is that while making one is (relatively) easy (please read as \"complex, but doable\"), analyzing the result is actually complex/difficult:\n\n[https://msfn.org/boa...ernates-slowly/](https://msfn.org/board/topic/158252-trace-why-windows-8-boots-shutsdown-or-hibernates-slowly/ \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "205886",
      "timestamp": "2018-01-26T06:39:26+00:00",
      "author": "nino61",
      "content": "Wonko,\n\nI guess I just put a foot on my mouth: the missing files were actually missing from the directories they were supposed to be; something musta gone wrong during the file \"transfers\" from vhd to ssd. Once I placed them in the right directories, the system saw them even thru the softlinks and Smartfix did not detect them as missing anymore. Probably the syswoa directory is better off inside the vhd, speedwise I mean. As regards the rest, I have tried the system with and without primocache, and I can tell u that speed is noticeably higher with it than without it. What I have not yet been able to achieve is the boot thru grub4dos without the bootfiles being on the ssd as well (it loads and in the end it yields a bsod saying Inaccessible Boot device).\n\nNino\n\n"
    },
    {
      "id": "205887",
      "timestamp": "2018-01-26T09:26:18+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e What I have not yet been able to achieve is the boot thru grub4dos without the bootfiles being on the ssd as well (it loads and in the end it yields a bsod saying Inaccessible Boot device).\n\nI am not sure to understand.\n\nWHICH boot files?\n\nThe boomgr (and conversely the \\\\boot\\\\BCD) used in your menu.lst seem to be loaded from the .vhd, which after the map --hook command becomes first disk or (hd0) just fine. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nThe grldr and menu.lst normally need to be somewhere accessible, but there is the possibility of using an unused space on disk, if you can use a \"particular\" MBR code, or use a \"Vista boot floppy image\" (though this has some issues with hybernate and with updates, which in your case of full RAM don\u0027t have any consequences anyway).\n\nThe info is here and there on this seemingly unrelated thread:\n\n[http://reboot.pro/to...in-bios-to-gpt/](http://reboot.pro/topic/19516-hack-bootmgr-to-boot-windows-in-bios-to-gpt/ \"\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "205908",
      "timestamp": "2018-01-26T19:09:38+00:00",
      "author": "nino61",
      "content": "Wonko,\n\nwhen you say somewhere accessible, do you mean inside the vhd or on the host ssd? I have boot bcd and bootmgr inside the vhd and menu.lst and grub4dos ouside on the host ssd. Is that correct?\n\nnino\n\n"
    },
    {
      "id": "206049",
      "timestamp": "2018-02-04T11:24:03+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Wonko,\n\u003e\n\u003e when you say somewhere accessible, do you mean inside the vhd or on the host ssd? I have boot bcd and bootmgr inside the vhd and menu.lst and grub4dos ouside on the host ssd. Is that correct?\n\u003e\n\u003e nino\n\nSure, that is \"correct\" and \"normal\". :smile:\n\nBut - I believe - you are using \\*something else\\* as a \"main\" bootmanager (possibly another instance of BOOTMGR and \\\\boot\\\\BCD for a \"resident\" other install of Windows).\n\nDepending on a number of factors you may be able to put also the grldr inside the .vhd using the UMBR and thus a \"static\", mapping of the file, but in that case there are a couple of caveats:\n\n1) you cannot move the .vhd, nor defragment it (internally)\n\n2) if you use the UMBR as your main MBR then the mapped grldr will become the \"main\" bootmanager (but of course you can chainload \\*anything\\* else from it)\n\n3) you will need to edit the embedded menu.lst in the grldr adding to it the provisions for the .vhd booting\n\nIf you are using another BOOTMGR and \\\\boot\\\\BCD on the SSD it could be possible (never tried/tested it) to chainload the UMBR from the \\\\boot\\\\BCD, but all in all I don\u0027t think that it is worth the hassle.\n\nOn the other hand, even if finding and loading the menu.lst is usually very fast, editing the embedded one will allow to get rid of the file (the menu.lst) and shave a few milliseconds from booting time, though what remains the biggest time consuming activities will remain the loading of the .vhd in memory and that cannot be reduced.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "206059",
      "timestamp": "2018-02-04T16:30:17+00:00",
      "author": "nino61",
      "content": "Wonko,\n\nI honestly don\u0027t know what UMBR is? All I know is that I have bootmgr and bcd on and off the vhd. For normal vhd baremetal booting I was never asked for the one inside; conversely, for pre-ramloading booting, if I do not have it inside the vhd, at the end of the preloading session I get a BOSD saying inaccessible winload.exe or something of the kind. And as far as I have tried so far, the absence of boot and bcd on the host results in the system\u0027s failing to boot. boot and bcd were preemptied (if any previously) and re-created through bcdboot c:\\\\windows /s c:\\\\ and bcdboot c:\\\\windows /s d:\\\\. If you spot anything wrong in my operation and description, pls do not hesitate to tell me and I will try to right the wrong.\n\nnino\n\n"
    },
    {
      "id": "206065",
      "timestamp": "2018-02-04T17:30:34+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Wonko,\n\u003e\n\u003e I honestly don\u0027t know what UMBR is?\n\nSure you don\u0027t, it is not like the most publicized feature around, in the already given thread:\n\n[http://reboot.pro/to...in-bios-to-gpt/](http://reboot.pro/topic/19516-hack-bootmgr-to-boot-windows-in-bios-to-gpt/ \"\")\n\nnamely here:\n\n[http://reboot.pro/to...-11#entry197690](http://reboot.pro/topic/19516-hack-bootmgr-to-boot-windows-in-bios-to-gpt/page-11#entry197690 \"\")\n\nbut you will need to read a bit on the thread to understand the reason why (and when/where) it may be useful.\n\nAnyway it wouldn\u0027t be an \"improvement\", while editing the embedded menu.lst might be ( a very marginal anyway) one.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "206490",
      "timestamp": "2018-03-21T06:25:12+00:00",
      "author": "Coclend",
      "content": "Thanks for your info\n\n"
    },
    {
      "id": "209218",
      "timestamp": "2019-02-09T05:01:27+00:00",
      "author": "quarky42",
      "content": "nino, did you do anything to the Windows 10 bootmgr to be able to load it from grub4dos? I feel like I\u0027m missing something here.\n\nI have Windows 10 x64 running inside HyperV with:\n\nTestMode ON and DetectHAL ON.\n\nfiradisk is installed and shows \"device ok\" in the device manager.\n\nMy system has 64GB of RAM. My image is just a hair under 16GB. (In fact a year ago, I had this working...I\u0027m trying to set it up again from scratch and running into problems after the bootmgr takes over and it sounds like you have yours running well. Can you give me an idea of what I can check next?)\n\nMy menu.lst:  \n\n```\nmap --mem (hd0,0)/Win10x64Ent.vhd (hd0)\nmap --hook \nrootnoverify (hd0,0)\nchainloader /bootmgr\n```\n\nWhen I step through the menu.lst I don\u0027t have any errors. The Windows 10 bootmgr takes over, sits on the spinning circle for about 15 seconds and eventually gives me a blue screen with a INACCESSIBLE BOOT DEVICE message.  \nBCDEDIT says:  \n\n```\nWindows Boot Manager\n--------------------\nidentifier              {bootmgr}\ndevice                  partition\u003d\\Device\\HarddiskVolume1\ndescription             Windows Boot Manager\nlocale                  en-US\ninherit                 {globalsettings}\ndefault                 {current}\nresumeobject            {82b54cbf-2c04-11e9-b51e-00155d5d6b02}\ndisplayorder            {current}\ntoolsdisplayorder       {memdiag}\ntimeout                 30\n\n\nWindows Boot Loader\n-------------------\nidentifier              {current}\ndevice                  partition\u003dC:\npath                    \\WINDOWS\\system32\\winload.exe\ndescription             Windows 10\nlocale                  en-US\ninherit                 {bootloadersettings}\nrecoverysequence        {2e530078-2bfc-11e9-afdd-9c2d2e857889}\ndisplaymessageoverride  Recovery\nrecoveryenabled         Yes\ntestsigning             Yes\nallowedinmemorysettings 0x15000075\nosdevice                partition\u003dC:\nsystemroot              \\WINDOWS\nresumeobject            {82b54cbf-2c04-11e9-b51e-00155d5d6b02}\nnx                      OptIn\nbootmenupolicy          Standard\ndetecthal               Yes\n```\n\nIt seems like the bootmgr from the hidden partition is being run properly but it can\u0027t find the Windows partition. I don\u0027t think this is a grub4dos problem and I don\u0027t think it is a firadisk issue, but I\u0027m not sure what is left. Thanks for any insight you might be able to give in how you got the Windows 10 bootmgr to cooperate.\n\nHow many partitions do you have in your VHD file? Mine has two...the hidden boot partition and the main windows partition. Did you modify the bootmgr / bcd files? Thanks for your time.\n\n"
    },
    {
      "id": "209219",
      "timestamp": "2019-02-09T07:42:11+00:00",
      "author": "antonino61",
      "content": "I have only one partition on my vhd (mbr, not gpt). your menu.lst entries look fine. I am not sure u can have it working on a uefi basis without tweaks or glitches. anyway, before u do anything else, try bcdboot c:\\\\windows /s c: from an administrator-level command line from the root directory of your vhd. I presume u will have to change c: in the command into some other letter, as u presumably will not yet have been able to mount it as c:\n\nI hope I have made myself understood.\n\nnino\n\n"
    },
    {
      "id": "209220",
      "timestamp": "2019-02-09T07:51:46+00:00",
      "author": "wimb",
      "content": "I think you should use **root** instead of rootnoverify.\n\n[http://diddy.boot-la...tm#rootnoverify](http://diddy.boot-land.net/grub4dos/files/commands.htm#rootnoverify \"External link\")\n\nAlso in BCD you need to set bootmenupolicy **Legacy**\n\nMore Info on Grub4dos FiraDisk menu [http://reboot.pro/to...-grub/?p\u003d208797](http://reboot.pro/topic/21917-boot-windows-8-vhd-with-grub/?p\u003d208797 \"\")\n\n[http://reboot.pro/to...ct-make-mini-8/](http://reboot.pro/topic/18467-vhd-w8-compact-make-mini-8/ \"\")\n\nAlso you should use **MBR** VHD with **one** NTFS partition.\n\nYou can use WinNTSetup for Install of Win10 in VHD as described in\n\nNo Pagefile and Hibernate Off is also important so that the VHD is not entangled to the outside ....\n\nMount the VHD and use BOOTICE Professional mode to inspect or modify the Boot\\\\BCD file inside your VHD.\n\nDoes the drive letter in Application Device and OS Device corresponds to the drive letter of the mounted VHD ?\n\nIf you see there \\\u003cUnknown\\\u003e then you need to make changes ...\n\n**testsigning** and detecthal need to be set **yes** which is already OK in your case.\n\nHow about using Win10XPE WIM file for [booting from RAMDISK](https://msfn.org/board/topic/121446-install-from-usb-after-booting-with-wim-or-vhdx/?do\u003dfindComment\u0026comment\u003d1159506 \"External link\") ?\n\n"
    },
    {
      "id": "209221",
      "timestamp": "2019-02-09T08:38:19+00:00",
      "author": "quarky42",
      "content": "\u003e I have only one partition on my vhd (mbr, not gpt). your menu.lst entries look fine. I am not sure u can have it working on a uefi basis without tweaks or glitches. anyway, before u do anything else, try bcdboot c:\\\\windows /s c: from an administrator-level command line from the root directory of your vhd. I presume u will have to change c: in the command into some other letter, as u presumably will not yet have been able to mount it as c:  \n\u003e I hope I have made myself understood.  \n\u003e nino\nMine is mbr. The first partition is hidden and contains the boot folder, BCD file and the bootmgr in the root. I am able to boot windows 10 to hyperv directly with no problem. It is only when I boot the vhd through grub4dos that I get the behavior described above. I have tried both root and rootnoverify. No difference in behavior. I\u0027ll still with root going forward. I do have a working vhd elsewhere I can dissect to try and find out why it works and why this one I tried to create fresh doesn\u0027t, too.  \n\nI have a number of things to try thanks to you and wimb. Thank you both.  \n\nI do have the page file and hiberfile turned off already.  \n\nI\u0027ll try the other stuff and see what I can figure out. Thanks.   \n\n**Edited by quarky42, 09 February 2019 - 08:45 AM.**\n"
    },
    {
      "id": "209222",
      "timestamp": "2019-02-09T09:24:50+00:00",
      "author": "Wonko the Sane",
      "content": "As a side note, another thing that you may want to try nowadays is to replace Firadisk with the new SVBUS driver by Schtrom:\n\n[http://reboot.pro/to...r-for-grub4dos/](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/ \"\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209223",
      "timestamp": "2019-02-09T10:19:50+00:00",
      "author": "antonino61",
      "content": "is it any better?\n\n"
    },
    {
      "id": "209224",
      "timestamp": "2019-02-09T12:56:46+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e is it any better?\n\nI don\u0027t know ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif) , but **you** *should*, since you tested it and reported it as working first as ramdisk only, and then also as filedisk on that very same thread:\n\n[http://reboot.pro/to...r-for-grub4dos/](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/ \"\")\n\nLoosely, the whole idea of that driver is that Windows 10 has some new behaviour that may (or may not) affect the working of older drivers (namely WinVblock, but possibly also Firadisk) expecially when used as filedisk on largish (20 Gb reported) .vhd images (explanation from the Author):\n\n[http://reboot.pro/to...b4dos/?p\u003d207138](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d207138 \"\")\n\nSo, yes, I would say that it is \"better\" specifically when booting Windows 10 from largish .vhd\u0027s.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209225",
      "timestamp": "2019-02-09T14:35:04+00:00",
      "author": "wimb",
      "content": "\u003e As a side note, another thing that you may want to try nowadays is to replace Firadisk with the new SVBUS driver by Schtrom:\n\u003e\n\u003e [http://reboot.pro/to...r-for-grub4dos/](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/ \"\")\n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\u003e\n\u003e Wonko\n\nI have used WinNTSetup to Install Win10x86 in 10 GB VHD located in 3rd partition of MBR harddisk.\n\nAfter booting I used Instx86.exe to Install SVBus in VHD\n\nI can MBR boot with Grub4dos the 10 GB W10x86.vhd file as SVBus FILEDISK\n\nBut for booting from Grub4dos as SVBus RAMDISK, then I get in Grub4dos\n\nversion grub4dos-0.4.6a-2018-12-23.7z using command\n\n```\nmap --mem (hd0,2)/W10x86.vhd (hd0)\n\n```\n\n**Error 28 Selected item cannot fit into memory**\n\nMy Computer has 16 GB RAM, so I thought it might work ....\n\nOn same system I can boot Win7x32.vhd of size 2 GB using Grub4dos and FiraDisk RAMDISK driver.\n\nWhat is the solution ?\n\n[![WinNTSetup-2019-02-09_140126.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-44142800-1549722799_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-44142800-1549722799.png \"WinNTSetup-2019-02-09_140126.png - Size: 399.11KB\"){#ipb-attach-url-16406-0-88530900-1676066409} \u003d\u003d [![SVBus-FILEDISK-2019-02-09_150106.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-41223800-1549722824_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-41223800-1549722824.png \"SVBus-FILEDISK-2019-02-09_150106.png - Size: 557.9KB\"){#ipb-attach-url-16407-0-88542200-1676066409} \u003d\u003d [![Win7x32-VHD-FiraDisk-RAMDISK-2019-02-09_152104.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-00370500-1549722847_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-00370500-1549722847.png \"Win7x32-VHD-FiraDisk-RAMDISK-2019-02-09_152104.png - Size: 496.13KB\"){#ipb-attach-url-16408-0-88550100-1676066409} \u003d\u003d [![Win10-RAM-2019-02-09_153845.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-39814900-1549723173_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-39814900-1549723173.png \"Win10-RAM-2019-02-09_153845.png - Size: 12.05KB\"){#ipb-attach-url-16409-0-88557200-1676066409}\n\n"
    },
    {
      "id": "209226",
      "timestamp": "2019-02-09T16:29:33+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I have used WinNTSetup to Install Win10x86 in 10 GB VHD located in 3rd partition of MBR harddisk.\n\u003e\n\u003e After booting I used Instx86.exe to Install SVBus in VHD\n\u003e\n\u003e I can MBR boot with Grub4dos the 10 GB W10x86.vhd file as SVBus FILEDISK\n\u003e\n\u003e But for booting from Grub4dos as SVBus RAMDISK, then I get in Grub4dos\n\u003e\n\u003e version grub4dos-0.4.6a-2018-12-23.7z using command\n\u003e\n\u003e ```\n\u003e\n\u003e map --mem (hd0,2)/W10x86.vhd (hd0)\n\u003e\n\u003e ```\n\u003e\n\u003e **Error 28 Selected item cannot fit into memory**\n\u003e\n\u003e My Computer has 16 GB RAM, so I thought it might work ....\n\u003e\n\u003e On same system I can boot Win7x32.vhd of size 2 GB using Grub4dos and FiraDisk RAMDISK driver.\n\u003e\n\u003e What is the solution ?\n\nNo ideas, though this:\n\u003e On same system I can boot Win7x32.vhd of size 2 GB using Grub4dos and FiraDisk RAMDISK driver.\n\u003e\nis totally irrelevant (from a common sense point of view).\n\nTry using the SAME size (or the same file) for Win7x32.vhd with SVBUS (both as filedisk and ramdisk) AND try using the SAME size (or the same file) W10x86.vhd with firadisk and Winvblock (both as filedisk and ramdisk) and THEN you will have something to compare.\n\nHowever, since the error happens long before the windows driver (be it Firadisk, WinvBlock or SVBUS) is used It could well be that there is something that prevents grub4dos (on your specific motherboard or the specific version of grub4dos) to see more than (say) 4 (or 8) GB of RAM.\n\nI will repeat how the Author of the driver developed it expressly in order to use largish VHD\u0027s with Windows 10 in it as Ramdisk, and I trust him it is working, you could post your questions in a new thread or in the original release thread (hoping that he will see it) or try contacting him via PM or the like.\n\nJFYI and for the record (as if you didn\u0027t know this) I use the SAME stick I used to NOT touch Vista to NOT touch Windows 10 and - being the old dinosaur I am - I have never seen 16 Gb of RAM all in a same computer, so you got the wrong person to ask this question, sorry.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209227",
      "timestamp": "2019-02-09T16:36:13+00:00",
      "author": "wimb",
      "content": "It has nothing to do with the driver Or with the Win7 / Win10 OS.\n\nEven if I use Grub4dos to load various empty VHD\u0027s into memory, then the size is limited to 2 GB max.\n\n3, 4 and 6 GB VHD all fail to load into memory allthough I have 16 GB available as RAM\n\nI am going to test now other Grub4dos version.\n\nWhat version do you prefer to test ?\n\n"
    },
    {
      "id": "209228",
      "timestamp": "2019-02-09T17:02:44+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e What version do you prefer to test ?\n\nSince the SVBUS driver was originally released in June 2018. I would try versions that were available a bit before that time, \\*like\\*:\n\n[http://grub4dos.chen....6a-2018-04-23/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.6a-2018-04-23/ \"External link\")\n\nBUT Misty (who is very reliable in his reports) posted (in November):\n\n[http://reboot.pro/to...b4dos/?p\u003d208333](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d208333 \"\")\n\nthat he had success with \"FULL\" Windows 7 (presumably waaay larger than 2 GB) on his Lenovo Thinkpad W530 with 32 GB of RAM as a Ramdisk, so another that you could try could be:\n\n[http://grub4dos.chen....6a-2018-09-19/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.6a-2018-09-19/ \"External link\")\n\nOr maybe go all the way back to 0.4.5c:\n\n[http://grub4dos.chen....5c-2016-01-18/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.5c-2016-01-18/ \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209229",
      "timestamp": "2019-02-09T17:43:51+00:00",
      "author": "wimb",
      "content": "\u003e Since the SVBUS driver was originally released in June 2018. I would try versions that were available a bit before that time, \\*like\\*:\n\u003e\n\u003e [http://grub4dos.chen....6a-2018-04-23/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.6a-2018-04-23/ \"External link\")\n\u003e\n\u003e BUT Misty (who is very reliable in his reports) posted (in November):\n\u003e\n\u003e [http://reboot.pro/to...b4dos/?p\u003d208333](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d208333 \"\")\n\u003e\n\u003e that he had success with \"FULL\" Windows 7 (presumably waaay larger than 2 GB) on his Lenovo Thinkpad W530 with 32 GB of RAM as a Ramdisk, so another that you could try could be:\n\u003e\n\u003e [http://grub4dos.chen....6a-2018-09-19/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.6a-2018-09-19/ \"External link\")\n\u003e\n\u003e Or maybe go all the way back to 0.4.5c:\n\u003e\n\u003e [http://grub4dos.chen....5c-2016-01-18/](http://grub4dos.chenall.net/downloads/grub4dos-0.4.5c-2016-01-18/ \"External link\")\n\u003e\nThanks for your suggested versions of grub4dos to be tested in RAM loading my 10 GB file. ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)\n\nThe last one [grub4dos-0.4.5c-2016-01-18](http://grub4dos.chenall.net/downloads/grub4dos-0.4.5c-2016-01-18/ \"External link\") is working OK and all others fail in loading the 10 GB VHD into memory.\n\nBut anyway the good news is that I have got W10x86.vhd booting from SVBus RAMDISK and also as SVBus FILEDISK :smile:\n\n[![SVBus-RAMDISK-2019-02-09_182726.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-50441000-1549734215_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-50441000-1549734215.png \"SVBus-RAMDISK-2019-02-09_182726.png - Size: 618.78KB\"){#ipb-attach-url-16410-0-88563800-1676066409}\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n```\ntitle W10x86-VHD - RAMDISK\nfind --set-root --ignore-floppies /W10x86.vhd\nmap --mem /W10x86.vhd (hd0)\nmap --hook\nrootnoverify (hd0,0)\nchainloader (hd0)+1\n\ntitle W10x86-VHD - FILEDISK\nfind --set-root --ignore-floppies /W10x86.vhd\nmap /W10x86.vhd (hd0)\nmap --hook\nrootnoverify (hd0,0)\nchainloader (hd0)+1\n\n\n```\n\nMisty is [using here](http://reboot.pro/topic/21905-grub4dos-and-gpt-support/?p\u003d208505 \"\") and Vortex [here](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d206978 \"\") GRUB4DOS 0.4.5c 2016-01-18 for loading VHD into RAM\n\n"
    },
    {
      "id": "209230",
      "timestamp": "2019-02-10T00:01:54+00:00",
      "author": "antonino61",
      "content": "I did actually report svbus as being good, even better than firadisk, at loading vhds either into ram or as filedisks. My report was stricto sensu confined to that. As soon as I saw that vhds loaded as filedisk did not retain changes to win install, I no longer saw any point in keeping on using svbus to load vhds as filedisks, and limited myself to using it only on a preramloading basis, which is exactly what I have always done with firadisk, with no issues. From that point on, i found no practical advantages of either one on the other. Sorry for not updating my report any earlier than I have done right now.\n\nnino\n\n**Edited by antonino61, 10 February 2019 - 12:03 AM.**\n"
    },
    {
      "id": "209232",
      "timestamp": "2019-02-10T15:45:32+00:00",
      "author": "Wonko the Sane",
      "content": "@wimb\n\n\\*Somehow\\* we must find a way to alert chenall or yaya about the issue, from your report it seems like the 0.4.6a introduced some changes that prevent grub4dos from working properly (as the last 0.4.5c version does).\n\nUsually the \"communication officer\" is Steve6375 that (since he is usually using the latest-latest version in his Easy2Boot *et similia*) might be anyway interested in the matter.\n\nIf we don\u0027t see in a couple days a sign that Steve6375 noticed this thread, it might be the case of PM\u0027ing him.\n\n@antonino61\n\nUnless I missed it, you never specified the size of the .vhd\u0027s you experimented with, if they are below or around 2 GB most probably it doesn\u0027t make any difference.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209234",
      "timestamp": "2019-02-10T16:05:44+00:00",
      "author": "sebus",
      "content": "\u003e @antonino61  \n\u003e\n\u003e Unless I missed it, you never specified the size of the .vhd\u0027s you experimented with, if they are below or around 2 GB most probably it doesn\u0027t make any difference.\n\nIt was in fist post - 5gb big\n\n"
    },
    {
      "id": "209235",
      "timestamp": "2019-02-10T16:37:22+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e It was in fist post - 5gb big\n\nWhich first post? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nFirst post in this thread?\n\nBut it is by **nino61**.\n\nFirst post in the SVBUS thread (the thread I was making reference to) **by antonino61** seems this one :\n\n[http://reboot.pro/to...b4dos/?p\u003d208341](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d208341 \"\")\n\nantonino61:\n\n[http://reboot.pro/us...650-antonino61/](http://reboot.pro/user/69650-antonino61/ \"\")\n\nand nino61:\n\n\u003chttp://reboot.pro/user/69337-nino61/\u003e\n\nare two distinct members, both Italians, i.e. coming from the people of \"POETS ARTISTS HEROES SAINTS THINKERS SCIENTISTS NAVIGATORS TRANSMIGRATORS\" and (seemingly) confusion due to similar names :wink:.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209236",
      "timestamp": "2019-02-10T18:06:32+00:00",
      "author": "steve6375",
      "content": "I think this is [https://github.com/c...4dos/issues/186](https://github.com/chenall/grub4dos/issues/186 \"External link\")\n\nWhich was reported some time ago\n\ngrub4dos changed the way upper memory is allocated.\n\nI asked the user to try various commands.\n\n"
    },
    {
      "id": "209237",
      "timestamp": "2019-02-10T18:30:34+00:00",
      "author": "steve6375",
      "content": "try\n\nmap**--top** --mem /xx.vhd (hd1)\n\n"
    },
    {
      "id": "209238",
      "timestamp": "2019-02-10T21:35:35+00:00",
      "author": "wimb",
      "content": "\u003e try\n\u003e\n\u003e map**--top** --mem /xx.vhd (hd1)\n\n**TOP** ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif) The problem is solved by using the **--top** option as described.\n\n[grub4dos-0.4.6a-2018-12-23.7z](http://grub4dos.chenall.net/categories/downloads/ \"External link\") version is loading OK my 10 GB VHD into RAM\n\n[![W10x86-RAM-G4d-top-2019-02-10_222425.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-03647400-1549834248_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-03647400-1549834248.png \"W10x86-RAM-G4d-top-2019-02-10_222425.png - Size: 589.98KB\"){#ipb-attach-url-16411-0-13637500-1676066410}\n\n**@Wonko** - Thanks to **steve6375** there is no need to contact **chenall** about it anymore.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n```\ntitle W10x86-VHD - RAMDISK\nfind --set-root --ignore-floppies /W10x86.vhd\nmap --top --mem /W10x86.vhd (hd0)\nmap --hook\nrootnoverify (hd0,0)\nchainloader (hd0)+1\n\ntitle W10x86-VHD - FILEDISK\nfind --set-root --ignore-floppies /W10x86.vhd\nmap /W10x86.vhd (hd0)\nmap --hook\nrootnoverify (hd0,0)\nchainloader (hd0)+1\n\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "209240",
      "timestamp": "2019-02-11T00:39:38+00:00",
      "author": "antonino61",
      "content": "@Wonko\n\nI am afraid antonino61 and nino61 are one and the same person. I did not mean to schizophrenically split my personality. I simply did not know, when nino61, that it was so simple to re-sign oneself to be still able to heed comments and stuff, so I thought I had to re-subscribe, and I was obviously allowed to do that only with a different id. nino is the short for antonino anyway.\n\nAs regards your pointing out the small size of the vhd to anul the functional difference between firadisk and svbus, I think you have perfectly read my mind. I have tried big vhds for this week thru, to check if I could take advantage of the \"new\" superfast g4d in preramloading, which i did appreciate. I thought I would also appreciate the operating speed of the 10gb-or-so vhd, which had spared me the trouble of moving all those folders out of the vhd, thus leaving the clean windows install all intact on it (c:\\\\). Unfortunately, and counterintuitively, I can assure you that the best and fastest working vhd is the shrunk one (which contains the core of files and folders windows strictly needs to reach the interface) and of course place the rest of the folders I once mentioned out of the vhd and junction them back in. I know the procedures by heart by now, and I am prepared to rewrite the list of what to keep in and what not to anyone interested in it.\n\nnino\n\n"
    },
    {
      "id": "209241",
      "timestamp": "2019-02-11T07:44:50+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e **TOP** ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif) The problem is solved by using the **--top** option as described\n\u003e\n\u003e ....\n\u003e\n\u003e **@Wonko** - Thanks to **steve6375** there is no need to contact **chenall** about it anymore.\n\u003e\nVery good. ![:smiling9:](http://reboot.pro/public/style_emoticons/default/smiling9.gif) (and good to know :smile:)\n\nEverything is back to normality (though we still have this (accidental) dual identity of nino/antonino, but now that we know it and that presumably \"antonino\" (or \"nino\") won\u0027t come back anymore, all is cool and dandy).\n\n@nino61\n\nEach and ever report/experience/idea/result of tests/whatever is always welcome and useful, even if it may seem not initially, someone may find it of use at a later time, so - by all means - do report your experiences.\n\nYou should however IMHO take a decision and decide to post from now on ONLY as \"nino61\" or \"antonino61\", besides the confusion, this double identity could easily bring you to a ban ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif) ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif), it is among the basic rules of any board that duplicate logins are a no-no.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209242",
      "timestamp": "2019-02-11T08:04:00+00:00",
      "author": "antonino61",
      "content": "I understand and, as u can see, it is much more comfortable to stay antonino61, now that I have learned to re-sign automatically with just one click. Conversely, it would be much harder for me to catch the exact password for nino61, which would make me keener on choosing it as the one identity thru which I would not come back anymore, if I may, on a stare-decisis-et-quieta-non-movere basis.\n\n**Edited by antonino61, 11 February 2019 - 08:05 AM.**\n"
    },
    {
      "id": "209244",
      "timestamp": "2019-02-11T10:09:48+00:00",
      "author": "Wonko the Sane",
      "content": "Good. :smile:  \n\nTime to go back to the (endless) issue on root vs. rootnoverify. ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)  \n\nroot should be ALWAYS used whenever the target is an actual volume/filesystem which is \"sound\" and accessible (i.e. formatted as FAT12/16, FAT32, CDFS, NTFS or CDFS, and I believe also recently UDF) .  \n\nrootnoverify MUST be used whenever the the target is NOT an actual volume/filesystem OR it is not accessible (i.e. it is encrypted or whatever)  \n.  \nOnce a root has been established it makes NO SENSE whatsoever to hardcode the device root, nor using find --set-root.  \n\nThis:  \n\n```\nrootnoverify (hd0,0)\nchainloader (hd0)+1\n```\n\n\u003cbr /\u003e\n\nis essentially \"absurd\", either of:  \n\n```\n \nroot (hd0,0)\nchainloader +1\n```\n\nor:  \n\n```\n \nrootnoverify (hd0)\nchainloader +1\n```\n\nare \"better\".  \n\nThe first proposed chainloads the PBR code bypassing the MBR code, the second one (like the originally posted by Wimb) chainloads the MBR code of the VHD.  \n\nBOTH are anyway an \"overlay\" ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif), the \"right\" one (in my perverted mind :wink:) being:  \n\n```\n \nroot (hd0,0)\nchainloader /bootmgr\n```\n\nwhich bypasses BOTH the MBR and the PBR code.  \n\nIn a nutshell you could have a MBR with ONLY the partition table and a PBR with only the BPB and the .vhd would boot anyway.  \n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)  \nWonko   \n"
    },
    {
      "id": "209245",
      "timestamp": "2019-02-11T10:37:58+00:00",
      "author": "wimb",
      "content": "\u003e BOTH are anyway an \"overlay\" ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif), the \"right\" one (in my perverted mind :wink:) being:\n\u003e\n\u003e ```\n\u003e  \n\u003e root (hd0,0)\n\u003e chainloader /bootmgr\n\u003e ```\n\u003e\n\u003e which bypasses BOTH the MBR and the PBR code.\n\u003e\n\u003e In a nutshell you could have a MBR with ONLY the partition table and a PBR with only the BPB and the .vhd would boot anyway.\n\u003e\nOK, i agree completely with you and will use your **\"right\"** menu.lst entry in [UEFI_MULTI](https://1drv.ms/f/s!AqA1-Hg3ltssgbYna78xaVPrpcR2sA \"External link\")\n\n```\ntitle W10x64.vhd - SVBus  FILEDISK - 10240 MB\nfind --set-root --ignore-floppies /W10x64.vhd\nmap /W10x64.vhd (hd0)\nmap --hook\nroot (hd0,0)\nchainloader /bootmgr\n\ntitle W10x64.vhd - SVBus  RAMDISK  - 10240 MB\nfind --set-root --ignore-floppies /W10x64.vhd\nmap --top --mem /W10x64.vhd (hd0)\nmap --hook\nroot (hd0,0)\nchainloader /bootmgr\n\n```\n\nwhich is working OK for booting W10x64.vhd from RAMDISK.\n\nHowever, the size of the full Win10x64 VHD should be increased at least to 12 GB .....\n\n[![W10x64-SVBus-RAM-2019-02-11_120913.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-77417300-1549884553_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-77417300-1549884553.png \"W10x64-SVBus-RAM-2019-02-11_120913.png - Size: 112.44KB\"){#ipb-attach-url-16412-0-13651300-1676066410} \u003d\u003d [![UEFI_MULTI-SVBus-2019-02-11_132449.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-49113700-1549887998_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-49113700-1549887998.png \"UEFI_MULTI-SVBus-2019-02-11_132449.png - Size: 13.89KB\"){#ipb-attach-url-16413-0-13660600-1676066410}\n\nThe menu entry that I used previously was [advised](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d208189 \"\") by **schtrom** the creator of SVBus driver.\n\n\u003e Use the following menu.lst entries to boot the VHD file with ***TrueCrypt***:\n\nThanks for your help :smile:\n\n"
    },
    {
      "id": "209246",
      "timestamp": "2019-02-11T12:47:40+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e The menu entry that I used previously was [advised](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?p\u003d208189 \"\") by **schtrom** the creator of SVBus driver.\n\nNo, you see how it is easy to generate urban legends? :wink:, it wasn\u0027t really-really advised by him.\n\nIt was advised by him - after Vortex and Soltis reported success directly chainloading bootmgr - **in a \"special\" case**:\n\u003e\n\u003e in combination with TrueCrypt V7.1a full system disk encryption\n\nIn this case you actually need to chainload the MBR (though I still doubt that it is needed to set root to the volume, but *if* it is, *then* the rootnoverify is actually **needed** because the volume is encrypted and thus root would throw an error).\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209247",
      "timestamp": "2019-02-11T13:26:08+00:00",
      "author": "wimb",
      "content": "Yes, the menu.lst entry that **schtrom** published was meant and may be needed for the **TrueCrypt** case.\n\nWin10x64 VHD will need at least 12 GB Size.\n\nMore useful is to go for Win 8.1 x64 booting from RAMDISK\n\nHere I can use my program to reduce size and work with a VHD of 7 GB for Portable Win 8.1 x64 VHD\n\n[![W864_SVBus-RAM-2019-02-11_141504.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-83872000-1549891559_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-83872000-1549891559.png \"W864_SVBus-RAM-2019-02-11_141504.png - Size: 490.2KB\"){#ipb-attach-url-16414-0-13669600-1676066410}\n\n"
    },
    {
      "id": "209248",
      "timestamp": "2019-02-11T14:48:07+00:00",
      "author": "Wonko the Sane",
      "content": "You should use double quotes when you use \"portable\" on the same line with 7 GB (let alone 12 GB) :wink:  \n\n![:rofl2:](http://reboot.pro/public/style_emoticons/default/rofl.gif)\n\nMore seriously, and back to the original topic, the approach by nino61 is IMHO the smartest one, 5 GB (whilst what I would define \"a senseless amount of bloat\") + the \"whatever\" needed (fetched from the \"outer\" volume) is much better than 12 GB.\n\nI mean, if one has \"only\" (please note the double quotes) 8 GB of RAM, he/she may still be able to run a Windows 10 VHD.\n\nWhen (if) Nino will be able to detail his setup, we will see if it is possible (\"common sense\" tells me that it should be possible, but Windows 10 is the living negation of ANY \"common sense\") to further reduce the size of the VHD.\n\n\u003cbr /\u003e\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)  \nWonko\n\n"
    },
    {
      "id": "209249",
      "timestamp": "2019-02-11T16:31:16+00:00",
      "author": "antonino61",
      "content": "Wonko, would you rather I posted a few screenshots of my directory trees in the vhd and the host disk than I listed the 2 directory lineups?\n\n"
    },
    {
      "id": "209251",
      "timestamp": "2019-02-11T16:38:04+00:00",
      "author": "antonino61",
      "content": "as far as the \"will be ready\" is concerned, I am ready to do it right now, as I believe this less-than-5gb vhd layout is the most advantageous of all regardless of how much ram you have. I can say so because I tested 10gb vhds on 64gb of ram, and I can tell you that for some reason unknown to me their not as fast as small vhd. the only why i can think of is that windows apparently prefers running things one by one to keeping what is unneeded in memory.\n\n"
    },
    {
      "id": "209252",
      "timestamp": "2019-02-11T16:42:45+00:00",
      "author": "antonino61",
      "content": "another advantage to take into account is that you can time-and-space-wise afford to install a new system whenever, and as often as, you wish without losing 1 setting (including website passwords, for example). You actually change the core in the vhd and keep all the software as it was when you had the previous vhd, by doing this copy-over, of course.\n\n"
    },
    {
      "id": "209253",
      "timestamp": "2019-02-11T17:40:57+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Wonko, would you rather I posted a few screenshots of my directory trees in the vhd and the host disk than I listed the 2 directory lineups?\n\nScreenshots are NOT useful.\n\nText files are fine :smile:, as made by a (example):\n\n```\n\nDIR /S /B C:\u003eD:\\VHDDIR.TXT\n```\n\nand (again example)\n\n```\n\nDIR /S /B D:\u003eE:\\OUTERDIR.TXT\n```\n\nIt is IMPORTANT that you use the /B switch (or equivalent, if you use another way to get the listing), so that each line is \"complete in itself\" and can be re-used for \\*any\\* script, there is no need to know size, date of files, etc.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209254",
      "timestamp": "2019-02-11T18:43:01+00:00",
      "author": "antonino61",
      "content": "My dearest wonko,\n\nI can provide the lists almost by heart. It will have been my 2nd time, as I have already given an unofficial detailed accounting of file and folder placement in previous posts. Now I see that you are talking of scripts. Are you up to an automation of the process I have carried out manually? Whatever I am going to post is to be done on a post-install basis, but I gather you want to do that on a pre-install basis. Have I understood correctly?Shall I be glad if I have!\n\nAnyway\n\nthis is the agenda leading to my present deployment\n\n1) clean windows install on a 20gb vhd (the famous shift/f10 and diskpart as soon as the first install screen comes up) (if possible, there would not even be an installation proper, as you sometimes can prepare the vhd with gimagex if you have a clean install.wim coming with the w10 build, which is almost never the case though)\n\n2) driver install until everything is fine in device manager\n\n3) turn as many features on from the control panel (in my case I always blank internet explorer and windows media player as I prefer 3rd party software (maxthon and media player classic)\n\n4) debloat windows with windows debloater (it is just out there when you google it)\n\n5) for making things straight I suggest you use registry first aid (it finds and corrects many path problems / believe me, there are so many of them even on a clean install before debloating)\n\n6) merge \"install takeownership.reg\", \"copy to.reg\" and \"move to.reg\" into the registry (they are just out there when you google them)\n\n7) install HardLinkShellExt_X64.exe\n\n8) install easybcd (another one out there if you google it)\n\n9) Now the relocation proper - I suggest you copy your vhd to the same folder, so you would have 2 vhds named differently from each other.\n\n10) mount the copied one and move \"program files\", program files (x86) and program data off the vhd onto the host disk (the one windows sees as d:\\\\, most typically)\n\n11) pick the 3 link sources from d:\\\\ and junction them to the just deprived vhd (pick link source and drop them as junctions (2nd option on the drop list).\n\n12) unmount the copy vhd and include it as a possible booter in the easybcd list.\n\n13) restart and reboot into the just made easybcd entry from the boot list\n\n14) now that you are in the windows interface delete the original vhd and copy the copied one you are booted on as the new \"original\" (keep the same names when you do these things, so you won\u0027t have to reconfigure bootlists thru easybcd).\n\n15) mount the new \"original\" and perform on the whole users folder the same as you have done with program files, program files (x86) and programdata.\n\n16) after you have repeated the same procedure with users (up to the junction stage), restart and reboot with the new \"original\"\n\n17) repeat the same operation and this time it is the copied vhd\u0027s turn to work on - go to the windows folder and open it; be careful now - you want to move everything to a windows folder on d:\\\\, except for the following directories:\n\nc:\\\\windows\\\\boot\n\nc:\\\\windows\\\\en-us\n\nc:\\\\windows\\\\fonts\n\nc:\\\\windows\\\\inf\n\nc:\\\\windows\\\\system32\n\nthese directories I have just listed, together with the files on the c:\\\\windows root (to the best of my knowledge and belief) must remain on c:\\\\, so don\u0027t move them anyplace else.\n\n18) repeat the same operations as before and of course always choose to boot into the more \"lightened\" vhd (the one that contains the most recent changes)\n\n19) delete the other one and copy the most recent you are just booted on with the same name as the one you have just deleted.\n\n20) mount it, go to the system32 folder and open it - now you wanna move all subfolders to a windows\\\\system32 folder on d:\\\\, except the following ones:\n\nc:\\\\windows\\\\system32\\\\catroot\n\nc:\\\\windows\\\\system32\\\\codeintegrity  \nc:\\\\windows\\\\system32\\\\config\n\nc:\\\\windows\\\\system32\\\\drivers\n\nthese directories I have just listed, together with the files on the c:\\\\windows\\\\system32 root (to the best of my knowledge and belief) must remain on c:\\\\, so don\u0027t move them anyplace else.  \n21) repeat the same operations as before and of course always choose to boot into the more \"lightened\" vhd (the one that contains the most recent changes) - at this point, still to the best of my knowledge and belief, which I wish were much greater, I do not think you can lighten the vhd content anymore - If wonko or anyone else discovers otherwise, pls tell - I haven\u0027t yet. I suggest u should make no further moving off the vhd until elsewhere and otherwise verified.  \n22) now shrink the vhd with any partition resizer and leave at least 700mb empty space on it.  \n23) restart and reboot from the other vhd  \n24) resize the shrunk vhd with vhd resizer and you must have a 4-5gb vhd ready to go.  \nShould you run into problems, restart from the other vhd, which was actually the last to boot ok.  \nIf you have any questions, do not hesitate to ask.  \nnino\n\n**Edited by antonino61, 11 February 2019 - 06:57 PM.**\n"
    },
    {
      "id": "209255",
      "timestamp": "2019-02-11T19:09:38+00:00",
      "author": "quarky42",
      "content": "\u003e (...) I know the procedures by heart by now, and I am prepared to rewrite the list of what to keep in and what not to anyone interested in it.  \n\u003e nino\n\nThis whole thread has been immensely helpful. I would be very grateful for a list of what you\u0027ve moved off of the C: drive. I am moving non-essential things to a second vhd file that will be loaded after windows is booted up. I have a good start on it, but would love to learn what you\u0027ve found to move in your experience. I really appreciate being able to learn from others. Thank you so much for being so helpful in the forums.  \n\nI am able to boot my old previously working Windows 10 image using the new grub4dos with the --top option added to it. I\u0027m glad that works and even better thanks to you guys sharing the info on how it changed. Now that I am back to a working baseline with the new grub4dos bootloader on the disk, I can try and figure out what I need to do to the new image to make it work.   \n"
    },
    {
      "id": "209256",
      "timestamp": "2019-02-11T19:15:52+00:00",
      "author": "antonino61",
      "content": "Dear Quarky,\n\nmy experience only entails moving folders off of the c:\\\\ (which is a vhd) into the root of the host drive (presumably d:\\\\). it does not extend to a 2nd vhd loaded after the booting. if it can be done and is quicker, pls help. I would not know how to reload the 2nd vhd in time for windows to reach the interface ok. in my case, the files that have been moved to the host drive are junctioned to the vhd (c:\\\\) anyway.\n\n**Edited by antonino61, 11 February 2019 - 07:17 PM.**\n"
    },
    {
      "id": "209257",
      "timestamp": "2019-02-11T19:36:12+00:00",
      "author": "Wonko the Sane",
      "content": "Antonino, with all due respect (as you already achieved a very good result) :smile:, your steps are \"a lot\" and it is easy to get confused with them, hence (IMHO) the need to script at least part of them, or, if you prefer, I doubt that many people will have the patience and perseverance to try and replicate them, let alone replicate them successfully.\n\nThe point on which I cannot agree:\n\n\u003e these directories I have just listed, together with the files on the c:\\\\windows\\\\system32 root (to the best of my knowledge and belief) must remain on c:\\\\, so don\u0027t move them anyplace else.\n\nthe whole point being that a large number of files in C:\\\\Windows\\\\System32 (surely most if not all the command line tools, but not only them) do not \\*need\\* to be there, and can be moved \\*anywhere\\* as long as the new path is in the PATH variable.\n\nAll in all, I see not your current achievements as a point of arrival, but rather as a starting point ... :wink:\n\n[http://reboot.pro/to...rthday/?p\u003d15859](http://reboot.pro/topic/2398-boot-lands-birthday/?p\u003d15859 \"\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209258",
      "timestamp": "2019-02-11T19:41:28+00:00",
      "author": "quarky42",
      "content": "\u003e Dear Quarky,\n\u003e\n\u003e my experience only entails moving folders off of the c:\\\\ (which is a vhd) into the root of the host drive (presumably d:\\\\). it does not extend to a 2nd vhd loaded after the booting. if it can be done and is quicker, pls help.\n\nThere is nothing wrong with doing it your way. In fact it is a rather elegant simple approach. I was just meaning to say that I was requesting your list. I see, now that I am on a real browser instead of my phone, that you did provide a list and I will check that out shortly with the time it is definitely due.\n\nI\u0027ll take care of putting the files into a VHD and mounting them as a ramdisk. It just helps to have something to start with where I don\u0027t have to reinvent the wheel. If you think of things that might not have made it into the detailed post above, please feel free to edit it and add to it. It\u0027s a great resource for people trying to shrink their Windows installs to the bare minimum. Once I do it, if you are interested, I\u0027ll be glad to share, but it isn\u0027t necessarily better than what you are already doing. I\u0027m just indicated that the information you shared will help in creating new solutions for other challenges. I hope that makes sense. No critique of your method / means was intended or meant to be implied by what I said.\n\n"
    },
    {
      "id": "209259",
      "timestamp": "2019-02-11T19:48:03+00:00",
      "author": "antonino61",
      "content": "@wonko\n\nSo, you mean that if i add d:\\\\windows to the path variable i can also move the files on the c:\\\\windows and c:\\\\windows\\\\system32 folders to d:\\\\windows and d:\\\\windows\\\\system32 folders and the system will boot ok? it it will, do I need to add d:\\\\windows\\\\system32 to the path variable as well? if not all, which ones should not be moved anywhere as the system needs them on c:\\\\ for booting up ok?\n\nAs far as the script is concerned, what shall I do to make it simpler?\n\n**Edited by antonino61, 11 February 2019 - 07:54 PM.**\n"
    },
    {
      "id": "209260",
      "timestamp": "2019-02-11T19:54:24+00:00",
      "author": "antonino61",
      "content": "Dear Quarky,\n\nthere musta been a misunderstanding here. I am not in the least upset; I really meant what I said - I do not know how to automate the loading of a second vhd in time for windows booting requirements (viz, if windows needs a certain file on c:\\\\ in the booting routine, how can it be fetched to suit its liking if the d:\\\\ still has to be recognized and it has not yet been?), nor do I know whether it would be quicker that way. one step forward would be to move the files normally in the windows and windows\\\\system32 root subfolders off of the c:\\\\ vhd into d:\\\\windows and d:\\\\windows\\\\system32 respectively in order to shrink the c:\\\\ vhd even further.\n\nAs wonko adds, the d:\\\\ path or paths in the environment variable should be added as well.\n\n**Edited by antonino61, 11 February 2019 - 07:57 PM.**\n"
    },
    {
      "id": "209261",
      "timestamp": "2019-02-11T20:49:55+00:00",
      "author": "antonino61",
      "content": "As regards the point of arrival, I think it will be reached when we do know which files windows needs for booting up and reaching the interface, which should be placed or kept exactly where windows expects them to be. all the rest, with our efforts and contributions, should stay off of c:\\\\ anywhere. if only we could have a list of all the files involved in the process from switching the computer on to the appearance of the windows interface, that would be the greatest help. I am also referring to c:\\\\windows\\\\inf and c:\\\\windows\\\\system32\\\\drivers directories, which contain files that do not get involved in the booting of this particular machine but do get involved in the booting of another particular machine (drivers and infs related to devices that are not part of the machine concerned - eg, does windows need to load 10 printer drivers for only 1 printer? and so on and so forth).\n\npls correct me if I am wrong and fruitfully contribute to the discussion.  \n\n"
    },
    {
      "id": "209262",
      "timestamp": "2019-02-11T22:05:53+00:00",
      "author": "antonino61",
      "content": "@wonko,\n\nI have just checked the files and folders remaining on c: as far as my experience is concerned. What I found that would be relevant to the point of moving them off of the vhd is the content of system32: almost 2gb of files; as for c:\\\\windows, even if all the files could be safely moved off, they would not amount to anything even 1/4 as substantial to justify their being anywhere else (just a few megs).\n\n"
    },
    {
      "id": "209263",
      "timestamp": "2019-02-11T22:22:56+00:00",
      "author": "quarky42",
      "content": "Firadisk is working with the new grub4dos-0.4.6a-2018-12-23 on my old Win10x64 12.8GB image with the addition of the --top flag. Thanks, Wonko!\n\nI change the image over to my new Win10x64 16.0GB image and get a INACCESSIBLE BOOT DEVICE message. I\u0027ve gone through all the advice given in the thread and done a fair amount more reading. It looks like the size of the image was the culprit. I think this bit me in the butt a little over a year ago when I was first trying to get this working. (That and I had problems even then finding the right version of Grub4DOS)\n\nThanks to the help and advice in this thread, I successfully booted my 16.0 GB image by removing Firadisk and installing SVBus V1.1. I sincerely thank you for the help, Wonko. Also, thank you antonino61 (if that really is your username...kidding) for your added comments and help. After I am happy with my notes on documenting the install process, I think I will write up a simple guide on how to do all of the Windows image setup in HyperV. It can be quite simple.\n\nOn the other topic of moving major windows components to a different partition, that is an excellent discussion. For the time being, one of the things I need to maintain for my image is the ability for me to load windows updates. So I can\u0027t move too much out of the Windows directory that might be needed elsewhere. On the other hand, I don\u0027t see why I couldn\u0027t just mount a VHD image to (hd1) in the Grub4Dos bootloader so that Windows would load to RAM and everything else would be part of the VHD image but it would be mounted and ready at boot time. Suffice it to say: This discussion has given me a number of ideas on how I\u0027ll ultimately want my boot disk setup for my environment.\n\nAnyway back on the issue of loading Windows Updates: The VHDX file that I have loaded in HyperV is plenty large enough to allow Windows Update to complete. After it is done, I shutdown the VM, copy the VHDX file over to a new location where I can modify it. I mount the VHDX file, resize the operating system partition to make it smaller and then use the Edit Disk option in the HyperV Manager to shrink the entire VHDX file down to it\u0027s minimum size. Then I use the same Edit Disk option in HyperV Manager to convert the VHDX to a Static Disk VHD file. This is all being done on an M.2 based SSD, so it is plenty quick. The resulting VHD file goes onto my Grub4DOS bootable media and it\u0027s done. I could create a boot entry to boot the VHD file directly. That would work well for small updates, but for any large updates that require more free space I think my original image is probably best. Plus that gives me a good working backup in case I screw over the other image.\n\n**Edited by quarky42, 11 February 2019 - 10:30 PM.**\n"
    },
    {
      "id": "209264",
      "timestamp": "2019-02-11T22:37:31+00:00",
      "author": "quarky42",
      "content": "\u003e Good. :smile:  \n\u003e\n\u003e Time to go back to the (endless) issue on root vs. rootnoverify. ![:frusty:](https://reboot.pro/public/style_emoticons/default/frusty.gif)\n\u003e\n\u003e (...)\n\u003e\n\u003e ![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)  \n\u003e Wonko\n\u003e\nIt may feel like beating your head against the wall. Please know that your efforts are appreciated, and I have a much better understanding of the difference between the two. In fact, I may want to try booting to an encrypted partition in the future which may require the rootnoverify at that time, but for now I have plenty on my plate and will make sure that going forward I use the more specific root command instead. Your efforts to teach are not in vain! ;?)\n\n"
    },
    {
      "id": "209265",
      "timestamp": "2019-02-11T23:22:41+00:00",
      "author": "quarky42",
      "content": "\u003e Dear Quarky,\n\u003e\n\u003e there musta been a misunderstanding here. I am not in the least upset; I really meant what I said - I do not know how to automate the loading of a second vhd in time for windows booting requirements (viz, if windows needs a certain file on c:\\\\ in the booting routine, how can it be fetched to suit its liking if the d:\\\\ still has to be recognized and it has not yet been?), nor do I know whether it would be quicker that way. one step forward would be to move the files normally in the windows and windows\\\\system32 root subfolders off of the c:\\\\ vhd into d:\\\\windows and d:\\\\windows\\\\system32 respectively in order to shrink the c:\\\\ vhd even further.\n\u003e\n\u003e As wonko adds, the d:\\\\ path or paths in the environment variable should be added as well.\n\nNo worries. I wasn\u0027t sure if you thought I was saying my way is better. I am trying to say my way lets me solve some minor challenges in my environment where I would be using this.\n\nYou can load a second VHD several ways:\n\n1\\\u003e Using the Grub4Dos Menu, you should be able to map a second VHD file to (hd1) or (hd2) or any other hd number that isn\u0027t already in use. You could mount it as a disk in ram or you could mount the vhd file directly without the --mem and --top flags. In that last case, you wouldn\u0027t have to wait for it to load into RAM and changes would be saved to the VHD file.\n\n2\\\u003e Using ImDisk or other RamDisk software you could mount a volume after windows loads as a ram drive.\n\n3\\\u003e You can mount VHD files directly in Windows. There is very likely a script or one could be made that would do this for you. Then the only challenge becomes calling that script at boot time. There are mechanisms for that. I just don\u0027t have the documentation in front of me.\n\nI suspect there are other ways a VHD file could be mounted, but it depends on what your purpose is and what you\u0027re trying to achieve.\n\nFor my purposes, I would really like to maintain the upgradability of my base windows image, so that I can easily updated it with minimal hassle. If I can script some space saving operations that move some things to other locations and remaps them properly, that could work, pretty well. If your purpose is to make the image as small as possible and you don\u0027t mind recreating it whenever you need to, that\u0027s good too. We likely value things differently.\n\n"
    },
    {
      "id": "209266",
      "timestamp": "2019-02-11T23:57:19+00:00",
      "author": "antonino61",
      "content": "yes, perfect, everybody has their own priority, but I still do not understand the advantage of having the loading-of-c:\\\\-as-a-filedisk in g4d\u0027s charge, when bootfiles could be created on the host drive and inside the vhd for booting smoothly thru bootmgr.\n\nbcdboot c:\\\\windows /s c:\n\nand\n\nbcdboot c:\\\\windows /s d:\n\nlike this, u would have no persistence problems.\n\nhaving g4d load the vhd as a filedisk is something I have tried just for the fun of it, but whatever software installation I tried would never be retained.\n\nso I limited myself to using g4d only for ramloading, and of course I could not expect any software installation to be kept across reboots.\n\nAs for the windows updates, I do not think it matters to the system whether the files and folders are really on c: or elsewhere, as long as the junction to c: is there to guarantee the logical position the sofware expects to find whatever in.\n\nRegarding a secondary vhd to be loaded which would contain the \"non-core\" part of windows (all the stuff we have moved off of c:\\\\ in the previous examples) would the routine have enough time to recognize this second vhd as a useful volume (say d:, as in the examples) that the c:\\\\ junctions point to, and safely continue the routine toward the windows interface? if so, is it any quicker than leaving the non-core stuff \"unincapsulated\" on the host drive?\n\nThe idea of having a vhd instead of a plain disk is that it could easily be preloaded into ram, because it is a file to g4d.\n\nnow, the substantial breakthrough, as wonko puts it, would be to see if other stuff could be moved off the c:\\\\ vhd to make it even smaller, not only in terms of preramloading times, but also in terms of quick booting and neat working, as it would only keep the files and directories windows expects to find exactly there during the boot process. then again, let us make an example, along with all those subfolders from the windows directory, i might as well try moving the windows\\\\inf directory to d:\\\\ and junction it to c:\\\\. when I reboot, windows might (and surely does) need a file from this directory - there is a junction to c:\\\\ of the d:\\\\windows\\\\inf, but windows does not see it because it knows nothing of junction at that very stage, so to windows the inf folder is at that time inexistent. the other junction folders do the trick just because the system does not need anything in them at that very stage, but later on, when it has already learned of their existence thru acknowledgement of the junctions that make files and folders logically appear on c:\\\\ event though they are on d:\\\\.\n\nNow if we had an exact or near exact list of the files called by the system in windows and windows\\\\system32 during the bootup routine, we could tailor the c:\\\\vhd more precisely to suit windows\u0027 bootup liking and have a much lighter vhd. this is strictly necessary before arriving at an up-and-running session with the windows interface on. once windows gets to that stage, almost everything can be placed anywhere.\n\nSorry about my logorrhoic accounting.\n\n**Edited by antonino61, 12 February 2019 - 12:06 AM.**\n"
    },
    {
      "id": "209267",
      "timestamp": "2019-02-12T00:53:55+00:00",
      "author": "quarky42",
      "content": "For some needs, having an OS return to a fresh state on reboot is a major plus. Having things attach as a ramdrive after the boot saves boot time.\n\nI think the key is to have stuff that isn\u0027t loaded during boot be loaded from a static location whether it be a different partition, a vhd file, a ram disk...what ever. Also, from something else I read, it sounds like the System32 folder isn\u0027t fully \"real\"... a lot of the stuff that\u0027s in there is composed of hardlinks that come out of the WinSXS which is where the bulk of the Windows installation is located. To maintain system performance, I suspect that the WinSXS should stay loaded in RAMDISK. Stuff like the Install subdirectory could be moved out because the install files aren\u0027t used much.\n\n"
    },
    {
      "id": "209268",
      "timestamp": "2019-02-12T05:06:25+00:00",
      "author": "cdob",
      "content": "There is a \u0027Grub4DOS AHCI / NVMe speed patch for memory maps\u0027  \n[http://reboot.pro/to...or-memory-maps/](http://reboot.pro/topic/21872-grub4dos-ahci-nvme-speed-patch-for-memory-maps/ \"\")  \n\nTry it and compare VHD file load time to RAM.   \n"
    },
    {
      "id": "209269",
      "timestamp": "2019-02-12T07:32:51+00:00",
      "author": "antonino61",
      "content": "i have tried it and used it so far. 4gb vhds load in no time. even though it is really quick also with 10-or-over-gb vhds, it is still convenient to keep vhd as tiny as possible, not only in preramloading terms, but also in booting and operational terms.\n\n**Edited by antonino61, 12 February 2019 - 07:33 AM.**\n"
    },
    {
      "id": "209270",
      "timestamp": "2019-02-12T08:24:23+00:00",
      "author": "Wonko the Sane",
      "content": "The point is that only a fraction of the files in the c:\\\\windows\\\\system32 folder are actually needed at boot time, and some (namely most if not all the command line ones) are simply never used unless they are invoked, and then you have a number GUI .exe\u0027s, and of dll\u0027s that are \"linked\" to these files, the .chm files, etc.,   \n\nIf you think about it, a PE (the Pre-installation Environment) boots just fine even if it is a fraction of the size of the corresponding \"full-fledged\" OS, so, even if a minimal PE might be \"too little\", the base OS can be greatly slimmed down.  \n\nCompare with a minimal XP (as it is nlited or even more aggressively slimmed down), the typical install is 1.5 GB of space required, actual needed size, if I recall correctly 800 or 900 MB, that can be easily shrinked to 200-250 MB with nlite and to much less (50-200 MB) using one of the \"mini-XP\" projects we have around, although these are made with a rather heavy substitution of built-in programs with alternatives and limiting the functions).  \n\nTypically one should log (a complete log) the booting of the system and then move anything that is not in use during that time.  \nThe tools of the trade were Filemon and Regmon (Sysinternals/Mark Russinovich) that have been replaced by a single tool, Procmon, and then (to look and hopefully find dependencies of the logged files, Dependency Walker.  \n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)  \nWonko   \n"
    },
    {
      "id": "209271",
      "timestamp": "2019-02-12T08:43:30+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e It may feel like beating your head against the wall. Please know that your efforts are appreciated, and I have a much better understanding of the difference between the two. In fact, I may want to try booting to an encrypted partition in the future which may require the rootnoverify at that time, but for now I have plenty on my plate and will make sure that going forward I use the more specific root command instead. Your efforts to teach are not in vain! ;?)\n\nDon\u0027t worry, in this case the head banging was more a figure of speech than anything else :smile:, the intended target was - besides the generic idea of calling things with their names and making things as simple as possible (but not simpler) - our good friend Wimb, which of course is familiar with grub4dos since some 10 years or so and should have known .... ![:whistling:](https://reboot.pro/public/style_emoticons/default/happy22.gif)\n\n@antonino61\n\nRE: Hard Links\n\nYou might find of interest this seemingly UNrelated topic:\n\n[http://reboot.pro/to...rdlinked-files/](http://reboot.pro/topic/19643-winsxs-hardlinked-files/ \"\")\n\nwhere it was \\*somehow\\* managed to have Windows 7 running from a FAT32 filesystem/volume, where a few info on the hardlinking of recent windows is talked about.\n\n@both\n\nOnly for the record there is a difference between having the \"rest of the files\" on a \"physical\" hard disk and having them on a \"virtual\" disk or volume, typically the \"real\" disk is mounted/becomes accessible earlier in the booting phase whilst the \"virtual\" one may be mounted only after the booting is complete, so at least in theory, \"more\" files could be moved to a physical disk than those that could be moved to a second image, but of course it depends on the actual virtual disk driver used and anyway I believe that these differences do not overall influence greatly the size of the main image, which IMHO should remain \"self-standing\" for the booting phase.\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209272",
      "timestamp": "2019-02-12T13:24:43+00:00",
      "author": "antonino61",
      "content": "and I don\u0027t think anyone could be more surgically accurate about the fact of the matter than wonko has already been. this is exactly the path I will tread by following his hints.\n\n"
    },
    {
      "id": "209280",
      "timestamp": "2019-02-12T19:45:02+00:00",
      "author": "antonino61",
      "content": "About 730 files in windows\\\\system32, if everything goes ok. I\u0027ll tell you in a bit.\n\n"
    },
    {
      "id": "209284",
      "timestamp": "2019-02-12T22:04:34+00:00",
      "author": "cdob",
      "content": "Another hints:  \n\nFirst hard link duplicate files as indicated already.  \nMost winsxs files are hard linked by default, some are not.  \n\nAnd Windows 10 supports wofadk.sys compactos compressing.  \nDo this.  \n\nAnd early boot files can be NTFS compressed (compare bootlog.txt and add parent \\*.sys drivers).  \nBootmgr supports NTFS compression, but no compactos compression.  \nMay spare some mb of data after countless of hours. Yes, a insane task, consider this as a nice challenge.   \n"
    },
    {
      "id": "209285",
      "timestamp": "2019-02-12T22:10:39+00:00",
      "author": "antonino61",
      "content": "mmm, compression? why? right now I am adding files one by one - I\u0027m halfway thru. is there a way to automate this process? what shall I do in your view? Pls tell me, but spare me the compression. Is that necessary? as wonko says, what u gain in space, u lose in time.\n\nnino\n\n"
    },
    {
      "id": "209287",
      "timestamp": "2019-02-13T01:57:32+00:00",
      "author": "antonino61",
      "content": "Ladies and Gentlemen, I am dreadful sorry, but ... no dice! Stuck at boot with 0x0000000 error or something.\n\n"
    },
    {
      "id": "209301",
      "timestamp": "2019-02-13T12:50:46+00:00",
      "author": "antonino61",
      "content": "here we are, left with my attempt yesterday and a lot of perplexity today. When trying to get my head together, I happen to think the other way round. (reverse engineering principle?) What files in c:\\\\windows\\\\system32 can we be sure or certain that windows will not use, so as to start moving just these files to d:\\\\windows\\\\system32, see if it boots like that and work our way up (or out, for that matter) from there. Suggestions are more than welcome.\n\n**Edited by antonino61, 13 February 2019 - 12:51 PM.**\n"
    },
    {
      "id": "209303",
      "timestamp": "2019-02-13T13:44:58+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e here we are, left with my attempt yesterday and a lot of perplexity today. When trying to get my head together, I happen to think the other way round. (reverse engineering principle?) What files in c:\\\\windows\\\\system32 can we be sure or certain that windows will not use, so as to start moving just these files to d:\\\\windows\\\\system32, see if it boots like that and work our way up (or out, for that matter) from there. Suggestions are more than welcome.\n\nSure, you removed \"too much\".\n\nAs said the \"right\" way is to log a complete \"normal\" booting.\n\nThen:\n\n1) leave alone \\*anything\\* that appears in the log\n\n2) leave alone - for the moment - all .dll\u0027s  \n3) remove ONLY files that surely do not belong to the boot process (again surely all command line .exe\u0027s but also those GUI ones that clearly does not belong to the boot process, let\u0027s say - only as an example - dxdiag.exe - if it exists on Windows 10 ![:unsure:](https://reboot.pro/public/style_emoticons/default/unsure.png) - is the typical GUI .exe that is used only \"on demand)\n\nIf the thingy boots, good, and then you will need to trace the dependencies of the remaining .exe\u0027s (those NOT mentioned in the log) and see what you can move.\n\nIdeally you should make a number of \"sets\", each set containing no more than -say - 20 files, you remove one \"set\", and if it boots, move to the next \"set\", if it doesn\u0027t boot you re-add the first half of the \"set\" and try again, if it doesn\u0027t boot you remove again the half of the set that you re-added and re-add instead the other half, etc., etc.\n\nAnd, as hinted before a good reference is a (corresponding) PE.\n\nBuild a Windows 10 PE (one of the biggest builds but with no or very few \"third party\" tools), whatever files are in that PE are very likely to be the \"bare minimum\" and you shouldn\u0027t move them from the Windows 10 \"reduced\" build.\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209306",
      "timestamp": "2019-02-13T17:41:19+00:00",
      "author": "antonino61",
      "content": "thank you ever so much, wonko.\n\nOne more question now: will any pe do, or will I have to build my own from my own machine?\n\nnino\n\n"
    },
    {
      "id": "209310",
      "timestamp": "2019-02-13T19:53:55+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e thank you ever so much, wonko.\n\u003e\n\u003e One more question now: will any pe do, or will I have to build my own from my own machine?\n\u003e\n\u003e nino\n\nYou will need to build one (actually two, see below) not so much \"from your own machine\" but rather \"from your own source\" files AND (most important) because you thus have control on what goes in the PE.\n\nYou want to build a PE that has only some basic functionalities (not too many) and one that has all (or nearly all) the functionalities, so that you can compare them and decide what to attempt stripping from the \"full install\".\n\nWimb is already \"promoting\" the newish (booting in RAM) XPE:\n\n[http://reboot.pro/to...stick/?p\u003d209305](http://reboot.pro/topic/21942-add-usb-drivers-to-multiboot-usb-stick/?p\u003d209305 \"\")\n\nyou could start with that.\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209314",
      "timestamp": "2019-02-14T14:57:05+00:00",
      "author": "antonino61",
      "content": "thanks again, wonko, i will try to apply your suggestions.\n\nby perusing the content of windows\\\\system32, though, I have found that there is a lot more to it than just exes and dlls. namely, \\*.acm, \\*.ocx, \\*.ax, \\*.bin, \\*.cfg, \\*.conf, \\*.config, \\*.cpl (control panel entries they must be), \\*.dat, \\*.drv, \\*.din, \\*.dtd, \\*.h, \\*.iec, \\*.h, extentionless files and a bit more. what shall I do with those?\n\nnino\n\n"
    },
    {
      "id": "209316",
      "timestamp": "2019-02-14T17:25:27+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e what shall I do with those?\n\nIt is a good question :smile: , and I have a very good answer for it (besides the obvious \"it depends\" ![:w00t:](https://reboot.pro/public/style_emoticons/default/w00t.gif) ![:ph34r:](https://reboot.pro/public/style_emoticons/default/scared9.gif)), or - more exactly - a very good answer to another question that could be adapted to the present question.\n\nChesterton\u0027s Fence:\n\n[https://en.wikipedia...sterton\u0027s_fence](https://en.wikipedia.org/wiki/Wikipedia:Chesterton%27s_fence \"External link\")\n\nIf I were you, I would leave them alone for the moment.\n\nYou see, most (but not all) of them may represent (besides either a \"standalone\" needed or movable file) a dependency of either:\n\n1) something that you actually already moved elsewhere successfully  \n2) something that is needed and that you cannot move\n\n3) something that is not actually needed in the booting phase, and that can thus be moved BUT that needs to be unregistered/re-registered (not entirely unlike some .dll\u0027s) for later operation/functionalities of the OS\n\nCompare with (shameless plug):\n\n[http://reboot.pro/to...10-mb/?p\u003d154017](http://reboot.pro/topic/3717-xpsp1-with-full-commandline-and-ntfs-below-10-mb/?p\u003d154017 \"\")\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209317",
      "timestamp": "2019-02-14T17:40:31+00:00",
      "author": "antonino61",
      "content": "Ok, I\u0027ll do as u say. I\u0027ll proceed score by score. but, ... sorry for my ignorance: do I create a win pe if I apply install.wim by imagex to a disk? u mention win pe for good comparison, even 2 of them (min+max), that is the reason for my asking.\n\nnino\n\n"
    },
    {
      "id": "209318",
      "timestamp": "2019-02-14T20:44:02+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Ok, I\u0027ll do as u say. I\u0027ll proceed score by score. but, ... sorry for my ignorance: do I create a win pe if I apply install.wim by imagex to a disk? u mention win pe for good comparison, even 2 of them (min+max), that is the reason for my asking.\n\u003e\n\u003e nino\n\nNo.\n\nIf you apply an **install** .wim (via imagex or otherwise) you are **install**ing.\n\nThe boot.wim (present on Windows install media) is actually a very minimal PE (or Pre-install Environment).\n\nWhat - by means of Winbuilder (and a specific project) or through other builders you \"build\" or \"assemble\" is a \"custom\" PE that usually has many more capabilities up to (nearly) the full functionality of the installed OS.\n\nSince you are \"bulding\" or \"assembling\" a PE, you can choose (within limits) what to add (or not add) to the build.\n\nIf you ask this question, however, you have a loong way before you, follow the given link, try replicating what Wimb suggests:\n\n[http://reboot.pro/to...stick/?p\u003d209305](http://reboot.pro/topic/21942-add-usb-drivers-to-multiboot-usb-stick/?p\u003d209305 \"\")\n\nIt won\u0027t probably be easy at first try, although most things are automated you will need to get the hang of it.\n\nWhat happens (hopefully) is that a number of files are automatically extracted from the source .iso (either from the boot.wim or install.wim) and re-assembled, possibly integrated by third party programs and or with modifications in such a way that a new bootable (and \"portable\") Pre-installation Environment is created with most of the features of the corresponding \"installed\" Operating System.\n\nMaybe (better) ignore the above for the moment, and INSTEAD read about the MistyPE :\n\n[http://mistyprojects...ocs/readme.html](http://mistyprojects.co.uk/mistype/mistype.docs/readme.html \"External link\")\n\n(which is simpler, but the general ideas and concepts are the same), download it:\n\n[http://mistyprojects....2018.01.21.zip](http://mistyprojects.co.uk/downloads/MistyPE.2018.01.21.zip \"External link\")\n\nand try building it at first.\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209320",
      "timestamp": "2019-02-15T00:24:08+00:00",
      "author": "antonino61",
      "content": "boot.wim deployed on vhd with gimagex will not boot\n\nit will only yield a bsod\n\n"
    },
    {
      "id": "209322",
      "timestamp": "2019-02-15T08:54:30+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e boot.wim deployed on vhd with gimagex will not boot\n\u003e\n\u003e it will only yield a bsod\n\nSure it won\u0027t.\n\nThat doesn\u0027t mean that i is not a PE, only you used not the \"right\" (or the \"complete\") method to deploy it.\n\nAlso the install.wim simply deployed with gimagex won\u0027t boot, there are other needed steps, \\*like\\*:\n\n[http://reboot.pro/to...external-drive/](http://reboot.pro/topic/10126-nt-6x-fast-installer-install-win7-directly-to-usb-external-drive/ \"\")\n\nCheck this if you want to apply a \"standard\" boot.wim to a disk (or vhd):\n\n[https://docs.microso...boot-or-non-ram](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/winpe-install-on-a-hard-drive--flat-boot-or-non-ram \"External link\")\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209323",
      "timestamp": "2019-02-15T15:36:30+00:00",
      "author": "antonino61",
      "content": "Sorry Wonko, i do not know if that is exactly booting or something else, but if I have a \"pure\" install.wim from an iso, I always apply it with gimagex64 to, say, H:\\\\vhd.vhd, and when I reboot, it takes me to the \"intermediate?\" installation stage where it looks for hardware and then it takes me to the full interface at next reboot. whether it is booting or not, I can move anywhere from there and then on; not so if I try the same thing with boot.wim, even though I tried bcdboot h:\\\\windows /s h: and bootsect nt60 etc after the gimagex64 kinda thing.\n\nsorry again for the informality of my rendering. can I move from the tiniest boot.wim to the smallest possible windows installation? Correct me if i am wrong, but i believe that it will not boot because it does not have the necessary files to do so. If the necessary files could be added, then it would almost be it.\n\n"
    },
    {
      "id": "209324",
      "timestamp": "2019-02-15T16:15:31+00:00",
      "author": "quarky42",
      "content": "There are many guides for creating a Windows 10 WinPE including videos on YouTube. Sometimes when one way doesn\u0027t make sense for me when I\u0027m trying something new I try and find other tutorials and guides to see if there is another way or at least a way that is easier for me to understand:  \n\n[https://www.google.c...indows 10 WinPE](https://www.google.com/search?client\u003dms-android-verizon\u0026ei\u003dw-RmXLC_BqS7jwS85YeQDg\u0026q\u003dhow+to+make+Windows+10+WinPE\u0026oq\u003dhow+to+make+Windows+10+WinPE \"External link\")   \n"
    },
    {
      "id": "209325",
      "timestamp": "2019-02-15T18:33:02+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e There are many guides for creating a Windows 10 WinPE including videos on YouTube. Sometimes when one way doesn\u0027t make sense for me when I\u0027m trying something new I try and find other tutorials and guides to see if there is another way or at least a way that is easier for me to understand:  \n\u003e\n\u003e [https://www.google.c...indows 10 WinPE](https://www.google.com/search?client\u003dms-android-verizon\u0026ei\u003dw-RmXLC_BqS7jwS85YeQDg\u0026q\u003dhow+to+make+Windows+10+WinPE\u0026oq\u003dhow+to+make+Windows+10+WinPE \"External link\")\n\nSure :smile: and - besides - the documentation by Misty for specifically building a MistyPE (already given link), comprising the actual correctly pre-configured builder, etc., etc. is some of the best, simpler, logically arranged set of instructions I ever saw.\n\nSometimes I am called grumpy (and old and bastard, mainly because I *am actually* an old, grumpy bastard :wink:).\n\nBut ++really++ antonino, if you don\u0027t have enough knowledge and experience on the matters at hand, it is fine :smile:, everyone has to start somewhere, but if you ask for help, assistance, explanations, etc., you cannot insist, at ++every++ suggestion of doing A, then B, and then D with a \"ah, OK but if I do C and E but not D it doesn\u0027t work (or it works differently)\".\n\nThe way C (and E but not D) work may be different from the way of doing A and B and then D (or it may be the same) but you are suggested to do A, then B, then D AND NOT C and E but not D..\n\n![4d8y.jpg](http://i.qkme.me/4d8y.jpg)\n\nYour experience is a precious resource, but not every experience can be extended to other topics, try setting it aside for a moment, temporarily forget everything you know about install.wim, gimagex64 or whatever other tool or method (good, bad, right or wrong) you have been using till now (BTW to do a DIFFERENT thing) and open your mind to the known methods to create/build (or make bootable media from) a PE.\n\nI will repeat myself:\n\nIf you want to learn how to make the most basic WinPE from a Windows 10 source, READ the Microsoft article you were given:\n\n[https://docs.microso...boot-or-non-ram](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/winpe-install-on-a-hard-drive--flat-boot-or-non-ram \"External link\")\n\nand do what is there (and NOTHING else).\n\nIf you want to learn how to make a \"better\" PE get the MistyPE project:\n\n[http://mistyprojects....2018.01.21.zip](http://mistyprojects.co.uk/downloads/MistyPE.2018.01.21.zip \"External link\")\n\nread its (good) documentation:\n\n[http://mistyprojects...ocs/readme.html](http://mistyprojects.co.uk/mistype/mistype.docs/readme.html \"External link\")\n\nand do what is is written there (and NOT something else).\n\nOnce you will have succeeded in following those (and not some other) instructions to the letter (and thus you will be more familiar with the concepts and tools used) then there will be time to introduce variations, make comparisons on the tools and methods used, etc.\n\nIf you have doubts/questions/whatever about the suggested methods/tools feel of course free to ask for assistance, but please stop this \"but if I do the same thing I have always done with something else it doesn\u0027t work as it does when I do it on something else\" kind of stuff.\n\nThe general idea of the suggestion is to compare two PE\u0027s (one very minimal and one more complete) to your (reduced) \"full install\" of Windows 10.\n\nTo do this you need three things:\n\n1) your (reduced) full install of Windows 10  \n2) a minimal WinPE (based on Windows 10)\n\n3) a more complete PE (possibly built with the same method as the above #2)\n\nIf you want to follow this general idea you need to learn how to build #2 and #3 and actually build them, otherwise all you have is #1 and you have no comparison to make.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209327",
      "timestamp": "2019-02-15T21:10:52+00:00",
      "author": "antonino61",
      "content": "Dear Wonko,\n\nI\u0027m afraid I inexorably have to agree with u on this too - the path of true knowledge knows no shortcuts. Knowledge is costly. The price to pay is devotion and dedication with a final reward that will pay u back in the end. What I was half-consciously trying to do is avoiding both, and the reward along with it. I was in the wrong, so I will delve into all there is to be known. Self-honesty is the only road to self-respect. Now I am having trouble with updating my video card drivers (btw, from geforce 47something.something it is almost impossible to simply update the drivers, and I think this is due to misplaced directories, so I will hold a big vhd with no misplacement in order to get these drivers installed and then I will restore the junction placement of folders). This is just another drawback I have forgotten to mention. as soon as I get this done I will try to get somewhere from misty\u0027s pe.\n\nnino\n\n"
    },
    {
      "id": "209338",
      "timestamp": "2019-02-17T04:04:41+00:00",
      "author": "alacran",
      "content": "I like to use Junction Links to install some games that do not let you install them on a diferent than C drive, also I have used Junction Links to avoid SSD wear sending to the secondary HDD all FireFox cache and defs folder of Avast, also using a RamDisk for Temp files, so I can say I\u0027m familiar with Junction Links and how to use them.\n\nBut my question here is this:\n\n**Isn\u0027t this approach you are using here very similar to Win 8.1 update 1 WimBoot install**, wich by the way give you smaller files (source and VHD)?\n\nI have used WimBoot installs creating 7, 8 and 8.1 (very small) VHDs wich are linked to a \\*.wim file (used as source for WimBoot). If that is the case I think [WinNTSetup](https://msfn.org/board/topic/149612-winntsetup-v3931/ \"External link\") can do it for you.\n\nI have to clarify I haven\u0027t tested WinNTSetup WimBoot installs with any Win 10 version as this is not my favorite OS.\n\nalacran\n\n"
    },
    {
      "id": "209343",
      "timestamp": "2019-02-17T11:35:13+00:00",
      "author": "wimb",
      "content": "\u003e **Isn\u0027t this approach you are using here very similar to Win 8.1 update 1 WimBoot install**, wich by the way give you smaller files (source and VHD)?\n\u003e\n[WinNTSetup](https://msfn.org/board/topic/149612-winntsetup-v3931/ \"External link\") can indeed be used for [**WIMBOOT**](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-8.1-and-8/dn594399(v\u003dwin.10) \"External link\") [Install](http://reboot.pro/topic/19715-windows-image-file-boot-wimboot/ \"\") of Win10 x64 in small VHD of Size 5 GB connected to file install.wim elsewhere on harddisk.\n\nThat does not mean that booting with Grub4dos from RAMDISK using SVBus driver is possible for such WIMBOOT VHD.\n\nNevertheless, it can be realised .... The VHD of Size 5GB is loaded into RAM in 45 seconds and then Win10 x64 is booting in 10 seconds from RAMDISK.\n\n[![W10x64_WIM_VHD-Setup-2019-02-17_115046.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-22810100-1550405737_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-22810100-1550405737.png \"W10x64_WIM_VHD-Setup-2019-02-17_115046.png - Size: 27.23KB\"){#ipb-attach-url-16423-0-75248000-1676066410} \u003d\u003d [![W10x64_WIM_VHD-SVBus-RAMDISK-2019-02-17_131143.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-11903900-1550405769_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-11903900-1550405769.png \"W10x64_WIM_VHD-SVBus-RAMDISK-2019-02-17_131143.png - Size: 486.21KB\"){#ipb-attach-url-16424-0-75266000-1676066410}\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "209349",
      "timestamp": "2019-02-17T22:09:15+00:00",
      "author": "alacran",
      "content": "@ wimb\n\nI made a wimboot install of W864ESP1 made first with your VHD_W8C_85 and installing on it Office 2003 (only Word and Excell), 7-Zip v18.06, diskmod and Sumatra PDF reader, then recaptured for wimboot (Express 4k) with [Winlib-clc](http://reboot.pro/topic/21861-wimlib-clc/ \"\") (wim file is 2 GB size) and copied this file to second partition (NTFS) on a USB 3.0 adapter (with a 32 GB Micro SD U1), then created a very small VHD 1.5 GB (but latter found 1 GB was enought) on same partition and installed on it on wimboot mode with WinNTSetup, so I used 2 GB for source image and 1.5 GB for VHD \u003d 3.5 GB total.\n\nJust yesterday used your UEFI_MULTI-87 to let me run linuxmint-19.1-cinnamon-64bit.iso from folder images (had to modify the menus a little), also put all my portables on first Fat32 partition so they can be used with all my Isos and boot.wim files, also from W864ESP1 as it has diskmod installed.\n\nBy the way just saw there is a new version of your great tool: [VHD_W8C_87-E](http://reboot.pro/files/file/299-vhd-w8-compact-make-mini-8/ \"\")\n\nI think a portable device with a Win10XPE is a much better option than a 5 GB Win10 VHD + source wim.\n\nBut a portable device with a 1 GB W864ESP1 VHD + 2 GB source wim sounds practical to me.\n\n"
    },
    {
      "id": "209350",
      "timestamp": "2019-02-17T22:10:38+00:00",
      "author": "antonino61",
      "content": "Well, 1 thing at a time:\n\n@wonko and the pre installation environment crew.\n\nAs I promised, after looking into the nvidia driver update, which stays almost impossible to make, unless one does not \"bake\" the vhd again ex novo (ie. from scratch), which I did (I am so used to it by now that i can make my-install-type vhd in half a day), I tried to study some of the pe world, namely winbuilder and pebakery. I must confess that I still do not know what a PE is for. I saw misty pe to see if some sort of comparison with what I have already in \\\\windows and windows\\\\system32 in order to follow a neater approach than just the empirical moving-files-about score by score. I have to admit that even playing with dependencies concerning exes to see wha dlls they were connected to did not yield substantially advantageous results - you finally come to the conclusion that almost all dlls are connected (and dlls make for the most conspicuous system32 folder content). Then, to stop feeling completely at a loss, I tried the empirical approach on the exes, to discover that the only ones u can move \"safely\" are those that do not accrue great advantages spacewise. they are so tiny that the free space on the vhd hardly changes. I tried moving all \\*.nls and it proved impossible to reboot. so I decided to give up after moving 4hundred something files that gave me a negligible extra free space.\n\n@Alacran\n\nFor the past few years I have only purported a somewhat untechnical philosophical idea of what windows shoud be in terms of folder placement. Taking cues from some linux distros that I have interpreted to the best of my poor knowledge and belief, the philosophy behind my initiative is that an operating system should take the user to the operating base (which for the average user is the desktop interface) with as few files and folders as possible, meaning only the strictly necessary software to take u there. all the rest should be someplace else. In other posts I have explained in more detail what the practical advantages of this are - to make it short, let me say that no matter how many windows builds I have tried (i love experimenting) i never had to even care to know what my password to this, my key to that or my sat tv channels (I have a tuner) are, because I simply overwrite the software containing sensible data from the program files and program data to the vhd and then back out with junctions, etc. so I hardly ever reinstall anything. this is enough for me to conclude that there is more to it than philosophy, or rather, if I had the technical knowledge that i unfortunately lack, let me tell you this in your language, ... otro gallo me hubiera cantado. all this is to say that the approach I use is that of installing the os on a 20gb vhd, debloating it, customizing it to suit my liking, moving all folders I can onto the drive hosting the vhd and leaving in only what wonko once called, very hilariously for that matter, a core version/part of windows, which is later cut into 3.5gb with vhd resizer. if you find this similar to winntsetup and wimboot, that is fine with me. much less fine is what wimb says about the size (he says 5gb). You will have reckoned that mine is mostly a manual post-install edition. if you can think of a script that could tell windows how to install and where to put which folders in the first place, on a pre-install basis, it would spare me the trouble of moving and junctioning them myself, as well as it would probably tell us what to avoid moving anywhere, if it is better for it to stay on c:\\\\.\n\n"
    },
    {
      "id": "209351",
      "timestamp": "2019-02-17T22:23:44+00:00",
      "author": "antonino61",
      "content": "anyway I wanna try for the sake of comparison. you never know. I already set the source, now I have two things to sort out. can boot drive and installation drive be 2 vhds?\n\n"
    },
    {
      "id": "209352",
      "timestamp": "2019-02-17T22:32:45+00:00",
      "author": "alacran",
      "content": "I don´t know if you saw my previous [post](http://reboot.pro/topic/21687-ramloading-windows-10-vhd-core/page-4#entry209349 \"\"), it seems to me we were tiping simultaneously, you only make one VHD where Win is installed as wimboot, but majority of all files on that VHD are linked to the source file wich is the same you use to make the install on the VHD, source files need to be available/redable from the VHD when you run the OS into the VHD.\n\n"
    },
    {
      "id": "209353",
      "timestamp": "2019-02-17T22:56:17+00:00",
      "author": "antonino61",
      "content": "yes I noticed that, but I have not yet succeeded in getting it installed. I downloaded winntsetup and image always fails\n\nI do not know what is wrong\n\ndo i have to choose a boot partition even in bios?\n\n"
    },
    {
      "id": "209355",
      "timestamp": "2019-02-17T22:58:15+00:00",
      "author": "antonino61",
      "content": "i tried with 3 different images that do work otherwise, but no dice\n\n"
    },
    {
      "id": "209356",
      "timestamp": "2019-02-17T23:09:50+00:00",
      "author": "alacran",
      "content": "\u003e yes I noticed that, but I have not yet succeeded in getting it installed. I downloaded winntsetup and image always fails\n\u003e\n\u003e I do not know what is wrong\n\u003e\n\u003e do i have to choose a boot partition even in bios?\n\nYes, you have to select the three:\n\nBoot partition (can be the same as install partition) as MBR needs a formated NTFS primary active partition, (or FAT32 for UEFI).\n\nInstall partition (on MBR can be the same as boot partition) needs to be a formated NTFS, primary partition.\n\nand Install.wim file location\n\n"
    },
    {
      "id": "209357",
      "timestamp": "2019-02-17T23:10:33+00:00",
      "author": "antonino61",
      "content": "to make it clear, My present boot drive is the host drive of the vhd, of program files, of program files (x86), of program data, of windows, of users and of the boot files (boot folder plus bootmgr) and grub4dos for preramloading. can all this be included in an install.wim file? is it worth my while, since it gets updated everytime I install anything?\n\nnino\n\n"
    },
    {
      "id": "209358",
      "timestamp": "2019-02-17T23:13:08+00:00",
      "author": "antonino61",
      "content": "these directories i have mentioned are not the original ones from the install.esd, but they are integrated with all software I have had for decades\n\nit is the stuff of hundreds of gigs\n\n"
    },
    {
      "id": "209359",
      "timestamp": "2019-02-17T23:27:34+00:00",
      "author": "alacran",
      "content": "Please re read my previous post I re edited it to make it more clear.\n\n\u003e to make it clear, My present boot drive is the host drive of the vhd, of program files, of program files (x86), of program data, of windows, of users and of the boot files (boot folder plus bootmgr) and grub4dos for preramloading. can all this be included in an install.wim file? is it worth my while, since it gets updated everytime I install anything?\n\nYes you can make a very big \\*.wim image but that would be usefull as backup, not for creating an small install.\n\nI suggest you to make a second partition or use a secondary disk or even better another PC to run experiments and do not mix with your working OS, and then start since the begining making a new fresh install on that partition.\n\n"
    },
    {
      "id": "209362",
      "timestamp": "2019-02-18T02:17:15+00:00",
      "author": "antonino61",
      "content": "I do not have another pc, nor do I have another disk. I have a couple of flash drives and some space on the existing drives on the existing pc. as I have explained to u, i have a vhd containing boot files and a slim part of windows containing slightly more than the minimum necessary to get to the interface + program files, program files (x86), programdata and users entrirely on d: (the host drive that the vhd is on). the folders on d: are junctioned to c: (the vhd). now, how would all this translate into winntsetup terms and conditions? I am willing to try, but pls, from here as much as possible. otherwise I find it hard to get everything back together, or at least I think so.\n\nnino\n\n"
    },
    {
      "id": "209377",
      "timestamp": "2019-02-19T07:56:04+00:00",
      "author": "wimb",
      "content": "The size of the **WIMBOOT** Install of Win10x64 in VHD can be reduced to **1 GB** when we take care to have no internet connection.\n\nAdditional drivers can be installed later by using a known Driverstore as source instead of letting Windows Update from internet doing this thing.\n\n[![W10x64_W3-SVBus-RAMDISK-2019-02-19_084056.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-98127100-1550562696_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-98127100-1550562696.png \"W10x64_W3-SVBus-RAMDISK-2019-02-19_084056.png - Size: 492.92KB\"){#ipb-attach-url-16428-0-75275400-1676066410} \u003d\u003d [![W10x64_W3-SVBus-RAMDISK-2019-02-19_103832.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-36548600-1550569280_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-36548600-1550569280.png \"W10x64_W3-SVBus-RAMDISK-2019-02-19_103832.png - Size: 511.13KB\"){#ipb-attach-url-16429-0-75283200-1676066410}\n\nIt is a nice result. :smile:\n\nA drawback is that RAMDISK booting is only available in BIOS mode booting and not in UEFI mode ....\n\nThis is due to the fact that **Grub4dos** booting is needed for using **SVBus** driver in booting from RAMDISK.\n\nThe VHD of Size 4 GB is loaded into RAM in 35 seconds and then Win10 x64 is booting in 10 seconds from RAMDISK.\n\nMore Info is [here](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209300 \"\")\n\n"
    },
    {
      "id": "209380",
      "timestamp": "2019-02-19T13:42:44+00:00",
      "author": "antonino61",
      "content": "Dear Wimb,\n\nI really appreciate your suggestions and links to tutorials. there are a lot of alternatives, If I only knew which one is the best for me! I have an install.wim, an empty vhd (not vhdx), some free usb drives, winpebakery, winntsetup. Pls tell me where to start from.\n\n"
    },
    {
      "id": "209381",
      "timestamp": "2019-02-19T14:03:16+00:00",
      "author": "antonino61",
      "content": "I also have other drives with some free space each, but in order to make it easiest for both, would you pls tell me what should be placed where in order to start successfully with minimal install?\n\n**Edited by antonino61, 19 February 2019 - 02:06 PM.**\n"
    },
    {
      "id": "209382",
      "timestamp": "2019-02-19T14:24:06+00:00",
      "author": "wimb",
      "content": "**[WinNTSetup](https://msfn.org/board/topic/149612-winntsetup-v3931/ \"External link\")** can be used for **WIMBOOT** Install of Win10 x64 in small VHD of Size 4 GB connected to file **install.wim** elsewhere on harddisk.\n\nDisconnect your LAN cable from the computer so that during Installation there is**NO Internet** connection (otherwise Installation grows too much)\n\n0. In x64 OS Run **WinNTSetup_x64.exe** (architectures must correspond)\n\n1. In **WinNTSetup** use **VHD\\\u003e\\\u003e\\\u003e** to Create VHD file of Size 5 GB on **NTFS** primary partition e.g. your drive C:\n\nThe VHD file is then auto mounted as the Y: **Installation drive**\n\n2. Select as **Windows Installation file** your **install.wim** , located in my case in folder C:\\\\WIM_SRC\\\\sources\n\nI have downloaded Win10_1803_English_x64.iso from [TechBench](https://tb.rg-adguard.net/public.php \"External link\") to get**fresh**install.wim file\n\n3. Select **Edition** - Windows 10 Home 1803\n\n4. Select **Tweaks** - Disable Hibernate and Disable Page file\n\n5. Usually the **Boot drive** is already auto selected, in my case the SSD_EFI drive mounted as Z: (otherwise Select your Boot Drive)\n\n6. Select **Mode WIMBOOT** and then Click **Setup** to start the Installation\n\nIt is important that all **4 control signs are green** (and not red, since then installation will fail)\n\n7. Reboot to finish the Installation\n\n[![W10x64_WIM_VHD-Setup-2019-02-17_115046.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-60390500-1550585436_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-60390500-1550585436.png \"W10x64_WIM_VHD-Setup-2019-02-17_115046.png - Size: 27.23KB\"){#ipb-attach-url-16430-0-75290500-1676066410}  \nIf you succeeded so far then: More Info on Next Steps you find [here](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209376 \"\")\n\n"
    },
    {
      "id": "209383",
      "timestamp": "2019-02-19T14:49:08+00:00",
      "author": "antonino61",
      "content": "What windows calls my c: drive has no room, it is only a vhd file hosted on what windows calls D:. Is this why winntsetup insists on failing the install process?\n\n"
    },
    {
      "id": "209384",
      "timestamp": "2019-02-19T15:30:35+00:00",
      "author": "wimb",
      "content": "Can you give Screenshots of DiskManagement and Windows Explorer showing your Drives ?\n\nAnd give Screenshot of your WinNTSetup configuration.\n\n"
    },
    {
      "id": "209385",
      "timestamp": "2019-02-19T15:44:44+00:00",
      "author": "antonino61",
      "content": "sure, I have also taken pics of them, if only I knew how to send them here!\n\n"
    },
    {
      "id": "209386",
      "timestamp": "2019-02-19T16:03:50+00:00",
      "author": "wimb",
      "content": "Download FSCapture Portable [http://www.faststone...ptureDetail.htm](http://www.faststone.org/FSCaptureDetail.htm \"External link\")\n\n"
    },
    {
      "id": "209387",
      "timestamp": "2019-02-19T16:20:53+00:00",
      "author": "antonino61",
      "content": "i did copy what I shot, but how do i paste it in here?\n\n"
    },
    {
      "id": "209388",
      "timestamp": "2019-02-19T16:23:36+00:00",
      "author": "wimb",
      "content": "Via More Reply Options you can Attach Files ....\n\n"
    },
    {
      "id": "209389",
      "timestamp": "2019-02-19T16:26:11+00:00",
      "author": "antonino61",
      "content": "it gives me a url to fill in\n\n"
    },
    {
      "id": "209398",
      "timestamp": "2019-02-19T20:14:24+00:00",
      "author": "wimb",
      "content": "After you click on **More Reply Options** you should get the second picture.\n\nBelow **Attach Files** you can Select and**Attach** Sreenshot File and then **Add to Post**\n\n[![MoreReply2019-02-19_210734.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-90864500-1550607083_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-90864500-1550607083.png \"MoreReply2019-02-19_210734.png - Size: 20.95KB\"){#ipb-attach-url-16431-0-07317500-1676066411} \u003d\u003d [![Reply-2019-02-19_211252.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-46835300-1550607214_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-46835300-1550607214.png \"Reply-2019-02-19_211252.png - Size: 399.52KB\"){#ipb-attach-url-16432-0-07330600-1676066411}\n\nOr don\u0027t you have these More Reply Options ?\n\n"
    },
    {
      "id": "209399",
      "timestamp": "2019-02-19T20:45:36+00:00",
      "author": "antonino61",
      "content": "i do not have the attach file when I click on the options, i would send u all by email\n\n"
    },
    {
      "id": "209403",
      "timestamp": "2019-02-20T07:24:40+00:00",
      "author": "wimb",
      "content": "\u003e What windows calls my c: drive has no room, it is only a vhd file hosted on what windows calls D:. Is this why winntsetup insists on failing the install process?\n\nHas D: drive **NTFS** FileSystem and is it a primary partition ? Then it can work.\n\nIf you do not have 10 GB of free space on your C: drive then it is time to make free space. :wink:\n\nIn **x64** OS you must use WinNTSetup_**x64**.exe (architectures must correspond).\n\nHow is your machine booting ? UEFI or BIOS mode ? What and where is your BOOT Drive ?\n\nWhat type of partitioning has your harddisk ? GPT Or MBR ?\n\nDid you use fresh install.wim from [TechBench](https://tb.rg-adguard.net/public.php \"External link\") ?\n\nAt what step of WinNTSetup Pre-Installation or stage of Win10 x64 Install do you get Error ? And what is exactly the Error that you get ?\n\n"
    },
    {
      "id": "209405",
      "timestamp": "2019-02-20T15:18:57+00:00",
      "author": "antonino61",
      "content": "D: drive has **NTFS** FileSystem and it is a primary partition. Then it should work.\n\nI do not have 10 GB of free space on my C: drive, so I will expand my vhd to, say, 15gigs, or rather, make it 20gb. :wink:\n\nIn **x64** OS I always use WinNTSetup_**x64**.exe (so architectures do correspond).\n\nMy machine is booting in BIOS mode. My boot drive (d:\\\\ for windows) is the host of the vhd (c.\\\\ for windows), which is on the root of the drive. I do not have gpts, I only have mbrs.\n\nI Did use a fresh install.wim from [TechBench](https://tb.rg-adguard.net/public.php \"External link\").\n\nI get the error as soon as I click the start operation button. it stops right at the start by saying that it has suddenly stopped. It leaves all the disks chosen intact, though - it crashes but does not screw up the rest, at least.\n\n"
    },
    {
      "id": "209406",
      "timestamp": "2019-02-20T15:58:54+00:00",
      "author": "wimb",
      "content": "OK I understand.\n\nDid you use WinNTSetup to **Create fresh empty VHD** of 5 GB, which will be auto mounted as drive Y: ?\n\nOf course the VHD should **NOT** be created **inside** your VHD drive C: but rather should be Created by WinNTSetup in Drive D:\n\nAnd also your fresh install.wim must be located on Drive D: which is a **NTFS primary partition** of your local harddisk.\n\nAnd how about the **4 control signs** : are they all **green** ?\n\nAre you booting in BIOS mode with Windows Boot Manager Menu Or with Grub4dos Menu ?\n\nOf course it should be Windows Boot Manager.\n\n[![W10x64_WIM_VHD-Setup-2019-02-17_115046.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-60390500-1550585436_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-60390500-1550585436.png \"W10x64_WIM_VHD-Setup-2019-02-17_115046.png - Size: 27.23KB\"){#ipb-attach-url-16430-0-10733700-1675504342}\n\n"
    },
    {
      "id": "209407",
      "timestamp": "2019-02-20T16:52:17+00:00",
      "author": "antonino61",
      "content": "I used WinNTSetup to **Create fresh empty VHD** of 27 GB, which was auto mounted as drive Y: .\n\nOf course the VHD was **NOT** created **inside** my VHD drive C: but was rather Created by WinNTSetup in Drive D:\n\nAnd also my fresh install.wim was located on Drive D: which is the only **primary partition** (NTFS) of my local harddisk.\n\nThe **4 control signs** : are all **green.**\n\n"
    },
    {
      "id": "209408",
      "timestamp": "2019-02-20T16:54:06+00:00",
      "author": "wimb",
      "content": "OK I understand.\n\nAre you booting in BIOS mode with Windows Boot Manager Menu Or with Grub4dos Menu ?\n\nOf course it should be Windows Boot Manager for Install of Win10 x64 in new fresh created VHD.\n\nFor booting as WIMBOOT VHD then Size of 5 GB is advised and is sufficient.\n\n"
    },
    {
      "id": "209409",
      "timestamp": "2019-02-20T18:09:08+00:00",
      "author": "antonino61",
      "content": "booting in bios mode with bootmgr.\n\nAs for 27gb, I did not, the software did. I thought of reducing its size later with vhd resizer.\n\ndo you think it crashes because of this?\n\nnino\n\n"
    },
    {
      "id": "209410",
      "timestamp": "2019-02-20T18:12:03+00:00",
      "author": "wimb",
      "content": "I think the 27 GB is no problem.\n\nAs far as I can see everything is OK and I do NOT understand why WinNTSetup fails in your case ....\n\nWhat occurs when:\n\nOpen with R-mouse Admin Command Window\n\nType command:\n\n```\ndism /?\n```\n\nI just want to check if dism is working OK for you in your \"special\" VHD\n\n"
    },
    {
      "id": "209411",
      "timestamp": "2019-02-20T20:43:03+00:00",
      "author": "antonino61",
      "content": "when I type what u suggested I type,\n\nthe response is\n\nDeployment Image Servicing and Management Tool,\n\nVersion 10.0.16299.15\n\nfollowed by a sort of tutorial as to the proper syntax\n\n"
    },
    {
      "id": "209412",
      "timestamp": "2019-02-20T20:44:54+00:00",
      "author": "antonino61",
      "content": "btw, I also have dism++ as software\n\ndo u think anything could be alternatively done thru that?\n\n"
    },
    {
      "id": "209413",
      "timestamp": "2019-02-20T21:31:41+00:00",
      "author": "wimb",
      "content": "Thanks for testing.\n\nEverything seems OK. So I am sorry but there is no solution yet ....\n\n"
    },
    {
      "id": "209414",
      "timestamp": "2019-02-20T21:49:23+00:00",
      "author": "antonino61",
      "content": "Ok, nice try, but can you identify the final file and folder structure that we would have obtained at the end if the experiment had been successful? if so, i am willing to reproduce it manually or with junctions and give it a go, even if it takes a little longer. the procedures can be memorized and it would not take that long in the long run.\n\n"
    },
    {
      "id": "209416",
      "timestamp": "2019-02-21T00:52:51+00:00",
      "author": "alacran",
      "content": "I have ran WinNTSetup from any WinPE so it means it can run from a very basical OS.\n\nAnyway I will suggest you to delete all done for this test and have a fresh start, when you decompress WinNTSetup on a folder and run WinNTSetup_x64.exe for the first time, it ask you to download some files and folders, you must do it before anything else. Then after this follow wimb instructions.\n\nWhat I usually do is make an standard install on a VHD, never connect to internet, install all software required/I want, and then from a WinPE or another OS, load and capture as Wimboot (express 4k) with [wimlib-clc](http://reboot.pro/topic/21861-wimlib-clc/ \"\") as a new \\*.wim with all required inside it, and then use this as source for a new wimboot install on a new VHD, this way you get better results, as the less you add to your wimboot OS on VHD, the less it grow up.\n\nif you still have problems, something is wrong with your OS.\n\nBecause since you are not runing WinNTSetup from an stardard PE or OS (full install or a Compact or Wimboot install on HD or VHD), and what you are running is basically a highly modified OS install, it is very dificult for any one to try to help you, as nobody else have an OS modified same way as yours to reproduce the issues and find the cause. This is a frequent trouble when people start chopping the OS, something will fail, but you will not see it until you need it.\n\nI have modified my install ISO of Win10 1709 (see [here](http://reboot.pro/topic/21852-make-your-own-updated-x86x64-esds-to-install-oss-from-usb/ \"\")) but usually only removing apps and adding directX 9c (not removing anything critical from OS), I used**MSMG ToolKit** v8.8 and all working fine so far (not good for 1803 and following), modifing version 1809 is not free of troubles.\n\nAnyway if you want to know what this wimboot mode capture or install does see a file located on your OS on **C:\\\\Windows\\\\System32\\\\WimBootCompress.ini**, this are the instructions to WinNTSetup, Dism or wimlib-clc for a wimboot capture and install.\n\nRemember the source .wim file is also required as all not decompressed files and folders on the VHD are only hard links (reparse points) pointers to file within the \\*.wim file\n\nFor deeper info on wimboot see this old (but very informative) thread: [http://reboot.pro/to...e-boot-wimboot/](http://reboot.pro/topic/19715-windows-image-file-boot-wimboot/ \"\")\n\nalacran\n\n"
    },
    {
      "id": "209417",
      "timestamp": "2019-02-21T12:53:16+00:00",
      "author": "wimb",
      "content": "\u003e What I usually do is make an standard install on a VHD, never connect to internet, install all software required/I want, and then from a WinPE or another OS, load and capture as Wimboot (express 4k) with [wimlib-clc](http://reboot.pro/topic/21861-wimlib-clc/ \"\") as a new \\*.wim with all required inside it, and then use this as source for a new wimboot install on a new VHD, this way you get better results, as the less you add to your wimboot OS on VHD, the less it grow up.\n\u003e\nThank you **alacran :smile:** I followed your advise and have obtained again a nice reduction in size of the C: drive which is now less than 600 MB\n\nThe VHD of Size 2 GB is loaded into RAM in 20 seconds and then Win10 x64 is booting in 10 seconds from RAMDISK.\n\nWhen you use the CAPTURED WIM file for next install, then everything like drivers, settings and added programs is already OK. :cool:\n\nThanks to [wimlib](https://wimlib.net/index.html \"External link\") of **synchronicity** (More Info: [here](http://reboot.pro/topic/18345-wimlib-with-imagex-implementation/ \"\")) combined with [wimlib-clc](http://reboot.pro/topic/21861-wimlib-clc/ \"\") of **ReTokener** :smile:\n\nThe **CAPTURE** of mounted VHD drive K:\\\\ as file **instw3.wim** saves a lot of time for next Install and there is quite a reduction in Size of the C: drive.\n\n[![wimlib-clc-W3-2019-02-21_163029.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-94294600-1550763147_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-94294600-1550763147.png \"wimlib-clc-W3-2019-02-21_163029.png - Size: 212.9KB\"){#ipb-attach-url-16436-0-07361700-1676066411} \u003d\u003d [![W10x64_W3C-SVBus-RAM-2019-02-21_134113.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-82268800-1550753314_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-82268800-1550753314.png \"W10x64_W3C-SVBus-RAM-2019-02-21_134113.png - Size: 509.96KB\"){#ipb-attach-url-16433-0-07339400-1676066411} \u003d\u003d [![W10x64_W32-SVBus-RAM-2019-02-21_142257.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-32328800-1550755528_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-32328800-1550755528.png \"W10x64_W32-SVBus-RAM-2019-02-21_142257.png - Size: 489.53KB\"){#ipb-attach-url-16434-0-07347500-1676066411} \u003d\u003d [![W10x64_W3C-VHD-7-zip-2019-02-21_152605.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-26116100-1550759387_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-26116100-1550759387.png \"W10x64_W3C-VHD-7-zip-2019-02-21_152605.png - Size: 449.72KB\"){#ipb-attach-url-16435-0-07354700-1676066411}\n\nInspection of the VHD in **7-zip** shows a lot about which files have non zero packed size in the VHD (and are probably important for booting) and what Hardlinks do occur.\n\n"
    },
    {
      "id": "209419",
      "timestamp": "2019-02-21T16:51:57+00:00",
      "author": "antonino61",
      "content": "@Alacran and Wimb,\n\nthank u ever so much for your patience and consideration.\n\nI really would like to try, at least to compare my system as it is to the wimboot alternative u suggest, both in terms of space occupied and in terms of time (speed).\n\nA few caveats, though, want specifying, I guess.\n\nI have my system run entirely as bare metal vhd. I do not have any regular os install on any disk. I have no pagefile.sys, no hiberfile.sys, no swapfile.sys. in the wincompress.ini file u told me to go look, I see these files mentioned (probably an instruction not to compress them). is this were winntsetup might hang (at not finding these files anywhere)? I just wonder because we were looking for a reason for failure last night.\n\nAs regards the post installation of the rest of the applications I have, will it not affect the size of the wimboot? In a post u advised that I peruse, I noticed some instruction of the type \"do not install many applications lest the wimboot should get bigger and bigger\".\n\nTalking about installations of other applications, believe me, with windows 10, I hardly ever install anything. everything has been working for years from the state it has always been in even from previous os\u0027es!\n\nNow supposing I get to succeed in installing winntsetup, i will keep the wim file always \"attached\" to it, right? I guess so. But, what price now the other software whose data is now in d:\\\\program files, d:\\\\program files (x86), d:\\\\program data (totaling about 9gb) and d:\\\\users\\\\antonino\\\\appdata (6.5gb) and probably some registry files scattered here and there in d:\\\\users which I do not know to what extent can be overlooked? the data that allow me not to (or better still suggest that I should not) reinstall are located right in these folders. this is how I keep my data across installations.\n\n"
    },
    {
      "id": "209420",
      "timestamp": "2019-02-21T20:23:07+00:00",
      "author": "wimb",
      "content": "The failure of WinNTSetup in your case is certainly not because of missing hiberfile.sys or pagefile.sys.\n\nJust like you I do not have these files, but I have no problem with WinNTSetup.\n\nI think what you need is a properly fresh installed Win10 x64 operating system.\n\nYou might add a 250 GB SSD to your system and\n\nthen boot with USB-Stick made with [Media Creation Tool](https://www.microsoft.com/en-us/software-download/windows10 \"External link\") for fresh Install of Win10 x64 on this SSD.\n\nThe advantage would be that you also still can use your old modified core VHD by selecting it in Boot Manager menu.\n\nIf you have a lot of free space on your drive D: then you might consider instead of adding a SSD\n\nto boot with Win10XPE and use WinNTSetup for a fresh install of Win10 x64 in 25 GB VHDX.\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "209424",
      "timestamp": "2019-02-21T22:25:03+00:00",
      "author": "antonino61",
      "content": "Thanks again, wimb.\n\nAmong the many alternatives I have before my eyes, would a 64gb flash drive do? if so, tell me what I should already have on this flash drive to make the install independent of what I have on onboard mass storage in order to not mess with it. if I can copy d:\\\\program files, d:\\\\program files (x86), d:\\\\programdata and d:\\\\users\\\\antonino\\\\appdata and small stuff from d:\\\\users as well into this usb in order to act as if I had only this, so much the better. or should I alternatively try the vhdx option on the existing d:\\\\ drive and leave all as it is?\n\nnino\n\n"
    },
    {
      "id": "209426",
      "timestamp": "2019-02-22T00:26:38+00:00",
      "author": "alacran",
      "content": "On wimlib-clc it is easier and it applies automatically the wimboot flag to captured \\*.wim image with an express 4k compression just by selecting **wimboot option** like in attached picture (no need to select compress option), **I suggest to** **activate Tool Tips on Options Main Menu to get more info** of all features and its options.\n\nAlso you can use same **wimboot option** on Apply, Extract/Verify and Export/Optimize Tabs, doing so wimlib-clc always will use Express 4k compression and apply wimboot flag if required.\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![Wimboot Compression.png](http://reboot.pro/uploads/monthly_02_2019/post-26560-0-88338500-1550795181_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-26560-0-88338500-1550795181.png \"Wimboot Compression.png - Size: 103.59KB\"){#ipb-attach-url-16437-0-07368500-1676066411}\n\n"
    },
    {
      "id": "209428",
      "timestamp": "2019-02-22T05:55:19+00:00",
      "author": "wimb",
      "content": "\u003e Thanks again, wimb.\n\u003e\n\u003e Among the many alternatives I have before my eyes, would a 64gb flash drive do? if so, tell me what I should already have on this flash drive to make the install independent of what I have on onboard mass storage in order to not mess with it. if I can copy d:\\\\program files, d:\\\\program files (x86), d:\\\\programdata and d:\\\\users\\\\antonino\\\\appdata and small stuff from d:\\\\users as well into this usb in order to act as if I had only this, so much the better. or should I alternatively try the vhdx option on the existing d:\\\\ drive and leave all as it is?\n\u003e\n\u003e nino\n\nA 64 GB flash drive is to slow, you need SSD.\n\nBut the best is that you first try the fresh install intoVHDX option on your existing D:\\\\ drive and that you leave all existing stuff as it is.\n\n"
    },
    {
      "id": "209430",
      "timestamp": "2019-02-22T07:05:05+00:00",
      "author": "wimb",
      "content": "\u003e On wimlib-clc it is easier and it applies automatically the wimboot flag to captured \\*.wim image with an express 4k compression just by selecting **wimboot option** like in attached picture (no need to select compress option), **I suggest to** **activate Tool Tips on Options Main Menu to get more info** of all features and its options.\n\u003e\nWhen I use wimboot option in wimlib-clc then I get a WARNING for Unrecognized Section in file WimBootCompress.ini\n\n```\n[PinningFolderList]\n\\Windows\\System32\\config\n\\Windows\\System32\\DriverStore\n\\Windows\\WinSxS\n\n```\n\nIs it possible to modify an existing instw3.wim ? The program winlib-clc always wants to overwrite everything.\n\nI tried to use APPEND but that fails with ERROR Message\n\n[![wimlib-wimboot-2019-02-22_070121.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-22059100-1550819212_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-22059100-1550819212.png \"wimlib-wimboot-2019-02-22_070121.png - Size: 25.73KB\"){#ipb-attach-url-16441-0-07385300-1676066411} \u003d\u003d [![wimlib-WARNING-2019-02-22_070750.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-02576300-1550819067_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-02576300-1550819067.png \"wimlib-WARNING-2019-02-22_070750.png - Size: 34.72KB\"){#ipb-attach-url-16439-0-07373100-1676066411} \u003d\u003d [![wimlib-APPEND-Error-2019-02-22_072804.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-85509800-1550819084_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-85509800-1550819084.png \"wimlib-APPEND-Error-2019-02-22_072804.png - Size: 31.2KB\"){#ipb-attach-url-16440-0-07379000-1676066411}\n\nAnyway I am quite happy with the normal CAPTURE and with my 8 threads it is quite fast to create new wim file.\n\nInstead of using WiNTSetup I have used also APPLY option where **Selected** Target Image Path is the mounted VHD after using **Format**button.\n\n"
    },
    {
      "id": "209434",
      "timestamp": "2019-02-22T15:19:36+00:00",
      "author": "quarky42",
      "content": "\u003e A 64 GB flash drive is to slow, you need SSD.  \n\u003e But the best is that you first try the fresh install intoVHDX option on your existing D:\\\\ drive and that you leave all existing stuff as it is.\n\nThere are higher speed Flash Drives out there that can handle 100 MB/s and more. I agree that most flash drives aren\u0027t up to the task, but my ramdisk loads from one in about 3 minutes. So it can be done if the right hardware is chosen.   \n"
    },
    {
      "id": "209435",
      "timestamp": "2019-02-22T15:24:23+00:00",
      "author": "antonino61",
      "content": "so, by taking wimb\u0027s advice. I shall have\n\n1) my d:\\\\ drive where I am supposed to leave everything as it is;\n\n2) a 5gb? vhdx file on my d:\\\\ drive, if I am not mistaken;\n\n3) what else and where (wimboot or wimlib or winntsetup?)?\n\nnino\n\n"
    },
    {
      "id": "209436",
      "timestamp": "2019-02-22T16:14:40+00:00",
      "author": "wimb",
      "content": "\u003e so, by taking wimb\u0027s advice. I shall have\n\u003e\n\u003e 1) my d:\\\\ drive where I am supposed to leave everything as it is;\n\u003e\n\u003e 2) a 5gb? vhdx file on my d:\\\\ drive, if I am not mistaken;\n\u003e\n\u003e 3) what else and where (wimboot or wimlib or winntsetup?)?\n\u003e\n\u003e nino\n\n1) OK\n\n2) NOT OK\n\n- You need to boot with **Win10XPE** and use WinNTSetup to make a 25 GB VHDX for Install of fresh Win10 x64\n\n- Then you will have at least a properly fresh installed win10 x64 OS, in which you later can use WinNTSetup for WIMBOOT install as proposed in 5 GB VHD\n\n3) Nothing else yet\n\nRemember your present Win10 OS is not suitable to run WinNTSetup.\n\nSo it will be wise to have a properly fresh installed Win10 x64 OS in VHDX\n\n"
    },
    {
      "id": "209437",
      "timestamp": "2019-02-22T16:27:36+00:00",
      "author": "antonino61",
      "content": "So, let us make point 2 clear:\n\nI need to boot what with **Win10XPE? maybe this is what is still cloudy to me: is win10xpe a version of windows? if so, do I make it or is it already made?**\n\nWinNTSetup to make a 25 GB VHDX - I might as well have computer management make a 25gb vhdx, or do I have to use winntsetup perforce?\n\neither way, what is the source of win10 x64? can it be any or must it be just a recommended one?\n\nin whatever way, I will hopefully get a properly fresh installed win10 x64 OS, fine; what media will hold it? the 25gb vhdx or anything else?\n\nonce within this install, if I have understood correctly, I can later use WinNTSetup for WIMBOOT install as proposed in 5 GB VHD, which will reside in the d:\\\\ drive, or anyplace else? if it is on the d:\\\\ drive, so much the better for me, even better still if everything (vhd, vhdx and what else I have lost track of) is on the D:\\\\ drive. I hope I am on my way to getting my head together, in spite of your patience, consideration and dedication.\n\nnino\n\n"
    },
    {
      "id": "209438",
      "timestamp": "2019-02-22T16:38:59+00:00",
      "author": "wimb",
      "content": "All needed Info is given already [here](http://reboot.pro/topic/21687-ramloading-windows-10-vhd-core/?p\u003d209420 \"\")\n\n"
    },
    {
      "id": "209439",
      "timestamp": "2019-02-22T17:18:31+00:00",
      "author": "antonino61",
      "content": "Yes, correct, too much info, so much that I run the risk of doing the wrong things and take the right ones amiss. so many solutions differ for what could be taken for little trifle when we all know it is not. For example, what is not clear is whether these operations are all to be made from gui or from a pre-windows-interface environment. I have downloaded so much software for the purpose that I really cannot tell what I need from what I need not. I feel I am only left with my willingness to try, but it is still too little. with all the knowledge I have acquired from the file(s) you guys indicated, I honestly do not know where to start from. I have tried to check tutorials on youtube, which would make it much easier for me to mime or replicate all the actions. but to no avail - i haven\u0027t found anything that is described in the files u recommended - they are showing other things altogether.\n\nFor the sake of comparison, the preramloading process with grub4dos was sort of easy to follow because of the presence of a host of youtube tutorials together with written tutorials. If only I could have the same scenario for wimboot, winntsetup etc. instead of just pictures and text, I would already have tried.\n\n**Edited by antonino61, 22 February 2019 - 05:19 PM.**\n"
    },
    {
      "id": "209448",
      "timestamp": "2019-02-23T05:41:37+00:00",
      "author": "alacran",
      "content": "\u003e When I use wimboot option in wimlib-clc then I get a WARNING for Unrecognized Section in file WimBootCompress.ini\n\u003e\n\u003e ```\n\u003e [PinningFolderList]\n\u003e \\Windows\\System32\\config\n\u003e \\Windows\\System32\\DriverStore\n\u003e \\Windows\\WinSxS\n\u003e\n\u003e ```\n\u003e\n\u003e Is it possible to modify an existing instw3.wim ? The program winlib-clc always wants to overwrite everything.\n\u003e\n\u003e I tried to use APPEND but that fails with ERROR Message\n\u003e\n\u003e ![attachicon.gif](http://reboot.pro/public/style_images/metro/attachicon.gif)[wimlib-wimboot-2019-02-22_070121.png](http://reboot.pro/index.php?app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_rel_module\u003dpost\u0026attach_id\u003d16441 \"\") \u003d\u003d ![attachicon.gif](http://reboot.pro/public/style_images/metro/attachicon.gif)[wimlib-WARNING-2019-02-22_070750.png](http://reboot.pro/index.php?app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_rel_module\u003dpost\u0026attach_id\u003d16439 \"\") \u003d\u003d ![attachicon.gif](http://reboot.pro/public/style_images/metro/attachicon.gif)[wimlib-APPEND-Error-2019-02-22_072804.png](http://reboot.pro/index.php?app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_rel_module\u003dpost\u0026attach_id\u003d16440 \"\")\n\u003e\n\u003e Anyway I am quite happy with the normal CAPTURE and with my 8 threads it is quite fast to create new wim file.\n\u003e\n\u003e Instead of using WiNTSetup I have used also APPLY option where **Selected** Target Image Path is the mounted VHD after using **Format**button.\n\nJust made a [post on wimlib-clc thread](http://reboot.pro/topic/21861-wimlib-clc/#entry209446 \"\") asking ReTokener to take a look to this issue, he has made all progam code since the begining, I\u0027m only Beta Tester and Spanish translator (and a big fan of the clc).\n\nRemember wimlib-cllc is a GUI and all it can do is what wimlib-imagex can do, no more, no less.\n\nAPPEND is for adding a new image to a wim file not to modify actual image. To modify an image use UPDATE, all you add will overwrite previous info without asking, to delete something use INFO/DELETE.\n\nBy mens of lists you can extract and add (inject) files/folders as MistyPE and ChrisPE do, using wimlib-imagex on command line (and recently coded into PEBakery codes) during PE creation.\n\nWhen trying to add a little .dll or other kind of small dependencies to a boot.wim, I have used a dirty trick, open the .wim with 7z, select the image number go to desired location and just drag and drop the file(s), They will be added to the image contained on the .wim (but uncompressed), then it is possible to run a quick test and if all is fine latter OPTIMIZE the .wim to recompress all files not compressed. This is a very fast operation.\n\nYes APPLY tab is very usefull too, **wimlib-clc is my back-up favorite program**, first Capture takes some time but following updates or deltas are very fast.\n\nIn CAPTURE tab using CAPTURE you create a new .wim file, using APPEND you may create a new image (with a new name) into the same .wim file, and you may also use \"Delta from...\" or \"Update of...\" or both options togeter (the faster mode), but there are some little files that are not updated this way, see my post about this here: [https://wimlib.net/f...c.php?f\u003d1\\\u0026t\u003d365](https://wimlib.net/forums/viewtopic.php?f\u003d1\u0026t\u003d365 \"External link\")\n\nalacran\n\n"
    },
    {
      "id": "209450",
      "timestamp": "2019-02-23T13:41:36+00:00",
      "author": "Tokener",
      "content": "@wimb #124\n\ndear wimb\n\nthank you for testing Wimlib-clc, this is a great honor for me.\n\nWimlib-clc should only compile the command line.\n\nTo exclude that Wimlib-clc causes the error, you can read out the command line from the log file (if activated) and execute it in the console.\n\nIf the error appears again something else causes it.\n\nRegards T.\n\n"
    },
    {
      "id": "209451",
      "timestamp": "2019-02-23T13:52:20+00:00",
      "author": "antonino61",
      "content": "Dear Alacran,\n\nI spent yesterday evening trying to play with the following:  \nmd d:\\\\mount\\\\Windows  \nDism /Mount-Image /ImageFile:\"d:\\\\Images\\\\install.wim\" /Index:1 /MountDir:d:\\\\mount\\\\Windows  \nattrib --s -h d:\\\\mount\\\\windows\\\\Windows\\\\System32\\\\Recovery\\\\winre.wim  \nmove d:\\\\mount\\\\Windows\\\\Windows\\\\System32\\\\Recovery\\\\winre.wim d:\\\\images\\\\winre.wim  \nDism /Optimize-Image /Image:d:\\\\mount\\\\Windows /WIMBoot  \nDism /Unmount-Image /MountDir:d:\\\\mount\\\\Windows /Commit  \nDism /export-image /wimboot /sourceimagefile:d:\\\\images\\\\install.wim /sourceindex:1 /destinationimagefile:d:\\\\images\\\\install_wimboot.wim  \nAs a result, in d:\\\\images I obtained  \nwinre.wim (359mb)  \ninstall.wim (3004mb)  \ninstall_wimboot.wim (3193mb)  \nI could not get to install winpe, though. I tried with windows adk and the software u recommended - no dice.  \nthen I spent this morning trying to capture program files, program files (x86), programdata, users and windows into an image, which added bigwim.wim (47something gb) to d:\\\\images (gimagex said there were some extended attributes that it could not include in the image).  \nAm I getting any closer to the aim?  \nnino\n\n**Edited by antonino61, 23 February 2019 - 01:53 PM.**\n"
    },
    {
      "id": "209455",
      "timestamp": "2019-02-23T15:49:21+00:00",
      "author": "wimb",
      "content": "\u003e Wimlib-clc should only compile the command line.\n\u003e\n\u003e To exclude that Wimlib-clc causes the error, you can read out the command line from the log file (if activated) and execute it in the console.\n\u003e\n\u003e If the error appears again something else causes it.\n\u003e\nThank you for your very nice program wimlib-clc :smile:\n\nWhen using wimlib-clc then I get the WARNING\n\nWhen the command is executed then there is no warning.\n\nThe Screenshots shows what I did and what I observed.\n\nThanks for your help in solving the (minor) issue.\n\n[![wimlib-WARNING-2019-02-23_163332.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-99315500-1550936669_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-99315500-1550936669.png \"wimlib-WARNING-2019-02-23_163332.png - Size: 542.87KB\"){#ipb-attach-url-16445-0-35390200-1676066411} \u003d\u003d [![wimlib-cmd-2019-02-23_163600.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-78888000-1550936694_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-78888000-1550936694.png \"wimlib-cmd-2019-02-23_163600.png - Size: 545.19KB\"){#ipb-attach-url-16446-0-35404100-1676066411} \u003d\u003d [![winlib-cmd-83-2019-02-23_163802.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-78472400-1550936712_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-78472400-1550936712.png \"winlib-cmd-83-2019-02-23_163802.png - Size: 569.19KB\"){#ipb-attach-url-16447-0-35412900-1676066411}\n\n"
    },
    {
      "id": "209456",
      "timestamp": "2019-02-23T17:33:58+00:00",
      "author": "Tokener",
      "content": "dear wimb\n\nthanks for excluding this.\n\nIn the moment I can not replicate this kind of capturing because I have no \"wimboot-system\".\n\nBut there must be a fix ...\n\nT.\n\n"
    },
    {
      "id": "209457",
      "timestamp": "2019-02-23T18:09:37+00:00",
      "author": "Tokener",
      "content": "dear wimb\n\nJust tried the following:\n\ncopied wimbootcomress.ini \\[Edit: (containing the mentioned \"\\[PinningFolderList\\]\"-section**)\\]**to:\n\n**C:\\\\programData\\\\Windows\\\\system32\\\\wimbootcompress.ini**\n\nthen\n\ncaptured C:\\\\programdata with wimboot-option by wimlib-clc: (NO config-file specified!)\n\u003e\n\u003e **B:\\\\WIMLIB\\~1.EXE append C:\\\\ProgramData B:\\\\ProgramData.wim \"ProgramData_190223_184911\" \"C:/ProgramData\" --include-integrity --wimboot**\n\nPopup appeared as seen on the screenshots above, giving a WARNING.\n\nRunning the same command in the console returned this:\n\u003e\n\u003e C:\\\\Windows\\\\system32\\\u003eB:\\\\WIMLIB\\~1.EXE append C:\\\\ProgramData B:\\\\ProgramData.wim \"Pr  \n\u003e ogramData_190223_184911\" \"C:/ProgramData\" --include-integrity --wimboot  \n\u003e **\\[WARNING\\] C:\\\\ProgramData\\\\Windows\\\\System32\\\\WimBootCompress.ini:5: Unrecognized se\n\u003e ction \"\\[PinningFolderList\\]\"**   \n\u003e Scanning \"C:\\\\ProgramData\"  \n\u003e 272 MiB scanned (712 files, 245 directories)  \n\u003e Setting the DESCRIPTION property of image 10 to \"C:/ProgramData\".  \n\u003e Using XPRESS compression with 8 threads  \n\u003e Archiving file data: 0 bytes of 0 bytes (0%) done  \n\u003e Calculating integrity table for WIM: 114 MiB of 114 MiB (100%) done\n\nThe third picture you posted shows console window with wimlib-imagex has finished capturing.\n\nIs the WARNING given in the returned lines above?\n\nThe Popup does not appear in console-window execution - it is a feature of wimlib-clc.\n\nBTW \"**PinningFolderList\"**has no match on Google.\n\nRegards T.\n\n"
    },
    {
      "id": "209458",
      "timestamp": "2019-02-23T19:01:29+00:00",
      "author": "Tokener",
      "content": "Ooops\n\nI was not quite right:\n\nGoogle found this:\n\n[https://wimlib.net/f...c.php?f\u003d1\\\u0026t\u003d368](https://wimlib.net/forums/viewtopic.php?f\u003d1\u0026t\u003d368 \"External link\")\n\n"
    },
    {
      "id": "209460",
      "timestamp": "2019-02-23T22:24:37+00:00",
      "author": "wimb",
      "content": "The WARNING appears indeed also in the command window.\n\nSorry that I missed it. So the issue is not caused by your program.\n\n[![wimlib-cmd -WARNING-2019-02-23_231518.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-22275100-1550960652_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-22275100-1550960652.png \"wimlib-cmd -WARNING-2019-02-23_231518.png - Size: 39.36KB\"){#ipb-attach-url-16448-0-35420600-1676066411}\n\n"
    },
    {
      "id": "209464",
      "timestamp": "2019-02-24T02:21:25+00:00",
      "author": "alacran",
      "content": "@ antonino61\n\nSee this posts, you don\u0027t need to run a test to satisfy your curiosity, I have just done it, so far this are the smallest Win10x64 1809 wimboot installs I can make, only thing (from Windows) not installed are unnecesary Apps, and all is running great:\n\n[http://reboot.pro/to...e-6#entry209462](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-6#entry209462 \"\")\n\n\\\u0026 [http://reboot.pro/to...e-6#entry209463](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-6#entry209463 \"\")\n\nIn order to have some space for installing future programs, I do not recommend 512 MB unless it is for portable use.\n\nRemember the starting standard install (not wimboot and not compressed is 10 GB and has 2.49 GB free), this may be good for daily use.\n\nalacran\n\n"
    },
    {
      "id": "209514",
      "timestamp": "2019-02-27T16:31:20+00:00",
      "author": "antonino61",
      "content": "Oh My Dear,\n\nI guess you have definitely changed my pc experience! If I am not mistaken, I have finally booted from just 888mb. Too good to be true? Let us see. I prepared my vhd from scratch, as alacran often suggested I do. then I captured a copy of it with gimagex64.exe and called the resulting wim Mywim.wim. then I used winntsetup3 to create and attach what still seems to be a huge vhd for the little stuff it put on it (just 888mb), and then I used the wimboot command. Everything seems to work fine. I have just made some modifications (no pagefile.sys, for instance) that seem to persist across reboots. everything seems to work perfectly. thank you all. still if I am not mistaken (correct me if i am wrong, pls) it finally proved much simpler than it had seemed to be.\n\n"
    },
    {
      "id": "209515",
      "timestamp": "2019-02-27T17:06:49+00:00",
      "author": "antonino61",
      "content": "Well, still if I am not mistaken, it apparently guarantees persistence across reboots. One caveat, though. with dism++ I ventured to revoke compact, which skied the vhd from 888mb used space to 20gb used space, which means wimboot has compressed it. now I installed a couple of applications and it grew a few 100mb bigger. I wonder what the scenario would have been If I had installed them ahead of the capturing into mywim.wim and the wimbooting. what do u suggest I do when installing new software?\n\n"
    },
    {
      "id": "209516",
      "timestamp": "2019-02-27T19:39:49+00:00",
      "author": "antonino61",
      "content": "ramloading does not work, but that might depend on wrong menu.lst instructions. if they should not be the same as with my past config, i really do not know what to do.\n\n"
    },
    {
      "id": "209521",
      "timestamp": "2019-02-28T02:06:47+00:00",
      "author": "alacran",
      "content": "@ antonino61\n\nHello my friend, It is nice to hear you finally ran your own test.\n\nFor deeper info see this thread: [Making the smallest Win10 install (wimboot mode) on 512 MB VHD](http://reboot.pro/topic/21957-making-the-smallest-win10-install-wimboot-mode-on-512-mb-vhd/ \"\")\n\nThere I recomend in order to keep VHD size to minimum it is a good practice to install all you may need before making a new wimboot image (compression: Express 4k or just \u003d Express on Dism and similar). This is the standard compression used for Windows for wimboot, you may use LZX compression or \u003d maximum on dism, but it may have a more noticiable efect in low power CPU units and the efect on reduction size of the captured wim is not too much, and in my opinion this size is not so important as the VHD size (the one we pretend to load in Ram). Also I recommend use wimlib-clc (GUI for wimlib-imagex) to capture the image because it is faster than any other MS tool to do it and also give you a smaller final size for the captured \\*.wim.\n\nI strongly suggest to follow instructions and use the recommended tools to get the best results, my friend you have a big tendency to do not follow instructions and modify procedures, this makes dificult to help you if need arrise, since the people who make the instructions haven\u0027t done someting the way you did, then to help you, you force this people to do things your way to find the cause of the problem and sometimes/manytimes people is busy doing other thigs and you may not get help.\n\nBy the way this remembers me I need to make some little changes on the procedure to avoid a problem I found latter (when finally Rambooting), easy fixable but it is better to avoid it since the begining.\n\nAfter reading that link, if you have any questions it will be a pleasure to try to answer to you (and amplify you doubts, HA, HA, HA)\n\nalacran\n\n"
    },
    {
      "id": "209524",
      "timestamp": "2019-02-28T08:53:56+00:00",
      "author": "antonino61",
      "content": "Thank you Alacran for your prompt reply. my previous failure was due to something really trivial - I did not know I had to mount the empty vhd for winntsetup3 to feed it; I just thought the software would do it automatically.\n\nI admit I tend to do things my way, but this time I have tried your way too, with wimlib-gimagex - no dice - there must be something I\u0027m missing here and there that prevents me from succeeding. I was able to do it with ordinary gimagex64.exe.\n\nMy 2 main perplexities concern size and ramloading:\n\n1) with this ad-infinitum capturing and wimbooting, the size of my vhd and wim seem smaller, which in this case was probably do to a post-debloating of the system on my part? let us see with the next ones in a few days.\n\n2) whenever I try to pre-load my vhd into ram, the same old way  \nmap --mem --top /vhd.vhd (hd0)  \nmap --hook  \nroot (hd0,0)  \nchainloader /bootmgr\n\na bosd appears after g4d ramloading with the following error: 0xc0000225\n\nWhat am I doing wrong?\n\nThanx in advance for your precious answers.\n\nnino\n\n"
    },
    {
      "id": "209526",
      "timestamp": "2019-02-28T09:49:57+00:00",
      "author": "alacran",
      "content": "When you make a wimboot VHD you need to first install [SVBus_V1.1_20181109](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/?hl\u003dsvbus \"\") before you can try to RAMBOOT, (i will assume you allready did that) and use an entry in your menu.lst as on this posts:\n\n[http://reboot.pro/to...e-6#entry209501](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-6#entry209501 \"\")\n\n[http://reboot.pro/to...e-6#entry209512](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-6#entry209512 \"\")\n\nAlso you need to edit your BCD located on your VHD, use attached picture as guide, change VHD name as required  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![Required BCD.png](http://reboot.pro/uploads/monthly_02_2019/post-26560-0-84696100-1551347372_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-26560-0-84696100-1551347372.png \"Required BCD.png - Size: 29.86KB\"){#ipb-attach-url-16475-0-35427400-1676066411}\n\n"
    },
    {
      "id": "209527",
      "timestamp": "2019-02-28T10:01:07+00:00",
      "author": "alacran",
      "content": "\u003e 1) with this ad-infinitum capturing and wimbooting, the size of my vhd and wim seem smaller, which in this case was probably do to a post-debloating of the system on my part? let us see with the next ones in a few days.\n\u003e\n\u003e nino\n\nI don\u0027t understand what you mean with ad-infinitum, you only have to do a deploy to prepare the OS with all your favorite programs, drivers, etc, then you capture it only once as wimboot and you deploy it one again (second deploy) but this time as wimboot, so you only capture it once an deploy it twice. If you are doing different, it is a wrong procedure.\n\n**EDIT: a link to SVBus driver was added to previous post, just in case it is required.**\n\n**Install x86 and x64 .exe are located on bin folder, just install the driver, do not read instructions as they are outdated.**\n\n"
    },
    {
      "id": "209531",
      "timestamp": "2019-02-28T14:09:33+00:00",
      "author": "antonino61",
      "content": "ad-infinitum because I later realized that I had forgotten to debloat the system of all the microsoft publicity and advertising, which I did later so I made another wim based on the new vhd and wimbooted it later. but it might as well have been a new application or a new version of an application, for that matter, that one might wanna try out. this is what I meant by ad-infinitum, a never-ending story. anyone\u0027s windows today is hardly the same as that windows 5 weeks ago.\n\nAs regards, svbus, I have not tried it yet, as firadisk was already installed in the first place. I do not have this gui version of bcd edit, though, I have always used easybcd, which had always worked for me until this wimboot deployment. but it might be due to something I must be taking amiss.\n\nnino\n\n"
    },
    {
      "id": "209532",
      "timestamp": "2019-03-01T03:57:16+00:00",
      "author": "antonino61",
      "content": "I have tried svbus as well - same behavior as with firadisk - bsod with 0xc0000225 error\n\nwhat am I doing thati is wrong or what have I not done that would have been right?\n\n"
    },
    {
      "id": "209533",
      "timestamp": "2019-03-01T09:45:29+00:00",
      "author": "Wonko the Sane",
      "content": "0xc0000225 is linked to a \"wrong\" BCD configuration.\n\nCheck - using BootICE - I believe 1.3.4.0 is the latest:\n\n[https://www.softpedi...k/Bootice.shtml](https://www.softpedia.com/get/System/Boot-Manager-Disk/Bootice.shtml \"External link\")\n\nthat your BCD is like the one alacran posted a screenshot of.\n\nBUT more generally if there is a step in a tutorial that you are having issues with, THAT step must be resolved BEFORE going ahead, using a woirkaround/another app/whatever may introduce a (even if minor) fork or difference that a few or many steps later may cause a bigger problem.\n\n\u003e I admit I tend to do things my way, but this time I have tried your way too, with wimlib-gimagex - no dice - there must be something I\u0027m missing here and there that prevents me from succeeding. I was able to do it with ordinary gimagex64.exe.\n\nat face value, the above reads as \"since I wasn\u0027t able to do it EXACTLY as you stated, I did \\*something else\\* \" usually, not always but often enough, that is a good preamble to troubles.\n\nWhenever (and it doesn\u0027t happen that often) there is a step by step \"tutorial\" (and people able to assist in following it) it must be followed EXACTLY, to the letter.\n\nOnce you will have succeeded (i.e. replicated the steps EXACTLY) there will be time to introduce variations, changes, betterings, etc.\n\nMore generally alacran has a quirk for giving as \"common knowledge\" details that the new user might well be unaware of, but if your report are of the kind \"I couldn\u0027t use wimlib-gimagex so I used gimagex64.exe\" - besides creating a nice, symmetrical situation - you aren\u0027t gong to get any meaningful assistance/help.\n\nThe Devil (but also success or failure) is often in the details. :wink:\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209534",
      "timestamp": "2019-03-01T10:00:40+00:00",
      "author": "antonino61",
      "content": "Thank you wonko and alacran for your patience,\n\nI have finally succeeded in wimbooting into ram  \nalacran directed me to some page where I found the following  \n(the name of the vhd I obviously edited)  \nmap --mem --top (hd0,0)/vhd.vhd (hd-1)  \nmap --hook  \nroot (hd-1,0)  \nchainloader /bootmgr  \nwhich I changed into  \nmap --mem --top (hd0,0)/vhd.vhd (hd1)  \nmap --hook  \nroot (hd1,0)  \nchainloader /bootmgr  \n\nand it booted like a charm, which makes me understand (rightly or wrongly I do not know yet) that, unlike my past config (the ex-post-facto hilariously hybrid deployment),\n\nmap --mem --top /vhd.vhd (hd0)  \nmap --hook  \nroot (hd0,0)  \nchainloader /bootmgr  \n\nthe vhd is not the first thing to load into memory. this new config is no doubt much better, \"magical\" I would say in saving space and time, but I still do not know where which (vhd, \\*.wim) is where (ram / stays on disk). I did solve this problem by trial and error. by the same criterion, I capture with gimagex, until I discover by mere chance how to succeed with wimlib or somebody patient tells me what to do that is right.\n\nnino\n\n"
    },
    {
      "id": "209535",
      "timestamp": "2019-03-01T11:12:29+00:00",
      "author": "Wonko the Sane",
      "content": "Well, you seem more like doing \"random\" things (and were lucky) than anything else.  \n\n(hd-1,0) means (first partition on) \"last disk\" wimb and alacran seemed like happy about the approach, but they use a USB thingy \\[1\\], if you don\u0027t, then it is not appropriate.  \n(hd1,0) means (first partition on) second disk.  \n(hd0,0) means (first partition on) first disk.  \n\nIt is entirely possible that for some reason the (hd-1,0) which is a sort of \"dynamic\" identfying of a disk doesn\u0027t specifically work on your BIOS/Setup/whatever, but if you are not using a USB media, surely it won\u0027t work.  \n\nAs always, you should make tests (on grub4dos command line) in order to understand what happens on your particular configuration.  \n\n\u003cbr /\u003e\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)  \nWonko  \n\n\\[1\\]  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e In VHD WIMBOOT we have a**two** file Operating System, where first grub4dos loads the VHD into RAM.  \n\u003e When booting from RAMDISK as WIMBOOT, then Windows has to find the location of the Backing WIM file.  \n\u003e In **grub4dos** the USB Boot drive with our VHD and WIM files has the **lowest** disk number hd0   \n\u003e but **Windows** will give the same USB disk the**highest**disk number.  \n\u003e This highest disk number strongly depends on the number of internal harddisks and varies from one computer to another.  \n\u003e\n\u003e That is why I am so happy with the solution given by **Wonko**to use (hd-1) as value for the highest disk number which is valid for all configurations ![:thumbup:](https://reboot.pro/public/style_emoticons/default/thumbup.gif)  \n\u003e\n\u003e When the VHD booting from RAMDISK is mapped as (hd-1) then it is always able to find the Backing WIM file on USB :cool:\n\n"
    },
    {
      "id": "209536",
      "timestamp": "2019-03-01T15:13:32+00:00",
      "author": "antonino61",
      "content": "ok just to avoid keeping on doing random things, with the greatest humility on my part, I will try the hd-1 option and would only like to get my head together. FYI, I have just managed to ramload wimboot as I posted earlier (I honestly do not know for what reason) and in order to answer u as accurately as possible, I ran diskpart and asked it to list my disks and my volumes. it yielded the following:\n\ndisk0 online 849gb whose volume on it is marked in windows as F:\n\ndisk1 online 884gb whose volume on it is marked in windows as G:\n\ndisk2 online 931gb whose volume on it is marked in windows as E:\n\ndisk3 online 931gb whose volume on it is marked in windows as D: backngwim \\*\\*\\*hosts the vhd\\*\\*\\*\n\ndisk4 online 1021mb whose volume on it is marked in windows as C: system \\*\\*\\*the vhd proper\\*\\*\\*\n\nno usb is involved here, honestly.\n\nI hope you are now in a position to tell me why I have wimbooted into ram rigthly or wrongly, in which latter instance, why I should not, and what I should have done to make it right. I honestly do not wanna wimboot into ram wrongly; I would like to wimboot into ram rightly. If I was lucky, what did my luck consist in? it is always nice to know. I always rely on your patience.\n\nnino\n\n**Edited by antonino61, 01 March 2019 - 03:30 PM.**\n"
    },
    {
      "id": "209537",
      "timestamp": "2019-03-01T15:35:55+00:00",
      "author": "antonino61",
      "content": "I also tried hd-1 again, but it did not work. I reverted hd-1 back to hd1 in the menu.lst and it did work again. I honestly do not know why, but I can tell you that the diskpart list of disks and volumes is the same - I can give you my menu.lst text content back again.\n\nmap --mem --top (hd0,0)/vhd.vhd (hd1)  \nmap --hook  \nroot (hd1,0)  \nchainloader /bootmgr  \nand, back again, honest, no usb involved here.  \nI honestly cannot believe there can\u0027t be any reason why I have succeeded even if I should not have.\n\n"
    },
    {
      "id": "209538",
      "timestamp": "2019-03-01T15:38:45+00:00",
      "author": "steve6375",
      "content": "since you are booting using bootmgr and the BCD which is inside the VHD,\n\nYou need to show us the contents of the \\\\boot\\\\BCD file (e.g. as displayed by BootIce).\n\n"
    },
    {
      "id": "209539",
      "timestamp": "2019-03-01T15:52:05+00:00",
      "author": "antonino61",
      "content": "I have eventually found and launched bootice. there are 5 useful submenus: which one (Physical disk, disk image, bcd edit, utilities, command line) should I go to in order to get u the data u have asked?\n\n**Edited by antonino61, 01 March 2019 - 03:53 PM.**\n"
    },
    {
      "id": "209540",
      "timestamp": "2019-03-01T15:53:55+00:00",
      "author": "steve6375",
      "content": "first you must extract \\\\boot\\\\BCD from the VHD.\n\nThen use BootIce - **BCD**(there is a clue in the name!) and select the extracted BCD file (other) and click \u0027Easy mode\u0027\n\n"
    },
    {
      "id": "209541",
      "timestamp": "2019-03-01T16:17:45+00:00",
      "author": "antonino61",
      "content": "how do I extract \\\\boot\\\\bcd from the vhd?\n\n"
    },
    {
      "id": "209542",
      "timestamp": "2019-03-01T16:32:27+00:00",
      "author": "steve6375",
      "content": "I use 7zip.\n\n"
    },
    {
      "id": "209543",
      "timestamp": "2019-03-01T17:42:47+00:00",
      "author": "antonino61",
      "content": "do u mean this?\n\nWindows Boot Manager  \n--------------------  \nidentifier {9dea862c-5cdd-4e70-acc1-f32b344d4795}  \ndevice partition\u003dD:  \ndescription Windows Boot Manager  \nlocale en-US  \ninherit {7ea2e1ac-2e61-4728-aaa3-896d9d0a9f0e}  \ndefault {e8a2d674-3ac5-11e9-ba43-9cb6d01e7b4c}  \nresumeobject {c7f09b2a-3c2e-11e9-ba5b-9cb6d01e7b4c}  \ndisplayorder {e8a2d674-3ac5-11e9-ba43-9cb6d01e7b4c}  \n{c7f09b2b-3c2e-11e9-ba5b-9cb6d01e7b4c}  \n{c6de0891-3a15-11e9-ba26-9cb6d01e7b4c}  \n{63bc9c9f-3aff-11e9-ba4b-9cb6d01e7b4c}  \ntoolsdisplayorder {b2721d73-1db4-4c62-bf78-c548a880142d}  \ntimeout 30  \ndisplaybootmenu Yes  \nReal-mode Boot Sector  \n---------------------  \nidentifier {e8a2d674-3ac5-11e9-ba43-9cb6d01e7b4c}  \ndevice partition\u003dD:  \npath \\\\NST\\\\NeoGrub.mbr  \ndescription NeoGrub Bootloader  \nlocale en-US  \ncustom:250000c2 0  \nWindows Boot Loader  \n-------------------  \nidentifier {c7f09b2b-3c2e-11e9-ba5b-9cb6d01e7b4c}  \ndevice vhd\u003d\\[D:\\]\\\\vhd.vhd,locate\u003dcustom:12000002  \npath \\\\windows\\\\system32\\\\winload.exe  \ndescription vhd  \nlocale en-us  \nloadoptions DDISABLE_INTEGRITY_CHECKS  \ninherit {6efb52bf-1766-41db-a6b3-0ee5eff72bd7}  \nnointegritychecks Yes  \ntestsigning Yes  \nallowedinmemorysettings 0x15000075  \nosdevice vhd\u003d\\[D:\\]\\\\vhd.vhd,locate\u003dcustom:22000002  \nsystemroot \\\\windows  \nresumeobject {c7f09b2a-3c2e-11e9-ba5b-9cb6d01e7b4c}  \nnx OptIn  \nbootmenupolicy Standard  \nWindows Boot Loader  \n-------------------  \nidentifier {c6de0891-3a15-11e9-ba26-9cb6d01e7b4c}  \ndevice vhd\u003d\\[D:\\]\\\\vhd1.vhd,locate\u003dcustom:12000002  \npath \\\\Windows\\\\system32\\\\winload.exe  \ndescription vhd1  \nlocale en-US  \nloadoptions DDISABLE_INTEGRITY_CHECKS  \nnointegritychecks Yes  \ntestsigning Yes  \nosdevice vhd\u003d\\[D:\\]\\\\vhd1.vhd,locate\u003dcustom:22000002  \nsystemroot \\\\Windows  \nresumeobject {f57b35af-3aff-11e9-ba4c-806e6f6e6963}  \ndetecthal Yes  \nWindows Boot Loader  \n-------------------  \nidentifier {63bc9c9f-3aff-11e9-ba4b-9cb6d01e7b4c}  \ndevice vhd\u003d\\[D:\\]\\\\vhd2.vhd,locate\u003dcustom:12000002  \npath \\\\Windows\\\\system32\\\\winload.exe  \ndescription vhd2  \nlocale en-US  \nloadoptions DDISABLE_INTEGRITY_CHECKS  \nnointegritychecks Yes  \ntestsigning Yes  \nosdevice vhd\u003d\\[D:\\]\\\\vhd2.vhd,locate\u003dcustom:22000002  \nsystemroot \\\\Windows  \nresumeobject {7012ac13-3c41-11e9-ba5f-806e6f6e6963}  \ndetecthal Yes  \nor this?  \nThere are a total of 4 entries listed in the bootloader.  \nDefault: NeoGrub Bootloader  \nTimeout: 30 seconds  \nBoot Drive: D:\\\\  \nEntry #1  \nName: NeoGrub Bootloader  \nBCD ID: {default}  \nDrive: D:\\\\  \nBootloader Path: \\\\NST\\\\NeoGrub.mbr  \nEntry #2  \nName: vhd  \nBCD ID: {c7f09b2b-3c2e-11e9-ba5b-9cb6d01e7b4c}  \nDevice: \\[D:\\]\\\\vhd.vhd  \nBootloader Path: \\\\windows\\\\system32\\\\winload.exe  \nEntry #3  \nName: vhd1  \nBCD ID: {c6de0891-3a15-11e9-ba26-9cb6d01e7b4c}  \nDevice: \\[D:\\]\\\\vhd1.vhd  \nBootloader Path: \\\\Windows\\\\system32\\\\winload.exe  \nEntry #4  \nName: vhd2  \nBCD ID: {current}  \nDevice: \\[D:\\]\\\\vhd2.vhd  \nBootloader Path: \\\\Windows\\\\system32\\\\winload.exe\n\n"
    },
    {
      "id": "209544",
      "timestamp": "2019-03-01T17:55:36+00:00",
      "author": "steve6375",
      "content": "No, I mean a screenshot of BootIce with the BCD loaded in Easy Mode\n\ni.e. that is why I mentioned BootIce,,,\n\nBut according to your BCD listing, the default boot OS is to boot to NeoGrub (i.e. grub4dos).\n\nSo, presumably, you have also included a NeoGrub file \\\\NST\\\\NeoGrub.mbr - this will usually load a second grub4dos /grldr and run a menu entry.\n\nThat may explain why the BIOS disk number has to be hd1 for your VHD.\n\n"
    },
    {
      "id": "209545",
      "timestamp": "2019-03-01T18:02:00+00:00",
      "author": "antonino61",
      "content": "correct, and it has always been so for the past 3 years or so. I use neogrub bootloader to preload vhd into ram. but this neogrub is just a fictitious name for what actually is the last version of g4d that is supposed to speed ramloading on nvme\u0027s. neogrub is just the name easybcd gives.\n\nwhen i load it as a file disk i use the vhd entry (vhd1 and vhd2 being mere copies of vhd just in case something goes wrong in vhd).\n\nI am still at pains trying to post screenshots in here. I wish I could.\n\n\u003cbr /\u003e\n\n**Edited by antonino61, 01 March 2019 - 06:05 PM.**\n"
    },
    {
      "id": "209546",
      "timestamp": "2019-03-01T18:05:11+00:00",
      "author": "steve6375",
      "content": "OK, but it is running grub4dos and grub4dos has a menu.lst somewhere?\n\nand so there is a second grub4dos menu which you have not shown us....\n\nWhere is this menu.lst - in the \\\\NST\\\\ folder? Can we see what is in it?\n\n"
    },
    {
      "id": "209547",
      "timestamp": "2019-03-01T18:06:49+00:00",
      "author": "antonino61",
      "content": "I have one menu.lst on root and one menu.lst in nst. they are 2 exact copies. i have already shown them.\n\nhere you go, one more time\n\nmap --mem --top (hd0,0)/vhd.vhd (hd1)  \nmap --hook  \nroot (hd1,0)  \nchainloader /bootmgr\n\n**Edited by antonino61, 01 March 2019 - 06:07 PM.**\n"
    },
    {
      "id": "209548",
      "timestamp": "2019-03-01T18:07:35+00:00",
      "author": "steve6375",
      "content": "and what is in them?\n\n"
    },
    {
      "id": "209549",
      "timestamp": "2019-03-01T18:09:23+00:00",
      "author": "antonino61",
      "content": "pls see above\n\n"
    },
    {
      "id": "209550",
      "timestamp": "2019-03-01T18:11:27+00:00",
      "author": "antonino61",
      "content": "here is the complete file content\n\ncolor blue/green yellow/red white/magenta white/magenta  \ntimeout 30  \ndefault /default  \ntitle Windows 10 - RAMDISK1  \nmap --mem --top (hd0,0)/vhd.vhd (hd1)  \nmap --hook  \nroot (hd1,0)  \nchainloader /bootmgr  \ntitle commandline  \ncommandline  \ntitle quit  \nquit  \ntitle reboot  \nreboot  \ntitle halt  \nhalt\n\n"
    },
    {
      "id": "209551",
      "timestamp": "2019-03-01T18:13:26+00:00",
      "author": "antonino61",
      "content": "if i write the following instead\n\ncolor blue/green yellow/red white/magenta white/magenta  \ntimeout 30  \ndefault /default  \ntitle Windows 10 - RAMDISK1  \nmap --mem --top (hd0,0)/vhd.vhd (hd-1)  \nmap --hook  \nroot (hd-1,0)  \nchainloader /bootmgr  \ntitle commandline  \ncommandline  \ntitle quit  \nquit  \ntitle reboot  \nreboot  \ntitle halt  \nhalt  \nit yields error 0xc0000225 and won\u0027t boot. it will actually stay stuck on the bsod.\n\n"
    },
    {
      "id": "209552",
      "timestamp": "2019-03-01T18:18:18+00:00",
      "author": "steve6375",
      "content": "So the menu.lst that is INSIDE the VHD is the same menu.lst that you start the boot process with?\n\nSo the whole boot process is\n\n1. Boot from HDD\n\n2. load grub4dos\n\n3. load vhd and map as hd1\n\n4. run bootmgr from inside vhd (hd1)\n\n5. bootmgr loads BCD from inside vhd\n\n6. BCD points to NeoGrub.mbr on hd1\n\n7. NeoGrub.mbr runs grub4dos\n\n8. grub4dos runs \\\\NST\\\\menu.lst\n\n9. \\\\NST\\\\menu.lst maps vhd as hd1 (again) or may fail due to insufficient memory?\n\n10. run bootmgr - goto step 5\n\n???\n\nI am confused?\n\nThe BCD that is inside the VHD should just load the VHD that you want (not NeoGrub)???\n\n"
    },
    {
      "id": "209553",
      "timestamp": "2019-03-01T18:24:07+00:00",
      "author": "antonino61",
      "content": "menu.lst is not inside the vhd. menu.lst is on the root of d:\\\\ (the drive hosting the vhd). are u sure that one can boot directly from the vhd without a bootmgr outside it?\n\n"
    },
    {
      "id": "209554",
      "timestamp": "2019-03-01T18:26:59+00:00",
      "author": "antonino61",
      "content": "even the other menu.lst is in d:\\\\nst because easybcd so decides.\n\nanyway, what do u suggest I limit myself to keeping where in order to boot vhd either as a filedisk or as a ramdisk?\n\nI am prepared to try that too.\n\n"
    },
    {
      "id": "209555",
      "timestamp": "2019-03-01T18:43:46+00:00",
      "author": "steve6375",
      "content": "I asked for the contents of the \\\\NST\\\\menu.lst file that is INSIDE the VHD.\n\nIs that what you displayed in the post?\n\nIf so which VHD are you looking at? You seem to have more than one mentioned in the BCD?\n\nI would suggest changing the BCD that is inside the VHD so that it loads the VHD file by default and not NeoGrub.mbr\n\n"
    },
    {
      "id": "209556",
      "timestamp": "2019-03-01T18:46:15+00:00",
      "author": "antonino61",
      "content": "yes but alternatively, not together. it is an either/or thing, or do u see it as a both/and thing?\n\nthe nst has never been inside the vhd, shall i put it instead of its lying on d:\\\\?\n\n"
    },
    {
      "id": "209557",
      "timestamp": "2019-03-01T18:52:40+00:00",
      "author": "steve6375",
      "content": "Let us start again! Go back to this post\n\n[http://reboot.pro/to...e-7#entry209540](http://reboot.pro/topic/21687-ramloading-windows-10-vhd-core/page-7#entry209540 \"\")\n\nI asked you to extract the \\\\boot\\\\BCD that is **INSIDE**the VHD file using 7zip\n\nso now you have a file C:\\\\temp\\\\BCD\n\nThen use BootIce - BCD - Other - Easy Mode to display the contents of the C:\\\\temp\\\\BCD file.\n\nand post a screenshot.\n\n"
    },
    {
      "id": "209558",
      "timestamp": "2019-03-01T19:07:05+00:00",
      "author": "antonino61",
      "content": "at the outset I erased both bcd\u0027s and ran bcdboot c:\\\\windows /s c:\\\\ (inside the vhd) and bcdboot c:\\\\windows /s d:\\\\ (on d:\\\\ the vhd host drive)\n\nso, if I am not mistaken, they are 2 exact copies.\n\nwindows10 os guid {c47a324a-3c2e-11e9-ba5b-9cb6d01e7b4c}\n\nos title windows 10\n\nboot file \\\\Windows\\\\system32\\\\winload.exe\n\nsysroot \\\\Windows\n\nlanguage en-us\n\non top, partition is automatically selected and in the hatch it says boot(wim)/locate(vhd)\n\n"
    },
    {
      "id": "209559",
      "timestamp": "2019-03-01T19:11:37+00:00",
      "author": "steve6375",
      "content": "Sorry, I have lost the will to live! Someone else will have to respond to you. You don\u0027t seem to be able to follow simple instructions. Good luck.\n\n"
    },
    {
      "id": "209560",
      "timestamp": "2019-03-01T19:17:04+00:00",
      "author": "antonino61",
      "content": "i have just given you what u have asked copying from bootice and pasting it on here. I had already told you that i could not post screenshots on here because there is no ctrl-v that could paste them, nor a hatch where to point to files from. all I have is a url for me to indicate.\n\n"
    },
    {
      "id": "209561",
      "timestamp": "2019-03-01T19:29:16+00:00",
      "author": "antonino61",
      "content": "I might be an ignorant but not a fool\n\n\"So the whole boot process is\n\n1. Boot from HDD\n\n2. load grub4dos\n\n3. load vhd and map as hd1\n\n4. run bootmgr from inside vhd (hd1)\n\n5. bootmgr loads BCD from inside vhd\n\n6. BCD points to NeoGrub.mbr on hd1\n\n7. NeoGrub.mbr runs grub4dos\n\n8. grub4dos runs \\\\NST\\\\menu.lst\n\n9. \\\\NST\\\\menu.lst maps vhd as hd1 (again) or may fail due to insufficient memory?\n\n10. run bootmgr - goto step 5\"\n\nis almost all wrong\n\n1. Boot from HDD\n\n2. should read load a grub4dos menu consisting of 4 alternative entries: a) g4d bootloader, :cool: vhd, c) vhd1, d) vhd2, and it loads the one u ask, not all 4 of them together.\n\n3. load vhd (if u ask for 1, not automatically) and map as hd1\n\n4. run bootmgr from inside vhd (hd1) (at a certain point yes, the inside one takes over); then u ultimately have the windows interface\n\nthe rest i do not know if it is correct.\n\n5. bootmgr loads BCD from inside vhd\n\n6. BCD points to NeoGrub.mbr on hd1\n\n7. NeoGrub.mbr runs grub4dos\n\n8. grub4dos runs \\\\NST\\\\menu.lst\n\n9. \\\\NST\\\\menu.lst maps vhd as hd1 (again) or may fail due to insufficient memory? (again? why?)\n\n10. run bootmgr - goto step 5\"  \nthis must be misunderstanding-based psychological concoction!\n\n???\n\nI am confused? (of course you are, if u mistake disjuction (either/or) for conjunction (both...and)\n\nThe BCD that is inside the VHD should just load the VHD that you want (not NeoGrub)???\n\nneogrub (or for that matter grub4dos) is just a raw file reader and mapper, not a program loader (see wonko). it stands to reason that u have lost the will to live, but maybe in the first place, not as a result of my babbling.\n\n"
    },
    {
      "id": "209562",
      "timestamp": "2019-03-01T19:51:21+00:00",
      "author": "antonino61",
      "content": "btw, is the base wim file loaded into ram as well as the wimbooting vhd?\n\n"
    },
    {
      "id": "209563",
      "timestamp": "2019-03-01T20:33:28+00:00",
      "author": "quarky42",
      "content": "\u003e i have just given you what u have asked copying from bootice and pasting it on here. I had already told you that i could not post screenshots on here because there is no ctrl-v that could paste them, nor a hatch where to point to files from. all I have is a url for me to indicate.\n\nOn the post window itself where you type your reply, there is a button called \"My Media\". You can upload files as attachments there. I believe you can attach the screenshot itself (if it is saved as a file) to the post through the \"My Media\" interface on the post.\n\nIf you need help saving screenshots as a file, do a search on How to Use Windows 10 Snipping Tool. There is a tool in Windows 10 called Snipping Tool that can help you take screenshots AND save them as files.\n\nOR instead of the above, the other option:\n\nIf you absolutely cannot get the My Media and attachment process to work on your replies here, consider creating yourself an account on a site like imgur.com. You can upload image files to imgur and then imgur will give you a URL that has the image file on it. You can share the image file here. There may be even better image hosting sties out there. That is just one that I use a little bit.\n\n"
    },
    {
      "id": "209564",
      "timestamp": "2019-03-01T20:41:42+00:00",
      "author": "antonino61",
      "content": "thanks for your consideration.\n\nanyway the same happened to wimb (225 error), see other post, i do not think what is happening to me is all that uncommon and peculiar.\n\n"
    },
    {
      "id": "209566",
      "timestamp": "2019-03-02T03:37:35+00:00",
      "author": "alacran",
      "content": "Your problem is very simple to solve, Once Again please, start from scratch. Please forget all previous ways you used to boot your VHD, they worked the way it was at that time, but they will not work in new way.\n\nFirsts only to test, do all procedure to boot **not from RAM** , and just follow the instructions I gave you (on my post) just by the letter, DO NOT include any variation and then booting from bootmanager (not RAMBOOTING from internal HD yet please), we can talk again, remember my instructions (based also on some of **wimb** and **Wonko** instructions) are for booting from a USB device. So they will need to be adapted to boot from internal disk (I haven\u0027t started to try RAMBOOTING from internal HD upto now, will do it latter). So I can\u0027t have any answer related to this subject yet, Keep patient please, this is all experimental yet.\n\nI\u0027m still working very hard to reduce wimboot VHD size, as this is the part loaded on memory it needs to be the smallest possible.  \n\nI have found some problems with 8.1u1 x64 Dic 2014 version to create a wimboot VHD of 1 GB, WinNTSetup fails doing it and forced me to use 1.5 GB as minimum.  \n\nPlease understand all this is on experimental steps, not to try for all users, **and particularly if that person do not follow instucction as they are**, and since I have recently noticed WinNTSetup is sometimes uncapable to make installtions (on very limited space as 1GB) using the standard Windows API, I have tried other approach trying to get the best of the two possible ways, I have found, since my last test made today, using on WinNTSetup and wimlib-imagex v1.13 \"libwim-15.dll\", it can be done, without troubles.\n\nBut please give me time to test this to be reliable. and I will let all you know my finding.\n\nalacran\n\n"
    },
    {
      "id": "209569",
      "timestamp": "2019-03-02T04:29:26+00:00",
      "author": "antonino61",
      "content": "Dear Alacrán,\n\nthank you for your reply.\n\nBetween 1 test and another, let me inform you of what the figures are at this end.\n\nvhd 862mb\n\nwim 8709mb\n\nvhd boots both as filedisk and as ramdisk\n\neverything has been running smoothly\n\nthe point that was being made yesterday afternoon Italian time was not as much why it was not working as it was why it was working! the clumsiness of my wording is dictated by a theoretical objection that was made to the menu.lst content which should be different from what it actually is:\n\nmap --mem --top (hd0,0)/vhd.vhd (hd1)  \nmap --hook  \nroot (hd1,0)  \nchainloader /bootmgr  \nsome claim that hd1 should read hd-1  \ni tried hd-1 instead of hd1 twice and I had to revert it back to hd1 because it was the only way I could get it working as ramdisk.  \nAs for running vhd specifically as a filedisk thru g4d instead of bootmgr (map without --mem), it is something I tried for a couple of weeks since svbus first came as a valid alternative to firadisk. well, I can tell u that it is not much use to me, as it does not guarantee persistence in case of modification, new installation of applications and stuff. the only time I run vhd as a filedisk is to take some action that would not persist across reboots if i did it on vhd as ramdisk. when this is the case, I therefore prefer running it thru bootmgr. I use g4d only for ramloading.  \nAs for what I have discovered of this new magical vhd+wim deployment so far, let me tell u the name of the wim file - mywim3.wim, which means that it is my third capture-and-wimboot session, whereby both vhd and wim get smaller, ... well, much more evidently the wim than the vhd. this was the ad-infinitum story that I was talking about earlier on.  \nthat is all for now\n\n"
    },
    {
      "id": "209570",
      "timestamp": "2019-03-02T05:13:33+00:00",
      "author": "alacran",
      "content": "Hi antonino61\n\nRemember we here are making history testing a mix of procedures as: the not really new **wimboot** + the new **SVBus driver** (capable to work loading on RAM 7, 8 and 10) + **wimb** findings to Ramboot this installed OS on VHD +**Wonko** idea for booting them using grub4dos from USB device, + my little contributions, etc\n\nSo, nothing is final yet, we are just testing new ideas, as now I\u0027m working on: by means of a RamDisk used to keep all FireFox profile on a RamDisk created on compact NTFS RamDisk drive A:\\\\, to avoid overload to this VHD size, during booting, and do not require to make it bigger,.\n\nI\u0027m using now a 512 MB (can be increased) compressed NTFS drive A:\\\\, to copy from the compressed source.wim the basic (fix) profile to A:\\\\, and then it will never change every boot, and the original will be reloaded to Ram every boot, (even if OS was not RamBooted).\n\nOnce I feel comfortable with this results, I will let you know how to do it, it is very easy, I have done this on SSDs (loading profile and other very frequently changed files to a HDD by hardlinks).\n\nalacran\n\n"
    },
    {
      "id": "209571",
      "timestamp": "2019-03-02T09:29:08+00:00",
      "author": "Wonko the Sane",
      "content": "I don\u0027t see the problem (actually I see a BIG one, which is the use of EasyBCD and of Neogrub, but to each his own).  \n\nIf the disk on which the VHD resides - regardless of what Windows \"sees\" - is actually (hd1) (second disk) let it be (hd1) (second disk).  \n\nAs I posted earlier if you are not using a USB thingy, it makes NO SENSE WHATSOEVER to use (hd-1).  \n\nSo what is the problem?  \n\nYou found that (hd1) works, the only issue is that you find it out by pure chance and not through a meaningful reasoning or the results of a set of experiment.  \n\nSince it works, it is fine. (for you)  \n\nThe fact that you have a strange disk order in your main OS ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif), that you introduced any possible kind of variations to the given set of instructions (after having been told repeatedly to do things EXACTLY) ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) and that you are seemingly not capable of reporting properly and completely the countless variations you introduced ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif) are nothing but minor glitches, the approach won\u0027t help you make many friends or have meaningful exchanges in a technical community ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif), but as long as you - before or later - succeed in the \\*whatever\\* you are after, it\u0027s fine :smile:.  \n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)  \nWonko   \n"
    },
    {
      "id": "209575",
      "timestamp": "2019-03-02T13:10:44+00:00",
      "author": "antonino61",
      "content": "My Dear Wonko and Alacrán and whomever finds my edition of disk orders in windows and my use of easybcd awkward,\n\nI don\u0027t see what the problem is either.\n\nI wonder what I should have done when I found that windows does not order the disks from the one I use the most to the one I use the least, even when I tried to adjust to \"its\" order, and did so not always successfully. Anyway, FYI, bootice reports my vhd host drive as hd3, the last of the 4 in the machine.\n\nAs regards reporting incorrectly, I report to the best of my knowledge and belief, on a bona-fide basis.\n\nAs for easybcd, I have used it because I find it easy. the day before yesterday I got hold of bootice by chance and discovered its potential, which is honestly way beyond my scope. I just need to boot, possibly properly, of course. should I see any inappropriacy in easybcd, I would report it and strive to redress it.\n\nMy use of neogrub is just in the heads of the enlightened, I guess, as this neogrub of mine (ca. 314kb) is bigger than the usual neogrub (ca. 216kb), inasmuch as it is nothing other than the newest g4d you have made available (the one that speeds up the ramloading procedure with nvme\u0027s) with its name changed to suit the whims of easybcd (viz., as it likes it, for all I care).\n\nI hardly ever do things my own way; I usually do things what I think is the software\u0027s own way.\n\nWhatever I am after, I guess I have declared it in many ways at many times here, and I restate it now as being the achievement of the smallest and quickest windows possible. so much so that I have drifted to wimboot at once as soon as I saw that it was smaller, quicker and neater than my previous hybrid config. I also provided a philosophical explanation and justification to it - i do not think windows is 70gb; I think windows is 1gb (vhd) +9gb (wim) \u003d 10gb, or even less. Previous posts concerning us do not tell me we disagree on this. for the sake of accuracy, i used to think windows was 3-4gb (core vhd) + 45-50gb (the rest that lay outside the vhd). You will agree that it is good progress, will u not?\n\nnino\n\nPs.: My dream would be to extend and propagate this experience to other ppl, as I have the feeling that most windows users use windows at a lesser potential and to a lesser capacity than we do. For that matter, I wish I had greater IT knowledge, but I am willing to learn, at least. for example, I am willing to learn if the wim file in this new configuration could be loaded into ram as well and, if it could, whether it would speed things up. Always relying on your precious patience and knowledge.\n\n"
    },
    {
      "id": "209576",
      "timestamp": "2019-03-02T14:02:51+00:00",
      "author": "Wonko the Sane",
      "content": "Whatever floats your boat. :smile:\n\nJFYI, the Author of EasyBCD is a guy that comes around with the nick of ComputerGuru that initially ripped off grub4dos renaming it as Neogrub, not respecting its GNU license, and later managed to use grub4dos \"as is\" again failing to attribute properly its source.\n\nEven after he has been told:\n\n[http://reboot.pro/to...cation-via-bcd/](http://reboot.pro/topic/17655-boot-into-3rd-party-efi-application-via-bcd/ \"\")\n\nHe continued using the senseless Neogrub name (renaming a standard grub4dos) and all he did was to add (in a dedicated page to Neogrub, as if it was anything he wrote, boosting features that are actually grub4dos\u0027 ones) this (which is also partially incorrect):\n\u003e History  \n\u003e\n\u003e NeoGrub started off as a fork (modification) of the Grub4Dos bootloader, with the intention of making an NTFS-aware, Windows-compatible version of the open-source GRUB bootloader available to EasyBCD users. Later versions of Grub4Dos saw some NeoGrub\u0027s changes merged into the official Grub4Dos distribution, and **today, NeoGrub actually uses the standard Grub4Dos executables**. NeoGrub is made possible thanks to the efforts of the Grub4Dos project and their work on a Windows-compatible GRUB bootloader, in particular, NeoGrub would not have been possible without the work of tinybyt and chenall.\n\nThere was NOTHING EVER that was merged from Neogrub to grub4dos, links are (at this point intentionally) leading to obsolete grub4dos and to completely different GRUB pages.\n\nJudging from the integral lack of intellectual honesty he showed in this and in a few other occasions (and to other not so trifling issues like redistribution of non redistributable files) I personally use a 3.5 foot pole to NOT touch anything he is involved in, but as said, it is perfectly fine if you use it, if it works for you.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209577",
      "timestamp": "2019-03-02T14:29:42+00:00",
      "author": "antonino61",
      "content": "Pls, wonko, do not get me wrong. If I got hold of a piece of software called \"pamelo\" instead of easybcd, I would use \"pamelo\" instead of easybcd. As for neogrub, I have already stated it twice, it is just the name: the software called them neogrub and neogrub.mbr and i changed the name of grldr into neogrub, but in fact it is g4d. if i found neogrub more efficient, i would use neogrub (btw, the advantage of the newest g4d could be seen mostly with big portions (gb) not with just a few megabytes).\n\nI hope I am not expected to learn whatever concerns the procedures leading to the production of the coffee I drink everyday. All I can say is I am sorry to read that piece of history. at this rate, though, we should not use or eat or drink many of the products out there today as they are the result of some sort of underhand dealings and negotiations, to say the least. it would be theoretically correct, but, what can we really do?\n\nwe might as well move on to Steve Job\u0027s claim that microsoft stole some of the software from a third company, which was promptly overruled by Bill Gates\u0027 claim whereby \"I\u0027ll put it to u like this, we broke in to steal a monitor only to find out that you had already stolen a tv set.\" I mean, and so on and so forth.\n\nHowever, this is only one of my previous post\u0027s tenets. what do u say to the rest?\n\n"
    },
    {
      "id": "209578",
      "timestamp": "2019-03-02T15:24:31+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e what do u say to the rest?\n\nNothing, though I can confirm that your babbling *may actually* *induce* (unintentionally of course :smile:) \\*someone\\* to lose the will to live, it won\u0027t work with me, I am too old (and to much a heartless grumpy bastard) to be affected by it, no problem whatsoever :smile: .\n\nNonetheless I was expecting that if you go to an academy where coffee production methods are discussed you would have been interested in actual coffee production methods, as in order to just drink a cup of coffee you can go to the coffee shop (Italian: \"bar\") just around the corner.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209579",
      "timestamp": "2019-03-02T15:29:43+00:00",
      "author": "antonino61",
      "content": "I am here for learning and advice; nothing more. I am sorry, however, to have come across differently.\n\n"
    }
  ]
}