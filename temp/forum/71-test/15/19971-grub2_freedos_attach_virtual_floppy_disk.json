{
  "id": "19971",
  "title": "grub2 freedos attach virtual floppy disk",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "186303",
      "timestamp": "2014-08-05T07:55:19+00:00",
      "author": "Thermionix",
      "content": "Hi all,\n\nI\u0027m interested in loading freedos under grub2 and attaching a virtual floppy to it\n\nThe aim being to have a folder on the disk containing several tar.gz files, each of which would show up as a menu entry - such that it is quick to add a new dos utilities (i.e. several different bios update files)\n\nBelow are a few different theoretical examples to append wdidle3.exe into FDSTD.288.imz\n\n```\nmenuentry \"memdisk FDSTD.288.imz\" {\n\tloopback loop /bootisos/wdidle3_1_05.img\n\tlinux16 /boot/grub/memdisk # magic : append files from (loop)?\n\tinitrd16 /bootisos/FDSTD.288.imz\n}\n\nmenuentry \"concatenate initrd\" {\n        # wdidle3_1_05.img fat16 img containing wdidle3.exe\n\tlinux16 /boot/grub/memdisk\n\t# magic : memdisk to accept concatenated images\n\tinitrd16 /bootisos/FDSTD.288.img \\\n\t\t/bootisos/wdidle3_1_05.img\n}\n\nmenuentry \"concatenate files\" {\n\tloopback loop /bootisos/FDSTD.288.gz\n\tloopback loop1 /bootisos/wdidle3_1_05.tar.gz\n\t# magic : new grub2 command? to build ramdisk\n\t# append files from (loop) and (loop1)\n\tfreedos (rd)/kernel.sys\n}\n\nmenuentry \"wimboot FDSTD.288\" {\n\tloopback loop /bootisos/FDSTD.288.gz\n\tloopback loop1 /bootisos/wdidle3_1_05.tar.gz\n\tlinux16 /boot/grub/wimboot\n\t# magic : rewrite wimboot to !bootmgr\n        # it\u0027d be possible to loop over all files in loop+loop1 and append automatically\n\tinitrd16 \\\n\t\tnewc:kernel.sys:(loop)/kernel.sys \\\n\t\tnewc:command.com:(loop)/command.com \\\n\t\tnewc:wdidle3.exe:(loop1)/wdidle3.exe\n}\n```\n\nI\u0027d prefer to reuse something if possible\n\nAny existing modules/bins/code/examples/tips ?\n\nDon\u0027t hesitate to post!\n\n"
    },
    {
      "id": "186304",
      "timestamp": "2014-08-05T10:02:22+00:00",
      "author": "Wonko the Sane",
      "content": "Is there a reason (possibly valid) to \\*need\\* GRUB2? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nWhat you posted is \"wishful thinking\" (i.e. you just \"invented\" some non existing commands/methods, i.e. \"pseudo-code\" for the sake of explaining the matter), right? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nI mean, though cannot really say about GRUB2, the final result (and not necessarily getting it through the methods you hinted) would be easy in grub4dos.\n\nYou know \\*like\\*:\n\n```\ninsmod fat\nfind --set-root /bootisos/myfreedos.ima.gz\nmap -- mem /bootisos/myfreedos.ima.gz (fd0)\nmap --hook\nfat copy /bootisos/wdidle3.exe (fd0)/\nroot (fd0)\nchainloader /kernel.sys\nboot\n```\n\nMore ideas (and more complex code) here:\n\n[http://reboot.pro/to...-drive-in-ram/](http://reboot.pro/topic/16288-question-mount-a-folder-as-a-drive-in-ram/%C2%A0 \"\")\n\nand here:\n\n[http://www.rmprepusb...rials/grubutils](http://www.rmprepusb.com/tutorials/grubutils \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    }
  ]
}