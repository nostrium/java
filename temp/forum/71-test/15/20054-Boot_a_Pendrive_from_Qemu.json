{
  "id": "20054",
  "title": "Boot a Pendrive from Qemu",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "187691",
      "timestamp": "2014-09-22T22:03:57+00:00",
      "author": "Danixu",
      "content": "Hi, first of all i\u0027m sorry for my english.\n\nI\u0027ve one question about testing bootable pendrives with qemu. I\u0027ve searched a lot in google and all i can find is examples like:\n\nqemu.exe -L . -M pc -localtime -boot c -hda \\\\\\\\.\\\\physicaldrive1\n\nqemu.exe -L . -hda x:\n\nqemu.exe -L . -hda \\\\\\\\.\\\\physicaldrive1\n\n....\n\nbut in all the qemu starts an closes in less than a second (don\u0027t show the window). Someone knows a working command to test USB drives?\n\nI\u0027ve tried without any command and qemu starts, then qemu is working...\n\nThanks!!\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "187692",
      "timestamp": "2014-09-22T22:12:01+00:00",
      "author": "steve6375",
      "content": "Try\n\n-L . -boot c -m 800 -drive file\u003d\\\\\\\\.\\\\PhysicalDrive1,if\u003dide,index\u003d0,media\u003ddisk,snapshot\u003don\n\nor just use the QEMU button in RMPrepuSB to boot from any USB drive.\n\nBut [VBox+VMUB](http://www.rmprepusb.com/tutorials/how-to-boot-from-usb-under-vmware-server \"External link\") is better (faster and fully writeable)\n\n"
    },
    {
      "id": "187693",
      "timestamp": "2014-09-22T22:17:37+00:00",
      "author": "Danixu",
      "content": "Thanks for reply... but don\u0027t works ![:mellow:](http://reboot.pro/public/style_emoticons/default/mellow.png). I don\u0027t know what\u0027s the problem because it don\u0027t show any error, only close.\n\nI\u0027m trying to do fully automatic, then i need to make it work with a command line.\n\nI Will try with Vbox+Vmub. Maybe i will learn how to do it :wink:\n\nThanks!!\n\n"
    },
    {
      "id": "187694",
      "timestamp": "2014-09-22T22:19:13+00:00",
      "author": "steve6375",
      "content": "If you download RMPrepUSB - try the QEMU button.\n\nThis uses a StartFromUSB.cmd file to run QEMU - so if the button works then you can use code from StartFromUSB.cmd\n\nAlso you can use the same version of QEMU.\n\n"
    },
    {
      "id": "187695",
      "timestamp": "2014-09-22T22:22:18+00:00",
      "author": "Danixu",
      "content": "Ok. Tomorrow i will do some tests :wink:\n\nThanks again!!\n\n"
    },
    {
      "id": "187700",
      "timestamp": "2014-09-23T05:54:40+00:00",
      "author": "Danixu",
      "content": "Finally works, but with your quemu version. I don\u0027t know why with the lastest version don\u0027t.\n\nThanks for all your help!!! now i\u0027ve to learn how to get the physicaldrive number with drive letter ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png)\n\nGreetings!!\n\nEdit: I\u0027ve found it:\n\nCreating a vbs sript with this:\n\n```\nif WScript.Arguments.Count \u003d 0 then\n    WScript.Echo \"Missing parameters\"\nelse\n    strComputer \u003d \".\"\n    Set objWMIService \u003d GetObject(\"winmgmts:\\\\\" \u0026 strComputer \u0026 \"\\root\\cimv2\")\n\n    Set colDiskDrives \u003d objWMIService.ExecQuery(\"SELECT * FROM Win32_DiskDrive\")\n    \n    For Each objDrive In colDiskDrives\n        \u0027Wscript.Echo objDrive.DeviceID \u0026 Wscript.Arguments.Item(0)\n        Device \u003d objDrive.DeviceID\n        strDeviceID \u003d Replace(objDrive.DeviceID, \"\\\", \"\\\\\")\n        Set colPartitions \u003d objWMIService.ExecQuery _\n            (\"ASSOCIATORS OF {Win32_DiskDrive.DeviceID\u003d\"\"\" \u0026 _\n                strDeviceID \u0026 \"\"\"} WHERE AssocClass \u003d \" \u0026 _\n                    \"Win32_DiskDriveToDiskPartition\")\n    \n        For Each objPartition In colPartitions\n            Set colLogicalDisks \u003d objWMIService.ExecQuery _\n                (\"ASSOCIATORS OF {Win32_DiskPartition.DeviceID\u003d\"\"\" \u0026 _\n                    objPartition.DeviceID \u0026 \"\"\"} WHERE AssocClass \u003d \" \u0026 _\n                        \"Win32_LogicalDiskToPartition\")\n    \n            For Each objLogicalDisk In colLogicalDisks\n                if Wscript.Arguments.Item(0) \u003d objLogicalDisk.DeviceID then\n                    Wscript.Echo Device\n                end if\n            Next\n        Next\n    Next\nend if\n```\n\nThen runing this command:\n\n```\ncscript /NoLogo script.vbs i:\n```\n\ni get the physical drive number:\n\n```\n\\\\.\\PHYSICALDRIVE2\n```\n\nOne question: Can i use your qemu and part of your batch file in my proyect?\n\nGreetings\n\n**Edited by Danixu, 23 September 2014 - 06:41 AM.**\n"
    },
    {
      "id": "187707",
      "timestamp": "2014-09-23T21:34:25+00:00",
      "author": "steve6375",
      "content": "of course you can use it.\n\ncheers\n\nSteve\n\nP.S. Some other code you may find useful [here](https://sites.google.com/site/codeshop99/home/vbscripts/usbwmi \"External link\")\n\n"
    },
    {
      "id": "187708",
      "timestamp": "2014-09-23T21:55:55+00:00",
      "author": "Danixu",
      "content": "\u003e of course you can use it.\n\u003e\n\u003e cheers\n\u003e\n\u003e Steve\n\u003e\n\u003e P.S. Some other code you may find useful [here](https://sites.google.com/site/codeshop99/home/vbscripts/usbwmi \"External link\")\n\nThanks again!!!.\n\nYeah, i\u0027ve found some code in vbs. I\u0027ve edited the batch and the vbs to work together, and now i can call the batch with physicaldrive number or just with the letter.\n\nTomorrow i\u0027ll post the code. Maybe someone will find it useful :wink:\n\nGreetings!!\n\n"
    }
  ]
}