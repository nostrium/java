{
  "id": "19970",
  "title": "grub2 wimboot windows setup",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "186302",
      "timestamp": "2014-08-05T07:26:07+00:00",
      "author": "Thermionix",
      "content": "Having recently discovered how to use wimboot ([http://ipxe.org/wimboot](http://ipxe.org/wimboot \"External link\")) to boot msdart isos on my grub2 key.\n\nThe key is setup (UDF filesystem) with; [https://raw.githubus...ate.grub.key.sh](https://raw.githubusercontent.com/Thermionix/multipass-usb/master/resources/scripts/create.grub.key.sh \"External link\")\n\n```\n# Successfully boots\nmenuentry \"wimboot DaRT70-x64.iso\" {\n\tset iso_path\u003d\"/bootisos/DaRT70-x64.iso\"\n\tloopback loop $iso_path\n\tlinux16 /boot/grub/wimboot\n\tinitrd16 \\\n\t\tnewc:bootmgr:(loop)/bootmgr \\\n\t\tnewc:bcd:(loop)/boot/bcd \\\n\t\tnewc:boot.sdi:(loop)/boot/boot.sdi \\\n\t\tnewc:boot.wim:(loop)/sources/boot.wim\n}\n```\n\nI was interested in seeing if I was able to boot windows7 setup;\n\n```\nmenuentry \"wimboot en_windows_7_enterprise_n_with_sp1_x64_dvd_u_677704.iso\" {\n\tloopback loop /bootisos/en_windows_7_enterprise_n_with_sp1_x64_dvd_u_677704.iso\n\tlinux16 /boot/grub/wimboot\n\tinitrd16 \\\n            newc:bootmgr:(loop)/bootmgr \\\n            newc:bcd:(loop)/boot/bcd \\\n            newc:boot.sdi:(loop)/boot/boot.sdi \\\n\t    newc:boot.wim:(loop)/sources/boot.wim \\\n\t    newc:install.wim:(loop)/sources/install.wim\n}\n```\n\nHowever that leads to;\n\n```\nerror: premature end of file newc:install.wim:(loop)/sources/install.wim.\n\nPress any key to continue\n```\n\nAny tips?\n\n"
    },
    {
      "id": "186399",
      "timestamp": "2014-08-09T09:36:20+00:00",
      "author": "milindsmart",
      "content": "Thanks a lot for showing the syntax of wimboot on Grub2!  \n\nIn an unrelated experiment, I managed to boot WIndows 7 (installed OS) through wimboot from Grub2 using  \n\n```\nmenuentry \u0027Windows GPT bootmgr wimboot\u0027 { \n    linux16 /wimboot \n    initrd16 \\     \n        newc:bootmgr.exe:(hd0,gpt1)/bootmgr.exe \\\n        newc:bcd:(hd0,gpt1)/Boot/BCD  \n}\n```\n\nThe interesting thing is that the disk is GPT, resulting in the supposed-to-be-impossible situation of Windows booting on BIOS systems from a GPT disk. Check [this thread](http://reboot.pro/topic/19516-hack-bootmgr-to-boot-windows-in-bios-to-gpt/ \"\")for more info.  \n\nJust thought I\u0027d let you know that wimboot from Grub2 worked for me.  \n\nAs for install.wim, it\u0027s obvious... initrd16 is incapable of handling a file of more than 16 MB. install.wim is enormous, more than 2GB. Check the [wiki page](http://en.wikipedia.org/wiki/RAM_limit#16_address_bits.2C_16_address_pins \"External link\").   \n\n**Edited by milindsmart, 09 August 2014 - 09:52 AM.**\n"
    },
    {
      "id": "186420",
      "timestamp": "2014-08-11T01:31:38+00:00",
      "author": "Thermionix",
      "content": "boot.wim on the DaRT 8.1 ISO is 499.6 MB and loads ok\n\n"
    },
    {
      "id": "188902",
      "timestamp": "2014-11-27T13:13:50+00:00",
      "author": "At1ant",
      "content": "\u003e Having recently discovered how to use wimboot ([http://ipxe.org/wimboot](http://ipxe.org/wimboot \"External link\")) to boot msdart isos on my grub2 key.\n\nHow to do the same, but worked under UEFI ? What is the menu ?\n\nSecureboot disabled.\n\n"
    },
    {
      "id": "188910",
      "timestamp": "2014-11-27T18:54:03+00:00",
      "author": "maggreg",
      "content": "\u003e How to do the same, but worked under UEFI ? What is the menu ?\n\u003e\n\u003e Secureboot disabled.\n\nYou can try:\n\n```\n\nmenuentry \"wimboot DaRT8.1.iso\" {\n    insmod udf\n    set isofile\u003d\"/dart/DaRT8.1.iso\"\n    loopback loop $isofile\n    linux /syslinux/wimboot\n    initrd \\\n        newc:bootx64.efi:(loop)/EFI/Boot/bootx64.efi \\\n        newc:bcd:(loop)/EFI/Microsoft/Boot/BCD \\\n        newc:boot.sdi:(loop)/Boot/boot.sdi \\\n        newc:boot.wim:(loop)/sources/boot.wim\n}\n```\n\nFor me this generate error: \"couldn\u0027t find suitable memory target\" - grub2 binary from suse.\n\n@Thermionix\n\ninstall.wim is not a part of winboot chain.\n\npzdr\n\n"
    }
  ]
}