{
  "id": "7466",
  "title": "Full XP on Multi-Partitioned USB Flash Drive",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "62682",
      "timestamp": "2009-03-18T15:54:00+00:00",
      "author": "online",
      "content": "Having made your most bootable USB Flash Drive performing the tutorial described here [http://www.boot-land...?...ost\\\u0026p\u003d63162](http://www.boot-land.net/forums/index.php?s\u003d\u0026showtopic\u003d7512\u0026view\u003dfindpost\u0026p\u003d63162 \"External link\") now you can build your UFD either with a single (active) partition (\"Format-it-\\\u0026-Forget-it\" way) or with a multi-partitioned configuration (\"Format-it-\\\u0026-Boot-it\" way).  \n\nIn both cases you will be able to run Full XP from your USB Flash Drive (UFD) with some different features and capabilities.  \n\nPerforming the **\"Format-it-\\\u0026-Forget-it\"** way then you can run Full XP from your UFD (from the single working partition) even without any external boot loader, or you can also install \"grub4dos\" as boot manager in order to load all supported applications too (as ISO, IMA, IMG, etc) selecting from its Menu screen at startup which you want to load.  \n\n\u003cbr /\u003e\n\n**Format-it-\\\u0026-Forget-it** (Full XP in Single-Booting, running without any boot loader except its own \"ntldr\")  \n[![Posted Image](http://www.hostanyimage.com/files/nsi23kn8mby7fg0r0zzw.png)](http://www.hostanyimage.com/ \"External link\")  \n\n\u003cbr /\u003e\n\nPerforming the **\"Format-it-\\\u0026-Boot-it\"** way then you can run Multiple XP, as well as \"Full XP in Single-Booting\", \"Full XP in Dual-Booting\", \"Full XP in Multi-Booting\", indifferently from the 1st, 2nd, 3rd and/or 4th Active Partition of your UFD selecting through \"grub4dos\" Menu screen at startup which you want to load (included all supported applications as ISO, IMA, IMG, etc, if existing).  \n\n\u003cbr /\u003e\n\n**Format-it-\\\u0026-Boot-it** (Full XP in Dual Booting, running from the 3rd Active Partition)  \n[![Posted Image](http://www.hostanyimage.com/files/27418583k1qigwz7z9n9.png)](http://www.hostanyimage.com/ \"External link\")  \n\n\u003cbr /\u003e\n\nPlease note that the following way in order to build your \"Full XP from your UFD\" is the same for any mentioned partitioning configuration and then you can restore either your XP installation or your UFD partition\u0027s image-backups to every new UFD and to every partition without ANY modification (except two lines in your \"boot.ini\" AFTER the restoring on a different numbered partition) and WITHOUT both to pre-install your new UFD or to create a new partition\u0027s image-backup (or to modify your XP installation).  \nYou can select in \"grub4dos\" Menu screen which you want to load at startup (included all supported applications as ISO, IMA, IMG, etc, if existing).  \n\n\u003cbr /\u003e\n\nI am literally enthusiastic about the synergy of \"grub4dos + dummydisk\" that I\u0027ve experienced: \"grub4dos\" is GREAT and \"dummydisk\" is GREAT too and they together are wondeful for me: so absolutely synergistic and so absolutely effective!  \n\nParticularly, \"dummydisk.sys\" has been able to filter ON-THE-FLY the install of all NEW (so never previously recognized) and pre-partitioned USB Flash Drives without the need to PRE-RECOGNIZE them: so it has appeared as the best candidate for this job and most of all for the creation of either your XP installation or your partition\u0027s image-backups as well as UNIVERSALLY restorable without modifications (except two lines in your \"boot.ini\" AFTER the restoring on a different numbered partition) on every new UFD, and on every partition of your UFD you want to boot from (1st, 2nd, 3rd and/or 4th).  \n\nThis fact means that you will NOT need to re-create (or to modify) your partition\u0027s image-backups (or your XP installation) for every new UFD you want to use: so the same backup will be working either for all partitions and/or for all your USB Flash Drives: also for those that you have not yet purchased!  \n\nFurthermore, \"dummydisk\" Filter Driver can be integrate in your customized (with nLite, as an example, just as I did) XP Installation CD-ROM with the same above results, that\u0027s with a full POST-COMPATIBILITY with every new UFD, and then ensuring a high-grade of versatility.  \n\n\"***You cannot have your cake and eat it*** \",  \nthen you have to pay the price of a compromise: however in my opinion it will be a (relatively) small price to pay considering the reached advantages.  \n\nThe price to pay:  \n1. Only ONE partition will be accessible under Windows when you will attach NOT FOR BOOTING (as if you boot with your UFD all its partitions will be regularly allowed) your UFD under those machines where is NOT already installed a Filter Driver.  \n\nThe benefits:  \n1. You can boot your UFD from (reasonably) the most machines with a high-grade of success: as already said now my UFD is able to boot even from a machine that refuses to boot ANYTHING that is not as a Fixed Disk!  \n2. Simple \"newbie-proof\" procedure.  \n3. No special tweaking or physical hacking of your UFD will be needed and no special tool or utility will be used in order to make your UFD bootable, neither \"HP USB Disk Storage Format Tool\" nor \"PeToUSB\" utility, nor \"Lexar BootIt\", nor other ones: this procedure implies both the widest (reasonable) compatibility and the simplest usage.  \n4. You can easily \"translate\" your current \"Windows XP Professional SP3\" running from your current PC into \"Full XP from your UFD\" with the minimal tweaking possible.  \n5. You can restore either your \"Full XP\" installation or your UFD partition\u0027s image-backups to every new UFD without ANY modification (except two lines in your \"boot.ini\" AFTER the restoring on a different numbered partition) and WITHOUT both to pre-install your new UFD or to create a new partition\u0027s image-backup (or to modify your XP installation).  \n6. You can encrypt (with TrueCrypt) your UFD System Drive with no issue.  \n7. You can restore a RAW image-backup of your UFD encrypted System Partition to every new UFD without any modification (except a quick and easy TrueCrypt \"key data/volume header\" restoring from its Menu screen).  \n\n\u003cbr /\u003e\n\n**Full XP (Generic) on Multi-Partitioned USB Flash Drive**   \n\nPlease, note that \"Generic\" term means that your will set the Standard drivers (that\u0027s not the specific ones just of your machine) for some critical devices in order to run your Full XP from your UFD not only just from your machine, but from the most even different machines without issues drivers-related.  \n\nIf you want to run a Full XP from your UFD then you will need the following (I suggest to create a folder containing all needed files and to copy it in the 1st FAT partition of your UFD):  \n\n01. Your Windows PC running from your hard disk (I\u0027ve used for all my tests \"Windows XP Professional SP3\", fully updated).  \n\n02. Your USB Flash Drive (I\u0027ve used almost all sizes: 2GB, 4GB, 8GB, 16GB and 32GB ones, depending on both the final purpose and use; of course Full XP runs better if more space is available on your UFD. In my opinion and until now it seems to me that 8GB in size is a good compromise between space and costs. However you can choose almost every size).  \nPlease note that your UFD must be directly attached to a USB port of your PC and NOT through a USB-HUB.  \n\n03. The Anton Bassov\u0027s \"dummydisk.sys\" Filter Driver; [http://www.codeproje...ct_hooking.aspx](http://www.codeproject.com/KB/system/soviet_direct_hooking.aspx \"External link\")  \n(Download source files - 5.22 Kb)   \n\n04. The \"grub4dos\" Boot Manager. [http://nufans.net/grub4dos/](http://nufans.net/grub4dos/ \"External link\")  \n\n05. Any PE environment.  \n\n06. 3 INF files (\"usb.inf\", \"usbport.inf\" and \"usbstor.inf\") modified by Dietmar or, now it seems better (thanks to **marv** ) in order to solve some issues digital-signature related, \"UsbBootWatcher\" Service (I\u0027ve used this service and it works so fine).  \n[http://www.911cd.net...showtopic\u003d22473](http://www.911cd.net/forums//index.php?showtopic\u003d22473 \"External link\")  \n\n07. A copy of \"NTDETECT.COM\" modified by Dietmar (however under \"XP SP3\" I have not used it and until now no issue is occurred; sure, it higly increases the compatibility under \"strange\" machines).  \n[http://www.msfn.org/...mp;#entry738009](http://www.msfn.org/board/index.php?showtopic\u003d112630\u0026st\u003d0\u0026p\u003d738009\u0026#entry738009 \"External link\")  \n\n08. To partially follow a **Dietmar** \u0027s tutorial in order to make your Full XP as a \"Generic\" one.  \n\n09. Optionally the Enhanced Write Filter (EWF) environment (strictly needed if you run Full XP from your UFD formatted as NTFS file-system and you do not want to BURN your UFD! However it could be useful to run your Full XP as Write Protect System Volume for many reasons, not last that it will run much faster (from RAM);  \n[http://www.911cd.net...showtopic\u003d16482](http://www.911cd.net/forums//index.php?showtopic\u003d16482 \"External link\")  \nPlease, note: in the EWF installation you must care that your \"boot.ini\" file now has the \"partition(2)\" modified lines (not \"1\", as the default one), then you have to modify the needed install commands accordingly.  \nI\u0027ve just found this great web-page where EWF installation (and download for 2.0.1024 version) is perfectly described with further add-on as an install folder with batch file that works fine.  \n[http://www.saunalaht...ws_embedded.php](http://www.saunalahti.fi/pesonpa/projects/windows_embedded/windows_embedded.php \"External link\")  \n\n10. Optionally, TrueCrypt software if you want to encrypt your UFD System Drive.[http://www.truecrypt.org/downloads.php](http://www.truecrypt.org/downloads.php \"External link\")  \n\n11. Optionally (and NOT needed in order to build your UFD following the complete tutorial), \"any\" cloning-software (for the record, in all my tests I\u0027ve used Symantec Ghost): useful if you want to create image-backups of your UFD\u0027s working partitions (the RAW mode will be needed only if the partition is encrypted) that then you want to restore to any your new UFD (without any pre-modification of any kind).  \nPlease, note that if you do not want to create image-backups of your UFD partitions then you can however transfer your partition contents (even if encrypted) with cloning-software that allows the drive-to-drive copy (that\u0027s without image-backups creation).  \n\nAbout freeware cloning programs that are able to create RAW backups I\u0027ve already used in the past a great piece of software (in my opinion) named \"SelfImage\" with excellent results.  \n[http://selfimage.excelcia.org/](http://selfimage.excelcia.org/ \"External link\")   \n\nHowever there is also \"ODIN (Open Disk Imager in a Nutshell)\" of which I read [here](http://www.boot-land.net/forums/index.php?showtopic\u003d5871 \"External link\") and that seems very promising (I have not tried it yet).  \n[http://sourceforge.n...jects/odin-win/](http://sourceforge.net/projects/odin-win/ \"External link\")  \n\n\u003cbr /\u003e\n\n**How To** :  \n\n01. You can start from a XP SP3 Clean Install or also from your current Windows PC (running your XP SP3 even with all your settings, drivers, programs and preferences too) and *simply* to bring it on your UFD.  \nHowever, starting (as an example) from your running XP SP3 Clean Install the first thing to do is to install \"dummydisk\" Filter Driver.  \n\n02. From your Windows PC Desktop (of your XP SP3 Clean Install that you want to bring on your UFD) create a folder named \"dummy\" and copy into it the following files (please, store this folder, it will be useful afterwards):  \n\"dummydisk.sys\" renamed \"dummy.sys\" and \"dummy.reg\"; then install \"dummy.sys\" copying it in \"\\\\system32\\\\drivers\\\\\" folder of your Windows PC and adding \"dummy.reg\" to the Registry, then restart Windows.  \n\n**dummy.reg**   \n\\[codebox\\]Windows Registry Editor Version 5.00\\[-HKEY_LOCAL_MACHINE\\\\Embed\\\\MountedDevices\\]\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\MountedDevices\\]\\[-HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\]\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\]\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*aui0200\\]\"ClassGUID\"\u003d\"{4D36E96F-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"i8042prt\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*azt0502\\]\"ClassGUID\"\u003d\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"atapi\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0000\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0100\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0200\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0303\\]\"ClassGUID\"\u003d\"{4D36E96B-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"i8042prt\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0600\\]\"ClassGUID\"\u003d\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"atapi\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0a03\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"pci\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0b00\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0c01\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0c02\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0c04\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\\\*pnp0f0e\\]\"ClassGUID\"\u003d\"{4D36E96F-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"i8042prt\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\acpi#processor\\]\"ClassGUID\"\u003d\"{50127DC3-0F36-415e-A6CC-4CB3BE910B65}\"\"Service\"\u003d\"Processor\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\gendisk\\]\"ClassGUID\"\u003d\"{4D36E967-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"disk\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\pci#cc_0600\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\pci#cc_0601\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"isapnp\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\pci#cc_0604\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"pci\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\pci#cc_0c0320\\]\"Service\"\u003d\"usbehci\"\"ClassGUID\"\u003d\"{36FC9E60-C465-11CF-8056-444553540000}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\pci#ven_1033\\\u0026dev_00e0\\\u0026rev_01\\]\"ClassGUID\"\u003d\"{36FC9E60-C465-11CF-8056-444553540000}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\pci#ven_1033\\\u0026dev_00e0\\\u0026rev_02\\]\"ClassGUID\"\u003d\"{36FC9E60-C465-11CF-8056-444553540000}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\pci#ven_8086\\\u0026dev_24cd\\]\"ClassGUID\"\u003d\"{36FC9E60-C465-11CF-8056-444553540000}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\primary_ide_channel\\]\"ClassGUID\"\u003d\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"atapi\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\PS2_KEYBOARD\\]\"ClassGUID\"\u003d\"{4D36E96B-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"i8042prt\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\PS2_MOUSE\\]\"ClassGUID\"\u003d\"{4D36E96F-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"i8042prt\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\root#swenum\\]\"ClassGUID\"\u003d\"{4D36E97D-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"swenum\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\secondary_ide_channel\\]\"ClassGUID\"\u003d\"{4D36E96A-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"atapi\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\usb#class_08\\]\"ClassGUID\"\u003d\"{36FC9E60-C465-11CF-8056-444553540000}\"\"Service\"\u003d\"USBSTOR\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\usb#root_hub\\]\"Service\"\u003d\"usbhub\"\"ClassGUID\"\u003d\"{36FC9E60-C465-11CF-8056-444553540000}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\usb#root_hub20\\]\"Service\"\u003d\"usbhub\"\"ClassGUID\"\u003d\"{36FC9E60-C465-11CF-8056-444553540000}\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\usbstor#disksony____msc-u01n________\\]\"ClassGUID\"\u003d\"{4D36E967-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"disk\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Control\\\\CriticalDeviceDatabase\\\\usbstor#disksony____msc-u01_________\\]\"ClassGUID\"\u003d\"{4D36E967-E325-11CE-BFC1-08002BE10318}\"\"Service\"\u003d\"disk\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Services\\]\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Services\\\\usbehci\\]\"Type\"\u003ddword:00000001\"Start\"\u003ddword:00000000\"ErrorControl\"\u003ddword:00000001\"ImagePath\"\u003dhex(2):53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,44,00,\\\\52,00,49,00,56,00,45,00,52,00,53,00,5c,00,75,00,73,00,62,00,65,00,68,00,63,\\\\00,69,00,2e,00,73,00,79,00,73,00,00,00\"DisplayName\"\u003d\"Microsoft USB 2.0 Enhanced Host Controller Miniport Driver\"\"Group\"\u003d\"Boot Bus Extender\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Services\\\\usbhub\\]\"Type\"\u003ddword:00000001\"Start\"\u003ddword:00000000\"ErrorControl\"\u003ddword:00000001\"DisplayName\"\u003d\"Microsoft USB Standard Hub Driver\"\"ImagePath\"\u003dhex(2):53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,44,00,\\\\52,00,49,00,56,00,45,00,52,00,53,00,5c,00,75,00,73,00,62,00,68,00,75,00,62,\\\\00,2e,00,73,00,79,00,73,00,00,00\"Group\"\u003d\"System Bus Extender\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Services\\\\USBSTOR\\]\"Type\"\u003ddword:00000001\"Start\"\u003ddword:00000000\"ErrorControl\"\u003ddword:00000001\"ImagePath\"\u003dhex(2):53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,44,00,\\\\52,00,49,00,56,00,45,00,52,00,53,00,5c,00,55,00,53,00,42,00,53,00,54,00,4f,\\\\00,52,00,2e,00,53,00,59,00,53,00,00,00\"DisplayName\"\u003d\"USB Mass Storage Driver\"\"Group\"\u003d\"System Bus Extender\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Services\\\\usbohci\\]\"Type\"\u003ddword:00000001\"Start\"\u003ddword:00000000\"ErrorControl\"\u003ddword:00000001\"ImagePath\"\u003dhex(2):53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,44,00,\\\\52,00,49,00,56,00,45,00,52,00,53,00,5c,00,75,00,73,00,62,00,6f,00,68,00,63,\\\\00,69,00,2e,00,73,00,79,00,73,00,00,00\"DisplayName\"\u003d\"Microsoft USB Open Host Controller Miniport Driver\"\"Group\"\u003d\"Boot Bus Extender\"\\[HKEY_LOCAL_MACHINE\\\\Embed\\\\ControlSet001\\\\Services\\\\usbuhci\\]\"Type\"\u003ddword:00000001\"Start\"\u003ddword:00000000\"ErrorControl\"\u003ddword:00000001\"DisplayName\"\u003d\"Microsoft USB Universal Host Controller Miniport Driver\"\"ImagePath\"\u003dhex(2):53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,44,00,\\\\52,00,49,00,56,00,45,00,52,00,53,00,5c,00,75,00,73,00,62,00,75,00,68,00,63,\\\\00,69,00,2e,00,73,00,79,00,73,00,00,00\"Group\"\u003d\"Boot Bus Extender\"\\[/codebox\\]05. Shutdown Windows.06. Now boot from your PC running your PE environment.07. Reach your PE Desktop and browse to your Hard Disk (C:) Drive: I will assume that you currently have Windows installed on your (C:) Drive.08. Under your PE environment set all files and folders as unhidden (also SuperHidden ones, that\u0027s your Protected Operating System Files) and copy all (C:) drive content (that\u0027s \"Documents and Settings\", \"Program Files\" and \"WINDOWS\" folders, and all other system files (that\u0027s \"AUTOEXEC.BAT\", \"boot.ini\", \"CONFIG.SYS\", \"IO.SYS\", \"MSDOS.SYS\", \"NTDETECT.COM\" and \"ntldr\" - do NOT copy \"Recycled\" and \"System Volume Information\" folders) in a folder on your PC named \"USB_XP_MOD\" (or as you want): it will be your working folder.Make a copy of just created \"USB_XP_MOD\" folder in the same location and rename it as \"USB_XP_BAK\" (or as you want): it will be useful as possible future reference.09. Now reboot your machine, but this time from your Windows PC (not from your PE environment, that will not be more useful) and reach your Windows PC Desktop.Now browse to \"boot.ini\" existing in your \"USB_XP_MOD\" folder and edit its two lines as following:from\\[codebox\\]color black/cyan yellow/cyantimeout 30default 0title Active@ Partition Recoverymap --mem /boot/apr.ima (fd0)map --hookchainloader (fd0)+1rootnoverify (fd0)title Linux Parted Magickernel /boot/pmagic/bzImage noapic root\u003d/dev/ram0 init\u003d/linuxrc keymap\u003dus liveusb vga\u003d791 sleep\u003d0 quiet xvesa tmpfs_size\u003d350M ramdisk_size\u003d25000 directory\u003d/bootinitrd /boot/pmagic/initrdtitle Norton Partition Magicmap --mem /boot/npm.ima (fd0)map --hookchainloader (fd0)+1rootnoverify (fd0)title Paragon Total Defragfind --set-root /boot/ptd.isomap --mem /boot/ptd.iso (hd32)map --hookchainloader (hd32)boottitle RecoverSoft Media Tools Promap --mem /boot/mtl.img (fd0)map --hookchainloader (fd0)+1rootnoverify (fd0)title Symantec Ghostmap --mem /boot/gho.ima (fd0)map --hookchainloader (fd0)+1rootnoverify (fd0)title TeraByte BootIt NGmap (hd0,0)/boot/bng.iso (hd32)map --hookchainloader (hd32)title VistaPEmap (hd0,0)/boot/vpe.iso (hd32)map --hookchainloader (hd32)title Windows XP Professionalmap (hd0,0) (hd0,1) map (hd0,1) (hd0,0) rootnoverify (hd0,1) chainloader (hd0,1)/ntldr\\[/codebox\\]\\[b\\]To add/replace in \"menu.lst\" example for Full XP in Dual-Booting\\[/b\\] (very simplified, thanks to \\[b\\]jaclaz\\[/b\\] and \\[b\\]tinybit\\[/b\\])\\[code\\]title Windows XP Professional \\\u0026#40;from the 2nd partition\\\u0026#41;unhide \\\u0026#40;hd0,1\\\u0026#41;hide \\\u0026#40;hd0,2\\\u0026#41;root \\\u0026#40;hd0,1\\\u0026#41;chainloader /ntldrtitle Windows XP Professional \\\u0026#40;from the 3rd partition\\\u0026#41;unhide \\\u0026#40;hd0,2\\\u0026#41;hide \\\u0026#40;hd0,1\\\u0026#41;root \\\u0026#40;hd0,2\\\u0026#41;chainloader /ntldr\\[/code\\]15. Copy \"grldr\" file, your customized \"menu.lst\" file, the \"dummy\" folder above created and the \"UsbBootWatcher\" folder just created in the root of the 1st Primary FAT partition.16. Copy the whole \"USB_XP_MOD\" folder content (just modified) into your 2nd Active Partition of your UFD as following:at first copy all booting-related files, that\u0027s first \"NTDETECT.COM\", then \"boot.ini\", then \"ntldr\", then all other files and folders (do not copy \"Recycled\" and \"System Volume Information\" folders if existing).17. Now shutdown Windows, disconnect all HDs connected within your machine and boot for the first time from your UFD just prepared.18. Reaching for the first time your UFD Desktop then wait for \"Windows has finished installing new devices...\" UNTIL it prompts for \"Do you want to restart your computer now?\" and answer \"NO\".19. Now browse to 1st FAT partition and open the \"UsbBootWatcher\\\\x86\\\\\" subfolder, then copy the two files that it contains in your \"C:\\\\WINDOWS\\\\system32\\\\\" folder that is in the 2nd partition of your UFD.After copying the two files then open a Command Prompt from \"system32\" folder and install \"UsbBootWatcher\" Service entering the following line\\[code\\]usbbootwatcher.exe /install\\[/code\\]then verify that \"usbbootwatcher.exe\" is in Task Manager Processes and restart Windows.20. Reaching for the second time your UFD Desktop then go in Device Manager and \"update\" all the following drivers against the already existing and related \"Standard\" ones (that\u0027s the \"Generic\" ones) \\[code\\]A.\\\u0026#41; IDE ATA/ATAPI Controllers \\\\ Primary IDE Channel and Secondary IDE Channel \\\u003e Standard \\\u0026#40;All\\\u0026#41;B.\\\u0026#41; Universal Serial Bus Controllers \\\u003e Standard \\\u0026#40;All\\\u0026#41;C.\\\u0026#41; Computer \\\u003e Advanced Configuration and Power Interface \\\u0026#40;ACPI\\\u0026#41; PC \\\u003e Restart Windows Now \\\u003e YESAfter next reboot\\\u0026#58; Restart Windows Now \\\u0026#40;again\\\u0026#41; \\\u003e YES\\[/code\\]  \nproceeding as following: in every respective device Properties click on the \"Driver\" flag and push the \"Update Driver...\" button \\\u003e Then \\\u003e \"Install from a list or specific location\" \\\u003e Next \\\u003e \"Don\u0027t search. I will choose the driver to install\" \\\u003e Next \\\u003e Choose \"Standard Dual Channel PCI IDE Controller\" (it\u0027s just an example for \"IDE ATA/ATAPI Controllers\": really the important thing is to always choose the \"Standard\" choice for every already cited drivers).  \nDo the above for all other already cited drivers (always choosing the \"Standard\" option).  \n\n21. After having completed the standard-drivers-procedure following the EXACT order, Windows will ask to you to \"Restart Now\" your machine (due to ACPI drivers just changed) and after the restarting Windows will ask to you again to \"Restart Now\" your machine: you will answer always \"YES\" (then 2 times).  \nAfter the two restarting and after reaching your UFD Desktop again then shutdown Windows, connect all your existing HDs within your PC and boot again from your UFD.  \n\n22. Done!  \nReaching for the third time your UFD Desktop then it means that all is gone right and that finally you have your \"Full (Generic) XP\" on your UFD, capable to boot and to run on the most machines!  \n\n\u003cbr /\u003e\n\n**Encryption Notes**   \n\nYou can smoothly encrypt with TrueCrypt your UFD System Drive - that\u0027s just the (C:) Drive where your Windows currently resides - and at the same time to preserve your grub4dos Menu screen at booting (that\u0027s you will can choose at every booting if to load \"Windows XP SP3, or your \"VistaPE\", or your \"Ghost\", etc, if existing).  \nOne of my UFDs contains just a Full XP Encrypted and I\u0027ve modified my \"menu.lst\" in order to not choose anything at booting, so that grub4dos automatically load it without any user\u0027s input.  \nFurthermore you can create a partition\u0027s image-backup (in default mode; or in RAW mode if the partition is encrypted) of your UFD partitions and then to restore it on every new UFD with both no pre-modification and no issue!  \n\n\u003cbr /\u003e\n\n**TrueCrypt System Drive Encryption**   \n\nIf you want to encrypt with TrueCrypt your UFD System Drive (that\u0027s the partition where your XP currently resides) you have to start and to complete the whole encryption process from your UFD, so copy at first \"TrueCrypt Setup 6.1a.exe\" from your Windows PC to the root of the 1st FAT Partition of your UFD.  \nThen boot from your \"Full XP\" and install TrueCrypt.  \nAfter TrueCrypt installation completion open a Command Prompt from \"C:\\\\Program Files\\\\TrueCrypt\" folder and enter the following line  \n(thanks to **mr_** )  \n\n```\nTrueCrypt Format /noisocheck\n```\n\nit will encrypt your System Drive partition with no \"TrueCrypt Rescue Disk.iso\" verification.  \nWait for encryption process completion then reboot your machine.  \nIn uhis phase you can not see any grub4dos Menu screen at booting because TrueCrypt will have overwritten the existing one with its own one, but really it will be not an issue.  \nRepeat a reboot in order to further test that all is gone right and that your encrypted Full XP boots with neither password issue nor any other one.  \nNow rename the \"TrueCrypt Recue Disk.iso\" just created by process in \"tc.iso\" and copy it in your \"boot\" folder existing in your 1st FAT partition of your UFD.  \nThen you have to re-install \"grub4dos\" in the MBR of your UFD.  \nNow you have to add (really to replace) in your \"menu.lst\" the following lines  \n\n**\"menu.lst\" example**   \n\n```\ntitle TrueCrypt-ed XP\n\nmap \u0026#40;hd0,0\u0026#41;/boot/tc.iso \u0026#40;hd32\u0026#41;\n\nmap --hook\n\nchainloader \u0026#40;hd32\u0026#41;\n```\n\nPlease, note that you cannot place the \"tc.iso\" in your just encrypted drive (because it cannot be read from disk BEFORE the drive has been un-encrypted!) and then you MUST copy it in the 1st FAT partition or in any other one (not encrypted) if existing.  \n\nNow you can reboot your machine and at \"grub4dos\" Menu screen at startup you can choose \"TrueCrypt-ed XP\", or any supported application (as ISO, IMA, IMG, etc) you have placed in your \"boot\" folder (and in your \"menu.lst\").  \n\nAlso, you can create a partition\u0027s image-backup of your encrypted System Drive partition (in RAW mode, because really does not exist a different way to backup an encrypted partition) and then to restore it on any new UFD performing one of the two following options:  \n\n1. Create with Disk Management (Start \\\u003e Run \\\u003e diskmgmt.msc) on your new UFD the same disk\u0027s configuration of your just backupped UFD configuration: that\u0027s a 1st FAT partition, and a 2nd FAT32 Partition with EXACTLY the same size of the original (just encrypted as well) partition.  \n\n2. Or, create the 1st FAT Partition of 2047MB in size and let ALL the remaining space of your UFD as Unallocated: your cloning-software would be to restore the RAW backup of your encrypted partition creating at the same time a \"new\" partition of the same size of the restored partition itself letting the remaining space as Unallocated.  \nThen if you want you will can create/format a 3rd partition as you want (and most of all, IF you really need that).  \n\nPlease, note that when you will boot from your UFD for the first time a restored backup of your encrypted partition and you will be on your TrueCrypt\u0027s first prompt for password from your new UFD just \"restored\" you will must use the \"\\[F8\\] Repair Options\" feature of TrueCrypt and will must restore the \"key data/volume header\" choosing the option \"#3\", then when TrueCrypt will ask you: \"Modify drive 0?\", then you will answer \"y\".  \nThen you will have to press Enter, then Enter again and then to enter your password: so it will boot!  \nIf you do not do so, then TrueCrypt prompt will always say to you that your password is incorrect and you will cannot boot at all.  \n\nPlease, note that:  \nwhen you have just restored an encrypted partition on a new UFD proceding as above described then you have to do as following in order to boot your UFD - with System Drive Encrypted and with EWF enabled - with or without your Hard Disk(s) connected:  \n\n1. Restore both the 1st and the 2nd partitions as above described and installing \"grub4dos\" in MBR of your new UFD.  \n\n2. Copy \"MountedDevices_Remove.reg\" in your UFD 1st FAT partition.  \n\n\u003cbr /\u003e\n\n**\"MountedDevices_Remove.reg\"**   \n\n```\nWindows Registry Editor Version 5.00\n\n\n\n\u0026#91;-HKEY_LOCAL_MACHINE\\SYSTEM\\MountedDevices\u0026#93;\n\n\n\n\u0026#91;HKEY_LOCAL_MACHINE\\SYSTEM\\MountedDevices\u0026#93;\n```\n\n3. Boot from your just restored device WITH your Hard Disk(s) connected within your PC.  \n\n4. At \"grub4dos\" Menu screen choose \"TrueCrypt-ed XP\": it will load the TrueCrypt ISO image.  \n\n5. At TrueCrypt Menu screen choose \"\\[F8\\] Repair Options\" and then the option \"#3\" (\\\u003e restore \"key data/volume header\") then when TrueCrypt will ask you: \"Modify drive 0?\", you will answer \"y\".  \n\n6. Then wait for both your UFD Desktop AND Windows installing New Devices (it always will occur the first time you will boot a new UFD just restored): please, note that the whole process will complete between about 8 to 16 minutes (depending on some variables).  \nAt Windows prompt for \"Reboot Now?\" you answer \"NO\".  \n\n7. Please, note: at the first reboot after partition restoring then the EWF environment will result NOT ENABLED.  \n\n8. Add in the Registry \"MountedDevices_Remove.reg\" that you have copied. Please, note that your Floppy Drive (if existing) could have in some circumstances the (B:) letter assigned.  \n\n9. Now shutdown Windows, disconnect all Hard Disk(s) within your PC and boot from your UFD again.  \n\n10. Done!  \nPlease, note that now your \"Full XP (Generic)\" will boot from (reasonably) the most machines out there WITH or WITHOUT Hard Disk(s) connected within your PC, the System Drive have the (C:) letter assigned (however it already had it so!), the Floppy Disk Drive (if existing) will have the (A:) letter assigned and the EWF environment will result ENABLED!  \n\n\u003cbr /\u003e\n\nAfter you restore your partition\u0027s image-backups of your Encrypted and EWF-ed Drive then if you do not do as above described then you could receive some kind of Stop Error Screen (BSOD) then is *better* if you do so.  \n\nHint: deleting \"MountedDevices\" key in the Registry with \"MountedDevices_Remove.reg\" before to create an image backup of your system drive partition is a good practice.  \n\nGood luck!  \n\n\u003cbr /\u003e\n\n**Full XP, Encrypted, Enhanced Write Filter (EWF) enabled, running from the 2nd Active Partition**   \n[![Posted Image](http://img440.imageshack.us/img440/4748/58212122.th.png)](http://img440.imageshack.us/i/58212122.png/ \"External link\")   \n"
    },
    {
      "id": "62687",
      "timestamp": "2009-03-18T17:34:16+00:00",
      "author": "mr_",
      "content": "Very nice guide.  \n\n1) Unfortunately you haven\u0027t said any word about bootablity of real USB-HDD\u0027s. Did you ever test it with one? I think it\u0027s the same with the only difference that you do not need a filter driver?  \n\n2) What about maximum compatiblity with most possible simplicity? [http://www.boot-land...?...ost\\\u0026p\u003d52981](http://www.boot-land.net/forums/index.php?s\u003d\u0026showtopic\u003d6546\u0026view\u003dfindpost\u0026p\u003d52981 \"External link\") mentions lots of techniques to further improve bootablity.  \n\n3)  \n\u003e Then mark the just created 2nd FAT32 partition as Active;\nWhy? Shouldn\u0027t be the first FAT16 partition active to improve compatibility?  \nOr does the BIOS never care about active partition?  \n\n4) I still don\u0027t get that the filesystem FAT, FAT32 or NTFS matters. Normally the job of the BIOS is to read MBR into memory and jump into it. PLoP Bootmanager author explained me that he does the same and the filesystem really doesn\u0027t matter. Did you reproduce booting once with FAT16, but now with FAT32?   \n"
    },
    {
      "id": "62718",
      "timestamp": "2009-03-19T02:40:14+00:00",
      "author": "TheHive",
      "content": "Where can one get this filter driver you write about.   \n"
    },
    {
      "id": "62736",
      "timestamp": "2009-03-19T07:46:56+00:00",
      "author": "was_jaclaz",
      "content": "\u003e Where can one get this filter driver you write about.\n\nSearching? ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)  \n\n[http://www.codeproje...ct_hooking.aspx](http://www.codeproject.com/KB/system/soviet_direct_hooking.aspx \"External link\")?  \n[http://www.boot-land...?showtopic\u003d4900](http://www.boot-land.net/forums/index.php?showtopic\u003d4900 \"External link\")  \n\n\u003e Very nice guide.  \n\u003e\n\u003e 1) Unfortunately you haven\u0027t said any word about bootablity of real USB-HDD\u0027s. Did you ever test it with one? I think it\u0027s the same with the only difference that you do not need a filter driver?\n\nSince the topic title is:  \n\u003e USB-**Stick** Highest Bootability (Tutorial), Full XP on 2nd Active Partition\n\nit seems to me only too normal...![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)  \n\njaclaz   \n"
    },
    {
      "id": "62750",
      "timestamp": "2009-03-19T13:42:08+00:00",
      "author": "online",
      "content": "\u003e Where can one get this filter driver you write about.\nIf you read (even with more attention?) you will find what you\u0027re looking for. ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)  \n\n\u003e 3. The Anton Bassov\u0027s \"dummydisk.sys\" Filter Driver; [http://www.codeproje...ct_hooking.aspx](http://www.codeproject.com/KB/system/soviet_direct_hooking.aspx \"External link\") (\\\u003e Download source files - 5.22 Kb)\n\nBtw: the download requires your registration, but I\u0027ve noticed that really then it proceeds however with any e-mail address.   \n"
    },
    {
      "id": "62775",
      "timestamp": "2009-03-19T16:06:02+00:00",
      "author": "online",
      "content": "\u003e Very nice guide.\nI\u0027m glad you like it. ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)  \n\u003e 1) Unfortunately you haven\u0027t said any word about bootablity of real USB-HDD\u0027s. Did you ever test it with one? I think it\u0027s the same with the only difference that you do not need a filter driver?\nI own more than one USB-HDD, but I\u0027m not really interested about that other topic; so I\u0027ve not tried with any ones (just as the topic indicates, as already kindly said by jaclaz).  \nNevertheless, if you\u0027re interested about \"your\" topic why do you not do some trials and then tell us about your results even in a specific thread? ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)  \n\n\u003e 2) What about maximum compatiblity with most possible simplicity? [http://www.boot-land...?...ost\\\u0026p\u003d52981](http://www.boot-land.net/forums/index.php?s\u003d\u0026showtopic\u003d6546\u0026view\u003dfindpost\u0026p\u003d52981 \"External link\") mentions lots of techniques to further improve bootablity.\n**mr_** , please note that the topic that you are linked has been already mentioned by myself in my first post  \n\u003e Furthermore if you read here  \n\u003e [http://www.boot-land...showtopic\u003d6546#](http://www.boot-land.net/forums/index.php?showtopic\u003d6546# \"External link\")\nand it does not **seem** to me that there are further procedures - at least \"with most possible simplicity\" as you say - in order to do what you kindly \"suggest\".  \nReally what is described in this topic is **just** what you are talking about, don\u0027t you? ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)  \n\u003e Reducing too many possible variables in a reasonable number-and/or-circumstances it seems that there are at least two \"easily\" practicable conditions that can ensure to your USB-Removable-Device a statistically high-grade of compatibility at USB-booting for the highest percentage of machines (that\u0027s of BIOSes), more or less *modern* :  \n\u003e 1. FAT(16) file-system (as the first partition);  \n\u003e 2. Fixed Disk (as USB-Stick behaving like USB-HDD).\n\nOf course if you know or if you have experienced better and/or equally real \"simple\" ways in order to further improve - compared just with the two ways **in topic** - your USB-Stick booting you can do a nice thing reporting your applicable findings here. ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)  \n\u003e Of course I\u0027m very interested in unknown and/or alternative ways equally and/or so widely simple-\\\u0026-effective, thus if somebody knows or has been experienced similar high-bootability results following different and/or better ways please kindly report here in order to possibly redefine the State-of-the-Art about the USB-Removable-Drive Bootability.  \n\u003e Thank you!\nBtw: I begin to have the impression that this topic not to be read with a minimum amount of attention if I do repeat many of those things already said! ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png) ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)   \n\n\u003e 3)Why?\nSimple: because it works so!  \nThis is a strong evidence for me.  \nReally in this topic I was talking (EDIT: I\u0027ve split the two topics in two different threads - just as in my signature - then some replies could seem unrelated) about two different arguments: improve your USB-Stick booting and \"Full XP on Multi-Partitioned USB-Stick\", but the two arguments are not necessarily co-related.  \nIn other words: it was never told that to improve your USB-Stick booting you should run Windows from your USB-Stick.  \nFollowing this tutorial you can improve your USB-Stick booting for every need you want to boot.  \n\u003e So - about the USB booting - the simple partitioning of your UFD seems to succeed EXACTLY as the flipping of removable-bit does and then your UFD should boot (reasonably) from the most machines!\nSo, as already said, the results achieved following the \"**Format-it-\\\u0026-Forget-it** \" way could be as an universal solution (with no price to pay) not just a workaround, because the partitioning on your USB-Stick is REAL and the most BIOSes are able to read it very well!  \nFurthermore in your quoted question you are referring to the way that uses \"grub4dos\" as Boot Loader, so the Active partition does not seem more a \"restricted\" matter beacuse however your USB-Stick will boot (with or without Windows).  \nAt least I had not noticed any difference.  \n\u003e Shouldn\u0027t be the first FAT16 partition active to improve compatibility?  \n\u003e Or does the BIOS never care about active partition?\nReally, and as already said, it seems to me that your second question is more likely, but it should be confirmed by many more tests on many more different machines (BIOSes) to achieve at least a minimum of reliability.  \nBut, let me say the following - please don\u0027t take my question as a rude reply because it is not:  \nfirst you state that you do not BELIEVE that FAT file-system is matter in order to increase the hardware-compatibility and then you ask if Active condition is matter?  \nReally seems to me that it\u0027s Windows that \"prefers\" (really, requires) the booting partition as Active, not the BIOS (bootability)! :smile:  \nFurthermore, here we are not talking about an EXACT science (unfortunely), here we are talking about EVIDENCES about USB-booting and about so many reports in which so many dudes describe just those evidences.  \nSo if you are searching for a \"mathematical model of USB-Stick booting\" I\u0027m afraid that you will still not find here; also because, as already mentioned above  \n\u003e The most relevant argument explaining why so many issues occur at the booting with USB Removable Devices seems essentially imputable to the lack of an industry-standard USB-oriented common protocol of BIOS manufacturers.\nand we do not know quite what and how the various BIOS manufacturers \"put\" in their various BIOS semiconductors (CMOS) and then we do not yet have demonstrate and/or \"certified\" references for all different BIOSes.  \nFurthermore, paraphrasing jaclaz: maybe is there something of \"magic\" in the booting? :smile:  \nFrankly, in this topic I would like to hear about successes or even about failures following at least one of the two described ways, and maybe **then** we could say about hypothesis.  \n\u003e 4) I still don\u0027t get that the filesystem FAT, FAT32 or NTFS matters. Normally the job of the BIOS is to read MBR into memory and jump into it. PLoP Bootmanager author explained me that he does the same and the filesystem really doesn\u0027t matter. Did you reproduce booting once with FAT16, but now with FAT32?\nFollowing \"Format-it-\\\u0026-Forget-it\" way you can improve your USB-Stick booting not only to boot \"grub4dos\" from 1st partition in FAT16, in FAT32 or in NTFS file-system, but even running \"Full XP\" on the 1st Active Partition of your USB-Stick without ANY boot loader (except just XP\u0027s \"ntldr\").  \nAlso you can reach your \"Full XP\" running from FAT32 or from NTFS file-system on the 2nd, 3rd and/or 4th Active Partition of your USB-Stick. :smile:  \n[http://www.911cd.net...o...st\\\u0026p\u003d154653](http://www.911cd.net/forums//index.php?showtopic\u003d22747\u0026view\u003dfindpost\u0026p\u003d154653 \"External link\")  \n\nReally, as I already said, I\u0027m thinking that FAT(16) file-system **could** even not be matter, but on the other hands we can not **ignore** the great amount of reports about it.  \nSo, if you want instantly improve your USB-Stick booting then please follow the \"**Format-it-\\\u0026-Forget-it** \" way: it will improve your USB-Stick booting with NO price to pay; if you want to get even a better bootability then please follow the \"**Format-it-\\\u0026-Boot-it** \" way. :smile:  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n[![Posted Image](http://www.hostanyimage.com/files/lqxwk4gm1li0jxkcub1q.png)](http://www.hostanyimage.com/ \"External link\")  \n\n[![Posted Image](http://www.hostanyimage.com/files/qiywyccmz69vajafm6as.png)](http://www.hostanyimage.com/ \"External link\")   \n"
    },
    {
      "id": "62936",
      "timestamp": "2009-03-21T08:44:38+00:00",
      "author": "online",
      "content": "EDIT:  \nI\u0027ve edited this post because I had tried to partition a new USB-Stick replacing its MBR with a \"MBR template\" (or simply restoring an empty disk image) **without** to install \"dummydisk.sys\" Filter Driver (and without to format it with XP\u0027s Disk Management) and it seemed a good thing because then the resulting partitioning appeared as effective, but now I know that really it does NOT work about the booting.  \n\nSo, nothing has changed in this tutorial and everything has remained as before. ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)  \nThanks!   \n"
    },
    {
      "id": "62941",
      "timestamp": "2009-03-21T10:01:33+00:00",
      "author": "was_jaclaz",
      "content": "Please note that this will make all your Sticks have the same Disk Signature, something that may (or may not ) be an advantage of some kind.  \n\nThere are other ways.  \n\nMost notably you can use a Qemu virtual machine connecting the stick as \"PhysicalDrive\" then partition/format it from within the VM.  \nSince you only use FAT32 all you need is a DOS 7.x/8.0 floppy image with FDISK and FORMAT (or better with Ranish Partition Manager) to boot the VM from.  \n\nOr use MBRbatch and dsfo/dsfi:  \n[http://www.boot-land...?showtopic\u003d3191](http://www.boot-land.net/forums/?showtopic\u003d3191 \"External link\")  \n[http://www.boot-land...?showtopic\u003d5000](http://www.boot-land.net/forums/index.php?showtopic\u003d5000 \"External link\")  \nto make an image of the stick, partitin and format the image, then image it back to the stick.  \n\nThis way you are not \"linked\" to \"MBR templates\".  \n\nTo change Disk signature you can use MBRFIX allright, optionally with my pseudo-gui for it.  \n\njaclaz   \n"
    },
    {
      "id": "62945",
      "timestamp": "2009-03-21T11:08:52+00:00",
      "author": "online",
      "content": "@jaclaz  \nAs always, VERY interesting: thank you for your extraordinary disposability and for your encyclopedic knowledge! ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)   \n\nReally following this tutorial then any file-system (FAT16, FAT32 or NTFS) can be used for your USB-Stick booting, but when running \"Full XP SP3\" - and not wanting to use the EWF environment in that phase of my trials - I\u0027ve preferred the FAT32 file-system for the known reasons under NTFS of USB-Stick\u0027s *burning* .  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nEDIT:  \nplease, read [above](http://www.boot-land.net/forums/index.php?s\u003d\u0026showtopic\u003d7466\u0026view\u003dfindpost\u0026p\u003d62936 \"External link\").   \n"
    },
    {
      "id": "63352",
      "timestamp": "2009-03-26T20:30:42+00:00",
      "author": "DSpider",
      "content": "I have a silly question. ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif) Why do you need a PE enivornment to copy the files ?  \n\nWhy not just go to My Computer -\\\u003e Tools -\\\u003e Folder Options -\\\u003e View -\\\u003e \"Show hidden files and folders\" AND ALSO uncheck \"Hide protected opertating system files (Recommended)\" and just select all (Ctrl+A) and copy-paste everything from drive C: ?  \n\nWhy use a PE environment ?  \n\n\u003cbr /\u003e\n\nPS: You can also access \"Folder Options\" from the Control Panel (if you have Classic View switched on).   \n"
    },
    {
      "id": "63363",
      "timestamp": "2009-03-26T23:15:09+00:00",
      "author": "was_jaclaz",
      "content": "\u003e I have a silly question. ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png) Why do you need a PE enivornment to copy the files ?  \n\u003e\n\u003e Why not just go to My Computer -\\\u003e Tools -\\\u003e Folder Options -\\\u003e View -\\\u003e \"Show hidden files and folders\" AND ALSO uncheck \"Hide protected opertating system files (Recommended)\" and just select all (Ctrl+A) and copy-paste everything from drive C: ?  \n\u003e\n\u003e Why use a PE environment ?\n\nDid you actually tried copying an entire running XP system from within itself? ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)  \n\nIt is very likely (read as ***certain*** ) that files in use will give you problems....![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)  \n\njaclaz   \n"
    },
    {
      "id": "63381",
      "timestamp": "2009-03-27T05:52:58+00:00",
      "author": "online",
      "content": "@DSpider  \n\nReally under Windows several files are currently **in use** and you cannot copy them from within Windows itself (as jaclaz kindly already said) without issues.  \nThe PE environment is needed just for that.  \n![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)   \n"
    },
    {
      "id": "63540",
      "timestamp": "2009-03-29T16:31:46+00:00",
      "author": "DSpider",
      "content": "You\u0027re right. It didn\u0027t work.  \n\n![Posted Image](http://g.imagehost.org/0520/untitled_4.png)  \n\n![Posted Image](http://f.imagehost.org/0325/untitled_5.png)  \n\nPossibly more. ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif) So you really do need a PE environment after all...  \n\n\u003cbr /\u003e\n\nI think Parted Magic v3.7 would suit it best. It only takes up 86.4 MB (grub4dos version) so it seems like a good ideea to use it. Useful too.  \n\ntitle Parted Magic v3.7  \nfind --set-root /Boot/pmagic-3.7.iso  \nmap /Boot/pmagic-3.7.iso (hd32)  \nmap --hook  \nroot (hd32)  \nconfigfile /grub4dos.lst  \n\nThanks for clearing that up.   \n"
    },
    {
      "id": "63541",
      "timestamp": "2009-03-29T17:28:27+00:00",
      "author": "online",
      "content": "\u003e You\u0027re right. It didn\u0027t work.\nDid you doubt about that? ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)   \n\nBtw: in the tutorial I was recommended to NOT copy \"System Volume Information\" folder, as it is in your screenshot... ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif) ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)   \n\n\u003e So you really do need a PE environment after all...  \n\u003e I think Parted Magic v3.7 would suit it best.\nJust for copying, really any PE environment works the same.  \nHowever, for that purpose, also XP running from another disk/partition works (just a bit more complicated). ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)  \n\n\u003e Thanks for clearing that up.\nYou\u0027re welcome! ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)   \n"
    },
    {
      "id": "63543",
      "timestamp": "2009-03-29T17:45:39+00:00",
      "author": "was_jaclaz",
      "content": "\u003e So you really do need a PE environment after all...\n\nNow that you think you ***were*** wrong, and think you are right now, it\u0027s time to prove you are ***wrong anyway*** . ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)  \n\n...there is always VSS....![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)...  \n[http://technet.micro...y/cc785914.aspx](http://technet.microsoft.com/en-us/library/cc785914.aspx \"External link\")  \n\nSome ideas:  \n[http://blogs.msdn.co.../05/346793.aspx](http://blogs.msdn.com/adioltean/archive/2005/01/05/346793.aspx \"External link\")  \n[http://www.eggheadca...es/20051126.asp](http://www.eggheadcafe.com/articles/20051126.asp \"External link\")  \n\n[http://www.howtogeek...ked-in-windows/](http://www.howtogeek.com/howto/windows-vista/backupcopy-files-that-are-in-use-or-locked-in-windows/ \"External link\")  \n[http://alt.pluralsig...g/HoboCopy.html](http://alt.pluralsight.com/wiki/default.aspx/Craig/HoboCopy.html \"External link\")  \n\nbesides of course DriveimageXML:  \n[http://www.runtime.o...veimage-xml.htm](http://www.runtime.org/driveimage-xml.htm \"External link\")  \n\n![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)  \n\njaclaz   \n"
    },
    {
      "id": "63548",
      "timestamp": "2009-03-29T18:42:41+00:00",
      "author": "online",
      "content": "@jaclaz  \n\n![:good:](http://reboot.pro/public/style_emoticons/default/good.gif) ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png) ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)   \n\n\u003cbr /\u003e\n\nBtw: here we just want to copy seven files and three folders not locked by Windows... maybe it is simpler - and much more reliable (IMO) - running a PE environment. ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)  \nFrankly I think that the topic is already quite articulated and to add further complications probably it seems undesirable.  \nFurthermore I think that the booting of Full XP from your UFD is quite a critical build where it is enough that a \"bit\" is out of its place that the whole project may fail: I am thinking about the registry hives, as an example, of which you should preserve their absolute integrity and following other ways rather than when they are really unlocked is an useless additional risk, in my opinion, and personally I do not believe in that.  \nAt least for this purpose, but also about image backups of running Windows from within Windows itself, I do not believe too in the un-locking of the files currently in use by Windows, unless it is absolutely indispensable and/or without alternatives. ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)   \n"
    },
    {
      "id": "63549",
      "timestamp": "2009-03-29T18:48:41+00:00",
      "author": "was_jaclaz",
      "content": "@online  \n\nSure ![:good:](http://reboot.pro/public/style_emoticons/default/good.gif), it was just for the fun of it and to allow for some \"lateral thinking\". ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)  \n\n![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)  \n\njaclaz   \n"
    },
    {
      "id": "100871",
      "timestamp": "2010-05-25T02:34:26+00:00",
      "author": "stax",
      "content": "Hi all,  \n\nthis is way too difficult for me. (Or I don\u0027t have the energy).  \n\nIs there anyone who would like to enhance multiboot10 ?   \n\nSo that I can say :   \n\n1. install BartPe to 1st FAT16-partition on USB-stick  \n2. install NLite-source on 2nd NTFS-partition of USB-stick  \n3. modify boot.ini on usb-stick so I can choose what to start  \n\nthat would be great ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \n\ncheers and thanks for all your great work !   \n"
    },
    {
      "id": "100873",
      "timestamp": "2010-05-25T04:23:55+00:00",
      "author": "wimb",
      "content": "Use **Make_USB.exe** of U_XP_SET package and use **Format Stick** button with NTFS Filesystem  \n\n[http://www.911cd.net...showtopic\u003d21883](http://www.911cd.net/forums//index.php?showtopic\u003d21883 \"External link\")   \n"
    },
    {
      "id": "109953",
      "timestamp": "2010-09-24T17:29:34+00:00",
      "author": "ceehoppy",
      "content": "This the thread that got me hooked on bootland,\\\u0026 it\u0027s related to my current problem. I made a XP -UFD build that (sort of) won\u0027t boot. The host micro pc is a Sony UX280 (#1)with a Mtron ssd running XP pro SP3. I used the \"format \\\u0026 forget it\" method  \nI connected the UFD \\\u0026 installed the Hitachi filter, then installed USBBootwatcher. I copied the OS files to UFD, added the new registry keys, changed UFD drive assignment to C:, \\\u0026 added dietmar\u0027s ntdetect.com.   \nOn boot I get the oh-so-lovely BSOD with 7b stop. Other UFD\u0027s will boot on this pc. I have a near identical Sony UX (#2-same mobo, same bios, etc.) that has the stock harddrive.- The UFD boots/runs fine on that machine. I added a grubloader to my build with no change in booting.  \nI recently swapped the hdd on #2 with samsung ssd, \\\u0026 now the UFD won\u0027t boot. For testing I swapped #1 back to a hdd \\\u0026 it boots.  \nSo anyone have any ideas or suggestions? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif) If I had to guess, I think the UFD OS doesn\u0027t identify the ssd properly, then when it can\u0027t locate an internal drive it fails the boot. But I don\u0027t know how to confirm or correct this if it is true.  \nthanx   \n"
    },
    {
      "id": "109959",
      "timestamp": "2010-09-24T18:16:26+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I recently swapped the hdd on #2 with samsung ssd, \\\u0026 now the UFD won\u0027t boot. For testing I swapped #1 back to a hdd \\\u0026 it boots.  \n\u003e So anyone have any ideas or suggestions? ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif) If I had to guess, I think the UFD OS doesn\u0027t identify the ssd properly, then when it can\u0027t locate an internal drive it fails the boot. But I don\u0027t know how to confirm or correct this if it is true.  \n\u003e thanx\nYep, it is very possible that the problem is what you are guessing.  \n\nSSD\u0027s are still a largely UNexplored territory.  \n\nThe strange thing is that (unless you had to install a new driver in the \"resident\" OS - in which case you need to install it also on the OS on the UFD) something \"else\" is missing.  \n\n(I am assuming that the \"resident\" OS is still some flavour of XP and NOT Vista:ph34r: or 7, that may have more updated drivers or whatever)  \n\nTry doing the same steps suggested here:  \n[http://www.msfn.org/...howtopic\u003d137490](http://www.msfn.org/board/index.php?showtopic\u003d137490 \"External link\")  \nand report ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\nYou may also want to take some time checking this one:  \n[http://www.boot-land...?showtopic\u003d9036](http://www.boot-land.net/forums/index.php?showtopic\u003d9036 \"External link\")  \nthere may be something related to your problem.  \n\n\u003e This the thread that got me hooked on bootland,\\\u0026 it\u0027s related to my current problem\nI do understand that you have reasons of gratitude to this thread ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif), but no, it isn\u0027t related (\"much\" or \"enough\") to it.  \n\nWe risk to effectively hijack the thread this way.![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)  \n\nPlease, start a **new** thread, this thread is titled:  \n\u003e Full XP on Multi-Partitioned ***USB Flash Drive***\n\nYour new thread should be something like:  \n\u003e Problems with full XP on Multi-Partitioned ***SSD Drive***\nand may contain links to this thread allright. ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)  \n\n![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)  \nWonko   \n"
    }
  ]
}