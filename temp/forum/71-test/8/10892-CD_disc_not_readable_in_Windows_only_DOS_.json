{
  "id": "10892",
  "title": "CD disc not readable in Windows, only DOS !!??",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "96275",
      "timestamp": "2010-03-30T06:56:13+00:00",
      "author": "KoolMonkey",
      "content": "Hello all. I have an odd problem I\u0027m trying to solve. I have a cd that shows up as blank in Windows based systems. However it\u0027s not blank. I\u0027ve tried all kinds of utilities like IsoBuster, MagicISO, PowerISO etc. and other CD/DVD diagnostic tools to try and see the data. Under Windows it\u0027s convinced the data is not there.   \n\nNow... when I boot off the cd, it boots into DOS. The data is now visible. There\u0027s some text saying Nero Express, so I imagine the disc was created/burnt using Nero. From what I can gather this disc is a floppy or hard drive emulation one. But why can\u0027t I see it in Windows and be able to copy the files with LFN preservation?  \n\nI am able to duplicate this disc, and the burnt copy will boot up as well, but the same problem exists in that you cannot see the discs contents in Windows. Making an .ISO of this disc, it tells me 250mb. But when in DOS, the total amount of data is only 90mb. So wondering where the other 140mb is, or is it just phantom space and not data at all.  \n\nI tried a tool called InfinaDyne called CD/DVD Inspector and this was the report it gave me:  \n\n\u003e The following information was collected by CD/DVD Inspector  \n\u003e Copyright 1997-2004, InfinaDyne  \n\u003e\n\u003e Table of Contents  \n\u003e There are a total of 2 tracks on disc, plus the lead-out.  \n\u003e Disc manufacturer: Plasmon Data systems Ltd. Type: Phthalocyanine (gold)  \n\u003e Track 1 occupies 127008 blocks (28 Min, 13 Sec, 33 Frames).  \n\u003e This track contains data in ISO-9660 format and also contains Joliet format directory information.  \n\u003e Lead-out track starts at block 127008.  \n\u003e ---------------------------------------------  \n\u003e Bootable disc information found, boot catalog at sector 20  \n\u003e Bootable disk from Arnes Boot Record, platform\u003d80x86  \n\u003e Bootable (Hard Disk) load 1 at 0x7c0 from sector 27  \n\u003e ---------------------------------------------  \n\u003e Data track 1 recorded as part of session 1.  \n\u003e Volume create date 1/29/2009 13:09:00  \n\u003e Volume size appears suspicious, header says 127158 while track is 127008 blocks.  \n\u003e 25 blocks are used out of 127006 blocks of space  \n\u003e Both the publisher and data preparer fields are blank. This should have somebody\u0027s name in it.  \n\u003e This track has an application identifier of \"NERO BURNING ROM\".  \n\u003e There are 0 accessible files and 0 directories contained in this track.  \n\u003e A properly written post-gap was found for this track.  \n\u003e ---------------------------------------------  \n\u003e Data track 1 recorded as part of session 1.  \n\u003e Volume create date 1/29/2009 13:09:00  \n\u003e Volume size appears suspicious, header says 127158 while track is 127008 blocks.  \n\u003e Both the publisher and data preparer fields are blank. This should have somebody\u0027s name in it.  \n\u003e This track has an application identifier of \"NERO BURNING ROM\".  \n\u003e There are 0 accessible files and 0 directories contained in this track.  \n\u003e The directory in this track qualifies as using the ISO-9660 character set.  \n\u003e The mastering program for this disc did not place version numbers (\";1\") after the filenames.  \n\u003e ---------------------------------------------  \n\u003e There are one or more conditions that make replication of this disc questionable.\n\nI\u0027ve spent several hours on this trying to get somewhere. I think the disc is in El Torito format judging from what my Gooogling turned up. That\u0027s how I ended up here :smile:. Hoping someone can help.   \n"
    },
    {
      "id": "96281",
      "timestamp": "2010-03-30T07:43:23+00:00",
      "author": "Icecube",
      "content": "If you can make an ISO image of your CD, you can extract the hard disk (or floppy image) from this ISO image with 7-zip.  \n\nIt is possible to hide files on a CD (when the ISO image is created), so that it looks that the files aren\u0027t there.  \n\nFor example **mkisofs** supports this options:  \n\n```\n-hide GLOBFILE\t\t\t  Hide ISO9660/RR file\n\n  -hide-list FILE\t\t\t File with list of ISO9660/RR files to hide\n\n  -hidden GLOBFILE\t\t\tSet hidden attribute on ISO9660 file\n\n  -hidden-list FILE\t\t   File with list of ISO9660 files with hidden attribute\n\n  -hide-joliet GLOBFILE\t   Hide Joliet file\n\n  -hide-joliet-list FILE\t  File with list of Joliet files to hide\n\n  -hide-joliet-trans-tbl\t  Hide TRANS.TBL from Joliet tree\n\n  -hide-rr-moved\t\t\t  Rename RR_MOVED to .rr_moved in Rock Ridge tree\n```\n\nAll options that start with \"-hide\" will hide the files so you can\u0027t see them as available.  \nAll options that start with \"-hidden\" will set the hidden attribute to the file (you can still see them when you allow explorer to show hidden files).   \n"
    },
    {
      "id": "96295",
      "timestamp": "2010-03-30T09:29:14+00:00",
      "author": "KoolMonkey",
      "content": "Hey Icecube. I installed 7-Zip and opened the .iso file I made from the disc. All I see is a one directory called \\[BOOT\\]. And inside of that there is one file only called \"Bootable_HardDisk.img\". Is there another step to see the rest?   \n"
    },
    {
      "id": "96309",
      "timestamp": "2010-03-30T11:34:02+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Hey Icecube. I installed 7-Zip and opened the .iso file I made from the disc. All I see is a one directory called \\[BOOT\\]. And inside of that there is one file only called \"Bootable_HardDisk.img\". Is there another step to see the rest?\nTry \"opening inside\" with 7-zip.  \n\nIt is likely that 7-zip can open it, otherwise extract the bootable_Hardisk.img, it should be a largish file, up to roughly 650 Mb, and then try mounting it with IMDISK, or Winimage or VDK, or any similar tool capable of accessing or mounting a hard disk image.  \n\nTo hopefully clear the matter what you have in your hands is a Hard disk emulation CD-rom.  \n\nRead here:  \n[http://www.winimage....opic.php?t\u003d2454](http://www.winimage.info/forum/viewtopic.php?t\u003d2454 \"External link\")  \nAnd here:  \n[http://www.boot-land...?...c\u003d3890\\\u0026st\u003d6](http://www.boot-land.net/forums/index.php?showtopic\u003d3890\u0026st\u003d6 \"External link\")  \n\n:smile:  \nWonko   \n"
    },
    {
      "id": "98012",
      "timestamp": "2010-04-15T09:02:25+00:00",
      "author": "KoolMonkey",
      "content": "\u003e Try \"opening inside\" with 7-zip.  \n\u003e\n\u003e It is likely that 7-zip can open it, otherwise extract the bootable_Hardisk.img, it should be a largish file, up to roughly 650 Mb, and then try mounting it with IMDISK, or Winimage or VDK, or any similar tool capable of accessing or mounting a hard disk image.  \n\u003e\n\u003e To hopefully clear the matter what you have in your hands is a Hard disk emulation CD-rom.  \n\u003e\n\u003e Read here:  \n\u003e [http://www.winimage....opic.php?t\u003d2454](http://www.winimage.info/forum/viewtopic.php?t\u003d2454 \"External link\")  \n\u003e And here:  \n\u003e [http://www.boot-land...?...c\u003d3890\\\u0026st\u003d6](http://www.boot-land.net/forums/index.php?showtopic\u003d3890\u0026st\u003d6 \"External link\")  \n\u003e\n\u003e :wink:  \n\u003e Wonko\n\nAn update on this. Wonko I think you\u0027re right. After looking at this on and off for the past few weeks, and studying the .iso more, I think I\u0027ve discovered a thing or two.  \n\nOne, this .iso was indeed made using the \"Hard Drive Emulation\" mode. Even though the data comes to about 80mb, the image itself is 250mb. So it\u0027s possible a image was made from a 250mb hard drive partition that contained only 80mb of data.  \n\nThe disk was burnt using Nero. The reason I cannot see any of the data inside Windows is because it\u0027s all contained within the boot loader itself. Normally you would use Floppy Emulation that can use 1.44MB or 2.88MB image sizes, but since the burn method is Hard Drive Emulation, there is no size restriction.  \n\nThus the data is only visible once the disk boots and loads the hidden image.  \n\nUsing IsoBuster, I was able to see the boot disc details. It shows the .img size is 2mb, but actually it\u0027s 250mb. IsoBuster simply cannot deal with the image size being bigger and thus takes a guess it\u0027s a 2mb size. I\u0027d love to be able to open this .iso with a program that can extract the .img file in it\u0027s entirety. So far only Isobuster can extract it. I\u0027ve tried WinImage, UltraISO and quite a few others, but this is as far as I\u0027ve been able to get.  \n\n![Posted Image](http://img689.imageshack.us/img689/1488/bootdetails1.gif)  \n![Posted Image](http://img689.imageshack.us/img689/6727/bootdetails2.gif)  \n\nAs you can see in the pictures, there\u0027s the boot loader info, and in the second what appears to be a \"blank\" cd.  \n\nThe mkisofs info about hiding the file system when creating an .iso was interesting. I thought maybe my image had this done to it, but after looking at it more, it doesn\u0027t look like it has. My disc is simply one giant hard drive image, where the data is only visible if the disc itself has been booted of it.  \n\nNow that I think I\u0027ve worked it out, the fun is then in how to recreate this effect :wink: I\u0027ve been playing around with Nero for hours but can\u0027t seem to get a disc that is bootable in this method. The load segment is set to 0x7c0 and the loaded sectors to 04 which is the setting for a hard drive image. Don\u0027t know what I\u0027m doing wrong, but it\u0027s something obviously lol  \n\nWhat do you guys think?   \n"
    },
    {
      "id": "98028",
      "timestamp": "2010-04-15T13:26:26+00:00",
      "author": "Icecube",
      "content": "\u003e Using IsoBuster, I was able to see the boot disc details. It shows the .img size is 2mb, but actually it\u0027s 250mb. IsoBuster simply cannot deal with the image size being bigger and thus takes a guess it\u0027s a 2mb size. I\u0027d love to be able to open this .iso with a program that can extract the .img file in it\u0027s entirety. So far only Isobuster can extract it. I\u0027ve tried WinImage, UltraISO and quite a few others, but this is as far as I\u0027ve been able to get.  \n\u003e oot loader info, and in the second what appears to be a \"blank\" cd.\nDid you try 7-zip?  \n\u003e Now that I think I\u0027ve worked it out, the fun is then in how to recreate this effect :wink: I\u0027ve been playing around with Nero for hours but can\u0027t seem to get a disc that is bootable in this method. The load segment is set to 0x7c0 and the loaded sectors to 04 which is the setting for a hard drive image. Don\u0027t know what I\u0027m doing wrong, but it\u0027s something obviously lol\nYou can try the following mkisofs command:  \n\n```\nmkisofs -o ../mynewiso.iso -b /yourharddiskimage.img -hard-disk-boot .\n```\n\n\u003cbr /\u003e\n\nCan you give a link to the iso that you are using?   \n"
    },
    {
      "id": "98043",
      "timestamp": "2010-04-15T14:57:47+00:00",
      "author": "KoolMonkey",
      "content": "\u003e Did you try 7-zip?  \n\u003e\n\u003e You can try the following mkisofs command:  \n\u003e\n\u003e ```\n\u003e mkisofs -o ../mynewiso.iso -b /yourharddiskimage.img -hard-disk-boot\n\u003e ```\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e Can you give a link to the iso that you are using?\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\nYes I\u0027ve tried 7-zip before and it doesn\u0027t work as good as Isobuster. Though 7-zip \"sees\" things a little different. Instead of the file being called \"Arnes Boot Record.img\" 7-zip reports it as \"Bootable_HardDisk.img\". And the size is only 512 bytes vs the 2mb file being reported in Isobuster. So this only adds to the hmm factor that different programs are reading different things with my .iso.  \n\nI\u0027ll give the mkisofs command a try. Thanks for the tip.  \n\nI don\u0027t have a link for the .iso I\u0027m referring to as it wasn\u0027t a download.   \n"
    },
    {
      "id": "98069",
      "timestamp": "2010-04-15T20:33:00+00:00",
      "author": "Icecube",
      "content": "If 7-zip only shows \"Bootable_HardDisk.img\" (512bytes) and not the full hard disk images then this means that the actual hard disk image is made invisible. The \"Bootable_HardDisk.img\" is the MBR of the hard disk image.  \n\nYou can manually extract the hard disk image.  \nFor some background about the El Torito specification (bootable CDs), read (page 9 and 10):  \n[http://www.phoenix.c.../specscdrom.pdf](http://www.phoenix.com/docs/specscdrom.pdf \"External link\")  \n\nYou can also look at this example. The ISO used there uses no-emulation instead of a hard disk emulation, but it explains the El Torito Structure of bootable iso\u0027s well:  \n[http://odin.himinbi....extraction.html](http://odin.himinbi.org/xp_cds/eltorito_extraction.html \"External link\")  \n\nSo basically you need to extract the boot catalog of your ISO (BootCatalog.cat in your case).  \nOpen it with a hexeditor. It should look similar to this:  \n\u003e 00000000 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \\|................\\|  \n\u003e 00000010 00 00 00 00 00 00 00 00 00 00 00 00 aa 55 55 aa \\|.............UU.\\|  \n\u003e 00000020 **88** **04** 00 00 04 00 01 00 1a 00 00 00 00 00 00 00 \\|................\\|  \n\u003e 00000030 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \\|................\\|  \n\u003e \\*  \n\u003e 00000800\nBoot Indicator: **88** means that you have a bootable ISO  \nBoot Media Type: **04** means that the ISO uses hard disk emulation  \nLoad RBA (start address of the virtual disk): 1a 00 00 00 \u003d\u003d\\\u003e you need to reverse this value: 0x0000001a\u003d26  \n\nA sector on a CD is 0x800\u003d2048 bytes. So your hard disk images starts at RBA \\* CD sector size.  \nSo for my ISO, the hard disk image starts at byte:  \n26\\*2048\u003d53248  \n\nFor example, you can now extract the image with **dd** :  \n\n```\ndd if\u003dmyiso.iso of\u003dextracted-hdd.img bs\u003d2048 skip\u003d26\n```\n\nWhere:  \n\n* myiso.iso \u003d the iso from which you want to extract the hard disk image\n* extracted-hdd.img \u003d filename that you want to give to the extracted hard disk image\n* bs\u003d2048 \u003d\u003d\\\u003e block size is 2048 bytes (\u003d CD sector size)\n* skip\u003d26 \u003d\u003d\\\u003e use the RBA value here (will skip the first 26 sectors (26\\*2048 bytes) of the ISO)\n\nNow you have your hard disk image. It will probably be a little bit bigger than the one that was used to create the ISO (some extra zeros at the end of the image). If you want to fix that, you probably need to post the MBR of the extracted hard disk image, so the minimum size of the image can be calculated based on the partition table info. I don\u0027t want to spend time on this. Maybe Wonko wants to help with it.  \n\nYou can recreate the iso now, if you want.  \nCreate an empty directory (called hdd-iso) an copy extracted-hdd.img to it.  \nGet mkisofs and put it one directory up of the empty directory that you created.  \nCd to this directory with the Command Prompt program and run:  \n\n```\nmkisofs -o yournew.iso -b extracted-hdd.img -c boot.cat -hard-disk-boot hdd-iso\n```\n\n\u003cbr /\u003e\n\nYou can hide the hard disk image and the boot catalog file too (like in the original iso):  \n\n```\nmkisofs -o yournewhidden.iso -b extracted-hdd.img -c boot.cat -hard-disk-boot -hide extracted-hdd.img -hide boot.cat hdd-iso\n```\n\n\u003cbr /\u003e\n\nLook at the difference between the 2 iso\u0027s with 7-zip.  \n\nIsoBuster gives the LBA addresses already for you:  \n![Posted Image](http://img689.imageshack.us/img689/1488/bootdetails1.gif)  \nProbably you need to subtract 1 from the value that you see, because it is possible that it starts counting from 1 instead of from 0. So RBA will probably be 26 for you too. You can extract the \"Bootable_HardDisk.img\" from the ISO and compare the bytes with the first 512 bytes of the extracted image. If they match when you use:  \n\n```\ndd if\u003dmyiso.iso of\u003dextracted-hdd.img bs\u003d2048 skip\u003d26\n```\n\nIsoBuster starts counting LBA offsets from 1 instead of 0.  \n\nIf the first 512 bytes of the extracted hard disk image match when you use:  \n\n```\ndd if\u003dmyiso.iso of\u003dextracted-hdd.img bs\u003d2048 skip\u003d27\n```\n\nIsoBuster starts counting LBA offsets from 0, like it should.   \n"
    },
    {
      "id": "108542",
      "timestamp": "2010-09-04T14:54:40+00:00",
      "author": "Icecube",
      "content": "If you are still interested in extracting the hard disk image, you could try the **bExtract** batch file written by Wonko the Sane:  \n[http://www.boot-land...?...12406\\\u0026st\u003d30](http://www.boot-land.net/forums/index.php?showtopic\u003d12406\u0026st\u003d30 \"External link\")   \n"
    }
  ]
}