{
  "id": "18817",
  "title": "Suddenly i can\u0027t install Windows XP anymore",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "176249",
      "timestamp": "2013-08-25T14:10:59+00:00",
      "author": "Peter80",
      "content": "I have Windows 7, Ubuntu and Windows XP installed on triple boot system. I decided to reinstall Windows XP and for my surprise i couldn\u0027t do this anymore. I am trying to install XP from USB and when i restart the laptop every time the setup stops after showing \"Setup is inspecting your computer\u0027s hardware configuration\". I have reinstalled Windows XP on this laptop many times, using the same installation USB but something like this is happening for the first time. I can boot Windows 7 and Ubuntu, and recently i reinstalled Windows 7, but Windows XP i can\u0027t install any more.  \n\nAny idea what might be causing this?\n\n"
    },
    {
      "id": "176265",
      "timestamp": "2013-08-26T07:23:31+00:00",
      "author": "genetix",
      "content": "Hmm, might wanna check that you don\u0027t have any partitions flagged \u0027hidden\u0027 NT 5 doesn\u0027t much like that and kinda freezes at that stage or second stage, if you do. Other than that the primary partition is \u0027active\u0027 and other than that I\u0027d say the issue is somewhere in primary hard drive partitioning scenario.\n\nIf you cannot find issue there, well, there\u0027s always a chance that USB has bad files or something in it just cannot be read.\n\n"
    },
    {
      "id": "176273",
      "timestamp": "2013-08-26T10:38:57+00:00",
      "author": "Holmes.Sherlock",
      "content": "Why don\u0027t you try a CD installation?\n\n"
    },
    {
      "id": "176277",
      "timestamp": "2013-08-26T12:47:15+00:00",
      "author": "Peter80",
      "content": "I don\u0027t have hidden partitions and i don\u0027t think the reason is in the USB or CD because i tried to install from both and it stops at the same stage. I run chkdsk /f and it didn\u0027t find errors. I also tried Super Fdisk from live CD and it gave me some partition table error \"No any right partition table on hardisk\" but i don\u0027t know if this can be true because i can boot Windows 7 and Ubuntu.  \n\nThese are my current partitions. I want to install Windows XP on sda4, on sda1 i have windows 7 installed. I tried with boot flag set on sda1 and sd4 and it made no difference.\n\n[![xdss.png](http://img593.imageshack.us/img593/1364/xdss.png)](http://img593.imageshack.us/i/xdss.png/ \"External link\")\n\nIs it possible the problem to be in the roor boot sector, those that is in the first sector in any hard disk? I don\u0027t know if my question make sense, i am still learning about boot methods and partitioning.\n\n**Edited by Peter80, 26 August 2013 - 12:48 PM.**\n"
    },
    {
      "id": "176278",
      "timestamp": "2013-08-26T13:46:24+00:00",
      "author": "Wonko the Sane",
      "content": "Wait a minute.\n\nWhich XP is it?\n\nI mean service pack level?\n\nDoes it support LBA48?\n\nAnd does it support it ++*during setup*++?\n\nTake some time here:\n\n[http://support.micro...kb/303013/en-us](http://support.microsoft.com/kb/303013/en-us \"External link\")\n\nAND later some more time here:\n\n[http://www.msfn.org/...on-win2k-setup/](http://www.msfn.org/board/topic/75713-48-bit-lba-on-win2k-setup/ \"External link\")\n\n[http://www.msfn.org/...nd-sata-drives/](http://www.msfn.org/board/topic/157068-windows-xp-professional-rtm-and-sata-drives/ \"External link\")\n\nI guess that the problem is not \"I cannot install XP anymore\", but rather \"I used to install XP on a partition, and now that I am attempting to install it on a partition well beyond 128 Gb for the VERY FIRST time, I am having issues\" ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nJFYI, there is not any \"roor boot sector\" (nor any root boo**t** sector :wink:) the first sector of a hard disk is the MBR or Master Boot Record.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176283",
      "timestamp": "2013-08-26T16:17:05+00:00",
      "author": "Peter80",
      "content": "It\u0027s Windows XP service pack 3 and it has all mass storage driver packs integrated. I use DriverPacks to integrate them.  \n\n\u003cbr /\u003e\n\nHow to find if the problem is in MBR and is there any program that can show the content of MBR?  \n\nBy the way, i am using Grub2 as boot manager.\n\n"
    },
    {
      "id": "176286",
      "timestamp": "2013-08-26T17:03:29+00:00",
      "author": "Wonko the Sane",
      "content": "DriverPacks may solve an issue with drivers, but it may also (in some rare cases) introduce it.\n\nThe problem is NOT in the MBR (in the sense of the MBR code), and NOT in the setting for the active partition.\n\nAs a matter of fact the only thing that a plain XP will look for in the MBR will be:\n\n1. the presence of \"Magic Bytes\" 55AA\n2. the validity of the current partitioning scheme (Partition Table)\n3. the presence of a Disk Signature (which must be there, otherwise you wouldn\u0027t boot the 7)\n\nAs soon as the install actually begins, the XP setup will anyway rewrite from scratch the whole MBR with the exclusion of the three items above and it will set the active parttion to the one where NTLDR is placed.\n\nBTW, this will REPLACE any code you now have in the MBR, may it be the standard Windows 7 one or the GRUB2 one, this means that you need to think before installing the XP if you have the tools and knowledge to re-install (if it is installed to the MBR) the GRUB2.\n\nThe point is when/where exactly the issue begins.\n\nGoing the CD way, if you get the \"press any key to boot form CD\" (unless of course you have removed bootfix.bin) is already a sign that the MBR is read (at least the \"Magic Bytes\" AND one entry in the partition table).\n\nAn issue with #3 is to be excluded for the mentioned reasons.\n\nWhat remains are only:\n\n* issues with the \"queer\" partitioning scheme (particularly with partition alignments being in \"mixed\" mode, \"canonical CH boundary\" vs. \"new approach Mb aligned\")\n* the use of LBA48 not being supported by the setup\n* a limit (by design) in the Windows XP setup routine\n\nI will ask these questions again (they were implied in my previous post, but maybe it wasn\u0027t clear enough):\n\n1. did you ever install XP on that hard disk to partition sda4?\n2. did you ever install XP on that hard disk on any partition starting beyond the 128 GB/LBA48 limit?\n3. were all your previous and successful attempts to install XP use as target the first partition?\n\nAmong the zillion ways to check a partition table, you could use a hex/disk editor, but maybe easier, get HDhacker:\n\n[http://dimio.altervista.org/eng/](http://dimio.altervista.org/eng/ \"External link\")\n\nuse it to save/backup first sector of the PhysicalDrive\n\nCompress the resulting 512 bytes sized file into a .zip.\n\nPost the .zip archive on \\*any\\* file hosting site and post a link to download it.\n\nAnother way (shameless plug ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)) could be that of using tiny hexer and my MBRview script to inspect the MBR partition table:\n\n[http://reboot.pro/to...-hexer-scripts/](http://reboot.pro/topic/8734-tiny-hexer-scripts/ \"\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176288",
      "timestamp": "2013-08-26T17:58:18+00:00",
      "author": "Peter80",
      "content": "I have installed Windows XP on three different partition on this disk but i have completely repartitioned the drive so the partitions don\u0027t exist anymore. I had not install it on the first partition, but i had it installed on the last partition sd4. I guess installing XP on the last partition is beyond the 128 GB limit.  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nThis is the .dat file that HGhacker generated:  \n\n[http://www.mediafire...m01yd1qa17mjh6r](http://www.mediafire.com/?m01yd1qa17mjh6r \"External link\")\n\nEdit: I forget to compress the file, sorry.\n\n**Edited by Peter80, 26 August 2013 - 06:01 PM.**\n"
    },
    {
      "id": "176290",
      "timestamp": "2013-08-26T18:24:47+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Edit: I forget to compress the file, sorry.\n\nNo prob, it is just \"common suggested procedure\".\n\nFind attached the resulting .html\u0027s (made from the mentioned TinyHexer structure viewers).\n\nThe MBR code is that of GRUB2.\n\nAs a matter of fact since it does use some otherwise unused bytes, I may do a nice 180 degree turnaround ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif) and add it to the possibilities ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif).\n\nNow that you have a valid backup, you could try changing the boot settings to use the standard 7 MBR, and re-install GRUB2 to the partition bootsector.\n\nDo you have a clear, tested, recovery procedure for that machine?\n\nCan you check the SETUPREG.HIV to see if you have the proper settings to enable LBA48?\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko  \n\n#### Attached Files {#attach_wrap}\n\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003da3cb9e35f083c5e982a0db21ac2328f3\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d14498 \"Download attachment\") [**Peter80_PT.7z**](http://reboot.pro/index.php?s\u003da3cb9e35f083c5e982a0db21ac2328f3\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d14498 \"Download attachment\") **2.49KB** 262 downloads\n\n"
    },
    {
      "id": "176295",
      "timestamp": "2013-08-26T19:28:31+00:00",
      "author": "Peter80",
      "content": "I remember right after installing Windows 7 i tried to install XP and i couldn\u0027t. Then i use Boot Repair that i have on USB and installed Grub2. After this i still couldn\u0027t install XP.  \n\nIf i understand correctly Grub2 replaces Windows 7 boot files in MBR sector and on start up it connects to the boot files on Windows 7 partition to boot windows. But Windows 7 boot manager can\u0027t boot Ubuntu because it doesn\u0027t recognize linux.  \n\nThis is the SETUPREG.HIV file from Windows XP installation files.  \n\n[http://www.mediafire...v0ecvsakmrbpduc](http://www.mediafire.com/?v0ecvsakmrbpduc \"External link\")  \n\nI deleted the Windows XP install that i had on sda4 and reformat the partition so currently i don\u0027t have XP installed.\n\n"
    },
    {
      "id": "176310",
      "timestamp": "2013-08-27T11:48:42+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e If i understand correctly Grub2 replaces Windows 7 boot files in MBR sector and on start up it connects to the boot files on Windows 7 partition to boot windows. But Windows 7 boot manager can\u0027t boot Ubuntu because it doesn\u0027t recognize linux.\n\nNot really-really.\n\nThe \"normal\" boot sequence is:\n\nBIOS-\\\u003eMBR-\\\u003ePBR of active primary partition-\\\u003ewhatever OS loader\n\ni.e.:\n\nDOS:\n\nBIOS-\\\u003eMBR-\\\u003ePBR of active primary partition-\\\u003eIO.SYS\n\nNT up to 2003:\n\nBIOS-\\\u003eMBR-\\\u003ePBR of active primary partition-\\\u003eNTLDR-\\\u003eBOOT.INI (choices)-\\\u003eNTDETECT.COM-\\\u003eWindows NT\n\nNT starting from Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)\n\nBIOS-\\\u003eMBR-\\\u003ePBR of active primary partition-\\\u003eBOOTMGR-\\\u003e\\\\boot\\\\BCD (choices)-\\\u003eWinload.exe-\\\u003eWindows NT\n\nI.e. the MBR code is a simple IPL (Initial Program Loader) that simply chainloads the PBR of the active partition, and the PBR code is a simple loader for the actual OS loader.\n\nGRUB (legacy), grub4dos and GRUB2 are more complex.\n\nThey can be installed to the MBR (+ a number of hidden sectors on first track) and in this case they \"bypass\" the above mechanism, the code in the MBR (+hidden sectors) is a loader for the \"main\" grub file (be it stage2, grldr or core.img) and no code is needed in the PBR.\n\nOr they can be installed to the PBR.\n\nIn this case the MBR contains \"conventional\" IPL code that loads the PBR of the active partition or it can be an \"advanced\" MBR code, such as partita or OS-MBR that can choose which partition to make active and boot on-the-fly.\n\nOnce a bootmanager like the \"grub family\" is loaded you are inside a \"reduced\" real mode OS and from that you can load \\*almost anything\\*.\n\nI am not going to check your setupreg.hiv, not because I am an old grumpy bastard (which I am :wink:) but because since you are wanting to learn about booting matters, you need to do some homework and get familiar with the tools and concepts of this field.\n\nIf you need help on how to check it, just ask :smile:.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176318",
      "timestamp": "2013-08-27T16:33:36+00:00",
      "author": "Peter80",
      "content": "Thanks, for the info. The things got more clearer to me.  \n\n\u003cbr /\u003e\n\nIs it possible to set extended partition as hidden, because i tried with GParted but the \"hidden\" option was not available?  \nI have read in another forum that sometimes install stops because of bug in Windows XP setup. In some cases the setup can\u0027t recognize the extended partition if it\u0027s changed. And i took some space from the beginning of the partition and moved it outside the extended partition to add it to the first partition sda1. I don\u0027t know if this can be true but i wanted to test if the install will pass through the black screen if the extended partition was hidden.\n\n"
    },
    {
      "id": "176323",
      "timestamp": "2013-08-27T18:13:49+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Thanks, for the info. The things got more clearer to me.  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e Is it possible to set extended partition as hidden, because i tried with GParted but the \"hidden\" option was not available?  \n\u003e I have read in another forum that sometimes install stops because of bug in Windows XP setup. In some cases the setup can\u0027t recognize the extended partition if it\u0027s changed. And i took some space from the beginning of the partition and moved it outside the extended partition to add it to the first partition sda1. I don\u0027t know if this can be true but i wanted to test if the install will pass through the black screen if the extended partition was hidden.\n\nYou can well use a \"hidden\" Partition ID (that is \"properly\" made by adding 0x10 to the \"Normal\" partition ID, but with NT based systems you can also more simply make it 00 and the partition will be \"ignored\").\n\n[http://www.win.tue.n...es-2.html#ss2.4](http://www.win.tue.nl/~aeb/partitions/partition_types-2.html#ss2.4 \"External link\")\n\n[http://www.win.tue.n...on_types-1.html](http://www.win.tue.nl/~aeb/partitions/partition_types-1.html \"External link\")\n\nThe point is whether you have - as hinted before - a tested, sound \"recovery\" procedure, i.e. an external media, like a CD or a USB stick capable of booting that machine and containing the tools needed to \"revert\" this situation.\n\nBefore locking yourself inside or out of \\*anything\\* spend some time to make sure you have a way out.\n\nRemember, right now you have GRUB2 installed ot the MBR (+hidden sectors) and if the install of XP starts, it will re-write most probably a \"standard\" MBR.\n\nIt is not the first time that I have seen someone doing something similar and get a BSOD, which ultimately equates to an unbootable system.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176412",
      "timestamp": "2013-08-29T09:17:39+00:00",
      "author": "Peter80",
      "content": "What i have tried:  \n\nI removed lba flag from the extended partition  \nI removed boot flag from sda1 partition  \nI repaired MBR with Windows 7 Repair Console  \nI repaired MBR using Boot Repair  \n\nNothing worked.  \n\nSomething else i have noticed is that when i use the XP installation USB the setup starts from the third stage which is \"boot from first internal partition\" and not from the second stage which is \"boot from partition 0\". It looks like it detects XP install on the hard disk which is strange because there is no XP install on it. I created the installation USB with WinSetupFromUSB.  \n\nI think i will leave it like this. I am using Windows 7 most of the time anyway. I just wanted to find what is causing this problem, because in the future if it happens again to know how to fix it.\n\n"
    },
    {
      "id": "176414",
      "timestamp": "2013-08-29T09:29:09+00:00",
      "author": "Wonko the Sane",
      "content": "Well, it is still possible that something is connected with the USB install.  \nWhat happens with CD?  \nPost your current MBR. (just to make sure that your \"repairs\" have actually repaired it ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png))  \n\u003e I think i will leave it like this. I am using Windows 7 most of the time anyway. I just wanted to find what is causing this problem, because in the future if it happens again to know how to fix it.\n\nGiving up is ***NEVER*** an option! ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko\n\n"
    },
    {
      "id": "176421",
      "timestamp": "2013-08-29T11:54:31+00:00",
      "author": "Peter80",
      "content": "If i use CD the setup stops at the same stage as with the USB.  \n\nThis is the boot configuration after repairing MBR with Boot Repair:  \n\n[http://paste.ubuntu.com/6039921/](http://paste.ubuntu.com/6039921/ \"External link\")  \n\nThis is the boot configuration after repairing MBR with Windows 7 repair console using the commands - bootrec /fixmbr and bootrec /fixboot  \n\n[http://paste.ubuntu.com/6039922/](http://paste.ubuntu.com/6039922/ \"External link\")  \n\nI have noticed that if i remove the hard disk the installation continue in the regular way passing the black screen, so i guess the problem is with the hard disk partitioning and boot sector.\n\n"
    },
    {
      "id": "176497",
      "timestamp": "2013-08-30T16:02:15+00:00",
      "author": "Wonko the Sane",
      "content": "I asked about a copy of the MBR , not of the configuration, if there is an issue with the \"bytes\" in the MBR I need to have a look at the actual bytes :wink:.\n\nHowever, from this (from the second link):\n\n\u003e Grub2 (v1.99-2.00) is installed in the MBR of /dev/sda and looks at sector  \n\u003e 264192 of the same hard drive for core.img, but core.img can not be found  \n\u003e at this location.\n\u003e\nI can tell you that what you did, failed to do what was needed (re-write a standard MBR code), but rather botched the existing GRUB2 install to the MBR.\n\nTo recap, the suggested test is to:\n\n1. have a \"standard\" XP or 7 MBR code\n2. have the GRUB2 installed to the PBR (and NOT to the MBR)\n\nAs a further test (if the above is not enough) hide other partitions but the one you want to install the XP to.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176503",
      "timestamp": "2013-08-30T16:49:02+00:00",
      "author": "Peter80",
      "content": "I am not sure how to get copy of MBR. What program to use?  \n\nI am posting disk configuration report from Partition Wizard. I don\u0027t know if it can tell something.  \n\n```\nhttp://www.mediafire.com/?vjvbtq72184qn5g\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "176519",
      "timestamp": "2013-08-30T17:50:53+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I am not sure how to get copy of MBR. What program to use?\n\nAre you kidding? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png) ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)\n\nYou **ALREADY** used HdHacker. ![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif)\n\nTo change the MBR code back to the \"default\" XP or 7 one you can use mbrfix:\n\n[http://www.sysint.no...ting/mbrfix.htm](http://www.sysint.no/nedlasting/mbrfix.htm \"External link\")\n\nor the Windows 7 version (NOT earlier versions that do not have the /mbr switch) of the bootsect.exe:\n\n[http://technet.micro...7(v\u003dws.10).aspx](http://technet.microsoft.com/en-us/library/dd744577(v\u003dws.10).aspx \"External link\")\n\n***AGAIN***, BEFORE changing the MBR code you must be SURE that you have an alternate way of booting the machine/revert the changes, this is the 3rd (THIRD) time I am asking you to confirm that you DO have such a way (as the previous two attempts to have this piece of info were ignored).\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176523",
      "timestamp": "2013-08-30T18:40:57+00:00",
      "author": "Peter80",
      "content": "This is a copy of MBR from HDHacker:  \n\n```\nhttp://www.mediafire.com/?8m8d8tc8y834oyb\n```\n\nI thought you mean some other way for copy MBR.  \n\n\u003cbr /\u003e\n\nAs i said i have Boot Repair to repair boot sector and other rescue systems from live USB. I thought you have noticed this from boot configuration reports.  \n\nIf i use bootsect.exe command it says it doesn\u0027t recognize it as internal or external command. I have Windows 7 Ultimate SP1.\n\n**Edited by Peter80, 30 August 2013 - 06:41 PM.**\n"
    },
    {
      "id": "176543",
      "timestamp": "2013-08-31T10:43:28+00:00",
      "author": "Wonko the Sane",
      "content": "The bootsect.exe should be in any Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) or later, including Windows 7 of course. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png) Strange. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nHowever now the MBR CODE seems a fairly \"plain\" one, most probably it is the standard windows 7 one, so it is OK.\n\nNow what you can try is to set to 00 (which for windows should mean \"no partition\") all partitions but the first one.\n\nThese are bytes @offset 466 (now 0F) , 482 (now 07) , 498 (now 07).\n\nThe effect should be that you can boot from the CD (or USB) the install of XP \"normally\" and that it will see ONLY the first partition.\n\nIf this happens, reboot and re-set the last partition (@ offset 498) to 07 and try again.\n\nReboot again and re-set the byte @ 482 to 07 and try again, reboot and re-set the byte @466 to 0F and try again.\n\nThis way we can find out if any of the partition entries is the issue (and more likely than anything else the extended partition could be the issue).\n\nTo change those bytes you can use (whatever you find more handy) grub4dos or a hex/disk editor from the Windows 7 (which should continue to be bootable) or from the \"recoverey CD/USB\"..\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWnko\n\n"
    },
    {
      "id": "176565",
      "timestamp": "2013-09-01T08:41:48+00:00",
      "author": "Peter80",
      "content": "I was close to wipe my whole hard disk. I used some shit program to fix partition table errors and it ended up deleting two of the partitions and i was unable to boot. Then i tried couple of partition recovery programs from live USB which additionally messed up the partitions but in the end i was able to recover the partitions with Partition Wizard though they were recovered with errors. At least i learned what is a good partition recovery program and what is not.  \n\nI also tried to hide all partitions and then install Windows XP and this didn\u0027t help too.  \n\nHow to change the partition ID to 00? Partition Wizard has option to change partition ID\u0027s but it doesn\u0027t allow me to set it to 00.  \n\n"
    },
    {
      "id": "176567",
      "timestamp": "2013-09-01T10:30:44+00:00",
      "author": "Wonko the Sane",
      "content": "The actual idea (mine at least) is to NEVER, for ANY reason trust ANY partitioning program, let alone those claiming to fix anything, and particularly those with a nice GUI and \"automagical\" features, particularly on a disk that already - for any reason - is suspected to have any issue.  \n\u003e How to change the partition ID to 00? Partition Wizard has option to change partition ID\u0027s but it doesn\u0027t allow me to set it to 00.\nAny difficult part in:  \n\u003e To change those bytes you can use (whatever you find more handy) grub4dos or a hex/disk editor from the Windows 7 (which should continue to be bootable) or from the \"recoverey CD/USB\"..\n\n![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\nIt is assumed that you know what a hex/disk editor is and how to use it to edit manually a handful of bytes.  \nIf not, ask about the suggested tool(s) and do not assume that the first partition related program is the same, there may be tens of tools that can set those bytes to 0, and then reset them, but a hex/disk editor is the simpler one that just does the job.  \n\nJFYI, in what you posted there was nothing that needed fixing, and since partitioning is a rather delicate matter, you should not use \\*any\\* partition tool without first knowing in the utter detail what it actually does.  \nIn a situation like yours, even using the \"standard\" XP Disk Manager to simply change the active status of a partition may lead to losing the partition table, see:  \n[http://reboot.pro/to...itioning-issue/](http://reboot.pro/topic/9897-vistawin7-versus-xp-partitioning-issue/ \"\")  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "176571",
      "timestamp": "2013-09-01T11:19:19+00:00",
      "author": "Peter80",
      "content": "Grub4dos and Hex/disk seems too advanced to me so i use Partition Guru, or Disk Genius they are the same program, to change partition id. I changed the extended partition id from 0F to 08, it didn\u0027t allow me to change it to 00, and by the way, this should be done from live USB/CD otherwise you get BSOD.  \nThen i tried the Windows XP install and i was able to pass the black screen where it hangs before but when it came to the stage when it showed the partitions it said that it doesn\u0027t recognize the hard disk.  \n\nSo, i think the problem is in the partitions id and partition table. I read that the GPT doesn\u0027t need partition id\u0027s so may be if i convert from MBR to GPT i will be able to install XP without problems.  \n\nAlso, changing extended partition id deleted all other partitions. It was good that i had backup of the partition table that i recovered with Disk Genius.\n\n"
    },
    {
      "id": "176575",
      "timestamp": "2013-09-01T13:28:09+00:00",
      "author": "Wonko the Sane",
      "content": "Look, I don\u0027t want to be grumpi***er*** ![:ranting2:](http://reboot.pro/public/style_emoticons/default/ranting2.gif) than usual, but the idea is that you learn new, strange things.  \n\nOf course you are perfectly free to do OTHER things from what is suggested to you, but you cannot \"invent\" (successfully) anything unless (until) you have understood the very basics.  \n\nFacts of the day ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif):\n\n1. XP cannot (won\u0027t, it is impossible that it will) be installed, nor booted from a GPT disk\n2. changing extended partition ID does NOT delete anything, it simply removes the indexing of any volume inside extended (technically it removes access to first link of the EMBRs\u0027 chain), there is NOTHING to recover, you just change the ID back to 05 or 0F and everything will be exactly like before.\n\nIf you prefer, you are coming here asking for help, you should be prepared to accept the help that is provided to you and - while being of course free to ask each and every clarification you think needed about the suggestions provided before attempting making use of it - you should do what is told you (and NOT another thing, expecially if \"random\"), really, if I had thought that Partition Guru, or Disk Genius or any other of the***n***(crappy or non crappy) programs you used more or less senselessly were fit for this, I would have suggested to you one of them instead.\n\nQuick reminder, point f.:\n\n[http://reboot.pro/to...ead-this-first/](http://reboot.pro/topic/2420-troubleshooting-howto-read-this-first/ \"\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176249",
      "timestamp": "2013-08-25T14:10:59+00:00",
      "author": "Peter80",
      "content": "I have Windows 7, Ubuntu and Windows XP installed on triple boot system. I decided to reinstall Windows XP and for my surprise i couldn\u0027t do this anymore. I am trying to install XP from USB and when i restart the laptop every time the setup stops after showing \"Setup is inspecting your computer\u0027s hardware configuration\". I have reinstalled Windows XP on this laptop many times, using the same installation USB but something like this is happening for the first time. I can boot Windows 7 and Ubuntu, and recently i reinstalled Windows 7, but Windows XP i can\u0027t install any more.  \n\nAny idea what might be causing this?\n\n"
    },
    {
      "id": "176265",
      "timestamp": "2013-08-26T07:23:31+00:00",
      "author": "genetix",
      "content": "Hmm, might wanna check that you don\u0027t have any partitions flagged \u0027hidden\u0027 NT 5 doesn\u0027t much like that and kinda freezes at that stage or second stage, if you do. Other than that the primary partition is \u0027active\u0027 and other than that I\u0027d say the issue is somewhere in primary hard drive partitioning scenario.\n\nIf you cannot find issue there, well, there\u0027s always a chance that USB has bad files or something in it just cannot be read.\n\n"
    },
    {
      "id": "176273",
      "timestamp": "2013-08-26T10:38:57+00:00",
      "author": "Holmes.Sherlock",
      "content": "Why don\u0027t you try a CD installation?\n\n"
    },
    {
      "id": "176277",
      "timestamp": "2013-08-26T12:47:15+00:00",
      "author": "Peter80",
      "content": "I don\u0027t have hidden partitions and i don\u0027t think the reason is in the USB or CD because i tried to install from both and it stops at the same stage. I run chkdsk /f and it didn\u0027t find errors. I also tried Super Fdisk from live CD and it gave me some partition table error \"No any right partition table on hardisk\" but i don\u0027t know if this can be true because i can boot Windows 7 and Ubuntu.  \n\nThese are my current partitions. I want to install Windows XP on sda4, on sda1 i have windows 7 installed. I tried with boot flag set on sda1 and sd4 and it made no difference.\n\n[![xdss.png](http://img593.imageshack.us/img593/1364/xdss.png)](http://img593.imageshack.us/i/xdss.png/ \"External link\")\n\nIs it possible the problem to be in the roor boot sector, those that is in the first sector in any hard disk? I don\u0027t know if my question make sense, i am still learning about boot methods and partitioning.\n\n**Edited by Peter80, 26 August 2013 - 12:48 PM.**\n"
    },
    {
      "id": "176278",
      "timestamp": "2013-08-26T13:46:24+00:00",
      "author": "Wonko the Sane",
      "content": "Wait a minute.\n\nWhich XP is it?\n\nI mean service pack level?\n\nDoes it support LBA48?\n\nAnd does it support it ++*during setup*++?\n\nTake some time here:\n\n[http://support.micro...kb/303013/en-us](http://support.microsoft.com/kb/303013/en-us \"External link\")\n\nAND later some more time here:\n\n[http://www.msfn.org/...on-win2k-setup/](http://www.msfn.org/board/topic/75713-48-bit-lba-on-win2k-setup/ \"External link\")\n\n[http://www.msfn.org/...nd-sata-drives/](http://www.msfn.org/board/topic/157068-windows-xp-professional-rtm-and-sata-drives/ \"External link\")\n\nI guess that the problem is not \"I cannot install XP anymore\", but rather \"I used to install XP on a partition, and now that I am attempting to install it on a partition well beyond 128 Gb for the VERY FIRST time, I am having issues\" ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nJFYI, there is not any \"roor boot sector\" (nor any root boo**t** sector :wink:) the first sector of a hard disk is the MBR or Master Boot Record.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176283",
      "timestamp": "2013-08-26T16:17:05+00:00",
      "author": "Peter80",
      "content": "It\u0027s Windows XP service pack 3 and it has all mass storage driver packs integrated. I use DriverPacks to integrate them.  \n\n\u003cbr /\u003e\n\nHow to find if the problem is in MBR and is there any program that can show the content of MBR?  \n\nBy the way, i am using Grub2 as boot manager.\n\n"
    },
    {
      "id": "176286",
      "timestamp": "2013-08-26T17:03:29+00:00",
      "author": "Wonko the Sane",
      "content": "DriverPacks may solve an issue with drivers, but it may also (in some rare cases) introduce it.\n\nThe problem is NOT in the MBR (in the sense of the MBR code), and NOT in the setting for the active partition.\n\nAs a matter of fact the only thing that a plain XP will look for in the MBR will be:\n\n1. the presence of \"Magic Bytes\" 55AA\n2. the validity of the current partitioning scheme (Partition Table)\n3. the presence of a Disk Signature (which must be there, otherwise you wouldn\u0027t boot the 7)\n\nAs soon as the install actually begins, the XP setup will anyway rewrite from scratch the whole MBR with the exclusion of the three items above and it will set the active parttion to the one where NTLDR is placed.\n\nBTW, this will REPLACE any code you now have in the MBR, may it be the standard Windows 7 one or the GRUB2 one, this means that you need to think before installing the XP if you have the tools and knowledge to re-install (if it is installed to the MBR) the GRUB2.\n\nThe point is when/where exactly the issue begins.\n\nGoing the CD way, if you get the \"press any key to boot form CD\" (unless of course you have removed bootfix.bin) is already a sign that the MBR is read (at least the \"Magic Bytes\" AND one entry in the partition table).\n\nAn issue with #3 is to be excluded for the mentioned reasons.\n\nWhat remains are only:\n\n* issues with the \"queer\" partitioning scheme (particularly with partition alignments being in \"mixed\" mode, \"canonical CH boundary\" vs. \"new approach Mb aligned\")\n* the use of LBA48 not being supported by the setup\n* a limit (by design) in the Windows XP setup routine\n\nI will ask these questions again (they were implied in my previous post, but maybe it wasn\u0027t clear enough):\n\n1. did you ever install XP on that hard disk to partition sda4?\n2. did you ever install XP on that hard disk on any partition starting beyond the 128 GB/LBA48 limit?\n3. were all your previous and successful attempts to install XP use as target the first partition?\n\nAmong the zillion ways to check a partition table, you could use a hex/disk editor, but maybe easier, get HDhacker:\n\n[http://dimio.altervista.org/eng/](http://dimio.altervista.org/eng/ \"External link\")\n\nuse it to save/backup first sector of the PhysicalDrive\n\nCompress the resulting 512 bytes sized file into a .zip.\n\nPost the .zip archive on \\*any\\* file hosting site and post a link to download it.\n\nAnother way (shameless plug ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)) could be that of using tiny hexer and my MBRview script to inspect the MBR partition table:\n\n[http://reboot.pro/to...-hexer-scripts/](http://reboot.pro/topic/8734-tiny-hexer-scripts/ \"\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176288",
      "timestamp": "2013-08-26T17:58:18+00:00",
      "author": "Peter80",
      "content": "I have installed Windows XP on three different partition on this disk but i have completely repartitioned the drive so the partitions don\u0027t exist anymore. I had not install it on the first partition, but i had it installed on the last partition sd4. I guess installing XP on the last partition is beyond the 128 GB limit.  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nThis is the .dat file that HGhacker generated:  \n\n[http://www.mediafire...m01yd1qa17mjh6r](http://www.mediafire.com/?m01yd1qa17mjh6r \"External link\")\n\nEdit: I forget to compress the file, sorry.\n\n**Edited by Peter80, 26 August 2013 - 06:01 PM.**\n"
    },
    {
      "id": "176290",
      "timestamp": "2013-08-26T18:24:47+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Edit: I forget to compress the file, sorry.\n\nNo prob, it is just \"common suggested procedure\".\n\nFind attached the resulting .html\u0027s (made from the mentioned TinyHexer structure viewers).\n\nThe MBR code is that of GRUB2.\n\nAs a matter of fact since it does use some otherwise unused bytes, I may do a nice 180 degree turnaround ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif) and add it to the possibilities ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif).\n\nNow that you have a valid backup, you could try changing the boot settings to use the standard 7 MBR, and re-install GRUB2 to the partition bootsector.\n\nDo you have a clear, tested, recovery procedure for that machine?\n\nCan you check the SETUPREG.HIV to see if you have the proper settings to enable LBA48?\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko  \n\n#### Attached Files {#attach_wrap}\n\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003d8c9b89c24d296a5e0b5f04822594bd98\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d14498 \"Download attachment\") [**Peter80_PT.7z**](http://reboot.pro/index.php?s\u003d8c9b89c24d296a5e0b5f04822594bd98\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d14498 \"Download attachment\") **2.49KB** 262 downloads\n\n"
    },
    {
      "id": "176295",
      "timestamp": "2013-08-26T19:28:31+00:00",
      "author": "Peter80",
      "content": "I remember right after installing Windows 7 i tried to install XP and i couldn\u0027t. Then i use Boot Repair that i have on USB and installed Grub2. After this i still couldn\u0027t install XP.  \n\nIf i understand correctly Grub2 replaces Windows 7 boot files in MBR sector and on start up it connects to the boot files on Windows 7 partition to boot windows. But Windows 7 boot manager can\u0027t boot Ubuntu because it doesn\u0027t recognize linux.  \n\nThis is the SETUPREG.HIV file from Windows XP installation files.  \n\n[http://www.mediafire...v0ecvsakmrbpduc](http://www.mediafire.com/?v0ecvsakmrbpduc \"External link\")  \n\nI deleted the Windows XP install that i had on sda4 and reformat the partition so currently i don\u0027t have XP installed.\n\n"
    },
    {
      "id": "176310",
      "timestamp": "2013-08-27T11:48:42+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e If i understand correctly Grub2 replaces Windows 7 boot files in MBR sector and on start up it connects to the boot files on Windows 7 partition to boot windows. But Windows 7 boot manager can\u0027t boot Ubuntu because it doesn\u0027t recognize linux.\n\nNot really-really.\n\nThe \"normal\" boot sequence is:\n\nBIOS-\\\u003eMBR-\\\u003ePBR of active primary partition-\\\u003ewhatever OS loader\n\ni.e.:\n\nDOS:\n\nBIOS-\\\u003eMBR-\\\u003ePBR of active primary partition-\\\u003eIO.SYS\n\nNT up to 2003:\n\nBIOS-\\\u003eMBR-\\\u003ePBR of active primary partition-\\\u003eNTLDR-\\\u003eBOOT.INI (choices)-\\\u003eNTDETECT.COM-\\\u003eWindows NT\n\nNT starting from Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)\n\nBIOS-\\\u003eMBR-\\\u003ePBR of active primary partition-\\\u003eBOOTMGR-\\\u003e\\\\boot\\\\BCD (choices)-\\\u003eWinload.exe-\\\u003eWindows NT\n\nI.e. the MBR code is a simple IPL (Initial Program Loader) that simply chainloads the PBR of the active partition, and the PBR code is a simple loader for the actual OS loader.\n\nGRUB (legacy), grub4dos and GRUB2 are more complex.\n\nThey can be installed to the MBR (+ a number of hidden sectors on first track) and in this case they \"bypass\" the above mechanism, the code in the MBR (+hidden sectors) is a loader for the \"main\" grub file (be it stage2, grldr or core.img) and no code is needed in the PBR.\n\nOr they can be installed to the PBR.\n\nIn this case the MBR contains \"conventional\" IPL code that loads the PBR of the active partition or it can be an \"advanced\" MBR code, such as partita or OS-MBR that can choose which partition to make active and boot on-the-fly.\n\nOnce a bootmanager like the \"grub family\" is loaded you are inside a \"reduced\" real mode OS and from that you can load \\*almost anything\\*.\n\nI am not going to check your setupreg.hiv, not because I am an old grumpy bastard (which I am :wink:) but because since you are wanting to learn about booting matters, you need to do some homework and get familiar with the tools and concepts of this field.\n\nIf you need help on how to check it, just ask :smile:.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176318",
      "timestamp": "2013-08-27T16:33:36+00:00",
      "author": "Peter80",
      "content": "Thanks, for the info. The things got more clearer to me.  \n\n\u003cbr /\u003e\n\nIs it possible to set extended partition as hidden, because i tried with GParted but the \"hidden\" option was not available?  \nI have read in another forum that sometimes install stops because of bug in Windows XP setup. In some cases the setup can\u0027t recognize the extended partition if it\u0027s changed. And i took some space from the beginning of the partition and moved it outside the extended partition to add it to the first partition sda1. I don\u0027t know if this can be true but i wanted to test if the install will pass through the black screen if the extended partition was hidden.\n\n"
    },
    {
      "id": "176323",
      "timestamp": "2013-08-27T18:13:49+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Thanks, for the info. The things got more clearer to me.  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e Is it possible to set extended partition as hidden, because i tried with GParted but the \"hidden\" option was not available?  \n\u003e I have read in another forum that sometimes install stops because of bug in Windows XP setup. In some cases the setup can\u0027t recognize the extended partition if it\u0027s changed. And i took some space from the beginning of the partition and moved it outside the extended partition to add it to the first partition sda1. I don\u0027t know if this can be true but i wanted to test if the install will pass through the black screen if the extended partition was hidden.\n\nYou can well use a \"hidden\" Partition ID (that is \"properly\" made by adding 0x10 to the \"Normal\" partition ID, but with NT based systems you can also more simply make it 00 and the partition will be \"ignored\").\n\n[http://www.win.tue.n...es-2.html#ss2.4](http://www.win.tue.nl/~aeb/partitions/partition_types-2.html#ss2.4 \"External link\")\n\n[http://www.win.tue.n...on_types-1.html](http://www.win.tue.nl/~aeb/partitions/partition_types-1.html \"External link\")\n\nThe point is whether you have - as hinted before - a tested, sound \"recovery\" procedure, i.e. an external media, like a CD or a USB stick capable of booting that machine and containing the tools needed to \"revert\" this situation.\n\nBefore locking yourself inside or out of \\*anything\\* spend some time to make sure you have a way out.\n\nRemember, right now you have GRUB2 installed ot the MBR (+hidden sectors) and if the install of XP starts, it will re-write most probably a \"standard\" MBR.\n\nIt is not the first time that I have seen someone doing something similar and get a BSOD, which ultimately equates to an unbootable system.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176412",
      "timestamp": "2013-08-29T09:17:39+00:00",
      "author": "Peter80",
      "content": "What i have tried:  \n\nI removed lba flag from the extended partition  \nI removed boot flag from sda1 partition  \nI repaired MBR with Windows 7 Repair Console  \nI repaired MBR using Boot Repair  \n\nNothing worked.  \n\nSomething else i have noticed is that when i use the XP installation USB the setup starts from the third stage which is \"boot from first internal partition\" and not from the second stage which is \"boot from partition 0\". It looks like it detects XP install on the hard disk which is strange because there is no XP install on it. I created the installation USB with WinSetupFromUSB.  \n\nI think i will leave it like this. I am using Windows 7 most of the time anyway. I just wanted to find what is causing this problem, because in the future if it happens again to know how to fix it.\n\n"
    },
    {
      "id": "176414",
      "timestamp": "2013-08-29T09:29:09+00:00",
      "author": "Wonko the Sane",
      "content": "Well, it is still possible that something is connected with the USB install.  \nWhat happens with CD?  \nPost your current MBR. (just to make sure that your \"repairs\" have actually repaired it ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png))  \n\u003e I think i will leave it like this. I am using Windows 7 most of the time anyway. I just wanted to find what is causing this problem, because in the future if it happens again to know how to fix it.\n\nGiving up is ***NEVER*** an option! ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko\n\n"
    },
    {
      "id": "176421",
      "timestamp": "2013-08-29T11:54:31+00:00",
      "author": "Peter80",
      "content": "If i use CD the setup stops at the same stage as with the USB.  \n\nThis is the boot configuration after repairing MBR with Boot Repair:  \n\n[http://paste.ubuntu.com/6039921/](http://paste.ubuntu.com/6039921/ \"External link\")  \n\nThis is the boot configuration after repairing MBR with Windows 7 repair console using the commands - bootrec /fixmbr and bootrec /fixboot  \n\n[http://paste.ubuntu.com/6039922/](http://paste.ubuntu.com/6039922/ \"External link\")  \n\nI have noticed that if i remove the hard disk the installation continue in the regular way passing the black screen, so i guess the problem is with the hard disk partitioning and boot sector.\n\n"
    },
    {
      "id": "176497",
      "timestamp": "2013-08-30T16:02:15+00:00",
      "author": "Wonko the Sane",
      "content": "I asked about a copy of the MBR , not of the configuration, if there is an issue with the \"bytes\" in the MBR I need to have a look at the actual bytes :wink:.\n\nHowever, from this (from the second link):\n\n\u003e Grub2 (v1.99-2.00) is installed in the MBR of /dev/sda and looks at sector  \n\u003e 264192 of the same hard drive for core.img, but core.img can not be found  \n\u003e at this location.\n\u003e\nI can tell you that what you did, failed to do what was needed (re-write a standard MBR code), but rather botched the existing GRUB2 install to the MBR.\n\nTo recap, the suggested test is to:\n\n1. have a \"standard\" XP or 7 MBR code\n2. have the GRUB2 installed to the PBR (and NOT to the MBR)\n\nAs a further test (if the above is not enough) hide other partitions but the one you want to install the XP to.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176503",
      "timestamp": "2013-08-30T16:49:02+00:00",
      "author": "Peter80",
      "content": "I am not sure how to get copy of MBR. What program to use?  \n\nI am posting disk configuration report from Partition Wizard. I don\u0027t know if it can tell something.  \n\n```\nhttp://www.mediafire.com/?vjvbtq72184qn5g\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "176519",
      "timestamp": "2013-08-30T17:50:53+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I am not sure how to get copy of MBR. What program to use?\n\nAre you kidding? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png) ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)\n\nYou **ALREADY** used HdHacker. ![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif)\n\nTo change the MBR code back to the \"default\" XP or 7 one you can use mbrfix:\n\n[http://www.sysint.no...ting/mbrfix.htm](http://www.sysint.no/nedlasting/mbrfix.htm \"External link\")\n\nor the Windows 7 version (NOT earlier versions that do not have the /mbr switch) of the bootsect.exe:\n\n[http://technet.micro...7(v\u003dws.10).aspx](http://technet.microsoft.com/en-us/library/dd744577(v\u003dws.10).aspx \"External link\")\n\n***AGAIN***, BEFORE changing the MBR code you must be SURE that you have an alternate way of booting the machine/revert the changes, this is the 3rd (THIRD) time I am asking you to confirm that you DO have such a way (as the previous two attempts to have this piece of info were ignored).\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176523",
      "timestamp": "2013-08-30T18:40:57+00:00",
      "author": "Peter80",
      "content": "This is a copy of MBR from HDHacker:  \n\n```\nhttp://www.mediafire.com/?8m8d8tc8y834oyb\n```\n\nI thought you mean some other way for copy MBR.  \n\n\u003cbr /\u003e\n\nAs i said i have Boot Repair to repair boot sector and other rescue systems from live USB. I thought you have noticed this from boot configuration reports.  \n\nIf i use bootsect.exe command it says it doesn\u0027t recognize it as internal or external command. I have Windows 7 Ultimate SP1.\n\n**Edited by Peter80, 30 August 2013 - 06:41 PM.**\n"
    },
    {
      "id": "176543",
      "timestamp": "2013-08-31T10:43:28+00:00",
      "author": "Wonko the Sane",
      "content": "The bootsect.exe should be in any Vista ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) or later, including Windows 7 of course. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png) Strange. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nHowever now the MBR CODE seems a fairly \"plain\" one, most probably it is the standard windows 7 one, so it is OK.\n\nNow what you can try is to set to 00 (which for windows should mean \"no partition\") all partitions but the first one.\n\nThese are bytes @offset 466 (now 0F) , 482 (now 07) , 498 (now 07).\n\nThe effect should be that you can boot from the CD (or USB) the install of XP \"normally\" and that it will see ONLY the first partition.\n\nIf this happens, reboot and re-set the last partition (@ offset 498) to 07 and try again.\n\nReboot again and re-set the byte @ 482 to 07 and try again, reboot and re-set the byte @466 to 0F and try again.\n\nThis way we can find out if any of the partition entries is the issue (and more likely than anything else the extended partition could be the issue).\n\nTo change those bytes you can use (whatever you find more handy) grub4dos or a hex/disk editor from the Windows 7 (which should continue to be bootable) or from the \"recoverey CD/USB\"..\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWnko\n\n"
    },
    {
      "id": "176565",
      "timestamp": "2013-09-01T08:41:48+00:00",
      "author": "Peter80",
      "content": "I was close to wipe my whole hard disk. I used some shit program to fix partition table errors and it ended up deleting two of the partitions and i was unable to boot. Then i tried couple of partition recovery programs from live USB which additionally messed up the partitions but in the end i was able to recover the partitions with Partition Wizard though they were recovered with errors. At least i learned what is a good partition recovery program and what is not.  \n\nI also tried to hide all partitions and then install Windows XP and this didn\u0027t help too.  \n\nHow to change the partition ID to 00? Partition Wizard has option to change partition ID\u0027s but it doesn\u0027t allow me to set it to 00.  \n\n"
    },
    {
      "id": "176567",
      "timestamp": "2013-09-01T10:30:44+00:00",
      "author": "Wonko the Sane",
      "content": "The actual idea (mine at least) is to NEVER, for ANY reason trust ANY partitioning program, let alone those claiming to fix anything, and particularly those with a nice GUI and \"automagical\" features, particularly on a disk that already - for any reason - is suspected to have any issue.  \n\u003e How to change the partition ID to 00? Partition Wizard has option to change partition ID\u0027s but it doesn\u0027t allow me to set it to 00.\nAny difficult part in:  \n\u003e To change those bytes you can use (whatever you find more handy) grub4dos or a hex/disk editor from the Windows 7 (which should continue to be bootable) or from the \"recoverey CD/USB\"..\n\n![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\nIt is assumed that you know what a hex/disk editor is and how to use it to edit manually a handful of bytes.  \nIf not, ask about the suggested tool(s) and do not assume that the first partition related program is the same, there may be tens of tools that can set those bytes to 0, and then reset them, but a hex/disk editor is the simpler one that just does the job.  \n\nJFYI, in what you posted there was nothing that needed fixing, and since partitioning is a rather delicate matter, you should not use \\*any\\* partition tool without first knowing in the utter detail what it actually does.  \nIn a situation like yours, even using the \"standard\" XP Disk Manager to simply change the active status of a partition may lead to losing the partition table, see:  \n[http://reboot.pro/to...itioning-issue/](http://reboot.pro/topic/9897-vistawin7-versus-xp-partitioning-issue/ \"\")  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "176571",
      "timestamp": "2013-09-01T11:19:19+00:00",
      "author": "Peter80",
      "content": "Grub4dos and Hex/disk seems too advanced to me so i use Partition Guru, or Disk Genius they are the same program, to change partition id. I changed the extended partition id from 0F to 08, it didn\u0027t allow me to change it to 00, and by the way, this should be done from live USB/CD otherwise you get BSOD.  \nThen i tried the Windows XP install and i was able to pass the black screen where it hangs before but when it came to the stage when it showed the partitions it said that it doesn\u0027t recognize the hard disk.  \n\nSo, i think the problem is in the partitions id and partition table. I read that the GPT doesn\u0027t need partition id\u0027s so may be if i convert from MBR to GPT i will be able to install XP without problems.  \n\nAlso, changing extended partition id deleted all other partitions. It was good that i had backup of the partition table that i recovered with Disk Genius.\n\n"
    },
    {
      "id": "176575",
      "timestamp": "2013-09-01T13:28:09+00:00",
      "author": "Wonko the Sane",
      "content": "Look, I don\u0027t want to be grumpi***er*** ![:ranting2:](http://reboot.pro/public/style_emoticons/default/ranting2.gif) than usual, but the idea is that you learn new, strange things.  \n\nOf course you are perfectly free to do OTHER things from what is suggested to you, but you cannot \"invent\" (successfully) anything unless (until) you have understood the very basics.  \n\nFacts of the day ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif):\n\n1. XP cannot (won\u0027t, it is impossible that it will) be installed, nor booted from a GPT disk\n2. changing extended partition ID does NOT delete anything, it simply removes the indexing of any volume inside extended (technically it removes access to first link of the EMBRs\u0027 chain), there is NOTHING to recover, you just change the ID back to 05 or 0F and everything will be exactly like before.\n\nIf you prefer, you are coming here asking for help, you should be prepared to accept the help that is provided to you and - while being of course free to ask each and every clarification you think needed about the suggestions provided before attempting making use of it - you should do what is told you (and NOT another thing, expecially if \"random\"), really, if I had thought that Partition Guru, or Disk Genius or any other of the***n***(crappy or non crappy) programs you used more or less senselessly were fit for this, I would have suggested to you one of them instead.\n\nQuick reminder, point f.:\n\n[http://reboot.pro/to...ead-this-first/](http://reboot.pro/topic/2420-troubleshooting-howto-read-this-first/ \"\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176579",
      "timestamp": "2013-09-01T14:14:17+00:00",
      "author": "Peter80",
      "content": "I found this Hex editor [http://mh-nexus.de/en/hxd/](http://mh-nexus.de/en/hxd/ \"External link\") but i will need more detailed instruction how to change partition ID with it. I have never worked with Hex editor before.\n\n"
    },
    {
      "id": "176583",
      "timestamp": "2013-09-01T14:49:37+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I found this Hex editor [http://mh-nexus.de/en/hxd/](http://mh-nexus.de/en/hxd/ \"External link\") but i will need more detailed instruction how to change partition ID with it. I have never worked with Hex editor before.\n\nGood. :smile:\n\nThough what was suggested was Tiny Hexer instead (already mentioned):\n\n[http://reboot.pro/to...-hexer-scripts/](http://reboot.pro/topic/8734-tiny-hexer-scripts/ \"\")\n\nand the viewers for it.\n\nThe actual tinyhexer can be found here:\n\n[http://reboot.pro/to...ripts/?p\u003d134461](http://reboot.pro/topic/8734-tiny-hexer-scripts/?p\u003d134461 \"\")  \n[http://www.softpedia...load-35737.html](http://www.softpedia.com/progDownload/tiny-hexer-Download-35737.html \"External link\")\n\nNexus is a good hex/disk editor but it misses the structure viewers that can be an useful help in editing a MBR.\n\nBut if you already have HxD, possibly the fully portable version, it\u0027s OK as well :smile:.\n\nFirst thing forget about the actual disk, you have the copy of the MBR you made with HDhacker, right (or make a new copy of it), then try opening that file with the Hxd.\n\nCan you place the cursor on byte @offset 466 decimal (0x1D2)?\n\nDoes it read 0F?\n\nSelect/highlight it.\n\nType 00.\n\nCongratulations, you have just written a hex value/hex edited a file.\n\nThe 00 is red now, just below it there is a 07 @offset 482 decimal (0x1E2), change it to 00 also.\n\nThe 00\u0027s are both red now, just below them there is yet another 07 @offset 498 decimal (0x1F2), change it to 00 also.\n\nWhat you have achieved is - while keeping all the partition data untouched, changed the ID of the partitions to 00, a value that a Windows NT (but NOT a Linux) will consider as \"non existing\", leaving only the first partition \"visible\".\n\nTry restoring the previous values, get the hang of it, change tehm back to 00, then save the file to a new one and use HdHacker to replace the MBR with the modified file or open directly (through Extras-\\\u003eopen disk-\\\u003ePhysicalDrive 1) the MBR and make the changes directly on disk (not recommended, having a backup/copy and working on it is always a good idea).\n\nThe expected result is that Windows 7 will work at reboot like before (provided that it is installed on the first partition, i.e. the one that you did not touch) and when you try booting from the XP setup, it should recognize the disk but find only the first partition (this is if the drivers for the SATA, IF SATA, disk are integrated in the Setup).\n\nIf this happens, restore the 07 on the last partition, this time the XP setup should recognize the disk and find two partitions on it (first and last).\n\nIf it doesn\u0027t, it is likely that the issue is with the actual last partition being \"too far\" on the disk.\n\nPost results.\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176586",
      "timestamp": "2013-09-01T15:23:29+00:00",
      "author": "Peter80",
      "content": "I opened the MBR file with HxD but i don\u0027t see offset 466 or 0x1D2. This is what it shows:  \n\n[![um8h.png](http://img191.imageshack.us/img191/3782/um8h.png)](http://img191.imageshack.us/i/um8h.png/ \"External link\")\n\n"
    },
    {
      "id": "176587",
      "timestamp": "2013-09-01T15:56:34+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I opened the MBR file with HxD but i don\u0027t see offset 466 or 0x1D2. This is what it shows:\n\nNot really -really.\n\nYou have a column on the left titled \"Offset (h)\".\n\nThat column contains offsets for a group of 16 (sixteen colums numbered 0x00 to 0x0F) columns.\n\nOn the same row as \"Offset (h)\" there are \"relative offsets\" to the single columns (the 0x00 to 0x0F above).\n\nThe cursor in your posted image is in top left, that is \"row at offset 0x00000000\" and column at relative offset 0x00.\n\nYour cursor is at offset 0x00000000 as 0x00000000+0x00\u003d 0x00000000.\n\nIf you look attentively at the bottom of the window in the frame (not part of the posted screenshot) you will see written \"Offset:0\". :wink:\n\nNow, use the down arrow to move to second row and the right arrow to move to second column.\n\nYour cursor is now at offset 0x00000010 + 0x01 \u003d 0x00000011 and at the bottom you will see \"Offset: 11\". :smile:\n\nNow try moving the cursor around and check what happens at the bootom, then go to rightmost drop-down in the toolbar and change from \"hex\" to \"dec\".\n\nWhat happens? ![:unsure:](https://reboot.pro/public/style_emoticons/default/unsure.png)\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176589",
      "timestamp": "2013-09-01T16:28:25+00:00",
      "author": "Peter80",
      "content": "I found offset 466. It was reading 0F and i changed it to 00, but offset 482 is reading F3 and offset 481 is reading 07. Which of them to change to 00?  \n\n[![lx6e.png](http://img844.imageshack.us/img844/5367/lx6e.png)](http://img844.imageshack.us/i/lx6e.png/ \"External link\")\n\n"
    },
    {
      "id": "176591",
      "timestamp": "2013-09-01T16:47:11+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I found offset 466. It was reading 0F and i changed it to 00, but offset 482 is reading F3 and offset 481 is reading 07. Which of them to change to 00?\n\nNo you did not.  \nYou deleted a byte while attempting to edit ![:w00t:](https://reboot.pro/public/style_emoticons/default/w00t.gif) ![:ph34r:](https://reboot.pro/public/style_emoticons/default/scared9.gif).\n\nClose the file without saving and re-open it (or open another copy).  \n\nIf you compare the screenshot you just posted with the one you posted before, you would see that the \"previous\" 0F was:  \nC8 FF **0F** **47** FE FF C1 BF 62 ...\n\nwhile now you have:\n\nC8 FF **00** FE FF C1 BF 62 ...\n\nwhere has the **47**gone?\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176594",
      "timestamp": "2013-09-01T17:02:04+00:00",
      "author": "Peter80",
      "content": "I think i have done it right this time:  \n\n[![pp6q.png](http://img69.imageshack.us/img69/6900/pp6q.png)](http://img69.imageshack.us/i/pp6q.png/ \"External link\")  \n\nNow i have to use HDHacker and write the edited MBR file to disk. Right?  \nDo i have to do this from live CD/USB or from Windows 7?\n\n"
    },
    {
      "id": "176599",
      "timestamp": "2013-09-01T17:39:10+00:00",
      "author": "Wonko the Sane",
      "content": "Yes, now it looks fine ![:thumbsup:](https://reboot.pro/public/style_emoticons/default/thumbsup.gif).\n\n\u003e Now i have to use HDHacker and write the edited MBR file to disk. Right?  \n\u003e Do i have to do this from live CD/USB or from Windows 7?\n\nNo probs, you can do it from both, though of course from a LiveCD (or however a non-booted system) is always advisable, but do you have a LiveCD (or similar external bootable media) with a PE (or a portable Windows XP/7)?\n\nHdHacker won\u0027t obviously run from a Linux LiveCD.\n\nFrom Linux you will need to use dd (not the most \"user friendly\" command line tool ever made).\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176616",
      "timestamp": "2013-09-01T19:27:52+00:00",
      "author": "Peter80",
      "content": "I booted from live usb and from MiniXP i inserted the new MBR file using HDHacker. Then i run the XP install and the setup came to the stage of partition selection without problems and it recognized the first partition as ntfs and the rest as unallocated. Then i booted again from live usb and i changed the offset 482 to 07 in the mbr file and run again the XP install and install it on the last partition.  \nThen i booted again from the usb and changed the offset 466 to 0F and then i repair the mbr from Windows 7 installation usb because i was able to boot only Windows XP. I repaired the mbr from the repair console command line with bootrec /fixmbr and bootrex /fixboot  \n\nNow i can boot in Windows 7 but for some reason Windows 7 boot loader doesn\u0027t recognize the Windows XP install but i think i can fix this. I have to fix also the Ubuntu partition which become corrupted during the partition restoration and install Grub2 and see if the three system will work together without problems.\n\n"
    },
    {
      "id": "176630",
      "timestamp": "2013-09-02T08:30:35+00:00",
      "author": "Wonko the Sane",
      "content": "Again, you have to decide which boot manager will be the \"main\" one.  \nGRUB2 (and GRUB2 installed to the MBR) may not be the smartest choice.  \n\nIf I were you, and in your particular setup I would use the Windows 7 BOOTMGR as \"main\" boot manager (in other words DO NOT touch anything).  \nThen add grub4dos grldr to the root of the first partition.  \nGet grub4dos from here (last \"Featured\" version, right now grub4dos-0.4.5c-2013-03-03 ):  \n[https://code.google..../downloads/list](https://code.google.com/p/grub4dos-chenall/downloads/list \"External link\")  \n\nCopy from first partition files:\n\n* NTLDR\n* BOOT.INI\n* NTDETECT.COM\n\nto last partition (where XP is installed)  \nEdit the BOOT.INI (on first partition) adding to it a line:  \n\n\u003cbr /\u003e\n\n```\nc:\\grldr\u003d\"grub4dos\"\n```\n\nReboot.  \nOn the Windows 7 boot manager you should get a choice \"grub4dos\".  \nChoose it and you will be on a grub\\\u003e prompt.  \nIn it type:  \n\n```\nroot (hd0,1)\n```\n\n\\[ENTER\\]  \n\n```\nchainloader /ntldr\n```\n\n\u003cbr /\u003e\n\n\\[ENTER\\]  \n\n\u003cbr /\u003e\n\n```\nboot\n```\n\n\u003cbr /\u003e\n\n\\[ENTER\\]  \n\nYou should be able to boot to XP.  \n\nLater - if it works as it should - you can add these commands to a menu.lst file, so that you can have a menu choice.  \nThen find in your Ubuntu install the file grub.cfg (or however the file containing the GRUB2 commands used to boot the Ubuntu, post them and we\u0027ll see how to \"convert\" them to grub4dos syntax (to be added to the menu.lst).  \n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "176634",
      "timestamp": "2013-09-02T09:09:26+00:00",
      "author": "Peter80",
      "content": "I downloaded grub4dos and placed grldr in C partition which is the first partition. Edited boot.ini and copy the three boot file to windows xp partition. When i restarted i get a choice for grub4dos and i select it, but when i typed **root (hd0,1)** in command line it gave me error:  \n\nError 17: Cannot mount selected partition.  \n\nI think i did everything correctly so i don\u0027t know why it is giving this error.  \n\nOne question about hex editing:  \n\nHow do you know each byte what represent? For example, byte 47 that i accidentally deleted what does it mean or what does it represent?\n\n"
    },
    {
      "id": "176637",
      "timestamp": "2013-09-02T09:38:37+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I downloaded grub4dos and placed grldr in C partition which is the first partition. Edited boot.ini and copy the three boot file to windows xp partition. When i restarted i get a choice for grub4dos and i select it, but when i typed **root (hd0,1)** in command line it gave me error:  \n\u003e\n\u003e Error 17: Cannot mount selected partition.\n\nThis is actually good (I gave you a \"false\" command ![:w00t:](https://reboot.pro/public/style_emoticons/default/w00t.gif)).  \nReboot to grub4dos, type:  \n\n```\nroot (hd0,\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nand press the \\[TAB\\] key.  \n\nIt should list available partitions.  \nThese should be:  \n(hd0,0) \\\u003c- the first partition  \n(hd0,n) \\\u003c- with n \\\u003e\u003d 4 several volumes corresponding to the ones in your extended partition  \n(hd0,2) \\\u003c- this is likely to be the second partition (the one with XP on it, which is written in third partition table entry)  \n\nTry again, using (hd0,2) instead of (hd0,1) :wink:  \n\n\u003e I think i did everything correctly so i don\u0027t know why it is giving this error.  \n\u003e\n\u003e One question about hex editing:  \n\u003e\n\u003e How do you know each byte what represent? For example, byte 47 that i accidentally deleted what does it mean or what does it represent?\n\nThis is exactly where a structure viewer is useful.  \nGo back a few posts, follow the suggestions and try Tiny Hexer with the MBRview and PTview Structure viewers.  \nThe \"47\" in the above is ++**part**++ of the \"end cylinder\" CHS address (for first partition).\n\nIf you are familiar with spreadsheets (Excel or similar) you might find also of interest the spreadsheet here:\n\n[http://reboot.pro/to...a-translations/](http://reboot.pro/topic/2959-chs-lba-translations/ \"\")\n\n[http://reboot.pro/to...ations/?p\u003d74116](http://reboot.pro/topic/2959-chs-lba-translations/?p\u003d74116 \"\")\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176642",
      "timestamp": "2013-09-02T10:20:14+00:00",
      "author": "Peter80",
      "content": "I used **root (hd0,2)** this time and i was able to boot Windows xp. But how to create menu.lst so i can have boot menu with Windows 7 and Windows XP?  \n\n\u003cbr /\u003e\n\nI will spent more time on hex editing later on because there is a lot of new information for me.\n\n"
    },
    {
      "id": "176643",
      "timestamp": "2013-09-02T10:38:20+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I used **root (hd0,2)** this time and i was able to boot Windows xp. But how to create menu.lst so i can have boot menu with Windows 7 and Windows XP?  \n\nCreate a new file with notepad.\n\nSave it as C:\\\\menu.lst\n\nType in it (or copy and paste):\n\n```\n\ntimeout 30\ntitle Load Windows XP on (hd0,2)\nroot (hd0,2)\nchainloader /ntldr\n\ntitle Switch to GRUB2 core.img for booting Linux (Ubuntu, etc)\nfind --set-root --ignore-floppies --ignore-cd /boot/grub/i386-pc/core.img\nkernel /boot/grub/i386-pc/core.img\n\ntitle commandline\ncommandline\n\ntitle reboot\nreboot\n```\n\nThe second entry may work for your current Ubuntu install, do check that you have a core.img in /boot/grub/i386-pc/core.img (or change the paths accordingly to where your core.img is).\n\nThat entry should chainload the GRUB2 (but you can later decide - as hinted before - to insert the settings for the Ubuntu directly in the menu.lst).\n\nThe above is an as-plain-as-possible example of menu.lst, there are tens of possible \"advanced\" settings, including the use of a \"splash image\", custom colours, the possibility to have an animated Gfx menu, etc (if you do not like the \"plain\" look of the above).\n\nIf you are interested in grub4dos commands and possible settings, you should read the Guide (now becoming a tadbit obsolete ![:ph34r:](https://reboot.pro/public/style_emoticons/default/scared9.gif)):\n\n[http://diddy.boot-la...os/Grub4dos.htm](http://diddy.boot-land.net/grub4dos/Grub4dos.htm \"External link\")\n\nand use (and peruse :wink:) the info in the grub4dos forum:\n\n\u003chttp://reboot.pro/forum/66-grub4dos/\u003e\n\nand the related pages on **Steve6375**\u0027s site, \\*like\\*:\n\n[http://www.rmprepusb...orials/grub4dos](http://www.rmprepusb.com/tutorials/grub4dos \"External link\")\n\n[http://www.rmprepusb...ub4dos_examples](http://www.rmprepusb.com/tutorials/grub4dos/grub4dos_examples \"External link\")\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176646",
      "timestamp": "2013-09-02T11:23:06+00:00",
      "author": "Peter80",
      "content": "I created the menu.lst file and i was able to boot Windows XP and Ubuntu - for Ubuntu the right path was boot/grub/core.img. But is it possible to put all three entries in the main menu, like Grub2?  \nAlso, i have noticed that when my live usb is plugged in, it can\u0027t boot Windows XP. It says that (hd0,2) partition doesn\u0027t exist.\n\n"
    },
    {
      "id": "176650",
      "timestamp": "2013-09-02T12:25:40+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I created the menu.lst file and i was able to boot Windows XP and Ubuntu - for Ubuntu the right path was boot/grub/core.img. But is it possible to put all three entries in the main menu, like Grub2?  \n\u003e Also, i have noticed that when my live usb is plugged in, it can\u0027t boot Windows XP. It says that (hd0,2) partition doesn\u0027t exist.\n\nYes/No.\n\nRight now your \"main\" boot manager is the Windows 7 bootmgr.\n\nTo have a single menu allowing you to select any of the three (among 7, XP or Ubuntu) you have two \"main\" ways:\n\n1. make grub4dos your \"main\" boot manager\n2. have two copies of grldr (named differently) each one having an \"embedded\" menu.lst, one pointing to the XP and one pointing to the Ubuntu (or use - say - menu.lst and mynu.lst as menu files)\n\nWhen you plug a USB Mass Storage device (it depends on the actual machine/BIOS and how it behaves specifically) disk order may be altered.\n\nThe entry you have now for XP is \"hardcoded\" to (hd0,2), if the first disk (hd0) becomes the USB device of course it will point to tthe \"wrong\" device.\n\nA way to avoid this is to use a \"tag\" file.\n\nOpen Notepad and save the file as (it can be empty alright) \\\u003cwhatever letter the XP partition has\\\u003e\\\\myXPdrive.tag\n\nThen change the line:\n\n```\n\n root (hd0,2)\n```\n\nto:\n\n```\n\nfind --set-root --ignore-floppies --ignore-cd /myXPdrive.tag\n```\n\nthis way, no matter which disk is the first one, the root will be established to the \"right\" drive.\n\nBUT, if actually the disk order is altered, then the arcpath entry in the BOOT.INI you have now on the XP partition won\u0027t work.\n\nRight now you have something like:\n\u003e multi(0)disk(0)rdisk(**0**)partition(2)\\\\WINDOWS\u003d\"Microsoft Windows XP Professional\" /noexecute\u003doptin /fastdetect\n\u003e\nwhich is also \"linked\" to first disk.\n\nThis means that you may need to exchange disks.\n\nThis can be done in grub4dos alright, but it begins being \"advanced\", i.e. you will need to add a minimal \"scripting\" to your menu.lst.\n\nTry (example, but should work ![:unsure:](https://reboot.pro/public/style_emoticons/default/unsure.png)):\n\n```\n\ntitle XP on *any* device\nfind --set-root --ignore-floppies --ignore-cd /myXPdrive.tag\nset disknum\u003d%@root:~3,1%\nif not %disknum%\u003d\u003d0 map (hd0) (hd%disknum%) \u0026\u0026 map  (hd%disknum%) (hd0)\nif not %disknum%\u003d\u003d0 map --hook\nfind --set-root --ignore-floppies --ignore-cd /myXPdrive.tag\nchainloader /ntldr\n```\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176651",
      "timestamp": "2013-09-02T12:56:51+00:00",
      "author": "Peter80",
      "content": "One general question: What boot loader is better to use as main - Windows 7 bootmgr, grub4dos or Grub2?\n\nI think Grub2 is more easy to use but you seem don\u0027t think it\u0027s a good boot loader?\n\n"
    },
    {
      "id": "176654",
      "timestamp": "2013-09-02T14:15:15+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e One general question: What boot loader is better to use as main - Windows 7 bootmgr, grub4dos or Grub2?\n\u003e\n\u003e I think Grub2 is more easy to use but you seem don\u0027t think it\u0027s a good boot loader?\n\nAny boot manager (not boot loader) is good within it\u0027s limits.\n\nThe GRUB2 and grub4dos can be installed BOTH to the MBR or to a PBR/VBR.\n\nI personally find \"wrong\" to install any of them to the MBR, because they install on the MBR AND on several of the hidden sectors.\n\nAdditionally the GRUB2 MBR CODE uses also a few addresses that have been traditionally marked as \"reserved\" or \"not used\".\n\nAny number of programs may need/want (outside any \"standard\" or \"good practice\") to use those bytes or more likely any of the hidden sectors for their own use.\n\nThe result might be that when you use any of these programs, suddenly you cannot boot anymore.\n\nGRUB2 has also - in my opinion - the disadvantage of an overly (unneededly) complex syntax, additionally very scarcely documented and the senseless use of the \"core.img\" built-on-the-spot, but set aside this, it is an excellent boot manager, though it is in no way \"grand\", let alone \"unified\" as it is mainly - I would say uniquely - oriented to Linux.\n\nAnd ironically it seemingly has (or may be had ![:unsure:](https://reboot.pro/public/style_emoticons/default/unsure.png)) issues when installed to ext***n*** PBR/VBR.\n\ngrub4dos is much more flexible, has a much plainer syntax, has advanced scripting capabilities, can chainload \"directly\" (i.e. bypassing th ePBR/VBR almost \\*any\\* OS), can it be installed to the MBR (not advised by me) to the PBR, loaded form Linux, or from DOS, besides NTLDR and BOOTMGR but has it\u0027s own limitations, currently one that is showing is the support for BIOS only (and not EFI/UEFI) machines.\n\nBOOTMGR is 3/4 OS loader (or boot loader) and 1/4 only (say) boot manager, it uses another stupidly complex configuration file and syntax (the \\\\boot\\\\BCD) and is rather limited.\n\nNTLDR is also a 3/4 OS loader and 1/4 only (say) boot manager, and it\u0027s only advantage is that it uses a very plain format for it\u0027s BOOT.INI.\n\nIt is just a matter of personal tastes and familiarity with the tools, and there are many more boot managers to choose among, like Syslinux, as an example.\n\nI personally rate the inherent simplicity and flexibiity of grub4dos to be far superior to any of the other mentioned boot managers, but that\u0027s just me, of course.\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "176656",
      "timestamp": "2013-09-02T15:09:51+00:00",
      "author": "Peter80",
      "content": "I think i will switch to Grub2 because it\u0027s more easy to manage and doesn\u0027t make problems booting Windows xp and Ubuntu when my live usb is plugged in. And also shows the three entries in the main menu.  \n\nBut if i see some problems in the future i will switch to grub4dos.\n\n"
    }
  ]
}