{
  "id": "11579",
  "title": "Full Windows XP on USB Key",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "101443",
      "timestamp": "2010-06-02T15:19:24+00:00",
      "author": "philbtusb",
      "content": "Hello BootLanders,  \n\nI am currently trying to build a bootable USB key with Windows XP embedded.  \n\nI have proceded as the following :  \n\nStep 1 :  \nI have formated my USB Key using WinSetupFromUSB  \nwith a NTFS file system.  \n\nStep 2 :  \nI have used WinBuilder and LiveXP project to build a Windows XP  \nbased on an official windows XP CD.  \nThe result is stored in the directory :  \n\\\\LiveXP-Recommended\\\\Target\\\\LiveXP  \nComments :  \nPreviously I used PeBuilder. It works fine but WinBuilder allows to  \nbuild an embedded Windows XP much more complete (with explorer,  \napplications, ...)  \n\nStep 3 :  \nI have used PeToUsb to make the key bootable and transfer Windows XP  \non the key.  \n\nResults :  \nI can boot on the USB key with Windows XP and the key is seen as X: drive.  \nI can see the hard disk of my station and the 2 partitions C: and D:  \n\nRegarding all this I have some questions :  \n- is it possible that the USB key is seen as C: drive instead of X: ?  \nthe reason is the following : I want to install on the USB Key a dedicated  \nsoftware which used some directories based on C:  \nMay be some option in WinBuilder allow this.  \nBut I didn\u0027t manage to find how.  \n\n- the XP version built with WinBuilder/LiveXP creates a ramdisk seen as  \nB: drive where the \"Documents and Settings\" of the user is stored. This is  \na very good idea because the user changes are stored more faster than it  \nwould be on the USB Key directly (I have no need to store permanently  \nthese changes).  \nBut the structure of \"Documents and Settings\" is the basic structure.  \nAll the shortcuts to the different applications are not copied there while  \nWinbuilder/LiveXP creates the correct structure with all shortcuts in  \n\\\\LiveXP-Recommended\\\\Workbench\\\\LiveXP\\\\UserData\\\\$ModelRAM\\\\Documents and Settings directory.  \nIf I copy \"manually\" the directory on the ramdisk B:, I can find all the programs  \nin the start menu.  \nIs there a way or an option so that Winbuilder/LiveXP makes it automatically ?  \n\n- is there a way to avoid \"step 3\" of my procedure ?  \nor to proceed so that I could use directly the boot files generated by WinBuilder ?  \nThe reason is that PeToUsb build the boot using ntldr and  \nI assume it updates the mbr according to this.  \nIn WinBuilder there is the possibility to create a grldr.  \nBut I have not found how to update the boot of the USB key,  \nso that I can just copy the result of WinBuilder/liveXP on the key.  \n\nI hope my explanations are clear enough.  \nSome help would be greatly appreciate.  \nDifferent tools are available but the use is not obvious.  \n\nThanks in advance for your time and for your help.   \n"
    },
    {
      "id": "101445",
      "timestamp": "2010-06-02T15:52:28+00:00",
      "author": "Wonko the Sane",
      "content": "Just a small disambiguation:  \nWhat you are building (either with Bart\u0027s **PE** builder or with Winbuilder/LiveXP) will always be a PE and never an XP, let alone \"full\", and let alone \"embedded\".  \n\nLiveXP has already won an yearly award for the most inaccurate project name. :smile:  \n\nWinSetupfromUSB does NOT partition nor format anything in itself, it contains a suitable app to do so AND it already installs grub4dos loader.  \n\nOnce you re-use PeToUSB on that same stick to \"make it bootable\" (which it already is), you lose ANYTHING you may have done to it with WinsetupfromUSB.  \n\nThe \"standard\" letter assigned in PE\u0027s built using as source XP (starting from SP2 if I recall correctly) is X:, there are tweaks/changes to modify it, making use of migrate.inf file, some member familiar with LiveXP project may be able to point you to the right .script/option.  \n\nBTW WinsetupfromUSB tries to give the U: letter to the USB stick.  \n\nBasically:  \n\n* you need NOT WinsetupfromUSB (unless you are planning to do a multiboot thingy semi-automatically)\n* you need NOT PeToUSB\n* you need just a bootable USB stick (the one you have is fine), install to it grub4dos (in one of the several ways detailed on the guide), add to it the build files (if you want a multiboot stick).\n\n\u003cbr /\u003e\n\nThe build files are nothing but the whole directory \\\\I386\\\\ or \\\\minint\\\\, depending on the way you build, a \"manual way\" is described here:  \n[http://www.911cd.net...o...c\u003d23777\\\u0026hl\u003d](http://www.911cd.net/forums//index.php?showtopic\u003d23777\u0026hl\u003d \"External link\")  \n[http://www.911cd.net...o...c\u003d23696\\\u0026hl\u003d](http://www.911cd.net/forums//index.php?showtopic\u003d23696\u0026hl\u003d \"External link\")  \n\nThe use of the HP Utility, as well as that of PeToUSB is now \"deprecated\" as we have \"better\", more functional programs to partition and format a USB stick:  \n[http://www.boot-land...?showtopic\u003d9460](http://www.boot-land.net/forums/index.php?showtopic\u003d9460 \"External link\")  \n\nThe \"normal\" boot of a device partitioned and formatted under an NT based system is:  \nStandard 2K/XP MBR-\\\u003ebootsector of active partition invoking NTLDR-\\\u003eNTLDR-\\\u003eBOOT.INI-\\\u003eNTDETECT.COM-\\\u003e\"real\" NT based system  \nWhat \"traditional\" PE based builds do is:  \nStandard 2K/XP MBR-\\\u003ebootsector of active partition invoking NTLDR-\\\u003eSETUPLDR.BIN remnamed as NTLDR-\\\u003e(WINNT.SIF)-\\\u003eNTDETECT.COM-\\\u003ePE based system (normally in \\\\I386\\\\ in CD and in \\\\minint\\\\ on writable media)  \n\nWhat you get through grub4dos is EITHER:  \ngrldr.mbr installed in the MBR-\\\u003egrldr-\\\u003emenu.lst-\\\u003eWHATEVER, i.e chainload EITHER of NTLDR or SETUPLDR.BIN without renaming ANYTHING  \nOR:  \nStandard 2K/XP MBR-\\\u003ebootsector of active partition invoking NTLDR-\\\u003eNTLDR-\\\u003eBOOT.INI-\\\u003egrldr-\\\u003emenu.lst-\\\u003eWHATEVER, i.e chainload EITHER of NTLDR or SETUPLDR.BIN without renaming ANYTHING  \n\n[http://diddy.boot-la...all_windows.htm](http://diddy.boot-land.net/grub4dos/files/install_windows.htm \"External link\")  \n\nI hope that this will help to have clear the theory before some other members will be able to help you with specific info an the LiveXP settings you need to use.  \n\n![:(](http://reboot.pro/public/style_emoticons/default/sad.png)  \nWonko   \n"
    },
    {
      "id": "101474",
      "timestamp": "2010-06-02T21:55:06+00:00",
      "author": "philbtusb",
      "content": "Hi Wonko,  \n\nThanks for your fast and complete response.  \n![:(](http://reboot.pro/public/style_emoticons/default/sad.png)   \nYou point me to the right hints.  \nSorry for the misuse of some words.  \n\nI have tried the procedure described by Jaclaz :  \n\\* Run RMPREPUSB (or any other \"recent\" USB partitioning/formatting utility)  \n\\* Open two Explorer windos, first on %source%\\\\I386\\\\ and second on target device root  \n\\* Select and copy SETUPLDR.BIN and NTDETECT.COM from source and paste to root of the terget stick  \n\\* Rename on target SETUPLDR.BIN to NTLDR  \n\\* Go up one folder in source, select and copy the whole \\\\I386\\\\ and \\\\Programs\\\\ folders and paste to root of target stick  \n\\* Rename on target \\\\I386\\\\ folder to \\\\minint\\\\  \n\nIt seems to me the simpliest procedure and it works fine.  \nIt is a good response to my 3d question as I can use directly the results of WinBuilder  \nby copying the files as described in Jaclaz procedure.  \n\nNote :  \nI agree with you when you say (write) :  \n\"WinSetupfromUSB does NOT partition nor format anything in itself\".  \nI only have used the HP Format tool that is integrated inside WinSetupfromUSB in order  \nto format the USB Key as I didn\u0027t know RMPREPUSB tool.  \n\nOne solution to my 2d question could be to copy using a batch  \nthe \"Documents and settings\" directory built by WinBuilder to the ramdisk B:  \n(I know that it is not the best solution but ...)  \n\nThen there is my first question pending.  \nI will check the tweaks and the options of WinBuilder.  \nBut if some BootLander has already the solution,  \nhelp will be appreciate.  \n:smile:  \n\nThanks again  \n![:(](http://reboot.pro/public/style_emoticons/default/sad.png)   \n"
    },
    {
      "id": "101492",
      "timestamp": "2010-06-03T07:37:31+00:00",
      "author": "Wonko the Sane",
      "content": "Good, now that you have succeeded, you can use also a niftier trick ![:(](http://reboot.pro/public/style_emoticons/default/sad.png):  \n[http://www.911cd.net...showtopic\u003d17504](http://www.911cd.net/forums//index.php?showtopic\u003d17504 \"External link\")  \nand avoid the renaming.  \n\nA word of advise if you are using the Server 2003 SP1 SETUPLDR.BIN:  \n[http://www.msfn.org/...opic\u003d58410\\\u0026st\u003d0](http://www.msfn.org/board/index.php?showtopic\u003d58410\u0026st\u003d0 \"External link\")  \n\nA further step that avoids the renaming of SETUPLDR.BIN:  \n[http://www.boot-land...?showtopic\u003d2362](http://www.boot-land.net/forums/index.php?showtopic\u003d2362 \"External link\")  \n\nI know I seem picky, partly because I am :smile:, but mainly because I like to have things called their names. ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)   \n\nThe \"manual\" way to have a given letter assigned to the PE is summed up here:  \n[http://www.boot-land...?showtopic\u003d1938](http://www.boot-land.net/forums/index.php?showtopic\u003d1938 \"External link\")  \nand here:  \n[http://www.911cd.net...showtopic\u003d19663](http://www.911cd.net/forums//index.php?showtopic\u003d19663 \"External link\")  \nand here:  \n[http://www.msfn.org/...howtopic\u003d131770](http://www.msfn.org/board/index.php?showtopic\u003d131770 \"External link\")  \n\n![:(](http://reboot.pro/public/style_emoticons/default/sad.png)  \nWonko   \n"
    },
    {
      "id": "101504",
      "timestamp": "2010-06-03T13:33:54+00:00",
      "author": "philbtusb",
      "content": "Hi Wonko,  \n\nThanks for your help and for all the links.  \n\nAll this is very interesting.  \nFor now, I am not successful changing the drive letter of the USB key.  \nBut may be, I have done something wrong.  \n\nI have to be careful now because after each of your posts,  \nI have a lot of pages to read !!!  \n![:(](http://reboot.pro/public/style_emoticons/default/sad.png)   \n\n:smile:  \nPhil   \n"
    },
    {
      "id": "101506",
      "timestamp": "2010-06-03T14:19:27+00:00",
      "author": "MedEvil",
      "content": "\u003e For now, I am not successful changing the drive letter of the USB key.\nGo [here](http://www.boot-land.net/forums/index.php?s\u003d\u0026showtopic\u003d2052\u0026view\u003dfindpost\u0026p\u003d12989 \"External link\") and use the script.  \n\n:smile:   \n"
    },
    {
      "id": "101510",
      "timestamp": "2010-06-03T15:02:16+00:00",
      "author": "philbtusb",
      "content": "Hello,  \n\nIn fact meanwhile, I found how to proceed to change the drive letter of my USB key.  \n\nI have followed the link provided by Wonko :  \n[http://www.boot-land...?showtopic\u003d1938](http://www.boot-land.net/forums/index.php?showtopic\u003d1938 \"External link\")  \n\nAnd I have used the tool SetDrive.exe provided by Vrocco.  \nThe tool implements automatically **your** procedure. :smile:   \n\nI have made a mistake when using SetDrive.  \nThe correct procedure is the following :  \n- boot on the USB Key.  \n- start SetDrive (that you have copied before on the key).  \n- enter the drive letter of the USB Key (for me it was X).  \n- enter the path to setupreg.hiv  \n- enter the new drive letter (I choose C).  \n- apply.  \n- boot again on the USB Key.  \nand this time, the USB Key has C as drive letter.  \n![:(](http://reboot.pro/public/style_emoticons/default/sad.png)   \nThis is useful to install software that refers to path based on C:.  \n\nThank you for pointing me to the script.  \nI will try it in order to see if I can avoid the above procedure.  \n\nThanks to all of you for your valuable help.  \n![:(](http://reboot.pro/public/style_emoticons/default/sad.png)   \n"
    }
  ]
}