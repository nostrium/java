{
  "id": "16360",
  "title": "Cannot boot from big USB HDD",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "148552",
      "timestamp": "2012-02-18T20:05:14+00:00",
      "author": "artiom",
      "content": "Hello all!  \n\nI am trying to boot from an usb hdd \"Silicon Power Armor a80 500GB\" but it is not seen as bootable from BIOS.  \n\nWhat I have tryied:  \n- to plug in both USB 2.0 and USB 3.0 ports on 2 different machines (desktop on Gigabyte GA-X58-UD3R rev 2 motherboard, and an Dell N5110 laptop).  \n- mount as physical disk in VirtualBox  \n- different partition sizes and combinations: 4GB single partition, 8GB, several partitions, etc.  \n- windows bootloader (both NTLDR and BOOTMGR) and Grub4dos, installed in different combinations  \n- after each try - wiped first \\~10MB of HDD (dd command from Linux OS)  \n- all BIOS\u0027es, including VirtualBox are able to boot from USB - tested with an 4GB Transcend flash disk (Grub4dos on NTFS).  \n- waiting until drive spins-on in bios, then reset the computer (ctrl+alt+del from bios)  \n\nThe HDD works perfectly from both Windows and Linux OSes, but is not bootable in any way.  \n\nHave someone encountered such situations with external USB Hard Disk Drives? Maybe some has experience with this particular model?  \n\nOn manufacturer site found an firmware update utility (\"MS1009033-A80FWUpdateTool_v01.zip\") - but it doesn\u0027t see my HDD.  \n\nPlease share your experience in troubleshooting usb hdd booting, what else I can try to make it detectable in BIOS?  \nUntil then I assume that it is not bootable ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)  \n\nPS: sorry for bad english - it is not my native language.   \n"
    },
    {
      "id": "148558",
      "timestamp": "2012-02-18T20:33:48+00:00",
      "author": "Wonko the Sane",
      "content": "It may be connected with the \"green\" nature of the hard disk inside the case.  \nI have seen reports of \"green\" disks simply not being \"fast enough\" to get listed in the BIOS.  \nIf, as I presume, the thingy is new, you cannot open the case to see which particular drive is in it unless you are going to forfait the device warranty, maybe - even if through the USB adapter - some data is shown about it?  \n\nYou could try PLoP that may allow for giving the device enough time (if it works on your specific hardware):  \n[http://www.plop.at/e...otmanagers.html](http://www.plop.at/en/bootmanagers.html \"External link\")  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "148565",
      "timestamp": "2012-02-18T20:55:40+00:00",
      "author": "artiom",
      "content": "Thanks for reply.  \n\nSysinfo tools are showing that the physical HDD is \"TOSHIBA MK5059GSXP (Z1MKC0E8T)\" (specs: [http://storage.toshi...p?productid\u003d382](http://storage.toshiba.eu/cms/en/hdd/multimedia/product_detail.jsp?productid\u003d382 \"External link\") ).  \nI don\u0027t have experience with PLoP boot manager, but will try to play with it and post here the results.  \n\n\u003e not being \"fast enough\" to get listed in the BIOS.  \nI have tried to enter to BIOS with connected HDD, then reboot (in hope that it will spin-on quicker on second boot) - but, again, bios doesn\u0027t see it as bootable.   \n"
    },
    {
      "id": "148568",
      "timestamp": "2012-02-18T21:37:29+00:00",
      "author": "steve6375",
      "content": "By mount as physical disk in VirtualBox - do you mean you have tried to boot from it in VirtualBox?  \n\nHave you tried QEMU (install QEMU Manager or RMPrepUSB and hit F11)?  \nCan you format it as NTFS and type**fsutil fsinfo ntfsinfo x:** where X: is usb drive letter and post result?  \nP.S. Or type **wmic DISKDRIVE get bytespersector, caption** and report output   \n"
    },
    {
      "id": "148585",
      "timestamp": "2012-02-19T07:35:36+00:00",
      "author": "artiom",
      "content": "Here are the results:  \n\n1. Installed PLoP (v5.0.14) on usb stick and loaded via Grub4dos - but it doesn\u0027t see my HDD ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)  \n\n2. QEMU fails to boot with error \"Boot failed: not a bootable disk\" (btw QEMU doesn\u0027t start with default RAM size suggested by RMPrepUSB - 1280MB, need to specify manually 512MB)  \n\n3. Drive information results:  \n\nhdd currently has only one 30GB NTFS partition:  \n\n```\nC:\\Windows\\system32\u003efsutil fsinfo ntfsinfo h:\n\nNTFS Volume Serial Number :\t   0xb642588842584eed\n\nVersion :\t\t\t\t\t\t 3.1\n\nNumber Sectors :\t\t\t\t  0x000000000077ffff\n\nTotal Clusters :\t\t\t\t  0x000000000077ffff\n\nFree Clusters  :\t\t\t\t  0x00000000006f1028\n\nTotal Reserved :\t\t\t\t  0x0000000000000000\n\nBytes Per Sector  :\t\t\t   4096\n\nBytes Per Cluster :\t\t\t   4096\n\nBytes Per FileRecord Segment\t: 4096\n\nClusters Per FileRecord Segment : 1\n\nMft Valid Data Length :\t\t   0x0000000000100000\n\nMft Start Lcn  :\t\t\t\t  0x00000000000c0000\n\nMft2 Start Lcn :\t\t\t\t  0x0000000000000002\n\nMft Zone Start :\t\t\t\t  0x00000000000c0100\n\nMft Zone End   :\t\t\t\t  0x00000000000cc900\n\nRM Identifier:\t\t17B1F757-5A39-11E1-9855-001BDC004D89\n\n```\n\n\u003cbr /\u003e\n\n```\nC:\\Windows\\system32\u003ewmic DISKDRIVE get bytespersector, caption\n\nBytesPerSector  Caption\n\n512\t\t\t ST9750423AS ATA Device\n\n\t\t\t\tGeneric- Multi-Card USB Device\n\n4096\t\t\tPHD 3.0 Silicon-Power USB Device\n\n```\n\n\u003cbr /\u003e\n\n\"PHD 3.0 Silicon-Power USB Device\" - this is my external hdd.  \n\n4. RMPrepUSB v2.1.630 gives warning \"very large device\" then fails with the error \"Error accessing sector 0 on drive 2\" / \"error 6 operation failed returned by RMPARTUSB\"  \n\nI started it from Windows 7 x64 OS, on a dell laptop (N5110, intel HM67 platform).  \n\nI suppose the issue is in USB-to-SATA controller from the external hdd, but did not found yet any information about this.   \n"
    },
    {
      "id": "148588",
      "timestamp": "2012-02-19T09:21:57+00:00",
      "author": "artiom",
      "content": "The problem has been solved!  \n\nWARNING! these oprations may void warranty of the device, please read all post before trying to reproduce!  \n\nHere is what I did:  \n\n1. Disassembled the HDD and found it\u0027s usb controller name: ASMEDIA 1051 (USB3 to SATA bridge)  \n2. Downloaded firmware and flash tool from here: [http://www.station-d...age/asmedia.htm](http://www.station-drivers.com/page/asmedia.htm \"External link\")  \nUnder category \"Asmedia ASM 1051 USB3/SATA Controller Firmware\" (it is the last on page):  \n- Download firmware \"Version 101026.00.68 Pour Windows Xp/Vista/7 32/64bits\" (with comment \"Support 3TB HDD\").  \n- Download flash tool: \"Version 1.07 Pour Windows Xp/Vista/7 32/64bits\"  \n3. Run the downloaded MPTool  \n4. Check that device is detected and click the button \"Unlock MP Tool\" -\\\u003e as password enter \"asmedia\" (without quotes).  \n5. Select the downloaded flash bin (button \"FW Browse\", then select file \"101026_00_68_00.bin\")  \n6. Press \"Start\"  \n7. After successful flashing - reconnected the device to computer (btw this has broken the partition table).  \n\nAfter these operations, I have created an 30GB NTFS primary partition, installed Grub4Dos via RMPrepUSB and the drive has been recognized successfuly as boot device.  \nTested platforms: Desktop on intel x58 chipset (Award BIOS), laptop, VirtualBox machine (connected as raw VMDK drive), QEMU (grub menu shows up).  \n\nEncountered problems: I didn\u0027t uncheck the \"Update configuration\" checkbox in MPTool.exe - so this has rewritten all device names, and it has been detected by OS as \"0123456789012345678901234567890123456789\" ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)  \nunfortunately, I didn\u0027t saved its original manufacturer name, device name and serial number - so this was lost. I have repeated the firmware update process to update the data - used serial number from device package, as manufacturer name \"PHD 3.0 Silicon-Power USB Device\" and as device name \"Silicon Power Armor A80\" - which looks much cooler in USB devices list in windows :smile:  \n\nI suppose warranty was lost, but the device now works correctly instead :wink:  \nWill check how it works with big data volumes, and report here if I will encouter any issues.   \n"
    },
    {
      "id": "148590",
      "timestamp": "2012-02-19T11:27:39+00:00",
      "author": "steve6375",
      "content": "I think the issue was 4096 byte sectors (raw 4K mode). If you repeat the fsutil command now it should report 512 bytes.  \nInstall hotfix [KB982018](http://www.microsoft.com/download/en/details.aspx?displaylang\u003den\u0026id\u003d8903 \"External link\") first so it reports Bytes per Physical Sector.  \n\n\u003cbr /\u003e\n\n```\n\n\nBytes Per Sector  :               512   \u003c\u003c this means the disk is in Advanced Format 512e mode\n\n\n\nBytes Per Physical Sector :       4096  \u003c\u003c this means you have a 4K disk\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "148592",
      "timestamp": "2012-02-19T12:26:17+00:00",
      "author": "artiom",
      "content": "I haven\u0027t done low-level formatting, so not sure if this was caused by sector size.  \nAnyways, the problem is now solved.  \n\n```\nC:\\Windows\\system32\u003efsutil fsinfo ntfsinfo h:\n\nNTFS Volume Serial Number :\t   0xca9c93099c92eee7\n\nVersion :\t\t\t\t\t\t 3.1\n\nNumber Sectors :\t\t\t\t  0x0000000003bfffff\n\nTotal Clusters :\t\t\t\t  0x0000000003bfffff\n\nFree Clusters  :\t\t\t\t  0x00000000038cc021\n\nTotal Reserved :\t\t\t\t  0x0000000000000000\n\nBytes Per Sector  :\t\t\t   512\n\nBytes Per Physical Sector :\t   \u003cNot Supported\u003e\n\nBytes Per Cluster :\t\t\t   512\n\nBytes Per FileRecord Segment\t: 1024\n\nClusters Per FileRecord Segment : 2\n\nMft Valid Data Length :\t\t   0x0000000000040000\n\nMft Start Lcn  :\t\t\t\t  0x0000000000600000\n\nMft2 Start Lcn :\t\t\t\t  0x0000000000000010\n\nMft Zone Start :\t\t\t\t  0x0000000000600200\n\nMft Zone End   :\t\t\t\t  0x0000000000664200\n\nRM Identifier:\t\t788B113B-5ACD-11E1-9409-001BDC004D89\n\n```\n\n\u003cbr /\u003e\n\nIt is strange that after installing the hotfix - it still cannot report the physical sector size. (I am using Windows 7 x64 without SP1 - maybe this is the cause).   \n"
    },
    {
      "id": "148594",
      "timestamp": "2012-02-19T12:41:27+00:00",
      "author": "karyonix",
      "content": "I think you should use 4096-byte or larger cluster in this disk for best performance. Also make sure the partition start position is 4096-byte aligned.   \n"
    },
    {
      "id": "148595",
      "timestamp": "2012-02-19T12:55:12+00:00",
      "author": "artiom",
      "content": "I have split the disk in 2 partitions using diskpart, nothing special was used for partition aligning:  \n- Partition 1: 30GB, 512 byte per cluster, starting at offset 1024KB, primary, active  \n- Partition 2: 435GB, 4096 byte per cluster, starting at offset 30GB, primary  \n\npartition 1 will be used only for booting different OS\u0027es (grub4dos - tested to load an WinPE build, Windows XP recovery console, latest UBCD, PLoP and latest Kubuntu Live CD)  \npartition 2 will be used for backup and data storage tasks.   \n"
    }
  ]
}