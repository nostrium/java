{
  "id": "16149",
  "title": "Firadisk CMD Question",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "145802",
      "timestamp": "2012-01-06T19:13:34+00:00",
      "author": "laddanator",
      "content": "Hello again. I am installing XP from ISO file with this command using Firadisk  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home Setup Part 1 from %USBRoot%nDec 11\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root  --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\nmap /XP/HOME.ISO (222)\n\nmap /XP/firadisk.img (fd0)\n\nmap /XP/firadisk.img (fd1)\n\nmap --harddrives\u003d1\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;floppy,vmem\u003dfind:/XP/firadisk.img;n0\n\nrootnoverify (222)\n\nchainloade\n```\n\n\u003cbr /\u003e\n\nand part 2 of install like this  \n\n\u003cbr /\u003e\n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home Setup Part 2 from %USBRoot%nDec 11\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root  --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\n# map (hd1) (hd0)\n\n# map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\n\nroot (hd0,0)\n\nchainloader /ntldr\n\nchainloader (hd0)+1\n```\n\n\u003cbr /\u003e\n\nwhich works very well. Part one of install will take you through text setup....partitioning of the hard drive, reboot and if you using DriverPacks like I am...presetup.cmd launches and all is well til GUI setup starts and XP will give error that can\u0027t find CD to finish install. I assume at this point firadisk has been lost and that\u0027s where part 2 of setup from the g4d menu comes in. If I boot setup from part 2 from g4d menu listed above all loads fine and I have a running XP. My question, I would like to get this down to just one part install of XP from ISO instead of 2....since DriverPacks presetup.cmd will load, can I use Firadisk from that same presetup.cmd to do the second part of install?  \n\nThis is what I have tried so far. This is my modded presetup.cmd  \n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| \\|  \nREM \\| This presetup.cmd file was dynamically generated by the DriverPacks \\|  \nREM \\| BASE, to work with the DriverPacks without any further editing. \\|  \nREM \\| However, if you would like to add some custom functionality, you can \\|  \nREM \\| edit this file without any problems. Just take into record that this \\|  \nREM \\| file will be erased if you run the DriverPacks BASE on these Windows \\|  \nREM \\| installation files again! \\|  \nREM \\| \\|  \nREM \\| With special thanks to: \\|  \nREM \\| -Pyron, a06lp and iLE for their help with this method; \\|  \nREM \\| -schalti for the optional \u0027Keep the Drivers\u0027 system and Pyron (again) \\|  \nREM \\| for turning it into an executable. \\|  \nREM \\| -SuperTibaldoKart for creating un7zip.exe \\|  \nREM \\| \\|  \nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \n\nIf exist \"%systemroot%system32setupold.exe\" DEL /F \"%systemroot%system32setupold.exe\"  \n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| Finding CD/DVD driveletter. \\|  \nREM \\|--------------------------------------------------------------------------\\|  \nFor %%I in (C D E F G H I J K L M N O P Q R S T U V W X Y Z A :cool: do (dir %%I: 1\\\u003enul 2\\\u003enul \\\u0026\\\u0026 if /i exist %%I:laddsbootusb.tag set CDDRIVE\u003d%%I:)  \n:DPsFound  \n\n**\\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0**   \n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| Decompressing the DriverPacks to the harddisk - using un7zip.exe. \\|  \nREM \\|--------------------------------------------------------------------------\\|  \nStart /wait /realtime /separate \"\" %CDDRIVE%XPOEMbinun7zip.exe %CDDRIVE%XPOEMDP\\*.7z %SystemDrive%  \n\n\u003cbr /\u003e\n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| Copying/decompressing the files to finish the installation. \\|  \nREM \\|--------------------------------------------------------------------------\\|  \n%CDDRIVE%XPOEMbinun7zip.exe %CDDRIVE%XPOEMbin\\*.7z %SystemDrive%  \nCOPY /Y %CDDRIVE%XPOEMbinDPsFnshr.ini %SystemDrive%  \nIF EXIST %CDDRIVE%XPOEM\\*.ins COPY /Y %CDDRIVE%XPOEM\\*.ins %SystemDrive%  \n\n\u003cbr /\u003e\n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| Scanning for driverdirectories. \\|  \nREM \\|--------------------------------------------------------------------------\\|  \n%CDDRIVE%XPOEMbinDevPath.exe %SystemDrive%D  \n\n\u003cbr /\u003e\n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| Disable Driver Signing Policy and keep it disabled. \\|  \nREM \\|--------------------------------------------------------------------------\\|  \nSTART %SystemDrive%DSPdsblr.exe  \n\nEXIT  \n\n\u003cbr /\u003e\n\neverything works (DP Wise) except for the Firadisk command in bold. Not even sure you can run Firadisk this way?  \n\nI am using a SP3 XP Home with Dec Updates and DP(all of them) Like I said if I use the two part setup from g4d menu, all is well and XP loads fine. My goal is to get this down to one part install without having to load the ISO to ram totally so to speak.  \n\nI guess my main question is will Firadisk or how to get Firadisk to locate the ISO to be loaded from .cmd file   \n"
    },
    {
      "id": "145805",
      "timestamp": "2012-01-06T19:24:15+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e **\\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0**   \n\n**WHERE** did you find that command line?  \nThat is written in grub4dos language and it is about a parameter option written by grub4dos **write (99)** (and obviously connected with the previous**\"map --mem (md)0x800+4 (99)** \")!  \n\nThat is **NOT** batch language, to write a batch command to be used in a batch .cmd file, ***strangely enough*** ![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif), you need to write it using Batch SYNTAX! ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)  \nMore generally **WHERE** from did you get those menu.lst entries?  \n\nIt seems like you are trying to modify an existing method without actually knowing what you are modifying ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif), maybe if you state from which original you started it will be easier to help you. :smile:  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145807",
      "timestamp": "2012-01-06T19:39:47+00:00",
      "author": "steve6375",
      "content": "I think you load firadisk like this\n\n```\n\\firadisk\\i386\\devcon\tinstall \\firadisk\\firadisk.inf   root\\firadisk\n\n\n\n```\n\n\u003cbr /\u003e\n\nbut you need to have the firadisk file payload files present.   \n"
    },
    {
      "id": "145808",
      "timestamp": "2012-01-06T19:41:00+00:00",
      "author": "laddanator",
      "content": "\u003e **WHERE** did you find that command line?\n\nI got the commands from here  \n\n[http://www.msfn.org/...le/page__st__40](http://www.msfn.org/board/topic/149675-install-xp-from-a-iso-file/page__st__40 \"External link\")  \n\n5th one down I believe.  \n\nLike I said as long as I follow the 2 part setup, XP loads fine from ISO using the 2 g4d command above and I have a working install on my HD at the end. I was hoping to get this down to a 1 part.  \n\n\u003e That is **NOT** batch language, to write a batch command to be used in a batch .cmd file, ***strangely enough*** ../public/style_emoticons/default/happy22.gif, you need to write it using Batch SYNTAX!\n\nNow that I know this, I\u0027m sure there is no cmd fix for Firadisk. I was hoping basically to take part 2 of the install and have this command load from cmd instead or having to boot back to my USB stick and run the part 2 command from the g4d menu.   \n"
    },
    {
      "id": "145809",
      "timestamp": "2012-01-06T19:45:15+00:00",
      "author": "laddanator",
      "content": "\u003e I think you load firadisk like this  \n\u003e firadiski386devcon install firadiskfiradisk.inf rootfiradisk\n\n\u003cbr /\u003e\n\nI read this and was going to try that command to install firadisk but didn\u0027t see how or the command to rehook the ISO in question like this command  \n\n```\n[/b][b][FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nLike this maybe?  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n```\nfiradiski386devcon   install firadiskfiradisk.inf   rootfiradisknStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "145810",
      "timestamp": "2012-01-06T19:49:36+00:00",
      "author": "steve6375",
      "content": "If you want to install XP in one go from USB, you can try [this method](http://www.rmprepusb.com/tutorials/how-to-install-windows-xp-from-a-bootable-usb-drive \"External link\"). It uses WinPE v3 (Win7PE) to boot to and prepare the hard drive and then runs winnt32.exe to start the setup process.   \n"
    },
    {
      "id": "145811",
      "timestamp": "2012-01-06T19:53:58+00:00",
      "author": "steve6375",
      "content": "```\n\\firadisk\\i386\\devcon   install \\firadisk\\firadisk.inf   root\\firadisk\\nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;\\n\\0\n```\n\n\u003cbr /\u003e\n\nNO - you just need to load the driver. The grub4dos StartOptions command has already set the ISO filename and it is stored in memory - when the firadisk driver loads it will look in memory for a StartOptions command and get and load the specified ISO file automatically.   \n"
    },
    {
      "id": "145812",
      "timestamp": "2012-01-06T19:58:38+00:00",
      "author": "laddanator",
      "content": "\u003e NO - you just need to load the driver. The grub4dos StartOptions command has already set the ISO filename and it is stored in memory - when the firadisk driver loads it will look in memory for a StartOptions command and get and load the specified ISO file automatically.\n\nVery interesting! ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif) I can add this to my presetup.cmd and give it a try  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e firadiski386devcon install firadiskfiradisk.inf rootfiradisk\n\n"
    },
    {
      "id": "145813",
      "timestamp": "2012-01-06T20:05:44+00:00",
      "author": "Wonko the Sane",
      "content": "As expected. ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)  \n\nThe post is this one, I presume:  \n[http://www.msfn.org/...le/page__st__44](http://www.msfn.org/board/topic/149675-install-xp-from-a-iso-file/page__st__44 \"External link\")  \n(strangely enough :wink: post #45 in a thread is at offset #n-1 and thus has an address that ends with \"/page__st__44\")  \n\nSee if this rings any bell:  \n\u003e Hi, I am just dropping in to report that the installation of XP from an ISO, where **both** the mass storage drivers needed by the mobo **and firadisk have been integrated** using nlite, works fine. I built a XP ISO with drivers for all types of Intels ICH7(x) to ICH10(x) controller ( both raid and ahci drivers ), NVidias Nforce7 chipset ( raid and ahci ) and firadisk itself. Then I used the following configuration ( winsetup.lst ) for grub4dos:\n\nThe OP had already the firadisk integrated in the source.  \n\nBut any (senceful) modification won\u0027t allow you to have it not in two parts.  \n\nIn any case you seem like NOT having the basic idea on HOW a XP setup normally works.  \nYou do understand that you boot first time from a (USB) device and second time from another one (the internal disk)?  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145814",
      "timestamp": "2012-01-06T20:06:14+00:00",
      "author": "laddanator",
      "content": "If I set Firadisk up this way **%CDDRIVE%XP** ...does the rootfiradisk part have to be changed?  \n\n\u003cbr /\u003e\n\n**%CDDRIVE%XPFiraDiski386devcon install %CDDRIVE%XPFiraDiskfiradisk.inf rootfiradisk**   \n"
    },
    {
      "id": "145815",
      "timestamp": "2012-01-06T20:14:25+00:00",
      "author": "laddanator",
      "content": "\u003e In any case you seem like NOT having the basic idea on HOW a XP setup normally works.  \n\u003e You do understand that you boot first time from a (USB) device and second time from another one (the internal disk)?\n\nI been install XP before you was born. :wink: I do know this and when I use winsetupfromusb, I always skip the second part and allow the hard drive to boot, but if you allow the hard drive to boot without using this command for firadisk install...setup will fail in gui mode  \n\n**\\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0**   \n\n***I assume firadisk has lost the path to the ISO?***   \n\nThe issue is not that setup has to reboot, my issue is I would like to perform step one from g4d (and needs no more attention from me) and if I am doing something else and the computer reboots, the setup will continue without having to boot the second command from g4d. I am very pleased with winsetupfromusb but I am just trying different methods to hone my skills with Firadisk. Winsetupfromusb has two parts if need be but I never use the second part of install from the winsetup.lst. Xp reboots from the textsetup and goes right into GUI no problem but this doesn\u0027t work with Firadisk at the moment (I am the one at fault, not firadisk)   \n"
    },
    {
      "id": "145818",
      "timestamp": "2012-01-06T20:32:39+00:00",
      "author": "steve6375",
      "content": "The problem is that after the 1st reboot, memory will probably be cleared by the BIOS, hence the need to boot to grub4dos a 2nd time and put the iso path into memory again.  \nMaybe WinVblock could mount the iso or ImDisk but you would have to hard code the filename unless you just look for any file on any drive called say XPUSB\\*.iso ???   \n"
    },
    {
      "id": "145820",
      "timestamp": "2012-01-06T20:42:57+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I been install XP before you was born. :wink:  \nLet me doubt that. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\nWHY, in ***MY*** DAY....:  \n\u003chttp://reboot.pro/1908/\u003e  \n\n\u003cbr /\u003e\n\n\u003e The issue is not that setup has to reboot, my issue is I would like to perform step one from g4d (and needs no more attention from me) and if I am doing something else and the computer reboots, the setup will continue without having to boot the second command from g4d. I am very pleased with winsetupfromusb but I am just trying different methods to hone my skills with Firadisk. Winsetupfromusb has two parts if need be but I never use the second part of install from the winsetup.lst. Xp reboots from the textsetup and goes right into GUI no problem but this doesn\u0027t work with Firadisk at the moment (I am the one at fault, not firadisk)  \nYou are using a ***deviation*** from WinsetupfromUSB, do you understand that the whole idea was to **NOT** needing to remove the USB thingy/change BIOS boot order after first part of the setup?  \nOr, if you prefer, what you need is to have the \"normal\" way (that worked for a few tens thousands of people by now ![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif)):\n\n* Set BIOS boot order to USB\n* Insert the USB thingy\n* Let it boot (twice)\n\nwithout you introducing the \"remove the USB thingy variation\":  \n[http://www.msfn.org/.../page__st__1578](http://www.msfn.org/board/topic/120444-how-to-install-windows-from-usb-winsetupfromusb-with-gui/page__st__1578 \"External link\")  \nonce you solve the **REAL** issue (having the USB thingy stay there) it is **TRIVIAL** to automate the grub4dos menu.lst using the default command or by checking for some .tag files on the target disk (written as a flag to signify that first part of setup has ended successfully).  \n\n\u003cbr /\u003e\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145821",
      "timestamp": "2012-01-06T20:54:58+00:00",
      "author": "laddanator",
      "content": "\u003e You are using a ***deviation*** from WinsetupfromUSB, do you understand that the whole idea was to **NOT** needing to remove the USB thingy/change BIOS boot order after first part of the setup?  \n\u003e Or, if you prefer, what you need is to have the \"normal\" way (that worked for a few tens thousands of people by now\n\nWithout \"deviation\" from the plan how would anything else not be discovered is the real question? I\u0027m sure Albert Einstein, Wright Brothers and few other well know folks \"deviated\" from the plan. What I am saying is, I can boot to my USB stick, run the first part of the winsetupfromusb and once the computer reboots for continuation of setup, I can remove my USB stick and all loads fine. If my computer is set to boot my USB stick after the first part of install, this is my default entree,  \n\n\u003cbr /\u003e\n\n```\ntimeout 15\n\ncolor white/blue\n\nwrite 0x8274 0x2001\n\n\n\ntitle Boot From Hard Drive (Windows Vista/7 or Xp)nBoot Into Main OS Drive\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map () (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) ()\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map --hook\n\nrootnoverify (hd0,0)\n\nchainloader +1 || chainloader /ntldr\n```\n\n\u003cbr /\u003e\n\nso if I leave the room or step out, this will boot the hard drive and setup continues as normal with WSFUSB. Step 2 from winsetup.lst is not needed but my point is Firadisk ISO installs..step 2 is needed to relocate the ISO and I wanted to automate this step without the need to boot back to my USB.  \n\n\u003cbr /\u003e\n\nAs for the link you just posted, you see I responded to the person having the issue and he followed my \"deviation\" and that person reported back successful XP install.   \n"
    },
    {
      "id": "145827",
      "timestamp": "2012-01-06T22:12:32+00:00",
      "author": "steve6375",
      "content": "Well, you could do it using the \u0027default /default\u0027 command in the grub4dos menu. Set the PC to always boot from USB as the first device, then in the first Step 1 menu, set the default to menu item 2, then when it reboots, it will auto run menu 2, in menu 2 set the default to the 3rd menu item which will then force it to boot from the internal hdd.  \nBut won\u0027t you still need to accept the firadisk driver unsigned prompts, etc???   \n"
    },
    {
      "id": "145830",
      "timestamp": "2012-01-06T22:42:07+00:00",
      "author": "laddanator",
      "content": "\u003e But won\u0027t you still need to accept the firadisk driver unsigned prompts, etc???\n\n\u003cbr /\u003e\n\nI installed Home, Pro, and MCE with the Step 1 and 2 commands listed in my fist post and all three loaded fine and I never got the unsigned prompts.   \n"
    },
    {
      "id": "145846",
      "timestamp": "2012-01-07T00:27:45+00:00",
      "author": "laddanator",
      "content": "If I use Imdisk to mount ISO to finish install, would I need to mount as the same drive letter that Firadisk did in the beginning?   \n"
    },
    {
      "id": "145851",
      "timestamp": "2012-01-07T00:51:29+00:00",
      "author": "cdob",
      "content": "\u003e If I use Imdisk to mount ISO to finish install, would I need to mount as the same drive letter that Firadisk did in the beginning?\nNo, drive letter dosn\u0027t matter.  \n\nWhat about XP RAM load approach from msfn.org  \nupdate firadisk driver version  \nset menu.lst: add (99) part and remove --mem   \n"
    },
    {
      "id": "145853",
      "timestamp": "2012-01-07T01:47:53+00:00",
      "author": "laddanator",
      "content": "\u003e What about XP RAM load approach from msfn.org  \n\u003e update firadisk driver version  \n\u003e set menu.lst: add (99) part and remove --mem\n\nYou mean this?  \n\n[http://www.msfn.org/...aded-iso-image/](http://www.msfn.org/board/topic/137714-install-xp-from-a-ram-loaded-iso-image/ \"External link\")  \n\nTried this (I updated the firadisk version) also and works great. The only problem is I was only able to get my ISO size down to 738mb for Home. I use a untouched SP3 source that I slipstream updates with RVM_Integrator_1.6.1b2.1.exe. I use DriverPacks too but with the method in the link, I leave the drivers outside of the ISO to save space and map the DriverPack stuff to load from the USB drive and not ISO. cdob, do you have a link to the method of removing the --mem part?  \n\n\u003cbr /\u003e\n\nDo you mean remove the  \nmap **--mem** (md)0x800+4 (99)  \ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd1) (hd0)  \ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd0) (hd1)  \n\nhere?  \n\n\u003cbr /\u003e\n\n**UPDATE**   \n\n\u003cbr /\u003e\n\nOk, actually got something working here. I modified the XP_INST.IMA from here  \n\n[http://www.msfn.org/...aded-iso-image/](http://www.msfn.org/board/topic/137714-install-xp-from-a-ram-loaded-iso-image/ \"External link\")  \n\nDid this  \n\n```\nexpand.exe SETUP.EX_ setupORG.exe\n```\n\n\u003cbr /\u003e\n\nChanged the name of my ISO in the ISOimage.ini and changed the paths to the ISO in the setup.cmd (Inside the XP_INST_v04.7z) updated Firadisk and changed my menu.lst ..removed the --mem commands as cdob suggested  \n\niftitle \\[find --set-root --devices\u003dh /laddsbootusb.tag \\\u0026\\\u0026 call set USBRoot\u003d%@root\\^%\\] XP Home Setup Part 1 from %USBRoot%nDec 11  \npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.  \nfind --set-root --devices\u003dh /laddsbootusb.tag  \nmap --mem (md)0x800+4 (99)  \ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd1) (hd0)  \ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd0) (hd1)  \nmap /XP/HOME.ISO (222)  \nmap /XP/**XPH_INST.IMA** (fd0)  \nmap /XP/**XPH_INST.IMA** (fd1)  \nmap --harddrives\u003d1  \nmap --hook  \nwrite (99) \\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;floppy,vmem\u003dfind:/XP/**XP_INST.IMA** ;n0  \nrootnoverify (222)  \nchainloader  \n\nNow instead of XP giving me an error about can\u0027t find the SP3 install CD after DP finishes and having to reboot into the USB stick to run part 2...the installs continues as normal. DP does it\u0027s thing, then the GUI kicks in and never misses a beat.  \n\nIf you use the one command above, this one is no longer needed  \n\n**iftitle \\[find --set-root --devices\u003dh /laddsbootusb.tag \\\u0026\\\u0026 call set USBRoot\u003d%@root\\^%\\] XP Home Setup Part 2 from %USBRoot%nDec 11\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\nfind --set-root --devices\u003dh /laddsbootusb.tag\nmap --mem (md)0x800+4 (99)\n# map (hd1) (hd0)\n# map (hd0) (hd1)\ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd0) (hd1)\ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd1) (hd0)\nmap --hook\nwrite (99) \\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\nroot (hd0,0)\nchainloader /ntldr\nchainloader (hd0)+1**   \n"
    },
    {
      "id": "145869",
      "timestamp": "2012-01-07T09:46:17+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Without \"deviation\" from the plan how would anything else not be discovered is the real question? I\u0027m sure Albert Einstein, Wright Brothers and few other well know folks \"deviated\" from the plan.  \nSure, but rest assured that they did know what they were doing/experimenting with, and did not do \"random\" things, like using grub4dos syntax in a batch!  \nThe infinite monkey approach is OK ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif), as long as you have INfinite resources, otherways you will need INfinite time to reach your goal. ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)  \n\nThe post you referenced is a report about an user having success in a given context:\n\n* firadisk integrated in source\n* second reboot manually chosen (but still from USB)\n\n\u003cbr /\u003e\n\nIt would seem to me only logical to go in steps like:  \n\n* firadisk integrated\n* second reboot automatically chosen (but still from USB)\n\n\u003cbr /\u003e\n\nThen:  \n\n* firadisk added on the fly\n* second reboot automatically chosen (but still from USB)\n\n\u003cbr /\u003e\n\nThen:  \n\n* firadisk added on the fly\n* second reboot automatically chosen (this time from internal disk)\n\nBut of course it is just me....  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145895",
      "timestamp": "2012-01-07T14:54:33+00:00",
      "author": "laddanator",
      "content": "\u003e Sure, but rest assured that they did know what they were doing/experimenting with, and did not do \"random\" things, like using grub4dos syntax in a batch!\n\nCrazy I know but I like to try all things. I knew going into using that code in a cmd wasn\u0027t going to work most likely, that\u0027s why I started this topic but I have seem to accomplish my goal. By the way I am willing to bet you Albert Einstein and many others didn\u0027t know the exact of everything they were doing...that\u0027s why it\u0027s called experimenting. ![:magic:](http://reboot.pro/public/style_emoticons/default/magic.gif)  \n\nMy problem, I started out having to boot to g4d twice to use Firadisk. First time to locate the ISO and the Second time to relocate the ISO.  \n\nMy solution, I am now able to install all three versions of XP I have from ISO without loading the ISO to ram and only having to boot to g4d menu once. I used part the method from here [http://www.msfn.org/...aded-iso-image/](http://www.msfn.org/board/topic/137714-install-xp-from-a-ram-loaded-iso-image/ \"External link\") and use the attached [XP_INST_v04.7z](http://www.msfn.org/board/index.php?app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d27752 \"External link\") mounted the ****XP_INST.IMA**** file with Imdisk, changed a few things  \n\n**1st. I changed the ISOimage.ini located in the** ****XP_INST.IMA**** **file to match the path of my ISO From the mounted **XP_INST.IMA****   \n\n**2nd. I expanded my setup.exe to setupORG.exe and placed it in the proper folder located in the mounted **XP_INST.IMA****   \n\n**3rd. I added the newest Firadisk ( \u003chttp://reboot.pro/8804/\u003e) drivers and of course deleted the older one from the mounted **XP_INST.IMA**** .  \n\n**4th. I changed the default ISO paths to match my ISO paths in the setup.cmd from the mounted **XP_INST.IMA****   \n\n**5th. Saved and unmounted the **XP_INST.IMA**and renamed it from XP_INST.IMA to HOME.IMA (or whatever version of XP I used) and copied the ISO and IMA to my USB stick**   \n\n**6th. Removed the Second entry in my g4d menu.lst** **as it\u0027s not needed any more(my goal)**   \n\n\u003cbr /\u003e\n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home Setup Part 2 from %USBRoot%nDec 11\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root  --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\n# map (hd1) (hd0)\n\n# map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\n\nroot (hd0,0)\n\nchainloader /ntldr\n\nchainloader (hd0)+1\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n**7th. Changed the first menu.lst entry that installs the XP to match the paths on the USB stick and removed the --map --mem part (Thanks cdob)**   \n\n\u003cbr /\u003e\n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home SP3 Install From ISO From %USBRoot%n\t\t\t\t\t\t\t\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap %USBRoot%/XP/HOME.ISO (222)...no map to mem anymore\n\nmap /XP/Floppy/HOME.IMA (fd0)\n\nmap /XP/Floppy/HOME.IMA (fd1)\n\nmap --harddrives\u003d1\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;floppy,vmem\u003dfind:/XP/Floppy/HOME.IMA;n0\n\nrootnoverify (222)\n\nchainloader (222)/I386/SETUPLDR.BIN\n```\n\n\u003cbr /\u003e\n\nAnd if I have my computer set to boot to USB first, becasue with the method I just listed, not necessary but if I got the USB booting first in Bios and when the first part of my XP installs reboot, I don\u0027t have to be in the room, all is well as my first menu option is on a timer to boot to hard drive  \n\n```\ntimeout 15\n\ncolor white/blue\n\nwrite 0x8274 0x2001\n\n\n\ntitle Boot From Hard Drive (Windows Vista/7 or Xp)nBoot Into Main OS Drive\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map () (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) ()\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map --hook\n\nrootnoverify (hd0,0)\n\nchainloader +1 || chainloader || chainloader /ntldr\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e firadisk integrated in source\n\n\u003cbr /\u003e\n\nI did not slipstream the Firadisk driver into my source but that\u0027s a good idea   \n"
    },
    {
      "id": "145899",
      "timestamp": "2012-01-07T16:29:17+00:00",
      "author": "steve6375",
      "content": "As the HOME.IMA is mapped as a floppy in grub4dos, it should be writeable. So it should be possible to run a *cat --replace* command on the various files to replace the name of the ISO with a different name (as long as the length of the filename is not changed). Would that mean you only need one (or two if different one needed for XP 64 bit) setup.exe???  \n\nFor an AHCI PC, how do you add the AHCI SATA drivers to the XP ISO?   \n"
    },
    {
      "id": "145900",
      "timestamp": "2012-01-07T16:51:37+00:00",
      "author": "steve6375",
      "content": "I tried this using the FiraDisk 1.3.0 F6 disk files and XP SP3 OEM version and it works fine but I still get the \u0027cannot verify driver\u0027 pop-ups during stage 2 - how did you suppress this? Did you have a winnt.sif as well?   \n"
    },
    {
      "id": "145909",
      "timestamp": "2012-01-07T17:32:18+00:00",
      "author": "Wonko the Sane",
      "content": "These makes NO sense to me ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif):  \n\n```\nchainloader /ntldr\n\nchainloader (hd0)+1\n```\n\n\u003cbr /\u003e\n\nYou EITHER chainload ntldr OR chainload the MBR (the implied boot statement will actually boot the latter one).  \n\nalso this one doesn\u0027t sound \"right\" to me:  \n\n```\nchainloader +1 || chainloader || chainloader /ntldr\n```\n\nI read it as: chainload current root (bootsector), if it fails then chainload \"thin air\", if this fails then chainload ntldr. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145913",
      "timestamp": "2012-01-07T18:33:50+00:00",
      "author": "steve6375",
      "content": "This seems to work. ![:beer:](http://reboot.pro/public/style_emoticons/default/beer.gif) .  \nThere is a string in setup.cmd for XP_\\*.ISO,  \n\n```\nif exist c:InstXP_*.ISO set reassign\u003dtrue\n```\n\n\u003cbr /\u003e\n\nso we need to match the string \"XP_X\" so we don\u0027t corrupt this. So the XP ISO files can be called XP_X??.ISO where ?? can be any two characters.  \n\nThis example uses XP_XP2.ISO.  \n\nI tried using %MYISO% in the --replace line but it doesn\u0027t seem to work ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\n```\niftitle [find --set-root --devices\u003dh /INST/XP_XP2.ISO \u0026\u0026 call set USBRoot\u003d%@root^%] XP Pro SP3 Install From ISO From %USBRoot%n\n\nset MYISO\u003dXP_XP2.ISO\t\t\t\t\t\t\t\t\t\t\t\t  \n\nfind --set-root --devices\u003dh /inst/%MYISO%\n\nmap --mem (md)0x800+4 (99)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap %USBRoot%/inst/%MYISO% (222)\n\nmap /inst/XP_INST.IMA (fd0)\n\nmap /inst/XP_INST.IMA (fd1)\n\nmap --harddrives\u003d1\n\nmap --hook\n\n#iso file must always be XP_X??.ISO\n\ncat --number\u003d1  --locatei\u003d\"XP_X\"  --replace\u003d\"XP_XP2.ISO\" (fd0)/setup/isoimage.ini\n\ncat --number\u003d10 --locatei\u003d\"XP_X\"  --replace\u003d\"XP_XP2.ISO\" (fd0)/setup/setup.cmd\n\ncat (fd0)/setup/isoimage.ini\n\npause\n\ncat (fd0)/setup/setup.cmd\n\npause\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/inst/XP_XP2.ISO;floppy,vmem\u003dfind:/inst/XP_INST.IMA;n0\n\nrootnoverify (222)\n\nchainloader (222)/I386/SETUPLDR.BIN\n\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "145802",
      "timestamp": "2012-01-06T19:13:34+00:00",
      "author": "laddanator",
      "content": "Hello again. I am installing XP from ISO file with this command using Firadisk  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home Setup Part 1 from %USBRoot%nDec 11\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root  --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\nmap /XP/HOME.ISO (222)\n\nmap /XP/firadisk.img (fd0)\n\nmap /XP/firadisk.img (fd1)\n\nmap --harddrives\u003d1\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;floppy,vmem\u003dfind:/XP/firadisk.img;n0\n\nrootnoverify (222)\n\nchainloade\n```\n\n\u003cbr /\u003e\n\nand part 2 of install like this  \n\n\u003cbr /\u003e\n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home Setup Part 2 from %USBRoot%nDec 11\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root  --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\n# map (hd1) (hd0)\n\n# map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\n\nroot (hd0,0)\n\nchainloader /ntldr\n\nchainloader (hd0)+1\n```\n\n\u003cbr /\u003e\n\nwhich works very well. Part one of install will take you through text setup....partitioning of the hard drive, reboot and if you using DriverPacks like I am...presetup.cmd launches and all is well til GUI setup starts and XP will give error that can\u0027t find CD to finish install. I assume at this point firadisk has been lost and that\u0027s where part 2 of setup from the g4d menu comes in. If I boot setup from part 2 from g4d menu listed above all loads fine and I have a running XP. My question, I would like to get this down to just one part install of XP from ISO instead of 2....since DriverPacks presetup.cmd will load, can I use Firadisk from that same presetup.cmd to do the second part of install?  \n\nThis is what I have tried so far. This is my modded presetup.cmd  \n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| \\|  \nREM \\| This presetup.cmd file was dynamically generated by the DriverPacks \\|  \nREM \\| BASE, to work with the DriverPacks without any further editing. \\|  \nREM \\| However, if you would like to add some custom functionality, you can \\|  \nREM \\| edit this file without any problems. Just take into record that this \\|  \nREM \\| file will be erased if you run the DriverPacks BASE on these Windows \\|  \nREM \\| installation files again! \\|  \nREM \\| \\|  \nREM \\| With special thanks to: \\|  \nREM \\| -Pyron, a06lp and iLE for their help with this method; \\|  \nREM \\| -schalti for the optional \u0027Keep the Drivers\u0027 system and Pyron (again) \\|  \nREM \\| for turning it into an executable. \\|  \nREM \\| -SuperTibaldoKart for creating un7zip.exe \\|  \nREM \\| \\|  \nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \n\nIf exist \"%systemroot%system32setupold.exe\" DEL /F \"%systemroot%system32setupold.exe\"  \n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| Finding CD/DVD driveletter. \\|  \nREM \\|--------------------------------------------------------------------------\\|  \nFor %%I in (C D E F G H I J K L M N O P Q R S T U V W X Y Z A :cool: do (dir %%I: 1\\\u003enul 2\\\u003enul \\\u0026\\\u0026 if /i exist %%I:laddsbootusb.tag set CDDRIVE\u003d%%I:)  \n:DPsFound  \n\n**\\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0**   \n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| Decompressing the DriverPacks to the harddisk - using un7zip.exe. \\|  \nREM \\|--------------------------------------------------------------------------\\|  \nStart /wait /realtime /separate \"\" %CDDRIVE%XPOEMbinun7zip.exe %CDDRIVE%XPOEMDP\\*.7z %SystemDrive%  \n\n\u003cbr /\u003e\n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| Copying/decompressing the files to finish the installation. \\|  \nREM \\|--------------------------------------------------------------------------\\|  \n%CDDRIVE%XPOEMbinun7zip.exe %CDDRIVE%XPOEMbin\\*.7z %SystemDrive%  \nCOPY /Y %CDDRIVE%XPOEMbinDPsFnshr.ini %SystemDrive%  \nIF EXIST %CDDRIVE%XPOEM\\*.ins COPY /Y %CDDRIVE%XPOEM\\*.ins %SystemDrive%  \n\n\u003cbr /\u003e\n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| Scanning for driverdirectories. \\|  \nREM \\|--------------------------------------------------------------------------\\|  \n%CDDRIVE%XPOEMbinDevPath.exe %SystemDrive%D  \n\n\u003cbr /\u003e\n\nREM +\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d+  \nREM \\| Disable Driver Signing Policy and keep it disabled. \\|  \nREM \\|--------------------------------------------------------------------------\\|  \nSTART %SystemDrive%DSPdsblr.exe  \n\nEXIT  \n\n\u003cbr /\u003e\n\neverything works (DP Wise) except for the Firadisk command in bold. Not even sure you can run Firadisk this way?  \n\nI am using a SP3 XP Home with Dec Updates and DP(all of them) Like I said if I use the two part setup from g4d menu, all is well and XP loads fine. My goal is to get this down to one part install without having to load the ISO to ram totally so to speak.  \n\nI guess my main question is will Firadisk or how to get Firadisk to locate the ISO to be loaded from .cmd file   \n"
    },
    {
      "id": "145805",
      "timestamp": "2012-01-06T19:24:15+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e **\\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0**   \n\n**WHERE** did you find that command line?  \nThat is written in grub4dos language and it is about a parameter option written by grub4dos **write (99)** (and obviously connected with the previous**\"map --mem (md)0x800+4 (99)** \")!  \n\nThat is **NOT** batch language, to write a batch command to be used in a batch .cmd file, ***strangely enough*** ![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif), you need to write it using Batch SYNTAX! ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)  \nMore generally **WHERE** from did you get those menu.lst entries?  \n\nIt seems like you are trying to modify an existing method without actually knowing what you are modifying ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif), maybe if you state from which original you started it will be easier to help you. :smile:  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145807",
      "timestamp": "2012-01-06T19:39:47+00:00",
      "author": "steve6375",
      "content": "I think you load firadisk like this\n\n```\n\\firadisk\\i386\\devcon\tinstall \\firadisk\\firadisk.inf   root\\firadisk\n\n\n\n```\n\n\u003cbr /\u003e\n\nbut you need to have the firadisk file payload files present.   \n"
    },
    {
      "id": "145808",
      "timestamp": "2012-01-06T19:41:00+00:00",
      "author": "laddanator",
      "content": "\u003e **WHERE** did you find that command line?\n\nI got the commands from here  \n\n[http://www.msfn.org/...le/page__st__40](http://www.msfn.org/board/topic/149675-install-xp-from-a-iso-file/page__st__40 \"External link\")  \n\n5th one down I believe.  \n\nLike I said as long as I follow the 2 part setup, XP loads fine from ISO using the 2 g4d command above and I have a working install on my HD at the end. I was hoping to get this down to a 1 part.  \n\n\u003e That is **NOT** batch language, to write a batch command to be used in a batch .cmd file, ***strangely enough*** ../public/style_emoticons/default/happy22.gif, you need to write it using Batch SYNTAX!\n\nNow that I know this, I\u0027m sure there is no cmd fix for Firadisk. I was hoping basically to take part 2 of the install and have this command load from cmd instead or having to boot back to my USB stick and run the part 2 command from the g4d menu.   \n"
    },
    {
      "id": "145809",
      "timestamp": "2012-01-06T19:45:15+00:00",
      "author": "laddanator",
      "content": "\u003e I think you load firadisk like this  \n\u003e firadiski386devcon install firadiskfiradisk.inf rootfiradisk\n\n\u003cbr /\u003e\n\nI read this and was going to try that command to install firadisk but didn\u0027t see how or the command to rehook the ISO in question like this command  \n\n```\n[/b][b][FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nLike this maybe?  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n```\nfiradiski386devcon   install firadiskfiradisk.inf   rootfiradisknStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "145810",
      "timestamp": "2012-01-06T19:49:36+00:00",
      "author": "steve6375",
      "content": "If you want to install XP in one go from USB, you can try [this method](http://www.rmprepusb.com/tutorials/how-to-install-windows-xp-from-a-bootable-usb-drive \"External link\"). It uses WinPE v3 (Win7PE) to boot to and prepare the hard drive and then runs winnt32.exe to start the setup process.   \n"
    },
    {
      "id": "145811",
      "timestamp": "2012-01-06T19:53:58+00:00",
      "author": "steve6375",
      "content": "```\n\\firadisk\\i386\\devcon   install \\firadisk\\firadisk.inf   root\\firadisk\\nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;\\n\\0\n```\n\n\u003cbr /\u003e\n\nNO - you just need to load the driver. The grub4dos StartOptions command has already set the ISO filename and it is stored in memory - when the firadisk driver loads it will look in memory for a StartOptions command and get and load the specified ISO file automatically.   \n"
    },
    {
      "id": "145812",
      "timestamp": "2012-01-06T19:58:38+00:00",
      "author": "laddanator",
      "content": "\u003e NO - you just need to load the driver. The grub4dos StartOptions command has already set the ISO filename and it is stored in memory - when the firadisk driver loads it will look in memory for a StartOptions command and get and load the specified ISO file automatically.\n\nVery interesting! ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif) I can add this to my presetup.cmd and give it a try  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e firadiski386devcon install firadiskfiradisk.inf rootfiradisk\n\n"
    },
    {
      "id": "145813",
      "timestamp": "2012-01-06T20:05:44+00:00",
      "author": "Wonko the Sane",
      "content": "As expected. ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)  \n\nThe post is this one, I presume:  \n[http://www.msfn.org/...le/page__st__44](http://www.msfn.org/board/topic/149675-install-xp-from-a-iso-file/page__st__44 \"External link\")  \n(strangely enough :wink: post #45 in a thread is at offset #n-1 and thus has an address that ends with \"/page__st__44\")  \n\nSee if this rings any bell:  \n\u003e Hi, I am just dropping in to report that the installation of XP from an ISO, where **both** the mass storage drivers needed by the mobo **and firadisk have been integrated** using nlite, works fine. I built a XP ISO with drivers for all types of Intels ICH7(x) to ICH10(x) controller ( both raid and ahci drivers ), NVidias Nforce7 chipset ( raid and ahci ) and firadisk itself. Then I used the following configuration ( winsetup.lst ) for grub4dos:\n\nThe OP had already the firadisk integrated in the source.  \n\nBut any (senceful) modification won\u0027t allow you to have it not in two parts.  \n\nIn any case you seem like NOT having the basic idea on HOW a XP setup normally works.  \nYou do understand that you boot first time from a (USB) device and second time from another one (the internal disk)?  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145814",
      "timestamp": "2012-01-06T20:06:14+00:00",
      "author": "laddanator",
      "content": "If I set Firadisk up this way **%CDDRIVE%XP** ...does the rootfiradisk part have to be changed?  \n\n\u003cbr /\u003e\n\n**%CDDRIVE%XPFiraDiski386devcon install %CDDRIVE%XPFiraDiskfiradisk.inf rootfiradisk**   \n"
    },
    {
      "id": "145815",
      "timestamp": "2012-01-06T20:14:25+00:00",
      "author": "laddanator",
      "content": "\u003e In any case you seem like NOT having the basic idea on HOW a XP setup normally works.  \n\u003e You do understand that you boot first time from a (USB) device and second time from another one (the internal disk)?\n\nI been install XP before you was born. :wink: I do know this and when I use winsetupfromusb, I always skip the second part and allow the hard drive to boot, but if you allow the hard drive to boot without using this command for firadisk install...setup will fail in gui mode  \n\n**\\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0**   \n\n***I assume firadisk has lost the path to the ISO?***   \n\nThe issue is not that setup has to reboot, my issue is I would like to perform step one from g4d (and needs no more attention from me) and if I am doing something else and the computer reboots, the setup will continue without having to boot the second command from g4d. I am very pleased with winsetupfromusb but I am just trying different methods to hone my skills with Firadisk. Winsetupfromusb has two parts if need be but I never use the second part of install from the winsetup.lst. Xp reboots from the textsetup and goes right into GUI no problem but this doesn\u0027t work with Firadisk at the moment (I am the one at fault, not firadisk)   \n"
    },
    {
      "id": "145818",
      "timestamp": "2012-01-06T20:32:39+00:00",
      "author": "steve6375",
      "content": "The problem is that after the 1st reboot, memory will probably be cleared by the BIOS, hence the need to boot to grub4dos a 2nd time and put the iso path into memory again.  \nMaybe WinVblock could mount the iso or ImDisk but you would have to hard code the filename unless you just look for any file on any drive called say XPUSB\\*.iso ???   \n"
    },
    {
      "id": "145820",
      "timestamp": "2012-01-06T20:42:57+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I been install XP before you was born. :wink:  \nLet me doubt that. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\nWHY, in ***MY*** DAY....:  \n\u003chttp://reboot.pro/1908/\u003e  \n\n\u003cbr /\u003e\n\n\u003e The issue is not that setup has to reboot, my issue is I would like to perform step one from g4d (and needs no more attention from me) and if I am doing something else and the computer reboots, the setup will continue without having to boot the second command from g4d. I am very pleased with winsetupfromusb but I am just trying different methods to hone my skills with Firadisk. Winsetupfromusb has two parts if need be but I never use the second part of install from the winsetup.lst. Xp reboots from the textsetup and goes right into GUI no problem but this doesn\u0027t work with Firadisk at the moment (I am the one at fault, not firadisk)  \nYou are using a ***deviation*** from WinsetupfromUSB, do you understand that the whole idea was to **NOT** needing to remove the USB thingy/change BIOS boot order after first part of the setup?  \nOr, if you prefer, what you need is to have the \"normal\" way (that worked for a few tens thousands of people by now ![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif)):\n\n* Set BIOS boot order to USB\n* Insert the USB thingy\n* Let it boot (twice)\n\nwithout you introducing the \"remove the USB thingy variation\":  \n[http://www.msfn.org/.../page__st__1578](http://www.msfn.org/board/topic/120444-how-to-install-windows-from-usb-winsetupfromusb-with-gui/page__st__1578 \"External link\")  \nonce you solve the **REAL** issue (having the USB thingy stay there) it is **TRIVIAL** to automate the grub4dos menu.lst using the default command or by checking for some .tag files on the target disk (written as a flag to signify that first part of setup has ended successfully).  \n\n\u003cbr /\u003e\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145821",
      "timestamp": "2012-01-06T20:54:58+00:00",
      "author": "laddanator",
      "content": "\u003e You are using a ***deviation*** from WinsetupfromUSB, do you understand that the whole idea was to **NOT** needing to remove the USB thingy/change BIOS boot order after first part of the setup?  \n\u003e Or, if you prefer, what you need is to have the \"normal\" way (that worked for a few tens thousands of people by now\n\nWithout \"deviation\" from the plan how would anything else not be discovered is the real question? I\u0027m sure Albert Einstein, Wright Brothers and few other well know folks \"deviated\" from the plan. What I am saying is, I can boot to my USB stick, run the first part of the winsetupfromusb and once the computer reboots for continuation of setup, I can remove my USB stick and all loads fine. If my computer is set to boot my USB stick after the first part of install, this is my default entree,  \n\n\u003cbr /\u003e\n\n```\ntimeout 15\n\ncolor white/blue\n\nwrite 0x8274 0x2001\n\n\n\ntitle Boot From Hard Drive (Windows Vista/7 or Xp)nBoot Into Main OS Drive\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map () (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) ()\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map --hook\n\nrootnoverify (hd0,0)\n\nchainloader +1 || chainloader /ntldr\n```\n\n\u003cbr /\u003e\n\nso if I leave the room or step out, this will boot the hard drive and setup continues as normal with WSFUSB. Step 2 from winsetup.lst is not needed but my point is Firadisk ISO installs..step 2 is needed to relocate the ISO and I wanted to automate this step without the need to boot back to my USB.  \n\n\u003cbr /\u003e\n\nAs for the link you just posted, you see I responded to the person having the issue and he followed my \"deviation\" and that person reported back successful XP install.   \n"
    },
    {
      "id": "145827",
      "timestamp": "2012-01-06T22:12:32+00:00",
      "author": "steve6375",
      "content": "Well, you could do it using the \u0027default /default\u0027 command in the grub4dos menu. Set the PC to always boot from USB as the first device, then in the first Step 1 menu, set the default to menu item 2, then when it reboots, it will auto run menu 2, in menu 2 set the default to the 3rd menu item which will then force it to boot from the internal hdd.  \nBut won\u0027t you still need to accept the firadisk driver unsigned prompts, etc???   \n"
    },
    {
      "id": "145830",
      "timestamp": "2012-01-06T22:42:07+00:00",
      "author": "laddanator",
      "content": "\u003e But won\u0027t you still need to accept the firadisk driver unsigned prompts, etc???\n\n\u003cbr /\u003e\n\nI installed Home, Pro, and MCE with the Step 1 and 2 commands listed in my fist post and all three loaded fine and I never got the unsigned prompts.   \n"
    },
    {
      "id": "145846",
      "timestamp": "2012-01-07T00:27:45+00:00",
      "author": "laddanator",
      "content": "If I use Imdisk to mount ISO to finish install, would I need to mount as the same drive letter that Firadisk did in the beginning?   \n"
    },
    {
      "id": "145851",
      "timestamp": "2012-01-07T00:51:29+00:00",
      "author": "cdob",
      "content": "\u003e If I use Imdisk to mount ISO to finish install, would I need to mount as the same drive letter that Firadisk did in the beginning?\nNo, drive letter dosn\u0027t matter.  \n\nWhat about XP RAM load approach from msfn.org  \nupdate firadisk driver version  \nset menu.lst: add (99) part and remove --mem   \n"
    },
    {
      "id": "145853",
      "timestamp": "2012-01-07T01:47:53+00:00",
      "author": "laddanator",
      "content": "\u003e What about XP RAM load approach from msfn.org  \n\u003e update firadisk driver version  \n\u003e set menu.lst: add (99) part and remove --mem\n\nYou mean this?  \n\n[http://www.msfn.org/...aded-iso-image/](http://www.msfn.org/board/topic/137714-install-xp-from-a-ram-loaded-iso-image/ \"External link\")  \n\nTried this (I updated the firadisk version) also and works great. The only problem is I was only able to get my ISO size down to 738mb for Home. I use a untouched SP3 source that I slipstream updates with RVM_Integrator_1.6.1b2.1.exe. I use DriverPacks too but with the method in the link, I leave the drivers outside of the ISO to save space and map the DriverPack stuff to load from the USB drive and not ISO. cdob, do you have a link to the method of removing the --mem part?  \n\n\u003cbr /\u003e\n\nDo you mean remove the  \nmap **--mem** (md)0x800+4 (99)  \ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd1) (hd0)  \ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd0) (hd1)  \n\nhere?  \n\n\u003cbr /\u003e\n\n**UPDATE**   \n\n\u003cbr /\u003e\n\nOk, actually got something working here. I modified the XP_INST.IMA from here  \n\n[http://www.msfn.org/...aded-iso-image/](http://www.msfn.org/board/topic/137714-install-xp-from-a-ram-loaded-iso-image/ \"External link\")  \n\nDid this  \n\n```\nexpand.exe SETUP.EX_ setupORG.exe\n```\n\n\u003cbr /\u003e\n\nChanged the name of my ISO in the ISOimage.ini and changed the paths to the ISO in the setup.cmd (Inside the XP_INST_v04.7z) updated Firadisk and changed my menu.lst ..removed the --mem commands as cdob suggested  \n\niftitle \\[find --set-root --devices\u003dh /laddsbootusb.tag \\\u0026\\\u0026 call set USBRoot\u003d%@root\\^%\\] XP Home Setup Part 1 from %USBRoot%nDec 11  \npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.  \nfind --set-root --devices\u003dh /laddsbootusb.tag  \nmap --mem (md)0x800+4 (99)  \ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd1) (hd0)  \ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd0) (hd1)  \nmap /XP/HOME.ISO (222)  \nmap /XP/**XPH_INST.IMA** (fd0)  \nmap /XP/**XPH_INST.IMA** (fd1)  \nmap --harddrives\u003d1  \nmap --hook  \nwrite (99) \\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;floppy,vmem\u003dfind:/XP/**XP_INST.IMA** ;n0  \nrootnoverify (222)  \nchainloader  \n\nNow instead of XP giving me an error about can\u0027t find the SP3 install CD after DP finishes and having to reboot into the USB stick to run part 2...the installs continues as normal. DP does it\u0027s thing, then the GUI kicks in and never misses a beat.  \n\nIf you use the one command above, this one is no longer needed  \n\n**iftitle \\[find --set-root --devices\u003dh /laddsbootusb.tag \\\u0026\\\u0026 call set USBRoot\u003d%@root\\^%\\] XP Home Setup Part 2 from %USBRoot%nDec 11\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\nfind --set-root --devices\u003dh /laddsbootusb.tag\nmap --mem (md)0x800+4 (99)\n# map (hd1) (hd0)\n# map (hd0) (hd1)\ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd0) (hd1)\ncheckrange 0x80 read 0x8280 \\\u0026\\\u0026 map (hd1) (hd0)\nmap --hook\nwrite (99) \\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\nroot (hd0,0)\nchainloader /ntldr\nchainloader (hd0)+1**   \n"
    },
    {
      "id": "145869",
      "timestamp": "2012-01-07T09:46:17+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Without \"deviation\" from the plan how would anything else not be discovered is the real question? I\u0027m sure Albert Einstein, Wright Brothers and few other well know folks \"deviated\" from the plan.  \nSure, but rest assured that they did know what they were doing/experimenting with, and did not do \"random\" things, like using grub4dos syntax in a batch!  \nThe infinite monkey approach is OK ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif), as long as you have INfinite resources, otherways you will need INfinite time to reach your goal. ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)  \n\nThe post you referenced is a report about an user having success in a given context:\n\n* firadisk integrated in source\n* second reboot manually chosen (but still from USB)\n\n\u003cbr /\u003e\n\nIt would seem to me only logical to go in steps like:  \n\n* firadisk integrated\n* second reboot automatically chosen (but still from USB)\n\n\u003cbr /\u003e\n\nThen:  \n\n* firadisk added on the fly\n* second reboot automatically chosen (but still from USB)\n\n\u003cbr /\u003e\n\nThen:  \n\n* firadisk added on the fly\n* second reboot automatically chosen (this time from internal disk)\n\nBut of course it is just me....  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145895",
      "timestamp": "2012-01-07T14:54:33+00:00",
      "author": "laddanator",
      "content": "\u003e Sure, but rest assured that they did know what they were doing/experimenting with, and did not do \"random\" things, like using grub4dos syntax in a batch!\n\nCrazy I know but I like to try all things. I knew going into using that code in a cmd wasn\u0027t going to work most likely, that\u0027s why I started this topic but I have seem to accomplish my goal. By the way I am willing to bet you Albert Einstein and many others didn\u0027t know the exact of everything they were doing...that\u0027s why it\u0027s called experimenting. ![:magic:](http://reboot.pro/public/style_emoticons/default/magic.gif)  \n\nMy problem, I started out having to boot to g4d twice to use Firadisk. First time to locate the ISO and the Second time to relocate the ISO.  \n\nMy solution, I am now able to install all three versions of XP I have from ISO without loading the ISO to ram and only having to boot to g4d menu once. I used part the method from here [http://www.msfn.org/...aded-iso-image/](http://www.msfn.org/board/topic/137714-install-xp-from-a-ram-loaded-iso-image/ \"External link\") and use the attached [XP_INST_v04.7z](http://www.msfn.org/board/index.php?app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d27752 \"External link\") mounted the ****XP_INST.IMA**** file with Imdisk, changed a few things  \n\n**1st. I changed the ISOimage.ini located in the** ****XP_INST.IMA**** **file to match the path of my ISO From the mounted **XP_INST.IMA****   \n\n**2nd. I expanded my setup.exe to setupORG.exe and placed it in the proper folder located in the mounted **XP_INST.IMA****   \n\n**3rd. I added the newest Firadisk ( \u003chttp://reboot.pro/8804/\u003e) drivers and of course deleted the older one from the mounted **XP_INST.IMA**** .  \n\n**4th. I changed the default ISO paths to match my ISO paths in the setup.cmd from the mounted **XP_INST.IMA****   \n\n**5th. Saved and unmounted the **XP_INST.IMA**and renamed it from XP_INST.IMA to HOME.IMA (or whatever version of XP I used) and copied the ISO and IMA to my USB stick**   \n\n**6th. Removed the Second entry in my g4d menu.lst** **as it\u0027s not needed any more(my goal)**   \n\n\u003cbr /\u003e\n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home Setup Part 2 from %USBRoot%nDec 11\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root  --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\n# map (hd1) (hd0)\n\n# map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\n\nroot (hd0,0)\n\nchainloader /ntldr\n\nchainloader (hd0)+1\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n**7th. Changed the first menu.lst entry that installs the XP to match the paths on the USB stick and removed the --map --mem part (Thanks cdob)**   \n\n\u003cbr /\u003e\n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home SP3 Install From ISO From %USBRoot%n\t\t\t\t\t\t\t\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap %USBRoot%/XP/HOME.ISO (222)...no map to mem anymore\n\nmap /XP/Floppy/HOME.IMA (fd0)\n\nmap /XP/Floppy/HOME.IMA (fd1)\n\nmap --harddrives\u003d1\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;floppy,vmem\u003dfind:/XP/Floppy/HOME.IMA;n0\n\nrootnoverify (222)\n\nchainloader (222)/I386/SETUPLDR.BIN\n```\n\n\u003cbr /\u003e\n\nAnd if I have my computer set to boot to USB first, becasue with the method I just listed, not necessary but if I got the USB booting first in Bios and when the first part of my XP installs reboot, I don\u0027t have to be in the room, all is well as my first menu option is on a timer to boot to hard drive  \n\n```\ntimeout 15\n\ncolor white/blue\n\nwrite 0x8274 0x2001\n\n\n\ntitle Boot From Hard Drive (Windows Vista/7 or Xp)nBoot Into Main OS Drive\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map () (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) ()\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map --hook\n\nrootnoverify (hd0,0)\n\nchainloader +1 || chainloader || chainloader /ntldr\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e firadisk integrated in source\n\n\u003cbr /\u003e\n\nI did not slipstream the Firadisk driver into my source but that\u0027s a good idea   \n"
    },
    {
      "id": "145899",
      "timestamp": "2012-01-07T16:29:17+00:00",
      "author": "steve6375",
      "content": "As the HOME.IMA is mapped as a floppy in grub4dos, it should be writeable. So it should be possible to run a *cat --replace* command on the various files to replace the name of the ISO with a different name (as long as the length of the filename is not changed). Would that mean you only need one (or two if different one needed for XP 64 bit) setup.exe???  \n\nFor an AHCI PC, how do you add the AHCI SATA drivers to the XP ISO?   \n"
    },
    {
      "id": "145900",
      "timestamp": "2012-01-07T16:51:37+00:00",
      "author": "steve6375",
      "content": "I tried this using the FiraDisk 1.3.0 F6 disk files and XP SP3 OEM version and it works fine but I still get the \u0027cannot verify driver\u0027 pop-ups during stage 2 - how did you suppress this? Did you have a winnt.sif as well?   \n"
    },
    {
      "id": "145909",
      "timestamp": "2012-01-07T17:32:18+00:00",
      "author": "Wonko the Sane",
      "content": "These makes NO sense to me ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif):  \n\n```\nchainloader /ntldr\n\nchainloader (hd0)+1\n```\n\n\u003cbr /\u003e\n\nYou EITHER chainload ntldr OR chainload the MBR (the implied boot statement will actually boot the latter one).  \n\nalso this one doesn\u0027t sound \"right\" to me:  \n\n```\nchainloader +1 || chainloader || chainloader /ntldr\n```\n\nI read it as: chainload current root (bootsector), if it fails then chainload \"thin air\", if this fails then chainload ntldr. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145913",
      "timestamp": "2012-01-07T18:33:50+00:00",
      "author": "steve6375",
      "content": "This seems to work. ![:beer:](http://reboot.pro/public/style_emoticons/default/beer.gif) .  \nThere is a string in setup.cmd for XP_\\*.ISO,  \n\n```\nif exist c:InstXP_*.ISO set reassign\u003dtrue\n```\n\n\u003cbr /\u003e\n\nso we need to match the string \"XP_X\" so we don\u0027t corrupt this. So the XP ISO files can be called XP_X??.ISO where ?? can be any two characters.  \n\nThis example uses XP_XP2.ISO.  \n\nI tried using %MYISO% in the --replace line but it doesn\u0027t seem to work ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\n```\niftitle [find --set-root --devices\u003dh /INST/XP_XP2.ISO \u0026\u0026 call set USBRoot\u003d%@root^%] XP Pro SP3 Install From ISO From %USBRoot%n\n\nset MYISO\u003dXP_XP2.ISO\t\t\t\t\t\t\t\t\t\t\t\t  \n\nfind --set-root --devices\u003dh /inst/%MYISO%\n\nmap --mem (md)0x800+4 (99)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap %USBRoot%/inst/%MYISO% (222)\n\nmap /inst/XP_INST.IMA (fd0)\n\nmap /inst/XP_INST.IMA (fd1)\n\nmap --harddrives\u003d1\n\nmap --hook\n\n#iso file must always be XP_X??.ISO\n\ncat --number\u003d1  --locatei\u003d\"XP_X\"  --replace\u003d\"XP_XP2.ISO\" (fd0)/setup/isoimage.ini\n\ncat --number\u003d10 --locatei\u003d\"XP_X\"  --replace\u003d\"XP_XP2.ISO\" (fd0)/setup/setup.cmd\n\ncat (fd0)/setup/isoimage.ini\n\npause\n\ncat (fd0)/setup/setup.cmd\n\npause\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/inst/XP_XP2.ISO;floppy,vmem\u003dfind:/inst/XP_INST.IMA;n0\n\nrootnoverify (222)\n\nchainloader (222)/I386/SETUPLDR.BIN\n\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "145915",
      "timestamp": "2012-01-07T18:45:55+00:00",
      "author": "laddanator",
      "content": "\u003e chainloader +1 \\|\\| chainloader \\|\\| chainloader /ntldr\nNot sure how the extra chainloader got there...below is the one I use and it works as in it will boot a Windows 7 or Vista loaded HD or XP loaded HD  \n\n```\ntimeout 15\n\ncolor white/blue\n\nwrite 0x8274 0x2001\n\n\n\ntitle Boot From Hard Drive (Windows Vista/7 or Xp)nBoot Into Main OS Drive\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map () (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) ()\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map --hook\n\nrootnoverify (hd0,0)\n\nchainloader +1 || chainloader /ntldr\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e These makes NO sense to me  \n\u003e chainloader /ntldr  \n\u003e chainloader (hd0)+1\n\nI didn\u0027t make this. I borrowed this command from the link I posted up some. I hear what your saying but it works as like I said before, my grandpa always said if it ain\u0027t broke, don\u0027t fix it! :smile:  \n\n\u003cbr /\u003e\n\n\u003e For an AHCI PC, how do you add the AHCI SATA drivers to the XP ISO?\n\nSlipstream drivers with DriverPacks and check the box to enable txtsetup mode  \n\n\u003cbr /\u003e\n\n\u003e Did you have a winnt.sif as well?\n\nYes....  \n\n```\n[Data]\n\n\tAutoPartition\u003d\"0\"\n\n\tUnattendedInstall \u003d\"Yes\"\n\n\tAutomaticUpdates\u003d\"No\"\n\n\tMsDosInitiated\u003d\"0\"\n\n\n\n[Unattended]\n\n\tUnattendMode\u003d\"FullUnattended\"\n\n\tOEMSkipEula \u003d\"YES\"\n\n\tWaitForReboot\u003d\"No\"\n\n\tUnattendSwitch\u003d\"Yes\"\n\n\tAutoActivate\u003d\"No\"\n\n\tOemPreinstall\u003dYes\n\n\tDriverSigningPolicy\u003dIgnore\n\n\tNonDriverSigningPolicy\u003dIgnore\n\n\n\n[Display]\n\n\tBitsPerPel\u003d16\n\n\tXresolution\u003d800\n\n\tYresolution\u003d600\n\n\tAutoConfirm\u003d1\n\n\n\n[GuiUnattended]\n\n\tDetachedProgram \u003d\"CMD.EXE\"\n\n\tArguments\u003d\"/Q /C FOR %I IN (C D E F G H I J K L M N O P Q R S T U V W X Y Z) DO (IF EXIST %I:OEMOEMAUTO.EXE (START %I:OEMOEMAUTO.EXE) ELSE (FOR /D %J IN (%I:*) DO (IF EXIST %JOEMOEMAUTO.EXE (START %JOEMOEMAUTO.EXE))))\"\n\n\tAdminPassword\u003d*\n\n\tEncryptedAdminPassword\u003d\"NO\"\n\n\tOEMSkipRegional\u003d1\n\n\tTimeZone\u003d35\n\n\tOemSkipWelcome\u003d1\n\n\tAutoLogon\u003d\"Yes\"\n\n\n\n[UserData]\n\n\tProductKey\u003d\n\n\tFullName\u003d\"Owner\"\n\n\tOrgName\u003d\"Home\"\n\n\tComputerName\u003d*\n\n\n\n[TapiLocation]\n\n\tCountryCode\u003d1\n\n\tAreaCode\u003d434\n\n\tDialing\u003d\"Tone\"\n\n\n\n[Identification]\n\n\tJoinWorkgroup\u003d\"WORKGROUP\"\n\n\n\n[Networking]\n\n\t InstallDefaultComponents\u003d\"Yes\"\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e I still get the \u0027cannot verify driver\u0027 pop-ups during stage 2 - how did you suppress this?\n\n\u003cbr /\u003e\n\nNonDriverSigningPolicy\u003dIgnore  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e I tried using %MYISO% in the --replace line and the write line for FiraDisk but it doesn\u0027t seem to work\n\nI can only get a ISO variable to work if I have the path complete with variable at the end...this works but will not change name in the isoimage.ini  \n\nls %USBRoot%/XP/  \nset /p /u Install\u003dPlease Choose Which Version Of XP To Install...(example...Home :  \n\n```\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/%Install%.ISO;floppy,vmem\u003dfind:/XP/HOME.IMA;n0\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nWill not work if I use the %USBRoot% like this  \n\n```\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:%USBRoot%/XP/%Install%.ISO;floppy,vmem\u003dfind:%USBRoot%/XP/HOME.IMA;n0\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "145918",
      "timestamp": "2012-01-07T18:58:31+00:00",
      "author": "steve6375",
      "content": "```\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:%USBRoot%/XP/%Install%.ISO;floppy,vmem\u003dfind:%USBRoot%/XP/HOME.IMA;n0\n\n```\n\nThis won\u0027t work as (hd0,0)/XP/XP_RAM.ISO is not a valid path for a FiraDisk parameter under Windows! The \u0027find\u0027 bit just needs a path and it will \u0027find\u0027 the drive it is on. (hd0,0) is not a valid Windows path anyway.  \n\nBut are you saying that:  \n\n```\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/%Install%.ISO;floppy,vmem\u003dfind:/XP/HOME.IMA;n0\n\n```\n\nworks for you - cos it doesn\u0027t seem to work for me?   \n"
    },
    {
      "id": "145919",
      "timestamp": "2012-01-07T18:59:42+00:00",
      "author": "laddanator",
      "content": "I have a separate ISO for Home, Pro, MCE so I have separate IMA files with the ISO name listed in the isoimage.ini so the write on the fly thing is not that big of issue but I think it would be a good Idea to use if you don\u0027t want the clutter on the USB drive. My layout  \n\n/XP/  \nHOME.ISO  \nPRO.ISO  \nMCE.ISO  \n\n/XP/Floppy/  \nHOME.IMA  \nPRO.IMA  \nMCE.IMA  \n\n/XP/Install/  \nAll of the programs we use..Firefox and so on  \n\n/XP/OEM/  \nDriverPack stuff used for all three ISO to share(cuts down on ISO size. Change the tagfile in the presetup.cmd to find the /XP/OEM folder)   \n"
    },
    {
      "id": "145920",
      "timestamp": "2012-01-07T19:15:01+00:00",
      "author": "laddanator",
      "content": "\u003e This won\u0027t work as (hd0,0)/XP/XP_RAM.ISO is not a valid path for a FiraDisk parameter under Windows! The \u0027find\u0027 bit just needs a path and it will \u0027find\u0027 the drive it is on. (hd0,0) is not a valid Windows path anyway.\n\nRight, but I thought I would give this a whirl (didn\u0027t figure this would work)  \n\n\u003cbr /\u003e\n\n\u003e But are you saying that:  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e write (99) \\[FiraDisk\\]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/%Install%.ISO;floppy,vmem\u003dfind:/XP/HOME.IMA;n0  \n\u003e works for you - cos it doesn\u0027t seem to work for me?\n\n\u003cbr /\u003e\n\nYes like this  \n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home SP3 Install From ISO From %USBRoot%n\t\t\t\t\t\t\t\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root --devices\u003dh /laddsbootusb.tag\n\ndebug off\n\nfind --set-root --devices\u003dh /laddsbootusb.tag\n\nclear\n\nls %USBRoot%/XP/\n\nset /p /u install\u003dEnter XP Version WITH NO .ISO EXTENSION. (ex.HOME ) :\n\nif \"%install%\"\u003d\u003d\"\" echo No iso file specified! \u0026\u0026 configfile /menu.lst\n\nclear\n\nls %USBRoot%/XP/ || echo Cannot find ls %USBRoot%/XP/ !!! \u0026\u0026 pause --wait\u003d3 \u0026\u0026 configfile %USBRoot%/menu.lst\n\necho Loading %USBRoot%/XP/%install%.iso - please wait ...\n\nmap --mem (md)0x800+4 (99)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap %USBRoot%/XP/%INSTALL%.ISO (222)\n\nmap %USBRoot%/XP/%INSTALL%.IMA (fd0)\n\nmap %USBRoot%/XP/%INSTALL%.IMA (fd1)\n\nmap --harddrives\u003d1\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/%INSTALL%.ISO;floppy,vmem\u003dfind:/XP/Floppy/%INSTALL%.IMA;n0\n\nrootnoverify (222)\n\nchainloader (222)/I386/SETUPLDR.BIN\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nYou can use the same Install variable if the IMA name matches the ISO name. That\u0027s what I have done and works fine. Loaded all the version with the above in my menu list   \n"
    },
    {
      "id": "145923",
      "timestamp": "2012-01-07T19:27:10+00:00",
      "author": "Wonko the Sane",
      "content": "@laddanator  \nYou should be CAREFUL and post ONLY the EXACT, SAME files you actually used and not bits and pieces, this only adds to the confusion. ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)  \n\n\u003cbr /\u003e\n\nMaybe you can take some time to \"consolidate\" your experience and then post a complete, exact report of what works for you, so that **steve6375** (or any other willing member) may be able to experiment with your exact settings. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)  \n\nAbout the double chainloader line, the if ain\u0027t broken don\u0027t fix approach it is actually the opposite of experimenting. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "145926",
      "timestamp": "2012-01-07T19:39:12+00:00",
      "author": "laddanator",
      "content": "\u003e You should be CAREFUL and post ONLY the EXACT, SAME files you actually used and not bits and pieces, this only adds to the confusion\n\nTrue...working on the Mustang I built, running in and out posting. I will do a write up when all is done with the best specific way of the method.  \n\n\u003cbr /\u003e\n\n\u003e Maybe you can take some time to \"consolidate\" your experience and then post a complete, exact report of what works for you, so that **steve6375** (or any other willing member) may be able to experiment with your exact settings\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003e About the double chainloader line, the if ain\u0027t broken don\u0027t fix approach it is actually the opposite of experimenting\n\n\u003cbr /\u003e\n\nThis is true also but from the very beginning the command worked so I didn\u0027t find it necessary to fix it. The double chainlaoder is not needed at all, we can agree on that. :smile:   \n"
    },
    {
      "id": "145927",
      "timestamp": "2012-01-07T19:44:37+00:00",
      "author": "laddanator",
      "content": "I actually incorporate the BOOTWS folder into the mix for my new test from winsetupfromusb but I need to ask ilko_t if I can borrow the check range method from his work.   \n"
    },
    {
      "id": "146035",
      "timestamp": "2012-01-08T19:20:53+00:00",
      "author": "laddanator",
      "content": "Running my final test setup now. Will post later as to a detailed conclusion and will post my final menu.lst and so on.   \n"
    },
    {
      "id": "146254",
      "timestamp": "2012-01-11T22:23:14+00:00",
      "author": "laddanator",
      "content": "Ok, here we go. I started this topic because I was trying to turn a two boot to USB process to install XP from ISO into a One boot to USB if need be and through some helpful post I have managed to do so. Also didn\u0027t want to load the whole ISO to ram for small ram machines  \n\nThis is what I started with in my menu.lst  \n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home Setup Part 1 from %USBRoot%nDec 11\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root  --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\nmap /XP/HOME.ISO (222)\n\nmap /XP/firadisk.img (fd0)\n\nmap /XP/firadisk.img (fd1)\n\nmap --harddrives\u003d1\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;floppy,vmem\u003dfind:/XP/firadisk.img;n0\n\nrootnoverify (222)\n\nchainloader\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nand you had to follow a reboot to USB for part two (didn\u0027t like this part)  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home Setup Part 2 from %USBRoot%nDec 11\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root  --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\n# map (hd1) (hd0)\n\n# map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\n\nroot (hd0,0)\n\nchainloader /ntldr\n\nchainloader (hd0)+\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nwell not anymore. I needed a one boot process because of time and I wanted to eliminate confusion for my other techs without having to make sure USB was booted a second time or set all the g4d defaults to boot the second choice and so on. I looked at all links that was available to me and I put them all together to make one project.  \n\nFirst I want to say winsetupfromusb (Thanks ilko_t) is my favorite and the easiest in my opinion and can be found here  \n\n[http://www.msfn.org/...omusb-with-gui/](http://www.msfn.org/...omusb-with-gui/ \"External link\")  \n\nI just wanted a backup option and this method I came up with using Firadisk is the second choice for me.  \n\nFirst I am going to use XP Home as my example but works for Pro and MCE  \n\nSecond, you DO NOT have to change Paths or ISO names from the default ones in cdob, XP_INST.IMA or setup.cmd. Just setup the root of your USB and folder names and ISO names as listed on the post at MSFN from the link at number 2 below. I like to use certain ISO names and folders becasue it keeps the confussion down for me as I have three job titles at my company and things get crazy sometimes.  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n1. I am using a SP3 Disc with all DP and Dec updates slipstream with RyanVM update tool  \n\n2. I download the XP_INST.IMA from here (Thanks cdob) [http://www.msfn.org/...aded-iso-image/](http://www.msfn.org/board/topic/137714-install-xp-from-a-ram-loaded-iso-image/ \"External link\") (expand.exe SETUP.EX_ setupORG.exe explained on first page and is required)  \n\n3.Changed the name of the XP_INST.IMA to HOME.IMA and mounted the IMA with imdisk [http://www.ltr-data.se/opencode.html/](http://www.ltr-data.se/opencode.html/ \"External link\")  \n\n4.Changed the name of the path and ISO file in the ISOimage.ini and it looks like this XPISOHOME.ISO  \n\n5.Changed everything in the setup/setup.cmd to match the paths (not needed if path is set in the ISOimage.ini) but just in case  \n\n```\nset reassign\u003d\n\nif not exist c: set reassign\u003dtrue\n\nif exist c:XPISOHOME.ISO set reassign\u003dtrue\n\nif exist c:XP2003*.ISO set reassign\u003dtrue\n\nif defined reassign if /I %SystemDrive%.\u003d\u003dC:. set reassign\u003d\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nand here  \n\n```\nSET ISOfile\u003d\n\nset ISO_file_search\u003dXPISOHOME.ISO\n\nif exist ISOimage.ini for /f \"eol\u003d;\" %%a in (ISOimage.ini) do if not %%a.\u003d\u003d. set ISO_file_search\u003d%%\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nand here  \n\n```\nrem ISO file added to another ISO image\n\nif not exist V:I386TXTSETUP.SIF if exist V:XPISOHOME.ISO (\n\n(echo. \u0026echo mount ISOfile V:XPISOHOME.ISO) \u003e\u003epresetup.log\n\nset device_ImDisk\u003ddeviceImDisk1\n\nimdisk.exe -a -t file -f V:XPISOHOME.ISO -o ro -m W:\n\necho.\u003e\u003epresetup.log\n\ndir W: \u003e\u003e presetup.log\n\necho.\u003e\u003epresetup.log\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n6.Updated the Firadisk driver from here that\u0027s in the mounted IMA in a folder called firadisk \u003chttp://reboot.pro/8804/\u003e  \n\n7.Updated the imdisk drivers from the mounted IMA in a folder called imdisk file [http://www.ltr-data.se/opencode.html/](http://www.ltr-data.se/opencode.html/ \"External link\")  \n\n8.Saved the changed mounted IMA file  \n\n9.Created folders on my g4d USB Stick /XP/ISO and /XP/Floppy (using the new g4d 12-30-11) [http://code.google.c.../downloads/list](http://code.google.c.../downloads/list \"External link\")  \n\n10.Copied my HOME.IMA (also created PRO.IMA and MCE2005.IMA the same way) to /XP/Floppy and my XP ISO to /XP/ISO  \n\n11. Created a new folder in my BOOTWS folder (winsetupfromusb to check HD number) called FULLISO and copied my modded ?.lst file into. \u003chttp://reboot.pro/12449/\u003e  \n\nThis is what my 4.lst in my /BOOTWS/FULLISO folder looks like (pretty much 2 thorugh 8 will be the same execpt the checkrange numbers and the HD numbers..I am using 4.lst as example because my PC has 3 internal HD)  \n\n```\nset List4\u003d4.lst\n\necho %List4%\n\necho %USBRoot%\n\necho %Offset%\n\necho %XPISO%\n\necho %Image%\n\npause --wait\u003d10 Making Sure Paths Exist...Hit Enter Key At AnyTime\n\nmap --mem (md)0x800+4 (99)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd3)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd2) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd3) (hd2)\n\nmap %USBRoot%/XP/Floppy/%Image% (fd0)\n\nmap %USBRoot%/XP/Floppy/%Image% (fd1)\n\nmap --e820cycles\u003d3\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/ISO/%XPISO%;floppy,vmem\u003dfind:/XP/Floppy/%Image%;n0\n\nrootnoverify (222)\n\nchainloader (222)/I386/SETUPLDR.BIN\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nThis part may or may not be needed and can be \u003d3 or \u003d0  \n\n```\nmap --e820cycles\u003d3\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nUse in my testing to eliminate in case of the black cursor of death  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nIf you notice I set the same variables for the ISO name and IMAGE name so my Home, Pro, and MCE2005 could all use just one /BOOTWS/FULLISO folder and this is my working xpiso.lst which I load from my menu.lst  \n\n```\n##USB XP Menu 2\n\nif exist %USBRoot%/Menu/Splash/xp.xpm.gz set BG\u003d%USBRoot%/Menu/Splash/xpiso.xpm.gz\n\nsplashimage %BG%\n\n\n\n\n\ntitle !USE PARTITION WIZARD FIRST! THIS IS THE FULL ISO INSTALL. SLOWER\n\nroot()\n\n\n\ntitle\n\nroot\n\n\n\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home SP3 Install From ISO From %USBRoot%nDec 11 With Most DriversnThis Is A Little Slower Method\t\t\t\t\t\t\t\t\t\t\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root --devices\u003dh /laddsbootusb.tag\n\nclear\n\nset /p /u Answer\u003dARE YOU SURE YOU WANT TO INSTALL XP HOME SP3...Y or N :\n\nif /i \"%Answer%\"\u003d\u003d\"n\" echo Back To Main Menu! \u0026\u0026 configfile %USBRoot%/Menu/xpiso.lst\n\nset Offset\u003d%USBRoot%/BOOTWS/FULLISO\n\nset XPISO\u003dHOME.ISO\n\nset Image\u003dHOME.IMA\n\nclear\n\nif not exist %USBRoot%/XP/ISO/HOME.ISO echo Can Not Find XP Home. Please Contact Superman \u0026\u0026 pause --wait\u003d10 Going Back To Main Menu \u0026\u0026 configfile %USBRoot%/menu.lst\n\nclear\n\necho Installing XP HOME From %USBRoot%/XP/ISO/%XPISO%\n\necho Loading Files From %Offset%\n\nclear\n\nmap --unmap\u003d0:0xff\n\nmap --unhook\n\nmap %USBRoot%/XP/ISO/%XPISO% (222)\n\nclear\n\n#checkrange 0x00,0x01 read 0x8280 \u0026\u0026 configfile %Offset%/fd.lst\n\ncheckrange 8 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/8.lst\n\ncheckrange 7 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/7.lst\n\ncheckrange 6 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/6.lst\n\ncheckrange 5 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/5.lst\n\ncheckrange 4 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/4.lst\n\ncheckrange 3 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/3.lst\n\ncheckrange 2 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/2.lst\n\n#checkrange 1 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/1.lst\n\nboot\n\n\n\ntitle\n\nroot\n\n\n\n\n\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP MCE SP3 Install From ISO From %USBRoot%nDec 11 With Most DriversnThis Is A Little Slower Method\t\t\t\t\t\t\t\t\t\t\t\t\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root --devices\u003dh /laddsbootusb.tag\n\nclear\n\nset /p /u Answer\u003dARE YOU SURE YOU WANT TO INSTALL XP MCE SP3...Y or N :\n\nif /i \"%Answer%\"\u003d\u003d\"n\" echo Back To Main Menu! \u0026\u0026 configfile %USBRoot%/Menu/xpiso.lst\n\nset Offset\u003d%USBRoot%/BOOTWS/FULLISO\n\nset XPISO\u003dMCE2005.ISO\n\nset Image\u003dMCE2005.IMA\n\nclear\n\nif not exist %USBRoot%/XP/ISO/MCE2005.ISO echo Can Not Find XP MCE2005. Please Contact Superman \u0026\u0026 pause --wait\u003d10 Going Back To Main Menu \u0026\u0026 configfile %USBRoot%/menu.lst\n\nclear\n\necho Installing XP MCE2005 From %USBRoot%/XP/ISO/%XPISO%\n\necho Loading Files From %Offset%\n\nclear\n\nmap --unmap\u003d0:0xff\n\nmap --unhook\n\nmap %USBRoot%/XP/ISO/%XPISO% (222)\n\nclear\n\n#checkrange 0x00,0x01 read 0x8280 \u0026\u0026 configfile %Offset%/fd.lst\n\ncheckrange 8 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/8.lst\n\ncheckrange 7 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/7.lst\n\ncheckrange 6 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/6.lst\n\ncheckrange 5 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/5.lst\n\ncheckrange 4 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/4.lst\n\ncheckrange 3 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/3.lst\n\ncheckrange 2 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/2.lst\n\n#checkrange 1 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/1.lst\n\nboot\n\n\n\ntitle\n\nroot\n\n\n\n\n\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP PRO SP3 Install From ISO From %USBRoot%nDec 11 With Most DriversnThis Is A Little Slower Method\t\t\t\t\t\t\t\t\t\t\t\t\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root --devices\u003dh /laddsbootusb.tag\n\nclear\n\nset /p /u Answer\u003dARE YOU SURE YOU WANT TO INSTALL XP PRO SP3...Y or N :\n\nif /i \"%Answer%\"\u003d\u003d\"n\" echo Back To Main Menu! \u0026\u0026 configfile %USBRoot%/Menu/xpiso.lst\n\nset Offset\u003d%USBRoot%/BOOTWS/FULLISO\n\nset XPISO\u003dPRO.ISO\n\nset Image\u003dPRO.IMA\n\nclear\n\nif not exist %USBRoot%/XP/ISO/PRO.ISO echo Can Not Find XP PRO. Please Contact Superman \u0026\u0026 pause --wait\u003d10 Going Back To Main Menu \u0026\u0026 configfile %USBRoot%/menu.lst\n\nclear\n\necho Installing XP PRO From %USBRoot%/XP/ISO/%XPISO%\n\necho Loading Files From %Offset%\n\nclear\n\nmap --unmap\u003d0:0xff\n\nmap --unhook\n\nmap %USBRoot%/XP/ISO/%XPISO% (222)\n\nclear\n\n#checkrange 0x00,0x01 read 0x8280 \u0026\u0026 configfile %Offset%/fd.lst\n\ncheckrange 8 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/8.lst\n\ncheckrange 7 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/7.lst\n\ncheckrange 6 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/6.lst\n\ncheckrange 5 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/5.lst\n\ncheckrange 4 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/4.lst\n\ncheckrange 3 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/3.lst\n\ncheckrange 2 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/2.lst\n\n#checkrange 1 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/1.lst\n\nboot\n\n\n\n\n\ntitle\n\nroot\n\n\n\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP PRO CORP SP3 Install From ISO From %USBRoot%nDec 11 With Most DriversnThis Is A Little Slower Method\t\t\t\t\t\t\t\t\t\t\t\n\npassword --md5 $1$0$NtEZSDZZ3Hjh6lV5xYzmT/\n\nfind --set-root --devices\u003dh /laddsbootusb.tag\n\nclear\n\nset /p /u Answer\u003dARE YOU SURE YOU WANT TO INSTALL XP HOME SP3...Y or N :\n\nif /i \"%Answer%\"\u003d\u003d\"n\" echo Back To Main Menu! \u0026\u0026 configfile %USBRoot%/Menu/xpiso.lst\n\nset Offset\u003d%USBRoot%/BOOTWS/PROCORP\n\nset XPISO\u003dPROCORP.ISO\n\nset Image\u003dPROCORP.IMA\n\nclear\n\nif not exist %USBRoot%/XP/ISO/PROCORP.ISO echo Can Not Find XP PRO CORP. Please Contact Superman \u0026\u0026 pause --wait\u003d10 Going Back To Main Menu \u0026\u0026 configfile %USBRoot%/menu.lst\n\nclear\n\necho Installing XP PRO From %USBRoot%/XP/ISO/%XPISO%\n\necho Loading Files From %Offset%\n\nclear\n\nmap --unmap\u003d0:0xff\n\nmap --unhook\n\nmap %USBRoot%/XP/ISO/%XPISO% (222)\n\nclear\n\n#checkrange 0x00,0x01 read 0x8280 \u0026\u0026 configfile %Offset%/fd.lst\n\ncheckrange 8 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/8.lst\n\ncheckrange 7 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/7.lst\n\ncheckrange 6 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/6.lst\n\ncheckrange 5 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/5.lst\n\ncheckrange 4 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/4.lst\n\ncheckrange 3 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/3.lst\n\ncheckrange 2 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/2.lst\n\n#checkrange 1 calc *0x475 \u0026 222 \u0026\u0026 configfile %Offset%/1.lst\n\nboot\n\n\n\n\n\ntitle\n\nroot\n\n\n\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] Back To Main Menu\n\nfind --set-root --devices\u003dh /laddsbootusb.tag\n\nclear\n\nset Boot\u003d%USBRoot%/grldr\n\nif not exist %Boot% echo Can Not Find grldr on Root . Please Contact Superman! \u0026\u0026 pause --wait\u003d10 Going Back To Main Menu...Hit Enter At AnyTime \u0026\u0026 configfile %USBRoot%/menu.lst\n\necho Loading grldr Menu From %Boot%\n\nchainloader %Boot%\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nI have tested this on 3 machines plus. One that stood out was an old P3 machine with 128 ram. I install XP ISO using the method I am posting here with one boot from USB, installed slow but installed none the less. Tested on ranges of machines from P3 to Dual Core, memory ranging from 128mb to 4 gig and some machines had 1 internal hard drive and some had 4. All three versions install fine with this method.  \n\nI am also using winnt.sif for each version  \n\n```\n;HOME\n\n;\n\n[Data]\n\n\t\tAutoPartition\u003d\"0\"\n\n\t\tMsDosInitiated\u003d\"0\"\n\n\t\tUnattendedInstall \u003d\"Yes\"\n\n\t\tAutomaticUpdates\u003d\"No\"\n\n\n\n[Unattended]\n\n\t\tUnattendMode\u003d\"FullUnattended\"\n\n\t\tOEMSkipEula \u003d\"YES\"\n\n\t\tWaitForReboot\u003d\"No\"\n\n\t\tUnattendSwitch\u003d\"Yes\"\n\n\t\tAutoActivate\u003d\"No\"\n\n\t\tOemPreinstall\u003d\"Yes\"\n\n\t\tDriverSigningPolicy\u003d\"Ignore\"\n\n\t\tNonDriverSigningPolicy\u003d\"Ignore\"\n\n\n\n[Display]\n\n\t\tBitsPerPel\u003d32\n\n\t\tXresolution\u003d1024\n\n\t\tYresolution\u003d768\n\n\t\tAutoConfirm\u003d1\n\n\n\n[GuiUnattended]\n\n\t\tDetachedProgram \u003d\"CMD.EXE\"\n\n\t\tArguments\u003d\"/Q /C FOR %I IN (C D E F G H I J K L M N O P Q R S T U V W X Y Z) DO (IF EXIST %I:WINSETUPOEMOEMAUTO.EXE (START %I:WINSETUPOEMOEMAUTO.EXE) ELSE (FOR /D %J IN (%I:*) DO (IF EXIST %J%WINSETUPOEMOEMAUTO.EXE (START %J%WINSETUPOEMOEMAUTO.EXE))))\"\n\n\t\tAdminPassword\u003d*\n\n\t\tEncryptedAdminPassword\u003d\"NO\"\n\n\t\tOEMSkipRegional\u003d1\n\n\t\tTimeZone\u003d35\n\n\t\tOemSkipWelcome\u003d1\n\n\t\tAutoLogon\u003d\"Yes\"\n\n\n\n[UserData]\n\n\t\tProductKey\u003d\n\n\t\tFullName\u003d\"Owner\"\n\n\t\tOrgName\u003d\"Home\"\n\n\t\tComputerName\u003d*\n\n\n\n[TapiLocation]\n\n\t\tCountryCode\u003d1\n\n\t\tAreaCode\u003d434\n\n\t\tDialing\u003d\"Tone\"\n\n\n\n[Identification]\n\n\t\tJoinWorkgroup\u003d\"WORKGROUP\"\n\n\n\n[Networking]\n\n\t\t InstallDefaultComponents\u003d\"Yes\"\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nand a DriverPack presetup.cmd. If I am busy and I am installing XP from ISO this is very useful as I don\u0027t need to have USB set to boot in Bios and I can just boot my default HD boot command with a timeout if the computer does boot to USB and my unattended install is not broken. My default menu.lst  \n\n```\n##USB Menu AIO\n\ntimeout 15\n\ncolor white/blue\n\nwrite 0x8274 0x2001\n\n\n\ntitle Boot From Hard Drive (Windows Vista/7 or Xp)nBoot Into Main OS Drive\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map () (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) ()\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map --hook\n\nrootnoverify (hd0,0)\n\nchainloader +1 || chainloader /ntldr\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nSo now if you use this method, you can get rid of the second part install from your menu.lst as listed below  \n\n```\niftitle [find --set-root --devices\u003dh /laddsbootusb.tag \u0026\u0026 call set USBRoot\u003d%@root^%] XP Home Setup Part 2 from %USBRoot%nDec 11\n\npassword --md5 $1$A$hzYlFap3SLNNQ/tA7c3.S.\n\nfind --set-root  --devices\u003dh /laddsbootusb.tag\n\nmap --mem (md)0x800+4 (99)\n\n# map (hd1) (hd0)\n\n# map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/XP/HOME.ISO;n0\n\nroot (hd0,0)\n\nchainloader /ntldr\n\nchainloader (hd0)+1\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nI have not got any errors about driver signing for Firadisk. USB Drive still has to be left in so install will finish but the key here is that a second USB boot IS NOT NEEDED.  \n\nWanted to say thanks, cdob, ilko_t, WonKo the Sane and steve6375  \n\nNow you can use the ask, choose iso method in your menu.lst from here [http://www.rmprepusb.tk/](http://www.rmprepusb.tk/ \"External link\") #43  \n\nThis way you would only have one XP Install menu entry and set your variable according to your %Answer%  \n\nsteve6375 was workng on something to write to the ISOimage.ini on the fly to change the ISO name accordingly (Is this still being worked on?)  \n\nHave not tested this on 64bit XP as to I have been loading XP for 10 years and I have never loaded a 64bit version and I have never seen a customer with a 64bit version.  \n\n\u003cbr /\u003e\n\nTo sum it up. I use complex menu entries and the BOOTWS method because I work on a range of computers but most computers have 1 internal hard drive so I am going to give you a simple menu.lst example below. You don\u0027t need the first boot to HD entry, ( I use it as a out of the room or doing something when computer reboots and I ain\u0027t looking kinda thing and forgot the PC was set to boot to USB)  \n\n```\ntimeout 15\n\ncolor white/blue\n\nwrite 0x8274 0x2001\n\n\n\ntitle Boot From Hard Drive (Windows Vista/7 or Xp)nBoot Into Main OS Drive\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map () (hd1)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) ()\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map --hook\n\nrootnoverify (hd0,0)\n\nchainloader +1 || chainloader /ntldr\n\n\n\ntitle\n\nroot\n\n\n\ntitle XP Home Install From ISO With 1 USB BootnWorks With Low Ram also\n\nfind --set-root /whatereverhere\n\nmap --mem (md)0x800+4 (99)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd1) (hd0)\n\ncheckrange 0x80 read 0x8280 \u0026\u0026 map (hd0) (hd1)\n\nset XPISO\u003dHOME.ISO\n\nset Image\u003dHOME.IMA\n\nmap  /%XPISO% (222)\n\nmap  /%Image% (fd0)\n\nmap /%Image% (fd1)\n\nmap --hook\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/%XPISO%;floppy,vmem\u003dfind:/%Image%;n0\n\nrootnoverify (222)\n\nchainloader\n```\n\n\u003cbr /\u003e\n\nYou can also map --mem the IMA file  \n\n```\nmap --mem  /%Image% (fd0)\n\nmap --mem /%Image% (fd1)\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nAnd there you have it ![Posted Image](http://www.msfn.org/board/public/style_emoticons/default/woot.gif)  \n\n\u003cbr /\u003e\n\n**UPDATE**   \n\nTo clear this up. Nothing special has to be done to the XP ISO or added to the XP ISO. You can use a plain XP or a modded XP. All the files required to make this happen goes on the USB Stick or Drive.   \n"
    },
    {
      "id": "147293",
      "timestamp": "2012-01-28T11:47:17+00:00",
      "author": "steve6375",
      "content": "Hi laddanator  \nTo save me and others some work, could you upload to reboot your HOME.IMA file please?  \nThanks  \nSteve   \n"
    },
    {
      "id": "147297",
      "timestamp": "2012-01-28T13:41:44+00:00",
      "author": "steve6375",
      "content": "\u003e So this should work with any 32-bit XP ISO (Home or Pro). ISO name must begin with XP and must be in \\\\Inst folder  \n\u003e If using a winnt.sif, this should be placed in the root inside XP_INST.IMA. It\u0027s contents could also be modified using more cat --replace lines, for instance you could write in a Product Key for the correct version of XP into the winnt.sif file from within the menu. When writing the winnt.sif file you need to put a long blank line after any line that you might want to --replace - e.g.  \n\u003e\n\u003e ProductID\u003dAAAAA-AAAAA-AAAAA-AAAAA  \n\u003e ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  \n\u003e JoinWorkgroup\u003d\"Workgroup\"  \n\u003e ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;  \n\u003e\n\u003e This allows for a longer string to be --replaced in. So you can simply change settings by changing the grub4dos menu - or even use grub4dos to prompt the user for the settings first (e.g. \u0027What workgroup name do you want\u0027, \u0027What Machine Name do you want\u0027, What User Name\u0027, etc. etc.)  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e Note: A Major limitation with --replace and --locate strings is that they cannot be longer than 16 characters or grub4dos will give an error 30: Invalid argument. So ISO name must be less than 14 characters in total (allowing for \\\\n; at the end).  \nNEWS! Latest chenall build can now have strings in --replace much longer than 16 characters.  \nThis means you can have all the WINNT.SIF settings in the grub4dos menu (or ask the user for them) and then directly replace them using cat.  \n\ne.g.\n\n```\ncat --locatei\u003d\"ComputerName\u003d\" --replace\u003d\"ComputerName\u003d\\\"FREDDDYTHEFISH\\\"\" (fd0)/winnt.sif\n\ncat --locatei\u003d\"OrgName\u003d\" --replace\u003d\"OrgName\u003d\\\"Acme plc\\\"\" (fd0)/winnt.sif\n\n```\n\n\u003cbr /\u003e\n\nSo now you can have just one IMA image file for all XP installs and use the grub4dos menu to choose which ISO you want to install and even ask the user what username and password they want or what computername they want or what partition sizes they want!   \n"
    },
    {
      "id": "147298",
      "timestamp": "2012-01-28T13:55:40+00:00",
      "author": "steve6375",
      "content": "@laddanator - where do you put your winnt.sif file?  \nOK - it goes in the root of the IMA floppy file. ![:loleverybody:](http://reboot.pro/public/style_emoticons/default/loleverybody.gif)   \n"
    },
    {
      "id": "147304",
      "timestamp": "2012-01-28T17:11:13+00:00",
      "author": "laddanator",
      "content": "\u003e @laddanator - where do you put your winnt.sif file?\n\nActually, I put my winnt file in the I386 directory of the ISO and I use an oem scan tool at t39 that chages product key. XP is setup if the winnt file is in the I386 folder that XP uses the info from the winnt for setup.  \n\n\u003cbr /\u003e\n\nThis line is not needed  \n\n```\nfloppy,vmem\u003dfind:/%Image%;n0\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nJust this  \n\n```\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/Inst/%XPISO%;n0\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nThis works better for me  \n\n\u003cbr /\u003e\n\n```\nwrite --offset\u003d0 (fd0)/setup/ISOimage.ini XPISO%XPISO%n;n;n;\n\nwrite --offset\u003d1 (fd1)/setup/ISOimage.ini XPISO%XPISO%n;n;n;\n```\n\n\u003cbr /\u003e\n\nI don\u0027t use default paths but if you do, just ghange the last.  \n\nThis works really well also. Only use the stock firadisk.img and no XP_INST.IMA required  \n\n```\niftitle[if exist %USBRoot%/XP/ISO/HOME.ISO set XPISO\u003d/XP/ISO/HOME.ISO] XP Install From ISOnBoot Once To USBDrive\n\nset fira.opt\u003dcdrom,vmem\u003dfind:%XPISO%;\n\n\n\nfind --set-root --devices\u003dh %XPISO%\n\nmap %USBRoot%%XPISO% (222)\n\nmap --mem %USBRoot%/XP/Floppy/firadisk.img (fd0)\n\nmap --mem %USBRoot%/XP/Floppy/firadisk.img (fd1)\n\nmap --e820cycles\u003d3\n\nmap --hook\n\nclear\n\n%USBRoot%/shifthd.bat\n\ncat --locate\u003d###### --number\u003d1 (fd0)/TXTSETUP.OEM \u003e nul || call :error firadisk.img file error..\n\ncat --locate\u003d###### --number\u003d1 (fd1)/TXTSETUP.OEM \u003e nul || call :error firadisk.img file error..\n\nset offset\u003d%?%\n\nwrite --offset\u003d%offset% (fd0)/TXTSETUP.OEM value\u003dParameters,StartOptions,REG_SZ,\"%fira.opt%\"rn\n\ncat --skip\u003d%offset% --locate\u003d/ --replace\u003d (fd0)/TXTSETUP.OEM\n\nwrite --offset\u003d%offset% (fd1)/TXTSETUP.OEM value\u003dParameters,StartOptions,REG_SZ,\"%fira.opt%\"rn\n\ncat --skip\u003d%offset% --locate\u003d/ --replace\u003d (fd1)/TXTSETUP.OEM\n\necho %List4%\n\necho %XPISO%\n\necho %fira.opt%\n\npause --wait\u003d10 Making Sure Paths Exist...Hit Enter Key At AnyTime\n\nchainloader (222)/I386/SETUPLDR.BIN\n\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nLike before. Change your paths back to default if that\u0027s what you use  \n\nshifthd.bat from ilko_t from MSFN and the fira opt from chenell   \n"
    },
    {
      "id": "147509",
      "timestamp": "2012-02-01T18:20:01+00:00",
      "author": "steve6375",
      "content": "This is an example for installing XP from an ISO using the NEW grldr grub4dos version just made by chenall (1st Feb) as you can have longer --replace strings now. It uses a plain standard **unmodified** XP SP3 Professional ISO file, and can be made to run entirely automatically from a single boot to the USB drive to start it all (if you uncomment WIPE\u003dyes). No shifthd.bat file required.  \nIt uses a special winnt.sif file located in the /Inst folder on the USB boot drive but then modifies it dynamically. This means that you can have XP Home and XP Pro ISOs on the same USB drive, but install it with any settings in Winnt.sif that you like - just change the grub4dos menu settings and have as many menu entries as you like.  \n\nThis is based on cdob\u0027s INST_XP.IMA floppy image (but has latest firadisk files) and has been inspired by laddanator (thanks to both!).  \nSee [http://www.msfn.org/...aded-iso-image/](http://www.msfn.org/board/topic/137714-install-xp-from-a-ram-loaded-iso-image/ \"External link\") for the INST_XP.IMA  \n\n**USB folder contents**   \nInstXPPSP3.iso  \nInstINST_XP.IMA  \nInstwinnt.sif (attached - specially prepared with ;;;;;;;;;;; lines after every parameter line so that *cat --replace* will work correctly!)  \ngrldr (latest version from [http://code.google.c.../downloads/list](http://code.google.com/p/grub4dos-chenall/downloads/list \"External link\"))  \nmenu.lst (as below)  \n\n**To make the INST_XP.IMA**   \n1. Download it from cdob\u0027s post (v05.7z) and mount using ImDisk  \n2. Make a new **winnt.sif** file on the root of the mounted image and add lots of ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; lines to make it approx. 10K long (contents are unimportant!)  \n3. Extract from an 32-bit XP ISO the i386/**setup.ex_** file - expand it using Windows Expand command (**expand setup.ex_ setuporg.exe** ) - place it inside INST_XP.IMA image at **/setup/i386 folder** (i.e. /setup/i386/setuporg.exe inside the INST_XP_IMA folder)  \n4. Unmount the INST_XP.IMA image file and copy it to the USB pen to the Inst folder.  \n\n\u003cbr /\u003e\n\nFor AHCI systems, etc. you will need to integrate the drivers into the ISO.  \n\n```\ntitle NEW XP Pro Install From ISOnRequires a single boot, works for Low Ram systems\n\n#suppress cat addresses on screen, etc.\n\nerrorcheck off\n\ndebug off\n\nmap --unmap\u003d0:0xff\n\nmap --unhook\n\nmap --mem (md)0x800+4 (99)\n\n# set real internal HDD to be hd0 and USB to swap with it...\n\ncheckrange 6:999 calc *0x475 \u0026 0xFF \u0026\u0026 echo \u0026\u0026 pause --wait\u003d10 Found more than 5 hard disks or mass storage devices attached! \u0026\u0026 configfile /menu.lst\n\ncheckrange 5 calc *0x475 \u0026 0xFF \u0026\u0026 set HDCNT\u003d5 \u0026\u0026 set topmap\u003d(hd4)\n\ncheckrange 4 calc *0x475 \u0026 0xFF \u0026\u0026 set HDCNT\u003d4 \u0026\u0026 set topmap\u003d(hd3)\n\ncheckrange 3 calc *0x475 \u0026 0xFF \u0026\u0026 set HDCNT\u003d3 \u0026\u0026 set topmap\u003d(hd2)\n\ncheckrange 2 calc *0x475 \u0026 0xFF \u0026\u0026 set HDCNT\u003d2 \u0026\u0026 set topmap\u003d(hd1)\n\ncheckrange 1 calc *0x475 \u0026 0xFF \u0026\u0026 set HDCNT\u003d1 \u0026\u0026 set topmap\u003d(hd0)\n\nset /a RDSK\u003d%HDCNT% - 1\n\nif %HDCNT%\u003e\u003d2 map (hd0) %topmap%\n\nif %HDCNT%\u003e\u003d2 map (hd1) (hd0)\n\nif %HDCNT%\u003e\u003d3 map (hd2) (hd1)\n\nif %HDCNT%\u003e\u003d4 map (hd3) (hd2)\n\nif %HDCNT%\u003e\u003d5 map (hd4) (hd3)\n\nset USBPTN\u003d(hd%RDSK%,0)\n\n\n\n#\n\n# ---------------- SET XP PARAMETERS HERE -----------\n\nset XPISO\u003dXPPROSP3.ISO\n\nset FN\u003dFreddyFrog\n\nset CN\u003dSS1\n\nset ON\u003dMyOrg\n\nset AP\u003dPWD\n\nset XRES\u003d800\n\nset YRES\u003d600\n\nset BPP\u003d16\n\nset TZ\u003d85\n\nset PKEY\u003dQ9rv4-g448x-f4wjp-f69mx-ybq46\n\nset SYSLOC\u003d00000809\n\nset ULOC\u003d00000809\n\nset ILOC\u003d0809:00000809\n\nset LANG\u003d1\n\n#WIPE\u003dYes set Repartition\u003dYes  Delete ALL partitions on 1st drive, make one large ptn and format it (leaves other drives alone)\n\n#set WIPE\u003dYes\n\n#set AUTOPTN\u003d1\n\n#AutoPartition\u003d1  Installs Windows to 1st available partition that has adequate space for a Windows installation\n\n#\t\t\t\t and does not already contain an installed version of Windows.\n\n\n\n# ----  END OF XP PARAMETERS -----------\n\n#\n\nset Image\u003dInst/XP_INST.IMA\n\nmap /Inst/%XPISO% (222)\n\nmap --mem /%Image% (fd0)\n\nmap --mem /%Image% (fd1)\n\nmap --e820cycles\u003d3\n\nmap --hook\n\nroot %USBPTN%\n\nerrorcheck on\n\ndebug off\n\ndd if\u003d()/Inst/winnt.sif of\u003d(fd0)/winnt.sif\n\nwrite --offset\u003d0 (fd0)/setup/ISOimage.ini Inst%XPISO%rn;\n\n\n\n#ask Q\u0027s here...\n\nset /p ask\u003dWhat Computer Name do you want (use * for random name) (%CN%) :\n\nif NOT \"%ask%\"\u003d\u003d\"\" set CN\u003d%ask%\n\n\n\ncat --locatei\u003d\"ComputerName\u003d\" --replace\u003d\"ComputerName\u003d\"%CN%\"rn;\" (fd0)/winnt.sif \u003e nul\n\ncat --locatei\u003d\"OrgName\u003d\" --replace\u003d\"OrgName\u003d\"%ON%\"rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"FullName\u003d\" --replace\u003d\"FullName\u003d%FN%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"AdminPassword\u003d\" --replace\u003d\"AdminPassword\u003d\"%AP%\"rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"Xresolution\u003d\" --replace\u003d\"Xresolution\u003d%XRES%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"Yresolution\u003d\" --replace\u003d\"Yresolution\u003d%YRES%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"BitsPerPel\u003d\" --replace\u003d\"BitsPerPel\u003d%BPP%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"TimeZone\u003d\" --replace\u003d\"TimeZone\u003d%TZ%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"ProductKey\u003d\" --replace\u003d\"ProductKey\u003d%PKEY%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"SystemLocale\u003d\u003d\" --replace\u003d\"SystemLocale\u003d%SYSLOC%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"UserLocale\u003d\" --replace\u003d\"UserLocale\u003d%ULOC%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"InputLocale\u003d\" --replace\u003d\"InputLocale\u003d%ILOC%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"LanguageGroup\u003d\" --replace\u003d\"LanguageGroup\u003d%LANG%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"Repartition\u003d\" --replace\u003d\"Repartition\u003d%WIPE%rn;\" (fd0)/winnt.sif  \u003e nul\n\ncat --locatei\u003d\"AutoPartition\u003d\" --replace\u003d\"AutoPartition\u003d%AUTOPTN%rn;\" (fd0)/winnt.sif  \u003e nul\n\n\n\ndd if\u003d(fd0)/winnt.sif of\u003d(fd1)/winnt.sif\n\nwrite (99) [FiraDisk]nStartOptions\u003dcdrom,vmem\u003dfind:/Inst/%XPISO%;n0\n\nrootnoverify (222)\n\nclear\n\necho HARD DISK 0\n\necho -----------\n\ngeometry (hd0)\n\necho Found %HDCNT% disks, I have set HDD\u003d(hdd0) and USB boot disk\u003d%topmap%\n\necho\n\necho SETTINGS:\n\necho ---------\n\necho ComputerName\u003d%CN% Organisation\u003d%ON%\n\necho FullName\u003d%FN% AdminPwd\u003d%AP%\n\necho Resolution\u003d%XRES%x%YRES%x%BPP%\n\necho TimeZone\u003d%TZ% ProductKey\u003d%PKEY%\n\necho SystemLocale\u003d%SYSLOC% UserLocale\u003d%ULOC%\n\necho InputLocale\u003d%ULOC% LanguageGroup\u003d%LANG%\n\necho\n\nif /I \"%WIPE%\"\u003d\u003d\"YES\"  echo WARNING: HDD0 ALL PARTITIONS WILL BE ERASED!\n\nif /I \"%AUTOPTN%\"\u003d\u003d\"1\" echo WARNING: Windows will be installed on first non-Windows partition automatically!\n\necho\n\nset /p /u ask\u003dOK to continue (Y/N/Reboot) :\n\nif \"%ask%\"\u003d\u003d\"R\" reboot\n\nif not \"%ask%\"\u003d\u003d\"Y\" configfile %USBPTN%/menu.lst\n\nchainloader +1\n```\n\n\\[Edit\\]used --mem for floppy images as improves speed and does not write directly to the IMA file (thanks laddanator!)\\[/Edit\\]  \n\n#### Attached Files {#attach_wrap}\n\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003da32526fe2e495b6d33439a15ace158af\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d13117 \"Download attachment\") [**winnt.sif.zip**](http://reboot.pro/index.php?s\u003da32526fe2e495b6d33439a15ace158af\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d13117 \"Download attachment\") **1.15KB** 275 downloads\n\n"
    },
    {
      "id": "147511",
      "timestamp": "2012-02-01T18:25:36+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e This is based on cdob\u0027s INST_XP.IMA floppy image (but has latest firadisk files) and has been inspired by laddanator (thanks to both!).  \nSeemingly there is NO floppy image (updated or otherwise) attached to this post, nor links to the base one and to the modified/updates thingies.  \nMaybe it could be of use to fill this gap :smile: (I mean if the idea is to have other people experiment with this approach).  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "147512",
      "timestamp": "2012-02-01T18:43:06+00:00",
      "author": "steve6375",
      "content": "\u003e Seemingly there is NO floppy image (updated or otherwise) attached to this post, nor links to the base one and to the modified/updates thingies.  \n\u003e Maybe it could be of use to fill this gap :smile: (I mean if the idea is to have other people experiment with this approach).  \nNow added.   \n"
    },
    {
      "id": "147515",
      "timestamp": "2012-02-01T19:08:27+00:00",
      "author": "maanu",
      "content": "WIPE\u003dYES is the dangerous switch , noobs like me might hurt their system :smile: . anyways thanks for sharing...   \n"
    },
    {
      "id": "147519",
      "timestamp": "2012-02-01T19:25:30+00:00",
      "author": "steve6375",
      "content": "\u003e WIPE\u003dYES is the dangerous switch , noobs like me might hurt their system :smile: . anyways thanks for sharing...  \nIt is commented out in the example menu I posted. If you uncomment it you will see a warning  \n\nWARNING: HDD0 ALL PARTITIONS WILL BE ERASED!   \n"
    },
    {
      "id": "147522",
      "timestamp": "2012-02-01T20:58:53+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Now added.  \n![:good:](http://reboot.pro/public/style_emoticons/default/good.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "147526",
      "timestamp": "2012-02-01T23:00:27+00:00",
      "author": "laddanator",
      "content": "How in the world did I miss all this. Looks like I got some new reading and experinmenting to do. I got a new one for you guys and will post soon.  \n\n\u003cbr /\u003e\n\nTouches on the same line as below.  \n\n\u003e For AHCI systems, etc. you will need to integrate the drivers into the ISO.\n\n@steve6375 Map to mem would be better for the IMA?  \n\n```\n# ----  END OF XP PARAMETERS -----------\n\n#\n\nset Image\u003dInst/XP_INST.IMA\n\nmap /Inst/%XPISO% (222)\n\nmap --mem /%Image% (fd0)\n\nmap --mem /%Image% (fd1)\n\nmap --e820cycles\u003d3\n\nmap --hook\n\nroot %USBPTN%\n\nerrorcheck on\n\ndebug off\n\ndd if\u003d()/Inst/winnt.sif of\u003d(fd0)/winnt.sif\n\nwrite --offset\u003d0 (fd0)/setup/ISOimage.ini Inst%XPISO%rn;\n```\n\n\u003cbr /\u003e\n\nas in if not mapped to mem the write to the ISOimage will be permanent. Not that it really matters as the next write will over write but I like for nothing to permanent write if I can help it.   \n"
    },
    {
      "id": "147528",
      "timestamp": "2012-02-01T23:19:27+00:00",
      "author": "steve6375",
      "content": "\u003e as in if not mapped to mem the write to the ISOimage will be permanent  \nsure! I was going to test this to see what difference it made. It would be safer and possibly quicker too.   \n"
    },
    {
      "id": "147532",
      "timestamp": "2012-02-02T00:05:01+00:00",
      "author": "laddanator",
      "content": "\u003e It would be safer and possibly quicker too.\n\nSafer and its about a decisecond faster on the ISOimage write (I test weird stuff) but not sure at the the winnt.sif stuff. My quess is that it would be quicker for that also.   \n"
    },
    {
      "id": "147534",
      "timestamp": "2012-02-02T01:17:45+00:00",
      "author": "laddanator",
      "content": "\u003e For AHCI systems, etc. you will need to integrate the drivers into the ISO.\n\nCan also use DPMS folder by chenell  \n\n[http://bbs.wuyou.com....php?tid\u003d197550](http://bbs.wuyou.com/viewthread.php?tid\u003d197550 \"External link\")  \n[http://chenall.net](http://chenall.net \"External link\")  \n\n\u003cbr /\u003e\n\n```\ntitle NEW XP Pro Install From ISOnRequires a single boot, works for Low Ram systems\n\n#suppress cat addresses on screen, etc.\n\nerrorcheck off\n\ndebug off\n\nmap --unmap\u003d0:0xff\n\nmap --unhook\n\nmap --mem (md)0x800+4 (99)\n\n# set real internal HDD to be hd0 and USB to swap with it...\n\ncheckrange 6:999 calc *0x475 \u0026 0xFF \u0026\u0026 echo \u0026\u0026 pause --wait\u003d10 Found more than 5 hard disks or mass storage devices attached! \u0026\u0026 configfile /menu.lst\n\ncheckrange 5 calc *0x475 \u0026 0xFF \u0026\u0026 set HDCNT\u003d5 \u0026\u0026 set topmap\u003d(hd4)\n\ncheckrange 4 calc *0x475 \u0026 0xFF \u0026\u0026 set HDCNT\u003d4 \u0026\u0026 set topmap\u003d(hd3)\n\ncheckrange 3 calc *0x475 \u0026 0xFF \u0026\u0026 set HDCNT\u003d3 \u0026\u0026 set topmap\u003d(hd2)\n\ncheckrange 2 calc *0x475 \u0026 0xFF \u0026\u0026 set HDCNT\u003d2 \u0026\u0026 set topmap\u003d(hd1)\n\ncheckrange 1 calc *0x475 \u0026 0xFF \u0026\u0026 set HDCNT\u003d1 \u0026\u0026 set topmap\u003d(hd0)\n\nset /a RDSK\u003d%HDCNT% - 1\n\nif %HDCNT%\u003e\u003d2 map (hd0) %topmap%\n\nif %HDCNT%\u003e\u003d2 map (hd1) (hd0)\n\nif %HDCNT%\u003e\u003d3 map (hd2) (hd1)\n\nif %HDCNT%\u003e\u003d4 map (hd3) (hd2)\n\nif %HDCNT%\u003e\u003d5 map (hd4) (hd3)\n\nset USBPTN\u003d(hd%RDSK%,0)\n\n%USBPTN%/DPMS/dpms.bat\n\n\n\n#\n\n# ---------------- SET XP PARAMETERS HERE -----------\n\nset XPISO\u003dXPPROSP3.ISO\n\nset FN\u003dFreddyFrog\n\nset CN\u003dSS1\n\nset ON\u003dMyOrg\n\nset AP\u003dPWD\n\nset XRES\u003d800\n\nset YRES\u003d600\n\nset BPP\u003d16\n\nset TZ\u003d85\n\nset PKEY\u003dQ9rv4-g448x-f4wjp-f69mx-ybq46\n\nset SYSLOC\u003d00000809\n\nset ULOC\u003d00000809\n\nset ILOC\u003d0809:00000809\n\nset LANG\u003d1\n\n#WIPE\u003dYes set Repartition\u003dYes  Delete ALL partitions on 1st drive, make one large ptn and format it (leaves other drives alone)\n\n#set WIPE\u003dYes\n\n#set AUTOPTN\u003d1\n\n#AutoPartition\u003d1  Installs Windows to 1st available partition that has adequate space for a Windows installation\n\n#\t\t\t\t\t\t\t\tand does not already contain an installed version of Windows.\n\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nCourse after DPMS bat runs and exits, the next command in the menu.lst below the DPMS command is carried out.   \n"
    },
    {
      "id": "147544",
      "timestamp": "2012-02-02T10:36:36+00:00",
      "author": "steve6375",
      "content": "The problem is DPMS (Driver Pack Mass Storage) builds and maps a mass storage driver as (fd0). This would replace the firadisk XP_INST.IMA which we need to map to fd0 in order to load the ISO file and map it as a CD. We can\u0027t have both!   \n"
    },
    {
      "id": "147563",
      "timestamp": "2012-02-02T15:02:34+00:00",
      "author": "laddanator",
      "content": "\u003e We can\u0027t have both!\n\nThis is true. Since the map is out of sight, then its out of mind. Forgot that the the driver was fd based. Even a map to fd1 wouldn\u0027t solve this issue.  \n\n\u003cbr /\u003e\n\nI get a file not found error with this  \n\n\u003cbr /\u003e\n\n```\nchainloader +1\n```\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nI have always used  \n\n```\nchainloader (222)/I386/SETUPLDR.BIN\n```\n\n\u003cbr /\u003e\n\nI am going to add a pause between each command and see whats causing the file not found error. I am sure its on my end. I use different paths but for testing, I need to use default ones from your above menu.lst   \n"
    },
    {
      "id": "147599",
      "timestamp": "2012-02-02T23:35:16+00:00",
      "author": "steve6375",
      "content": "\u003e This is true. Since the map is out of sight, then its out of mind. Forgot that the the driver was fd based. Even a map to fd1 wouldn\u0027t solve this issue.  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e I get a file not found error with this  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e ```\n\u003e chainloader +1\n\u003e ```\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e I have always used  \n\u003e\n\u003e ```\n\u003e chainloader (222)/I386/SETUPLDR.BIN\n\u003e ```\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e I am going to add a pause between each command and see whats causing the file not found error. I am sure its on my end. I use different paths but for testing, I need to use default ones from your above menu.lst  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\nchainloader +1 will only work if the iso is bootable - maybe you did not create a bootable iso?   \n"
    },
    {
      "id": "147607",
      "timestamp": "2012-02-03T00:26:41+00:00",
      "author": "laddanator",
      "content": "\u003e chainloader +1 will only work if the iso is bootable - maybe you did not create a bootable iso?\n\nVery possible! I changed the way I make the ISO. I was using UltraISO but was having issues so I am using oscdimg which solved the issue (offtopic)  \n\nThe ISO has to continuous if not mapped to ram but I always check with  \n\n[http://wincontig.mdtzone.it/en/](http://wincontig.mdtzone.it/en/ \"External link\")   \n"
    },
    {
      "id": "148159",
      "timestamp": "2012-02-12T14:50:27+00:00",
      "author": "steve6375",
      "content": "Slightly tidier swapping of hd0  \n\n```\n# set real internal HDD to be hd0 and USB to swap with it...\n\nset /a HDCNT\u003d*0x475 \u0026 0xff - 1\n\nset topmap\u003d(hd%HDCNT%)\n\nclear\n\nif %HDCNT%\u003e\u003d1 map (hd0) %topmap% \u0026\u0026 map (hd1) (hd0) \u0026\u0026 echo Mapping (hd0) to %topmap% and (hd1) to (hd0)\n\nif %HDCNT%\u003e\u003d2 map (hd2) (hd1) \u0026\u0026 if %HDCNT%\u003e\u003d3 map (hd3) (hd2) \u0026\u0026 if %HDCNT%\u003e\u003d4 map (hd4) (hd3)  \u0026\u0026 if %HDCNT%\u003e\u003d5 map (hd5) (hd4)\n\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "148171",
      "timestamp": "2012-02-12T17:51:04+00:00",
      "author": "laddanator",
      "content": "I would only add one thing  \n\n# set real internal HDD to be hd0 and USB to swap with it...  \n\n```\ncheckrange 6:999 calc *0x475 \u0026 0xFF \u0026\u0026 echo \u0026\u0026 pause --wait\u003d10 Found more than 5 hard disks or mass storage devices attached! \u0026\u0026 configfile /menu.lst\n\nset /a HDCNT\u003d*0x475 \u0026 0xff - 1\n\nset topmap\u003d(hd%HDCNT%)\n\nclear\n\nif %HDCNT%\u003e\u003d1 map (hd0) %topmap% \u0026\u0026 map (hd1) (hd0) \u0026\u0026 echo Mapping (hd0) to %topmap% and (hd1) to (hd0)\n\nif %HDCNT%\u003e\u003d2 map (hd2) (hd1) \u0026\u0026 if %HDCNT%\u003e\u003d3 map (hd3) (hd2) \u0026\u0026 if %HDCNT%\u003e\u003d4 map (hd4) (hd3)  \u0026\u0026 if %HDCNT%\u003e\u003d5 map (hd5) (hd4)\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "148174",
      "timestamp": "2012-02-12T18:16:18+00:00",
      "author": "steve6375",
      "content": "instead of\n\n```\ncheckrange 6:999 calc *0x475 \u0026 0xFF \u0026\u0026 echo \u0026\u0026 pause --wait\u003d10 Found more than 5 hard disks or mass storage devices attached! \u0026\u0026 configfile /menu.lst\n```\n\ntry using exit instead of configfile\n\n```\ncheckrange 6:999 calc *0x475 \u0026 0xFF \u0026\u0026 echo \u0026\u0026 pause --wait\u003d10 Found more than 5 hard disks or mass storage devices attached! \u0026\u0026 exit\n```\n\n\u003cbr /\u003e\n\n"
    }
  ]
}