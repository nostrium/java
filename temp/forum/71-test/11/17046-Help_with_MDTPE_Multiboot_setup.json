{
  "id": "17046",
  "title": "Help with MDT/PE Multiboot setup",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "156060",
      "timestamp": "2012-06-08T21:03:09+00:00",
      "author": "stephenp1983",
      "content": "I am trying to setup a usb stick with two bootable ISO, and a menu option that lets me select which to boot from. One iso is a win7pe project iso, and the other is a Microsoft Litetouch Deployment MDT boot iso. I am using a grub4dos bootloader and menu.lst to do this.  \n\nThe win7pe iso works as it should, and I am able to boot to the MDT iso and select the OS from the task sequence. The problem seems to be during the first part of the windows setup task. MDT fails with a \"setup was unable to create a new system partition...\" error. If I just create a bootable usb with the MDT or PE Iso seperately (no grub4dos menu) I am able to complete the MDT OS install without any issues.  \n\nMy thought is this has something to do with how the MDT task is setup to image to disk 0 partition 1 or with how grub4dos works. I am open to dropping grub4dos I just need a way to have a menu option that allows me to select one of the two iso\u0027s and complete the task. Below is the content of the grub4dos menu.lst file. Any help would be very much appreciated.  \n\n\u003cbr /\u003e\n\n*default 1*   \n*color NORMAL HIGHLIGHT HELPTEXT HEADING*   \n*splashimage\u003d/fis.xpm.gz*   \n*foreground\u003dFFFFFF*   \n*background\u003d000000*   \n\n*title --- Directly Bootable ISOs ---*   \n*root*   \n\n*# Modify the following entry if it does not boot*   \n*title Boot Menu-v1.9.iso*   \n*find --set-root --ignore-floppies --ignore-cd /mdtx86/menux86.iso*   \n*map --heads\u003d0 --sectors-per-track\u003d0 /mdtx86/menux86.iso (hd32)*   \n*map --hook*   \n*chainloader (hd32)*   \n\n*# Modify the following entry if it does not boot*   \n*title Boot Menu-x64-7.iso*   \n*find --set-root --ignore-floppies --ignore-cd /mdtx64/menux64.iso*   \n*map --heads\u003d0 --sectors-per-track\u003d0 /mdtx64/menux64.iso (hd32)*   \n*map --hook*   \n*chainloader (hd32)*   \n\n*# Modify the following entry if it does not boot*   \n*title Boot Win7PEDMU.ISO*   \n*find --set-root --ignore-floppies --ignore-cd /dmu/Win7PEDMU.ISO*   \n*map --heads\u003d0 --sectors-per-track\u003d0 /dmu/Win7PEDMU.ISO (hd32)*   \n*map --hook*   \n*chainloader (hd32)*   \n"
    },
    {
      "id": "156063",
      "timestamp": "2012-06-08T21:31:24+00:00",
      "author": "steve6375",
      "content": "before the map --hook line, try adding  \n\nmap (hd0) (hd1)  \nmap (hd1) (hd0)   \n"
    },
    {
      "id": "156072",
      "timestamp": "2012-06-09T03:08:20+00:00",
      "author": "stephenp1983",
      "content": "Thanks I\u0027ll give it a shot and let you know if that works.   \n"
    },
    {
      "id": "156231",
      "timestamp": "2012-06-12T14:49:10+00:00",
      "author": "stephenp1983",
      "content": "Steve, thank you very much for the help. This solved the issue, and the whole process is working completely. I really appreciate it.   \n"
    },
    {
      "id": "156232",
      "timestamp": "2012-06-12T14:50:46+00:00",
      "author": "steve6375",
      "content": "Been there myself, done that, got the T-shirt! ![:loleverybody:](http://reboot.pro/public/style_emoticons/default/loleverybody.gif)   \n"
    },
    {
      "id": "156332",
      "timestamp": "2012-06-14T12:06:48+00:00",
      "author": "mlottgie",
      "content": "It\u0027s been a couple of years since I was attempting this myself. But, it came up again recently. Thank you SO MUCH for this solution. Now I finally have a USB stick that can boot to install Centos, Windows XP and 7, and also run my other utilities such as gparted and clonezilla.  \n\nNote this alternative fix from Microsoft when using MDT. This is from the Connect website for MS Solution Accelerators. I have not tried it myself:  \n\nThe error is coming from Windows Setup itself, not from MDT. While we have seen other reports like this, it\u0027s not something we\u0027ve been able to reproduce. Because of issues like this, we have decided to move away from using SETUP.EXE for installing OSes; this change will be present in the next version of MDT which is due in beta within the next couple of months.  \n\nAs a workaround in the short term, you can import Windows 7 without the setup files (just import the install.wim or your custom WIM, but no setup files can exist on the deployment share). When MDT 2012 finds that there are no setup files available, it will fall back to using ImageX to do the OS installation.   \n"
    }
  ]
}