{
  "id": "4260",
  "title": "USB 2.0 + NTFS read/write under DOS",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "31969",
      "timestamp": "2008-03-25T10:20:53+00:00",
      "author": "jezza333",
      "content": "G\u0027day everyone ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)  \n\nI have been browsing these forums for quite a while and reading over posts by members, which have helped me get a better enderstanding of VistaPE and other various \u0027booting methods\u0027. You definitely seem to know a substantial amount about this topic , and I\u0027ve wasted days and had a ton of frustration with inconsistencies and lack of information into what I\u0027ve been researching. I\u0027m hoping some of you chaps could help me out if at all possible. :cool:   \n\nNow to the juice...   \n\nI need to have the following functionality on a bootable USB thumb drive:  \n\n- USB 2.0 speeds  \n- Ability to execute command line utilities and commands \\[DOS shell\\]  \n- NTFS read/write  \n- Partitionable drive  \n\nIt\u0027s just a project I\u0027ve set out to do, and I need a little help. It may seem rediculous, but I use it to backup files off systems which have no boot capability \\[ruined FS, registry, BSOD\u0027s, corrupt MBR/bootector\\]. Transferring many GB\u0027s over USB 1.x takes a VERY LONG time.  \n\nAfter I am able to achieve this, I am also looking at customizing a VistaPE build, while using USB 2.0 during bootup. This will come later though.  \n\n**USB 2.0 speeds**   \n\nThis is the main issue; everything else can be done, although a little slowly. I\u0027ve used two drivers under DOS known as usbaspi.sys \\[detects USB media\\] and di1000dd.sys \\[maps media to drive letters, acoompanies first driver\\]  \n\nInfo on these can be found here: [http://www.computing...orum/13288.html](http://www.computing.net/dos/wwwboard/forum/13288.html \"External link\")  \n\nWhen these are loaded from RAM after a copy from the bootable USB, NTSDOS will not detect and NTS drives on the system. When I load these via a bootable floppy with the USB still connected, two out of three are detected. Seems a little weird, and always booting via floppy to install drivers is just not going to happen in my opinion; it\u0027s too impractical, very slow, prone to corruption and most new systems don\u0027t come with a floppy drive.  \n\nI found an alternative, which I extracted from the XPe SP2 FP 2007 setup, called ufdprep.exe. I tried it under VMWare and it booted without problems, although I\u0027m yet to verify if it runs at USB 2.0 speeds. One hiccup though, it **will** boot if formatted as NTFS, but **won\u0027t** if formatted as FAT32 \\[even though I\u0027ve been able to boot from a FAT32 USB using other bootsectors, and others have had success: [http://www.911cd.net...l\u003dpetousb fat32](http://www.911cd.net/forums//index.php?showtopic\u003d20016\u0026hl\u003dpetousb+fat32 \"External link\")\\]  \n\nNow, if I have a NTFS formatted drive, I either need to have a second partition as FAT16/FAT32 or somehow use DOS commands on a NTFS drive \\[which isn\u0027t possible, is it? :thumbsup:\\]. I tried adding a DOS floppy bootsector to NTLDR \\[which I copied onto the root of the partition I had formatted with ufdprep\\], following the steps in the following two pages as best as I could:  \n\n[http://www.bcpl.net/...-dual-boot.html](http://www.bcpl.net/~dbryan/ntfs-dual-boot.html \"External link\")  \n[http://www.tburke.ne...cking_guide.htm](http://www.tburke.net/info/ntldr/ntldr_hacking_guide.htm \"External link\")  \n\nThe bootsector thinks the floppy drive is where it should be heading to, which in VMWare works, but in reality does not \\[\"Disk I/O error...\"\\]. None of these, either real of virtual, are doing what I want it to do. I want the bootsector to look for the DOS bootdisk files that I have copied onto the second partition on the USB \\[formatted as a FAT variant\\].   \n\nSo I try to install DOS onto the USB\u0027s FAT partition \\[which I had set as active\\] and what do you know, it formats my OS hard drive \\[even though it was NTFS, which I thought it wouldn\u0027t recognise as a valid drive\\]. So, after all my work on this was stored on that HDD, I\u0027m essentially back to square one after an OS reinstall. I really don\u0027t want to try to find out what I had been working with again and start re-fiddling.  \n\n**Ability to execute command line utilities \\[DOS shell\\]**   \n\nNo worries here, I\u0027ve been using HP\u0027s USB Disk Storage Format Tool to write a bootsector/MBR to the drive. After that I just copy over whatever files I want to use and they work fine. The drawback here is no USB 2.0 support, which I\u0027m after.  \n\n**NTFS read/write**   \n\nI have Sysinternals\u0027 NTFSDOS Professional which works under DOS for the most part. The part where it doesn\u0027t work is when I load the USB 2.0 drivers via both methods described above. NTFS partitions are mounted and they are easily accessible if those USB drivers \\[usbaspi.sys and di1000dd.sys\\] aren\u0027t installed beforehand. The system locks up if I try to load those drivers after I have started NTFSDOS Professional.  \n\n**Partitionable drive**   \n\nI have a driver that does this fine, but I have to change drivers back to default consistently to be able to use some tools \\[drive is recognised as \u0027non removable\u0027 when the custom driver is installed\\]. Is there anything out there that will allow me to hotswap drivers or get the drive recognised as a removable disk, yet remain partitionable? \\[The first is the preferrred, as I\u0027m sure Windows makes it completely impossible to partition and access removable drives  \n\n---------------------------------------------------------------------------------------------------------  \n\nSo, after scanning all that mess \\^, any ideas? :tabletalk:   \n\nIf there\u0027s any more info you need, please, just say the word. I should be able to recall most of what I have used. My sincere thanks goes to people who have read this opst, and even moreso to those who are able to throw some ideas out there. :D  \n\n\u003cbr /\u003e\n\nOh, and while I think of it, what\u0027s the difference between a Master Boot Record and Boot Sector? Im under the \\*impression\\* that the MBR resides in the bootsector.... if so, what\u0027s the point of being able to isolate them?  \n\nEDIT: If you have read through the rest of the posts in this thread, you will see that I have solved the problem and created a tutorial on how to achieve the same results yourself. I have attached the tutorial to this post for easy access :D  \n\n#### Attached Files {#attach_wrap}\n\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003dca02bde4f640d6b51d7617064b8d48f9\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d4860 \"Download attachment\") [**howto_updated.zip**](http://reboot.pro/index.php?s\u003dca02bde4f640d6b51d7617064b8d48f9\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d4860 \"Download attachment\") **29.73KB** 2463 downloads\n\n"
    },
    {
      "id": "31973",
      "timestamp": "2008-03-25T11:46:52+00:00",
      "author": "was_jaclaz",
      "content": "Ok, i\u0027ve read your post and completey failed to understand it. ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \n\nufdprep.exe is AFAIK NOT a DOS driver, rather a USB stick formatting utility:  \n[http://ubcd4win.com/...?showtopic\u003d6242](http://ubcd4win.com/forum/index.php?showtopic\u003d6242 \"External link\")  \n\nIn order to boot DOS, the partition on the USB stick needs to be formatted as either FAT16 or FAT32.  \n\nThe best DOS disk containing USB dos drivers can be found here:  \n[http://johnson.tmfc....dos/usbdrv.html](http://johnson.tmfc.net/dos/usbdrv.html \"External link\")  \n\nWhether they support USB 2.0 speed, I cannot say.  \n\nYou can experiment using grub4dos to load a floppy image containing those drivers and the Avira NTFS4DOS ones, INSTEAD of the Sysinternals one:  \n[http://free-av.com/e...s_personal.html](http://free-av.com/en/tools/11/avira_ntfs4dos_personal.html \"External link\")  \n\n\u003e Oh, and while I think of it, what\u0027s the difference between a Master Boot Record and Boot Sector? Im under the \\*impression\\* that the MBR resides in the bootsector.... if so, what\u0027s the point of being able to isolate them?\nYou won\u0027t get very far until you do not understand fully the difference between the MBR (Master Boot Record) and Boot Sector.  \n\nThe MBR is the first sector of a (partitioned) device.  \nThe boot sector is first sector of any partition (or volume) inside the partitioned device.  \n\nThe MBR is generally speaking filesystem and operating system independent, it\u0027s business is to load the boot sector of the active partition.  \n\nThe boot sector is filesystem AND operating system dependent.  \n\nRead these pages:  \n[http://thestarman.pc.../mbr/index.html](http://thestarman.pcministry.com/asm/mbr/index.html \"External link\")  \n[http://www.ranish.com/part/primer.htm](http://www.ranish.com/part/primer.htm \"External link\")  \n\nThe limit within 2K/XP is that a device seen as \"removable\" can be a partitioned one but ONLY one partition (the active one) wil be visible/accessible from within the 2K/XP OS.  \nYou can use a filter driver, either the Hitachi Microdrive Filter cfadisk.sys or Anton Bassov\u0027s dummydisk.sys.  \nWhen booted with DOS or Linux, all partitions will be visible/accessible anyway.  \n\njaclaz   \n"
    },
    {
      "id": "31978",
      "timestamp": "2008-03-25T12:30:21+00:00",
      "author": "jezza333",
      "content": "\u003e Ok, i\u0027ve read your post and completey failed to understand it. ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)\n\nHaha, I thought it would be impossible to understand ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)   \n\n\u003e ufdprep.exe is AFAIK NOT a DOS driver, rather a USB stick formatting utility:  \n\u003e [http://ubcd4win.com/...?showtopic\u003d6242](http://ubcd4win.com/forum/index.php?showtopic\u003d6242 \"External link\")\n\nI was under the impression it wrote a USB 2.0 component to the disk somewhere, not creating DOS files. After a little re-reading, it appears that I was mistaken. It\u0027s just a bootsector write utility, which isn\u0027t much of a help when I look at it now because I already use the HP utility to write them when I boot to DOS. I think I am understanding things a little better than I was previously; in hindsight some of my previous ideas about methods of booting don\u0027t make sense. :cool:  \n\nHere\u0027s a PDF which addresses the subject, although I think I need to dig up XPe to follow it through: [http://pheatt.empori...SB_Bootable.pdf](http://pheatt.emporia.edu/projects/bootable/Windows_USB_Bootable.pdf \"External link\")  \n\n\u003e In order to boot DOS, the partition on the USB stick needs to be formatted as either FAT16 or FAT32.  \n\u003e\n\u003e The best DOS disk containing USB dos drivers can be found here:  \n\u003e [http://johnson.tmfc....dos/usbdrv.html](http://johnson.tmfc.net/dos/usbdrv.html \"External link\")  \n\u003e\n\u003e Whether they support USB 2.0 speed, I cannot say.\n\nWell, I\u0027m aware that DOS cannot be loaded unless it\u0027s on a FAT16 or FAT32 partition, so we\u0027re on the same level there. I can virtually guarantee that I\u0027ve tried all DOS based USB 2.0 drivers \\[USB 1.x is not needed as I\u0027m already able to boot from the drive\\] :cool:   \n\n\u003e You can experiment using grub4dos to load a floppy image containing those drivers and the Avira NTFS4DOS ones, INSTEAD of the Sysinternals one:  \n\u003e [http://free-av.com/e...s_personal.html](http://free-av.com/en/tools/11/avira_ntfs4dos_personal.html \"External link\")\n\nYep, tried that one too. It can\u0027t find NTFS partitions either...  \n\n@Active NTFS reader \\[[http://www.ntfs.com/products.htm](http://www.ntfs.com/products.htm \"External link\")\\] CAN read NTFS partitions when that USB 2.0 driver had been installed, but the interface is so extremely slow \\[it scans every folder opened, and takes the same length of time on each one regardless of contents\\] that it\u0027s not really a help in this case.  \n\n\u003e You won\u0027t get very far until you do not understand fully the difference between the MBR (Master Boot Record) and Boot Sector.  \n\u003e\n\u003e The MBR is the first sector of a (partitioned) device.  \n\u003e The boot sector is first sector of any partition (or volume) inside the partitioned device.  \n\u003e\n\u003e The MBR is generally speaking filesystem and operating system independent, it\u0027s business is to load the boot sector of the active partition.  \n\u003e\n\u003e The boot sector is filesystem AND operating system dependent.  \n\u003e\n\u003e Read these pages:  \n\u003e [http://thestarman.pc.../mbr/index.html](http://thestarman.pcministry.com/asm/mbr/index.html \"External link\")  \n\u003e [http://www.ranish.com/part/primer.htm](http://www.ranish.com/part/primer.htm \"External link\")\n\nAh excellent, gotcha! ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)   \n\n\u003cbr /\u003e\n\n\u003e The limit within 2K/XP is that a device seen as \"removable\" can be a partitioned one but ONLY one partition (the active one) wil be visible/accessible from within the 2K/XP OS.  \n\u003e You can use a filter driver, either the Hitachi Microdrive Filter cfadisk.sys or Anton Bassov\u0027s dummydisk.sys.  \n\u003e When booted with DOS or Linux, all partitions will be visible/accessible anyway.\n\nYep, I\u0027m already clued in there. I\u0027ll take a look at dummydisk and see if there\u0027s any difference \\[I\u0027ve already used the Microdrive driver which I edited\\]. ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)  \n\n\u003cbr /\u003e\n\nIn summary of my above post, all I want to do is add USB 2.0 functionality and boot to DOS on a partition I have on the flash drive. I have read though quite a few posts on the 911 and Boot-land forums and don\u0027t seem to have any definitive answer, only confusing the matter. :cool:   \n\nThanks for your fast reply mate, you come highly recommended and seem to know your business. Cheers ![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)  \n\n\u003cbr /\u003e\n\nI think I\u0027m off to take a deeper lok at that PDF.   \n"
    },
    {
      "id": "31981",
      "timestamp": "2008-03-25T14:11:25+00:00",
      "author": "was_jaclaz",
      "content": "\u003e Yep, tried that one too. It can\u0027t find NTFS partitions either...\nHmmmm....  \n\nThe missing point is most probably a limit/problem in DI1000DD, similar to the one with FAT16/32 reported on the given link:  \n[http://johnson.tmfc....dos/usbdrv.html](http://johnson.tmfc.net/dos/usbdrv.html \"External link\")  \n\nIf you are going to use XP Embedded, you might as well have a shot at a \"more affordable\" PE based system, like any of the small sized projects created with winbuilder, like Native_ex based ones.  \n\nA smallish, command line only (CMD.EXE as shell) PE build should be in the 30รท45 Mbytes range.  \n\nIf you like to experiment, you can have a try with the (still VERY experimental) XPcli:  \n[http://www.boot-land...?showtopic\u003d3717](http://www.boot-land.net/forums/index.php?showtopic\u003d3717 \"External link\")  \nthere is not (yet ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif) ) \"official\" USB booting support, but it should be just a matter of adding USB drivers and the entries by Dietmar:  \n[http://www.911cd.net...showtopic\u003d21242](http://www.911cd.net/forums//index.php?showtopic\u003d21242 \"External link\")  \n\njaclaz   \n"
    },
    {
      "id": "32006",
      "timestamp": "2008-03-25T21:23:11+00:00",
      "author": "jezza333",
      "content": "\u003e Hmmmm....  \n\u003e\n\u003e The missing point is most probably a limit/problem in DI1000DD, similar to the one with FAT16/32 reported on the given link:  \n\u003e [http://johnson.tmfc....dos/usbdrv.html](http://johnson.tmfc.net/dos/usbdrv.html \"External link\")\n\nAt first that\u0027s what I thought the problem could be until I eliminated it completely and the only variable was the usbaspi.sys driver \\\u003e I copied all the needed files to a ramdisk, then called ctload to install the drivers \\[adding them in config.sys wasn\u0027t working because the USB became unmapped and it couldn\u0027t load the rest of the files\\] \\\u003e so no command interpreter or DI1000DD.sys, so the drive couldn\u0027t be re-mapped. I loaded usbaspi.sys when on the ramdisk, then immediately after ran NTFSDOS Professional and also tried NTFS4DOS. Same problem, so that eliminates the drive letter mapping driver as the cause.  \n\nI strongly suspect the driver is somehow writing something to memory which affects the other storage drives on the system, not just the USB flash drive. There are a number of switches that usbaspi accept, one supposedly being the /L switch. This is representative of LUN, which I read to be the number of devices the driver should install the diver for. I tried adding a number after the switch, according to the documentation found on the net, but it doesn\u0027t accept it. This is the best resource I have found on it: [http://jedlik.vein.h...susb/readme.txt](http://jedlik.vein.hu:60080/dos/drivers/dosusb/readme.txt \"External link\")  \n\n\u003e /l# Luns, to specify highest number of LUN assigned, default /L0\n\nWeird... any ideas? ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)   \n\n\u003e If you are going to use XP Embedded, you might as well have a shot at a \"more affordable\" PE based system, like any of the small sized projects created with winbuilder, like Native_ex based ones.  \n\u003e\n\u003e A smallish, command line only (CMD.EXE as shell) PE build should be in the 30รท45 Mbytes range.  \n\u003e\n\u003e If you like to experiment, you can have a try with the (still VERY experimental) XPcli:  \n\u003e [http://www.boot-land...?showtopic\u003d3717](http://www.boot-land.net/forums/index.php?showtopic\u003d3717 \"External link\")  \n\u003e there is not (yet :cool: ) \"official\" USB booting support, but it should be just a matter of adding USB drivers and the entries by Dietmar:  \n\u003e [http://www.911cd.net...showtopic\u003d21242](http://www.911cd.net/forums//index.php?showtopic\u003d21242 \"External link\")\n\nAh nice, I might take a look. Thanks ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)  \n\nEDIT: The second link seems to be broken, but the first definitely looks interesting. Cheers ![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)  \n\nEDIT 2: Well, I took a look and tried 3 methods of building one. The first attemt was the batch file \\[[911 thread here](http://www.911cd.net/forums//index.php?showtopic\u003d20870\u0026view\u003dfindpost\u0026p\u003d140543 \"External link\")\\] which fetched the necessary files from the setup CD and copied the other files from the system. I tried to boot it up, but it was missing biosinfo.inf \\[/windows/inf folder wasn\u0027t there at all\\]. I found a few on my system \\[all the same size, some were in the Winbuilder directory\\] and it just gave me a bluescreen and got into a reboot loop.   \n\nThe second one got me nowhere, built from the winbuilder script posted at the end of the main thread: \\[[Boot-land post](http://www.boot-land.net/forums/index.php?showtopic\u003d3717\u0026view\u003dfindpost\u0026p\u003d31693 \"External link\")\\]  \n\nThe third was your post \\[[http://www.boot-land...ndpost\\\u0026p\u003d27822\\]](http://www.boot-land.net/forums/index.php?showtopic\u003d3717\u0026view\u003dfindpost\u0026p\u003d27822] \"External link\"), but I\u0027m still not able to get a working build running. I\u0027ve copied the files onto my flash drive and started VMWare using a physical disk \\[as I have done in the past, so I know it works :D\\]. I first got a DLL not found error, and subsequently I have blue screens. No errors were found in the log created by your command/batch file, so I have no clue what I\u0027m doing wrong...  \n\nI apologise for my lack of understanding with these matters, I guess I just haven\u0027t been shown before ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png) .   \n"
    },
    {
      "id": "32031",
      "timestamp": "2008-03-26T08:45:02+00:00",
      "author": "was_jaclaz",
      "content": "\u003e I loaded usbaspi.sys when on the ramdisk, then immediately after ran NTFSDOS Professional and also tried NTFS4DOS. Same problem, so that eliminates the drive letter mapping driver as the cause.\nNo, sorry, but that proves nothing, USBASPI is a USB controller driver, you need to give it a USB DEVICE driver, DI1000DD.sys, USBCD.sys, njusbcda.sys, NJ32DISK.SYS or whatever, otherwise NO drive can be found.  \n\nI\u0027ll rephrase:  \n1) Instead of Xp embedded, try with any of the Native_ex based projects, they are all tested and working.  \n2) If you want to experiment, have a look at this UNTESTED on USB idea, XPcli  \n3) If you are going down path #2, you will need to add to it USB support, by ADDING yourself the USB drivers AND trying the changes on USB drivers booting order section, detailed on Dietmar\u0027s Tutorials, which you can find in his signature  \n\nIn other words:  \n1) Forget using DOS for USB 2.0 speed  \n2) Forget about XP embedded  \n3) Forget about the experimental builds I linked you to  \n4) Try using Winbuilder and the Native_ex project(s) to build a minimal USB booting PE:  \n[http://www.boot-land...s/?showforum\u003d52](http://www.boot-land.net/forums/?showforum\u003d52 \"External link\")  \n[http://www.boot-land...?showtopic\u003d2376](http://www.boot-land.net/forums/index.php?showtopic\u003d2376 \"External link\")  \nonce, ***and only once*** , you have succeeded building the latter, you may want to try the smallest possible build:  \n[http://www.boot-land...?showtopic\u003d3910](http://www.boot-land.net/forums/?showtopic\u003d3910 \"External link\")  \ncustomizing it to your needs.  \n\njaclaz   \n"
    },
    {
      "id": "32035",
      "timestamp": "2008-03-26T09:47:36+00:00",
      "author": "jezza333",
      "content": "\u003e No, sorry, but that proves nothing, USBASPI is a USB controller driver, you need to give it a USB DEVICE driver, DI1000DD.sys, USBCD.sys, njusbcda.sys, NJ32DISK.SYS or whatever, otherwise NO drive can be found.\n\nAh, how would a USB device driver map a HDD formatted with NTFS? The device driver in this case only maps FAT and FAT32 partitions... ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)  \n\nI have tested a USB 1.x driver, just to see if they work at all, and they did. I ran two tests:   \n\n1) I ran NTFSPRO just after the controller driver was installed, and before I installed the device driver. It picked up NTFS drives fine  \n2) I installed the controller driver and device driver, and then ran NTSPRO. It detected them fine also.  \n\nI\u0027m 101% convinced it\u0027s a problem with that controller driver. There are a few others, but they\u0027re only USB 1.x; the Panasonic driver \\[usbaspi - USB 2.0\\] is reported to be the best and support the broadest range of drives, not to mention support the fastest speeds, so that\u0027s what my tests have been using ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)  \n\n\u003e I\u0027ll rephrase:  \n\u003e 1) Instead of Xp embedded, try with any of the Native_ex based projects, they are all tested and working.\nYep, I\u0027ve been looking into Native_ex for a few hours. Cheers ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)   \n\n\u003e 2) If you want to experiment, have a look at this UNTESTED on USB idea, XPcli\nWell, you tested it and had success, along with almost every other member who posted in that thread. I wouldn\u0027t exactly call that \u0027untested\u0027, but I still failed horribly at an attempt anyway, which proves your point :cool:   \n\n\u003e 3) If you are going down path #2, you will need to add to it USB support, by ADDING yourself the USB drivers AND trying the changes on USB drivers booting order section, detailed on Dietmar\u0027s Tutorials, which you can find in his signature\nSure thing, I didn\u0027t notice them. Thanks for the pointer ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)   \n\n\u003e In other words:  \n\u003e 1) Forget using DOS for USB 2.0 speed  \n\u003e 2) Forget about XP embedded\nI guess I knew that was coming, not a worry though; as you have shown me some very valid alternatives that should do the trick just fine  \n\n\u003e 3) Forget about the experimental builds I linked you to\nOK, thanks for linking them in the first place though... :cool:  \n\n\u003e 4) Try using Winbuilder and the Native_ex project(s) to build a minimal USB booting PE:  \n\u003e [http://www.boot-land...s/?showforum\u003d52](http://www.boot-land.net/forums/?showforum\u003d52 \"External link\")  \n\u003e [http://www.boot-land...?showtopic\u003d2376](http://www.boot-land.net/forums/index.php?showtopic\u003d2376 \"External link\")  \n\u003e once, ***and only once*** , you have succeeded building the latter, you may want to try the smallest possible build:  \n\u003e [http://www.boot-land...?showtopic\u003d3910](http://www.boot-land.net/forums/?showtopic\u003d3910 \"External link\")  \n\u003e customizing it to your needs.\nGotcha. I\u0027ll fiddle around and see what I can come up with. Thanks for your replies mate, much appreciated ! ![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)   \n"
    },
    {
      "id": "32044",
      "timestamp": "2008-03-26T12:52:45+00:00",
      "author": "powaking",
      "content": "USB 2.0 speeds at bootup is not really dependent on the actual USB device but the speed the BIOS gives the port at bootup.   \nCase in point I can bootup VistaPE on my Cruzer Micro USB thumb drive on an HP NC6000 and boots up as fast if not SLOWER as booting from a CD.   \nOn a Dell D620 machine I get to the desktop in about 26 seconds. In this area your mileage will vary for sure.   \n"
    },
    {
      "id": "32047",
      "timestamp": "2008-03-26T13:27:41+00:00",
      "author": "jezza333",
      "content": "\u003e USB 2.0 speeds at bootup is not really dependent on the actual USB device but the speed the BIOS gives the port at bootup.\n\nWell yeah, in my case the BIOS selects USB 1.x, when the system is definitely capable of 2.0... ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \n\n\u003cbr /\u003e\n\n**@jaclaz:** EDIT: I built NativeEx_barebone and have a working ISO, 20MB, all I need are a few drivers to remove the BSODs using USB boot... Is there a way to access the HDDs on the system? The ramdrive is the only accessible drive...  \n\nI know this question is OT, but how on earth do I install EWF? Searches turn up relatively little, and Dietmar mentions it as being important to preserve the life of flash media... From the looks of it I need some XPe files, correct? I don\u0027t want to kill my drives if I can help it ![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)  \n\nEDIT 2: Well, that\u0027s it I guess. Dietmar\u0027s posts are packed with information, but I have NO CLUE as to how it all ties in. No offense to him, but his English grammatical structure is impossible for me to make sense of. A ton of info, just no idea how to implement it.  \n\nIt just seems like the original idea of using a single driver, which doesn\u0027t happen to function as expected, will cause me to go extravagant measures just to get USB 2.0 speeds. I could spend countless days trying to make head and tail of everything, like I already have; unless it\u0027s just an easy step then for the moment I\u0027m just going to drop it for a few days. I don\u0027t have the motivation presently to try to extract 100\u0027s of pieces of information from everywhere it could possibly be spread to.... Sorry. ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)   \n\nThanks for the help mate. ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)   \n"
    },
    {
      "id": "32065",
      "timestamp": "2008-03-26T16:46:19+00:00",
      "author": "was_jaclaz",
      "content": "For the record:  \nEWF is NEEDED if you format the stick as NTFS (due to the semi-journaling features of this filesystem), if you have FAT16 or FAT32 you have NOTHING to worry if using a PE based build, that won\u0027t right anything to it.  \n\nI am not expert on Native_ex, but surely there is already a way to put it on a USB stick, a tested and working one, I mean.  \n\nDo post a request for help in the sub-forum:  \n[http://www.boot-land...s/?showforum\u003d52](http://www.boot-land.net/forums/?showforum\u003d52 \"External link\")  \nPeter (psc) or someone else will definitely help you. ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \n\njaclaz   \n"
    },
    {
      "id": "32081",
      "timestamp": "2008-03-26T23:01:20+00:00",
      "author": "jezza333",
      "content": "Well, things are looking fairly sweet at the moment. Last night I managed to find a different version of Iomega\u0027s aspiehci.sys, which, when installed after ntfspro is launched, both still work correctly. I am then able to map drives using di1000dd.sys without issues. \\[if I try to load ntfsdos AFTER the driver is installed, I get the same problem as before. Panasonic\u0027s usbaspi.sys \\[universal, supposedly the best\\] locks up/reboots my machine if I try this method\\]  \n\nSo I have achieved what my initial objective was, and that\u0027s a very cool thing in itself, especially when things didn\u0027t want to work together \\[and using DOS after all :D\\]. The two things now working under DOS, together are:  \n\n- USB 2.0 speeds  \n- NTFS read/write  \n\nI\u0027m still very interested in getting into building PEs, but a little busy at the moment. I\u0027ll take a look and call on advice if \\[and when :thumbsup:\\] I need it. Cheers mate, you have been a massive help ! ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png) ![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)   \n"
    },
    {
      "id": "32115",
      "timestamp": "2008-03-27T18:58:56+00:00",
      "author": "was_jaclaz",
      "content": "Care to share some info in this \"particular\" version of Iomega drivers?  \n\nLike version, where did you find it and so on? ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \n\nCan you also confirm that aspiehci.sys is USB 2.0?  \n\njaclaz   \n"
    },
    {
      "id": "32119",
      "timestamp": "2008-03-27T22:29:36+00:00",
      "author": "jezza333",
      "content": "\u003e Care to share some info in this \"particular\" version of Iomega drivers?  \n\u003e\n\u003e Like version, where did you find it and so on?\n\nWell I grabbed it off a torrent with a ton of DOS boot materials in it \\[all legitimate though, no illegal business\\], and started testing all 8 or so drivers that were included in it. Most were USB 1.x, so I excluded them. The **only** one that works with NTFS software/drivers under DOS is aspiehci.sys \\[only from my testing\\]. For those interested, I don\u0027t know if it\u0027s the latest version, but it works and the other version I tested earlier took a long time to detect the drive and I couldn\u0027t map the FAT partitions on my USB drive \\[errors with the subsequent driver\\]  \n\n**Here\u0027s its info:** Iomega ASPI USB-EHCI 1.0 V.13 09 May 2003  \n**Switches I used:** /all /int  \n\nthe /all switch is used to detect all USB drives possible, not just Iomega drives. Not sure what the /int switch is for, but it\u0027s used in the official config.sys in Iomega\u0027s bootdisk, so I\u0027ve used it. The second driver \\[ASPI Storage block device driver/mapping drives to letters\\] is made by Motto Hairu \\[most peeps have never heard of them\\]. I can attach/upload them if you\u0027d like me to ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \n\n\u003e Can you also confirm that aspiehci.sys is USB 2.0?\n\nAbsolutely, the results between standard initialisation and using that driver are immense. I transferred 30MB in about 5-7 seconds **from a NTFS partition** as opposed to 4MB in about 25 seconds. Massive difference, and that\u0027s under DOS and using NTFS \\[which isn\u0027t native\\] with the default cache \\[which can be adjusted\\] ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)   \n\n\u003e There are three standards compliant controllers in PC\u0027s. In Windows, Go to ControlPanel - System and (look under Hardware or DeviceManager to) examine the listed devices under Universal Serial Bus Controllers to determine the type of USB ports detected:  \n\u003e\n\u003e USB 1.x UHCI (Universal Host Controller Interface) Intel, VIA  \n\u003e USB 1.x OHCI (Open Host Controller Interface) Compaq, Microsoft and National Semiconductor  \n\u003e USB 2.x EHCI (Enhanced Host Controller Interface)\n\nSource: [http://jedlik.vein.h...susb/readme.txt](http://jedlik.vein.hu:60080/dos/drivers/dosusb/readme.txt \"External link\")  \n\n![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)   \n"
    },
    {
      "id": "32131",
      "timestamp": "2008-03-28T08:24:55+00:00",
      "author": "was_jaclaz",
      "content": "Hmmmm, the 0.13 version is the one that ships (shipped) with SYMANTEC GHOST 2003, cannot say if it\u0027s available freely elsewhere.  \n\nIt seems to be however part of this \"multi-device\" DOS CD:  \n[http://vivil.free.fr/usbdosboot/](http://vivil.free.fr/usbdosboot/ \"External link\")  \n(Warning 56k users, the .iso is 42 Mb)  \n\n\u003cbr /\u003e\n\nGood to know that it gives USB 2.0 speed. ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \n\njaclaz   \n"
    },
    {
      "id": "32135",
      "timestamp": "2008-03-28T10:31:26+00:00",
      "author": "jezza333",
      "content": "\u003e Hmmmm, the 0.13 version is the one that ships (shipped) with SYMANTEC GHOST 2003, cannot say if it\u0027s available freely elsewhere.\n\nWhy wouldn\u0027t it be? It\u0027s also available in the bootdisk.com USB boot collection according to their website; not to mention a ton of other sites on the internet - just varying versions ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)  \n\n\u003e Good to know that it gives USB 2.0 speed. ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)\n\nYep, excellent stuff. USBASPI.SYS also provides USB 2.0 speeds and is supposedly compatible with a larger number of drives, but isn\u0027t compatible with any of the DOS based NTFS drivers I\u0027ve tried.  \n\n![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)   \n"
    },
    {
      "id": "32138",
      "timestamp": "2008-03-28T11:35:08+00:00",
      "author": "Brito",
      "content": "Would you make available this image?  \n\nThese features sound awesome, I really like DOS and can\u0027t conform that people call it \"old\".. ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \n\nGreat work! ![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)   \n"
    },
    {
      "id": "32194",
      "timestamp": "2008-03-29T07:10:24+00:00",
      "author": "jezza333",
      "content": "\u003e Would you make available this image?\n\nWould you like me to upload the drivers I have used and the order of execution? A ramdisk needs to be loaded and the drivers copied to the ramdisk \\[how can they be installed when the drive/files being referenced temporarily doesn\u0027t exist\\], then installed using ctload. I can upload or supply the URL of all the files needed if you wish ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \n\nNot a problem either way. ![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)   \n"
    },
    {
      "id": "32195",
      "timestamp": "2008-03-29T07:46:54+00:00",
      "author": "Brito",
      "content": "\u003e I can upload or supply the URL of all the files needed if you wish\n\nThis would be great along with a small tutorial! ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)   \n"
    },
    {
      "id": "32198",
      "timestamp": "2008-03-29T08:22:55+00:00",
      "author": "jezza333",
      "content": "Sure thing, I\u0027ll see what I can do. ![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)  \n\nEDIT: sorry, a little late, but here it is. I\u0027ve made it easy enough to understand, even for the not-so-proficient PC user. Any \u0027baby talk\u0027 isn\u0027t meant to be offensive; I know you know a ton about this sort of field.  \n\nLet me know if I\u0027m missing anything ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \nCheers.  \n\nEDIT: Updated the tutorial slightly... you can find it on the first post in this thread:  \n[http://www.boot-land...?...ost\\\u0026p\u003d31969](http://www.boot-land.net/forums/index.php?showtopic\u003d4260\u0026view\u003dfindpost\u0026p\u003d31969 \"External link\")   \n"
    },
    {
      "id": "32341",
      "timestamp": "2008-03-31T22:24:43+00:00",
      "author": "Brito",
      "content": "Cool instructions, really liked the intro: Gday there reader ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)  \n\u003e\n\u003e Here are the \\[de/in\\]structions you need to create a bootable USB thumb drive..\n\n![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)   \n\n*(only found one typo: archiover)*   \n\nWould you edit your first post on this topic to ease other people to find this good guide?  \n\nIt was a very easy to follow tutorial.  \n\n**Very good work!** ![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)   \n"
    },
    {
      "id": "32365",
      "timestamp": "2008-04-01T03:45:28+00:00",
      "author": "jezza333",
      "content": "\u003e *(only found one typo: archiover)*\nFiXeD ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)  \n\n\u003e It was a very easy to follow tutorial\nAh good stuff, I hoped it was but was unsure ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)   \n\nThanks for the feedback mate, appreciated. ![:tabletalk:](http://reboot.pro/public/style_emoticons/default/tabletalk.gif)   \n"
    }
  ]
}