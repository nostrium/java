{
  "id": "18683",
  "title": "W7 newb boot troubles (Help)",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "174391",
      "timestamp": "2013-07-05T03:50:37+00:00",
      "author": "Zoso",
      "content": "I have just installed W7 embedded in virtualbox vm on a flat .vhd and then I opened that vhd with ImDisk and then I used CloneDisk file copy with keep ACL option to transfer everything to a USB HDD that was formatted NTFS in XP.  \n\nI plugged it in to boot it and got NTLDR is missing so I thought I would try to just copy NTLDR, NTDETECT, BOOT.INI, GRLDR, and menu.lst on there with menu entry:  \n\ntitle Boot 7  \nfallback 2  \nfind --set-root --ignore-floppies --ignore-cd /bootmgr  \nmap () (hd0)  \nmap (hd0 ()  \nmap --rehook  \nfind --set-root --ignore-floppies --ignore-cd /bootmgr  \nchainloader /bootmgr  \nsavedefault --wait\u003d2  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nafter that I get error could not be loaded, missing or corrupt: windows\\\\system32\\\\winload.exe Status: 0xc000000e  \n\nhow can I overcome this? was it a transfer error how CloneDisk did not copy everything (I wish it had a logging option for file copy)?  \n\n\u003cbr /\u003e\n\nI think there is a probably better way to transfer from the .vhd to the USB HDD partition but I dont know it so my question is how would you do this?  \n\n\u003cbr /\u003e\n\nthanks   \n"
    },
    {
      "id": "174392",
      "timestamp": "2013-07-05T04:31:11+00:00",
      "author": "wimb",
      "content": "**IMG_XP_Restore.exe** of IMG_XP package can be used in Win 7/8/7PE OS to Restore Win7 VHD to USB  \n[http://www.911cd.net...showtopic\u003d23553](http://www.911cd.net/forums//index.php?showtopic\u003d23553 \"External link\")  \nManually you can fix your present case drive U: to Add Boot Manager Menu by using bcdboot.exe in Win 7/8/7PE OS  \n\u003e bcdboot.exe U:\\\\Windows /s U:\n\nYou can boot straight into Boot Manager Menu by using Bootsect.exe to change the USB-drive BootSector to bootmgr type  \n\u003e BootSect.exe /nt60 U: /force\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174405",
      "timestamp": "2013-07-05T13:59:38+00:00",
      "author": "Zoso",
      "content": "hi wimb, your tool does so much that it is overwhelming to me.. awesome work you do!  \n\nI dont find details on that thread specifically for transferring 7 vhd to partition but I think I can figure it out for this so I try to use IMG_XP_Restore first.  \n\nI dont have another functioning W7 at the moment but the manual way I needed to know. I have held out from using W7 for long as possible but the EWF functionality of embedded version I want to reverse engineer for XPx64.  \n\nbut it is good to progress into the newer booting environment and learn more about it.  \n\n\u003cbr /\u003e\n\nthanks   \n"
    },
    {
      "id": "174447",
      "timestamp": "2013-07-06T19:31:50+00:00",
      "author": "Zoso",
      "content": "now I have new questions on same topic. first, can bcdboot.exe be run from XP?  \n\nnext, I have W7 now booting from first partition with Grub4Dos loaded from boot.ini, how can I move this same w7 to second partition and boot it from there, what replaces boot.ini arcs in w7 and how to modify it so that it is ready to boor from 2nd partition?   \n"
    },
    {
      "id": "174455",
      "timestamp": "2013-07-07T04:58:59+00:00",
      "author": "wimb",
      "content": "bcdboot.exe can NOT be used in XP but it requires as indicated Win 7/8/7PE as OS.\n\nboot.ini arc path can NOT be used to specify Win7 on second partition.\n\nYou need to use bcdboot to make Boot Manager Menu as indicated and use the drive where Win7 is located.\n\n"
    },
    {
      "id": "174459",
      "timestamp": "2013-07-07T06:53:39+00:00",
      "author": "Zoso",
      "content": "Im trying to avoid having to install w7 directly to internal HDD. what I have now is the usb \\\u0026 ram boot ready W7 in .vhd created with virtualbox and I have copied that .vhd to USB HDD NTFS partition1 active but I am having trouble getting the grub4dos menu.list entry correct so that I can boot it. any suggestions?   \n"
    },
    {
      "id": "174462",
      "timestamp": "2013-07-07T07:36:40+00:00",
      "author": "wimb",
      "content": "You can use **WinNTSetup2** to prepare **VHD** for Install of Win 7 Ultimate Edition in VHD\n\nso that you don\u0027t have to Install diirectly to internal HDD\n\n[http://reboot.pro/to...to-make-mini-7/](http://reboot.pro/topic/18593-vhd-w7-compact-program-to-make-mini-7/ \"\")\n\n\u003e **Windows 7 Source VHD preparation**   \n\u003e\n\u003e Boot with Windows 7/8 or 7 PE and then use WinNTSetup2_x86.exe  \n\u003e to Install Windows 7 x86 or x64 in NTFS 10-15 GB VHD or to Install on primary NTFS partition of internal harddisk  \n\u003e Boot Drive can be FAT32 or NTFS USB-drive so that normal booting of the internal harddisk is not changed.  \n\u003e\n\u003e Win 7 Setup ISO file was mounted via R-mouse in ImDisk Virtual drive  \n\u003e In WinNTSetup2 - Tweaks - Select all System Tweaks so that UAC is off etc.  \n\u003e [http://www.msfn.org/...winntsetup-v23/](http://www.msfn.org/board/topic/149612-winntsetup-v23/ \"External link\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174463",
      "timestamp": "2013-07-07T07:50:56+00:00",
      "author": "Zoso",
      "content": "I already have W7 VHD  \n\n\u003cbr /\u003e\n\nI need the correct grub4dos menu.lst entry that will boot it.   \n"
    },
    {
      "id": "174464",
      "timestamp": "2013-07-07T08:09:58+00:00",
      "author": "wimb",
      "content": "Win7 VHD can boot from Boot Manager menu made by using bcdboot.exe\n\nWin7 VHD can only boot direct from grub4dos menu when FiraDisk or WinVBlock driver were installed in VHD.\n\nIf that is the case then you can use BOOT_IMG.exe to prepare simply only the grub4dos meny for that case,\n\nbut I think it is more useful to use**VHD_W7_Compact.exe** in Win 7/8/7PE OS\n\nwhich is really capable to make Win7 VHD bootable and create all menu\u0027s (Boot Manager + Grub4dos Menu)\n\nIt has a Full Copy option that you might use if you do\u0027nt want to reduce size.\n\nBest option is:\n\n**USB_W7_Fix.exe** of IMG_XP package can also when used in Win 7/8/7PE OS\n\nmake Win7 VHD bootable and create all menu\u0027s (Boot Manager + Grub4dos Menu).\n\n"
    },
    {
      "id": "174487",
      "timestamp": "2013-07-07T13:51:12+00:00",
      "author": "Zoso",
      "content": "\u003e /\\\u003e /\\\u003eWin7 VHD can boot from Boot Manager menu made by using bcdboot.exe  \n\u003e\n\u003e Win7 VHD can only boot direct from grub4dos menu when FiraDisk or WinVBlock driver were installed in VHD.  \n\u003e\n\u003e If that is the case then you can use BOOT_IMG.exe to prepare simply only the grub4dos meny for that case,  \n\u003e but I think it is more useful to use**VHD_W7_Compact.exe** in Win 7/8/7PE OS  \n\u003e which is really capable to make Win7 VHD bootable and create all menu\u0027s (Boot Manager + Grub4dos Menu)  \n\u003e It has a Full Copy option that you might use if you do\u0027nt want to reduce size.  \n\u003e\n\u003e Best option is:  \n\u003e **USB_W7_Fix.exe** of IMG_XP package can also when used in Win 7/8/7PE OS  \n\u003e make Win7 VHD bootable and create all menu\u0027s (Boot Manager + Grub4dos Menu).\n\n\u003cbr /\u003e\n\nembedded 7 may not need WinVblock or firadisk to boot from grub4dos, I would like to test this. Ive included usb \\\u0026 ram boot stack in the intall.  \n\nyour tools are fine wimb but I can more simply create a menu entry for the .vhd directly if I knew what to enter for that.   \n"
    }
  ]
}