{
  "id": "6425",
  "title": "How to boot Multi Partition USB key without Hitachi driver",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "51897",
      "timestamp": "2008-12-11T06:17:12+00:00",
      "author": "Buntu",
      "content": "Jaclaz, can you please help me. I have spent several days and nights trying to work on a multi-boot USB. Is it possible to have a multi-boot with several partitions, all Fat32, with Grub in the first partition, WITHOUT having to use the hitachi driver to change the usb partitions into looking like hard drives?  \n\nIs there a way to direct the configfile command to the appropriate usb partition.  \n\nThe OS I use is Ubuntu, and the usb drive is a sd card reader, so it is usb but an sd card of 8 GB.  \n\n\\\\dev reads my partitions as sdh1, sdh2, sdh3, etc.  \n\nI have several OS\u0027s each on one partition. If I go into the Ubuntu Partition Editor and change the flag \"boot\" to any one partition, if I boot up with the usb key, it will boot into that particular OS.  \n\nBut in the boot/grub/menu.lst on the first partition, I don\u0027t know what to refer to for the 2nd, 3rd, etc partitions for the configfile. I have tried sdh2, etc but that has not worked.  \n\nThanks   \n\n\u003cbr /\u003e\n\n------------------------  \n\n\u003e That\u0027s actually most probably the culprit (about the gparted problem):  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e You actually do not need to install grub4dos to MBR+hidden sectors.  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e Easily fixable by installing either the Hitachi Microdrive Filter cfadisk.sys or the dummydisk.sys by Anton Bassov.  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e Actually grubinst, that can be substituted by this Win32 installer:  \n\u003e [http://www.disklessa...hp?name\u003dproduct](http://www.disklessangel.com/modules.php?name\u003dproduct \"External link\")  \n\u003e [http://www.disklessa...-bin-w32-19.zip](http://www.disklessangel.com/modules/down/grubutil-1.1-bin-w32-19.zip \"External link\")  \n\u003e should NOT touch the bootsector (i.e. first sector of any partition) but surely it overwrites the MBR (i.e. first sector of the whole drive) and a number of the following hidden sectors (depending on version of grub4dos).  \n\u003e\n\u003e Also, please state which exact version of grub4dos you are using, when in doubt always use latest \"nightbuild\" and if it sdoes not work revert to latest previous \"stable\" version, see here:  \n\u003e [http://www.boot-land...?...opic\u003d14\\\u0026hl\u003d](http://www.boot-land.net/forums/index.php?showtopic\u003d14\u0026hl\u003d \"External link\")  \n\u003e\n\u003e The \"safe\" way and totally compatible way to install grub4dos is actually NOT to install it, but rather to format First Primary Active Partition of the stick normally with 2K/XP, then have in the ROOT directory:  \n\u003e NTLDR  \n\u003e NTDETECT.COM  \n\u003e grldr  \n\u003e menu.lst  \n\u003e BOOT.INI with an additional entry as follows:  \n\u003e\n\u003e ```\n\u003e C\u0026#58;\\grldr\u003d\u0026#34;Grub4dos\u0026#34;\n\u003e ```\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e (if you are booting a PE of some kind you can chainload SETUPLDR.BIN directly from inside it\u0027s \\\\I386 or \\\\minint directory)  \n\u003e\n\u003e This way the MBR will be the standard 2K/XP/2003 one (maybe the \"hacked\" HP USB utility one), all hidden sectors will be 00\u0027s and the bootsector of first partition wil be the normal (FAT,FAT32 or NTFS one), so everything will be compatible with everything.  \n\u003e\n\u003e jaclaz\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "51898",
      "timestamp": "2008-12-11T06:21:26+00:00",
      "author": "Buntu",
      "content": "Jaclaz, can you please help me. I have spent several days and nights trying to work on a multi-boot USB. Is it possible to have a multi-boot with several partitions, all Fat32, with Grub in the first partition, WITHOUT having to use the hitachi driver to change the usb partitions into looking like hard drives?  \n\nIs there a way to direct the configfile command to the appropriate usb partition.  \n\nThe OS I use is Ubuntu, and the usb drive is a sd card reader, so it is usb but an sd card of 8 GB.  \n\n\\\\dev reads my partitions as sdh1, sdh2, sdh3, etc.  \n\nI have several OS\u0027s each on one partition. If I go into the Ubuntu Partition Editor and change the flag \"boot\" to any one partition, if I boot up with the usb key, it will boot into that particular OS.  \n\nBut in the boot/grub/menu.lst on the first partition, I don\u0027t know what to refer to for the 2nd, 3rd, etc partitions for the configfile. I have tried sdh2, etc but that has not worked.  \n\nThanks   \n\n\u003cbr /\u003e\n\n------------------------   \n"
    },
    {
      "id": "51910",
      "timestamp": "2008-12-11T09:56:10+00:00",
      "author": "was_jaclaz",
      "content": "Sure, the problem is that menu.lst NEEDS to hide/unhide make active/inactive the partitions.  \n\nThus it must be \"planned\" in such a way that it is \"circular\", meaning that at each boot can \"setup\" the stick in every possible way and that at next boot the stick is bootable and every option can be chosen.  \n\nAll in all, this is NOT very convenient (though possible).   \n\nForget about /sda /sdb, /sdha and the like.  \n\ngrub4dos dentifies ANY partition as a couple (**hd** *disk#* ,*partition#* ) starting from 0 depending on BIOS given drive order, i.e. when you boot from it the USB stick will be first drive (hd0), first partition in it will be (hd0,0), second partition will be (hd0,1) and so on. (grub4dos is \"bus/device agnostic\", i.e. it sees a filesystem device read by the BIOS as hd as it were a hd, no matter if USB, stick, SD or whatever).  \n\nIt would be much easier to use another app (alone or together with grub4dos):  \n[http://www.boot-land...p?showtopic\u003d334](http://www.boot-land.net/forums/index.php?showtopic\u003d334 \"External link\")  \n\nOtherwise, for a two partition boot, say (hd0,0) and (hd0,1) the menu.lst should be something like:  \n\n```\ntitle \u0026#40;hd0,0\u0026#41; Windows XP\n\nroot \u0026#40;hd0,0\u0026#41;\n\nmakeactive \u0026#40;hd0,0\u0026#41;\n\nchainloader /NTLDR\n\n\n\ntitle \u0026#40;hd0,1\u0026#41; Linux\n\nroot \u0026#40;hd0,1\u0026#41;\n\nmakeactive \u0026#40;hd0,1\u0026#41;\n\nkernel /vmlinuz\n\ninitrd /initrd.gz\n```\n\n\u003cbr /\u003e\n\nand grldr.mbr would be better installed on the MBR.  \n\nAny added entry, needs to have it\u0027s own \"hardcoded\" **root** and **makeactive** directives, and if needed - but that should be not the case - some additional **hide** /**unhide** directives.  \n\nAn attempt that I would made if I were you would be to try running Chipgenius on the USB Card Reader:  \n[http://www.boot-land...?showtopic\u003d4661](http://www.boot-land.net/forums/?showtopic\u003d4661 \"External link\")  \n\nwith :smile::  \n\n* a bit of luck\n* some fantasy\n* intensive google translate form Chinese\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nyou might be able to find the appropriate \"Manufacturer Tool\" and \"flip the bit\" to FIXED and solve the problem once and for all....  \n\n\u003cbr /\u003e\n\njaclaz   \n"
    },
    {
      "id": "51920",
      "timestamp": "2008-12-11T14:12:34+00:00",
      "author": "Buntu",
      "content": "Thanks for your prompt reply.  \n\nI am carefully looking at your points and will attempt to implement them.   \n\nI will probably have to come back to you a few times!!  \n\nBut, in the meantime, I wanted to address the last comment you made regarding Chipgenius.  \n\nI downloaded it and ran it.  \n\nNow, first of all, note that I am using a 8 GB MicroSD card, which is in a USB micro SD Card Reader. (Why? because it makes a VERY small USB Drive 1\" x 1/3\" x 1/8\" L-W-D)  \n\nSo am I trying to find the manufacturer for the micro SD card, or for the USB card Reader?  \n\nI know the the Micro SD Card is made by Kingston.  \n\nThe USB Card Reader is some generic brand.  \n\nThis is what Chipgenius gave me:  \n\nDevice Name: +\\[S:\\]+USB Mass Storage Device(USB 2.0 SD MMC Reader USB Device)  \n\nPnP Device ID: VID \u003d 14CD PID \u003d 8123  \nSerial Number: 812822222789  \nRevision: _  \n\nDevice Type: Standard USB device - USB2.0 High-Speed  \n\nChip Vendor: (Invalid)  \nChip Part-Number: (Invalid)  \n\nProduct Vendor: USB  \nProduct Model: 2.0 SD MMC Reader  \n\nI then changed the USB card reader to a SanDisk (With this I know the brand of the micro SD card and the USB card reader)  \n\nChipgenius gave me this:  \n\nDevice Name: +\\[S:\\]+USB Mass Storage Device(Generic STORAGE DEVICE USB Device)  \n\nPnP Device ID: VID \u003d 0781 PID \u003d B7B1  \nSerial Number: 000000053621  \nRevision: 9407  \n\nDevice Type: Standard USB device - USB2.0 High-Speed  \n\nChip Vendor: (Invalid)  \nChip Part-Number: (Invalid)  \n\nProduct Vendor: Generic  \nProduct Model: STORAGE DEVICE  \n\nYou will note that the info (PnP, PID, Serial, and Revision) is different for the two, which means Chipgenius is giving me information on the USB reader rather than the micro SD card.  \n\nWhich brings me to my earlier question: Am I trying to find the manufacturer for the micro SD card, or for the USB card Reader?  \n\nThanks  \n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n------------------------  \nAn attempt that I would made if I were you would be to try running Chipgenius on the USB Card Reader:  \n[http://www.boot-land...?showtopic\u003d4661](http://www.boot-land.net/forums/?showtopic\u003d4661 \"External link\")  \n\nwith :smile::  \n\n* a bit of luck\n* some fantasy\n* intensive google translate form Chinese\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nyou might be able to find the appropriate \"Manufacturer Tool\" and \"flip the bit\" to FIXED and solve the problem once and for all....  \n\n\u003cbr /\u003e\n\njaclaz  \n\\[/quote\\]   \n"
    },
    {
      "id": "51927",
      "timestamp": "2008-12-11T16:32:35+00:00",
      "author": "was_jaclaz",
      "content": "\u003e Now, first of all, note that I am using a 8 GB MicroSD card, which is in a USB micro SD Card Reader. (Why? because it makes a VERY small USB Drive 1\" x 1/3\" x 1/8\" L-W-D)\n\nHmmm, :smile: I have the advantage on you:  \n[http://www.911cd.net...showtopic\u003d21794](http://www.911cd.net/forums//index.php?showtopic\u003d21794 \"External link\")  \n:smile:  \n\n\u003cbr /\u003e\n\n\u003e So am I trying to find the manufacturer for the micro SD card, or for the USB card Reader?  \n\u003e\n\u003e I know the the Micro SD Card is made by Kingston.  \n\u003e\n\u003e The USB Card Reader is some generic brand.\nYou are looking (or should be looking :smile:) for the manufacturer of the controller chip in the USB Card reader.  \n\n\u003cbr /\u003e\n\n\u003e This is what Chipgenius gave me:  \n\u003e\n\u003e Device Name: +\\[S:\\]+USB Mass Storage Device(USB 2.0 SD MMC Reader USB Device)  \n\u003e\n\u003e PnP Device ID: VID \u003d 14CD PID \u003d 8123  \n\u003e Serial Number: 812822222789  \n\u003e Revision: _\n\nMost probably you are then looking for this:  \n14CD MOAI ELECTRONICS CORPORATION   \n\n(read here how to get a supposedly updated list of USB manufacturers):  \n[http://www.boot-land...?showtopic\u003d1659](http://www.boot-land.net/forums/?showtopic\u003d1659 \"External link\")  \n\nSite:  \n[http://www.moai.com.tw/index.php](http://www.moai.com.tw/index.php \"External link\")  \n\nBut from there to actually find (if available ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)) the \"Manufacturer Tool\" it will be a long way....:smile:   \n\njaclaz  \n\nP.S.: is this the thingy? ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)  \n[http://jetyo.manufac...ader-Writer.htm](http://jetyo.manufacturer.globalsources.com/si/6008815126282/pdtl/Memory-card/1002809760/Card-Reader-Writer.htm \"External link\")  \n\n[http://www.jetyo.com/en/](http://www.jetyo.com/en/ \"External link\")   \n"
    },
    {
      "id": "51929",
      "timestamp": "2008-12-11T17:10:55+00:00",
      "author": "Buntu",
      "content": "A few things -   \n\n1. moai requires registered persons to download any information.  \n\n2. Would you be aware of whether anyone has been able to find the tool for San Disk to flip the bit?  \n\n3. On another note, I downloaded mbldr and put it in MBR. On boot up it displays the list processed during the execution of the program, but when I highlight any item, it isays error and does not boot to anything.  \n\n4. Also, it allows a maximum of 9 partitions. I am using 14 partitions. (loading various OS\u0027s and various tools).  \n\n5. In original request for help I was using GRUB from Ubuntu. NOt Grub4Dos. Are you saying I should use Grub4Dos instead?   \n"
    },
    {
      "id": "54113",
      "timestamp": "2009-01-06T17:37:16+00:00",
      "author": "was_jaclaz",
      "content": "\u003e 4. Also, it allows a maximum of 9 partitions. I am using 14 partitions. (loading various OS\u0027s and various tools).  \n\u003e\n\u003e 5. In original request for help I was using GRUB from Ubuntu. NOt Grub4Dos. Are you saying I should use Grub4Dos instead?\nList the 14 partitins and what you need them for, most probably some are unneeded.  \n\nYes, grub4dos has further capabilities than legacy GRUB.  \n\njaclaz   \n"
    }
  ]
}