{
  "id": "10430",
  "title": "trouble dual booting USBoot XP",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "91578",
      "timestamp": "2010-02-16T04:06:05+00:00",
      "author": "Zoso",
      "content": "Hello everyone,  \n\nI am using USBoot  \n[http://www.usboot.org/tiki-index.php](http://www.usboot.org/tiki-index.php \"External link\")  \n\nto successfully boot USB HDDs and USB Sticks that were formated with HPUSBFW.EXE prior to USBoot installation. after the USBoot treatment/install I can then copy the installation with windows explorer and paste it onto another USB device and it will also boot. this is very useful to me.  \n\nnow what I am experimenting with is dual booting USBoot XP with a USB HDD first formatted with HPUSBFW.EXE (Fat32) then I divide it up with two primary partitions and one logical (all fat32) with EASEUS.  \n\nnext I copy USBoot XP installation onto the two primaray partitions then modify the boot.ini on the first primary partition to add an entry for booting the next primary partition.  \n\nnow the problem is when I select the second partition from the boot menu it seems to boot up fine but then when I check it in windows explorer it indicates that I am booted into the first partition and not the second one. I dont know why this occurs.  \n\nnext I try removing everything from the first partition except boot.ini, ntdlr, and NTDETECT.COM then reboot.  \n\nwhat happens then when I boot through the first partition\u0027s boot menu to get the second one to boot is I get Blue BSOD STOP: 0x0000006b   \n\"PROCCESS1_INITIALIZATION_FAILED\"  \n\nI hope I have made enough sense explaining this.   \n\nI would like to learn what is preventing me from successfully booting a seperate copy of USBoot XP on a second primary partition from the first primary partition\u0027s boot menu and how to overcome this.  \n\n\u003cbr /\u003e\n\nalso, about ntldr and NTDETECT.COM are these interchangeable on XP or are they unique to each installation?  \n\n\u003cbr /\u003e\n\nthanks   \n"
    },
    {
      "id": "91581",
      "timestamp": "2010-02-16T06:45:06+00:00",
      "author": "ktp",
      "content": "\\\u003e next I copy USBoot XP installation onto the two primaray partitions then modify the \\\u003e boot.ini on the first primary partition to add an entry for booting the next primary partition.  \n\nBy this method, I guess you have problem with registry, HKLM\\\\System\\\\MountedDevices and DosDevices. The first XP boots fine, but after booting and loading registry, the second XP uses same registry as the first one, with bad DosDevices C: etc... which is incoherent. The problem is probably not related to USBoot but to general problem of cloning/moving partitions.  \n[http://www.goodells....ot/partsigs.htm](http://www.goodells.net/multiboot/partsigs.htm \"External link\")   \n"
    },
    {
      "id": "91587",
      "timestamp": "2010-02-16T08:34:20+00:00",
      "author": "Zoso",
      "content": "thanks ktp, the info you linked is very helpful. this is probably whats happening here.   \n\nnow Im not sure if this is possible without changing the diskID everytime I boot? hmm..   \n\n\u003cbr /\u003e\n\nthanks   \n"
    },
    {
      "id": "91588",
      "timestamp": "2010-02-16T08:57:56+00:00",
      "author": "ktp",
      "content": "You could try savepart (spartwin.exe) to fix the registries of XP on the second partition.  \nBe careful and read the documentation first :  \n[http://damien.guibou...ndex_frame.html](http://damien.guibouret.free.fr/en/index_frame.html \"External link\")  \n[http://damien.guibou...tml#Chapitre_11](http://damien.guibouret.free.fr/en/lisezmoi.html#Chapitre_11 \"External link\")   \n"
    },
    {
      "id": "91602",
      "timestamp": "2010-02-16T12:12:01+00:00",
      "author": "Zoso",
      "content": "thanks again ktp, I\u0027ll look into those also.  \n\nI tried fresh MBR and changing diskID as the goodells link suggested but still the same behavior. mabey it has to be in a certain order Im missing here. then again this may also indicate that drive letter assignment isnt the issue.  \n\nI wonder if it is because the XP Im trying to dual boot is from the same installation originally?  \n\nanyone have suggestions for a better method that will work for dual booting USBoot XP on USB HDD?   \n"
    },
    {
      "id": "91603",
      "timestamp": "2010-02-16T12:22:49+00:00",
      "author": "ktp",
      "content": "There is disk id (in the MBR), but also partition offset used in DosDevices. Your two XP installations should have correct DosDevices for C:, with different partition offset. Usually XP issues a message new hardware detected, you have to reboot etc...  \n\nI agree that it could be other things, the bad drive letter (if any) should not cause BSOD but only hang at XP welcome screen.   \n"
    },
    {
      "id": "91611",
      "timestamp": "2010-02-16T14:04:04+00:00",
      "author": "Wonko the Sane",
      "content": "The usual way to solve problems (mind you no offence intended ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)) is to learn how to do things.  \n\nIn a nutshell, INSTEAD of taking the (unfortunately very long) tiime to learn how to boot an XP from USB stick, you went for the USBoot automated method (which is by the way very good, for the scope for which it was devised).  \n\nThen, you pretend to insert in it your own variations, and expect it works.  \n\nIt won\u0027t, not because it\u0027s not good, simply because it was not designed this way.  \n\nYou have two choices before you:  \n\n* learn how to do things manually\n* introduce variations in a \"smart\" way, i.e. letting USBoot take care of the problems.\n\n\u003cbr /\u003e\n\nForget about the HP tool, you won\u0027t need it if you have the filter driver.  \n\nUse normal XP disk management.  \n\nCreate two partitions, primary on the stick.  \n\nRun USBoot and install XP on the first partition.  \nCheck it boots and works.  \nExport to a .reg file the contents of HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\MountedDevices key.  \nImage first partition somewhere.  \nRun USBboot again, does it let you install on second partition?  \nIf not, delete all contents of first partition and try running USBoot again, again trying to install to secod partition.  \n\nWhat happens?  \n\nIf it doesn\u0027t work, we will talk of some workarounds.  \n\nWonko   \n"
    }
  ]
}