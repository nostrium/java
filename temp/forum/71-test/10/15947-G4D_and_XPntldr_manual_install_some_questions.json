{
  "id": "15947",
  "title": "G4D and XP(ntldr) manual install (some questions)",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "143450",
      "timestamp": "2011-12-03T23:30:26+00:00",
      "author": "deckoff",
      "content": "I read here and there about installing XP with flash drive.  \nI found at least a couple of tutorials which do more or less this:  \n1) Extract the content of the XP CD  \n2) Prepare a USB which can boot and start grub4dos.  \n3) **A GUI tool is used to copy the XP CD files to the USB and \"prepare\" the XP installation.**   \n4) A menu.lst with two entries is provided, for the first and second part of the process. The file referred in menuentry is with different name and is most probably created by the tool used and the name is tool-specific.   \nSo , my question is, what exactly happens during step 3? Can it be manually reproduced. I do this on linux machine , just for fun :wink:  \nI refer to this tutorials:  \n[http://www.cooleywir...t/multiboot.htm](http://www.cooleywire.com/jimmyh/usbboot/multiboot.htm \"External link\")  \n[http://www.intowindo...ndows-7-and-xp/](http://www.intowindows.com/how-to-create-multiboot-usb-flash-drive-windows-7-and-xp/ \"External link\")   \n\n**Edited by deckoff, 03 December 2011 - 11:44 PM.**\n"
    },
    {
      "id": "143453",
      "timestamp": "2011-12-04T00:15:43+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e So , my question is, what exactly happens during step 3? Can it be manually reproduced. I do this on linux machine , just for fun :wink:  \nHmmm. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\n\u003e I refer to this tutorials:  \n\u003e [http://www.cooleywir...t/multiboot.htm](http://www.cooleywire.com/jimmyh/usbboot/multiboot.htm \"External link\")  \n\u003e [http://www.intowindo...ndows-7-and-xp/](http://www.intowindows.com/how-to-create-multiboot-usb-flash-drive-windows-7-and-xp/ \"External link\")  \nIf you want fresh milk, you should get it from the cow as opposed to a supermarket :wink:.  \nHere:  \n[http://www.msfn.org/...ndows-from-usb/](http://www.msfn.org/board/forum/157-install-windows-from-usb/ \"External link\")  \nalso command line tools ![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif)  \n\nand this is more or less what actually happens in step #3 summed up and reproducible even manually and from a Linux OS, and even WITHOUT using grub4dos:  \n[http://www.msfn.org/...ut-extra-tools/](http://www.msfn.org/board/topic/151992-install-xp-from-usb-without-extra-tools/ \"External link\")  \n\nRemember that when you take the RED pill, you may find that the rabbit hole is very, very deep ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif):  \n[http://www.msfn.org/...or-xp-from-usb/](http://www.msfn.org/board/topic/133309-request-most-foolproof-method-for-xp-from-usb/ \"External link\")  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143459",
      "timestamp": "2011-12-04T07:34:19+00:00",
      "author": "deckoff",
      "content": "Taking the red pill and going for a dive in the hole :smile:  \nThank you, that is what i needed, I have half a Sunday to try.  \nPS Bad cows might kick you during the milking process :smile:   \n"
    },
    {
      "id": "143465",
      "timestamp": "2011-12-04T10:37:22+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e PS Bad cows might kick you during the milking process :smile:  \nThere is an Italian proverb (actually tuscan) that goes:  \n\u003e Non ha il palio se non chi corre.\nwhich more or less equates to:  \n\n\u003e You cannot get the prize (for the race) unless you run.\n![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143567",
      "timestamp": "2011-12-05T11:57:53+00:00",
      "author": "deckoff",
      "content": "This is a report of my success/failure on this topic:  \n1) WintoFlash seems to be the most recent method to auto-do this :smile: I failed to create running USBs with the links i provided. I use some of the ideas, though. :smile:  \n2) Trying to install the manually created XP install, the hard -disks of the target machine is not seen. It might be because of a Grub4dos issue, or issue of the machine or issue of the installation cd:  \nThis is my menu.lst file:  \n\n```\ntimeout 30\n\ndefault 1\n\ntitle 1) WinXP Text Mode Setup - Install Windows XP\n\nchainloader (hd0,0)/bootmgr\n\ntitle 2) Start Windows XP / GUI Setup from HD1\n\nroot (hd0,0)\n\nchainloader (hd0,0)/ntldr\n\n```\n\n3) Wintoflash follows this method more or less(of course)  \n[http://www.msfn.org/...ut-extra-tools/](http://www.msfn.org/board/topic/151992-install-xp-from-usb-without-extra-tools/ \"External link\")  \n(of course) but also it copies ntldr from the same i386 folder and creates its own custon boot.ini in root dir. It is done to bypass the need for doing the 5-8 steps  \nThis is the boot.ini file:  \n\n```\n[Boot Loader]\n\nTimeout\u003d30\n\nDefault\u003dmulti(0)disk(0)rdisk(1)partition(1)WINDOWS\n\n[Operating Systems]\n\nC:$WIN_NT$.~BTBOOTSECT.DAT \u003d \"1st, text mode setup (Boot from flash again after finished)\"\n\nmulti(0)disk(0)rdisk(1)partition(1)WINDOWS\u003d\"2nd, GUI mode setup, continue setup + 1st start of Windows\" /fastdetect\n\nC: \u003d \"---\u003e DEBUG, in case of HAL.DLL or NTOSKRNL.EXE not found errors \u003c---\"\n\nmulti(0)disk(0)rdisk(1)partition(2)WINDOWS\u003d\"Debug boot rDisk 1 partition 2\" /fastdetect\n\nmulti(0)disk(0)rdisk(1)partition(3)WINDOWS\u003d\"Debug boot rDisk 1 partition 3\" /fastdetect\n\nmulti(0)disk(0)rdisk(1)partition(4)WINDOWS\u003d\"Debug boot rDisk 1 partition 4\" /fastdetect\n\nmulti(0)disk(0)rdisk(2)partition(1)WINDOWS\u003d\"Debug boot rDisk 2 partition 1\" /fastdetect\n\nmulti(0)disk(0)rdisk(2)partition(2)WINDOWS\u003d\"Debug boot rDisk 2 partition 2\" /fastdetect\n\nmulti(0)disk(0)rdisk(2)partition(3)WINDOWS\u003d\"Debug boot rDisk 2 partition 3\" /fastdetect\n\nmulti(0)disk(0)rdisk(2)partition(4)WINDOWS\u003d\"Debug boot rDisk 2 partition 4\" /fastdetect\n\n```\n\n\u003cbr /\u003e\n\nThe valid entry should be selected.  \n\n```\nC:$WIN_NT$.~BTBOOTSECT.DAT \u003d \"1st, text mode setup (Boot from flash again after finished)\"\n\n```\n\nis not valid and needed in this setup, as BOOTSECT.DAT as I could not find the BOOTSECT.DAT file on the setup CD.  \nI cannot check all the info I provided, since the setup does not recognize my hard disk (only the USB) I suspect that might be a CD issue (mine is kind of random, lets say, at best:)  \nPS First time I tried with a USB split in three: one for grub4dos , one for XP and one for 7. I got 0x00007b error, I suspect this was due to invalid entry in txtsetup.sif.  \nMost probably :  \n\n```\nBootPath \u003d \"I386\"\n\nSetupSourceDevice \u003d \"DeviceHarddisk0Partition1\"\n\n```\n\nshould be edited, although I tried changing the Partition1 entry, I still got this error. Due to the fact that all partitions were primary, probably Harddisk0 has to be modified???Maybe???  \nAny comments and corrections are welcome :smile:   \n\n**Edited by deckoff, 05 December 2011 - 12:04 PM.**\n"
    },
    {
      "id": "143569",
      "timestamp": "2011-12-05T12:10:26+00:00",
      "author": "Wonko the Sane",
      "content": "Wintoflash - with *some* offence intended ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) - is a tool that was born AFTER the main findings were posted on MSFN and coincidentally uses a very similar approach, I would call that *converging evolution* of the species.  \nI personally do NOT recommend it.  \nJFYI:  \n[http://www.msfn.org/...orp-wintoflash/](http://www.msfn.org/board/topic/137540-novicorp-wintoflash/ \"External link\")  \n[http://www.msfn.org/...n-xp-with-win7/](http://www.msfn.org/board/topic/151516-dual-boot-win-xp-with-win7/ \"External link\")  \n\nAbout grub4dos check if - by any chance - your issue is connected to this one ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png):  \n\u003chttp://reboot.pro/15956/\u003e  \nbut I don\u0027t think so.  \n\nUsing a \"random\" CD might indeed be an issue, expecially if it has been modified/nlited.  \n\nI doubt that you will be ever able to start an XP by chainloading ***bootmgr*** (unless of course you rename ether SETUPLDR.BIN or NTLDR to BOOTMGR) ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)  \n\u003e timeout 30  \n\u003e default 1  \n\u003e title 1) WinXP Text Mode Setup - Install Windows XP  \n\u003e chainloader (hd0,0)/***bootmgr***   \n\u003e title 2) Start Windows XP / GUI Setup from HD1  \n\u003e root (hd0,0)  \n\u003e chainloader (hd0,0)/ntldr\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143573",
      "timestamp": "2011-12-05T12:43:29+00:00",
      "author": "deckoff",
      "content": "1) On WinToFlash: I thought this tool was developed by the people who developed the method, and wanted to capitalize on this. If i got you right, someone capitalized without being involved in the process of development. I pointed to this method, cos this is the nearest to one-click-solution that I could find. Anyway, this is not what I am looking for, I just \"borrowed\" the method of pointing to the correct location of the setup, without manually starting the Rescue CD.  \n2) i dont think i have any issues with grub4dos, I dont even try to map a ISO  \n3) Of course I do rename SETUPLDR.BIN to ***bootmgr, that*** is what the guy in the tutorial is doing, so I kept it that way. (though the reason for renaming is not present and so no rename is needed:)  \n4) I would like to hear comments on 0x00007b error with split uSB and xp starting form partition hd0,2 :smile: Sny ideas what might be the reason.   \n"
    },
    {
      "id": "143576",
      "timestamp": "2011-12-05T12:54:36+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e 3) Of course I do rename SETUPLDR.BIN to ***bootmgr, that*** is what the guy in the tutorial is doing, so I kept it that way. (though the reason for renaming is not present and so no rename is needed:)  \nJFYI this is the MOST DEPRECATED (by me :wink:) ideat hat EVER surfaced the booting/multi-booting scene ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)  \nMan invented names to easily distinguish things..... ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)  \nCompare with:  \n\u003chttp://reboot.pro/2362/\u003e  \n\u003chttp://reboot.pro/5209/\u003e  \n\u003chttp://reboot.pro/5209/page__st__6\u003e  \n\n\u003cbr /\u003e\n\n\u003e 4) I would like to hear comments on 0x00007b error with split uSB and xp starting form partition hd0,2 Sny ideas what might be the reason.  \nI can understand the single words in the above sentence but I have NO idea whatsoever WHAT (the heck) are you referring to. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \nCare to expand a little? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143580",
      "timestamp": "2011-12-05T13:09:19+00:00",
      "author": "deckoff",
      "content": "\u003e I can understand the single words in the above sentence but I have NO idea whatsoever WHAT (the heck) are you referring to. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\u003e Care to expand a little? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)  \n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\u003e Wonko  \n\n\u003cbr /\u003e\n\nI tried the following setup:  \n1) I parted a USB in three - one FAT16 part and two NTFS part  \n2)FAT16 was used to install Freedos and grub.exe was added   \n3)The second USB (NTFS-1) part is used for Win7  \n3)The third USB (NTFS-2) part is used for WInXP  \n4)WinXP is prepared with the method described above : extracting all iso files, coping of the appropriate files in the root.  \n5) I use grub4dos to start the process:  \n\ntitle 1) WinXP Text Mode Setup - Install Windows XP  \nchainloader (hd0,2)/ SETUPLDR.BIN  \n(unfortunately I deleted the exact menu.lst so the above is assumption)  \n6) the process will start and go on for some time(messages of loading drivers will show). At the moment when \"starting up windows\" message appears, the process will stop and the error message appears. It seems the error could refer to viruses, corrupted install CD , scsi drive drivers and god knows what else  \n7) I tried with   \nEdit txtsetup.sif to add two lines in \\[SetupData\\] section:  \nBootPath \u003d \"I386\"  \nSetupSourceDevice \u003d \"DeviceHarddisk0Partition1\"  \nand tried with different settings for \"Partition\" with no luck.   \n"
    },
    {
      "id": "143582",
      "timestamp": "2011-12-05T13:16:13+00:00",
      "author": "deckoff",
      "content": "PS. Since I use MS-DOS prepared USB to chain into grub4dos to show me menu entries I realize I can specify the file name I need to start whatever I need :smile:   \n"
    },
    {
      "id": "143585",
      "timestamp": "2011-12-05T13:32:49+00:00",
      "author": "Wonko the Sane",
      "content": "That would be  \n\u003e SetupSourceDevice \u003d \"DeviceHarddisk0Partition3\"\nHOW BIG in size are the first two partitions (it is possible that you somehow hit some \"access limits\" ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)  \n\nHowever, see if this helps:  \n[http://www.msfn.org/...aded-small-iso/](http://www.msfn.org/board/topic/139737-install-2000xp2003-from-ram-loaded-small-iso/ \"External link\")  \n\n\"A USB\" does not mean much, Removable/Fixed (please read as \"USB stick vs. USB HD\") may create issues, if I recall correctly.  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143640",
      "timestamp": "2011-12-05T20:00:08+00:00",
      "author": "deckoff",
      "content": "The drive was parted like this:  \n1) FAT16 32 MB  \n2) NTFS -4.5 GB   \n3) NTFS 3.4 GB  \n\nIt seems the problem with WinXP not seening other drives was due to something missing... I tried with different version and not the setup works as expected.   \n\nNow I am going to go deeper in the process of what exactly is the problem is after reboot. As far as I get it, the location for the installation media, specified in boot.ini that is on the target install hard disc is not correct. This location should be used by /fastdetect??? So, if the correct location is specified to /fastdetect, the process should work ok?  \nIs this right?   \n"
    },
    {
      "id": "143642",
      "timestamp": "2011-12-05T20:40:10+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e This location should be used by /fastdetect??? So, if the correct location is specified to /fastdetect, the process should work ok?  \n\u003e Is this right?  \nI don\u0027t get it, /fastdetect is an OPTIONAL switch or parameter.  \nBooting without ***may*** be \"slower\".  \n[http://support.micro...kb/833721/en-us](http://support.microsoft.com/kb/833721/en-us \"External link\")  \n\n\u003e /fastdetect:comnumber  \n\u003e This switch turns off serial and bus mouse detection in the Ntdetect.com file for the specified port. Use this switch if you have a component other than a mouse that is attached to a serial port during the startup process. For example, type /fastdetect:comnumber, where number is the number of the serial port. Ports may be separated with commas to turn off more than one port. If you use /fastdetect, and you do not specify a communications port, serial mouse detection is turned off on all communications ports.\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143644",
      "timestamp": "2011-12-05T20:49:28+00:00",
      "author": "deckoff",
      "content": "Ok, so the important part is then  \n\n```\nmulti(0)disk(0)rdisk(0)partition(1)WINDOWS\u003d\"Windows XP\n\n```\n\n\u003cbr /\u003e\n\nand i will try with something like this  \n\n\u003cbr /\u003e\n\ntitle Second part of 2000 setup/Start from the first internal disk  \nsavedefault  \nmap (hd0) (hd1)  \nmap (hd1) (hd0)  \nmap --hook  \nrootnoverify (hd0)  \nchainloader (hd0)+1  \n\nI will try to force map to a letter S or something at the end of the alphabet, read it is possible   \n"
    },
    {
      "id": "143669",
      "timestamp": "2011-12-06T08:57:56+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I will try to force map to a letter S or something at the end of the alphabet, read it is possible  \n\nTwo questions:\n\n* WHY?  \n  and\n* HOW?\n\n\u003cbr /\u003e\n\nAnswer to the second may lie in migrate.inf :wink::  \n[http://www.911cd.net...showtopic\u003d19663](http://www.911cd.net/forums//index.php?showtopic\u003d19663 \"External link\")  \n\nBut I would really like to know a meaningful answer to question #1 ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143681",
      "timestamp": "2011-12-06T13:54:43+00:00",
      "author": "deckoff",
      "content": "1) WHY?  \nI am looking for a way to automate the process of providing a correct settings so i don\u0027t have to boot into recovery and change boot.ini for the second part of the process.  \naccording to this:  \n[http://www.msfn.org/...127#entry969127](http://www.msfn.org/board/topic/151992-install-xp-from-usb-without-extra-tools/page__p__969127#entry969127 \"External link\")  \n\n\u003e If you use SetupSourceDevice\u003d\"DeviceHarddisk0Partition1\" and follow the procedure in the first post, then during the GUI portion of setup, it asks for the location of files a number of times (about 20 in total). This is because for the GUI portion, I was booting from the internal Harddisk, so that is Harddisk0. However, if you use \"GLOBAL??D:\", setup finds the files on the USB stick both during text and GUI portion.  \n\n"
    },
    {
      "id": "143686",
      "timestamp": "2011-12-06T14:51:57+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e 1) WHY?  \n\u003e I am looking for a way to automate the process of providing a correct settings so i don\u0027t have to boot into recovery and change boot.ini for the second part of the process.  \n\u003e according to this:  \n\u003e [http://www.msfn.org/...127#entry969127](http://www.msfn.org/board/topic/151992-install-xp-from-usb-without-extra-tools/page__p__969127#entry969127 \"External link\")  \nI see :smile:, but that has nothing to do with BOOT.INI, that is about having to click roughly twenty times during setup.  \n\nThe issue with BOOT.INI is that with the one created by the XP install, you WON\u0027T be able to boot before second part of the setup (an entirely different issue).  \n\u003e Step 7) When Setup reboots, reboot from the USB stick again and enter Recovery Console. If you try to boot from the Harddisk at this point, you\u0027ll get a hal.dll error.\nI am not sure if you have understood the actual issue with drive order and arc paths.  \nIf you use grub4dos you re-map disks and you have no problems with BOOT.INI.  \nIn the mentioned thread at first boot:\n\n* USB stick is FIRST (boot) disk (.PhysicalDrive0 or Harddisk0) and it\u0027s ARCpath is multi(0)disk(0)rdisk(0)partition(1)\n* Internal hard disk is SECOND disk (.PhysicalDrive1 or Harddisk1) and it\u0027s ARCpath is multi(0)disk(0)rdisk(**1**)partition(1)\n\nAt second boot:\n\n\u003c!-- --\u003e\n\n* Internal hard disk is FIRST (boot) disk (.PhysicalDrive0 or Harddisk0) and it\u0027s ARCpath is multi(0)disk(0)rdisk(0)partition(1)\n\nThe BOOT.INI, which has been created during first boot will refer to \"itself\", i.e. to multi(0)disk(0)rdisk(**1** )partition(1) (and this disk does not exist this time)  \n\nCompare with the (z-1) approach here:  \n[http://www.msfn.org/...l-from-usb-key/](http://www.msfn.org/board/topic/61384-how-to-bootinstall-from-usb-key/ \"External link\")  \n[http://www.msfn.org/...y/page__st__206](http://www.msfn.org/board/topic/61384-how-to-bootinstall-from-usb-key/page__st__206 \"External link\")  \nall the way up to here:  \n[http://www.msfn.org/...y/page__st__240](http://www.msfn.org/board/topic/61384-how-to-bootinstall-from-usb-key/page__st__240 \"External link\")  \nall the way up to here:  \n[http://www.msfn.org/...y/page__st__264](http://www.msfn.org/board/topic/61384-how-to-bootinstall-from-usb-key/page__st__264 \"External link\")  \nand finally all the way up to \"final\" version:  \n[http://www.msfn.org/...y/page__st__280](http://www.msfn.org/board/topic/61384-how-to-bootinstall-from-usb-key/page__st__280 \"External link\")  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143702",
      "timestamp": "2011-12-06T16:56:37+00:00",
      "author": "deckoff",
      "content": "\u003e I am not sure if you have understood the actual issue with drive order and arc paths.  \n\u003e If you use grub4dos you re-map disks and you have no problems with BOOT.INI.  \n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\u003e Wonko  \n\n1) I am aware I have two problems :wink:  \n- BTW , i tried fixing the problem manually, booting with live Ubuntu and fixing manually the boot.ini file the way described in the thread mentioned above. It did not work, but I did not try that hard.  \n2) I cant figure out what is the correct way to re-map. (sorry but am quite new, not quite comfortable with everything)  \n3) I downloaded the tool for XP installing created by MSFN members  \n[http://www.msfn.org/...omusb-with-gui/](http://www.msfn.org/board/topic/120444-how-to-install-windows-from-usb-winsetupfromusb-with-gui/ \"External link\")  \n( I see now you were heavily involved in the process, thank you for the efforts) and see that:  \n- a dummy iso is used in the process (and I dont see why this is needed)  \n-checkrange is used to determine the number of discs(maybe??????)  \n-a corresponding file is loaded to use the actual correct remapping (maybe?????)  \nAll this is done BEFORE the text install part (So the correct boot.ini file is created)  \nAll of the above are assumptions....  \n\nA simple menu.lst with the correct re-mapping settings might be of great help. I will install on C: - first part of first disk, and my USB is FAT16, MS-DOS bootable - autoexec.bat to grub.exe.  \nIt has in root:  \ni386 folder and setupldr.bin , ntdetect.com, txtsetup.sif  \n\nI checked the entries of migrate.inf , and see if I use the flash that was prepared, it is mapped as U:   \n"
    },
    {
      "id": "143706",
      "timestamp": "2011-12-06T17:39:06+00:00",
      "author": "Wonko the Sane",
      "content": "Yep :smile:, you are referencing to the \"new\" version of the tool, 1.0 beta7 - 10.December.2010.  \nYou may want to have a look at the old version of it vers. 0.2.3 - 06.July.2009 (that involves NO .iso).  \n\nThe tool has evolved over time taking little by little into consideration TENS of different possible setups and hardware or BIOS \"quirks\" and what not.  \n\nBasically if you (no actual need for a menu.lst at all, expecially when experimenting it is actually recommended - by me - to use grub4dos command line capabilities).  \nFirst time you set in BIOS to boot from USB, the USB will be (in grub4dos) (hd0) and internal disk will be (hd1).  \n\n\u003cbr /\u003e\n\nNow you try re-mapping disks:  \n\n```\nmap (hd0) (hd1)\n\nmap (hd1) (hd0)\n\nmap --hook\n\nfind --set-root /SETUPLDR.BIN\n\nboot\n```\n\n\u003cbr /\u003e\n\nInternal disk is now (hd0) and USB stiick is (hd1).  \n\nTry with the TXTSETUP.SIF in root with:  \nBootPath \u003d \"\\\\I386\\\\\"  \nSetupSourceDevice \u003d \"\\\\Device\\\\Harddisk**1** \\\\Partition1\"  \n\nWhat happens?  \nWhen it asks to reboot you reboot to grub.exe and in command line do:\n\n```\nfind --set-root /BOOT.INI\n\ncat /BOOT.INI\n```\n\nWhat are the contents of the BOOT.INI at this stage?  \n\nYou reboot, go to BIOS and change boot order, so that the internal hard disk is first disk.  \nWhat happens?  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143710",
      "timestamp": "2011-12-06T18:24:31+00:00",
      "author": "cdob",
      "content": "\u003e - a dummy iso is used in the process (and I dont see why this is needed)\nAs known XP setup dosn\u0027t support a USB flash disk.  \nA (external) CD drive or a internal hard disk is supported.  \n\nThat\u0027s two versions with some internal default behaviou (e.g. internal hard disk does delete installation files).  \nNeither works at USB flash disk out of the box.  \n\nDummy ISO combines both approaches and circumvent some internal behaviours (e.g. single files are not deleted)   \n"
    },
    {
      "id": "143754",
      "timestamp": "2011-12-07T14:05:16+00:00",
      "author": "deckoff",
      "content": "\u003e \u003cbr /\u003e\n\u003e\n\u003e ```\n\u003e map (hd0) (hd1)\n\u003e\n\u003e map (hd1) (hd0)\n\u003e\n\u003e map --hook\n\u003e\n\u003e find --set-root /SETUPLDR.BIN\n\u003e\n\u003e boot\n\u003e ```\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003cbr /\u003e\n\nI will add  \n\n```\nchainloader  /SETUPLDR.BIN\n\n```\n\nto this code, but a bootloop will happen. If I remove the map swap lines the install process starts OK.  \nI tried this in command line, too, and verified withh uuid before and after that the correct swap has happened.\n\n```\nchainloader  /SETUPLDR.BIN\n\n```\n\nwill verify that the correct file will be loaded.  \nI think I got ntdetect error.  \nHmm???   \n\n**Edited by deckoff, 07 December 2011 - 02:08 PM.**\n"
    },
    {
      "id": "143758",
      "timestamp": "2011-12-07T14:45:20+00:00",
      "author": "Wonko the Sane",
      "content": "Yes, my bad ![:(](http://reboot.pro/public/style_emoticons/default/sad.png) (typo/*lapsus calami* ) you need to add the chainloader /SETUPLDR.BIN command.  \n\nYou need in root:\n\n* SETUPLDR.BIN\n* NTDETECT.COM\n* TXTSETUP:SIF\n\n\u003cbr /\u003e\n\nWhat EXACTLY happens? (which error?) (cannot understand \"bootloop\")  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143771",
      "timestamp": "2011-12-07T16:58:01+00:00",
      "author": "deckoff",
      "content": "\u003e You need in root:\n\u003e\n\u003e * SETUPLDR.BIN\n\u003e * NTDETECT.COM\n\u003e * TXTSETUP:SIF\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003cbr /\u003e\n\nI got all these in root.  \n\nI added   \n\n```\nBootPath \u003d \"I386\"\n\nSetupSourceDevice \u003d \"DeviceHarddisk1Partition1\"\n\n```\n\n\u003cbr /\u003e\n\nto TXTSETUP.SIF in root.  \n\nHere is what exactly happens:  \n1) If I go  \n\n```\nfind --set-root /SETUPLDR.BIN\n\nchainloader  /SETUPLDR.BIN\n\nboot\n\n```\n\nThe process will start as expected: The Text part of the installation will start.   \n2)If i go   \n\n```\nmap (hd0) (hd1)\n\nmap (hd1) (hd0)\n\nmap --hook\n\nfind --set-root /SETUPLDR.BIN\n\nchainloader  /SETUPLDR.BIN\n\nboot\n\n```\n\nA short message ntdetect will show for less than a second and the PC will reboot. I tried this on two different PCs.   \nI tried changing SetupSourceDevice \u003d \"DeviceHarddisk1Partition1\" with SetupSourceDevice \u003d \"DeviceHarddisk0Partition1\", with no change in results.  \nIf I go with   \nchainloader (hd1)+1   \nI receive error  \n\"j\"   \n"
    },
    {
      "id": "143781",
      "timestamp": "2011-12-07T19:05:42+00:00",
      "author": "ilko",
      "content": "@deckoff  \n\n\u003e 2)If i go\n\u003e\n\u003e ```\n\u003e map (hd0) (hd1)\n\u003e\n\u003e map (hd1) (hd0)\n\u003e\n\u003e map --hook\n\u003e\n\u003e find --set-root /SETUPLDR.BIN\n\u003e\n\u003e chainloader  /SETUPLDR.BIN\n\u003e\n\u003e boot\n\u003e ```\n\u003e\n\u003e A short message ntdetect will show for less than a second and the PC will reboot.  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\nThat\u0027s expected. Setupldr.bin/ntdetect/com as well as ntldr/ntdetect.com do not like being started from another disk but the first one. Quite selfish and restricting, but that\u0027s it.  \n\n\u003e SetupSourceDevice \u003d \"DeviceHarddisk1Partition1\"\nThat\u0027s broken design in general. HarddiskN is how disks are enumerated by disk.sys, one cannot reliably predict whether USB disk will be 0 or 1 or whatever, that\u0027s NOT according to boot order which reflects ARC paths and can be manipulated using grub4dos hard disk mapping in order to get proper boot.ini at the end of Text mode and point setupldr.bin where to find the boot and source files.  \n\n\u003e 3) I downloaded the tool for XP installing created by MSFN members  \n\u003e [http://www.msfn.org/...omusb-with-gui/](http://www.msfn.org/board/topic/120444-how-to-install-windows-from-usb-winsetupfromusb-with-gui/ \"External link\")  \n\u003e ( I see now you were heavily involved in the process, thank you for the efforts) and see that:  \n\u003e - a dummy iso is used in the process (and I dont see why this is needed)  \n\u003e -checkrange is used to determine the number of discs(maybe??????)  \n\u003e -a corresponding file is loaded to use the actual correct remapping (maybe?????)\n\n\u003cbr /\u003e\n\n\u003e - a dummy iso is used in the process (and I dont see why this is needed)\nThat\u0027s one of the few ways when one could swap hard disk order to be able to produce proper boot.ini and could start Setup at the same time. As pointed above setupldr.bin/ntdetect.com expect to be started from first hard disk. Workaround is to use a virtual floppy, which is not implemented because it could be used for other purposes- add a driver or answer file for example, or a virtual CD with only the boot files in it.  \n\n\u003cbr /\u003e\n\n\u003e -checkrange is used to determine the number of discs(maybe??????)\nCorrect. In order to rearrange ARC path in cases with more than one internal disk and put USB hard disk last this has to be done. Imagine cases with 2 or more hard disks and user installs Windows on the second or third. If the ARC path to that disk is not corrected (read we swap only hd0 and hd1) boot.ini will be generated with incorrect values.  \n\u003e -a corresponding file is loaded to use the actual correct remapping (maybe?????)\nCorrect.   \n"
    },
    {
      "id": "143790",
      "timestamp": "2011-12-07T19:51:32+00:00",
      "author": "deckoff",
      "content": "Probably I am trying to re-invent the wheel here:  \ni should give up and concentrate on properly starting the prepared with your tool USB by a FAT16 formatted usb with grub4dos. My BIOS will not boot form nothing else but this. USBs formatted in different way will either freeze the boot or the USB will be reported unbootable...  \nAnd read the whole topic where the method for booting XP from usb was developed :smile:   \n\n**Edited by deckoff, 07 December 2011 - 07:58 PM.**\n"
    },
    {
      "id": "143450",
      "timestamp": "2011-12-03T23:30:26+00:00",
      "author": "deckoff",
      "content": "I read here and there about installing XP with flash drive.  \nI found at least a couple of tutorials which do more or less this:  \n1) Extract the content of the XP CD  \n2) Prepare a USB which can boot and start grub4dos.  \n3) **A GUI tool is used to copy the XP CD files to the USB and \"prepare\" the XP installation.**   \n4) A menu.lst with two entries is provided, for the first and second part of the process. The file referred in menuentry is with different name and is most probably created by the tool used and the name is tool-specific.   \nSo , my question is, what exactly happens during step 3? Can it be manually reproduced. I do this on linux machine , just for fun :wink:  \nI refer to this tutorials:  \n[http://www.cooleywir...t/multiboot.htm](http://www.cooleywire.com/jimmyh/usbboot/multiboot.htm \"External link\")  \n[http://www.intowindo...ndows-7-and-xp/](http://www.intowindows.com/how-to-create-multiboot-usb-flash-drive-windows-7-and-xp/ \"External link\")   \n\n**Edited by deckoff, 03 December 2011 - 11:44 PM.**\n"
    },
    {
      "id": "143453",
      "timestamp": "2011-12-04T00:15:43+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e So , my question is, what exactly happens during step 3? Can it be manually reproduced. I do this on linux machine , just for fun :wink:  \nHmmm. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\n\u003e I refer to this tutorials:  \n\u003e [http://www.cooleywir...t/multiboot.htm](http://www.cooleywire.com/jimmyh/usbboot/multiboot.htm \"External link\")  \n\u003e [http://www.intowindo...ndows-7-and-xp/](http://www.intowindows.com/how-to-create-multiboot-usb-flash-drive-windows-7-and-xp/ \"External link\")  \nIf you want fresh milk, you should get it from the cow as opposed to a supermarket :wink:.  \nHere:  \n[http://www.msfn.org/...ndows-from-usb/](http://www.msfn.org/board/forum/157-install-windows-from-usb/ \"External link\")  \nalso command line tools ![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif)  \n\nand this is more or less what actually happens in step #3 summed up and reproducible even manually and from a Linux OS, and even WITHOUT using grub4dos:  \n[http://www.msfn.org/...ut-extra-tools/](http://www.msfn.org/board/topic/151992-install-xp-from-usb-without-extra-tools/ \"External link\")  \n\nRemember that when you take the RED pill, you may find that the rabbit hole is very, very deep ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif):  \n[http://www.msfn.org/...or-xp-from-usb/](http://www.msfn.org/board/topic/133309-request-most-foolproof-method-for-xp-from-usb/ \"External link\")  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143459",
      "timestamp": "2011-12-04T07:34:19+00:00",
      "author": "deckoff",
      "content": "Taking the red pill and going for a dive in the hole :smile:  \nThank you, that is what i needed, I have half a Sunday to try.  \nPS Bad cows might kick you during the milking process :smile:   \n"
    },
    {
      "id": "143465",
      "timestamp": "2011-12-04T10:37:22+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e PS Bad cows might kick you during the milking process :smile:  \nThere is an Italian proverb (actually tuscan) that goes:  \n\u003e Non ha il palio se non chi corre.\nwhich more or less equates to:  \n\n\u003e You cannot get the prize (for the race) unless you run.\n![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143567",
      "timestamp": "2011-12-05T11:57:53+00:00",
      "author": "deckoff",
      "content": "This is a report of my success/failure on this topic:  \n1) WintoFlash seems to be the most recent method to auto-do this :smile: I failed to create running USBs with the links i provided. I use some of the ideas, though. :smile:  \n2) Trying to install the manually created XP install, the hard -disks of the target machine is not seen. It might be because of a Grub4dos issue, or issue of the machine or issue of the installation cd:  \nThis is my menu.lst file:  \n\n```\ntimeout 30\n\ndefault 1\n\ntitle 1) WinXP Text Mode Setup - Install Windows XP\n\nchainloader (hd0,0)/bootmgr\n\ntitle 2) Start Windows XP / GUI Setup from HD1\n\nroot (hd0,0)\n\nchainloader (hd0,0)/ntldr\n\n```\n\n3) Wintoflash follows this method more or less(of course)  \n[http://www.msfn.org/...ut-extra-tools/](http://www.msfn.org/board/topic/151992-install-xp-from-usb-without-extra-tools/ \"External link\")  \n(of course) but also it copies ntldr from the same i386 folder and creates its own custon boot.ini in root dir. It is done to bypass the need for doing the 5-8 steps  \nThis is the boot.ini file:  \n\n```\n[Boot Loader]\n\nTimeout\u003d30\n\nDefault\u003dmulti(0)disk(0)rdisk(1)partition(1)WINDOWS\n\n[Operating Systems]\n\nC:$WIN_NT$.~BTBOOTSECT.DAT \u003d \"1st, text mode setup (Boot from flash again after finished)\"\n\nmulti(0)disk(0)rdisk(1)partition(1)WINDOWS\u003d\"2nd, GUI mode setup, continue setup + 1st start of Windows\" /fastdetect\n\nC: \u003d \"---\u003e DEBUG, in case of HAL.DLL or NTOSKRNL.EXE not found errors \u003c---\"\n\nmulti(0)disk(0)rdisk(1)partition(2)WINDOWS\u003d\"Debug boot rDisk 1 partition 2\" /fastdetect\n\nmulti(0)disk(0)rdisk(1)partition(3)WINDOWS\u003d\"Debug boot rDisk 1 partition 3\" /fastdetect\n\nmulti(0)disk(0)rdisk(1)partition(4)WINDOWS\u003d\"Debug boot rDisk 1 partition 4\" /fastdetect\n\nmulti(0)disk(0)rdisk(2)partition(1)WINDOWS\u003d\"Debug boot rDisk 2 partition 1\" /fastdetect\n\nmulti(0)disk(0)rdisk(2)partition(2)WINDOWS\u003d\"Debug boot rDisk 2 partition 2\" /fastdetect\n\nmulti(0)disk(0)rdisk(2)partition(3)WINDOWS\u003d\"Debug boot rDisk 2 partition 3\" /fastdetect\n\nmulti(0)disk(0)rdisk(2)partition(4)WINDOWS\u003d\"Debug boot rDisk 2 partition 4\" /fastdetect\n\n```\n\n\u003cbr /\u003e\n\nThe valid entry should be selected.  \n\n```\nC:$WIN_NT$.~BTBOOTSECT.DAT \u003d \"1st, text mode setup (Boot from flash again after finished)\"\n\n```\n\nis not valid and needed in this setup, as BOOTSECT.DAT as I could not find the BOOTSECT.DAT file on the setup CD.  \nI cannot check all the info I provided, since the setup does not recognize my hard disk (only the USB) I suspect that might be a CD issue (mine is kind of random, lets say, at best:)  \nPS First time I tried with a USB split in three: one for grub4dos , one for XP and one for 7. I got 0x00007b error, I suspect this was due to invalid entry in txtsetup.sif.  \nMost probably :  \n\n```\nBootPath \u003d \"I386\"\n\nSetupSourceDevice \u003d \"DeviceHarddisk0Partition1\"\n\n```\n\nshould be edited, although I tried changing the Partition1 entry, I still got this error. Due to the fact that all partitions were primary, probably Harddisk0 has to be modified???Maybe???  \nAny comments and corrections are welcome :smile:   \n\n**Edited by deckoff, 05 December 2011 - 12:04 PM.**\n"
    },
    {
      "id": "143569",
      "timestamp": "2011-12-05T12:10:26+00:00",
      "author": "Wonko the Sane",
      "content": "Wintoflash - with *some* offence intended ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) - is a tool that was born AFTER the main findings were posted on MSFN and coincidentally uses a very similar approach, I would call that *converging evolution* of the species.  \nI personally do NOT recommend it.  \nJFYI:  \n[http://www.msfn.org/...orp-wintoflash/](http://www.msfn.org/board/topic/137540-novicorp-wintoflash/ \"External link\")  \n[http://www.msfn.org/...n-xp-with-win7/](http://www.msfn.org/board/topic/151516-dual-boot-win-xp-with-win7/ \"External link\")  \n\nAbout grub4dos check if - by any chance - your issue is connected to this one ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png):  \n\u003chttp://reboot.pro/15956/\u003e  \nbut I don\u0027t think so.  \n\nUsing a \"random\" CD might indeed be an issue, expecially if it has been modified/nlited.  \n\nI doubt that you will be ever able to start an XP by chainloading ***bootmgr*** (unless of course you rename ether SETUPLDR.BIN or NTLDR to BOOTMGR) ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)  \n\u003e timeout 30  \n\u003e default 1  \n\u003e title 1) WinXP Text Mode Setup - Install Windows XP  \n\u003e chainloader (hd0,0)/***bootmgr***   \n\u003e title 2) Start Windows XP / GUI Setup from HD1  \n\u003e root (hd0,0)  \n\u003e chainloader (hd0,0)/ntldr\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143573",
      "timestamp": "2011-12-05T12:43:29+00:00",
      "author": "deckoff",
      "content": "1) On WinToFlash: I thought this tool was developed by the people who developed the method, and wanted to capitalize on this. If i got you right, someone capitalized without being involved in the process of development. I pointed to this method, cos this is the nearest to one-click-solution that I could find. Anyway, this is not what I am looking for, I just \"borrowed\" the method of pointing to the correct location of the setup, without manually starting the Rescue CD.  \n2) i dont think i have any issues with grub4dos, I dont even try to map a ISO  \n3) Of course I do rename SETUPLDR.BIN to ***bootmgr, that*** is what the guy in the tutorial is doing, so I kept it that way. (though the reason for renaming is not present and so no rename is needed:)  \n4) I would like to hear comments on 0x00007b error with split uSB and xp starting form partition hd0,2 :smile: Sny ideas what might be the reason.   \n"
    },
    {
      "id": "143576",
      "timestamp": "2011-12-05T12:54:36+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e 3) Of course I do rename SETUPLDR.BIN to ***bootmgr, that*** is what the guy in the tutorial is doing, so I kept it that way. (though the reason for renaming is not present and so no rename is needed:)  \nJFYI this is the MOST DEPRECATED (by me :wink:) ideat hat EVER surfaced the booting/multi-booting scene ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)  \nMan invented names to easily distinguish things..... ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)  \nCompare with:  \n\u003chttp://reboot.pro/2362/\u003e  \n\u003chttp://reboot.pro/5209/\u003e  \n\u003chttp://reboot.pro/5209/page__st__6\u003e  \n\n\u003cbr /\u003e\n\n\u003e 4) I would like to hear comments on 0x00007b error with split uSB and xp starting form partition hd0,2 Sny ideas what might be the reason.  \nI can understand the single words in the above sentence but I have NO idea whatsoever WHAT (the heck) are you referring to. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \nCare to expand a little? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143580",
      "timestamp": "2011-12-05T13:09:19+00:00",
      "author": "deckoff",
      "content": "\u003e I can understand the single words in the above sentence but I have NO idea whatsoever WHAT (the heck) are you referring to. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\u003e Care to expand a little? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)  \n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\u003e Wonko  \n\n\u003cbr /\u003e\n\nI tried the following setup:  \n1) I parted a USB in three - one FAT16 part and two NTFS part  \n2)FAT16 was used to install Freedos and grub.exe was added   \n3)The second USB (NTFS-1) part is used for Win7  \n3)The third USB (NTFS-2) part is used for WInXP  \n4)WinXP is prepared with the method described above : extracting all iso files, coping of the appropriate files in the root.  \n5) I use grub4dos to start the process:  \n\ntitle 1) WinXP Text Mode Setup - Install Windows XP  \nchainloader (hd0,2)/ SETUPLDR.BIN  \n(unfortunately I deleted the exact menu.lst so the above is assumption)  \n6) the process will start and go on for some time(messages of loading drivers will show). At the moment when \"starting up windows\" message appears, the process will stop and the error message appears. It seems the error could refer to viruses, corrupted install CD , scsi drive drivers and god knows what else  \n7) I tried with   \nEdit txtsetup.sif to add two lines in \\[SetupData\\] section:  \nBootPath \u003d \"I386\"  \nSetupSourceDevice \u003d \"DeviceHarddisk0Partition1\"  \nand tried with different settings for \"Partition\" with no luck.   \n"
    },
    {
      "id": "143582",
      "timestamp": "2011-12-05T13:16:13+00:00",
      "author": "deckoff",
      "content": "PS. Since I use MS-DOS prepared USB to chain into grub4dos to show me menu entries I realize I can specify the file name I need to start whatever I need :smile:   \n"
    },
    {
      "id": "143585",
      "timestamp": "2011-12-05T13:32:49+00:00",
      "author": "Wonko the Sane",
      "content": "That would be  \n\u003e SetupSourceDevice \u003d \"DeviceHarddisk0Partition3\"\nHOW BIG in size are the first two partitions (it is possible that you somehow hit some \"access limits\" ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)  \n\nHowever, see if this helps:  \n[http://www.msfn.org/...aded-small-iso/](http://www.msfn.org/board/topic/139737-install-2000xp2003-from-ram-loaded-small-iso/ \"External link\")  \n\n\"A USB\" does not mean much, Removable/Fixed (please read as \"USB stick vs. USB HD\") may create issues, if I recall correctly.  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143640",
      "timestamp": "2011-12-05T20:00:08+00:00",
      "author": "deckoff",
      "content": "The drive was parted like this:  \n1) FAT16 32 MB  \n2) NTFS -4.5 GB   \n3) NTFS 3.4 GB  \n\nIt seems the problem with WinXP not seening other drives was due to something missing... I tried with different version and not the setup works as expected.   \n\nNow I am going to go deeper in the process of what exactly is the problem is after reboot. As far as I get it, the location for the installation media, specified in boot.ini that is on the target install hard disc is not correct. This location should be used by /fastdetect??? So, if the correct location is specified to /fastdetect, the process should work ok?  \nIs this right?   \n"
    },
    {
      "id": "143642",
      "timestamp": "2011-12-05T20:40:10+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e This location should be used by /fastdetect??? So, if the correct location is specified to /fastdetect, the process should work ok?  \n\u003e Is this right?  \nI don\u0027t get it, /fastdetect is an OPTIONAL switch or parameter.  \nBooting without ***may*** be \"slower\".  \n[http://support.micro...kb/833721/en-us](http://support.microsoft.com/kb/833721/en-us \"External link\")  \n\n\u003e /fastdetect:comnumber  \n\u003e This switch turns off serial and bus mouse detection in the Ntdetect.com file for the specified port. Use this switch if you have a component other than a mouse that is attached to a serial port during the startup process. For example, type /fastdetect:comnumber, where number is the number of the serial port. Ports may be separated with commas to turn off more than one port. If you use /fastdetect, and you do not specify a communications port, serial mouse detection is turned off on all communications ports.\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143644",
      "timestamp": "2011-12-05T20:49:28+00:00",
      "author": "deckoff",
      "content": "Ok, so the important part is then  \n\n```\nmulti(0)disk(0)rdisk(0)partition(1)WINDOWS\u003d\"Windows XP\n\n```\n\n\u003cbr /\u003e\n\nand i will try with something like this  \n\n\u003cbr /\u003e\n\ntitle Second part of 2000 setup/Start from the first internal disk  \nsavedefault  \nmap (hd0) (hd1)  \nmap (hd1) (hd0)  \nmap --hook  \nrootnoverify (hd0)  \nchainloader (hd0)+1  \n\nI will try to force map to a letter S or something at the end of the alphabet, read it is possible   \n"
    },
    {
      "id": "143669",
      "timestamp": "2011-12-06T08:57:56+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I will try to force map to a letter S or something at the end of the alphabet, read it is possible  \n\nTwo questions:\n\n* WHY?  \n  and\n* HOW?\n\n\u003cbr /\u003e\n\nAnswer to the second may lie in migrate.inf :wink::  \n[http://www.911cd.net...showtopic\u003d19663](http://www.911cd.net/forums//index.php?showtopic\u003d19663 \"External link\")  \n\nBut I would really like to know a meaningful answer to question #1 ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143681",
      "timestamp": "2011-12-06T13:54:43+00:00",
      "author": "deckoff",
      "content": "1) WHY?  \nI am looking for a way to automate the process of providing a correct settings so i don\u0027t have to boot into recovery and change boot.ini for the second part of the process.  \naccording to this:  \n[http://www.msfn.org/...127#entry969127](http://www.msfn.org/board/topic/151992-install-xp-from-usb-without-extra-tools/page__p__969127#entry969127 \"External link\")  \n\n\u003e If you use SetupSourceDevice\u003d\"DeviceHarddisk0Partition1\" and follow the procedure in the first post, then during the GUI portion of setup, it asks for the location of files a number of times (about 20 in total). This is because for the GUI portion, I was booting from the internal Harddisk, so that is Harddisk0. However, if you use \"GLOBAL??D:\", setup finds the files on the USB stick both during text and GUI portion.  \n\n"
    },
    {
      "id": "143686",
      "timestamp": "2011-12-06T14:51:57+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e 1) WHY?  \n\u003e I am looking for a way to automate the process of providing a correct settings so i don\u0027t have to boot into recovery and change boot.ini for the second part of the process.  \n\u003e according to this:  \n\u003e [http://www.msfn.org/...127#entry969127](http://www.msfn.org/board/topic/151992-install-xp-from-usb-without-extra-tools/page__p__969127#entry969127 \"External link\")  \nI see :smile:, but that has nothing to do with BOOT.INI, that is about having to click roughly twenty times during setup.  \n\nThe issue with BOOT.INI is that with the one created by the XP install, you WON\u0027T be able to boot before second part of the setup (an entirely different issue).  \n\u003e Step 7) When Setup reboots, reboot from the USB stick again and enter Recovery Console. If you try to boot from the Harddisk at this point, you\u0027ll get a hal.dll error.\nI am not sure if you have understood the actual issue with drive order and arc paths.  \nIf you use grub4dos you re-map disks and you have no problems with BOOT.INI.  \nIn the mentioned thread at first boot:\n\n* USB stick is FIRST (boot) disk (.PhysicalDrive0 or Harddisk0) and it\u0027s ARCpath is multi(0)disk(0)rdisk(0)partition(1)\n* Internal hard disk is SECOND disk (.PhysicalDrive1 or Harddisk1) and it\u0027s ARCpath is multi(0)disk(0)rdisk(**1**)partition(1)\n\nAt second boot:\n\n\u003c!-- --\u003e\n\n* Internal hard disk is FIRST (boot) disk (.PhysicalDrive0 or Harddisk0) and it\u0027s ARCpath is multi(0)disk(0)rdisk(0)partition(1)\n\nThe BOOT.INI, which has been created during first boot will refer to \"itself\", i.e. to multi(0)disk(0)rdisk(**1** )partition(1) (and this disk does not exist this time)  \n\nCompare with the (z-1) approach here:  \n[http://www.msfn.org/...l-from-usb-key/](http://www.msfn.org/board/topic/61384-how-to-bootinstall-from-usb-key/ \"External link\")  \n[http://www.msfn.org/...y/page__st__206](http://www.msfn.org/board/topic/61384-how-to-bootinstall-from-usb-key/page__st__206 \"External link\")  \nall the way up to here:  \n[http://www.msfn.org/...y/page__st__240](http://www.msfn.org/board/topic/61384-how-to-bootinstall-from-usb-key/page__st__240 \"External link\")  \nall the way up to here:  \n[http://www.msfn.org/...y/page__st__264](http://www.msfn.org/board/topic/61384-how-to-bootinstall-from-usb-key/page__st__264 \"External link\")  \nand finally all the way up to \"final\" version:  \n[http://www.msfn.org/...y/page__st__280](http://www.msfn.org/board/topic/61384-how-to-bootinstall-from-usb-key/page__st__280 \"External link\")  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143702",
      "timestamp": "2011-12-06T16:56:37+00:00",
      "author": "deckoff",
      "content": "\u003e I am not sure if you have understood the actual issue with drive order and arc paths.  \n\u003e If you use grub4dos you re-map disks and you have no problems with BOOT.INI.  \n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\u003e Wonko  \n\n1) I am aware I have two problems :wink:  \n- BTW , i tried fixing the problem manually, booting with live Ubuntu and fixing manually the boot.ini file the way described in the thread mentioned above. It did not work, but I did not try that hard.  \n2) I cant figure out what is the correct way to re-map. (sorry but am quite new, not quite comfortable with everything)  \n3) I downloaded the tool for XP installing created by MSFN members  \n[http://www.msfn.org/...omusb-with-gui/](http://www.msfn.org/board/topic/120444-how-to-install-windows-from-usb-winsetupfromusb-with-gui/ \"External link\")  \n( I see now you were heavily involved in the process, thank you for the efforts) and see that:  \n- a dummy iso is used in the process (and I dont see why this is needed)  \n-checkrange is used to determine the number of discs(maybe??????)  \n-a corresponding file is loaded to use the actual correct remapping (maybe?????)  \nAll this is done BEFORE the text install part (So the correct boot.ini file is created)  \nAll of the above are assumptions....  \n\nA simple menu.lst with the correct re-mapping settings might be of great help. I will install on C: - first part of first disk, and my USB is FAT16, MS-DOS bootable - autoexec.bat to grub.exe.  \nIt has in root:  \ni386 folder and setupldr.bin , ntdetect.com, txtsetup.sif  \n\nI checked the entries of migrate.inf , and see if I use the flash that was prepared, it is mapped as U:   \n"
    },
    {
      "id": "143706",
      "timestamp": "2011-12-06T17:39:06+00:00",
      "author": "Wonko the Sane",
      "content": "Yep :smile:, you are referencing to the \"new\" version of the tool, 1.0 beta7 - 10.December.2010.  \nYou may want to have a look at the old version of it vers. 0.2.3 - 06.July.2009 (that involves NO .iso).  \n\nThe tool has evolved over time taking little by little into consideration TENS of different possible setups and hardware or BIOS \"quirks\" and what not.  \n\nBasically if you (no actual need for a menu.lst at all, expecially when experimenting it is actually recommended - by me - to use grub4dos command line capabilities).  \nFirst time you set in BIOS to boot from USB, the USB will be (in grub4dos) (hd0) and internal disk will be (hd1).  \n\n\u003cbr /\u003e\n\nNow you try re-mapping disks:  \n\n```\nmap (hd0) (hd1)\n\nmap (hd1) (hd0)\n\nmap --hook\n\nfind --set-root /SETUPLDR.BIN\n\nboot\n```\n\n\u003cbr /\u003e\n\nInternal disk is now (hd0) and USB stiick is (hd1).  \n\nTry with the TXTSETUP.SIF in root with:  \nBootPath \u003d \"\\\\I386\\\\\"  \nSetupSourceDevice \u003d \"\\\\Device\\\\Harddisk**1** \\\\Partition1\"  \n\nWhat happens?  \nWhen it asks to reboot you reboot to grub.exe and in command line do:\n\n```\nfind --set-root /BOOT.INI\n\ncat /BOOT.INI\n```\n\nWhat are the contents of the BOOT.INI at this stage?  \n\nYou reboot, go to BIOS and change boot order, so that the internal hard disk is first disk.  \nWhat happens?  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143710",
      "timestamp": "2011-12-06T18:24:31+00:00",
      "author": "cdob",
      "content": "\u003e - a dummy iso is used in the process (and I dont see why this is needed)\nAs known XP setup dosn\u0027t support a USB flash disk.  \nA (external) CD drive or a internal hard disk is supported.  \n\nThat\u0027s two versions with some internal default behaviou (e.g. internal hard disk does delete installation files).  \nNeither works at USB flash disk out of the box.  \n\nDummy ISO combines both approaches and circumvent some internal behaviours (e.g. single files are not deleted)   \n"
    },
    {
      "id": "143754",
      "timestamp": "2011-12-07T14:05:16+00:00",
      "author": "deckoff",
      "content": "\u003e \u003cbr /\u003e\n\u003e\n\u003e ```\n\u003e map (hd0) (hd1)\n\u003e\n\u003e map (hd1) (hd0)\n\u003e\n\u003e map --hook\n\u003e\n\u003e find --set-root /SETUPLDR.BIN\n\u003e\n\u003e boot\n\u003e ```\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003cbr /\u003e\n\nI will add  \n\n```\nchainloader  /SETUPLDR.BIN\n\n```\n\nto this code, but a bootloop will happen. If I remove the map swap lines the install process starts OK.  \nI tried this in command line, too, and verified withh uuid before and after that the correct swap has happened.\n\n```\nchainloader  /SETUPLDR.BIN\n\n```\n\nwill verify that the correct file will be loaded.  \nI think I got ntdetect error.  \nHmm???   \n\n**Edited by deckoff, 07 December 2011 - 02:08 PM.**\n"
    },
    {
      "id": "143758",
      "timestamp": "2011-12-07T14:45:20+00:00",
      "author": "Wonko the Sane",
      "content": "Yes, my bad ![:(](http://reboot.pro/public/style_emoticons/default/sad.png) (typo/*lapsus calami* ) you need to add the chainloader /SETUPLDR.BIN command.  \n\nYou need in root:\n\n* SETUPLDR.BIN\n* NTDETECT.COM\n* TXTSETUP:SIF\n\n\u003cbr /\u003e\n\nWhat EXACTLY happens? (which error?) (cannot understand \"bootloop\")  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143771",
      "timestamp": "2011-12-07T16:58:01+00:00",
      "author": "deckoff",
      "content": "\u003e You need in root:\n\u003e\n\u003e * SETUPLDR.BIN\n\u003e * NTDETECT.COM\n\u003e * TXTSETUP:SIF\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003cbr /\u003e\n\nI got all these in root.  \n\nI added   \n\n```\nBootPath \u003d \"I386\"\n\nSetupSourceDevice \u003d \"DeviceHarddisk1Partition1\"\n\n```\n\n\u003cbr /\u003e\n\nto TXTSETUP.SIF in root.  \n\nHere is what exactly happens:  \n1) If I go  \n\n```\nfind --set-root /SETUPLDR.BIN\n\nchainloader  /SETUPLDR.BIN\n\nboot\n\n```\n\nThe process will start as expected: The Text part of the installation will start.   \n2)If i go   \n\n```\nmap (hd0) (hd1)\n\nmap (hd1) (hd0)\n\nmap --hook\n\nfind --set-root /SETUPLDR.BIN\n\nchainloader  /SETUPLDR.BIN\n\nboot\n\n```\n\nA short message ntdetect will show for less than a second and the PC will reboot. I tried this on two different PCs.   \nI tried changing SetupSourceDevice \u003d \"DeviceHarddisk1Partition1\" with SetupSourceDevice \u003d \"DeviceHarddisk0Partition1\", with no change in results.  \nIf I go with   \nchainloader (hd1)+1   \nI receive error  \n\"j\"   \n"
    },
    {
      "id": "143781",
      "timestamp": "2011-12-07T19:05:42+00:00",
      "author": "ilko",
      "content": "@deckoff  \n\n\u003e 2)If i go\n\u003e\n\u003e ```\n\u003e map (hd0) (hd1)\n\u003e\n\u003e map (hd1) (hd0)\n\u003e\n\u003e map --hook\n\u003e\n\u003e find --set-root /SETUPLDR.BIN\n\u003e\n\u003e chainloader  /SETUPLDR.BIN\n\u003e\n\u003e boot\n\u003e ```\n\u003e\n\u003e A short message ntdetect will show for less than a second and the PC will reboot.  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\nThat\u0027s expected. Setupldr.bin/ntdetect/com as well as ntldr/ntdetect.com do not like being started from another disk but the first one. Quite selfish and restricting, but that\u0027s it.  \n\n\u003e SetupSourceDevice \u003d \"DeviceHarddisk1Partition1\"\nThat\u0027s broken design in general. HarddiskN is how disks are enumerated by disk.sys, one cannot reliably predict whether USB disk will be 0 or 1 or whatever, that\u0027s NOT according to boot order which reflects ARC paths and can be manipulated using grub4dos hard disk mapping in order to get proper boot.ini at the end of Text mode and point setupldr.bin where to find the boot and source files.  \n\n\u003e 3) I downloaded the tool for XP installing created by MSFN members  \n\u003e [http://www.msfn.org/...omusb-with-gui/](http://www.msfn.org/board/topic/120444-how-to-install-windows-from-usb-winsetupfromusb-with-gui/ \"External link\")  \n\u003e ( I see now you were heavily involved in the process, thank you for the efforts) and see that:  \n\u003e - a dummy iso is used in the process (and I dont see why this is needed)  \n\u003e -checkrange is used to determine the number of discs(maybe??????)  \n\u003e -a corresponding file is loaded to use the actual correct remapping (maybe?????)\n\n\u003cbr /\u003e\n\n\u003e - a dummy iso is used in the process (and I dont see why this is needed)\nThat\u0027s one of the few ways when one could swap hard disk order to be able to produce proper boot.ini and could start Setup at the same time. As pointed above setupldr.bin/ntdetect.com expect to be started from first hard disk. Workaround is to use a virtual floppy, which is not implemented because it could be used for other purposes- add a driver or answer file for example, or a virtual CD with only the boot files in it.  \n\n\u003cbr /\u003e\n\n\u003e -checkrange is used to determine the number of discs(maybe??????)\nCorrect. In order to rearrange ARC path in cases with more than one internal disk and put USB hard disk last this has to be done. Imagine cases with 2 or more hard disks and user installs Windows on the second or third. If the ARC path to that disk is not corrected (read we swap only hd0 and hd1) boot.ini will be generated with incorrect values.  \n\u003e -a corresponding file is loaded to use the actual correct remapping (maybe?????)\nCorrect.   \n"
    },
    {
      "id": "143790",
      "timestamp": "2011-12-07T19:51:32+00:00",
      "author": "deckoff",
      "content": "Probably I am trying to re-invent the wheel here:  \ni should give up and concentrate on properly starting the prepared with your tool USB by a FAT16 formatted usb with grub4dos. My BIOS will not boot form nothing else but this. USBs formatted in different way will either freeze the boot or the USB will be reported unbootable...  \nAnd read the whole topic where the method for booting XP from usb was developed :smile:   \n\n**Edited by deckoff, 07 December 2011 - 07:58 PM.**\n"
    },
    {
      "id": "143796",
      "timestamp": "2011-12-07T20:41:20+00:00",
      "author": "Wonko the Sane",
      "content": "I guess (please read as I am sure) it is my fault for part :blush: (most) of the confusion. Sorry. ![:(](https://reboot.pro/public/style_emoticons/default/sad.png)  \nFirst boot , you DO NOT exchange drives and boot from SETUPLDR.BIN.  \nAt second boot you need to exchange the drives and boot from the internal hard disk.  \n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "143801",
      "timestamp": "2011-12-07T20:53:26+00:00",
      "author": "deckoff",
      "content": "Which is OK:)  \nI will try again tomorrow. Unfortunately, my fiancee\u0027s laptop has some hardware troubles, so the machine I was using for installing XP for testing is taken by her :wink:  \nI will have to continue on my own laptop, which will slow my learning process :wink:  \nAnyway, thank you for your help :smile:   \n"
    },
    {
      "id": "144238",
      "timestamp": "2011-12-15T13:45:19+00:00",
      "author": "deckoff",
      "content": "Finally, I am able to continue:  \nThe text part of the SETUP runs OK.  \nThis is the boot.ini that was generated:\n\n```\n[boot loader]\n\ntimeout\u003d1\n\ndefault\u003dmulti(0)disk(0)rdisk(1)partition(2)WINDOWS\n\n[operating systems]\n\nmulti(0)disk(0)rdisk(1)partition(2)WINDOWS\u003d\"Microsoft Windows XP Professional\" /noexecute\u003doptin /fastdetect\n\n```\n\n\u003cbr /\u003e\n\nIf I manually edit the file to   \n\n```\ndefault\u003dmulti(0)disk(0)rdisk(0)partition(2)WINDOWS\n\nmulti(0)disk(0)rdisk(0)partition(2)WINDOWS\u003d\"Microsoft Windows XP Professional\" /noexecute\u003doptin /fastdetect\n\n```\n\nthe boot file will start correctly  \nIf I go with :  \n\n```\nmap (hd0) (hd1)\n\nmap (hd1) (hd0)\n\nmap --hook\n\nroot (hd0,1)\n\nchaniloader /ntldr\n\nboot\n\n```\n\nI will receive the following error message:  \n\n```\nWindows could not start because of a computer disk hardware configuration problem.\n\nCould not read from the selected boot disk. Check boot path and disk hardware.\n\nPlease check the Windows documentation about hardware disk configuration and your hardware reference manuals for additional information.\n\n```\n\n\u003cbr /\u003e\n\nThe harddisk has 3 part.s, one of which appears to be hidden restoration part., one of which (hd1,0) before mapping, and grub2 and Ubuntu installed on (hd1,2)  \nMy question is why the swapping will not work thus way?   \n"
    },
    {
      "id": "144245",
      "timestamp": "2011-12-15T16:43:20+00:00",
      "author": "Wonko the Sane",
      "content": "It is not clear at which point you have the issue.  \nUse command line.  \nIssue:  \n\n```\nfind --set-root /ntldr\n```\n\n\\[ENTER\\]  \nthen  \n\n```\nroot\n```\n\n\\[ENTER\\]  \nThe NTLDR (and NTDETECT.COM and BOOT.INI) are placed by setup on the Active partition, no matter which partition the WINDOWS directory is.  \n\nTry the above, then try re-mapping disks:  \n\n```\nmap (hd0) (hd1)\n\nmap (hd1) (hd0)\n\nmap --hook\n```\n\n\\[ENTER\\]  \nand repeating the same:  \n\n```\nfind --set-root /ntldr\n```\n\n\\[ENTER\\]  \nthen  \n\n```\nroot\n```\n\n\\[ENTER\\]  \n\nPost results.  \n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "144247",
      "timestamp": "2011-12-15T16:54:30+00:00",
      "author": "deckoff",
      "content": "find --set-root /ntldr  \n\n**!! number of heads for drive 80 restored from 125 to 64\n!! sectors-per-track for drive 80 restored from 62 to 28\n(hd1,1)**   \n\nroot  \n**(hd1,1) Filesystem....**   \n\n\u003cbr /\u003e\n\nmap (hd0) (hd1)  \nmap (hd1) (hd0)  \nmap --hook  \n\nfind --set-root /ntldr  \n**(hd0),1**   \nroot  \n**(hd0,1)**   \n\n**Edited by deckoff, 15 December 2011 - 05:53 PM.**\n"
    },
    {
      "id": "144250",
      "timestamp": "2011-12-15T19:40:39+00:00",
      "author": "ilko",
      "content": "\u003e ...  \n\u003e If I go with :  \n\u003e\n\u003e ```\n\u003e map (hd0) (hd1)\n\u003e\n\u003e map (hd1) (hd0)\n\u003e\n\u003e map --hook\n\u003e\n\u003e root (hd0,1)\n\u003e\n\u003e chaniloader /ntldr\n\u003e\n\u003e boot\n\u003e\n\u003e ```\n\u003e\n\u003e I will receive the following error message:  \n\u003e\n\u003e ```\n\u003e Windows could not start because of a computer disk hardware configuration problem.\n\u003e\n\u003e Could not read from the selected boot disk. Check boot path and disk hardware.\n\u003e\n\u003e Please check the Windows documentation about hardware disk configuration and your hardware reference manuals for additional information.\n\u003e\n\u003e ```\n\u003e\n\u003e \u003cbr /\u003e\n\u003e\n\u003e The harddisk has 3 part.s, one of which appears to be hidden restoration part., one of which (hd1,0) before mapping, and grub2 and Ubuntu installed on (hd1,2)  \n\u003e My question is why the swapping will not work thus way?  \n\u003e\n\u003e \u003cbr /\u003e\n\u003e\nIs boot.ini edited to rdisk(0) when doing that?   \n"
    },
    {
      "id": "144259",
      "timestamp": "2011-12-15T22:29:42+00:00",
      "author": "deckoff",
      "content": "\u003e Is boot.ini edited to rdisk(0) when doing that?  \nNo, it is not.  \nIt is rdisk(1)  \nTried it a few times with the same result.   \n\n**Edited by deckoff, 15 December 2011 - 10:30 PM.**\n"
    },
    {
      "id": "144260",
      "timestamp": "2011-12-15T22:55:57+00:00",
      "author": "ilko",
      "content": "It\u0027s supposed to be rdisk(0).  \n\nImagine, you start from internal disk, it gets rdisk(0), proper boot.ini entry should be rdisk(0).  \n\nYou start from external disk(USB disk or whatever). That\u0027s hd0 in grub4dos, or rdisk(0) as ARC path. Internal disk is hd1, rdisk(1).  \nYou swap them using grub4dos map commands.  \nInternal disk is now hd0, rdisk(0), external is hd1, rdisk(1).  \n\nWith non-edited boot.ini NTLDR tries to find something at rdisk(1)partition(2)WINDOWS, fails because that\u0027 sthe external disk and complains that nothing is there.  \n\nMake it happy, point it to rdisk(0) when booting from external disk and swapping disks. You have to swap them anyways, NTLDR/ntdetect.com won\u0027t start from any other disk than the first one, just as the other couple- setupldr.bin/ntdetect.com.   \n"
    },
    {
      "id": "144283",
      "timestamp": "2011-12-16T07:06:14+00:00",
      "author": "deckoff",
      "content": "My problem here is curiosity only.  \nI wanted to make a DOS bootable USB with WinXP. [http://www.msfn.org/...omusb-with-gui/](http://www.msfn.org/board/topic/120444-how-to-install-windows-from-usb-winsetupfromusb-with-gui/ \"External link\") , turn on the option\" Dont install G4D\", and some g4D knowledge and I get what I want.   \nNow, I am just curious how the problem with a correct boot.ini was solved, even though I looked the G4D files and the threads, I cant figure out what is going on. I see some mappings are provided for the hd and the usb, which finally result in a correct boot.ini. :smile:   \n"
    },
    {
      "id": "144327",
      "timestamp": "2011-12-17T02:08:04+00:00",
      "author": "ilko",
      "content": "Maybe this clarifies a bit:  \n\u003chttp://reboot.pro/12449/\u003e   \n"
    },
    {
      "id": "144354",
      "timestamp": "2011-12-17T15:47:10+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e **!! number of heads for drive 80 restored from 125 to 64\n\u003e !! sectors-per-track for drive 80 restored from 62 to 28**   \nUNconnected with the issue at hand, but this is NOT \"normal\". ![:ph34r:](https://reboot.pro/public/style_emoticons/default/scared9.gif)  \n\nHow was the disk/stick partitoned formatted? ![:unsure:](https://reboot.pro/public/style_emoticons/default/unsure.png)  \n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "144355",
      "timestamp": "2011-12-17T15:50:31+00:00",
      "author": "deckoff",
      "content": "\u003e UNconnected with the issue at hand, but this is NOT \"normal\". ![:ph34r:](https://reboot.pro/public/style_emoticons/default/scared9.gif)  \n\u003e\n\u003e How was the disk/stick partitoned formatted? ![:unsure:](https://reboot.pro/public/style_emoticons/default/unsure.png)  \n\u003e\n\u003e ![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\u003e Wonko  \nGparted or fdisk or both. Tried a few tutorials on some of the USBs to make them zip compatible.  \nSome of the tutorials included steps in changing the disk geometry. :smile: Might be this or anything else :wink:   \n"
    },
    {
      "id": "144356",
      "timestamp": "2011-12-17T16:04:06+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Gparted or fdisk or both. Tried a few tutorials on some of the USBs to make them zip compatible.  \n\u003e Some of the tutorials included steps in changing the disk geometry. :smile: Might be this or anything else :wink:  \nGood. ![:dubbio:](https://reboot.pro/public/style_emoticons/default/dubbio.gif)  \nThan it may or may not be related to any (or only some, but not necessarily all) issues you have or may (in the future) have when using grub4dos or when NOT using it. :smile:  \n\nIf instead of being the internet it was actually paper we would have now wasted two sheets of paper pointlessly. ![:ph34r:](https://reboot.pro/public/style_emoticons/default/scared9.gif)  \n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)  \nWonko   \n"
    },
    {
      "id": "144357",
      "timestamp": "2011-12-17T16:10:25+00:00",
      "author": "deckoff",
      "content": "\u003e If instead of being the internet it was actually paper we would have now wasted two sheets of paper pointlessly. ![:ph34r:](https://reboot.pro/public/style_emoticons/default/scared9.gif)  \n\u003e\n\u003e ![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\u003e Wonko  \n\nHave you heard the words: \"Stupid geek tricks\" :wink:  \nI should thank you and ilko for spending time to help me with my experiments :smile:   \n"
    }
  ]
}