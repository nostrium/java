{
  "id": "21812",
  "title": "Community OFA NVMe 1.5 Storport Miniport for Windows Server 2003 R2 SP2",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "207232",
      "timestamp": "2018-07-13T07:33:53+00:00",
      "author": "schtrom",
      "content": "Download-Link: [https://sourceforge....ws-2003-server/](https://sourceforge.net/projects/nvme-for-windows-2003-server/ \"External link\")\n\nThe following driver is a patched version of the original Community OFA NVMe 1.5 Storport  \nMiniport driver. You should install the latest storport hotfix KB943545 from Microsoft.  \nThis hotfix contains driver version 5.2.3790.4173 of storport.sys. After this hotfix is  \napplied you can install the NVMe driver as usual. My tests have been done with a Samsung  \nM2 SSD Evo 960 500 GB. See the SourceForge project screenshot for performance.  \n\nGreets  \nKai Schtrom\n\n"
    },
    {
      "id": "207234",
      "timestamp": "2018-07-13T09:48:46+00:00",
      "author": "Dietmar",
      "content": "Hello Kai,\n\nthank you very much for your interesting answer!\n\nI am not a programmer, so my possibilities are very limited.\n\nI was just happy, that I found out, that some of the new extend functions\n\nare not implemented in new storport.sys and because of that nvme.sys can not work\n\non Win Server 2003, because via OFA nvme.sys the storport.sys driver is asked more questions than can answer.\n\nMost questions from OFA nvme.sys can be answered via storport.sys from Vista SP2, I find out also.\n\nYour patched nvme.sys works now on Winserver 2003? From which operating system is the picture?\n\nBoth versions, 32 bit and 64 bit and can this nvme.sys can be used for XP 32 bit?\n\nYour idea with IDA (I have also) is nice and so I think it can work,\n\nhave a nice day\n\nDietmar\n\nPS: How do you change nvme.sys? Via assembler code?\n\nEDIT: Here is the link to file from DELL, where you still can found the wished KB943545\n\nfor storport.sys 5.2.3790.4173\n\nin many different languages\n\n[http://www.helpjet.n...32-extract.html](http://www.helpjet.net/Fs-25034308-43688392-62888832-extract.html \"External link\")\n\n"
    },
    {
      "id": "207235",
      "timestamp": "2018-07-13T12:06:48+00:00",
      "author": "Dietmar",
      "content": "Hi Kai,\n\nI tested with Winserver 2003 32 bit and XP SP3 32 bit.\n\nI changed the storport.sys against your recommend version.\n\nDuring install nvme.sys for Toshiba RD400 the blue LED flashed one time,\n\nmeaning, that the device is recogniced on XP.\n\nBut then hangs, also on Win Server 2003.\n\nIn the binaries folder, are there the checked or the free binaries?\n\nI heard, that the free binaries may work in more places than\n\nthe checked one.\n\nHave a nice day,\n\nDietmar\n\nEDIT: ON SAMSUNG 960 Pro nvme your driver works ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png) ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png) ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png) on XP SP3 32 bit\n\n**What a great work!!!**\n\nnice to hear from you\n\nDietmar![nvmeXP.jpg](https://preview.ibb.co/fNF4E8/nvmeXP.jpg)\n\n"
    },
    {
      "id": "207237",
      "timestamp": "2018-07-13T14:14:46+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nboottime for full XP SP3 from my nvme Samsung 960 pro is less than 0.5 sec:)).\n\nWhole diskcheck (500 GB) in about 1 sec.\n\nEasy to build with nlite an install CD for XP and stortport.sys and diskdump.sys\n\nand the textmode driver nvme.sys, so you can install it direct to a nvme flash disk.\n\nHere I make a sector by sector copy from a working XP with AOMEI (system copy and gpart 31 do not work),\n\nDietmar\n\nPS: Toshiba RD 400 still hangs.\n\n"
    },
    {
      "id": "207247",
      "timestamp": "2018-07-13T22:02:54+00:00",
      "author": "Dietmar",
      "content": "About the Toshiba RD400:\n\nnvme.sys started but I think,\n\nwith the harddisknumeration something is wrong:\n\n0: kd\\\u003e !DevNode 0x8840ccd8  \nDevNode 0x8840ccd8 for PDO 0x8acb5438  \nParent 0x8acbf738 Sibling 0000000000 Child 0000000000  \nInstancePath is \"SCSI\\\\Disk\\\u0026Ven_NVMe\\\u0026Prod_TOSHIBA-RD400\\\u0026Rev_4102\\\\5\\\u00267dccca0\\\u00260\\\u0026000000\"  \nServiceName is \"disk\"  \nState \u003d DeviceNodeResourcesAssigned (0x304)  \nPrevious State \u003d DeviceNodeDriversAdded (0x303)  \nStateHistory\\[02\\] \u003d DeviceNodeDriversAdded (0x303)  \nStateHistory\\[01\\] \u003d DeviceNodeInitialized (0x302)  \nStateHistory\\[00\\] \u003d DeviceNodeUninitialized (0x301)  \nStateHistory\\[19\\] \u003d Unknown State (0x0)  \nStateHistory\\[18\\] \u003d Unknown State (0x0)  \nStateHistory\\[17\\] \u003d Unknown State (0x0)  \nStateHistory\\[16\\] \u003d Unknown State (0x0)  \nStateHistory\\[15\\] \u003d Unknown State (0x0)  \nStateHistory\\[14\\] \u003d Unknown State (0x0)  \nStateHistory\\[13\\] \u003d Unknown State (0x0)  \nStateHistory\\[12\\] \u003d Unknown State (0x0)  \nStateHistory\\[11\\] \u003d Unknown State (0x0)  \nStateHistory\\[10\\] \u003d Unknown State (0x0)  \nStateHistory\\[09\\] \u003d Unknown State (0x0)  \nStateHistory\\[08\\] \u003d Unknown State (0x0)  \nStateHistory\\[07\\] \u003d Unknown State (0x0)  \nStateHistory\\[06\\] \u003d Unknown State (0x0)  \nStateHistory\\[05\\] \u003d Unknown State (0x0)  \nStateHistory\\[04\\] \u003d Unknown State (0x0)  \nStateHistory\\[03\\] \u003d Unknown State (0x0)  \nFlags (0x00000130) DNF_ENUMERATED, DNF_IDS_QUERIED,  \nDNF_NO_RESOURCE_REQUIRED  \nCapabilityFlags (0x00000190) Removable, SilentInstall,  \nRawDeviceOK\n\nThis means, that the Toshiba nvme disk is not correct enumerated,\n\nhere is the debug print for the Samsung 960pro, which works\n\n0: kd\\\u003e !DevNode 0x8ad422e8  \nDevNode 0x8ad422e8 for PDO 0x8ad42640  \nParent 0x8ad48c38 Sibling 0000000000 Child 0000000000  \nInstancePath is \"SCSI\\\\Disk\\\u0026Ven_NVMe\\\u0026Prod_Samsung_SSD_960\\\u0026Rev_CXP7\\\\5\\\u0026301893a9\\\u00261\\\u0026000000\"  \nServiceName is \"disk\"  \nState \u003d DeviceNodeStarted (0x308)  \nPrevious State \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[15\\] \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[14\\] \u003d DeviceNodeStarted (0x308)  \nStateHistory\\[13\\] \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[12\\] \u003d DeviceNodeStarted (0x308)  \nStateHistory\\[11\\] \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[10\\] \u003d DeviceNodeStarted (0x308)  \nStateHistory\\[09\\] \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[08\\] \u003d DeviceNodeStarted (0x308)  \nStateHistory\\[07\\] \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[06\\] \u003d DeviceNodeStarted (0x308)  \nStateHistory\\[05\\] \u003d DeviceNodeStartPostWork (0x307)  \nStateHistory\\[04\\] \u003d DeviceNodeStartCompletion (0x306)  \nStateHistory\\[03\\] \u003d DeviceNodeResourcesAssigned (0x304)  \nStateHistory\\[02\\] \u003d DeviceNodeDriversAdded (0x303)  \nStateHistory\\[01\\] \u003d DeviceNodeInitialized (0x302)  \nStateHistory\\[00\\] \u003d DeviceNodeUninitialized (0x301)  \nStateHistory\\[19\\] \u003d Unknown State (0x0)  \nStateHistory\\[18\\] \u003d Unknown State (0x0)  \nStateHistory\\[17\\] \u003d Unknown State (0x0)  \nStateHistory\\[16\\] \u003d Unknown State (0x0)  \nFlags (0x00000130) DNF_ENUMERATED, DNF_IDS_QUERIED,  \nDNF_NO_RESOURCE_REQUIRED  \nCapabilityFlags (0x00000190) Removable, SilentInstall,  \nRawDeviceOK  \n\nAny ideas,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207254",
      "timestamp": "2018-07-14T05:29:23+00:00",
      "author": "schtrom",
      "content": "\u003e Your patched nvme.sys works now on Winserver 2003? From which operating system is the picture?  \n\u003e Both versions, 32 bit and 64 bit and can this nvme.sys can be used for XP 32 bit?\n\nMy test are done on Windows Server 2003 R2 SP2 x86. I think the driver should also be usable  \non Windows XP x86, but I never tested this. If storport runs on XP I think it should work.\n\n\u003e How do you change nvme.sys? Via assembler code?\n\nI recompiled the original OFA source code and added the missing storport extended functions  \nin my own code. I used the OFA version 1.5 for this in case any bugs has been addressed in  \nthe newer code. You can download this code with SVN.\n\nA list of the storport hotfixes can be found here:  \n[http://www.jhousecon...sp2-hotfixes-23](http://www.jhouseconsulting.com/2008/05/15/microsoft-windows-2003-post-sp2-hotfixes-23 \"External link\")  \n\nThe link in this article is not valid any more:  \n[http://support.microsoft.com/kb/943545](http://support.microsoft.com/kb/943545 \"External link\")  \n\nThe old article can be found here:  \n[https://web.archive....3545\\\u0026kbln\u003den-us](https://web.archive.org/web/20101212224030/http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum\u003d943545\u0026kbln\u003den-us \"External link\")  \n\nI used the waybackmachine to get the real Microsoft download link from the site above:  \n[http://support.micro...3545\\\u0026kbln\u003den-us](http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum\u003d943545\u0026kbln\u003den-us \"External link\")\n\n\u003e In the binaries folder, are there the checked or the free binaries?\n\nI only release the free binaries for performance reasons. The checked ones can be compiled  \neasily. Simply follow the steps in the ReadMe.txt.\n\n\u003e Toshiba RD400\n\nThe following are pure speculation. It could be that the \"NVM Express Revision 1.1b (NVMe)\"  \nof the Toshiba does not cover some commands issued to the drive. In your case I would install  \nWindows 10 x86 and the use the original Windows 10 OFA Community driver to see if the drive  \nworks with the original driver. If it does, there is something wrong in my patched code, if  \nit does not work, the OFA code cannot be used with the Toshiba or it is simply missing a needed  \ncommand. You can obtain the original binaries of the OFA driver by downloading the SVN repo:\n\n[https://svn.openfabr...vnrepo/nvmewin/](https://svn.openfabrics.org/svnrepo/nvmewin/ \"External link\")\n\nHave fun!\n\nKai\n\n"
    },
    {
      "id": "207255",
      "timestamp": "2018-07-14T09:50:08+00:00",
      "author": "Dietmar",
      "content": "Hi Kai,\n\nI tested the original OFA version 1.5 driver on Win7 32 bit\n\nand your driver also. Both do not work on nvme Toshiba RD400.\n\nBut the original OFA version 1.3 driver works on this Win7 with RD400.\n\nThis is interesting: So it is the fault of the source code\n\nfor the OFA 1.5 driver, that these problems appear,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207256",
      "timestamp": "2018-07-14T10:05:48+00:00",
      "author": "Dietmar",
      "content": "I did some more tests:\n\nOn Win 7 32 bit, the original OFA 1.5 nvme.sys works on Samsung 950 pro 500 GB.\n\nAlso the patched nvme.sys from Kai.\n\nBut on Windows XP SP3 32 bit, the patched nvme.sys also do not enumerate this Samsung 950 pro.\n\nI think, the source code from OFA version 1.3 is the better choice, just patched,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207257",
      "timestamp": "2018-07-14T11:07:17+00:00",
      "author": "Dietmar",
      "content": "Intel 750 nvme works on XP SP3 also.\n\nHere nice pic from Samsung 970pro 1TB on XP SP3![samsung970pro1_TB.jpg](https://preview.ibb.co/jMDibo/samsung970pro1_TB.jpg)\n\n"
    },
    {
      "id": "207258",
      "timestamp": "2018-07-14T12:29:56+00:00",
      "author": "Fernando1",
      "content": "Hello Kai,\n\ncongratulations for having compiled your brandnew OFA NVMe drivers v1.5.1200.0!\n\nI just have tested the 64bit variant with my Intel Z170 chipset system running Win10 x64 v1803 on a 250 GB Samsung 970 EVO SSD and am impressed by its performance (much better than all other NVMe drivers I had tested before).\n\nHere are the benchmark results I got with your NVMe driver:\n\n![Z170-NVMe-970EVO-OFA1512000.png](https://www2.pic-upload.de/img/35627252/Z170-NVMe-970EVO-OFA1512000.png)\n\nAs owner of the Win-RAID Forum ([\\\u003eLink\\\u003c](https://www.win-raid.com/ \"External link\")) I am very interested to get access to a driver variant, which has been designed for Windows 10. Since your currently available driver hasn\u0027t yet been digitally signed, I have done it by using my Win-RAID CA stamp, but due to the version number of the SYS file the OS Win10 sees the driver as being unsigned, with the consequence, that it is not easy to get it properly installed.\n\nBy the way: Very soon I will publish the results of my NVMe benchmark comparison tests within [\\\u003ethis\\\u003c](https://www.win-raid.com/t977f29-Benchmarks-Comparison-of-the-fastest-consumer-SSDs-SATA-vs-M-PCIe.html \"External link\") thread.\n\nGreetings from Germany\n\nDieter\n\n"
    },
    {
      "id": "207264",
      "timestamp": "2018-07-14T21:37:27+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI remembered the method from S4 ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) ,\n\nand now I have also the Samsung 950 pro\n\nin XP,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207265",
      "timestamp": "2018-07-14T22:08:45+00:00",
      "author": "dencorso",
      "content": "Great! I\u0027m following your progresses with much interest.\n\u003e I remembered the method from S4 ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) ,\n\u003e\n\u003e and now I have also the Samsung 950 pro in XP\n\nBut... what\u0027s the method from S4?  \nAnother question: do you really need to use diskdump.sys v. 5.2.3790.4173 or do diskdump.sys v. 5.1.2600.5512 also work OK with storport.sys v. 5.2.3790.4173? If you didn\u0027t test it, now that you have various working setups, please do test it.  \nA nice day for you, too!\n\n"
    },
    {
      "id": "207266",
      "timestamp": "2018-07-14T22:56:07+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nso much fun you can only have with XP:\n\nThe silly nvme 950pro does not like to boot with XP,\n\nbecause it has an own Bios which fake it as IDE harddisk. I will test this on a compi without\n\nany knowledge of nvme in Bios tomorrow.\n\nThe method from S4 is crazy but good:\n\nDuring the start process, XP cannot recognice,\n\nwhen you change the underlying harddisk,\n\nas long as it is absolut identic to the one during boot.\n\nFirst I thought, I kill my nvme disk, because with Winhex\n\nI write 00 everywhere on it. Aomei tells me then, that my \"ssd\"\n\nis frozen. But when I copy the valid mbr from other nvme,\n\nall was ok again.\n\nWell, when you are able to change very quick the bootdevice after first step,\n\nvoila it is the other ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png).\n\nSome parts are rescued here from old 911CD forum also,\n\nand I think the method from S4 is written as tutorial here.\n\nIn a minute I test, whether new dumpdisk.sys is needed or not,\n\nI write here,\n\nhave a nice evening\n\nDietmar\n\nEdit: Hi dencorso, no need to change the \"old\" diskdump.sys 5.1.2600.5512\n\nagainst the new 5.2.3790.4173 one. No difference, as I can see during boot,\n\nDietmar\n\n"
    },
    {
      "id": "207267",
      "timestamp": "2018-07-15T03:20:04+00:00",
      "author": "dencorso",
      "content": "Oh, I see! The \"method from S4\" is another name for the \"Kansas City Shuffle\"! OK!\n\n\u003e Hi, dencorso: no need to change the \"old\" diskdump.sys 5.1.2600.5512\n\u003e\n\u003e against the new 5.2.3790.4173 one. No difference, as I can see during boot,\n\u003e\n\u003e Dietmar\n\u003e\nThat\u0027s great news! So, just adding storport.sys v. 5.2.3790.4173 and Kai\u0027s nvme.sys is enough! Good!\n\nHowever I agree that if Kai finds time to also patch version 1.3, maybe it can be even more universal as a driver.\n\n"
    },
    {
      "id": "207269",
      "timestamp": "2018-07-15T09:18:51+00:00",
      "author": "Dietmar",
      "content": "Hi,\n\nhere comes TXTSETUP.OEM for the nvme.sys Textmodedriver\n\nUse makecab.exe for the storport.sys file\n\nand Nlite 1.4.93 . With the build \\*.iso and the install methode from\n\n[https://www.overcloc...0-A-motherboard](https://www.overclockers.com/forums/showthread.php/774554-How-to-install-Windows-XP-on-a-2016-Skylake-Asus-Z170-A-motherboard \"External link\")\n\nwhole install of XP on a nvme disk lasts less than 5 min,\n\nhave a nice day\n\nDietmar\n\n\\[Disks\\]  \ndisk0 \u003d \"nvme Installation Disk\", \\\\nvme.inf, \\\\  \n\n\\[Defaults\\]  \nSCSI \u003d nvme  \n\n\\[SCSI\\]  \nnvme \u003d \"nvme Installation Disk\", nvme  \n\n\\[Files.SCSI.nvme\\]  \ninf \u003d disk0, nvme.inf  \ndriver \u003d disk0, nvme.sys, nvme  \n\n\u003cbr /\u003e\n\n\\[HardwareIds.SCSI.nvme\\]  \nid \u003d \"PCI\\\\CC_010802\",\"nvme\"  \n\n\u003cbr /\u003e\n\n\\[Config.nvme\\]  \nvalue \u003d \"\", Tag, REG_DWORD, 1  \n\n"
    },
    {
      "id": "207270",
      "timestamp": "2018-07-15T09:34:10+00:00",
      "author": "Wonko the Sane",
      "content": "Just in case, the \"Kansas City Shuffle\" thread can be (partially) retrieved from here:\n\n[https://web.archive....showtopic\u003d21242](https://web.archive.org/web/20160411185121/http://www.911cd.net/forums//index.php?showtopic\u003d21242 \"External link\")\n\nand cdob posted here on reboot pro a nice Winbuilder thingy:\n\n[http://reboot.pro/to...br-boot-device/](http://reboot.pro/topic/5487-chainboot-other-mbr-boot-device/ \"\")\n\nthat embeds the copy-sgs.exe by karyonix (later/better version of the cs.exe by S4**e**)\n\nI am adding the most useful related files (that were on the 911CD thread) here, if needed.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko  \n\n#### Attached Files {#attach_wrap}\n\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003d45721beac5b4b3160ae80b31f5f5b5ed\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16127 \"Download attachment\") [**copysgcs.zip**](http://reboot.pro/index.php?s\u003d45721beac5b4b3160ae80b31f5f5b5ed\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16127 \"Download attachment\") **34.2KB** 595 downloads\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003d45721beac5b4b3160ae80b31f5f5b5ed\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16128 \"Download attachment\") [**cs.zip**](http://reboot.pro/index.php?s\u003d45721beac5b4b3160ae80b31f5f5b5ed\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16128 \"Download attachment\") **1.09KB** 556 downloads\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003d45721beac5b4b3160ae80b31f5f5b5ed\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16129 \"Download attachment\") [**chainboot_v1.02.zip**](http://reboot.pro/index.php?s\u003d45721beac5b4b3160ae80b31f5f5b5ed\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16129 \"Download attachment\") **33.69KB** 599 downloads\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003d45721beac5b4b3160ae80b31f5f5b5ed\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16130 \"Download attachment\") [**fixWcs.zip**](http://reboot.pro/index.php?s\u003d45721beac5b4b3160ae80b31f5f5b5ed\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16130 \"Download attachment\") **1.45KB** 584 downloads\n\n"
    },
    {
      "id": "207271",
      "timestamp": "2018-07-15T10:19:54+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nfor some strange reasons the new storport.sys driver\n\ndisappeares after txt setup switching to gui setup which gives BSOD 0x07B brrr..\n\nSo you have to copy it by hand to folder Windows\\\\system32\\\\drivers .\n\nBut then installation complets,\n\nin less than one minute,\n\nI think it is first compi in world :tongue: ,\n\nwhere XP is installed on nvme disk,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207273",
      "timestamp": "2018-07-15T11:39:57+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Hi all,\n\u003e\n\u003e for some strange reasons the new storport.sys driver\n\u003e\n\u003e disappeares after txt setup switching to gui setup which gives BSOD 0x07B brrr..\n\u003e\nMaybe it is connected to this:\n\n[https://support.micr...-windows-xp-and](https://support.microsoft.com/en-us/help/314859/limited-oem-driver-support-is-available-with-f6-during-windows-xp-and \"External link\")\n\ni.e. the hardware ID is conflicting with an existing in the CD/iso driver? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207274",
      "timestamp": "2018-07-15T11:54:54+00:00",
      "author": "Dietmar",
      "content": "Hi Jaclaz,\n\nnice to see you :smile: !\n\nYes, the link from you makes everything clear:\n\n\"This replacement allows Windows to use the updated OEM driver during text-mode setup, but you must copy the same updated OEM driver to the System32\\\\Drivers folder of the final Windows installation before the installation continues into graphics-mode setup.\"\n\nWhat a crazy behavior, but you can copy this driver by hand during install,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207278",
      "timestamp": "2018-07-15T14:26:40+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI just install via USB 3.1 XP SP3 on my coffeelake Asus z370 Apex i8700-k motherboard\n\non nvme Samsung 960pro 1TB,\n\nhitting F5 (no Acpi).\n\nAfter copy of storport.sys.\n\nIt is now ready,\n\nfast ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png) ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif), no yellow questionsmark in device manager, gtx 980\n\nand together with win 10, 64 bit on mbr with Samsung 970pro 1TB ,\n\nhave a nice day\n\nDietmar\n\nPS: like dream..\n\n"
    },
    {
      "id": "207282",
      "timestamp": "2018-07-16T08:51:05+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI make some more tests during install XP SP3 on nvme disk.\n\nOn newer motherboards \\\u003e\u003d Skylake Processors,\n\nAcpi from XP does not work correct. Why? May be somebody knows..\n\nWhen you hit F5 during install, you can chose, what kind of processor you wish.\n\nI make a test with standard pc (one processor) and *MPS Multiprocessor PC.*\n\nInteresting: From 3500 MByte/s it moves back to 1000 MByte/s on single processor.\n\nI remember, that you can chose Hal.dll in boot.ini,\n\nhave a nice day\n\nDietmar\n\nPS: Original XP partitions are not aligned, means 63 sectors instead 2048 sectors\n\nbefore partition. But from Win10 or Win7 you can format your nvme disk before XP install.\n\nXP also starts from aligned partition with 2048 sectors before.\n\nNow I compare Fat32 against ntfs. On Fat32, much less writes are doing on nvme disk.\n\nTrim is not a problem. In about 2 weeks you can trim your nvme disk with the manufacture tool,\n\nI just did it from Win10 Magician for Samsung disks.\n\n"
    },
    {
      "id": "207283",
      "timestamp": "2018-07-16T09:28:43+00:00",
      "author": "Fernando1",
      "content": "\u003e ACPI from XP does not work correct. Why? May be somebody knows.\n\nYou will get more ACPI setting options, if you hit **F7** when prompted to hit F6.\n\n"
    },
    {
      "id": "207284",
      "timestamp": "2018-07-16T11:22:07+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e PS: Original XP partitions are not aligned, means 63 sectors instead 2048 sectors\n\u003e\n\u003e before partition. But from Win10 or Win7 you can format your nvme disk before XP install.\n\u003e\n\u003e XP also starts from aligned partition with 2048 sectors before.\n\u003e\n\u003e Now I compare Fat32 against ntfs. On Fat32, much less writes are doing on nvme disk.\n\u003e\n\u003e Trim is not a problem. In about 2 weeks you can trim your nvme disk with the manufacture tool,\n\u003e\n\u003e I just did it from Win10 Magician for Samsung disks.\n\nAs a side note, there should be no problem with creating the (aligned) partition (only creating the entry in the MBR, without formatting it) in grub4dos manually or using the partnew command, then the XP setup should find an existing (not formatted) aligned partition and you can format it normally from the setup.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207293",
      "timestamp": "2018-07-16T19:31:00+00:00",
      "author": "Dietmar",
      "content": "Fat32 XPSP3 auf Samsung 960pro 500 Gb,\n\nnot bad:))\n\n-----------------------------------------------------------------------  \nCrystalDiskMark 5.1.2 © 2007-2016 hiyohiyo  \nCrystal Dew World : [http://crystalmark.info/](http://crystalmark.info/ \"External link\")  \n-----------------------------------------------------------------------  \n\\* MB/s \u003d 1,000,000 bytes/s \\[SATA/600 \u003d 600,000,000 bytes/s\\]  \n\\* KB \u003d 1000 bytes, KiB \u003d 1024 bytes  \n\nSequential Read (Q\u003d 32,T\u003d 1) : 3513.523 MB/s  \nSequential Write (Q\u003d 32,T\u003d 1) : 2038.635 MB/s  \nRandom Read 4KiB (Q\u003d 32,T\u003d 1) : 540.234 MB/s \\[131893.1 IOPS\\]  \nRandom Write 4KiB (Q\u003d 32,T\u003d 1) : 267.359 MB/s \\[ 65273.2 IOPS\\]  \nSequential Read (T\u003d 1) : 2908.008 MB/s  \nSequential Write (T\u003d 1) : 2035.737 MB/s  \nRandom Read 4KiB (Q\u003d 1,T\u003d 1) : 56.380 MB/s \\[ 13764.6 IOPS\\]  \nRandom Write 4KiB (Q\u003d 1,T\u003d 1) : 237.746 MB/s \\[ 58043.5 IOPS\\]  \n\nTest : 1024 MiB \\[C: 58.2% (17.1/29.3 GiB)\\] (x5) \\[Interval\u003d5 sec\\]  \nDate : 2018/07/16 21:24:28  \nOS : Windows XP Professional SP3 \\[5.1 Build 2600\\] (x86)\n\n"
    },
    {
      "id": "207294",
      "timestamp": "2018-07-16T22:02:38+00:00",
      "author": "Dietmar",
      "content": "And here all the same, just NTFS nvme instead of Fat32.\n\nNTFS is faster, but also writes much more to disk.\n\nHave a nice evening\n\nDietmar\n\nNTFS Samsung960pro500GB  \n-----------------------------------------------------------------------  \nCrystalDiskMark 5.1.2 © 2007-2016 hiyohiyo  \nCrystal Dew World : [http://crystalmark.info/](http://crystalmark.info/ \"External link\")  \n-----------------------------------------------------------------------  \n\\* MB/s \u003d 1,000,000 bytes/s \\[SATA/600 \u003d 600,000,000 bytes/s\\]  \n\\* KB \u003d 1000 bytes, KiB \u003d 1024 bytes  \n\nSequential Read (Q\u003d 32,T\u003d 1) : 3475.414 MB/s  \nSequential Write (Q\u003d 32,T\u003d 1) : 2073.956 MB/s  \nRandom Read 4KiB (Q\u003d 32,T\u003d 1) : 945.480 MB/s \\[230830.1 IOPS\\]  \nRandom Write 4KiB (Q\u003d 32,T\u003d 1) : 933.886 MB/s \\[227999.5 IOPS\\]  \nSequential Read (T\u003d 1) : 2843.380 MB/s  \nSequential Write (T\u003d 1) : 2021.353 MB/s  \nRandom Read 4KiB (Q\u003d 1,T\u003d 1) : 59.257 MB/s \\[ 14467.0 IOPS\\]  \nRandom Write 4KiB (Q\u003d 1,T\u003d 1) : 235.984 MB/s \\[ 57613.3 IOPS\\]  \n\nTest : 1024 MiB \\[C: 19.6% (12.0/61.4 GiB)\\] (x5) \\[Interval\u003d5 sec\\]  \nDate : 2018/07/16 23:56:54  \nOS : Windows XP Professional SP3 \\[5.1 Build 2600\\] (x86)  \n\n"
    },
    {
      "id": "207232",
      "timestamp": "2018-07-13T07:33:53+00:00",
      "author": "schtrom",
      "content": "Download-Link: [https://sourceforge....ws-2003-server/](https://sourceforge.net/projects/nvme-for-windows-2003-server/ \"External link\")\n\nThe following driver is a patched version of the original Community OFA NVMe 1.5 Storport  \nMiniport driver. You should install the latest storport hotfix KB943545 from Microsoft.  \nThis hotfix contains driver version 5.2.3790.4173 of storport.sys. After this hotfix is  \napplied you can install the NVMe driver as usual. My tests have been done with a Samsung  \nM2 SSD Evo 960 500 GB. See the SourceForge project screenshot for performance.  \n\nGreets  \nKai Schtrom\n\n"
    },
    {
      "id": "207234",
      "timestamp": "2018-07-13T09:48:46+00:00",
      "author": "Dietmar",
      "content": "Hello Kai,\n\nthank you very much for your interesting answer!\n\nI am not a programmer, so my possibilities are very limited.\n\nI was just happy, that I found out, that some of the new extend functions\n\nare not implemented in new storport.sys and because of that nvme.sys can not work\n\non Win Server 2003, because via OFA nvme.sys the storport.sys driver is asked more questions than can answer.\n\nMost questions from OFA nvme.sys can be answered via storport.sys from Vista SP2, I find out also.\n\nYour patched nvme.sys works now on Winserver 2003? From which operating system is the picture?\n\nBoth versions, 32 bit and 64 bit and can this nvme.sys can be used for XP 32 bit?\n\nYour idea with IDA (I have also) is nice and so I think it can work,\n\nhave a nice day\n\nDietmar\n\nPS: How do you change nvme.sys? Via assembler code?\n\nEDIT: Here is the link to file from DELL, where you still can found the wished KB943545\n\nfor storport.sys 5.2.3790.4173\n\nin many different languages\n\n[http://www.helpjet.n...32-extract.html](http://www.helpjet.net/Fs-25034308-43688392-62888832-extract.html \"External link\")\n\n"
    },
    {
      "id": "207235",
      "timestamp": "2018-07-13T12:06:48+00:00",
      "author": "Dietmar",
      "content": "Hi Kai,\n\nI tested with Winserver 2003 32 bit and XP SP3 32 bit.\n\nI changed the storport.sys against your recommend version.\n\nDuring install nvme.sys for Toshiba RD400 the blue LED flashed one time,\n\nmeaning, that the device is recogniced on XP.\n\nBut then hangs, also on Win Server 2003.\n\nIn the binaries folder, are there the checked or the free binaries?\n\nI heard, that the free binaries may work in more places than\n\nthe checked one.\n\nHave a nice day,\n\nDietmar\n\nEDIT: ON SAMSUNG 960 Pro nvme your driver works ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png) ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png) ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png) on XP SP3 32 bit\n\n**What a great work!!!**\n\nnice to hear from you\n\nDietmar![nvmeXP.jpg](https://preview.ibb.co/fNF4E8/nvmeXP.jpg)\n\n"
    },
    {
      "id": "207237",
      "timestamp": "2018-07-13T14:14:46+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nboottime for full XP SP3 from my nvme Samsung 960 pro is less than 0.5 sec:)).\n\nWhole diskcheck (500 GB) in about 1 sec.\n\nEasy to build with nlite an install CD for XP and stortport.sys and diskdump.sys\n\nand the textmode driver nvme.sys, so you can install it direct to a nvme flash disk.\n\nHere I make a sector by sector copy from a working XP with AOMEI (system copy and gpart 31 do not work),\n\nDietmar\n\nPS: Toshiba RD 400 still hangs.\n\n"
    },
    {
      "id": "207247",
      "timestamp": "2018-07-13T22:02:54+00:00",
      "author": "Dietmar",
      "content": "About the Toshiba RD400:\n\nnvme.sys started but I think,\n\nwith the harddisknumeration something is wrong:\n\n0: kd\\\u003e !DevNode 0x8840ccd8  \nDevNode 0x8840ccd8 for PDO 0x8acb5438  \nParent 0x8acbf738 Sibling 0000000000 Child 0000000000  \nInstancePath is \"SCSI\\\\Disk\\\u0026Ven_NVMe\\\u0026Prod_TOSHIBA-RD400\\\u0026Rev_4102\\\\5\\\u00267dccca0\\\u00260\\\u0026000000\"  \nServiceName is \"disk\"  \nState \u003d DeviceNodeResourcesAssigned (0x304)  \nPrevious State \u003d DeviceNodeDriversAdded (0x303)  \nStateHistory\\[02\\] \u003d DeviceNodeDriversAdded (0x303)  \nStateHistory\\[01\\] \u003d DeviceNodeInitialized (0x302)  \nStateHistory\\[00\\] \u003d DeviceNodeUninitialized (0x301)  \nStateHistory\\[19\\] \u003d Unknown State (0x0)  \nStateHistory\\[18\\] \u003d Unknown State (0x0)  \nStateHistory\\[17\\] \u003d Unknown State (0x0)  \nStateHistory\\[16\\] \u003d Unknown State (0x0)  \nStateHistory\\[15\\] \u003d Unknown State (0x0)  \nStateHistory\\[14\\] \u003d Unknown State (0x0)  \nStateHistory\\[13\\] \u003d Unknown State (0x0)  \nStateHistory\\[12\\] \u003d Unknown State (0x0)  \nStateHistory\\[11\\] \u003d Unknown State (0x0)  \nStateHistory\\[10\\] \u003d Unknown State (0x0)  \nStateHistory\\[09\\] \u003d Unknown State (0x0)  \nStateHistory\\[08\\] \u003d Unknown State (0x0)  \nStateHistory\\[07\\] \u003d Unknown State (0x0)  \nStateHistory\\[06\\] \u003d Unknown State (0x0)  \nStateHistory\\[05\\] \u003d Unknown State (0x0)  \nStateHistory\\[04\\] \u003d Unknown State (0x0)  \nStateHistory\\[03\\] \u003d Unknown State (0x0)  \nFlags (0x00000130) DNF_ENUMERATED, DNF_IDS_QUERIED,  \nDNF_NO_RESOURCE_REQUIRED  \nCapabilityFlags (0x00000190) Removable, SilentInstall,  \nRawDeviceOK\n\nThis means, that the Toshiba nvme disk is not correct enumerated,\n\nhere is the debug print for the Samsung 960pro, which works\n\n0: kd\\\u003e !DevNode 0x8ad422e8  \nDevNode 0x8ad422e8 for PDO 0x8ad42640  \nParent 0x8ad48c38 Sibling 0000000000 Child 0000000000  \nInstancePath is \"SCSI\\\\Disk\\\u0026Ven_NVMe\\\u0026Prod_Samsung_SSD_960\\\u0026Rev_CXP7\\\\5\\\u0026301893a9\\\u00261\\\u0026000000\"  \nServiceName is \"disk\"  \nState \u003d DeviceNodeStarted (0x308)  \nPrevious State \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[15\\] \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[14\\] \u003d DeviceNodeStarted (0x308)  \nStateHistory\\[13\\] \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[12\\] \u003d DeviceNodeStarted (0x308)  \nStateHistory\\[11\\] \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[10\\] \u003d DeviceNodeStarted (0x308)  \nStateHistory\\[09\\] \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[08\\] \u003d DeviceNodeStarted (0x308)  \nStateHistory\\[07\\] \u003d DeviceNodeEnumerateCompletion (0x30d)  \nStateHistory\\[06\\] \u003d DeviceNodeStarted (0x308)  \nStateHistory\\[05\\] \u003d DeviceNodeStartPostWork (0x307)  \nStateHistory\\[04\\] \u003d DeviceNodeStartCompletion (0x306)  \nStateHistory\\[03\\] \u003d DeviceNodeResourcesAssigned (0x304)  \nStateHistory\\[02\\] \u003d DeviceNodeDriversAdded (0x303)  \nStateHistory\\[01\\] \u003d DeviceNodeInitialized (0x302)  \nStateHistory\\[00\\] \u003d DeviceNodeUninitialized (0x301)  \nStateHistory\\[19\\] \u003d Unknown State (0x0)  \nStateHistory\\[18\\] \u003d Unknown State (0x0)  \nStateHistory\\[17\\] \u003d Unknown State (0x0)  \nStateHistory\\[16\\] \u003d Unknown State (0x0)  \nFlags (0x00000130) DNF_ENUMERATED, DNF_IDS_QUERIED,  \nDNF_NO_RESOURCE_REQUIRED  \nCapabilityFlags (0x00000190) Removable, SilentInstall,  \nRawDeviceOK  \n\nAny ideas,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207254",
      "timestamp": "2018-07-14T05:29:23+00:00",
      "author": "schtrom",
      "content": "\u003e Your patched nvme.sys works now on Winserver 2003? From which operating system is the picture?  \n\u003e Both versions, 32 bit and 64 bit and can this nvme.sys can be used for XP 32 bit?\n\nMy test are done on Windows Server 2003 R2 SP2 x86. I think the driver should also be usable  \non Windows XP x86, but I never tested this. If storport runs on XP I think it should work.\n\n\u003e How do you change nvme.sys? Via assembler code?\n\nI recompiled the original OFA source code and added the missing storport extended functions  \nin my own code. I used the OFA version 1.5 for this in case any bugs has been addressed in  \nthe newer code. You can download this code with SVN.\n\nA list of the storport hotfixes can be found here:  \n[http://www.jhousecon...sp2-hotfixes-23](http://www.jhouseconsulting.com/2008/05/15/microsoft-windows-2003-post-sp2-hotfixes-23 \"External link\")  \n\nThe link in this article is not valid any more:  \n[http://support.microsoft.com/kb/943545](http://support.microsoft.com/kb/943545 \"External link\")  \n\nThe old article can be found here:  \n[https://web.archive....3545\\\u0026kbln\u003den-us](https://web.archive.org/web/20101212224030/http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum\u003d943545\u0026kbln\u003den-us \"External link\")  \n\nI used the waybackmachine to get the real Microsoft download link from the site above:  \n[http://support.micro...3545\\\u0026kbln\u003den-us](http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum\u003d943545\u0026kbln\u003den-us \"External link\")\n\n\u003e In the binaries folder, are there the checked or the free binaries?\n\nI only release the free binaries for performance reasons. The checked ones can be compiled  \neasily. Simply follow the steps in the ReadMe.txt.\n\n\u003e Toshiba RD400\n\nThe following are pure speculation. It could be that the \"NVM Express Revision 1.1b (NVMe)\"  \nof the Toshiba does not cover some commands issued to the drive. In your case I would install  \nWindows 10 x86 and the use the original Windows 10 OFA Community driver to see if the drive  \nworks with the original driver. If it does, there is something wrong in my patched code, if  \nit does not work, the OFA code cannot be used with the Toshiba or it is simply missing a needed  \ncommand. You can obtain the original binaries of the OFA driver by downloading the SVN repo:\n\n[https://svn.openfabr...vnrepo/nvmewin/](https://svn.openfabrics.org/svnrepo/nvmewin/ \"External link\")\n\nHave fun!\n\nKai\n\n"
    },
    {
      "id": "207255",
      "timestamp": "2018-07-14T09:50:08+00:00",
      "author": "Dietmar",
      "content": "Hi Kai,\n\nI tested the original OFA version 1.5 driver on Win7 32 bit\n\nand your driver also. Both do not work on nvme Toshiba RD400.\n\nBut the original OFA version 1.3 driver works on this Win7 with RD400.\n\nThis is interesting: So it is the fault of the source code\n\nfor the OFA 1.5 driver, that these problems appear,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207256",
      "timestamp": "2018-07-14T10:05:48+00:00",
      "author": "Dietmar",
      "content": "I did some more tests:\n\nOn Win 7 32 bit, the original OFA 1.5 nvme.sys works on Samsung 950 pro 500 GB.\n\nAlso the patched nvme.sys from Kai.\n\nBut on Windows XP SP3 32 bit, the patched nvme.sys also do not enumerate this Samsung 950 pro.\n\nI think, the source code from OFA version 1.3 is the better choice, just patched,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207257",
      "timestamp": "2018-07-14T11:07:17+00:00",
      "author": "Dietmar",
      "content": "Intel 750 nvme works on XP SP3 also.\n\nHere nice pic from Samsung 970pro 1TB on XP SP3![samsung970pro1_TB.jpg](https://preview.ibb.co/jMDibo/samsung970pro1_TB.jpg)\n\n"
    },
    {
      "id": "207258",
      "timestamp": "2018-07-14T12:29:56+00:00",
      "author": "Fernando1",
      "content": "Hello Kai,\n\ncongratulations for having compiled your brandnew OFA NVMe drivers v1.5.1200.0!\n\nI just have tested the 64bit variant with my Intel Z170 chipset system running Win10 x64 v1803 on a 250 GB Samsung 970 EVO SSD and am impressed by its performance (much better than all other NVMe drivers I had tested before).\n\nHere are the benchmark results I got with your NVMe driver:\n\n![Z170-NVMe-970EVO-OFA1512000.png](https://www2.pic-upload.de/img/35627252/Z170-NVMe-970EVO-OFA1512000.png)\n\nAs owner of the Win-RAID Forum ([\\\u003eLink\\\u003c](https://www.win-raid.com/ \"External link\")) I am very interested to get access to a driver variant, which has been designed for Windows 10. Since your currently available driver hasn\u0027t yet been digitally signed, I have done it by using my Win-RAID CA stamp, but due to the version number of the SYS file the OS Win10 sees the driver as being unsigned, with the consequence, that it is not easy to get it properly installed.\n\nBy the way: Very soon I will publish the results of my NVMe benchmark comparison tests within [\\\u003ethis\\\u003c](https://www.win-raid.com/t977f29-Benchmarks-Comparison-of-the-fastest-consumer-SSDs-SATA-vs-M-PCIe.html \"External link\") thread.\n\nGreetings from Germany\n\nDieter\n\n"
    },
    {
      "id": "207264",
      "timestamp": "2018-07-14T21:37:27+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI remembered the method from S4 ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) ,\n\nand now I have also the Samsung 950 pro\n\nin XP,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207265",
      "timestamp": "2018-07-14T22:08:45+00:00",
      "author": "dencorso",
      "content": "Great! I\u0027m following your progresses with much interest.\n\u003e I remembered the method from S4 ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) ,\n\u003e\n\u003e and now I have also the Samsung 950 pro in XP\n\nBut... what\u0027s the method from S4?  \nAnother question: do you really need to use diskdump.sys v. 5.2.3790.4173 or do diskdump.sys v. 5.1.2600.5512 also work OK with storport.sys v. 5.2.3790.4173? If you didn\u0027t test it, now that you have various working setups, please do test it.  \nA nice day for you, too!\n\n"
    },
    {
      "id": "207266",
      "timestamp": "2018-07-14T22:56:07+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nso much fun you can only have with XP:\n\nThe silly nvme 950pro does not like to boot with XP,\n\nbecause it has an own Bios which fake it as IDE harddisk. I will test this on a compi without\n\nany knowledge of nvme in Bios tomorrow.\n\nThe method from S4 is crazy but good:\n\nDuring the start process, XP cannot recognice,\n\nwhen you change the underlying harddisk,\n\nas long as it is absolut identic to the one during boot.\n\nFirst I thought, I kill my nvme disk, because with Winhex\n\nI write 00 everywhere on it. Aomei tells me then, that my \"ssd\"\n\nis frozen. But when I copy the valid mbr from other nvme,\n\nall was ok again.\n\nWell, when you are able to change very quick the bootdevice after first step,\n\nvoila it is the other ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png).\n\nSome parts are rescued here from old 911CD forum also,\n\nand I think the method from S4 is written as tutorial here.\n\nIn a minute I test, whether new dumpdisk.sys is needed or not,\n\nI write here,\n\nhave a nice evening\n\nDietmar\n\nEdit: Hi dencorso, no need to change the \"old\" diskdump.sys 5.1.2600.5512\n\nagainst the new 5.2.3790.4173 one. No difference, as I can see during boot,\n\nDietmar\n\n"
    },
    {
      "id": "207267",
      "timestamp": "2018-07-15T03:20:04+00:00",
      "author": "dencorso",
      "content": "Oh, I see! The \"method from S4\" is another name for the \"Kansas City Shuffle\"! OK!\n\n\u003e Hi, dencorso: no need to change the \"old\" diskdump.sys 5.1.2600.5512\n\u003e\n\u003e against the new 5.2.3790.4173 one. No difference, as I can see during boot,\n\u003e\n\u003e Dietmar\n\u003e\nThat\u0027s great news! So, just adding storport.sys v. 5.2.3790.4173 and Kai\u0027s nvme.sys is enough! Good!\n\nHowever I agree that if Kai finds time to also patch version 1.3, maybe it can be even more universal as a driver.\n\n"
    },
    {
      "id": "207269",
      "timestamp": "2018-07-15T09:18:51+00:00",
      "author": "Dietmar",
      "content": "Hi,\n\nhere comes TXTSETUP.OEM for the nvme.sys Textmodedriver\n\nUse makecab.exe for the storport.sys file\n\nand Nlite 1.4.93 . With the build \\*.iso and the install methode from\n\n[https://www.overcloc...0-A-motherboard](https://www.overclockers.com/forums/showthread.php/774554-How-to-install-Windows-XP-on-a-2016-Skylake-Asus-Z170-A-motherboard \"External link\")\n\nwhole install of XP on a nvme disk lasts less than 5 min,\n\nhave a nice day\n\nDietmar\n\n\\[Disks\\]  \ndisk0 \u003d \"nvme Installation Disk\", \\\\nvme.inf, \\\\  \n\n\\[Defaults\\]  \nSCSI \u003d nvme  \n\n\\[SCSI\\]  \nnvme \u003d \"nvme Installation Disk\", nvme  \n\n\\[Files.SCSI.nvme\\]  \ninf \u003d disk0, nvme.inf  \ndriver \u003d disk0, nvme.sys, nvme  \n\n\u003cbr /\u003e\n\n\\[HardwareIds.SCSI.nvme\\]  \nid \u003d \"PCI\\\\CC_010802\",\"nvme\"  \n\n\u003cbr /\u003e\n\n\\[Config.nvme\\]  \nvalue \u003d \"\", Tag, REG_DWORD, 1  \n\n"
    },
    {
      "id": "207270",
      "timestamp": "2018-07-15T09:34:10+00:00",
      "author": "Wonko the Sane",
      "content": "Just in case, the \"Kansas City Shuffle\" thread can be (partially) retrieved from here:\n\n[https://web.archive....showtopic\u003d21242](https://web.archive.org/web/20160411185121/http://www.911cd.net/forums//index.php?showtopic\u003d21242 \"External link\")\n\nand cdob posted here on reboot pro a nice Winbuilder thingy:\n\n[http://reboot.pro/to...br-boot-device/](http://reboot.pro/topic/5487-chainboot-other-mbr-boot-device/ \"\")\n\nthat embeds the copy-sgs.exe by karyonix (later/better version of the cs.exe by S4**e**)\n\nI am adding the most useful related files (that were on the 911CD thread) here, if needed.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko  \n\n#### Attached Files {#attach_wrap}\n\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003dab6fbef8ac2f07cad2a5f0f73335e3c7\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16127 \"Download attachment\") [**copysgcs.zip**](http://reboot.pro/index.php?s\u003dab6fbef8ac2f07cad2a5f0f73335e3c7\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16127 \"Download attachment\") **34.2KB** 595 downloads\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003dab6fbef8ac2f07cad2a5f0f73335e3c7\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16128 \"Download attachment\") [**cs.zip**](http://reboot.pro/index.php?s\u003dab6fbef8ac2f07cad2a5f0f73335e3c7\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16128 \"Download attachment\") **1.09KB** 556 downloads\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003dab6fbef8ac2f07cad2a5f0f73335e3c7\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16129 \"Download attachment\") [**chainboot_v1.02.zip**](http://reboot.pro/index.php?s\u003dab6fbef8ac2f07cad2a5f0f73335e3c7\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16129 \"Download attachment\") **33.69KB** 599 downloads\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003dab6fbef8ac2f07cad2a5f0f73335e3c7\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16130 \"Download attachment\") [**fixWcs.zip**](http://reboot.pro/index.php?s\u003dab6fbef8ac2f07cad2a5f0f73335e3c7\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16130 \"Download attachment\") **1.45KB** 584 downloads\n\n"
    },
    {
      "id": "207271",
      "timestamp": "2018-07-15T10:19:54+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nfor some strange reasons the new storport.sys driver\n\ndisappeares after txt setup switching to gui setup which gives BSOD 0x07B brrr..\n\nSo you have to copy it by hand to folder Windows\\\\system32\\\\drivers .\n\nBut then installation complets,\n\nin less than one minute,\n\nI think it is first compi in world :tongue: ,\n\nwhere XP is installed on nvme disk,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207273",
      "timestamp": "2018-07-15T11:39:57+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Hi all,\n\u003e\n\u003e for some strange reasons the new storport.sys driver\n\u003e\n\u003e disappeares after txt setup switching to gui setup which gives BSOD 0x07B brrr..\n\u003e\nMaybe it is connected to this:\n\n[https://support.micr...-windows-xp-and](https://support.microsoft.com/en-us/help/314859/limited-oem-driver-support-is-available-with-f6-during-windows-xp-and \"External link\")\n\ni.e. the hardware ID is conflicting with an existing in the CD/iso driver? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207274",
      "timestamp": "2018-07-15T11:54:54+00:00",
      "author": "Dietmar",
      "content": "Hi Jaclaz,\n\nnice to see you :smile: !\n\nYes, the link from you makes everything clear:\n\n\"This replacement allows Windows to use the updated OEM driver during text-mode setup, but you must copy the same updated OEM driver to the System32\\\\Drivers folder of the final Windows installation before the installation continues into graphics-mode setup.\"\n\nWhat a crazy behavior, but you can copy this driver by hand during install,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207278",
      "timestamp": "2018-07-15T14:26:40+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI just install via USB 3.1 XP SP3 on my coffeelake Asus z370 Apex i8700-k motherboard\n\non nvme Samsung 960pro 1TB,\n\nhitting F5 (no Acpi).\n\nAfter copy of storport.sys.\n\nIt is now ready,\n\nfast ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png) ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif), no yellow questionsmark in device manager, gtx 980\n\nand together with win 10, 64 bit on mbr with Samsung 970pro 1TB ,\n\nhave a nice day\n\nDietmar\n\nPS: like dream..\n\n"
    },
    {
      "id": "207282",
      "timestamp": "2018-07-16T08:51:05+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI make some more tests during install XP SP3 on nvme disk.\n\nOn newer motherboards \\\u003e\u003d Skylake Processors,\n\nAcpi from XP does not work correct. Why? May be somebody knows..\n\nWhen you hit F5 during install, you can chose, what kind of processor you wish.\n\nI make a test with standard pc (one processor) and *MPS Multiprocessor PC.*\n\nInteresting: From 3500 MByte/s it moves back to 1000 MByte/s on single processor.\n\nI remember, that you can chose Hal.dll in boot.ini,\n\nhave a nice day\n\nDietmar\n\nPS: Original XP partitions are not aligned, means 63 sectors instead 2048 sectors\n\nbefore partition. But from Win10 or Win7 you can format your nvme disk before XP install.\n\nXP also starts from aligned partition with 2048 sectors before.\n\nNow I compare Fat32 against ntfs. On Fat32, much less writes are doing on nvme disk.\n\nTrim is not a problem. In about 2 weeks you can trim your nvme disk with the manufacture tool,\n\nI just did it from Win10 Magician for Samsung disks.\n\n"
    },
    {
      "id": "207283",
      "timestamp": "2018-07-16T09:28:43+00:00",
      "author": "Fernando1",
      "content": "\u003e ACPI from XP does not work correct. Why? May be somebody knows.\n\nYou will get more ACPI setting options, if you hit **F7** when prompted to hit F6.\n\n"
    },
    {
      "id": "207284",
      "timestamp": "2018-07-16T11:22:07+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e PS: Original XP partitions are not aligned, means 63 sectors instead 2048 sectors\n\u003e\n\u003e before partition. But from Win10 or Win7 you can format your nvme disk before XP install.\n\u003e\n\u003e XP also starts from aligned partition with 2048 sectors before.\n\u003e\n\u003e Now I compare Fat32 against ntfs. On Fat32, much less writes are doing on nvme disk.\n\u003e\n\u003e Trim is not a problem. In about 2 weeks you can trim your nvme disk with the manufacture tool,\n\u003e\n\u003e I just did it from Win10 Magician for Samsung disks.\n\nAs a side note, there should be no problem with creating the (aligned) partition (only creating the entry in the MBR, without formatting it) in grub4dos manually or using the partnew command, then the XP setup should find an existing (not formatted) aligned partition and you can format it normally from the setup.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207293",
      "timestamp": "2018-07-16T19:31:00+00:00",
      "author": "Dietmar",
      "content": "Fat32 XPSP3 auf Samsung 960pro 500 Gb,\n\nnot bad:))\n\n-----------------------------------------------------------------------  \nCrystalDiskMark 5.1.2 © 2007-2016 hiyohiyo  \nCrystal Dew World : [http://crystalmark.info/](http://crystalmark.info/ \"External link\")  \n-----------------------------------------------------------------------  \n\\* MB/s \u003d 1,000,000 bytes/s \\[SATA/600 \u003d 600,000,000 bytes/s\\]  \n\\* KB \u003d 1000 bytes, KiB \u003d 1024 bytes  \n\nSequential Read (Q\u003d 32,T\u003d 1) : 3513.523 MB/s  \nSequential Write (Q\u003d 32,T\u003d 1) : 2038.635 MB/s  \nRandom Read 4KiB (Q\u003d 32,T\u003d 1) : 540.234 MB/s \\[131893.1 IOPS\\]  \nRandom Write 4KiB (Q\u003d 32,T\u003d 1) : 267.359 MB/s \\[ 65273.2 IOPS\\]  \nSequential Read (T\u003d 1) : 2908.008 MB/s  \nSequential Write (T\u003d 1) : 2035.737 MB/s  \nRandom Read 4KiB (Q\u003d 1,T\u003d 1) : 56.380 MB/s \\[ 13764.6 IOPS\\]  \nRandom Write 4KiB (Q\u003d 1,T\u003d 1) : 237.746 MB/s \\[ 58043.5 IOPS\\]  \n\nTest : 1024 MiB \\[C: 58.2% (17.1/29.3 GiB)\\] (x5) \\[Interval\u003d5 sec\\]  \nDate : 2018/07/16 21:24:28  \nOS : Windows XP Professional SP3 \\[5.1 Build 2600\\] (x86)\n\n"
    },
    {
      "id": "207294",
      "timestamp": "2018-07-16T22:02:38+00:00",
      "author": "Dietmar",
      "content": "And here all the same, just NTFS nvme instead of Fat32.\n\nNTFS is faster, but also writes much more to disk.\n\nHave a nice evening\n\nDietmar\n\nNTFS Samsung960pro500GB  \n-----------------------------------------------------------------------  \nCrystalDiskMark 5.1.2 © 2007-2016 hiyohiyo  \nCrystal Dew World : [http://crystalmark.info/](http://crystalmark.info/ \"External link\")  \n-----------------------------------------------------------------------  \n\\* MB/s \u003d 1,000,000 bytes/s \\[SATA/600 \u003d 600,000,000 bytes/s\\]  \n\\* KB \u003d 1000 bytes, KiB \u003d 1024 bytes  \n\nSequential Read (Q\u003d 32,T\u003d 1) : 3475.414 MB/s  \nSequential Write (Q\u003d 32,T\u003d 1) : 2073.956 MB/s  \nRandom Read 4KiB (Q\u003d 32,T\u003d 1) : 945.480 MB/s \\[230830.1 IOPS\\]  \nRandom Write 4KiB (Q\u003d 32,T\u003d 1) : 933.886 MB/s \\[227999.5 IOPS\\]  \nSequential Read (T\u003d 1) : 2843.380 MB/s  \nSequential Write (T\u003d 1) : 2021.353 MB/s  \nRandom Read 4KiB (Q\u003d 1,T\u003d 1) : 59.257 MB/s \\[ 14467.0 IOPS\\]  \nRandom Write 4KiB (Q\u003d 1,T\u003d 1) : 235.984 MB/s \\[ 57613.3 IOPS\\]  \n\nTest : 1024 MiB \\[C: 19.6% (12.0/61.4 GiB)\\] (x5) \\[Interval\u003d5 sec\\]  \nDate : 2018/07/16 23:56:54  \nOS : Windows XP Professional SP3 \\[5.1 Build 2600\\] (x86)  \n\n"
    },
    {
      "id": "207295",
      "timestamp": "2018-07-17T07:40:10+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e And here all the same, just NTFS nvme instead of Fat32.\n\u003e\n\u003e NTFS is faster, but also writes much more to disk.\n\u003e\n\u003e Have a nice evening  \n\nOn XP, you should disable file last access writes (if you haven\u0027t already done that):\n\n[https://www.howtogee...-in-windows-xp/](https://www.howtogeek.com/howto/windows/speed-up-disk-access-by-disabling-last-access-updating-in-windows-xp/ \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207301",
      "timestamp": "2018-07-18T18:36:46+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\na big source Mathematica file 130 MB (only text)\n\nloads on Win10 in 18 sec from nvme,\n\non XP in about 0.5 sec, no difference between harddisk WD 2 TB black or nvme.\n\nI work long time with Mathematica,\n\nso I am very astonished about this behavior of Mathematica 11.3\n\non Win 10 64 bit,\n\nhave a nice day\n\nDietmar\n\nPS: I am very interested about loading time of big Mathematica files on other machines.\n\n"
    },
    {
      "id": "207304",
      "timestamp": "2018-07-19T07:24:58+00:00",
      "author": "schtrom",
      "content": "Hi all,\n\nI have patched the OFA driver version 1.3 today. In addition I uploaded also an updated version 1.5 which is signed with a test certificate.\n\nPay attention: If you click the download link on SourceForge the version 1.3 is selected. I did this, because it seems this one has better backward compatibility as version 1.5.\n\n```\nChangelog Version 1.5 Build 20180719\n--------------------------------------\n\n- added driver signing and a catalog file to the driver, this way it can\n  be used with test signing in Windows 10\n\n\nChangelog Version 1.3 Build 20180719\n--------------------------------------\n\n- ported the patched code to version 1.3 by using the original OFA driver\n  source code of version 1.3\n- should fix a problem with Toshiba RD400 drives which only seem to work\n  with the V1.3 driver from OFA and not the V1.5\n- added driver signing and a catalog file to the driver, this way it can\n  be used with test signing in Windows 10\n```\n\n@Dieter: I hope the version 1.3 does work with your Toshiba drive now!\n\n@Fernando: Much respect to the Win-RAID stuff! I used it some time ago to make AHCI drivers work on 2003 Server for F6 install. Pretty good threads on the forum there. I test signed both new drivers V1.5 and V1.3 in the new version. If you have access to a valid certificate this would\n\nbe nice, but I doubt that Microsoft will sign experimental drivers that do not met their requirements and cash flow...\n\nKeep it up!\n\n"
    },
    {
      "id": "207306",
      "timestamp": "2018-07-19T09:11:54+00:00",
      "author": "Fernando1",
      "content": "@schtrom:\n\nThanks for the updated OFA drivers.\n\nSince I want to test them while running Win10 x64 v1803, I need an nvme.sys file, which matches my OS.\n\u003e In addition I uploaded also an updated version 1.5 which is signed with a test certificate.\n\nCan you give me the download link to the updated v1.5 version? I cannot find it.\n\nEDIT: I just found it! Never mind.\n\n**Edited by Fernando1, 19 July 2018 - 09:14 AM.**\n"
    },
    {
      "id": "207307",
      "timestamp": "2018-07-19T10:34:41+00:00",
      "author": "Dietmar",
      "content": "Hi Kai,\n\nyour new nvme driver, build from OFA 1.3 version works now also\n\non Toshiba RD400 on Win 7!\n\nI will make more tests today,\n\namazing work :smile:\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207308",
      "timestamp": "2018-07-19T11:47:04+00:00",
      "author": "Dietmar",
      "content": "Hi Kai,\n\njust in this moment I am installing XP SP3\n\nwith your new nvme driver ver 1.3\n\non Toshiba RD400 ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png).\n\nInteresting, on motherboards with M.2 support it can happen,\n\nthat only Pcie x2 is supported.\n\nTo overcome this for tests,\n\nI put the RD400 M.2 chip on a PCIe card\n\nand put this to the graficcard slot, because this is always the fastest,\n\nDietmar\n\n"
    },
    {
      "id": "207309",
      "timestamp": "2018-07-19T12:20:01+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI noted, that with the Kai nvme.sys vers. 1.5 on Toshiba RD400\n\nyou can not boot in Win7 and XP.\n\nWith the nvme.sys vers. 1.3 from Kai today you can boot in Win 7, XP on RD 400 also.\n\nBut: Connected as a co-device, the RD 400 works on XP also with 1.5 version.\n\nThis gives me the possibily, to make a 1:1 speed test for Toshiba RD 400 on\n\nnvme.sys ver. 1.3 and ver. 1.5.\n\nHere are the results:\n\nnvme.sys 1.3 from Kai on Toshiba RD400 on XPSP3\n\n-----------------------------------------------------------------------  \nCrystalDiskMark 5.1.2 © 2007-2016 hiyohiyo  \nCrystal Dew World : [http://crystalmark.info/](http://crystalmark.info/ \"External link\")  \n-----------------------------------------------------------------------  \n\\* MB/s \u003d 1,000,000 bytes/s \\[SATA/600 \u003d 600,000,000 bytes/s\\]  \n\\* KB \u003d 1000 bytes, KiB \u003d 1024 bytes  \n\nSequential Read (Q\u003d 32,T\u003d 1) : 2101.577 MB/s  \nSequential Write (Q\u003d 32,T\u003d 1) : 596.470 MB/s  \nRandom Read 4KiB (Q\u003d 32,T\u003d 1) : 408.596 MB/s \\[ 99754.9 IOPS\\]  \nRandom Write 4KiB (Q\u003d 32,T\u003d 1) : 204.841 MB/s \\[ 50010.0 IOPS\\]  \nSequential Read (T\u003d 1) : 1475.680 MB/s  \nSequential Write (T\u003d 1) : 626.032 MB/s  \nRandom Read 4KiB (Q\u003d 1,T\u003d 1) : 42.840 MB/s \\[ 10459.0 IOPS\\]  \nRandom Write 4KiB (Q\u003d 1,T\u003d 1) : 179.676 MB/s \\[ 43866.2 IOPS\\]  \n\nTest : 1024 MiB \\[C: 10.8% (3.2/29.3 GiB)\\] (x5) \\[Interval\u003d5 sec\\]  \nDate : 2018/07/19 14:00:17  \nOS : Windows XP Professional SP3 \\[5.1 Build 2600\\] (x86)\n\nnvme.sys 1.5 from Kai on Toshiba RD400 on XPSP3\n\n-----------------------------------------------------------------------  \nCrystalDiskMark 5.1.2 © 2007-2016 hiyohiyo  \nCrystal Dew World : [http://crystalmark.info/](http://crystalmark.info/ \"External link\")  \n-----------------------------------------------------------------------  \n\\* MB/s \u003d 1,000,000 bytes/s \\[SATA/600 \u003d 600,000,000 bytes/s\\]  \n\\* KB \u003d 1000 bytes, KiB \u003d 1024 bytes  \n\nSequential Read (Q\u003d 32,T\u003d 1) : 2180.447 MB/s  \nSequential Write (Q\u003d 32,T\u003d 1) : 584.191 MB/s  \nRandom Read 4KiB (Q\u003d 32,T\u003d 1) : 402.199 MB/s \\[ 98193.1 IOPS\\]  \nRandom Write 4KiB (Q\u003d 32,T\u003d 1) : 203.706 MB/s \\[ 49732.9 IOPS\\]  \nSequential Read (T\u003d 1) : 1523.863 MB/s  \nSequential Write (T\u003d 1) : 618.348 MB/s  \nRandom Read 4KiB (Q\u003d 1,T\u003d 1) : 41.213 MB/s \\[ 10061.8 IOPS\\]  \nRandom Write 4KiB (Q\u003d 1,T\u003d 1) : 189.493 MB/s \\[ 46262.9 IOPS\\]  \n\nTest : 1024 MiB \\[D: 11.0% (3.2/29.3 GiB)\\] (x5) \\[Interval\u003d5 sec\\]  \nDate : 2018/07/19 14:14:37  \nOS : Windows XP Professional SP3 \\[5.1 Build 2600\\] (x86)\n\nAs you can see: Both speeds are nearly equal.\n\nSo, for compatibility the nvme.sys ver. 1.3 from Kai from today is the better choice,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207311",
      "timestamp": "2018-07-19T16:18:26+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI also succeed to install XP SP3 on Asus z370 Apex X motherboard (coffee lake)\n\non Samsung 950 pro with the new nvme.sys ver. 1.3 from Kai.\n\nThis Samsung nvme disk is not easy to handle, because it has own Bios.\n\nAs boot device for XP this 950 do not work on any other computer until now,\n\nbut there as codevice.\n\nI tested Asus z97-k and Asus z87i-pro,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207312",
      "timestamp": "2018-07-19T20:04:47+00:00",
      "author": "dencorso",
      "content": "Well, that\u0027s really great news! ![:cheerleader:](http://reboot.pro/public/style_emoticons/default/cheerleader.gif) ![:cheerleader:](http://reboot.pro/public/style_emoticons/default/cheerleader.gif) ![:cheerleader:](http://reboot.pro/public/style_emoticons/default/cheerleader.gif)  \nIf I understood correctly, then now all the NVMe cards you\u0027ve tested work fully and can be booted from, by using Kai\u0027s patched v. 1.3!!!\n\nNow, let me ask you two questions:\n\n1.) Which M.2 chip to PCIe adapter card do you use?   \n2.) Can you list in a single post all the boards and NVMe cards tested on XP, for easy reference?\n\nThanks in advance! You rock! ![:worship:](http://reboot.pro/public/style_emoticons/default/worship.gif)\n\n@Kai: Thanks a whole lot for the drivers, you do rock! ![:worship:](http://reboot.pro/public/style_emoticons/default/worship.gif)  \n\n"
    },
    {
      "id": "207313",
      "timestamp": "2018-07-19T21:30:02+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nI have 2 different M.2 to Pcie cards,\n\nboth work. They are noname, so I think each card will work for XP.\n\nI did not find any difference using direct M.2 slot or those cards.\n\nAll boards, which supplies nvme in Bios work. I have tested Asus z370, z97-k for XP install.\n\nUntil now, I was not able to boot direct any motherboard, which does not have support in Bios for nvme.\n\nBut the methode from S4e works there also.\n\nI thought, that maybe the Samsung 950 pro (because of own nvme Bios) can start XP from motherboard,\n\nwhich never heard anything in life from nvme. But this does not work for example on Asus z87i-pro.\n\nCards I tested: Toshiba RD 400, Samsung 950 pro, Samsung 960 pro, Samsung 970 pro, Intel 750.\n\nAll work with the new driver nvme.sys ver. 1.3 from Kai, Samsung 950 pro is very difficult,\n\nhave a nice evening\n\nDietmar\n\n"
    },
    {
      "id": "207314",
      "timestamp": "2018-07-20T03:06:07+00:00",
      "author": "dencorso",
      "content": "Hi, Dietmar!  \nThanks for the prompt reply!  \nFernando1 has found a way ([link1](https://forums.anandtech.com/threads/full-nvme-support-possible-for-older-intel-chipsets.2437588/ \"External link\") and [link2](https://www.win-raid.com/t871f50-Guide-How-to-get-full-NVMe-support-for-all-Systems-with-an-AMI-UEFI-BIOS-7.html#msg17072 \"External link\")) to support boot on boards based on Z68 - Z87, but it requires modding the BIOS.  \nHowever, on his posts he speaks only about booting from GPT, if I understood right, but since one of the added modules is NVMEINT13, I bet it\u0027d be possible not only to boot XP from MBR, but maybe even DOS from MBR, by using Fernando1\u0027s finding. And since he\u0027s also been following this thread, I hope he\u0027ll tell us his thoughts about it. @Fernando1: would you please be so kind as to chime in?  \nA very nice day th you both!\n\n"
    },
    {
      "id": "207316",
      "timestamp": "2018-07-20T10:07:26+00:00",
      "author": "Fernando1",
      "content": "@dencorso:\n\nOnly very few NVMe SSD models (e.g. the Samsung 950 Pro) contain a \"LEGACY mode\" NVMe Option ROM, which is required, if the user wants to boot directly off the NVMe SSD by using the Master Boot Record (MBR) partition table. All other NVMe SSDs can only be used as bootable device, if\n\na ) the related mainboard BIOS contains a compatible NVMe EFI module and\n\nb ) the OS can be installed by using the GUI-mode Partition Table (GPT).\n\nThat means, that it should not be a big NVMe boot problem, when the user has an NVMe SSD with a LEGACY mode NVMe Option ROM in-the box (like the Samsung 950 Pro), but severe problems if not.\n\nNevertheless there are other methods available to get a Windows Operating System installed onto an NVMe SSD without an NVMe Option ROM. In this case the bootloader has to be outside the NVMe SSD. [\\\u003eHere\\\u003c](https://www.win-raid.com/f50-HOW-TO-s-NVMe-Support-for-old-Systems.html \"External link\") you can find some guides about how to do it.\n\n"
    },
    {
      "id": "207317",
      "timestamp": "2018-07-20T14:28:25+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI make some more tests.\n\nWith the nice tutorial from Fernando, how to enable nvme in Bios\n\n[https://www.win-raid...-UEFI-BIOS.html](https://www.win-raid.com/t871f50-Guide-How-to-get-full-NVMe-support-for-all-Systems-with-an-AMI-UEFI-BIOS.html \"External link\")\n\nI succeed to install Win10 on Asus z87i-pro, which never heard about nvme in life before. ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)\n\nBoottime is nice, 2 sec on Toshiba RD400.\n\nBut this install works only for Uefi boot.\n\nNo win10, win7, XP can be booted with this Bios mod without Uefi,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207318",
      "timestamp": "2018-07-20T18:54:17+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI think, it is also possible to get full legacy support with Int13 for nvme boot.\n\nDoes anybody know, where a valid NVMEINT13.ffs can be found for Asus motherboards\n\nand how to integrate this in Bios,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207319",
      "timestamp": "2018-07-20T19:52:51+00:00",
      "author": "Fernando1",
      "content": "\u003e I think, it is also possible to get full legacy support with Int13 for nvme boot.\n\u003e\n\u003e Does anybody know, where a valid NVMEINT13.ffs can be found for Asus motherboards and how to integrate this in Bios,\n\n1. The NVMEINT13.ffs is an **EFI** \"DXE Driver\" module like the NvmExpressDxe_4.ffs file. That means, that it will not be active, if you boot in LEGACY mode.\n\n2. You can find this module in the latest BIOS of all ASUS mainboards with a modern Intel chipset (from 9-Series up).\n\n3. All \"DXE Drivers\" can be integrated the same way as written within my guide about how to get full NVMe support.\n\n"
    },
    {
      "id": "207320",
      "timestamp": "2018-07-20T20:29:27+00:00",
      "author": "Dietmar",
      "content": "Hi Fernando,\n\nall my Asus boards with nvme support (from beginning)\n\ncan boot in legacy mode for nvme (for example XP).\n\nSo, there must be a nvme part in Bios,\n\nthat can do this.\n\nWhen NVME**INT13**.ffs is also an EFi ,\n\nfor what is the int 13 there,\n\nhave a nice evening\n\nDietmar\n\n"
    },
    {
      "id": "207321",
      "timestamp": "2018-07-20T20:42:51+00:00",
      "author": "Fernando1",
      "content": "@Dietmar:\n\nWhat do you mean with \"boot in legacy mode\"?\n\nIs the name of the SSD shown within the Boot Menu?\n\nWhere (on which disk drive) is the boot sector?\n\n"
    },
    {
      "id": "207322",
      "timestamp": "2018-07-20T20:52:02+00:00",
      "author": "Dietmar",
      "content": "Hi Fernando,\n\njust boot nvme disk from mbr using int 13.\n\nWith NvmExpressDxe_4.ffs this is not possible.\n\nI see, that through many years you work with bios modding\n\nfor nvme.\n\nSo I think, with some help :smile:\n\nboot XP via nvme on any motherboard\n\ncan be done,\n\nhave a nice evening\n\nDietmar\n\n"
    },
    {
      "id": "207323",
      "timestamp": "2018-07-20T21:07:52+00:00",
      "author": "Fernando1",
      "content": "Hi Dietmar,\n\nyou didn\u0027t answer my questions.\n\n"
    },
    {
      "id": "207324",
      "timestamp": "2018-07-20T21:32:49+00:00",
      "author": "Dietmar",
      "content": "Hi Fernando,\n\nthe name of the disk is not shown,\n\nonly \"Pata ss\" as I remember.\n\nI tested different nvme disks.\n\nNow I fetched from Asus z97-k the 3 nvme files from Bios\n\nand integrate them to Bios from Asus z87i-pro.\n\nBut now comes a message\n\n\"The current BIOS settings do not fully support the boot device.\n\nPress \\[F1\\] to enter the BIOS Setup.\"\n\nBut no reaction from Samsung 960 pro 500 GB,\n\nso this does not work,\n\nDietmar\n\nPS: I used fresh BIOS (no NvmExpressDxe_4.ffs there in) before I integrate\n\nNvme.ffs\n\nNvmeSmm.ffs\n\nNVMEINT13.ffs\n\n"
    },
    {
      "id": "207325",
      "timestamp": "2018-07-20T21:39:00+00:00",
      "author": "Fernando1",
      "content": "@Dietmar:\n\nAnd where is the boot sector (MBR), when you are running Windows XP on the NVMe SSD?\n\n"
    },
    {
      "id": "207326",
      "timestamp": "2018-07-20T21:41:26+00:00",
      "author": "Dietmar",
      "content": "On the nvme disk.\n\nWith the Bios from Asus z97-k\n\nthis works,\n\nalso on Asus z370 Apex,\n\nall UEFI disabled in Bios,\n\nDietmar\n\n"
    },
    {
      "id": "207327",
      "timestamp": "2018-07-20T22:08:52+00:00",
      "author": "dencorso",
      "content": "@Dietmar:\n\nYou said: \"Samsung 950 pro is very difficult\"  \nBut were you able to boot from it on the Asus z87i-pro with the original BIOS?  \nOr, since the modded BIOS is not yet fully working, can you boot from it on the Asus z87i-pro now?\n\nOr, even better, have you a Z68 or Z77 board to try booting XP from the Samsung 950 pro with Kai\u0027s 1.3 driver?  \nThere\u0027s no hurry, I\u0027m just curious (and considering acquiring a Samsung 950 pro, too).\n\n"
    },
    {
      "id": "207328",
      "timestamp": "2018-07-20T22:20:24+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nonly on the Asus z370 Apex X\n\nI can boot XP from the Samsung 950 pro via mbr.\n\nAs codevice it works there and also via S4e methode.\n\nOn the Asus z87i-pro with modded Bios I can only boot Win 10 in UEFI mode.\n\nNow I integrate all 4 nvme files to the Bios from Asus z87i-pro,\n\nbut still Win10 in UEFI mode can boot from there, no mbr, all disks are shown as PATA SS\n\nhave a nice evening\n\nDietmar\n\n"
    },
    {
      "id": "207329",
      "timestamp": "2018-07-20T22:37:08+00:00",
      "author": "dencorso",
      "content": "Hi, Dietmar!  \nS4e\u0027s method has a downside, IIRR: it works great for booting a PE, but if windows writes to the system hive during the 1st phase of the boot (the \"zebra\"), and tries to read back at the 2nd phase, then it breaks down. Or something like that... it\u0027s been a long time since I last used it...  \nBut maybe it\u0027ll be the only option for older boards...  \nThanks for the prompt reply and have a nice evening, you too!\n\n"
    },
    {
      "id": "207330",
      "timestamp": "2018-07-20T22:49:51+00:00",
      "author": "Dietmar",
      "content": "I also tested NvmExpressDxE_**2**.ffs\n\nexakt the same behavior on Asus z87i-pro,\n\nonly Win10 can start in UEFI mode,\n\nDietmar\n\nEDIT: Exakt the same behavior for File_DXE_driver_NvmExpressDxe_NvmExpressDxe.ffs\n\n"
    },
    {
      "id": "207333",
      "timestamp": "2018-07-21T12:08:40+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI make some more tests for to make the situation clearer with boot from mbr and Int13 from nvme disk (means NO UEFI).\n\nOn Asus z97-deluxe/USB3.1 XP can start very fast from mbr, only nvme disk connected (NO UEFI).\n\nThen I deleted in Bios the three files\n\nNvme.ffs\n\nNvmeSmm.ffs\n\nNVMEINT13.ffs\n\nThen I tested nvme boot again: Just nothing recogniced from Bios..(normal).\n\nWhen I search for string \"nvme\" in this cut Bios, I still found a place \"Setup\" (big 200kb dxe file)\n\nwith (3 times) Unicode text \"nvme\" found in 97E409E6-4CC1-11D9-81F6-000000000000\n\nThen I install NvmExpressDxe_4.ffs from Fernandos Website.\n\nNow in Bios all nvme disks have the name \"PATA SS\",\n\nonly UEFI boot is possible, means no XP.\n\nSo now I think, the meaning INT13 in one of the files name is just true,\n\nhave a nice day\n\nDietmar\n\nEDIT: Then I added again file NVMEINT13.ffs, no XP\n\nTo this I added file NvmeSmm.ffs, no XP\n\nTo this I added file Nvme.ffs, no XP\n\nThen I delete NvmExpressDxe_4.ffs, XP boots from mbr on nvme disk :smile:.\n\nEDIT2: I extracted the dxe files\n\nNVMEINT13.ffs\n\nNvmeSmm.ffs\n\nNvme.ffs\n\nSetup.ffs from Asus z97-pro Bios\n\nThis where all the places, where the entry \"nvme\" can be found in BIOS.\n\nThen I delete in original Bios from Asus z87i-pro the Setup.ffs dxe file\n\nand integrate there all the files above from Asus z97-pro Bios.\n\nBig risk, but the Asus z87i-pro has a BIOS-flash possibilty, were you can install a new BIOS even without processor in slot.\n\nAfter renaming the \\*.cap file with the Asus BRenamerl.exe tool to Z87IP.CAP I flashed this BIOS.\n\nStart looks like normal, but no nvme device at all can be recogniced. When going to Bios \"advanced\" I got black screen\n\nonly mouse cursor alive. So I decided, better to flash back ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif),\n\nand now all is ok again, but only Win 10 in UEFI mode I can boot from motherboard Asus z87i-pro.\n\n"
    },
    {
      "id": "207334",
      "timestamp": "2018-07-21T13:45:04+00:00",
      "author": "Dietmar",
      "content": "Nice would be,\n\nto have a BIOS debugger.\n\nDoes somebody know about such a tool,\n\nhave a nice day\n\nDietmar\n\nPS: Now debug nvme XP is also possible with Qemu.\n\n"
    },
    {
      "id": "207336",
      "timestamp": "2018-07-21T19:00:23+00:00",
      "author": "dencorso",
      "content": "Hi, Dietmar:\n\nHave you tried to add the modules havested from Asus z97-deluxe/USB3.1 into the BIOS of the Asus z87i-pro?\n\nMaybe even just NVMEINT13.ffs will be enough. If not, then add Nvme.ffs and NvmeSmm.ffs, in any order.\n\nIs it possible? Does it work?\n\nHave a nice day!\n\n"
    },
    {
      "id": "207337",
      "timestamp": "2018-07-21T19:07:32+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nI tested changing file one by one,\n\nno success,\n\nhave a nice day\n\nDietmar\n\nPS: I think, the problem is, that I do not succeed to recognice any nvme disk with\n\nNVMEINT13.ffs\n\nNvmeSmm.ffs\n\nNvme.ffs files in Bios of Asus z87i-pro.\n\nThe only one that work are those single files from Fernando like NvmExpressDxe_4.ffs.\n\n"
    },
    {
      "id": "207338",
      "timestamp": "2018-07-21T20:16:44+00:00",
      "author": "dencorso",
      "content": "Are [these files](https://onedrive.live.com/?authkey\u003d%21AHeT82KI488djfU\u0026id\u003d8958E7AE29E4BA6C%2110181\u0026cid\u003d8958E7AE29E4BA6C \"External link\") perhaps relevant? I just found them mentioned [elsewhere](https://rog.asus.com/forum/archive/index.php/t-48001-p-3.html \"External link\")... ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nIn one of the posts one reads:  \n\u003e If you want NVME support - download the one in the NVME TESTING folder.\n\n"
    },
    {
      "id": "207339",
      "timestamp": "2018-07-21T20:44:42+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nthere are the each 3 original Bios files for motherboards with nvme\n\nor modded boards with the single nvme file from Fernando.\n\nI need generic NVMEINT13.ffs\n\nNvmeSmm.ffs\n\nNvme.ffs\n\nhave a nice evening\n\nDietmar\n\n"
    },
    {
      "id": "207340",
      "timestamp": "2018-07-21T22:21:49+00:00",
      "author": "Dietmar",
      "content": "From Intel\n\n[https://www.intel.co...01US_Rev1-1.pdf](https://www.intel.com/content/dam/support/us/en/documents/memory-and-storage/enthusiast-ssds/NVMe_Boot_Guide_332098-001US_Rev1-1.pdf \"External link\")\n\nExample: ASUS Z87 BIOS Configuration  \nSpecifications  \nMotherboard:  \nASUS  \nZ87  \n-  \nExpert  \nChipset:  \nIntel® Z87  \nChipset  \nBIOS Revision:  \n1802 (3/14/2014)  \nCompatibility Notes  \nThe optimized defaults for this BIOS will successfully boot NVMe SSDs; no additional configuration is required. If you are  \nexperiencing difficulties, verify that your CSM settings match the image below. These settings will support Windows 7, 8, or  \n8.1.  \nBut in Bios for this board no nvme can be seen?  \nDietmar\n\n"
    },
    {
      "id": "207351",
      "timestamp": "2018-07-22T19:12:43+00:00",
      "author": "Dietmar",
      "content": "This is just not true from Intel.\n\nI tried to install Win10 in UEFI mode on gpt partition on Asus z87-pro,\n\nwithout any support for nvme in Bios.\n\nOk, you can install it (Toshiba RD400) but\n\nlater not boot from it,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207352",
      "timestamp": "2018-07-22T21:24:59+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nwhen I try to start a working XP (! tested on another compi with nvme support) from the nvme disk Samsung 950 pro (the one with own BIOS) with the nvme.sys ver. 1.3 from Kai,\n\non a compi, that never heard in life about nvme I get the message\n\n\"ntldr not found\".\n\nThis is strange for me, because Win7 32 bit starts there via mbr without any problems.\n\nI came to the idea to use grub4dos.\n\nIs the following text right?\n\ntitle Boot Windows NT  \nfind --set-root /ntldr  \nchainloader /ntldr\n\nI remember the message \"ntldr not found\" when XP cannot work, start with the underlying mbr (for ntldr).\n\nHave a nice evening\n\nDietmar\n\nPS: The behavior from the 950 pro is really strange. Today I upgraded its own BIOS, does not help.\n\nEDIT: With bootice I changed the mbr from XP to grub4dos mbr but still the same message \"ntldr not found\", any idea?\n\n"
    },
    {
      "id": "207353",
      "timestamp": "2018-07-22T22:34:10+00:00",
      "author": "Dietmar",
      "content": "Now I reach the grub boot window,\n\nbut then hangs.\n\nGrub message:\n\nBooting \"Root Windows NT\"\n\n(hd0,0)\n\nWill boot NTLDR from drive\u003d0x80, partition\u003d0x0(hidden sectors\u003d0x3f)\n\nthen.. this message stays and nothing more,\n\nDietmar\n\n"
    },
    {
      "id": "207357",
      "timestamp": "2018-07-23T09:33:02+00:00",
      "author": "Fernando1",
      "content": "\u003e This is just not true from Intel.\n\u003e\n\u003e I tried to install Win10 in UEFI mode on gpt partition on Asus z87-pro, without any support for nvme in Bios.\n\nIntel\u0027s PDF file is only valid for NVMe SSDs, which have been **manufactured by Intel**!\n\n"
    },
    {
      "id": "207358",
      "timestamp": "2018-07-23T10:45:01+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\ntoday is a new sunny day with new ideas :smile: !\n\nI think the problem with the Samsung 950 pro nvme disk for XP is much bigger than thought.\n\nBut *may be*, it can be solved easy. If I am right, from now XP on nvme disk can run on any compi,\n\nas long as you can insert an adapter for the 950 pro to the compi.\n\nI think: The BIOS from the 950 pro does not work via INT13 on its own disk.\n\nHm, at once I come to the idea to make use of ntbootdd.sys.\n\nJust copy nvme.sys from Kai ver 1.3 also to C:\\\\ and rename it there to ntbootdd.sys.\n\nThe boot.ini change to\n\n\\[boot loader\\]  \ntimeout\u003d30  \ndefault\u003dscsi(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS  \n\\[operating systems\\]  \nscsi(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS\u003d\"Microsoft Windows XP Professional\"\n\nAll entries in registry stay as for nvme.sys scsiminiport.\n\nOh, this looks nice ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)\n\nDietmar\n\n"
    },
    {
      "id": "207359",
      "timestamp": "2018-07-23T10:49:57+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Hi all,\n\u003e\n\u003e when I try to start a working XP (! tested on another compi with nvme support) from the nvme disk Samsung 950 pro (the one with own BIOS) with the nvme.sys ver. 1.3 from Kai,\n\u003e\n\u003e on a compi, that never heard in life about nvme I get the message\n\u003e\n\u003e \"ntldr not found\".\n\u003e\n\u003e This is strange for me, because Win7 32 bit starts there via mbr without any problems.\n\u003e\n\u003e I came to the idea to use grub4dos.\n\u003e\n\u003e Is the following text right?\n\u003e\n\u003e title Boot Windows NT  \n\u003e find --set-root /ntldr  \n\u003e chainloader /ntldr\n\u003e\n\u003e I remember the message \"ntldr not found\" when XP cannot work, start with the underlying mbr (for ntldr).\n\u003e\n\u003e Have a nice evening\n\u003e\n\u003e Dietmar\n\u003e\n\u003e PS: The behavior from the 950 pro is really strange. Today I upgraded its own BIOS, does not help.\n\u003e\n\u003e EDIT: With bootice I changed the mbr from XP to grub4dos mbr but still the same message \"ntldr not found\", any idea?\n\nTry also another thing. (not that it will necessarily help in booting, but it should help in understanding if NTLDR \"sees\" the device).\n\nUse a \"NT boot floppy\".\n\nMake a floppy image with:\n\n1) NTLDR\n\n2) BOOT.INI\n\n3) NTDETECT.COM\n\n\\*like\\*:\n\n[http://www.xxcopy.com/xxcopy33.htm](http://www.xxcopy.com/xxcopy33.htm \"External link\")\n\nThen mount the image in grub4dos and chainload it:\n\nmap /myfloppy.img (fd0)\n\nmap --hook\n\nroot (fd0)\n\nchainloader /ntldr\n\nboot\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207360",
      "timestamp": "2018-07-23T11:31:10+00:00",
      "author": "Dietmar",
      "content": "First try with ntbootdd.sys does not work. Just black screen.\n\nMay be, it is really because ntldr did not start at all. So I will make try with the idea from jaclaz.\n\nAnd may be, that XP needs to get information about scsi disk geometrie also.\n\nIn this case, the signature switch in boot.ini may help,\n\nDietmar\n\n"
    },
    {
      "id": "207361",
      "timestamp": "2018-07-23T11:42:33+00:00",
      "author": "Fernando1",
      "content": "\u003e Hi Fernando,\n\u003e\n\u003e just boot nvme disk from mbr using int 13.\n\nI just have tested it with my ASUS P8-Z68-V mainboard system with the following steps:\n\n1. Extraction of the EFI module named NVMEINT13 from ASUS Z97-DeLuxe USB3.1 BIOS 3502\n\n2. Integration of the NVMEINT13.ffs into the original BIOS v3603 of my ASUS mainboard.\n\n3. Flashing the modded BIOS into my ASUS mainboard .\n\n4. Creation of an NTFS formatted bootable USB Flash Drive containing the Win10 x64 Pro v1803 image by using Rufus v3.1 (MBR mode chosen)\n\n5. Preparation of the required LEGACY mode BIOS settings to be able to get the OS installed onto the Samsung 960 EVO SSD\n\n6. Insertion of the M.2\\\u003ePCIe Adapter with the Samsung 960 NVMe SSD into the first PCIe slot and removal of all other Disk Drives\n\n7. Booting off the USB Flash Drive with the Win10 x64 Pro Image (result: the NVMe SSD has been detected by the Win10 Setup)\n\n8. Deletion of all partions, which where on the NVMe SSD (from previous tests)\n\n9. Creation of a new 200 GB sized partition for the OS installation\n\n10. Win10 Setup gave me message, that it is impossible to install the OS onto the freshly created partition (booting not supported)\n\n\u003e I need generic NVMEINT13.ffs\n\u003e\n\u003e NvmeSmm.ffs\n\u003e\n\u003e Nvme.ffs\n\nThere are no generic (universally usable) NVMe modules with these names available. Each mainboard manufacturer makes its own NVMe EFI modules.\n\n"
    },
    {
      "id": "207362",
      "timestamp": "2018-07-23T12:51:08+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\non my Asus z370 Apex X motherboard,\n\nthe floppy.img is loaded via grub4dos and after that ntldr from this floppy and then full XP.\n\nI can see that ntldr from floppy is used, because I put 2 entries in this boot.ini so\n\nthat I can decide between floppy and nvme disk.\n\nBut on the Asus z87-pro also the boot menu from Grub appears,\n\nchainloading happens, but ntldr from floppy is not loaded, because the 2 entries from boot.ini on floppy do not appear,\n\nand then just reboots.\n\nThis is a little bit strange, because grub *can*start from the 950 pro nvme, Win7 also,\n\nbut ntldr not,\n\nhave a nice day\n\nDietmar\n\nPS: This crazy 950 pro nvme disk under XP does not work together with a normal harddisk under XP.\n\nBut I will try USB boot with the 3 floppy files.\n\n"
    },
    {
      "id": "207363",
      "timestamp": "2018-07-23T13:11:18+00:00",
      "author": "Dietmar",
      "content": "With usb boot stick, I can chose the different entries in boot.ini on this stick,\n\nbut then, independend(!) from which entry I chose,\n\nthe asus z87-pro is frozen.\n\nThe BIOS of the 950 pro\n\ncomes in conflict with the BIOS from the z87-pro motherboard via XP boot\n\nDietmar\n\nEdit: I try the signature methode, looking at 4 Bytes in mbr from 1B8 or in registry mounteddevices c:,\n\nnot work for XP and 950 pro.\n\nI tried also using Plop as bootmanager, again message \"ntldr not found\".\n\nNow I am out of ideas. Bye the way I tested my XP boot USB stick, this works on Asus z370 Apex X and\n\n950 pro for XP boot.\n\nSo, I think my idea about conflict between Bios from Asus z87-pro and Bios from 950 pro nvme disk\n\nunder XP is the reason for problems.\n\nEdit2: I installed XP to the 950 pro nvme disk on Asus z370 works, test on Asus z87-pro, not work. Then I install to this win7 32 bit direct on 950 pro on Asus z87-pro, because Win7 can handle ntldr also.\n\nAs wished, at boot only 950 pro connected to Asus z87-pro you can switch between win 7 and older Win. Win 7 works, XP crashes, no boot.ini entries can be seen, this means, the crash happens very early. Even Windbg does not even start, so early is the crash, I think BIOS related.\n\n"
    },
    {
      "id": "207364",
      "timestamp": "2018-07-23T14:05:52+00:00",
      "author": "Dietmar",
      "content": "Hi Fernando,\n\nI noticed on my Asus z87-pro the same behavior for Win10.\n\nOn mbr I can install Win10 only, when nvme is supported in the Bios\n\nfrom the manufacturer.\n\nThis is true for 4 boards with original nvme in Bios,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207365",
      "timestamp": "2018-07-23T15:11:21+00:00",
      "author": "Fernando1",
      "content": "@Dietmar:  \nIt seems possible for me, that BIOSes with natively full NVMe support can simulate the LEGACY mode by using the 3 NVMe EFI modules, but this doesn\u0027t mean, that the integration of any or all 3 NVMe modules into a BIOS without native NVMe support will give the related system the ability to boot off the NVMe SSD in LEGACY mode using the MBR partition scheme.  \nThere are dependencies between the 3 NVMe EFI files and certain system BIOS files, which cannot be simulated by the simple insertion of the 3 NVMe modules.  \nThat is why it doesn\u0027t make sense to integrate the modules named NVMEINT13 and NVMESMM. The interlinkage to the related system BIOS files are missing.   \n"
    },
    {
      "id": "207367",
      "timestamp": "2018-07-23T17:51:30+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nthe Samsung 950 pro has a legacy IDE option rom inside so it is seen as a IDE device in BIOS.\n\nThis gives some really crazy results: I saw suddently 4 Ide devices in device manager but also a scsi device, called 950 pro\\^\\^, because it still needs the nvme.sys driver (scsi).\n\nSo, no wonder that BIOS from mainboard has problems, because at the same time it get offers from a scsi device and an Ide device from only one real physical device\n\nDietmar\n\n"
    },
    {
      "id": "207368",
      "timestamp": "2018-07-23T18:48:52+00:00",
      "author": "Dietmar",
      "content": "For to have some fun,\n\nI integrated the *whole* option-rom from the Samsung 950 pro into the original Bios\n\nfrom Asus z87-pro motherboard. Now also the Intel 750 ssd is recogniced,\n\nbut still crash :tongue: booting XP from it\n\nDietmar\n\n"
    },
    {
      "id": "207369",
      "timestamp": "2018-07-24T11:07:51+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI make some more tests with the Asus z87-pro\n\nmotherboard and original Bios Z87-PRO-ASUS-2103.CAP\n\ninstall on nvme Samsung 950 pro:\n\nXPSP3, XPSP2, XP, Winserver2003, Win2000, all 32 bit, all fail.\n\nNT4 starts installation but crashes on reboot,\n\nhave a nice day\n\nDietmar\n\nEDIT: On motherboard Asus H81M-plus also not possible to Install XPSP3\n\non Samsung 950 pro.\n\nThis is BIOS related and also to ntldr, because Win7 on mbr works there.\n\n"
    },
    {
      "id": "207370",
      "timestamp": "2018-07-24T15:49:20+00:00",
      "author": "Dietmar",
      "content": "Reactos 0.48 starts install on nvme Samsung 950 pro.\n\nBut then loses disk, because it does not have F6 function for nvme.sys ver. 1.3 from Kai,\n\nDietmar\n\n"
    },
    {
      "id": "207371",
      "timestamp": "2018-07-24T15:58:26+00:00",
      "author": "dencorso",
      "content": "Hi, Dietmar!\n\nPlease try to install the 950 PRO on MBR an a really legacy board, like a Z68.  \nIf that on-disk BIOS extension is worth anything, such a board should be its target, isn\u0027t it?  \nIf even that doesnt work, then the on-disk BIOS was meant just for EFI boot, if it even works.  \nThanks for all that very thorough testing, it\u0027s been incredibly illuminating.  \nHave a nice day!\n\n"
    },
    {
      "id": "207372",
      "timestamp": "2018-07-24T16:58:53+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\non day after tomorrow I will try to install XP on a x58 mainboard.\n\nThere is only 1 PCIe slot and no graphic in processor,\n\nso I ordered a cheap PCI graphik card.\n\nBecause NT4 and reactos start to install on the 950 pro nvme,\n\nI come to the idea, that it may be because of the emulated IDE controller\n\nfrom the 950 pro card. The only compi, where I can install XP on this card\n\nis my Asus z370. And this computer has no IDE at all, crazy :smile:.\n\nTo disable IDE in Bios may not be enough. So today I will make a try to\n\nremove the IDE driver in Bios. I am sure, that it is a simple conflict between\n\nBios from motherboard and BIOS from 950 pro,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207373",
      "timestamp": "2018-07-24T17:50:30+00:00",
      "author": "Dietmar",
      "content": "I also try to install on this 950 pro card XP with original\n\nXP bootdisk from Teac USB floppy. Funny, on my Asus z370 compi this works,\n\nbut on all other compis: In the moment, when the 950 pro is recogniced via\n\nthe bootfloppy (you can see blue LED flashing) on 950 pro adapter,\n\nit halted. So, very easy, there mus be a conflict. But how to solve?\n\nI never saw before, that the XP bootfloppy is frozen\n\nDietmar\n\n"
    },
    {
      "id": "207374",
      "timestamp": "2018-07-24T18:44:52+00:00",
      "author": "Wonko the Sane",
      "content": "As a side-side note, and should any of the good guys from the ReactOS project come by, there was a few years back some \\*undocumented\\* or \\*experimental\\* report that the ReactOS FREELDR could actually boot Windows Server 2003.\n\nI was never able to find :blush: (and remember I am The Finder :wink: ) any proper confirmation that it actually worked, though, let alone any - if not instructions - examples on how to use the (supposed) feature.\n\nIf anyone is going to work on the FREELDR code it would be the \"right\" moment to:\n\n1) have it boot XP, besides 2003 (provided that 2003 is actually bootable)  \n2) check what (the heck) is happening with nvme\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207375",
      "timestamp": "2018-07-24T19:08:50+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\nI saw a video of booting reactos with FREELDR to WinServer 2003.\n\nAnd also nearly XP, as I remember, it hangs in last few seconds of boot.\n\nNow reactos 0.49 is out. It is an amazing project,\n\nthey also import storport.sys with the extendend functions and a lot\n\nof programs for Win10 can run there. But it goes on very slowly.\n\nMay be in 2019, after end of support for XP embedded,\n\nthis is future\n\nDietmar\n\nPS: The thing with the nvme disk 950 pro and XP is really crazy.\n\nI deleted AINT13 in Bios. With the result, that I cant boot from harddisk after this, it is not listed as boot device anymore.\n\nBut the 950 pro still shows \"ntldr not found\" and is listed as bootdevice. Hm, this means, 950 pro depends not on INT13\n\nand maybe, all the problems with XP come from this. Yeppp, putting AINT13 back to BIOS, black WD2TB appears again and gives crazy like \"snowflakes in stripes\" :tongue: crash on beeing together with 950 pro!\n\n"
    },
    {
      "id": "207376",
      "timestamp": "2018-07-25T09:26:59+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\non MSi MS-7379 with Intel Core 2 Quad Q6600\n\ninstalling the Samsung 950 pro nvme as only bootdevice,\n\ngives blinking cursor and frozen, not possibel to go to Bios\n\nDietmar\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "207377",
      "timestamp": "2018-07-25T09:48:32+00:00",
      "author": "Dietmar",
      "content": "For to make sure,\n\nthat my build of this 10 years old compi with MS 7379 board works,\n\nI changed the 950 pro in graphicard slot against 960 pro.\n\nOn Win7 with the nvme.sys ver. 1.3 from Kai gives\n\n-----------------------------------------------------------------------  \nCrystalDiskMark 5.1.2 © 2007-2016 hiyohiyo  \nCrystal Dew World : [http://crystalmark.info/](http://crystalmark.info/ \"External link\")  \n-----------------------------------------------------------------------  \n\\* MB/s \u003d 1,000,000 bytes/s \\[SATA/600 \u003d 600,000,000 bytes/s\\]  \n\\* KB \u003d 1000 bytes, KiB \u003d 1024 bytes  \n\nSequential Read (Q\u003d 32,T\u003d 1) : 833.926 MB/s  \nSequential Write (Q\u003d 32,T\u003d 1) : 668.875 MB/s  \nRandom Read 4KiB (Q\u003d 32,T\u003d 1) : 276.080 MB/s \\[ 67402.3 IOPS\\]  \nRandom Write 4KiB (Q\u003d 32,T\u003d 1) : 248.430 MB/s \\[ 60651.9 IOPS\\]  \nSequential Read (T\u003d 1) : 771.619 MB/s  \nSequential Write (T\u003d 1) : 635.718 MB/s  \nRandom Read 4KiB (Q\u003d 1,T\u003d 1) : 48.797 MB/s \\[ 11913.3 IOPS\\]  \nRandom Write 4KiB (Q\u003d 1,T\u003d 1) : 111.860 MB/s \\[ 27309.6 IOPS\\]  \n\nTest : 1024 MiB \\[L: 2.7% (12.7/476.9 GiB)\\] (x5) \\[Interval\u003d5 sec\\]  \nDate : 2018/07/25 11:36:34  \nOS : Windows 7 Home Premium SP1 \\[6.1 Build 7601\\] (x86)\n\nDietmar\n\n"
    },
    {
      "id": "207378",
      "timestamp": "2018-07-25T12:38:44+00:00",
      "author": "Dietmar",
      "content": "Next test on Acer FX58M (Intel X58 chipset) with i920 processor.\n\nThe Samsung 950 pro is at once recogniced as IDE device.\n\nTogether with an hardisk with XP boot, it gives the snowflakes in stripes crash.\n\nAlso it is not possible to install XPSP3 on it (crashes when pressed key message for to boot from CD), same behavior as on other motherboards.\n\nI also noted, that on XP, it can there not work as codevice, also not 960 pro.\n\nThis is all because of INT13 I think. Those nvme disks can not be hotpluged like USB stick.\n\nInteresting, if this is the case for other mainboards too,\n\nhave a nice day\n\nDietmar\n\nPS: In next days I make new tests with XP nvme boot on Asrock z77 extreme 4.\n\nThey offered a new BIOS with full nvme support, also legacy which you can see,\n\nwhen you download BIOS ver. Z77 Extreme4(2.90P)ROM\n\n[https://www.asrock.c...dex.de.asp#BIOS](https://www.asrock.com/mb/Intel/Z77%20Extreme4/index.de.asp#BIOS \"External link\")\n\nThe newest BIOS 3.0 has much less support for nvme.\n\nThis is one of the latest motherboards with full XP support for Ivy Bridge chipset.\n\n"
    },
    {
      "id": "207379",
      "timestamp": "2018-07-25T15:01:33+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\non Asus z87-pro (without any nvme in Bios)\n\nwith bootdevice XP on harddisk it is possible, to use the Samsung 960 pro as codevice.\n\nJust copy storport.sys ver. 5.2.3790.4173 to folder C:\\\\Windows\\\\system32\\\\drivers\n\nand install the nvme.sys ver. 1.3 from Kai.\n\nHere CristalDiskMark\n\nAsusz87-pro with 960 pro as codevice only XP  \n-----------------------------------------------------------------------  \nCrystalDiskMark 5.1.2 © 2007-2016 hiyohiyo  \nCrystal Dew World : [http://crystalmark.info/](http://crystalmark.info/ \"External link\")  \n-----------------------------------------------------------------------  \n\\* MB/s \u003d 1,000,000 bytes/s \\[SATA/600 \u003d 600,000,000 bytes/s\\]  \n\\* KB \u003d 1000 bytes, KiB \u003d 1024 bytes  \n\nSequential Read (Q\u003d 32,T\u003d 1) : 3319.434 MB/s  \nSequential Write (Q\u003d 32,T\u003d 1) : 2070.767 MB/s  \nRandom Read 4KiB (Q\u003d 32,T\u003d 1) : 509.035 MB/s \\[124276.1 IOPS\\]  \nRandom Write 4KiB (Q\u003d 32,T\u003d 1) : 515.009 MB/s \\[125734.6 IOPS\\]  \nSequential Read (T\u003d 1) : 2784.229 MB/s  \nSequential Write (T\u003d 1) : 2013.824 MB/s  \nRandom Read 4KiB (Q\u003d 1,T\u003d 1) : 58.182 MB/s \\[ 14204.6 IOPS\\]  \nRandom Write 4KiB (Q\u003d 1,T\u003d 1) : 220.617 MB/s \\[ 53861.6 IOPS\\]  \n\nTest : 1024 MiB \\[D: 2.7% (12.7/476.9 GiB)\\] (x5) \\[Interval\u003d5 sec\\]  \nDate : 2009/01/01 1:19:10  \nOS : Windows XP Professional SP3 \\[5.1 Build 2600\\] (x86)\n\nDietmar\n\n"
    },
    {
      "id": "207380",
      "timestamp": "2018-07-25T21:11:26+00:00",
      "author": "Dietmar",
      "content": "Hi cdob,\n\ncan you please tell me step by step,\n\nhow you make steps more easy in \"Kansas City Shuffle\"?\n\nWhich points you change? Here at reboot I only find 1 page, where you tell about.\n\nI will try this also for nvme boot, because I noticed that ALL the other tutorials in web\n\nabout nvme boot are only for UEFI nvme.\n\nThis Tutorial will be valid also for any legacy boot from nvme on nearly every compi. And may be,\n\nthe fake \"CD\" can also been put on the same nvme disk, because I noticed, that the MBR from the nvme can be read with UEFI nvme.\n\nWindows XP boots from USB and nvme  \n\nAuthor: Dietmar Stölting, 16 March 2008 updated 29 July 2018  \ndietmar.stoelting@t-online.de  \nGermany  \n\nThanks to s4e, who told us his idea.\n\nThis tutorial works on any device with a mbr and a driver. No need for Bios support.\n\nTutorial (Version 7)\n\n1.) Connect an USB or nvme harddisk to your working XP or install first a fresh XP  \non your normal harddisk.  \nThis XP has to stay on the first partition of the first harddisk.  \nIf you have no USB, nvme, or all USB is disabled in Bios or only USB1.1,  \ninsert an USBtoPCI slotcard or nvme disk via slotcard.  \nThe USB hardisk has to be connected to your XP, because the drivers for  \nthe USBtoPCI slotcard and for the USB harddisk must be installed there.  \nOnly one, and that must be the first partition, is allowed on the USB  \nharddisk.  \nDisable the pagefile.  \nCopy this XP to that USB, nvme harddisk, may be on an other comuter. I use AOMEI.  \nIt can be Fat, Fat32, NTFS, doesnt matter.  \nDont change the filesystem.  \nIt works on XP, XP SP1, SP2, SP3, nvme works only for XP SP3.  \n\n2.) For USB, make the XP on the USB harddisk USB bootfriendly, use Tutorial 3, 4 or 6,\n\nfor nvme add storport.sys 5.2.3790.4173 from Winserver 2003 and nvme.sys ver. 1.3 from Kai.  \n\n3.) Get the files mkimg.zip, vdk32-050406.zip, dsfok.zip,  \ngsar121.zip, mksparse.zip, mbrbatch002.zip, DumpHex-1.0.1.zip,  \ngrub4dos-0.4.3-2008-03-14.zip, SetupImgBurn_2.4.0.0.exe, mkisofs.exe from  \npebuilder3110a, contig.exe from Microsoft (Sysinternals)  \nUnzip them all to the root folder C:\\\\ of your working XP.  \nYou can use other programs also.  \n\n4.) Generating a virtual harddisk with a size of 100 MB.  \nType at the commandline of your working XP C:\\\\mkimg , name it otto, chose  \n100M size, 128/63 geometry, 07 for NTFS, and then /fsz for building a 100 MB  \nvirtual harddisk, format it with j. Format it with XP to Fat32 or to NTFS.  \nIF XP dont like to do that, format an 100MB empty file from Qemu.  \nIf this does not work, shrink a real partition with working XP via AOMEI.  \n\n5.) Copy now from your external USB bootfriendly harddisk (or nvme disk) the following  \nfiles to the 100MB virtual harddisk:  \n\nBOOT.INI with a content of  \n\n\\[boot loader\\]  \ntimeout\u003d30  \ndefault\u003dmulti(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS  \n\\[operating systems\\]  \nmulti(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS\u003d\"USB Windows\"  \n\nNTDETECT.COM (best (?) is modified one, when you get)  \nNTLDR  \n\nWINDOWS\\\\AppPatch\\\\drvmain.sdb  \n\nWINDOWS\\\\FONTS\\\\vga850.fon  \nWINDOWS\\\\FONTS\\\\vgaoem.fon  \n\nWINDOWS\\\\INF\\\\biosinfo.inf  \n\nWINDOWS\\\\system32\\\\bootvid.dll  \nWINDOWS\\\\system32\\\\c_1250.nls (in germany instead c_1252.nls)  \nWINDOWS\\\\system32\\\\c_850.nls  \nWINDOWS\\\\system32\\\\hal.dll  \nWINDOWS\\\\system32\\\\kdcom.dll  \nWINDOWS\\\\system32\\\\l_intl.nls  \nWINDOWS\\\\system32\\\\ntkrnlpa.exe  \nWINDOWS\\\\system32\\\\ntoskrnl.exe  \nWINDOWS\\\\system32\\\\config\\\\system  \nWINDOWS\\\\system32\\\\drivers\\\\ (all, means also nvme.sys and storport.sys for NVME)  \n\n6.) Make a Bit to Bit copy of your virtual 100 MB harddisk, with MBR and  \npartitionstable. I use therefor Winhex.  \nName it XP.IMG (Case sensitive)  \n\n7.) Open in Winhex XP.IMG and the USB (nvme) harddisk. Have a look at both of  \ntheir first 512 Byte (MBR).  \nSave those 512 bytes (MBR) each on your working XP as XPIMGMBR.dat and  \nUSBHDMBR.dat.  \n\nNow comes the most critical procedure to fake the SIGNATURE and give both  \nMBR the same checksum.  \n\nCompare the first 512 Bytes of both MBR:  \nThe only differences that are allowed at the moment, stay in 1B8, 1B9,  \n1BA, 1BB , this is the place of the SIGNATURE and 1C0, 1C1...to 1CF, the  \nsize of each Harddisk.  \n\nWrite the SIGNATURE of the external harddisk to the SIGNATURE of the  \nXP.IMG.  \nThis means, to write the values in 1B8, 1B9, 1BA, 1BB of the harddisk to  \nthe same place into MBR of XP.IMG.  \n\nThen write 1C0...1CF of the external harddisk to 1A0...1AF of the XP.IMG.  \n\n\u003cbr /\u003e\n\nThen write 1C0...1CF of XP.IMG to 1A0...1AF to the external harddisk.  \n\nCompare once more the MBRs of XP.IMG and the USB harddisk.  \nThere must now be correspondending differences in 1A0...1AF and  \n1C0...1CF.  \n\n\u003cbr /\u003e\n\n8.) Open the commandline of the working XP and type there at C:\\\\  \n\nmkdir iso_root  \ncopy grldr iso_root  \ncopy menu.lst iso_root  \ncopy XP.IMG iso_root  \n\n9.)\n\nRun from commandline\n\ncontig.exe C:\\\\iso_root\\\\XP.IMG\n\nthat the file is continues for mapping in grub4dos.\n\nGo to C:\\\\iso_root. There are now XP.IMG, menu.lst, and grldr.\n\nOpen menu.lst with the editor and delete all its content.  \n\nPut into menu.lst:  \n\ntitle Image chainloading USB (or nvme)  \nmap --read-only /XP.IMG (hd0)  \nmap --hook  \nchainloader (hd0,0)/ntldr  \n\n10.) Go to commandline and type at C:\\\\  \n\nmkisofs -R -b grldr -no-emul-boot -boot-load-size 4 -o grldr.iso iso_root  \n\nThis gives you in C:\\\\ the file grldr.iso.  \n\n11.) Burn grldr.iso with SetupImgBurn or Nero to a CD.  \n\n12.) Shut your compi down and restart with that CD and the connected USB or nvme  \nharddisk to USB XP.\n\n13.) First test, if your CD gives you the XP-bootscreen after grub4dos window.  \n\nDietmar  \n\n"
    },
    {
      "id": "207382",
      "timestamp": "2018-07-26T10:54:51+00:00",
      "author": "Wonko the Sane",
      "content": "Dietmar, if you use the copysgcs by Karyonix:\n\n[http://reboot.pro/to...2-sp2/?p\u003d207270](http://reboot.pro/topic/21812-community-ofa-nvme-15-storport-miniport-for-windows-server-2003-r2-sp2/?p\u003d207270 \"\")\n\nthe procedure will be much simpler.\n\u003e\n\u003e C:\\\\Downloaded\\\u003ecopysgcs.exe  \n\u003e Copy MBR signature and checksum  \n\u003e Usage : copysgcs srcfilename dstfilename \\[offsetcs\\]  \n\u003e\n\u003e srcfilename Source MBR image file name  \n\u003e dstfilename Destination MBR image file name  \n\u003e offsetcs Offset of a safe place to modify 4 bytes data in destination MBR  \n\u003e If not specified, the program will not clone checksum\n\nthe checksum is written to a set of contiguous 4 bytes, a \"good\" offset for this (used by convention originally) is 0x1B0.\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207383",
      "timestamp": "2018-07-26T11:21:53+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\nwhen I succeed, I write new tutorial.\n\nAt the moment I am just doing my own tutorial just for nvme.\n\nI remember very good soo many blue screens, for example that you have first to format fakeimage to ntfs and then back to fat32.\n\nAlso I tested nvme boot XP for Fat16. It works.\n\nIn about 2 hours I write more what happens ![:rolleyes:](https://reboot.pro/public/style_emoticons/default/rolleyes.gif) ,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207384",
      "timestamp": "2018-07-26T11:55:13+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz, the first error is using mkimg.exe:\n\nThe image is unmoutable.\n\nWhat do you think: Can this happen, because it is build for IDE\n\nand I have AHCI? Can I also use qemu, fo to build the emty image?\n\nOha, not so easy I think,\n\nDietmar\n\n"
    },
    {
      "id": "207385",
      "timestamp": "2018-07-26T12:28:42+00:00",
      "author": "Wonko the Sane",
      "content": "I have no idea what mkimg.exe is, maybe you mean my (good ![:unsure:](https://reboot.pro/public/style_emoticons/default/unsure.png) ) old mkimg.cmd?\n\nNowadays it should be faster/better/whatever to use the Arsenal Image Mounter or the KernSafe driver or (suggested in this case) the MS \"own\" vss driver.\n\nSee here:\n\n[http://reboot.pro/to...storage-driver/](http://reboot.pro/topic/6492-virtual-storage-driver/ \"\")\n\nthe created drive image will be mounted as a \"proper\" physicaldrive (and as such is seen in both Diskpart and Disk Manager), so it is easier to create the partition and format it.\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207386",
      "timestamp": "2018-07-26T13:29:25+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\nI use the XPSP3 install CD,\n\nafter I build with Qemu a 100MB otto.raw disk.\n\nXP Install CD cries, that not enough space.\n\nBut I can format this disk, can not be better,\n\nis real XP like,\n\nok,\n\nnow fun starts\n\nDietmar\n\n"
    },
    {
      "id": "207387",
      "timestamp": "2018-07-26T14:43:32+00:00",
      "author": "Dietmar",
      "content": "Hm, I cant build the iso with mkisofs.exe from pebuilder3110a.\n\nmkisofs -R -b grldr -no-emul-boot -boot-load-size 4 -o grldr.iso iso_root\n\nThere comes a message, that the wrapper.cmd is missed,\n\nDietmar\n\n"
    },
    {
      "id": "207388",
      "timestamp": "2018-07-26T15:16:47+00:00",
      "author": "Dietmar",
      "content": "Ok, this was because of a corrupted file mkisofs.exe from pebuilder3110a.\n\nI found working and build boot CD for nvme.\n\nBoot CD starts, but then hangs after message Filesystem type is fat, partitiontype 0xb\n\noh my,\n\nbut I will make next try\n\nDietmar\n\n"
    },
    {
      "id": "207389",
      "timestamp": "2018-07-26T18:23:01+00:00",
      "author": "Dietmar",
      "content": "I make a complete new try:\n\nFirst I install XP Sp1 with IDE to the Asus z87-pro motherboard on a 1900 MB partition with NTFS.\n\nThere I install storport.sys and nvme.sys ver. 1.3 from Kai.\n\nI test, if the 960 pro is recogniced from this harddisk, no nvme in Bios at all.\n\nThen I make with WinHEX on my Asus z370 compi a bit to bit copy from this harddisk to the 960 pro nvme disk.\n\nAfter this, I modify MBR and check sum of MBR as s4e tolds, on 960 pro and the harddisk.\n\nAfter this I install grub4dos on the harddisk, without any fake image I try to start with this harddisk the nvme disk 960 pro\n\non Asus z87-pro,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207390",
      "timestamp": "2018-07-26T19:25:03+00:00",
      "author": "Dietmar",
      "content": "XP Sp1 does not work with nvme at all\n\nDietmar\n\n"
    },
    {
      "id": "207391",
      "timestamp": "2018-07-26T23:17:04+00:00",
      "author": "Dietmar",
      "content": "The s4e methode seems not to work for nvme boot.\n\nI tried boot from CD, boot from harddisk. I am sure, that I did everything correct, even I\n\nuse contig.exe that the XP.IMG file is continues before mapping.\n\nNo flashing LED on nvme disk.\n\nThis is other situation as with usb boot.\n\nI remember very good, that even through crashes,\n\nalways was some reaction on the connected usb disk.\n\nHere with nvme is no difference between connected nvme disk or not.\n\nGrub4dos just hangs (no matter, if nvme disk is connected or not), no boot.ini entries can be seen and this means,\n\nsomething goes wrong on fake disk, because in other case you would see\n\nthe 2 entries in boot.ini there\n\nDietmar\n\nPS: I tried Fat32 and NTFS.\n\nEDIT: *NO* because with floppy it works(Something is wrong with the fake Image. I copied the fake image XP.IMG direct to an harddisk.\n\nBut no switches in boot.ini can be seen: \"Fehler beim Laden des Betriebssystems\"\n\nOh, this looks to me, as if some more files are necessary in XP Sp3 than for XP SP1 or SP2 in the minimage.)\n\n(Other possibility is, that it hangs because of loading the nvme.sys file and storeport.sys:No, because the same\n\nerror message after I renamed nvme.sys file and storeport.sys. So I think, files are missed in fake XP.IMG for boot.)\n\nEDIT2: Qemu running with the fake XP.IMG tells \"BIOS panic at rombios.c, line 11051\". Any idea?  \nEDIT3: With USB boot floppy with ntldr, ntdetect.com and boot.ini I can start the fake XP.IMG,\n\nstrange...\n\n"
    },
    {
      "id": "207392",
      "timestamp": "2018-07-27T08:29:29+00:00",
      "author": "Dietmar",
      "content": "It works :smile:\n\nbut some things I do not understand until now\n\nDietmar\n\n"
    },
    {
      "id": "207393",
      "timestamp": "2018-07-27T09:40:07+00:00",
      "author": "Dietmar",
      "content": "XP SP3 gets more information about correct mbr than XP sp2, Sp1.\n\nAnd correcting with fixmbr does not help!\n\nSo I did the following:\n\nI copy bit by bit with Winhex a working 2000 MB NTFS image to the 960 pro disk\n\nAND the same image to the underlying harddisk. I compare with Winhex 100% identic.\n\nThen I delete nearly all files on harddisk, only those I named in Tutorial 7 stay on harddisk.\n\nAfter starting with this \"harddisk\", I disconnect it.\n\nNow nvme 960 pro is only device, connected to the Asus z87-pro motherboard.\n\nVoila, nvme disk 960 pro is shown as c:\\\\ , I make defrag on it just for fun (LED on nvme card flashes as much as possible) and play pinball.\n\nHihi, works, legacy nvme XP on a motherboard, that never heard in life about nvme.\n\nShould work on nearly every compi with a Pcie slot.\n\nThe problem in this first try is: The disks have real different geometries. I did NO changes in mbr,\n\nthey are 100% identic.\n\nAnd: When you let the harddisk connected, XP writes something back,\n\nso it works until now only one time ![:rolleyes:](https://reboot.pro/public/style_emoticons/default/rolleyes.gif). Only with Fat32 it is possible to reduce writes to zero.\n\nI remember this behavior from Usb boot: Because of this in booting with grub4dos is the readonly switch.\n\nEven this does not work and because of this in Tutorial 7 I use CD for boot,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207394",
      "timestamp": "2018-07-27T12:15:17+00:00",
      "author": "Dietmar",
      "content": "Now I use just my tutorial 7\n\nfor to bring this fake image 100MB with corrected mbr and also corrected mbr on nvme 960 pro to CD.\n\nThis time, the CD starts, I see the Zebra-stripes agian during loading from CD, the LED flashes on 960 pro,\n\nbut then reboot..brr..\n\nDont know, what happens,\n\nDietmar\n\nPS: The fake image works, I use contig for the Fake image and the mbr corrections after chkdsk exakt as s4e did.\n\n"
    },
    {
      "id": "207395",
      "timestamp": "2018-07-27T12:39:55+00:00",
      "author": "Dietmar",
      "content": "I found out, that this time it is the fault of the XP on the nvme disk 960 pro. This one reboots.\n\nStrange, this looks like, if XP SP3 cannot start after the mbr corrections via s4e\n\nDietmar\n\n"
    },
    {
      "id": "207396",
      "timestamp": "2018-07-27T13:27:39+00:00",
      "author": "Dietmar",
      "content": "Yessa I got it via boot from CD!!!\n\nONLY nvme disk 960 pro connected to Asus z87-pro.\n\nFor this I make a new XP image on the 960 pro,\n\ncopy the MBR from image before on it\n\nand change nothing on CD,\n\nDietmar\n\n"
    },
    {
      "id": "207397",
      "timestamp": "2018-07-28T08:49:41+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nis there a possibility to do a *warm reboot* on XP (INT19),\n\nlike reboot.com for DOS?\n\nThis would allow, to start XP from drivers in memory in 1. boot.\n\nHave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207398",
      "timestamp": "2018-07-28T23:02:58+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nafter 14 hours work\n\nI succeed to build a generic XP SP3, updated with what I can get,\n\nwhich runs on nearly every compi without any BIOS support for *nvme*.\n\nIt is absolut stable.\n\nFor to test this, I run defrag on nvme disk, prime95, 3Dmark, chkdsk on nvme disk,\n\nfirefox, youtube videos, connect USB stick.\n\nFor this to get, you need to be very careful with Tutorial 7.\n\nThe result is amazing.\n\nIn Tutorial 7 I changed in menu.lst\n\nroot (hd0,0) against rootnoverify (hd0,0)\n\nOh, this was the reason for soso many blue screens 10 years ago,\n\nbecause error rootno**t**verify (hd0,0).\n\nXp SP3 with Tutorial 7 on Asus z87-pro (zero nvme in BIOS) motherboard, Samsung 960 pro nvme disk, Fat32 c\n\n*no other device connected.*   \n\n-----------------------------------------------------------------------  \nCrystalDiskMark 5.1.2 © 2007-2016 hiyohiyo  \nCrystal Dew World : [http://crystalmark.info/](http://crystalmark.info/ \"External link\")  \n-----------------------------------------------------------------------  \n\\* MB/s \u003d 1,000,000 bytes/s \\[SATA/600 \u003d 600,000,000 bytes/s\\]  \n\\* KB \u003d 1000 bytes, KiB \u003d 1024 bytes  \n\nSequential Read (Q\u003d 32,T\u003d 1) : 2658.701 MB/s  \nSequential Write (Q\u003d 32,T\u003d 1) : 1901.398 MB/s  \nRandom Read 4KiB (Q\u003d 32,T\u003d 1) : 530.866 MB/s \\[129606.0 IOPS\\]  \nRandom Write 4KiB (Q\u003d 32,T\u003d 1) : 340.442 MB/s \\[ 83115.7 IOPS\\]  \nSequential Read (T\u003d 1) : 2035.464 MB/s  \nSequential Write (T\u003d 1) : 1802.148 MB/s  \nRandom Read 4KiB (Q\u003d 1,T\u003d 1) : 58.420 MB/s \\[ 14262.7 IOPS\\]  \nRandom Write 4KiB (Q\u003d 1,T\u003d 1) : 251.018 MB/s \\[ 61283.7 IOPS\\]  \n\nTest : 1024 MiB \\[C: 44.5% (7.1/15.9 GiB)\\] (x5) \\[Interval\u003d5 sec\\]  \nDate : 2018/07/29 0:52:25  \nOS : Windows XP Professional SP3 \\[5.1 Build 2600\\] (x86)\n\nThis looks like magic :tongue:\n\nDietmar  \n\n"
    },
    {
      "id": "207399",
      "timestamp": "2018-07-29T10:27:59+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nworks also on MSi MS-7379 with Intel Core 2 Quad Q6600 from 2008.\n\nI think, this is really first time XP nvme on this compi as boot device,\n\nhave a nice day\n\nDietmar\n\n![Q6600.jpg](https://image.ibb.co/h9arTo/Q6600.jpg)\n\nPS: An interesting thing I noticed during build of nvme XP:\n\nWhen I copy a file with 16 Gb and make a bit to bit comparisations check after\n\non nvme disks *needs 2 times* to copy, to make it identic.\n\nThe same behavior I noticed on USB sticks and\n\ncompact flash discs.\n\nNvme disks do not like heat. Those problems I never had with harddisks.\n\nSo think very careful, where you put important data!\n\n"
    },
    {
      "id": "207400",
      "timestamp": "2018-07-29T11:12:13+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e In Tutorial 7 I changed in menu.lst\n\u003e\n\u003e root (hd0,0) against rootnoverify (hd0,0)\n\u003e\n\u003e Oh, this was the reason for soso many blue screens 10 years ago,\n\u003e\n\u003e because error rootno**t** verify (hd0,0).  \n\nAllow me to doubt that that can be the issue ![:dubbio:](https://reboot.pro/public/style_emoticons/default/dubbio.gif) , or if this is confirmed, it is a \"side effect\" or collateral damage.\n\nThe root and rootnoverify commands are essentially the same, the difference is only on the \"underlying\" (hd0,0), it is entirely possible that for \\*some\\* reasons the underlying image has some issues that trigger the behaviour.\n\nThis:\n\u003e\n\u003e title Image chainloading USB (or nvme)  \n\u003e map --read-only /XP.IMG (hd0)  \n\u003e map --hook  \n\u003e rootnoverify (hd0,0)  \n\u003e chainloader +1\n\nthis:\n\u003e\n\u003e title Image chainloading USB (or nvme)  \n\u003e map --read-only /XP.IMG (hd0)  \n\u003e map --hook  \n\u003e root (hd0,0)  \n\u003e chainloader +1\n\nand this:\n\u003e\n\u003e title Image chainloading USB (or nvme)  \n\u003e map --read-only /XP.IMG (hd0)  \n\u003e map --hook  \n\u003e root (hd0,0)  \n\u003e chainloader /ntldr\n\nshould be perfectly equivalent, and in a number of cases (has to be tested specifically of course) there is no need to establish a root at all, i.e. both:\n\n\u003e title Image chainloading USB (or nvme)  \n\u003e map --read-only /XP.IMG (hd0)  \n\u003e map --hook  \n\u003e chainloader (hd0,0)0+1\n\u003e\nand\n\u003e\n\u003e title Image chainloading USB (or nvme)  \n\u003e map --read-only /XP.IMG (hd0)  \n\u003e map --hook  \n\u003e chainloader (hd0,0)/ntldr\n\u003e\nmight work just fine.\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207401",
      "timestamp": "2018-07-29T11:34:05+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\nI will test your last menu.lst\n\ntitle Image chainloading USB (or nvme)  \nmap --read-only /XP.IMG (hd0)  \nmap --hook  \nchainloader (hd0,0)/ntldr\n\nHihi, a world full of missunderstanding:\n\nThe first blue screen happens because of\n\nspelling mistake rootno**t**verify from s4e,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "207402",
      "timestamp": "2018-07-29T11:51:40+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\ntitle Image chainloading USB (or nvme)  \nmap --read-only /XP.IMG (hd0)  \nmap --hook  \nchainloader (hd0,0)/ntldr\n\nworks also and is faster than before :smile: .\n\nUntil now I think, the potential of the idea from s4e\n\nis just not full understand:\n\nHis idea should work *on really every device*,\n\nhave a nice day\n\nDietmar\n\nPS: Also nice would be a new, easier Tutorial for nvme boot.\n\n"
    },
    {
      "id": "207404",
      "timestamp": "2018-07-29T21:21:56+00:00",
      "author": "dencorso",
      "content": "Hi, Dietmar!\n\n![:cheerleader:](https://reboot.pro/public/style_emoticons/default/cheerleader.gif) Wonderful results! Keep on the great work! ![:cheerleader:](https://reboot.pro/public/style_emoticons/default/cheerleader.gif)  \n\nLet me ask you a question: After the system is booted and running, if you try to add or remove things from the system hive, by using regedit, then reboot... do the modifications remain or not? Moreover, does the system allow the changes or does it bark \"the file is read-only\"?  \n\nHave a nice week!\n\n"
    },
    {
      "id": "207406",
      "timestamp": "2018-07-29T21:54:00+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nuntil now, you boot always up with the same hive \"system\", because it is \"read only\".\n\nThe other parts of the registry work normal.\n\nAs far as I understand, writes XP the changes in \"system\" from ram back to\n\nControlset001 at shutdown and makes a copy of Controlset001 called CurrentControlset on next boot.\n\nThis can be done by a batch file also on shutdown, but then must the booted \"system\" from fakeCD has to be\n\non a writable medium. I think, it is not so difficult to reach this.\n\nOn Hive \"system\" changes in hardware are noted and the \"last good configuration\".\n\nSo, new hardware is only recogniced on working XP and gone on next reboot until now.\n\nI installed some new programms on this XP, they all appear on next boot normal,\n\nbecause they do not write to \"system\".\n\nI found a funny limitation: I think to enlarge my Fat32c filesystem. This is possible,\n\nbut on next boot its gone. At the moment this is good, because it would change the mbr\n\nand then the mbr checksum does not match any longer.\n\nWith some work, it may be possible, not to use the extra boot medium CD, after you installed in BIOS the\n\nUEFI files for nvme. This works on every compi, but only for UEFI.\n\nBut this UEFI recognices the bootsector of the nvme disk. So, may be there can be a split\n\nin 2 phases again, but only on nvme disk,\n\nhave a nice evening,\n\nvery hot here since a week always more than 30 degrees\n\nDietmar\n\nPS: Until now no crash, compi z87-pro with XP from nvme was online whole day.\n\n"
    },
    {
      "id": "207409",
      "timestamp": "2018-07-30T09:53:05+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e As far as I understand, writes XP the changes in \"system\" from ram back to\n\u003e\n\u003e Controlset001 at shutdown and makes a copy of Controlset001 called CurrentControlset on next boot.\n\nNo. ![:(](https://reboot.pro/public/style_emoticons/default/sad.png)\n\nThere are (normally) two hives in System:\n\nControlSet001\n\nand\n\nControlSet002\n\nThe CurrentControlSet does not \"exist\" at all, it is a (sort of) reparse point, created on-the-fly when booting that points to either ControlSet001 or ControlSet002, depending on the contents of the HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\Select key.\n\nWhen the system is booted, provided that (say) the chosen ContolSet is ControlSet001 there is NO difference whatever between ControlSet001 and CurrentControlSet as the latter is simply another name and access point for ControlSet001.\n\nWhen the system is off, the SYSTEM backing file does not contain any CurrentControlSet hive, only ControlSet001 and ControlSet002.\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207413",
      "timestamp": "2018-07-30T11:38:25+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI just enlarge the nvme XP SP3 to 500 GB Fat32c.\n\nIt just boots fine, fast :smile: .\n\nThis means, on real XP SP3 no need for checksum of MBR,\n\nbecause now it is just different as I prove with Winhex\n\nDietmar\n\nEDIT:\n\nHm, but now stability of the nvme XP is gone,\n\nso better make checksum of MBR identic :tongue: .\n\n"
    },
    {
      "id": "207416",
      "timestamp": "2018-07-30T13:23:55+00:00",
      "author": "Dietmar",
      "content": "Toshiba RD400 works also for nvme boot XP, stable.\n\nSamsung 950 pro works *only*, if you succeed to copy bit by bit a working nvme XP on it and run chkdsk on it.\n\nWithout kicker CD this Samsung 950 pro does not work, unclear for me why not. It always shows \"ntldr not found\".\n\nLegacy nvme Win7 works on Samsung 950 pro.\n\nInteresting: The Toshiba RD400 needs only one write of 16 GB,\n\nWinhex compare shows identic at once with copied file\n\nDietmar\n\n"
    },
    {
      "id": "207418",
      "timestamp": "2018-07-30T16:49:55+00:00",
      "author": "cdob",
      "content": "\u003e until now, you boot always up with the same hive \"system\", because it is \"read only\".  \n\u003e The other parts of the registry work normal.  \n\u003e As far as I understand, writes XP the changes in \"system\" from ram back to  \n\u003e Controlset001 at shutdown and makes a copy of Controlset001 called CurrentControlset on next boot.  \n\u003e This can be done by a batch file also on shutdown, but then must the booted \"system\" from fakeCD has to be  \n\u003e on a writable medium.\nDo you use volume shadow copy?  \n\nAt running XP:  \nmount the image, create a volume shadow and copy the system file, unmount the image  \n\n\u003cbr /\u003e\n\nExample to clarify the idea, not tested  \nassumption: the image is mounted to f:  \n\n```\nrem Volume Shadow Copy Simple Client\nrem http://vscsc.sourceforge.net/\nvscsc.exe -exec\u003dclone_C2F.cmd %SystemDrive%\n```\n\n.  \nclone_C2F.cmd  \n\n```\n@echo off\nrem dosdev by Olof\ndosdev.exe B: %1\ndir b:\\\ncopy B:\\Windows\\system32\\system f:\\Windows\\system32\\system\npause\n```\n\n\u003cbr /\u003e\n\n.  \nIn addition, online creating the whole image should be possible.  \nImagine a added mass storage controller, e.g. a SCSI, USB, SD controller: \\*.sys files are copied to system32\\\\drivers at installation. These \u0027.sys files are to be copied too.  \n\nA raw example can be ImageCopyFilesXP.cmd [http://reboot.pro/to...tor/#entry55556](http://reboot.pro/topic/6672-idea-fake-signature-method-creator/#entry55556 \"\")  \nThis was about offline creating back then. Incldue vscsc.exe and change to online crating.  \nThe file storport.sys is added to the image already. nvme.sys should be selected automatic.   \n"
    },
    {
      "id": "207419",
      "timestamp": "2018-07-30T18:34:19+00:00",
      "author": "Dietmar",
      "content": "Hi cdob,\n\nthank you a lot for your idea!\n\nThe problem in \"Kansas City Shuffle\" is:\n\nHow to update the hive \"system\" always, like in normal XP. Until now hive system is read only on CD.\n\nWhen I read the description of \"volume shadow copy\" I see,\n\nthat it is possible at any time to make a backup from *any file* from XP, even some programs make use of it.\n\nBut I do not understand in full, how the batch program can reach this.\n\nI understand from your idea: You try to copy from the running \"Kansas City Shuffle\" the actual hive system\n\nat a special timepoint back to the \"CD\", right?\n\nUntil now, the kicker CD is always mounted as G:\\\\. (This can be in future also a writable USB stick, working as *floppy* B:\\\\.)\n\nNow comes the batch file:\n\nvscsc.exe -exec\u003dclone_C2F.cmd C:\\\\\n\nwith clone_C2F.cmd\n\n@echo off  \ndosdev.exe C: %1  \ndir c:\\\\  \ncopy C:\\\\Windows\\\\system32\\\\system B:\\\\Windows\\\\system32\\\\system  \npause\n\nWhen does this batchfile start? And can this been put together all in one batch file?\n\nI think, you try to make this possible also before,\n\nwhere was the problem,\n\nhave a nice evening\n\nDietmar\n\nPS: I noticed, that it is not possible to extract the hive \"system\" as system.reg from the running \"Kansas City Shuffle\".\n\nIt crashes and the builded system.reg file is empty.\n\nCorrection: It crashes only on Samsung 960 pro. On Toshiba RD400 and on Samsung 950 pro\n\nit does not crash. But it is not possible, just to update System via system.reg file on next boot,\n\nmessage comes: \"Not all keys can be set.\"\n\n"
    },
    {
      "id": "207421",
      "timestamp": "2018-07-30T20:06:17+00:00",
      "author": "Dietmar",
      "content": "Also with 3 nvme disks connected (Samsung 960 pro, 950 pro, Toshiba RD400)\n\nthe \"Kansas City Shuffle\" starts with the driver nvme.sys ver. 1.3 from Kai,\n\nit is stable\n\nDietmar\n\n"
    },
    {
      "id": "207422",
      "timestamp": "2018-07-30T21:38:35+00:00",
      "author": "cdob",
      "content": "\u003e Until now hive system is read only on CD.\nWhat\u0027s a CD :wink: A 12 cm pice, to put a cup on top? Sorry, could not resist.  \nWhat about change to a writable media? Another internal driver or a USB stick?  \n\n\u003e When I read the description of \"volume shadow copy\"\n\"volume shadow copy\" is a default XP service, vscsc.exe uses the existing XP service.  \nIt freezes the hard disk time, travels at light speed to spacetime and creates a parallel universe :smile:  \nThere are two virtual volumes after, a old historic one at one universe.  \nAnd another virtual virtual volume with current files at the other universe.  \n\nA whole running XP can be cloned that way, even at open files.  \nAnother Olof program:  \nstrarc.exe -c -j -d:B:\\\\ \\| strarc.exe -xd:F:\\\\  \n\n\u003e I understand from your idea: You try to copy from the running \"Kansas City Shuffle\" the actual hive system  \n\u003e at a special timepoint back to the \"CD\", right?  \n\u003e\n\u003e Until now, the kicker CD is always mounted as G:\\\\. (This can be in future also a writable USB stick, working as *floppy* B:\\\\.)\nYes, write to the USB stick.  \n\nThe two lines translated:  \nvscsc.exe -exec\u003dclone_C2F.cmd %SystemDrive%  \ndosdev.exe B: %1  \n\nvscsc.exe creates a volume shadow ID from %SystemDrive%, often the volume C:  \ndosdev.exe maps the volume shadow ID to the letter B:  \nB: is the old volume c: at the parallel historic universe.  \nC: is the current c: at the current universe.   \n"
    },
    {
      "id": "207423",
      "timestamp": "2018-07-30T21:55:43+00:00",
      "author": "Dietmar",
      "content": "Hi cdob,\n\nwhen I change the CD against a writable USB stick,\n\n\"Kansas City Shuffle\" is not rock stable anymore.\n\nThe kicker USB floppy has no device letter on starting XP.\n\nWhen it gets one, it crashes.\n\nSo, may be exact this USB stick has do be in the exact USB slot,\n\nwhen you build the kicker image.\n\nYou work quite long time with \"Kansas City Shuffle\".\n\nSo I wonder, what kind of experience you have\n\nDietmar\n\n"
    },
    {
      "id": "207424",
      "timestamp": "2018-07-30T23:14:25+00:00",
      "author": "dencorso",
      "content": "\u003e So, may be exact this USB stick has do be in the exact USB slot,\n\nYes, one has to use the exact same USB connector always, unless one changes the CriticalDeviceDatabase, as per your classic Tutorial 2! karyonix ( ![:worship:](https://reboot.pro/public/style_emoticons/default/worship.gif) ) pointed that to me a long time ago: please read the [two last posts of this old thread](http://reboot.pro/topic/8307-is-every-bootable-external-usb-win-xp-married-to-the-usb-port-it-was-created-from-solved/ \"\").\n\n"
    },
    {
      "id": "207425",
      "timestamp": "2018-07-30T23:56:36+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nthanks a lot, it is so funny with nvme boot:\n\nWhen you disconnect the USB stick, before it gets a letter,\n\nall is ok. Yes, this USB stick loses contact with USB files from Bios, when starting level 2 of bootstage.\n\nBut it is not asked for that, because the nvme disc rules with nvme.sys driver from the USB stick in last second of its \"life\".\n\nOh, when bootstage2 is ready, suddently there are USB drivers again\n\nand for the USB stick it looks like new life again, means possibility to crash ![:wacko:](https://reboot.pro/public/style_emoticons/default/wacko.png) nvme disk\n\nDietmar\n\n"
    },
    {
      "id": "207430",
      "timestamp": "2018-07-31T18:44:09+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nfun goes on! I just copy bit by bit the XP.IMG to the usb stick. Not usb friendly, no grub4dos ![:D](https://reboot.pro/public/style_emoticons/default/biggrin.png).\n\nThis I connect to the compi with the nvme disk, BIOS has no idea about nvme.\n\nOh, so much fun: The start usb stick is gone\n\nduring boot, when it losts contakz with the usb files from bios.\n\nXP starts from the files nvme.sys and storpor.sys which fresh brought by usb stick before dying.\n\nThen at full XP message comes, that usb stick is found :tongue: .\n\nNow they live in peacefull coexistence, usb stick shown as removable device.\n\nThis gives the big advantage, that now using shadow copy I do not need to mount the image,\n\nit is open all the time on usb stick\n\nDietmar\n\nEDIT: I delete the key\n\nHKEY_LOCAL_MACHINE\\\\SYSTEM\\\\MountedDevices\n\non the usbstick before first boot. In other case it crashes on 2. boot.\n\nThis is very funny. XP seems to make a copy of the loaded hive system as its own file system,\n\nbecause there the key HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\MountedDevices is also gone.\n\nMay be, XP does not *need*this files from usbstick for to have as its own. I will test.\n\n"
    },
    {
      "id": "207431",
      "timestamp": "2018-07-31T19:55:37+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e This I connect to the compi with the nvme disk, BIOS has no idea about nvme.\n\u003e\n\u003e Oh, so much fun: The start usb stick is gone\n\u003e\n\u003e during boot, when it losts contakz with the usb files from bios.\n\u003e\n\u003e XP starts from the files nvme.sys and storpor.sys which fresh brought by usb stick before dying.\n\u003e\n\u003e Then at full XP message comes, that usb stick is found :tongue: .\n\u003e\n\u003e Now they live in peacefull coexistence, usb stick shown as removable device.\n\nThat would be a \"loop\" Kansas City Shuffle.\n\nIn the original the initial image is only used for the first part of booting, and later NOT mounted (but it could be using - say - IMDISK, FIRADISK or similar).\n\nIn this version the automatic auto-detection of USB devices kicks in and re-mounts (as a secondary, not boot device) the USB stick.\n\nThe MountedDevices key needs to be deleted because of this second mounting, though actually only the specific two keys related to the volume on the USB stick could be deleted.\n\nI would also try to unmount/unassign the drive letter (Mountvol or similar) of the USB stick before rebooting, maybe that would be enough to have a clean 2nd boot.\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207432",
      "timestamp": "2018-07-31T20:05:11+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\nthanks for help!\n\nI renamed hive system on nvme disk, compi reboots.\n\nI make an empty system hive system on nvme disk, reboot.\n\nSo, the hive system is necessary for booting nvme from kickstarter, even hive system is loaded from kickstarter to ram.\n\nEven I use FAT 32, the compi corrected the clock in hive system on the usb stick (this means writing there)\n\nDietmar\n\nEDIT: NO writing to hive system on USB stick after deleting HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\MountedDevices on USB stick before 1. boot. This is very important!!! I just load both hive system before and after, export them to before.reg and after.reg and compare with \"Beyond Compare 2\". This is a very good news, because now Shadow Copy can happen, makes sense. Very clear situation now, nice.\n\nEDIT2: Hm, even the registry entries for system are identic, a direct compare of hive system on usb stick before load and hive system after loading shows a difference! Now I understand, why booting from CD gives a rocksolid XP but from USB stick not. There are more entries in registry possible, than export as \\*.reg can show.\n\nThis is bad for Shadow Copy\", because the usb stick must be writable for this.\n\n"
    },
    {
      "id": "207433",
      "timestamp": "2018-07-31T21:54:25+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI write about 100 times 16 Gbyte to the Samsung 960 pro.\n\nOha, now on nearly every boot comes error messages about disrupted sectors.\n\nHere it is very hot, today nearly 40 degrees. The Samsung stick reaches temperatures like for cooking.\n\nI think, I like normal harddisks more :smile:\n\nDietmar\n\nPS: Also the Sandisk ultra USB stick: Write file about 150 MByte, nearly always controll with Winhex tells,\n\nthat some bytes are different. I understand, why Microsoft certified only very few USB sticks.\n\nI have one from Kingston DT Workspace, there do this bad things not happen.\n\n"
    },
    {
      "id": "207434",
      "timestamp": "2018-08-01T09:55:26+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e PS: Also the Sandisk ultra USB stick: Write file about 150 MByte, nearly always controll with Winhex tells,\n\u003e\n\u003e that some bytes are different. I understand, why Microsoft certified only very few USB sticks.\n\u003e\n\u003e I have one from Kingston DT Workspace, there do this bad things not happen.\n\nHmmm. ![:dubbio:](https://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nIt depends on a number of factors, but if the different bytes belong to unallocated space, then it is likely the wear leveling algorithm switching sectors.\n\nIf that was not the case, you would have corrupted files very, very often, and that would make the stick totally unusable in practice.\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207435",
      "timestamp": "2018-08-01T10:19:05+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\nthe funny thing is,\n\nthat in most cases, when you rewrite the USB stick with the same file again,\n\nafter this rewrite it is identic.\n\nI think, it is really a big problem of most sticks and only the repair\n\noperations on this sticks do not show big damage at once.\n\nAt school I installed USB Windows on USB sticks, all with the Hitachi filter and EWF enabled.\n\nAfter one week, *all* sticks do not funktion correct any longer, show crazy behavior, real destroyed,\n\neven it is only *read* from them!\n\nOnly the Kingston DT stick was still alive.\n\nSo I changed the USB sticks against USB harddrives.\n\nWithout any problems, all with the Hitachi filter and EWF enabled, they work there now for 3 years\n\nDietmar\n\nEDIT: The Toshiba RD400 500GB nvme was brandnew. Writing 16 GB lasts in the beginning about 2 min,\n\ndepends on black WD 2TB, writes max 200 MByte/sec. After may be 10 times doing this,\n\nsuddently the time reaches 5 min and now 10 min. This means, it is much slower than the harddisk in writing\n\na continues file of 16 GB! The funny thing for the Toshiba is, that this file is always to 100% correct.\n\nEDIT: The Toshiba SSD tool tells me, that my RD400 is 100% healthy, no media error.\n\nI just format it with this tool. Hm, strange. During write of 16 GB direct to the media via Winhex, format type is unimportant?!..I see, that something changed on the RD400. The tool gives zero answer for this.\n\nUpdate: Oh, this is really funny: After \"format\" with the Toshiba SSD tool, the RD400 shows only 00 on it.\n\nI just copy the 16 GB continues file on it: Waooh, now it needs only 79 sec, meaning the format tool is doing much\n\nmore with this disk, but I dont know what.\n\nThe Samsung 960 pro is still as fast as in the beginning. In 1 from 3 times 16 GB file now there are errors on it.\n\nI use with Win10 the Magician software. This one told: 2 TB are written, the disk is good.\n\nWhen you take a deeper look on the 960 pro you see, that the intern controllers told errors in more than 1000 cases.\n\n[https://www.searchst...-Spruenge-hilft](https://www.searchstorage.de/meinung/LDPC-Wie-ein-fuenfzig-Jahre-alter-Code-Flash-Speicher-auf-die-Spruenge-hilft \"External link\")\n\nI do not think, that you need this for harddisks!\n\nDoes somebody know a tool, with which you can read parameters of any nvme disk?\n\n"
    },
    {
      "id": "207436",
      "timestamp": "2018-08-01T16:41:11+00:00",
      "author": "Dietmar",
      "content": "With the \"new\" RD400 the \"Kansas City Shuffle\"\n\nis now rocksolid as before and very fast.\n\nBut it does not like, when the kickstarter on USB stick gets mounted.\n\nI think, because XP does not know, how to handle 2 devices with the same signatur\n\nDietmar\n\nPS: When you start with the kickstarter USB stick, looking like real harddisk without grub4dos,\n\nyou have to disconnect it, before it is again recogniced.\n\nBecause of this, when you connect new hardware, you have to copy by hand the hive system from\n\nRD400 to USB stick. This works.\n\n"
    },
    {
      "id": "207437",
      "timestamp": "2018-08-01T19:05:27+00:00",
      "author": "dencorso",
      "content": "Hi, Dietmar!  \nWhat about using a RAM mapped kickstarter? I mean:  \n\ntitle Image on RAM chainloading USB (or nvme)  \nmap --mem /XP.IMG (hd1)  \nmap --hook  \nchainloader (hd1,0)/ntldr  \n\nAnd the host pendrive can have an MBR with a different checksum and signature, so that XP won\u0027t hate it. :smile:  \n\nBTW, I have a Kingston DT Workspace 64G and a Super\\*Talent RAIDDisk 32G (which I bought used... it\u0027s out of the market for a long time, now). They\u0027re the fastest and most reliable pendirves I\u0027ve ever had (and also may be used to fry eggs!). It\u0027s too bad Wonko doesn\u0027t even consider them pendrives... ![:(](https://reboot.pro/public/style_emoticons/default/sad.png)   \n\nHave a nice day!\n\n"
    },
    {
      "id": "207438",
      "timestamp": "2018-08-01T19:21:08+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nwhen you want to write back the hive system to the XP.IMG,\n\nfirst you have to mount it.\n\nAnd at this point the problem appears, because this XP in XP.IMG has the same signatur and checksum.\n\nOther USB sticks or harddrives you can connect, I tried.\n\nThe trick has to be, to put back hive system from nvme RD400 to XP.IMG without mounting it (or without underlying XP gets notice of that).\n\nWith Shadow Copy it can be done, but how without mounting?!\n\nThis would work\n\nDietmar\n\nPS: You can copy the hive system back to the USB stick, where the XP.IMG stays on.\n\nBut later you have to put it back into XP.IMG, mounted on other XP.\n\n"
    },
    {
      "id": "207439",
      "timestamp": "2018-08-01T20:10:05+00:00",
      "author": "Dietmar",
      "content": "Yessa, I got it :smile: !\n\nI noticed, that the kicker USB stick without grub4dos is recogniced as *removable device,*\n\nit gets in Mounted Devices in hive system on the nvme disk RD400\n\nas device with D:\\\\ **another MBR signatur there**, but keeps the signature from the harddisk in real,\n\nas you can see with Winhex, really crazy, but then crashes always.\n\nNow I did the following:\n\nAfter boot I connect few min later the kicker USB stick again and shut it down at once after it gets letter D:\\\\, before crash ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png) happens.\n\nThen I copy from other XP this hive system from the RD 400 to the kicker USB stick.\n\nAnd now it is really crazy: This kicker USB stick is not recogniced from RD400 disk,\n\nit is just there from the beginning, with another MBR signature, but has in real the signature from RD400.\n\nSo, now Shadow Copy can work,\n\nbecause the kicker USB stick is always mounted as D:\\\\\n\nDietmar\n\n"
    },
    {
      "id": "207440",
      "timestamp": "2018-08-01T20:12:11+00:00",
      "author": "cdob",
      "content": "\u003e With the \"new\" RD400 the \"Kansas City Shuffle\"  \n\u003e is now rocksolid as before and very fast.\nThat\u0027s good news.  \n\n\u003e But it does not like, when the kickstarter on USB stick gets mounted.  \n\u003e I think, because XP does not know, how to handle 2 devices with the same signatur\nHow do you mount the kickstarter?  \nThe MBR, signature and checksum is valid already. No need to mount the whole hard disk image.  \nUse imdisk and mount the volume only: MBR (and signature) is not included.   \n"
    },
    {
      "id": "207441",
      "timestamp": "2018-08-01T20:20:50+00:00",
      "author": "Dietmar",
      "content": "Hi cdob,\n\nthe USB kickstarter has now no need to be mounted.\n\nSo funny, without Grub4dos it starts the nvme disk RD400,\n\nthan, because not usb friendly, loses contact,\n\nbut then it is not again recogniced by XP, it is just there,\n\nbecause all its entries in registry are there.\n\nThis is really funny,\n\nbut works\n\nDietmar\n\n![kick.png](https://preview.ibb.co/m7M5Ae/kick.png)\n\n"
    },
    {
      "id": "207442",
      "timestamp": "2018-08-01T21:15:08+00:00",
      "author": "Dietmar",
      "content": "I forget to tell,\n\nthat the MBR from the USB kicker stick and from the nvme harddisk\n\nI make 100% identic. Dont know, if this has to be, but now XP has no chance to decide,\n\nsomething is other than in its normal life!\n\nVery funny, Aomei tells now, that the disks are identic but\n\nXP shows its real size\n\nDietmar\n\nPS: It is rockstable, survives reboot, remove USB stick, reconnect, extract from registry, just all.\n\n"
    },
    {
      "id": "207443",
      "timestamp": "2018-08-01T23:37:17+00:00",
      "author": "Dietmar",
      "content": "Now I have put everything on NTFS for Shadow Copy.\n\nStill works\n\nDietmar\n\n"
    },
    {
      "id": "207444",
      "timestamp": "2018-08-02T09:42:18+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nuntil now I was not able to copy anything with Shadow Copy.\n\nStrange, I look, whether it depends on Admin rights,\n\ncheck everything 10 times.\n\nIt starts, build the shadow image from C:\\\\ as B:\\\\\n\nbut then hangs. For to understand, what is going on,\n\nI will now set up a new quick NTFS XP, lasts only 5 min from USB stick.\n\nHere is my batch file.\n\nSomething wrong there?\n\n@echo off  \ndosdev.exe B: %1  \ndir B:\\\\  \nrobocopy.exe B:\\\\WINDOWS\\\\system32\\\\config\\\\system D:\\\\WINDOWS\\\\system32\\\\config\\\\system  \npause\n\nThis I store as\n\nclone_C2F.cmd on C:\\\\\n\nIn commandline on C:\\\\ I start it with\n\nvscsc.exe -exec\u003dclone_C2F.cmd C:\n\nThe files vscsc.exe, dosdev.exe, robocopy.exe are in root C:\\\\.\n\nIt depends not on \"system\" or that it is still there before on D:\\\\ or if you use copy instead of robocopy.\n\nI try to copy a simple \\*.txt file, always the same message \"Looking for..\" then comes the MBR name of old C:\\\\.\n\nhangs\n\nDietmar\n\n"
    },
    {
      "id": "207445",
      "timestamp": "2018-08-02T10:06:52+00:00",
      "author": "Wonko the Sane",
      "content": "A USB stick is normally seen as \"removable\" by the Windows XP.\n\nAs such the MountedDevices keys for the drive and drive letter in Registry use NOT the MBR signature, but rather a string like:\n\u003e\n\u003e \\\\??\\\\STORAGE#RemovableMedia#7\\\u0026201264be\\\u00260\\\u0026RM#{53f5630d-b6bf-11d0-94f2-00a0c91efb8b}\n\nso there is no direct conflict with the Disk Signature, but it is still possible that a whole range of programs and/or tools/subsystem still \"see\" the Disk Signature and use it.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207446",
      "timestamp": "2018-08-02T12:21:50+00:00",
      "author": "Dietmar",
      "content": "I changed after start the USB kickstarter against another USB stick.\n\nThis one gets the letter E:\n\nBut Shadow Copy hangs at exact the same place (query the shadow image..)\n\nDietmar\n\n"
    },
    {
      "id": "207447",
      "timestamp": "2018-08-02T14:14:11+00:00",
      "author": "Dietmar",
      "content": "On XP on NTFS harddisk this following batchfile works, stored as clone_C2F.cmd on C:\\\\\n\n@echo off  \ndosdev X: %1  \nrobocopy X:\\\\Windows\\\\system32\\\\config D:\\\\Windows\\\\system32\\\\config system  \nDOSDEV /D X:  \npause\n\nStarting from commandline with\n\nvscsc -exec\u003dclone_C2F.cmd C:\n\nNow I look, when nvme XP starts with grub4dos, if Shadow Copy there works\n\nDietmar\n\n"
    },
    {
      "id": "207448",
      "timestamp": "2018-08-02T14:41:53+00:00",
      "author": "Dietmar",
      "content": "And again the Sandisc Ultra 64Gb USB stick does not like to get a single file with 16 GB to be copied on it,\n\nbrrr..\n\nDietmar\n\n"
    },
    {
      "id": "207449",
      "timestamp": "2018-08-02T15:13:51+00:00",
      "author": "Dietmar",
      "content": "grub4dos does not help.\n\nIt stops exact at the same place:\n\nShadow Copy build new Shadow from C:\\\\ and then asks for its own, new build shadow X:\\\\ (with arcname),\n\nthere it hangs always\n\nDietmar\n\n"
    },
    {
      "id": "207450",
      "timestamp": "2018-08-02T17:06:01+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\nyou where right.\n\nI copied the content of the nvme RD 400 to a real NTFS harddisk\n\nand connect there the USB kickstarter disk.\n\nOh, I cannot open a single file on the USB kickstarter from the harddisk,\n\nno matter in which slot it is!\n\nAlways is told 0 Bytes, you have no right to open it :tongue: .\n\nAnd when I do a Shadow Copy,\n\nit answers: The folder Windows is blocked.\n\nWhen I use another USB stick, at once the Shadow Copy of hive system happens\n\nDietmar\n\n"
    },
    {
      "id": "207456",
      "timestamp": "2018-08-03T12:58:08+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nagain the Toshiba RD400 needs about 10 min,\n\nfor to write a 16 GB continues file on it with Winhex,\n\nmeaning that the underlying harddisk black WD 2TB is\n\nabout 10 times faster!\n\nThis behavior remembers me a lot to USB sticks\n\nDietmar\n\nPS: But no errors in 16GB on RD400, this is nice.\n\n"
    },
    {
      "id": "207459",
      "timestamp": "2018-08-04T12:44:50+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI think I found the reason,\n\nwhy XP does not like to start from Samsung 950 pro (with own Bios).\n\nIt is the fault of ntldr from XP (this happens not on NT4 and also not with the bootloader from Reactos).\n\nNTLDR from XP sees a different geometry of the harddisk as Bios from 950 pro via INT13 sees!\n\nAnd this case gives the crazy message \"ntldr not found\".\n\nIs there another version of ntldr in the world, which does not decide, if this is the correct numbers of heads..etc.\n\non harddisk, may be one, which works only with lba?\n\nHave a nice day\n\nDietmar\n\nEDIT: Is there a program, with which you can find out, how the geometry of the harddisk is,\n\nthat Bios from 950 pro tells to ntldr via INT13?\n\n"
    },
    {
      "id": "207460",
      "timestamp": "2018-08-04T13:38:14+00:00",
      "author": "Wonko the Sane",
      "content": "What about the grub4dos *geometry* command?\n\nAFAIK it should show what the INT13 provides.\n\nIs it possible that the issue is with CHS/LBA unbalanced values?\n\nThere should be no issues with having only LBA values in the MBR partition table, however.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207463",
      "timestamp": "2018-08-04T14:09:21+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\nI came to the idea,\n\nwhen I read\n\n[http://blog.clemens....ndows_3170.html](http://blog.clemens.endorphin.org/2007/12/removing-chs-based-access-from-windows_3170.html \"External link\")\n\nHe did a hack, looking for 4 bytes\n\n0F823A00 and changed them against 90909090 for NTFS and\n\n0F824A00 and changed them against 90909090 for Fat32\n\nthis I am trying just now to fake all missunderstandings in geometrie in ntldr.\n\nI am sure, that I found the reason, because the message \"ntldr not found\" happens very short after\n\nthis 4 bytes, as you can see with WinHex.\n\nAlso I will try your idea with grub4dos *geometry* command.\n\nVery clear, why this is the reason: The manufacturer Samsung gives in BIOS via INT13 fixed\n\nunknown values for its never changing, underlying nvme harddisk 950 pro in its rom Bios.\n\nAs long as the OS loader has no problem with this, may be \"strange geometrie\", it boots.\n\nIf ntldr has a problem with the geometrie values from this 950 pro BIOS,\n\nit just gives the message \"ntldr not found\"\n\nDietmar\n\nEDIT: Hack 90909090 does not work on 950 pro.\n\n"
    },
    {
      "id": "207464",
      "timestamp": "2018-08-04T15:07:55+00:00",
      "author": "Dietmar",
      "content": "hi jaclaz\n\ngrub\\\u003egeometry\n\ndrive 0x80(LBA): C/H/S\u003d2089/255/63, Sector Count/Size\u003d33559785/512\n\nPartition num: 0, active, Filesystem type is fat32, partition type 0x0C\n\nGrub in mbr works, but ntldr not,\n\nDietmar\n\nEDIT: This are the values from mbr I think. So, no real information what Bios from 950 pro tells.\n\n"
    },
    {
      "id": "207465",
      "timestamp": "2018-08-04T15:12:55+00:00",
      "author": "Wonko the Sane",
      "content": "I don\u0027t think you found anything connected.\n\nThe patch for the NTFS and FAT32 bootsector code is ONLY related to the code used in the bootsector.\n\nIf you use the grub4dos and chainload /ntldr that piece of code is never used, as you are bypassing the bootsector code altogether.\n\nIf I recall correctly we already booted (with cdob) some XP\u0027s without any CHS data in the MBR partition table, only LBA values.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207466",
      "timestamp": "2018-08-04T15:31:39+00:00",
      "author": "Dietmar",
      "content": "Hi jaclaz,\n\ndo you have a working mbr for XP for this\n\n\"If I recall correctly we already booted (with cdob) some XP\u0027s without any CHS data in the MBR partition table, only LBA values.\"\n\nDietmar\n\n"
    },
    {
      "id": "207474",
      "timestamp": "2018-08-04T17:56:34+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Hi jaclaz,\n\u003e\n\u003e do you have a working mbr for XP for this\n\u003e\n\u003e \"If I recall correctly we already booted (with cdob) some XP\u0027s without any CHS data in the MBR partition table, only LBA values.\"\n\u003e\n\u003e Dietmar\n\nI don\u0027t think the MBR code was modified.\n\nSImply 00 the CHS table bytes of the entry, it should work. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nOr try using the modified MBR code (for very different reasons) used here:\n\n[http://reboot.pro/to...e-4#entry186449](http://reboot.pro/topic/19516-hack-bootmgr-to-boot-windows-in-bios-to-gpt/page-4#entry186449 \"\")\n\nI believe the above suits better the case than the seconf version here:\n\n[http://reboot.pro/to...o-gpt/?p\u003d186471](http://reboot.pro/topic/19516-hack-bootmgr-to-boot-windows-in-bios-to-gpt/?p\u003d186471 \"\")\n\nwith that the used by BIOS/code partition table entry is \"moved\" in such a position that you can effectively boot (first part of booting, i.e. real mode) a volume which is not in the \"real\" partition table (or it could be the same but with different CHS values).\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "207489",
      "timestamp": "2018-08-07T06:02:49+00:00",
      "author": "dencorso",
      "content": "Nowadays, my main rig is an Asus P8Z68-V LX, powered by an i7 3770k and having 16 GiB RAM. I decide to try Kai\u0027s Community OFA NVMe drivers in it and so got a no-name M.2 to PCI-e adapter and a brand-new 250 GB Saumsung 970 EVO. After installing that, the BIOS remained fully ignorant of it, as expected, but Windows 7 SP1 x32 detected it all right, and works well with it with either v. 1.3 or v. 1.5 of Kai\u0027s drivers, or with Samsung\u0027s own v. v3.0.0.1802 WHQL driver (and it\u0027s recognized by Samsung\u0027s Magician, which also tells me it\u0027s genuine it has no problems). Once I was satisfied with that I\u0027ve used diskpsrt to convert the drive from GPT to MBR, then formatted it as a single 256GB FAT-32 primary partition (to get it as plain vanilla as possible for XP SP3). Then I rebooted the machine into XP SP3 and it detected the PCI-e device promptly (just as Win 7 SP1 had done), and accepted Kai\u0027s Community OFA NVMe driver v. 1.3 (I had already put storport.sys v. 5.2.3790.4173) into the drivers folder. However, after installing the driver on XP I get a yellow bang, with the infamous \"This device cannot start. (Code 10)\". Same result with Kai\u0027s driver v. 1.5, and also when replacing storport.sys v. 5.2.3790.4173 by v. 5.2.3790.4163 GDR (from [KB943295](https://www.microsoft.com/en-us/download/details.aspx?id\u003d2230 \"External link\")). At this point, I confess I\u0027m baffled. The 970 EVO cannot be that much different from the 960 EVO Kai\u0027s used while developping his mods, now, or can it? Any ideas on what may be going wrong will surely be much appreciated.\n\n"
    },
    {
      "id": "207491",
      "timestamp": "2018-08-07T10:55:21+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nbe sure, that you have 5.2.3790.4173 ver. storport.sys in windows\\\\system32\\\\drivers.\n\nTake a look at the Bios of the Asus P8Z68-V LX.\n\nFor this download the UEFITool.exe\n\nfrom [https://www.win-raid...-UEFI-BIOS.html](https://www.win-raid.com/t871f50-Guide-How-to-get-full-NVMe-support-for-all-Systems-with-an-AMI-UEFI-BIOS.html \"External link\")\n\nwether your BIOS supports *legacy* nvme,\n\nthen you will find three files there:\n\nNvme\n\nNvmeSmm\n\nNVMEINT13\n\nYou can do this with a downloaded BIOS from Internet for your motherboard.\n\nIf you do not find this 3 files, no INT13 *boot* XP SP3 from nvme disk is possible on the board.\n\nIn this case, only the \"Kansas City Shuffle\" methode\n\nworks,\n\nhave a nice day\n\nDietmar\n\nPS: Without any support from BIOS, some motherboards recognice the nvme disk as codevice, some not.\n\nMake a try to change the PCIe slot for the graphikcard with PCIe slot for the nvme disk.\n\nYou can also make a try to integrate NvmExpressDxe_4.ffs to the BIOS from the Website from Fernando.\n\nBe very careful with that!\n\n"
    },
    {
      "id": "207492",
      "timestamp": "2018-08-07T11:38:17+00:00",
      "author": "Wonko the Sane",
      "content": "Only to (hopefully) contribute to the communication, dencorso never stated he actually attempted to ***boot** from* the new thingy, he attempted to access it as a secondary drive from an already booted XP SP3\\[1\\].\n\nThere is NO need whatsoever of any BIOS level support for a Mass Storage device accessed as secondary drive (not the boot/system one) this seems a much more \"normal\" :\n\u003e\n\u003e \"This device cannot start. (Code 10)\"\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n\\[1\\] which - with no offence whatever implied to dencorso - very likely it is not a fresh installed XP SP3, but rather an existing installations where hundreds or possibly more drivers, programs and what not installed and removed, registry hacks, original or modified updates, etc. has been run.\n\n"
    },
    {
      "id": "207493",
      "timestamp": "2018-08-07T11:44:15+00:00",
      "author": "Dietmar",
      "content": "I remember,\n\nthat on my x58 board it was also not possible under XP\n\nto have a nvme disk as codevice, same message (Code 10).\n\nDietmar\n\nPS: I noticed, that some PCIe slots are connected with each other.\n\nThis can also give the \"This device cannot start. (Code 10)\" message.\n\nEDIT: Asus P8Z68-V LX\n\nDer PCIe x16_2-Steckplatz teilt die Bandbreite mit dem PCIe x1_1- und dem PCIe x1_2-Steckplatz.\n\n"
    },
    {
      "id": "207496",
      "timestamp": "2018-08-07T19:59:25+00:00",
      "author": "dencorso",
      "content": "\u003e Only to (hopefully) contribute to the communication, dencorso never stated he actually attempted to ***boot** from* the new thingy, he attempted to access it as a secondary drive from an already booted XP SP3\\[1\\].\n\nSure! I think that if I cannot actually recognize and use the disk normally in an already booted XP, then all attempts at booting from it ought to be futile. :smile: Therefore, I set my goal at getting the disk working on XP before even thinkinh of attempting anything more complex, of course! ![:innocent:](https://reboot.pro/public/style_emoticons/default/innocent.gif)\n\n\u003e ... he attempted to access it as a secondary drive from an already booted XP SP3, which - with no offence whatever implied to dencorso - very likely it is not a fresh installed XP SP3, but rather an existing installations where hundreds or possibly more drivers, programs and what not installed and removed, registry hacks, original or modified updates, etc. has been run.\n\nNo offence taken. And, sure, this installation is from Jan 1st, 2014, which makes it one of my newest installations. As you may remember, I never reinstall an OS, unless the initial installation went wrong. By contrary, I make partition images obsessively, and when anything starts to blork, I redeploy the latest (or, rarely, an older) backup. That\u0027s also my preferred method for removing something I decide to install but, then, regret havng done so. Therefore it surely is a very complex tweaked install, with many drivers and countless possible conflicts with the new driver and/or hardware. And the same is true of the Win 7 SP1 installation in which the drive worked. Now, if I don\u0027t get it to work on this XP SP3, I may move the drive to another machine or decide to sell it. I have, after all, no real need for it, and installed it just for the lulz. But, for now, I think it\u0027s too soon to give up, so I intend to try to get it to work some more. :smile:\n\n\u003e I remember,\n\u003e\n\u003e that on my x58 board it was also not possible under XP\n\u003e\n\u003e to have a nvme disk as codevice, same message (Code 10).\n\u003e\n\u003e Dietmar\n\u003e\n\u003e PS: I noticed, that some PCIe slots are connected with each other.\n\u003e\n\u003e This can also give the \"This device cannot start. (Code 10)\" message.\n\u003e\n\u003e EDIT: Asus P8Z68-V LX\n\u003e\n\u003e Der PCIe x16_2-Steckplatz teilt die Bandbreite mit dem PCIe x1_1- und dem PCIe x1_2-Steckplatz.\n\nIt may be the case here, too. And yes, I had seen that. I initially installed the adapter on PCIe x16_2 (which is actually a x4 in a x16 slot), but it refused to work (because I have an USB 3.0 card in PCIe x1_2, I presume). So I moved the adapter to PCIe x16_1 (which is truly x16 and does not share bandwidth with any other slot, it\u0027s the one intended for a graphics card), and then it started working, at least on Win 7 SP1.\n\n"
    },
    {
      "id": "207497",
      "timestamp": "2018-08-07T20:34:50+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nI make a try with renaming nvme.sys to ntbootdd.sys.\n\nVia this way, I can install for the very first time XP SP3 direct to an nvme disk on\n\na compi, that never heard about nvme in BIOS before.\n\nBut when it reboots to second install stage, it crashes.\n\nIn first place I think it is normal, because the nvme drive is still not\n\nrecogniced from BIOS and so ntbootdd.sys cant even start.\n\nThe XP SP3 install with ntbootdd.sys gives a signature (not scsi(0)) entry in boot.ini on nvme disk.\n\nNow I put on an USB stick ntbootdd.sys, storport.sys, boot.ini with signature entry\n\nntldr and ntdetect.com.\n\nHm, on second install stage after reboot and starting from the USB stick, it also crashes.\n\nThis I do not understand. May be, that ntbootdd.sys can only work with scsiport.sys and\n\nnot with storport.sys\n\nDietmar\n\n"
    },
    {
      "id": "207498",
      "timestamp": "2018-08-07T21:01:09+00:00",
      "author": "dencorso",
      "content": "Hi, Dietmar!  \nJust to add more info, I get these two errors on the Event Log:\n\n```\nSource: Service Control Manager\nEventID: 7026\nThe following boot-start or system-start driver(s) failed to load:\nnvme\n\nSource: nvme\nEventID: 11\nThe driver detected a controller error on .\n```\n\nHowever it seems to me that only indicates the driver isn\u0027t being able to load, but not why that is so...  \n\nHave a nice day!\n\n"
    },
    {
      "id": "207499",
      "timestamp": "2018-08-07T21:27:33+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nit is just the beginning of fun :tongue: !\n\nI think, that ntbootdd is possible too.\n\nTomorrow or the day after tomorrow I test your mainboard Asus P8Z68-V LX for nvme,\n\nbecause I get,\n\nhave a nice evening\n\nDietmar\n\n"
    },
    {
      "id": "207502",
      "timestamp": "2018-08-08T04:36:56+00:00",
      "author": "Dietmar",
      "content": "I understand,\n\nwhy nvme.sys renamed to ntbootdd.sys\n\nuntil now not works correct.\n\nThere are no extra registry entries allowed,\n\nwhen ntbootdd.sys starts first time.\n\nSo I will put\n\n\\[HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\nvme\\\\Parameters\\\\Device\\]  \n\"Namespaces\"\u003ddword:00000010  \n\"MaxTXSize\"\u003ddword:00020000  \n\"AdQEntries\"\u003ddword:00000080  \n\"IoQEntries\"\u003ddword:00000400  \n\"IntCoalescingTime\"\u003ddword:00000000  \n\"IntCoalescingEntries\"\u003ddword:00000000\n\nfixed in source code\n\nand compile nvme.sys new\n\nDietmar\n\n"
    },
    {
      "id": "207506",
      "timestamp": "2018-08-08T15:42:30+00:00",
      "author": "Dietmar",
      "content": "Hi all, especially Kai,\n\neasy hack in Source code of nvme vers. 1.3 in nvmeStd.h does not work.\n\nThe reason for this hack is: A scsiport driver, renamed to ntbootdd.sys\n\ncant fetch any value from registry, because it is alone with ntldr at boottime, and those values have to be given by hand before.\n\nOther question is, if ntldr of XP can handle this, because ntldr works in XP like scsiport.sys\n\nwhen seeing ntbootdd.sys and not like storport.sys but who knows..\n\nntldr from win server 2003 should do that (ntbootdd works also there, with signature in boot.ini). But even there I am not sure,\n\nif ntldr of server 2003 has the same possibilities like storport.sys vers. 5.2.3790.4173.\n\nHere is the hack I tried (too easy ![:wacko:](https://reboot.pro/public/style_emoticons/default/wacko.png) )\n\n/\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*  \n\\* Registry Initial Information data structure.  \n\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*/  \ntypedef struct _INIT_INFO  \n{  \n/\\* Supported number of namespaces \\*/  \nULONG Namespaces \u003d 16;  \n\n/\\* Max transfer size via one cmd entry, 128 KB by default \\*/  \nULONG MaxTxSize \u003d 131072 ;  \n\n/\\* Supported number of entries for Admin queue \\*/  \nULONG AdQEntries \u003d 128 ;  \n\n/\\* Supported number of entries for IO queues \\*/  \nULONG IoQEntries \u003d 1024 ;  \n\n/\\* Aggregation time in 100 us, 0 means disabled \\*/  \nULONG IntCoalescingTime \u003d 0 ;  \n\n/\\* Aggregation entries per interrupt vector \\*/  \nULONG IntCoalescingEntry \u003d 0 ;  \n\n} INIT_INFO, \\*PINIT_INFO;\n\nThe idea is easy, but the compiler does not like an empty typedef struct\n\nDietmar  \n\n"
    },
    {
      "id": "207508",
      "timestamp": "2018-08-13T12:08:29+00:00",
      "author": "Dietmar",
      "content": "Hi dencorso,\n\nI installed a new XP SP3 on Asus P8Z68-V LX,\n\nput storport.sys and nvme.sys vers. 1.3 from Kai in folder\n\nwindows\\\\system32\\\\drivers.\n\nThe nvme disk Samsung 960 pro 500GB was recogniced at once\n\nand after reboot works normal.\n\nI also tried the Kansas City Shuffle on this board,\n\nworks nice.\n\nOne difference I noticed: I cant install XPSP3 on nvme disk on this board,\n\non Asus z87-pro, also without any nvme in Bios, I can\n\nDietmar\n\n"
    },
    {
      "id": "207509",
      "timestamp": "2018-08-13T13:00:12+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nI make some more tests,\n\nif nvme.sys ver. 1.3 from Kai can be used as\n\nntbootdd.sys. There is also a size limit for ntbootdd.sys 64kB, nvme.sys here is 44kB.\n\nWhen I delete in registry on kicker disk hive system **all** entries for nvme named Device (delete Device subkey),\n\n\\[HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\nvme\\\\Parameters\\\\**Device** \\]  \n\"Namespaces\"\u003ddword:00000010  \n\"MaxTXSize\"\u003ddword:00020000  \n\"AdQEntries\"\u003ddword:00000080  \n\"IoQEntries\"\u003ddword:00000400  \n\"IntCoalescingTime\"\u003ddword:00000000  \n\"IntCoalescingEntries\"\u003ddword:00000000\n\nnvme.sys still works as Kansas City Shuffle.\n\nThis means, nvme.sys has no need for this entries.\n\nI make sure, that nowhere in registry on kicker disk is for example MaxTXSize left.\n\nBut when I delete on kicker disk whole entry nvme in \\[HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\**nvme,**\n\nthe nvme disk is not longer recogniced.\n\nThis is the same behavior as I remember from summer 2005 for ramboot via ntbootdd.sys,\n\nso nvme.sys renamed to ntbootdd.sys should be possible (in princip).\n\nBut until now I have no success to boot a nvme disk (with no BIOS support at all)\n\nvia ntbootdd.sys\n\nDietmar\n\nEDIT: With ntldr and ntdetect.com from XP SP3 I get message: No harddisk found,\n\nbut with ntldr and ntdetect.com from Win2003 SP2 I come to the screen, where I can chose boot.ini entries.\n\nSo, on Win2003 nvme.sys in ntbootdd.sys clothes with signature() entry in boot.ini may work.\n\nEDIT2: With the special ntdetect.com ver. Samstag, 15. Mai 2004 for USB boot,\n\nalso in XP SP3 I come to the boot.ini entries:)).\n\nBut then crash, no harddisk can be found. I think, it is a problem with the extended functions in storport.sys,\n\nntldr cant work like storport.sys ver. 5.2.3790.4173.\n\n"
    },
    {
      "id": "207531",
      "timestamp": "2018-08-15T19:33:13+00:00",
      "author": "nic01",
      "content": "Hi everyone ,\n\ntried to install the 1.5 patched version of the ofa driver on my win8.1 x64 laptop in testsigning-on mode and secure boot off , but it\u0027s getting unbootable .I had to manually uninstall via dism command in recovery cd options to become bootable again.\n\nCan anyone pls explain how is it possible to properly install these drivers on x64 win8.1 or even win10 ?\n\nMy ssd is a patriot hellfire 240gb which has return from sleep bsod issues, related to incompatibility between windows/ssd firmware so, i could really use these ofa drivers for a fix.\n\nI\u0027d really appreciate any help!\n\n**Edited by nic01, 15 August 2018 - 07:38 PM.**\n"
    },
    {
      "id": "207534",
      "timestamp": "2018-08-15T20:03:32+00:00",
      "author": "Dietmar",
      "content": "Hi nic01,\n\nfernando from his forum\n\n[https://www.win-raid...-UEFI-BIOS.html](https://www.win-raid.com/t871f50-Guide-How-to-get-full-NVMe-support-for-all-Systems-with-an-AMI-UEFI-BIOS.html \"External link\")\n\nsucceed with this. Just ask him there\n\nDietmar\n\n"
    },
    {
      "id": "207535",
      "timestamp": "2018-08-15T20:07:01+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\ndoes anybody know,\n\nwhere I can get checked versions for ntldr now?\n\nNormally, in boot.ini debug can be selected,\n\nbut ntldr checked version itself has a 115200 bit debug possibility integrated.\n\nVia this way, you can take a deep look what happens,\n\nwhen ntldr works like storport.sys when started with ntbootdd.sys\n\nDietmar\n\nEDIT: In WinDDK 3790.1830 I found ntldr_dbg and in this with IDA\n\nthe strings for scsiport and ntbootdd.\n\nstorport I do not find in this debug version of ntldr.\n\nBecause XP SP3 works with storport.sys,\n\nI need a ntldr_dbg for XP SP3 and Win server 2003,\n\nDietmar\n\n"
    },
    {
      "id": "207543",
      "timestamp": "2018-08-15T21:14:14+00:00",
      "author": "Dietmar",
      "content": "I just check ntldr version SP2 from Win server 2003.\n\nOh, only scsiport and ntbootdd in this ntldr.\n\nThis simple means:\n\nA ntbootdd.sys with a storport model driver is impossible.\n\nntbootdd works ONLY with the Scsiport model,\n\nthats bad news for starting xp with nvme.sys in clothes of ntbootdd.sys\n\nDietmar\n\n"
    },
    {
      "id": "207625",
      "timestamp": "2018-08-22T02:32:47+00:00",
      "author": "dencorso",
      "content": "\u003e Hi dencorso,\n\u003e\n\u003e I installed a new XP SP3 on Asus P8Z68-V LX,\n\u003e\n\u003e put storport.sys and nvme.sys vers. 1.3 from Kai in folder\n\u003e\n\u003e windows\\\\system32\\\\drivers.\n\u003e\n\u003e The nvme disk Samsung 960 pro 500GB was recogniced at once\n\u003e\n\u003e and after reboot works normal.\n\u003e\n\u003e I also tried the Kansas City Shuffle on this board,\n\u003e\n\u003e works nice.\n\u003e\n\u003e One difference I noticed: I cant install XPSP3 on nvme disk on this board,\n\u003e\n\u003e on Asus z87-pro, also without any nvme in Bios, I can\n\u003e\n\u003e Dietmar\n\nHi, Dietmar!\n\nThanks for testing that board. It means whatever prevents detection in my case must be due to something already installed. Well, I\u0027ll investigate it more closely later on. In any case, I got the 250GB 960 EVO and tested it. As it happened with the 250GB 970 EVO, Win 7 SP1 x86 recognized it instantly, with either of Kai\u0027s drivers or with the Samsung official driver. And just the same, Kai\u0027s drivers weren\u0027t able to start on XP SP3. I suspect storport.sys cannot be loaded when SCSIport.sys has previously been loaded... In any case, the only noticeable difference I\u0027ve noted between the two Samsung NVMe drives is that while both were not formatted, the 960 EVO came with an MBR, while the 970 EVO came with a GPT... what surprised me is that only one of them, not both, came with a GPT. Of course, this is just a curiosity, not anything relevant, but I decided to record it here anyway.  \nHave a nice week!\n\n"
    },
    {
      "id": "208914",
      "timestamp": "2019-01-07T19:28:02+00:00",
      "author": "Dietmar",
      "content": "Hi all,\n\nit seems, that ShadowCopy\n\nworks only with harddisks,\n\nhave a nice day\n\nDietmar\n\n"
    },
    {
      "id": "209161",
      "timestamp": "2019-02-02T13:10:20+00:00",
      "author": "Dietmar",
      "content": "This is nvme boot on Asrock fatal1ty z370 gaming k6 board via Samsung 950 pro 500GB NVME disk\n\nfor XP SP3 with ewf enabled, nice ![:showoff:](https://reboot.pro/public/style_emoticons/default/showoff.gif)\n\nDietmar\n\nEdit: Boottime is 8 seconds.\n\n![wwilzrqq.jpg](https://s15.directupload.net/images/190202/wwilzrqq.jpg)\n\n"
    },
    {
      "id": "209162",
      "timestamp": "2019-02-02T14:27:46+00:00",
      "author": "Dietmar",
      "content": "An interesting comment about \"modern\" flash devices SSD, nvme\n\ncompared with hard disks from heise.de\n\n\"We could already test the Samsung SSD 860 QVO, which actually creates only a writing rate of 80 MB / s in the 1-TByte version. But Samsung - and all other manufacturers who already use QLC Flash - works with a so-called SLC cache. Here, some of the QLC cells are wired so that each stores only 1 bit, but much faster than the 4 bit ones. QLC SSDs also achieve a high write rate in this cache.  \n\nAfter the end of the write request by the PC, the SSD shifts the data from the SLC cache to the slower QLC part. The size of the SLC cache varies; Samsung, for example, uses around one third of the free memory in the 860 QVO. With usual PC applications one does not realize that the SSD is actually slower than a mechanical hard disk.\"\n\n"
    },
    {
      "id": "209166",
      "timestamp": "2019-02-03T12:51:05+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e This is nvme boot on Asrock fatal1ty z370 gaming k6 board via Samsung 950 pro 500GB NVME disk\n\u003e\n\u003e for XP SP3 with ewf enabled, nice ![:showoff:](https://reboot.pro/public/style_emoticons/default/showoff.gif)\n\u003e\n\u003e Dietmar\n\u003e\n\u003e Edit: Boottime is 8 seconds.\n\nVery interesting.\n\nThis should mean that with a simpler \"XP in 10 MB\" :\n\n[http://reboot.pro/to...fs-below-10-mb/](http://reboot.pro/topic/3717-xpsp1-with-full-commandline-and-ntfs-below-10-mb/ \"\")\n\n(actually a little expanded for usability, let\u0027s say in the 40-80 Mb range) you should have an almost \"instant on\" system. ![:thumbsup:](https://reboot.pro/public/style_emoticons/default/thumbsup.gif)\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209632",
      "timestamp": "2019-03-03T23:47:08+00:00",
      "author": "ruthan",
      "content": "Can you pleas make some list of driver and MB, where are NVME Win XP boot working? Idealy in some online sheet, or some post on the start of the thread.\n\n**Edited by ruthan, 03 March 2019 - 11:54 PM.**\n"
    },
    {
      "id": "209633",
      "timestamp": "2019-03-04T00:00:46+00:00",
      "author": "Dietmar",
      "content": "@ruthan\n\nEvery motherboard that I tested, works for nvme boot XP SP3.\n\nIn Bios there has to be NVMEINT13,\n\nthats all\n\nDietmar\n\nPS: Even some z77, z87 boards from Asrock have NVMEINT13 in Bios.\n\n"
    },
    {
      "id": "209635",
      "timestamp": "2019-03-04T00:31:25+00:00",
      "author": "ruthan",
      "content": "Thanks, im asking because Win98 drivers guru RLoew wrote this:\n\u003e Booting XP from an NVME Drive should work, but you will need either a Samsung 950 PRO (with built-in BIOS) or a Motherboard that recognizes NVME Drives in CSM Mode.\n\u003e\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "209636",
      "timestamp": "2019-03-04T00:38:20+00:00",
      "author": "Dietmar",
      "content": "Samsung 950 PRO works not for XP without Bios support NVMEINT13.\n\nI tested this behavior a lot.\n\nOn this strange nvme disk with \"own Bios\" only Win 7 in legacy mode works\n\nDietmar\n\nPS: All nvme disks, that I tested work with Kai 1.3 nvme driver.\n\n"
    },
    {
      "id": "209641",
      "timestamp": "2019-03-04T09:24:12+00:00",
      "author": "Fernando1",
      "content": "\u003e The nvme disk Samsung **960 pro** 500GB was recogniced at once and after reboot works normal.\n\n\u003e This is nvme boot on Asrock fatal1ty z370 gaming k6 board via Samsung **950 pro** 500GB NVME disk for XP SP3 with ewf enabled,\n\nDid you do your tests with 2 different Samsung NVMe SSDs or has it been a typo?\n\nYou cannot compare a 950 Pro with a 960 Pro SSD regarding the ability to boot off them, because the 950 Pro has an in-box NVMe Option ROM and is natively able to boot in LEGACY mode.\n\n"
    },
    {
      "id": "209642",
      "timestamp": "2019-03-04T11:38:22+00:00",
      "author": "Dietmar",
      "content": "Yes, I test a lot of different nvme disks.\n\nAnd also 950 pro\n\nand 960 pro.\n\n950 pro does not work for to boot XP on\n\na lot of motherboards (BECAUSE of its own Bios).\n\n960 pro can boot XP SP3 on any compi\n\nwith NVMEINT13 in Bios\n\nDietmar\n\n"
    },
    {
      "id": "209655",
      "timestamp": "2019-03-04T21:18:29+00:00",
      "author": "ruthan",
      "content": "\u003e \u003e All nvme disks, that I tested work with Kai 1.3 nvme driver.\n\u003e \u003e\nSamsung NVME disk are quite expensive, what about something cheaper?\n\n"
    },
    {
      "id": "209657",
      "timestamp": "2019-03-04T22:07:29+00:00",
      "author": "Dietmar",
      "content": "I tested other nvme disks also.\n\nThey all can boot XP SP3.\n\nThe problem comes from another side:\n\nThey are slower and the lifetime MAY be much shorter.\n\nI get crazy results, when I compare bit by bit large files\n\nabout 16 GByte:\n\nNearly all nvme disks and USB sticks show errors,\n\nwhen compare with original file.\n\nThe integrated electronic tries to minimize those errors.\n\nBut for me, I still use mechanic hard disks:\n\nIn 10 years of permanent use I do not get an single error\n\nwith Western Digital 2 TB black harddisk.\n\nSo, it is a question of what you want:\n\nQuick and full of errors speed\n\nor data, that are save for about a century\n\nDietmar\n\nPS: By the way, the german newspaper Ct at heise.de shows,\n\nthat newer nvme disks have a quater good, fast memory.\n\nThe other 3/4 of whole nvme disk have speed about 80 Mbyte/s.\n\nThe western digital harddisk has 200 MByte/s.\n\nBut people think, new is best..\n\n"
    },
    {
      "id": "209665",
      "timestamp": "2019-03-05T21:54:55+00:00",
      "author": "ruthan",
      "content": "I was thinking about Adata XPG SX8200, review:\n\n[https://www.tomshard...o-ssd,5955.html](https://www.tomshardware.com/reviews/adata-xpg-sx8200-pro-ssd,5955.html \"External link\")\n\nWould it work fine for XP boot?\n\n"
    },
    {
      "id": "209666",
      "timestamp": "2019-03-05T22:17:01+00:00",
      "author": "Dietmar",
      "content": "I think yes, boot XP SP3 will work on this nvme disk because nvme 1.3 compatible.\n\nInteresting, to compare this nvme disk Adata XPG SX8200 to samsung 970 pro.\n\nPrice in germany 200 Euro against 300 Euro for 970 pro each 1TB.\n\n5 years garantie both,\n\nthis is important\n\nDietmar\n\n"
    },
    {
      "id": "209884",
      "timestamp": "2019-03-17T10:04:10+00:00",
      "author": "agent_x007",
      "content": "Hello  \n\nI didn\u0027t tried creating XP booting NVMe drive yet, however I have a question :  \n\n**Can this work for Intel Optane modules** : [LINK](https://www.anandtech.com/show/12748/the-intel-optane-memory-m10-64gb-review-optane-caching-refreshed \"External link\") ?  \nThey don\u0027t have specific driver, however they are NVMe 1.1 devices and use generic Microsoft driver.  \nBoth Win7 and Win10 nvme build-in drivers will work with them.  \n\nThank you for this !\n\n**Edited by agent_x007, 17 March 2019 - 10:05 AM.**\n"
    },
    {
      "id": "209885",
      "timestamp": "2019-03-17T10:27:17+00:00",
      "author": "Dietmar",
      "content": "Hi,\n\nI think it will work.\n\nThere is also a version from the Intel RST Rapid Storage driver for the underlying ahci harddisk (or ahci SSD),\n\nthat works with XP (floppy F6 method, can be integrated via nlite).\n\nThis is a real interesting thing, I never heard before of it.\n\nBecause nearly all nvme, USB, ssd drives are very bad for long, safe, intensive data transfer,\n\nIntel comes with the right idea.\n\nTake this Intel Optane module as boot device,\n\nconnected with a fast, good harddisk like WD black 2 TB,\n\nand your data are safe\n\nDietmar\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "209886",
      "timestamp": "2019-03-17T10:35:42+00:00",
      "author": "Fernando1",
      "content": "\u003e **Can this work for Intel Optane modules** : [LINK](https://www.anandtech.com/show/12748/the-intel-optane-memory-m10-64gb-review-optane-caching-refreshed \"External link\") ?  \n\u003e They don\u0027t have specific driver, however they are NVMe 1.1 devices and use generic Microsoft driver.  \n\u003e Both Win7 and Win10 nvme build-in drivers will work with them.\n\nWin7 has no built-in NVMe driver, but you can integrate the MS NVMe Hotfix into the Win7 image.\n\n"
    },
    {
      "id": "209888",
      "timestamp": "2019-03-17T10:36:11+00:00",
      "author": "agent_x007",
      "content": "@Fernando1 True. I meant it more as \"can be done easily\", compared to this. :wink:  \n\n@Dietmar I want to install Windows XP on **Optane module directly** (**++NOT++** paired with HDD).  \nSince TRIM support is... problematic under WinXP, I wanted to use memory that doesn\u0027t need TRIM to function (this is where Optane comes in).  \nSo, is it possible to boot Optane directly ?  \n\nSecondary question : How to boot Windows XP from UEFI \"enabled\" platform - ie. a GPT drive ?  \nExample :   \n![d6Rn764.png](https://i.imgur.com/d6Rn764.png)  \n\\^Like this but on WinXP SP3 x86 ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)\n\n**Edited by agent_x007, 17 March 2019 - 11:04 AM.**\n"
    },
    {
      "id": "209889",
      "timestamp": "2019-03-17T10:54:36+00:00",
      "author": "Dietmar",
      "content": "This is interesting also:\n\nNo need for TRIM on the Optane nvme disk.\n\nI think, XP SP3 can be installed and boot via nvme.sys from Kai from the Optane device.\n\nThe problem with Trim I solved via second OS Win10 64 bit on MBR,\n\nwhich can see the XP nvme disk and performs Trim there,\n\nDietmar\n\n"
    },
    {
      "id": "209890",
      "timestamp": "2019-03-17T11:08:55+00:00",
      "author": "Dietmar",
      "content": "\"How to boot Windows XP from UEFI \"enabled\" platform - ie. a GPT drive ?\"\n\nI have a driver for XP, that can use GPT drives.\n\nBut I never tested it for boot.\n\nSome times ago I heard, that with the bootfiles from Vista,\n\nXP can start from UEFI, but I also never tried, because no need for this\n\nDietmar\n\n"
    },
    {
      "id": "209891",
      "timestamp": "2019-03-17T11:20:56+00:00",
      "author": "Dietmar",
      "content": "Hi,\n\nin 14 days I have holidays and I try for XP boot on the EVGA z390 dark motherboard with full ACPI support on\n[Intel Optane SSD 800P 58GB, M.2 (SSDPEK1W060GA)](https://geizhals.de/intel-optane-ssd-800p-58gb-ssdpek1w060ga-a1762134.html?t\u003dalle\u0026plz\u003d\u0026va\u003db\u0026vl\u003dde\u0026hloc\u003dde\u0026v\u003dk# \"External link\")\n\nwhich I just ordered\n\nDietmar\n\n"
    },
    {
      "id": "209892",
      "timestamp": "2019-03-17T11:24:31+00:00",
      "author": "agent_x007",
      "content": "Awesome !  \nI wish you good luck. I will try booting XP from 32GB optane module next week.  \nI recommend adding GTX 980 Ti or Titan X (Maxwell) as GPU.  \nYou only have to add hardware IDs in .inf driver file to make them work :wink:  \n\nMaybe those useless Optane modules (16-32GB), can actually help legacy community.\n\n**Edited by agent_x007, 17 March 2019 - 11:30 AM.**\n"
    },
    {
      "id": "209895",
      "timestamp": "2019-03-17T13:03:34+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Secondary question : How to boot Windows XP from UEFI \"enabled\" platform - ie. a GPT drive ?\n\u003e\n\u003e ...\n\u003e\n\u003e Like this but on WinXP SP3 x86\n\nGPT drive and BIOS or GPT drive and UEFI?\n\nWith GPT drive and BIOS (or CSM) you cannot ![:(](http://reboot.pro/public/style_emoticons/default/sad.png) (i.e. you can boot with a couple tricks but then the NTLDR won\u0027t understand the GPT and fail, unless you use a Hybrid GPT/MBR or a ramloading of sorts).\n\nWith GPT drive and UEFI you cannot (actually you can, but it won\u0027t work because UEFI is either 32 or 64 bit ++and it must match the OS bitness++), your UEFI is 99.99% probable 64 bit and won\u0027t expose an EFI32 that is needed for a x86 (32-bit OS).\n\nBut you can boot (maybe) a 64 bit XP:\n\n[http://reboot.pro/to...-thinkpad-x220/](http://reboot.pro/topic/21851-boot-winxp-x64-in-efi-on-thinkpad-x220/ \"\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209896",
      "timestamp": "2019-03-17T13:19:56+00:00",
      "author": "agent_x007",
      "content": "It\u0027s more of an experiment really - to simplify BIOS/UEFI settings, and I don\u0027t want 64-bit XP.  \n\nI got X79 MB with NVMe boot support (added via mod NVMe), and I can use Clover from HDD/SSD to bypass any non-UEFI BIOS booting limitations (if need be).\n\nIn case of UEFI and GPT, can I simply use Clover (it should have 32-bit support ?), together with 32-bit Windows 7/10 loader ?\n\n**Edited by agent_x007, 17 March 2019 - 01:20 PM.**\n"
    },
    {
      "id": "209904",
      "timestamp": "2019-03-17T14:34:08+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e It\u0027s more of an experiment really - to simplify BIOS/UEFI settings, and I don\u0027t want 64-bit XP.  \n\u003e\n\u003e I got X79 MB with NVMe boot support (added via mod NVMe), and I can use Clover from HDD/SSD to bypass any non-UEFI BIOS booting limitations (if need be).\n\u003e\n\u003e In case of UEFI and GPT, can I simply use Clover (it should have 32-bit support ?), together with 32-bit Windows 7/10 loader ?\n\nI don\u0027t get it. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nThe windows 7/10 loader, what do you mean?\n\nBOOTMGR or BOOTMGR.EFI?\n\nNone of them will boot XP, because XP is booted by NTLDR, and NTLDR cannot read GPT, and needs BIOS.\n\nThe specific loader in the mentioned thread:\n\n[http://reboot.pro/to...-thinkpad-x220/](http://reboot.pro/topic/21851-boot-winxp-x64-in-efi-on-thinkpad-x220/ \"\")\n\nBeing \"Longhorn\", i.e. midway between XP and Vista, it is a sort \"cross-breed\" between NTLDR and BOOTMGR (or BOOTMGR.EFI).\n\nStill, a 64 bit EFI/UEFI will only boot a 64 bit OS, and a 32 bit EFI/UEFI will only boot a 32 bit OS.\n\nPersonally I believe that it is possible to write an emulation layer that might allow that, but I don\u0027t know any, and even if someone might write one, it is more likely that it would work only for booting 64 systems from UEFI 32 bit.\n\nI mean, all modern PC\u0027s (desktops and laptops) have 64 bit processor and 64 bit UEFI, but there are a number of (usually small) tablets that do have 64 bit processors but have a 32 bit UEFI, so it is more likely that someone with tackle the actual problem and not the non-problem.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209905",
      "timestamp": "2019-03-17T14:37:59+00:00",
      "author": "agent_x007",
      "content": "I mean, if you have multi OS boot (like, you installed XP, and then Win 7), Win 7 bootloader gives you an option to boot Win XP - \"Legacy OS\", and I can use 32-bit Windows 7 or 8 to do this.  \nI thought that I could use that as bridge between NVMe native booting from UEFI side (via Win 7), and Legacy XP boot with NVMe drivers.  \n\nIs it a bad idea ?\n\n**Edited by agent_x007, 17 March 2019 - 02:42 PM.**\n"
    },
    {
      "id": "209906",
      "timestamp": "2019-03-17T14:42:39+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I mean, if you have multi OS boot (like, you installed XP, and then Win 7), Win 7 bootloader gives you an option to boot Win XP - \"Legacy OS\".  \n\u003e\n\u003e I thought, that I could use that as bridge between NVMe native booting from UEFI side (via Win 7), and Legacy XP boot.  \n\u003e\n\u003e Bad idea ?\n\nNot \"bad\" (nor \"good\") only \"not possible\".\n\nBIOS does not care if the processor or the OS is 32 bit or 64 bit.\n\nUEFI is EITHER 32 bit (and will only load a 32 bit OS) OR 64 bit (and will only load a 64 bit OS).\n\nThe option in a dual boot Windows 7 and XP for XP actually allows BOOTMGR to chainload NTLDR.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209909",
      "timestamp": "2019-03-17T14:51:27+00:00",
      "author": "Fernando1",
      "content": "Off topic:\n\nDoes anybody knows where to get the latest OFA NVMe driver version, which supports Win10?\n\nThe latest version I found is v1.5.0.0 Build 157 dated 04/07/2017.\n\nFor me it seems, that the Open Fabrics Alliance has stopped the development of NVMe drivers for Win7/8/10 already in 2017.\n\n"
    },
    {
      "id": "210081",
      "timestamp": "2019-03-23T14:01:25+00:00",
      "author": "Dietmar",
      "content": "Yesssa :smile:\n\nI just succeed to install XP SP3 with full ACPI support\n\non Intel Optane 32 GB MEMPEK1W032GAXT.\n\nFrom feeling this is the fastest XP, that I ever had\n\nDietmar\n\n[![995272-1553349586.jpg](https://www.bilder-upload.eu/thumb/995272-1553349586.jpg)](https://www.bilder-upload.eu/bild-995272-1553349586.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210082",
      "timestamp": "2019-03-23T14:13:10+00:00",
      "author": "agent_x007",
      "content": "Congratulations !  \nYou should sent this pic to Intel to show them what 16-32GB Optane can be used for ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)  \n\nAny additional tweaks needed ?  \nOr is it just nvme.sys and off you go ?  \nMy unit is still in mail :/\n\n**Edited by agent_x007, 23 March 2019 - 02:15 PM.**\n"
    },
    {
      "id": "210084",
      "timestamp": "2019-03-23T14:19:36+00:00",
      "author": "Dietmar",
      "content": "Hi,\n\nno additional tweak is needed.\n\nThe biggest problem for me was to have full ACPI support for XP\n\non any motherboard. This I solved in my last holidays,\n\nas you can see in the Fernando forum,\n\nthere I am diderius6\n\nDietmar\n\n"
    },
    {
      "id": "210108",
      "timestamp": "2019-03-23T22:23:42+00:00",
      "author": "agent_x007",
      "content": "Just to be sure :  \n\"Full ACPI support for Windows XP\" - starts to be a problem at Haswell and later platforms, right ?  \nBoards with XP as officially supported OS do not need patching/tweaking to make it work (?).\n\n**Edited by agent_x007, 23 March 2019 - 10:24 PM.**\n"
    },
    {
      "id": "210111",
      "timestamp": "2019-03-23T23:08:59+00:00",
      "author": "Dietmar",
      "content": "Yes.\n\nFrom [Skylake](https://de.wikipedia.org/wiki/Intel-Skylake-Mikroarchitektur \"External link\")\n\nmanufactures start to use ACPI 2.0 in Bios DSDT list.\n\nXP understands only ACPI 1.b,\n\nhave a nice evening\n\nDietmar\n\n"
    },
    {
      "id": "210163",
      "timestamp": "2019-03-24T20:22:47+00:00",
      "author": "Dietmar",
      "content": "Hi,\n\nsoon I test the Intel Optane also in the nice, brandnew case for nvme to USB 3.1 (generation2) with\n\n10 Gbit/s which can start XP writeprotected via Fat32 and ewf\nRaidSonic Icy Box IB-1817M-C31, USB-C 3.1 (60509)\n\nfor USB boot\n\nDietmar\n\n"
    },
    {
      "id": "210357",
      "timestamp": "2019-03-30T13:07:38+00:00",
      "author": "Dietmar",
      "content": "After very good results for speed test in any situation,\n\nand long life,\n\nI just ordered an\nIntel Optane SSD 905P 960GB, PCIe 3.0 x4 (SSDPED1D960GAX1)\n\nand will install XP SP3 on nvme on it.\n\nIn few days I report about,\n\nDietmar\n\n"
    },
    {
      "id": "210377",
      "timestamp": "2019-03-30T17:37:27+00:00",
      "author": "agent_x007",
      "content": "I can\u0027t get my WinXP to see my optane drive ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)  \nMy steps :   \n0) Download nLite\n\n1) Create image from original SP2 PL installation (OEM)  \n2) Add SP3 and KB onto it.  \nKB is impossible to add (wrong OS)  \nAdding Dell drivers does work (I used txt mode, added all of them).  \n3) Add OFE NVMe  \n4) Create a ISO  \n5) Make a pendrive using Rufus 3.1  \n6) Pendrive starts, OS installer loads files, but hangs on bcraid.sys (fail to load/missing file) ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)  \n\nAdvice ?\n\n**Edited by agent_x007, 30 March 2019 - 05:40 PM.**\n"
    },
    {
      "id": "210380",
      "timestamp": "2019-03-30T18:59:01+00:00",
      "author": "Dietmar",
      "content": "@agent_x007\n\nTo make an nvme XP \\*.iso is much\n\nmore difficult than to copy a working XP.\n\nFor example you have to integrate storport.sys to the CD also.\n\nMuch more easy is the following:\n\n1.) Install XP SP3 to an harddisk. Best way is to install from CD.\n\n2.) Copy the file storport.sys (vers. 5.2.3790.4173) to folder C:\\\\WINDOWS\\\\system32\\\\drivers on your XP harddisk.\n\n3.) After testing, that all is ok with this XP, put the nvme device in.\n\n4.) Click on the folder nvme, where the files nvme.inf and nvme.sys (vers 1.3) from Kai are in.\n\n5.) The nvme device is recogniced.\n\n6.) Use the program AOMEI partition assistant. Make a copy of your harddisk to the nvme device. (NOT sector by sector, use fast copy.)\n\nDont forget to align the nvme device with 2048 sectors preceding partition 1 with AOMEI.\n\nAfter copy, disconnect your harddisk from compi before first boot from nvme!\n\nIn other case, strange things happen, because XP sees now 2 identic drives,\n\nDietmar\n\n"
    },
    {
      "id": "210381",
      "timestamp": "2019-03-30T19:18:39+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e After copy, disconnect your harddisk from compi before first boot from nvme!\n\u003e\n\u003e In other case, strange things happen, because XP sees now 2 identic drives,\n\nOr.- maybe more simple ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png) - change disk signature of the NVME device and change accordingly the contents of the HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\MountedDevices in the Registry on the nvme.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "210382",
      "timestamp": "2019-03-30T19:25:07+00:00",
      "author": "agent_x007",
      "content": "storeport.sys file will install/copy itself automaticly to Windows or driver folder when I run that KB patch (on newly installed WinXP), or do I need to do something else to run it (since it\u0027s patch for Windows Server) ?\n\nI\u0027m asking because I don\u0027t see that file anywhere...\n\n**Edited by agent_x007, 30 March 2019 - 07:57 PM.**\n"
    },
    {
      "id": "210383",
      "timestamp": "2019-03-30T19:43:21+00:00",
      "author": "Dietmar",
      "content": "I cant upload storport.sys here.\n\nDo you have an email adress?\n\nDietmar\n\n"
    },
    {
      "id": "210384",
      "timestamp": "2019-03-30T19:57:19+00:00",
      "author": "agent_x007",
      "content": "Google drive ?\n\n"
    },
    {
      "id": "210385",
      "timestamp": "2019-03-31T01:59:29+00:00",
      "author": "agent_x007",
      "content": "Progress :   \n![P5hD5by.png](https://i.imgur.com/P5hD5by.png)\n\n![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)\n\nNow to load ntdlr/boot.ini from Windows 10 x64 BCD or by using Clover (w/NTFS.efi and Legacy boot options).\n\n**Edited by agent_x007, 31 March 2019 - 01:59 AM.**\n"
    },
    {
      "id": "210386",
      "timestamp": "2019-03-31T06:20:38+00:00",
      "author": "Blackcrack",
      "content": "is this under gpl2 ? why i ask, maybe implementing in reactos ?\n\njust so an idea .. or ask the project owner to set the sources under gpl2 ...\n\n"
    },
    {
      "id": "210390",
      "timestamp": "2019-03-31T09:57:35+00:00",
      "author": "Dietmar",
      "content": "@agent_x007,\n\nI am happy, that it works for you also!\n\nCan you please describe step by step, how you did it?\n\nWhen you put Win10 on another disk,\n\nyou can chose via boot menue,\n\nwhich OS to start,\n\nDietmar\n\n"
    },
    {
      "id": "210391",
      "timestamp": "2019-03-31T10:55:21+00:00",
      "author": "agent_x007",
      "content": "Stages so far :  \n**1) Create a bootable/working Windows XP environment on modern hardware** (ie. standard SATA drive and with standard installation)  \n\\^This proved quite challenging, since I had to enable IDE Enhanced mode and disable almost all USB ports to make it work.  \nUSB ports were quite extreme, but I wanted to avoid \"7B BSOD\" at all costs (CD loading stuff takes SOO LOOONG).  \n++Notes++ :  \nWhen I tried adding drivers via USB floppy drive to Windows installation (F6 key), I got this : \"You can\u0027t use this install disk because installer isn\u0027t detecting previous Windows installation on this computer, please insert Windows 2000/NT/98/95 or 3.1 install disk into CD if you want to proceed further\" - type of error. I got it on both USB and CD installation.  \nI did burn Win98 disk to check what it does, and installation went to selecting drive stage, however after that I got \"not enough memory to install Windows\" error, a.k.a. \"back to square\".\n\nAfter this, I downloaded custom SP3 installtion (with most drivers and stuff already integrated), and burn that on another CD (I have cake of 50 empty CDs, which I had lying around :wink:)\n\nThat installed properly, and I could proceed to next step.  \nSide note : I used 64GB SATA Intel SSD as \"test drive\" for this install (I formatted it on Win10 with default settings as 64GB NTFS drive). Drive model : X25-E.  \n\n**2) Add NVMe drives and install them on WinXP**   \nI added two NVMe drives to my PC : Samsung SM961 NVMe 256GB with working Windows 10 x64 (GPT drive) and 32GB Optane module (MBR).  \nThen selected NVMe OFE (nvme.ini/nvme.sys) files you provided as drivers for them.\n\nNot sure if storeport.sys was used at this point (?)\n\nJust to be clear : Screenshot from earlier was done after NVMe driver was installed and XP rebooted ++from SATA drive++ .  \nGPT drive is NOT usable under Windows XP x86 SP3 I used (it\u0027s visible in device manager, but not accessable).  \nI\u0027m added it for convenience when doing next step.  \n\n**3) Copying Windows XP partition to Optane**   \nAs suggested I used free version of AOMEI Partition Assistant (on Windows 10), to copy partition.  \nI didn\u0027t know how much space it uses, so I let it install on 64GB partition, and then I used Windows 10 build-in drive utility to decrease it\u0027s size.  \nThis way, my Windows XP partition was slightly over 3GB in size, and I could fit it on Optane with 1:1 copy option :smile:\n\nThere was option to \"optimise partition for SSD\" which I checked :\n\n![ZCVqWoM.png](https://i.imgur.com/ZCVqWoM.png)\n\nI think it does \"2048 sector\" tweak automaticly (?)  \nEither way, after it was done, I checked allignment with AS SSD Benchmark (still under Win10), and was pleased to see \"1024 kB - OK\" text.  \nAt this point everything is done, and only one more step is left...  \n\n**3) Booting NVMe Windows XP**\n\nJust to be clear : I did ++NOT++ successfully booted my Windows XP from NVMe drive yet at this point.  \nOptane drive isn\u0027t recognized as available boot option under UEFI/BIOS - board \"needs\" UEFI booting for NVMe drives to show up, and that means in Windows terms, a GPT style drive - my Windows XP doesn\u0027t have that.  \nAt this point I managed to make it visible under Clover (using NTFS.efi file and LegacyBoot set to \"2\" instead of \"0\").  \nHowever it hangs on \"_\" with no signes on going further ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)  \n\nNow I\u0027m trying to add Windows XP as boot option under Windows 10 install.\n\nAnd this is point at which I\u0027m at right now ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)  \nI disabled \"Metro\", and turned on Windows select boot list.  \nForgot to add : EasyBCD editing will not work in my case, because under my Win10 it assumes \"EFI\" booting of any operating system (ie. it tries to load winload.efi file on Windows XP drive... which doesn\u0027t exists).  \nAnd system type select option is greyed out :  \n![6pOzVic.png](https://i.imgur.com/6pOzVic.png)  \n\nHere\u0027s a though :  \nMaybe I could copy boot partition from Windows 10 (UEFI one) onto my MBR drive, and edit that to boot my Windows XP directly ?  \nBecause, from what I understand, UEFI boards don\u0027t NEED GPT drive per se, but only need EFI boot files located on hidden EFI partition (which is created by Windows 7/8/10 installer during installation stage on any GPT style drive).\n\n**Edited by agent_x007, 31 March 2019 - 11:22 AM.**\n"
    },
    {
      "id": "210392",
      "timestamp": "2019-03-31T11:18:54+00:00",
      "author": "Dietmar",
      "content": "I just see, that on Asus webside the x79 Sabertooth Bios has no support for nvme.\n\nBut the x79 deluxe Bios 4805 has.\n\nSo, with ***some risk*** you can make a try to flash X79-DELUXE-ASUS-4805.CAP\n\nto the x79 Sabertooth board. This Bios has full nvme support and works with XP\n\nfor nvme boot. There is a Bios 4804 for x79 Sabertooth, but it has only nvme support for Win10.\n\n**BUT do this only if you are sure, that you can backflash to the old Bios!!!**\n\nI got crazy situations, that compi does not do anything after an operation like that!\n\nIn some cases CMOS reset helps, but not always. In other case, you have to desolder the Bios chip.\n\nSo, it is a big risk\n\nDietmar\n\n"
    },
    {
      "id": "210393",
      "timestamp": "2019-03-31T11:28:59+00:00",
      "author": "agent_x007",
      "content": "My board has USB Bios Flashback :  \nIt can update BIOS without CPU/RAM installed, so I should be good even if with \"bad flash\" happends.  \nStill : I already patched my UEFI with NVMe booting (I used NvmExpressDxe_**4** .ffs) ?   \nThat\u0027s how I use SM961 drive in my PC.  \n\nHow can I get .ffs that Windows XP needs (or is it the same one I used) ?  \nI would prefered to extract the stuff I need from Deluxe BIOS, and simply mod my own UEFI BIOS to support NVMe XP boot.\n\n**Edited by agent_x007, 31 March 2019 - 11:35 AM.**\n"
    },
    {
      "id": "210394",
      "timestamp": "2019-03-31T11:36:13+00:00",
      "author": "Dietmar",
      "content": "Until now, I do not get that to work.\n\nThe Bios needs NVMEint13.\n\nThis you can check with UEFI tool.\n\nBut this is not enough.\n\nThe whole Bios with legacy nvme support\n\nis other than Bios without nvme\n\nDietmar\n\nPS: NvmExpressDxe_4 works ONLY for Win10, no chance for legacy, even not Win7.\n\nEDIT: On hardwarebot forum a member told, that even with BIOS flashback he crashes his board!!!\n\nEDIT2: You can use the s4e methode. This boots XP from nvme as long as the board has an PCIE connector.\n\n"
    },
    {
      "id": "210395",
      "timestamp": "2019-03-31T12:20:18+00:00",
      "author": "Dietmar",
      "content": "I see, that x79 Sabertooth board has Winbond Bios chip *on socket*.\n\nSo, you can give it a try\n\nDietmar\n\n"
    },
    {
      "id": "210396",
      "timestamp": "2019-03-31T12:52:45+00:00",
      "author": "agent_x007",
      "content": "No. It only has one.  \n\nI\u0027m trying to use stuff from Deluxe BIOS and see what sticks.  \nModules added so far :  \nnvme.ffs\n\nnvmeint13.ffs  \nnvmesmm.ffs\n\nand I replaced NTFS.ffs (this one was twice the size on Deluxe vs. Sabertooth)\n\nI didn\u0027t delete NvmExpressDxe_4.ffs  \nSadly, so far no luck ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)  \n\nI may have to replace CSM module (on Deluxe is smaller though).\n\n**Edited by agent_x007, 31 March 2019 - 12:54 PM.**\n"
    },
    {
      "id": "210397",
      "timestamp": "2019-03-31T13:03:53+00:00",
      "author": "Dietmar",
      "content": "@agent_x007,\n\nI tried the same and Fernando also.\n\nIt does not work.\n\nOnly chance is Bios with native full nvme support\n\nDietmar\n\n"
    },
    {
      "id": "210398",
      "timestamp": "2019-03-31T13:23:29+00:00",
      "author": "Wonko the Sane",
      "content": "@agent_x007\n\nIf I were you I would try a \"XP Kansas City Shuffle\" or \"fake signature method\".\n\nSome reference:\n\n[https://web.archive....showtopic\u003d21242](https://web.archive.org/web/20160817205303/http://www.911cd.net/forums//index.php?showtopic\u003d21242 \"External link\")\n\n[http://reboot.pro/to...method-creator/](http://reboot.pro/topic/6672-idea-fake-signature-method-creator/ \"\")\n\nAnd re-mentioned around here:\n\n[http://reboot.pro/to...2-sp2/?p\u003d207380](http://reboot.pro/topic/21812-community-ofa-nvme-15-storport-miniport-for-windows-server-2003-r2-sp2/?p\u003d207380 \"\")\n\nFiles added here:\n\n[http://reboot.pro/to...2-sp2/?p\u003d207270](http://reboot.pro/topic/21812-community-ofa-nvme-15-storport-miniport-for-windows-server-2003-r2-sp2/?p\u003d207270 \"\")\n\nThere is a later version of the cdob\u0027s Winbuilder script, I just uploaded it to here, should you need it:\n\n[https://www.filedrop...om/chainbootxp2](https://www.filedropper.com/chainbootxp2 \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "210399",
      "timestamp": "2019-03-31T13:50:48+00:00",
      "author": "Dietmar",
      "content": "@Jaclaz\n\n@agent_x007\n\nThe easiest way for s4e (\"XP Kansas City Shuffle\") is:\n\nCopy bit by bit with Winhex the XP from your nvme device to an USB stick.\n\nNow the magic happens:\n\nWhen you boot from the USB stick,\n\nit has the same signature and everything else exact like the nvme disk.\n\nDuring boot the USB stick lost contact because no USB drivers there\n\nand takes the nvme disk,\n\nreally cool\n\nDietmar\n\n"
    },
    {
      "id": "210403",
      "timestamp": "2019-03-31T23:08:25+00:00",
      "author": "Dietmar",
      "content": "I just installed XP SP3 on\n\nEVGA Z390 DARK motherboard with full ACPI support\n\non 32 GB Optane nvme drive.\n\nThis is the fastest operating system,\n\nthat I ever had\n\nDietmar\n\nPS: Boottime is 4 sec.\n\n[![6dac46-1554076683.jpg](https://www.bilder-upload.eu/thumb/6dac46-1554076683.jpg)](https://www.bilder-upload.eu/bild-6dac46-1554076683.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210419",
      "timestamp": "2019-04-02T20:30:26+00:00",
      "author": "Dietmar",
      "content": "XP SP3 with all updates April 2019 from posready\n\non Intel Optane 905 P,\n\nnice,\n\nDietmar\n\n[![cc4f0c-1554236983.jpg](https://www.bilder-upload.eu/thumb/cc4f0c-1554236983.jpg)](https://www.bilder-upload.eu/bild-cc4f0c-1554236983.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210427",
      "timestamp": "2019-04-03T17:35:01+00:00",
      "author": "Dietmar",
      "content": "And now XP SP3 on EVGA dark motherboard,\n\nthis is really fast\n\nDietmar\n\n[![2f27aa-1554312807.jpg](https://www.bilder-upload.eu/thumb/2f27aa-1554312807.jpg)](https://www.bilder-upload.eu/bild-2f27aa-1554312807.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210491",
      "timestamp": "2019-04-06T14:59:44+00:00",
      "author": "Dietmar",
      "content": "I know, why I love XP :smile:\n\nOptane 905P on XP\n\n[![c2fe94-1554562707.jpg](https://www.bilder-upload.eu/thumb/c2fe94-1554562707.jpg)](https://www.bilder-upload.eu/bild-c2fe94-1554562707.jpg.html \"External link\")\n\nOptane 905P on Win10\n\n[![d2b2cc-1554562764.jpg](https://www.bilder-upload.eu/thumb/d2b2cc-1554562764.jpg)](https://www.bilder-upload.eu/bild-d2b2cc-1554562764.jpg.html \"External link\")\n\nDietmar\n\nEDIT: I just see, that the versions of CristalDiskMark are different 5 for XP and 6 for Win10.\n\n"
    },
    {
      "id": "210494",
      "timestamp": "2019-04-06T16:34:19+00:00",
      "author": "agent_x007",
      "content": "You aren\u0027t testing them on the same version...  \nAlso, you could try AS SSD Benchmark or Anvil\u0027s benchmark, or ATTO (for max. throughput).\n\n"
    },
    {
      "id": "210495",
      "timestamp": "2019-04-06T16:40:51+00:00",
      "author": "Dietmar",
      "content": "@agent_x007\n\nYes, I just see it and I am sorry for this.\n\nI thought, that I installed the same version but for Win10\n\nit installs automatically version 6.\n\nI just ordered a Sabertooth x79 board\n\nand soon I will install there the Bios from the Asus x79 Deluxe board.\n\nThose Bios are nearly identic,\n\nso I hope for the best for nvme boot :smile:\n\nDietmar\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "210496",
      "timestamp": "2019-04-06T16:45:56+00:00",
      "author": "agent_x007",
      "content": "I should add, that my Sabertooth X79 doesn\u0027t like MSI R9 280X Gaming 6GB I bought recently (no VGA error ?).  \n280X works in old S939 board, and X79 doesn\u0027t have any issues with other recent GPUs as well.  \n\nJust wanted to warn about it, since you are going to be using it.  \n\nGood luck with Legacy NVMe booting ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)\n\n**Edited by agent_x007, 06 April 2019 - 04:48 PM.**\n"
    },
    {
      "id": "210497",
      "timestamp": "2019-04-06T17:01:46+00:00",
      "author": "Dietmar",
      "content": "Here is Win10 with the version 5 CristalDiskMark.\n\n[![47b532-1554570071.jpg](https://www.bilder-upload.eu/thumb/47b532-1554570071.jpg)](https://www.bilder-upload.eu/bild-47b532-1554570071.jpg.html \"External link\")\n\nWin10 is on Optane 905P only half as bad ![^_^](http://reboot.pro/public/style_emoticons/default/happy.png)\n\nas I thought\n\nDietmar\n\n"
    },
    {
      "id": "210534",
      "timestamp": "2019-04-07T22:19:06+00:00",
      "author": "Dietmar",
      "content": "Oha,  \nI just noticed, that the timer in the original XP Bios from EVGA for the z390 dark motherboard not works.  \nAnd also compi stays always in C0 state, brrr.  \nAnd the most crazy thing: This happens also in Win10, power consumption on 9900k always about 27 Watt..  \n\nNow I chance all against my modified  \n\nacpi.sys  \nhal.dll  \nintelppm.sys  \n\nand all is nice:  \nFull ACPI support with Hyperthreading, Timer works, powerconsumption on 9900k about 2 Watt:)).  \n\nThis simple means,  \nwe, Mov AX, 0xDEAD and me Dietmar  \nare better :smile:  \nDietmar\n\nPS: XP SP3 on 9900k at 5.100 GHZ\n\n[![935f34-1554677475.jpg](https://www.bilder-upload.eu/thumb/935f34-1554677475.jpg)](https://www.bilder-upload.eu/bild-935f34-1554677475.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210539",
      "timestamp": "2019-04-08T03:21:28+00:00",
      "author": "Dietmar",
      "content": "After hard work, to connect careful cooler \"be quiet! Dark Rock Pro 3\"\n\nand fit the ram under it,\n\nI get now 5200 MHZ on EVGA z390 dark motherboard,\n\ntested with prime95\n\nDietmar\n\nEDIT: On 3 cores I get 100 degree at 220 Watt,\n\nthis I dont like.\n\nSo, I switch back to 5100 MHZ, gives 78 degree on\n\nall cores with 150 Watt during Prime95.\n\n"
    },
    {
      "id": "210548",
      "timestamp": "2019-04-08T15:08:49+00:00",
      "author": "Dietmar",
      "content": "Asrock fatal1ty z370 gaming k6 8700k fixed voltage 1.400 Volt at 5.000Ghz\n\non nvme XP SP3.\n\nNice cheap motherboard\n\nDietmar\n\nPS: Here I use cooler \"be quiet Dark rock pro 4\".\n\nThis cooler is much more easy to install than pro 3,\n\ncooling power is the same.\n\n[![c782ab-1554736111.jpg](https://www.bilder-upload.eu/thumb/c782ab-1554736111.jpg)](https://www.bilder-upload.eu/bild-c782ab-1554736111.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210633",
      "timestamp": "2019-04-11T21:09:43+00:00",
      "author": "Dietmar",
      "content": "The cooler \"be quiet Dark rock pro 4\" is much worse attached to the motherboard than the \"be quiet Dark rock pro 3\" and even wobbles a bit,\n\nbrrr..\n\nDietmar\n\nPS: This happens, because now only 2 screws are used and on Dark rock 3 there are 4 of them.\n\n"
    },
    {
      "id": "210640",
      "timestamp": "2019-04-12T08:10:03+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e PS: This happens, because now only 2 screws are used and on Dark rock 3 there are 4 of them.\n\nAnd both schemes are \"wrong\", though CPU\u0027s are not (yet) triangular or round:\n\n[https://www.uh.edu/engines/epi2533.htm](https://www.uh.edu/engines/epi2533.htm \"External link\")\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "210657",
      "timestamp": "2019-04-12T22:38:32+00:00",
      "author": "Dietmar",
      "content": "Hi, this picture I make just now.\n\nIt shows XP SP3 booted direct from USB 3.2 Asmedia 3142 chip with EWF enabled,\n\nstable at 5400 MHZ. The Kanguru USB stick is the only device.\n\nThe cooler \"be quiet\" Dark Rock Pro 4 is bad for the Asus Apex X board.\n\nMay be because of this, Asus stopped to fabrikate this board. It gives Bios message CC and then 55.\n\nYou cant use the second memory slot. When only the first slot is populated, this Bios error is gone.\n\nCrazy, when you do not connect the cooler Dark Rock Pro 4 very strong to the board, the error goes away also..\n\nFor the asrock fatal1ty z370 gaming k6 board and the EVGA z390 dark board,\n\nDark Rock Pro 4 can be mounted careful and gives temperatures about 80 degrees at 230 Watt cpu load.\n\nThis is 20 degrees(!) better than the dark rock pro 3, I just changed them on the same board, here Asrock.\n\nIn the evening today the X79 Sabertooth board arrived. So tomorrow I start with Bios update for nvme\n\nDietmar\n\n[![0a27fe-1555108693.jpg](https://www.bilder-upload.eu/thumb/0a27fe-1555108693.jpg)](https://www.bilder-upload.eu/bild-0a27fe-1555108693.jpg.html \"External link\")\n\nEDIT: I rotatet the Dark Rock pro 4 on the Asus Apex X motherboard 90 degrees.\n\nNow all is ok.\n\n"
    },
    {
      "id": "210666",
      "timestamp": "2019-04-13T15:13:49+00:00",
      "author": "Dietmar",
      "content": "I am just installing XP SP3\n\non the nice X79 Sabertooth board,\n\nso fun just started\n\nDietmar\n\n[![79d0b7-1555168343.jpg](https://www.bilder-upload.eu/thumb/79d0b7-1555168343.jpg)](https://www.bilder-upload.eu/bild-79d0b7-1555168343.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210667",
      "timestamp": "2019-04-13T15:16:56+00:00",
      "author": "agent_x007",
      "content": "Did you NVMe\u0027d it\u0027s BIOS already ?\n\n"
    },
    {
      "id": "210668",
      "timestamp": "2019-04-13T15:39:53+00:00",
      "author": "Dietmar",
      "content": "@agent_x007\n\nNo, I am at the very first beginning,\n\nfetching all drivers for this board.\n\nNext I try to let the nvme optane 905P been recogniced.\n\nThen comes the hard work with to put legacy nvme to Bios,\n\nDietmar\n\n"
    },
    {
      "id": "210673",
      "timestamp": "2019-04-13T17:55:41+00:00",
      "author": "Dietmar",
      "content": "Nice board, 5 years garantie and\n\nOptane 905P is recogniced, see diskmark.\n\nNow I try the s4e methode for XP\n\nboot,\n\nDietmar\n\n[![7192c8-1555178096.jpg](https://www.bilder-upload.eu/thumb/7192c8-1555178096.jpg)](https://www.bilder-upload.eu/bild-7192c8-1555178096.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210674",
      "timestamp": "2019-04-13T18:02:03+00:00",
      "author": "agent_x007",
      "content": "Are you using 4960X ?  \nI like LGA 2011 since all CPUs for it have 40 PCI-e lanes (more than enough for GPU(s) and NVMe drive).  \n\nIt should work, I\u0027m more interested in EFI moding :smile:  \n\nPS. My second pair of speakers for my very first PC, were the exact ones that you are now using (SBS260 from Creative) ![:D](https://reboot.pro/public/style_emoticons/default/biggrin.png)\n\n**Edited by agent_x007, 13 April 2019 - 06:03 PM.**\n"
    },
    {
      "id": "210676",
      "timestamp": "2019-04-13T19:06:02+00:00",
      "author": "Dietmar",
      "content": "The processor is i7-4820k,\n\nvery fast. It is a 4 channel memory mainboard,\n\nmeans more than 40 Gbyte/s !\n\nJust in this moment I test boot via s4e\n\nfrom nvme optane 32 GB,\n\nDietmar\n\n"
    },
    {
      "id": "210678",
      "timestamp": "2019-04-13T19:17:30+00:00",
      "author": "agent_x007",
      "content": "With 1866MHz memory, I get around 55GB/s with AIDA64 :wink:  \n\nPS. My next idea on legacy NVMe boot moding BIOS was to swap PciBus and PciRootBridge.\n\n**Edited by agent_x007, 13 April 2019 - 07:18 PM.**\n"
    },
    {
      "id": "210679",
      "timestamp": "2019-04-13T19:32:21+00:00",
      "author": "Dietmar",
      "content": "s4e is best!!!\n\nThis is XP SP3 on nvme Optane 32 GB\n\nwithout Bios modding, cool.\n\nFor this I make with Aomei a copy of the harddisk to the optane drive,\n\nafter recognicing optane nvme.\n\nThen I make a bit to bit copy of the *optane drive* with Winhex and store it as optane.dat.\n\nThis optane.dat I copy also bit by bit to an USB 3 stick.\n\nShut compi down.\n\nNow only the USB stick is connected and the optane drive.\n\nDuring USB boot, the stick looses contact because no usb files for boot on it\n\nand blind;)) XP takes the nvme optane drive, because 100% identic with the USB stick,\n\njust all, mbr, partition, a clone. Before boot ends I disconnect the USB 3 stick.\n\nBoottime all together is few seconds.\n\nDietmar\n\nPS: This XP feels incredible fasssssstt..\n\n[![e5be29-1555183922.jpg](https://www.bilder-upload.eu/thumb/e5be29-1555183922.jpg)](https://www.bilder-upload.eu/bild-e5be29-1555183922.jpg.html \"External link\")\n\nI just run Cinebench, 3Dmark2001, prime95 on the optane drive *all together at the same time* and music video from Youtube,\n\nAmazing stable, I like this board a lot ![:D](https://reboot.pro/public/style_emoticons/default/biggrin.png) !\n\nTo install new software on the nvme disk is not so easy, because its counterpart on USB stick has not.\n\n"
    },
    {
      "id": "210680",
      "timestamp": "2019-04-13T19:36:27+00:00",
      "author": "agent_x007",
      "content": "Best option : Plug sdcard reader into internal USB port to have all external USBs free (exchangeable microSD cards wtih XP FTW) :smile:\n\n**Edited by agent_x007, 13 April 2019 - 07:47 PM.**\n"
    },
    {
      "id": "210681",
      "timestamp": "2019-04-13T20:12:45+00:00",
      "author": "Dietmar",
      "content": "The hard work in Bios legacy nvme boot will be,\n\nto extract the *needed* parts for nvme legacy boot from the x79 deluxe board nvme Bios.\n\n[Lost_N_BIOS](https://www.win-raid.com/u14849_Lost-N-BIOS.html \"External link\") from the Fernando forum told me, how to force install complete whole parts of one Bios\n\nto another. I use for this Win7.\n\nThe risk, that Bios is broken is high, even with flash back.\n\nI \"succeed\" with this also on the Asus Apex X board. But there seems to stay some parts of Bios undeletable on second Bios\n\nand the compi itself makes an update of its Bios internally, really crazy,\n\nDietmar\n\nPS: The Bios chip here on Sabertooth X79 is on a socket, so no *big*problem.\n\n"
    },
    {
      "id": "210682",
      "timestamp": "2019-04-13T20:51:33+00:00",
      "author": "Dietmar",
      "content": "Next what I do before Bios hack\n\nis a complete copy of this Bios with [CH341A USB Programmer 24 25](https://www.google.com/url?sa\u003di\u0026rct\u003dj\u0026q\u003d\u0026esrc\u003ds\u0026source\u003dimages\u0026cd\u003d\u0026cad\u003drja\u0026uact\u003d8\u0026ved\u003d0ahUKEwjaiern-M3hAhVPJhoKHZ1pADAQMwhrKB8wHw\u0026url\u003dhttps%3A%2F%2Fwww.newegg.com%2FProduct%2FProduct.aspx%3FItem%3D2A7-00D0-00073\u0026psig\u003dAOvVaw3X_M2u7A1PHXODnDmJ6Csf\u0026ust\u003d1555274948612614\u0026ictx\u003d3\u0026uact\u003d3 \"External link\").\n\nFor this I have to connect by hand all the pins of the Bios Chip to it.\n\nBut after this, I am on the 100% safe site :smile:\n\nDietmar\n\n[![e503ba-1555189288.jpg](https://www.bilder-upload.eu/thumb/e503ba-1555189288.jpg)](https://www.bilder-upload.eu/bild-e503ba-1555189288.jpg.html \"External link\")\n\n[https://datasheet.da...DSA00916615.pdf](https://datasheet.datasheetarchive.com/originals/library/Datasheets-IS46/DSA00916615.pdf \"External link\")\n\n"
    },
    {
      "id": "210683",
      "timestamp": "2019-04-13T23:08:06+00:00",
      "author": "Dietmar",
      "content": "The first step is done,  \nI read out the full Bios ship Winbond 25Q64BVAIG with the Eprom flasher CH341a,  \ndoublecheck ![^_^](https://reboot.pro/public/style_emoticons/default/happy.png) it 2 times,  \nall is safe so lets start fun:)),  \nDietmar  \n\n[![5d534f-1555196799.jpg](https://www.bilder-upload.eu/thumb/5d534f-1555196799.jpg)](https://www.bilder-upload.eu/bild-5d534f-1555196799.jpg.html \"External link\")  \n\nPS: Be careful, on the screen of the program AND on the programmer CH341a itself  \nthe point 1 mark is exact on the wrong site ![:o](https://reboot.pro/public/style_emoticons/default/ohmy.png) , crazy!!!\n\n"
    },
    {
      "id": "210690",
      "timestamp": "2019-04-14T10:08:03+00:00",
      "author": "Dietmar",
      "content": "Ok, first brute force try,\n\nto change whole Bios region of X79 Sabertooth\n\nagainst the whole Bios region of X79-Deluxe failes,\n\ncompi does not start any longer\\^\\^\n\nDietmar\n\nEDIT: By the way, I found a strange thing, that happens in Bios.\n\nI reread the original Bios today and compare it against the original Bios\n\nfrom yesterday. When I compare it with Winhex, it is changed in more than 1000 places.\n\nThis simple means, the compi is writing to the Bios all the time!\n\n"
    },
    {
      "id": "210693",
      "timestamp": "2019-04-14T14:13:21+00:00",
      "author": "Dietmar",
      "content": "I put from Bios of Asus x79-Deluxe into the Bios of Asus Sabertooth X79\n\nthe new nvme dxe driver\n\nnvme\n\nnvmeint13\n\nnvmesmm\n\nAlso I change whole dxe driver\n\nCSMCORE\n\nbecause the search in Asus x79-Deluxe Bios shows, that in CSMCORE raw component appears the word nvme also.\n\nThe Sabertooth board still starts with this changes in its Bios, but nvme drive cant be seen\n\nDietmar\n\nPS: Now I compare the last Bios version 0902 for Asus x79-Deluxe (without nvme)\n\nagainst the next following Bios version 4805 for Asus x79-Deluxe (with nvme).\n\nS4e nvme boot via USB still works, this is amazing.\n\n"
    },
    {
      "id": "210694",
      "timestamp": "2019-04-14T15:07:35+00:00",
      "author": "Dietmar",
      "content": "Now I am out of ideas ![:unsure:](https://reboot.pro/public/style_emoticons/default/unsure.png)\n\nDiemar\n\n"
    },
    {
      "id": "210695",
      "timestamp": "2019-04-14T15:28:46+00:00",
      "author": "agent_x007",
      "content": "Maybe try to update PciRootBridge and PciBus modules ?  \nAlso, why you didn\u0027t tried NTFS module ?\n\n**Edited by agent_x007, 14 April 2019 - 03:35 PM.**\n"
    },
    {
      "id": "210696",
      "timestamp": "2019-04-14T18:09:48+00:00",
      "author": "Dietmar",
      "content": "@agent_x007,\n\nmy problem ist, that I have no idea,\n\nhow those nvme files work in Bios.\n\nI found no relevant(?!) changes between the\n\nBios from the Asus X79-Deluxe board\n\nbefore nvme Bios and after.\n\nSo it is like searching in the dark :tongue:\n\nDietmar\n\nPS: For Asus it would be very easy. I think, those nvme files are all the same,\n\nwritten in C, and they have only to compile it for the Sabertooth\n\nboard.\n\nAnother idea would be, to put an own nvme rom image\n\ninto the Bios, like Plop does for USB.\n\n"
    },
    {
      "id": "210700",
      "timestamp": "2019-04-14T19:25:03+00:00",
      "author": "Dietmar",
      "content": "I just try the same Bios mod for Sabertooth X79\n\nbut now with the nvme Bios from the Asus X99 Sabertooth board.\n\nThere, the nvme files are a little bit different\n\nDietmar\n\nEDIT: Does not work.\n\n"
    },
    {
      "id": "210702",
      "timestamp": "2019-04-14T20:42:08+00:00",
      "author": "Dietmar",
      "content": "Ok, next try.\n\nI use again the nvme Bios from the Asus x79-Deluxe board.\n\nNow I replace (always \"as it is\") with UEFITool:\n\nPciBus\n\nPciRootBridge\n\nCSMCORE\n\nLegacyInterrupt\n\nLegacyRegion\n\nNvme\n\nNvmeSmm\n\nNVMEINT13\n\nAmiBoardInfo\n\nDietmar\n\nEDIT: Board starts normal, but still no nvme device recogniced from Bios.\n\n"
    },
    {
      "id": "210703",
      "timestamp": "2019-04-14T21:24:09+00:00",
      "author": "Dietmar",
      "content": "And also I replace\n\nCore_DXE\n\nFileSystem\n\nSmmChildDispatcher\n\nACPI\n\nSmmBase\n\nSmmCommunicate\n\nOnBrdDevDXE\n\nSmmruntime\n\nSmmDispatcher\n\nCMosmanagerSmm\n\nEDIT: Board boots normal, but still no nvme device recogniced from Bios.\n\n"
    },
    {
      "id": "210704",
      "timestamp": "2019-04-14T21:42:10+00:00",
      "author": "Dietmar",
      "content": "Waaoh, the legacy nvme **Toshiba RD400**is now recogniced in Bios\n\nas **Toshiba RD400**,\n\nsome other nvme disks are named **PataSS:**\n\nlike in the Fernando forum,\n\nbut still no complete legacy nvme boot\n\nDietmar\n\n[![f664b2-1555279943.jpg](https://www.bilder-upload.eu/thumb/f664b2-1555279943.jpg)](https://www.bilder-upload.eu/bild-f664b2-1555279943.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210706",
      "timestamp": "2019-04-15T00:26:14+00:00",
      "author": "agent_x007",
      "content": "Progress !  \nCSM is loaded as Legacy first (with both \"Legacy and UEFI\" options active when available) ?\n\n**Edited by agent_x007, 15 April 2019 - 12:27 AM.**\n"
    },
    {
      "id": "210710",
      "timestamp": "2019-04-15T09:28:39+00:00",
      "author": "Dietmar",
      "content": "The question ist, which \\*.dxe files from UEFI Bios\n\nare needed for full CSM support (Compatibility Support Module).\n\nWe need a tool like Dependency Walker, for to see,\n\nwhich files call each other, are connected.\n\nThe UEFITool tries something in this direction,\n\nwhen you change a \\*.dxe file, sometimes another \\*.dxe file\n\nis changed also. But this function in UEFITool is not as good\n\nas in Dependency Walker, because in this case legacy nvme boot\n\nwas done already,\n\nDietmar\n\nPS: Any help is welcome, how UEFI Bios with CSM really works!\n\n"
    },
    {
      "id": "210716",
      "timestamp": "2019-04-15T12:54:40+00:00",
      "author": "Dietmar",
      "content": "Ok, fun goes on:\n\nAfter additional adding the following files from X79-Deluxe Bios to Bios of Sabertooth x79\n\nall nvme disks are recogniced by their name.\n\nAcpiModeEnable\n\nAHCI\n\nAhciSmm\n\nAINT13\n\nCsmVideo\n\nNTFS\n\nSBAHCI\n\nSBDXE\n\nSBIDE\n\nSBRun\n\nSecureBootMod\n\nSIOBasicIODxe\n\nBut on boot of a working nvme XP on MBR I get the message\n\n\"Reboot and select proper boot device or insert boot media in selected boot device and press a key\"\n\nDietmar\n\n[![408c71-1555332814.jpg](https://www.bilder-upload.eu/thumb/408c71-1555332814.jpg)](https://www.bilder-upload.eu/bild-408c71-1555332814.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210719",
      "timestamp": "2019-04-15T16:49:56+00:00",
      "author": "Dietmar",
      "content": "Win10 on MBR with NTFS shows the same error message,\n\neven with those new copied files to Bios of Sabertooth X79\n\nRuntime\n\nSBSMI\n\nSbPchSmi\n\nSataDiver_12_7\n\nNBDXE (NOT copied, because not screen!)\n\nBootPriority\n\nBIOSBLKIO\n\nAMITSE\n\nUefiPxeBcDxe\n\nUHCD\n\nMSOA\n\nIdeSMART\n\nResLoader\n\nASUSFTMDXE\n\nOEMDXE\n\nuefi64\n\nDietmar\n\n"
    },
    {
      "id": "210720",
      "timestamp": "2019-04-15T18:12:56+00:00",
      "author": "Dietmar",
      "content": "Same behavior,\n\nafter I add to Bios of the Sabertooth x79 board.\n\nTcgPlatformSetupPolicy\n\nTcgDxe\n\nTcgDxeplatform\n\nTCGSmm\n\nTcgLegacy\n\nAmiTcgPlatformDxe\n\nAmiTcgNvflagSample\n\nDietmar\n\n"
    },
    {
      "id": "210727",
      "timestamp": "2019-04-16T10:56:32+00:00",
      "author": "Dietmar",
      "content": "The problem is still,\n\nwhich files are really needed for legacy nvme boot.\n\nA new idea is, to delete files in Bios one by one on\n\na working nvme Bios and look,\n\nat which point nvme legacy boot stops working\n\nand shows the same symptoms as for me\n\n\"Reboot and select proper boot device or insert boot media in selected boot device and press a key\"\n\nFrom my results until now I see,\n\nthat the nvme devices are recogniced with full name (good),\n\nbut Bios still wants them in UEFI mode.\n\nSo the switch between UEFI and legacy\n\ndoes not work for nvme drives until now\n\nwith just additional (changed) drivers to Bios\n\nDietmar\n\n"
    },
    {
      "id": "210728",
      "timestamp": "2019-04-16T11:24:30+00:00",
      "author": "Dietmar",
      "content": "A new search for \"nvme\" in Bios\n\nwith ASCII and with unicode gives results for the following files in nvme Bios:\n\nNvme\n\nNvmeSmm\n\nNVMEINT13\n\nCSMCORE\n\nSetup\n\nThe word \"legacy\" is in\n\nCORE_DXE\n\nCSMCORE\n\nLegacyInterrupt\n\nLegacyRegion\n\nAMITSE\n\n(TCGLegacy)\n\n(USBINT13)\n\nInt10ToSmi\n\n(IntelGigabitLanx64)\n\nSetup\n\nOh, \"Setup\" and \"Int10ToSmi\" I have not replaced until now,\n\nso lets see :smile:\n\nDietmar\n\nEDIT: If this is the right way, I can test:\n\nI have an Asrock Z77 Extreme4\n\nwhich was the very first motherboard with nvme support.\n\nThere was a Bios before nvme and a Bios with nvme.\n\nJust doing the same steps as above, it should awake legacy nvme\n\non the old Bios without nvme support.\n\nEDIT2: The problem on the Sabertooth X79 board is now, that when I integrate \"Setup\" from Bios of X79-Deluxe,\n\nthe board (after resetting CMOS) starts only to \"Press delete, for to enter UEFI Bios\" but the compi does not react\n\nto anything.\n\n"
    },
    {
      "id": "210729",
      "timestamp": "2019-04-16T14:12:25+00:00",
      "author": "Dietmar",
      "content": "Ok, with original \"Setup\" DXE file from Sabertooth X79 board\n\nafter integrating the files\n\nNvme\n\nNvmeSmm\n\nNVMEINT13\n\nCSMCORE\n\nCORE_DXE\n\nLegacyInterrupt\n\nLegacyRegion\n\nAMITSE\n\nInt10ToSmi\n\nI came to the same result as yesterday:\n\nAll nvme devices are recogniced by their names\n\nbut when you boot from them the message appears\n\n\"Reboot and select proper boot device or insert boot media in selected boot device and press a key\"\n\nDietmar\n\n"
    },
    {
      "id": "210730",
      "timestamp": "2019-04-16T14:34:12+00:00",
      "author": "Dietmar",
      "content": "Cool, I can INSTALL ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) :smile: :smile: :smile: ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif) XP SP3\n\non the Sabertooth X79 board\n\non nvme disk Toshiba RD400.\n\nThe nvme disk is recogniced.\n\nThe nvme disk Toshiba RD400 is the only device on this board\n\nDietmar\n\n[![854503-1555425651.jpg](https://www.bilder-upload.eu/thumb/854503-1555425651.jpg)](https://www.bilder-upload.eu/bild-854503-1555425651.jpg.html \"External link\")\n\nEDIT: I understand, what happens. XP builds from nvme.sys an ntbootdd.sys with signature entry\n\nin the boot.ini for the nvme Toshiba RD400. But the problem ist, as I found out in last summer:\n\nntbootdd.sys only works for a scsiport driver. I checked this in ntldr. And here, nvme.sys depends on storport.sys.\n\nCrazy, when we would have an nvme.sys, which is build from the OFA open source code based on scsiport instead\n\nof storport, we could boot XP on any older compi from legacy nvme with my integrated files above.\n\nSo, the installationsroutine from XP :smile: does really its best, but crazy Bios does not recognice (until now) the nvme disk\n\nas a *bootable* device.\n\n"
    },
    {
      "id": "210731",
      "timestamp": "2019-04-16T16:51:22+00:00",
      "author": "agent_x007",
      "content": "Can this even by done ?  \n(making OFE from ntbootdd.sys instead of storport.sys)\n\nCould Vista be booted this way ?  \nWould BCD change things for XP booting (since in theory, BIOS didn\u0027t have to search for ntdlr at that point) ?  \nBCD should be able to detect ntdlr by itself... and may be more compatible (and reliable) as boot option with non-modified UEFI.\n\n**Edited by agent_x007, 16 April 2019 - 04:52 PM.**\n"
    },
    {
      "id": "210733",
      "timestamp": "2019-04-16T19:52:56+00:00",
      "author": "Dietmar",
      "content": "I just make a try with Win2003 R2 install on Toshiba RD400\n\nand nvme boot.\n\nExact the same happens: ntbootdd.sys is build\n\nwith signature of the Toshiba RD400 in boot.ini.\n\nFirst step installation works,\n\nbut on reboot I get the same message as with XP,\n\n\"Reboot and select proper boot device or insert boot media in selected boot device and press a key\"\n\nbecause even win2003 uses storport,\n\nfor to build ntbootdd.sys it uses *scsiport* for its ntldr.\n\nNow I make a try to modify the setup.dxe from the Asus X79-Deluxe board,\n\ncomparing it with its own version before nvme\n\nDietmar\n\nPS: Is there a disassembler for modern UEFI Bios?\n\n"
    },
    {
      "id": "210734",
      "timestamp": "2019-04-16T21:21:36+00:00",
      "author": "Dietmar",
      "content": "All files in Bios from the nonnvme Bios 902\n\nand the files in Bios from nvme Bios 4805\n\nare nearly identic.\n\nThe biggest difference is in Bios from Asus X79-Deluxe\n\nCsmcoreRawbody902.raw\n\nCsmcoreRawbody4805.raw\n\nThey are to 100% identic, but at the end of it there comes the nvme module in the 4805,\n\nwhich is absent in 902\n\nDietmar\n\nEDIT: With Winhex, I put exact this nvme part at the end of the original CSMCORE.raw part\n\nfrom the original Sabertooth X79 board.\n\nI put only those 3 files in Bios\n\nNvme\n\nNvmeSmm\n\nNVMEINT13\n\nCSMCORE\n\nNow is the behavior: The exact name of the nvme device is found by Bios,\n\nbut then again comes this message\n\n\"Reboot and select proper boot device or insert boot media in selected boot device and press a key\"\n\nSo, this is the minimal change, so that the Bios can detect the legacy nvme device,\n\nbut is not able to boot from it until now. ![-_-](http://reboot.pro/public/style_emoticons/default/sleep.png)\n\n"
    },
    {
      "id": "210739",
      "timestamp": "2019-04-18T10:20:22+00:00",
      "author": "Dietmar",
      "content": "After no success with legacy nvme Bios mod (crazy Bios shows nvme legacy disk with full name as bootable, but this is not true),\n\nI take a closer look at the method from s4e.\n\nThis method is much better, than you may think.\n\nWhen you install new software, after you only have to copy the updated HIVE SYSTEM from\n\nC:\\\\WINDOWS\\\\system32\\\\config of the nvme disk to the starter usbstick, this is all.\n\nI noticed, that in HIVE SYSTEM also some parts of software are stored.\n\nThe fascination in the s4e method is, that you can boot from really everything, as long as you have driver for XP for this,\n\nno matter what kind of Bios you have (USB2,3, Firewire, nvme..)\n\nDietmar\n\nPS: By the way I noticed, that also Win 7 32 bit and Win 10 on mbr refuse to install\n\non this nvme disk. So, XP with ntbootdd is better ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) ..\n\nIf we only had nvme.sys for scsiport. XP can handle storport and scsiport at the same time, but ntbootdd needs scsiport.\n\n"
    },
    {
      "id": "210740",
      "timestamp": "2019-04-18T13:35:37+00:00",
      "author": "ruthan",
      "content": "Hi,\n\n1) Im trying to select some cheap NVME just for testing, if i would be able to make NVME booting working, which one you would recommend (if some would work):\n\n[Patriot Scorch SSD 256GB](https://www.alza.cz/patriot-scorch-ssd-256gb-d5253536.htm \"External link\")[ADATA XPG SX6000 Lite SSD 256GB](https://www.alza.cz/adata-xpg-sx6000-lite-ssd-256gb-d5528163.htm \"External link\")[Kingston A1000 240GB NVMe](https://www.alza.cz/kingston-a1000-240gb-nvme-levne-d5343887.htm \"External link\")\n\n[GIGABYTE M.2 PCIe 256GB SSD](https://www.alza.cz/gigabyte-m-2-pcie-256gb-ssd-levne-d5521692.htm \"External link\")[ADATA XPG SX6000 Pro SSD 256GB](https://www.alza.cz/adata-xpg-sx6000-pro-ssd-256gb-d5518498.htm \"External link\")\n\n2) Would work Samsung 970 evo plus with XP too? It seems to be good one as final solution.\n\n3) Where to get last version of these files?\n\u003e 2.) Copy the file storport.sys (vers. 5.2.3790.4173) to folder C:\\\\WINDOWS\\\\system32\\\\drivers on your XP harddisk.\n\u003e\n\u003e 4.) Click on the folder nvme, where the files nvme.inf and nvme.sys (vers 1.3) from Kai are in.\n\u003e\n4) That Z370, i have XP on Gigabyte Z370 and Z170, but i have with both problems with XP - browsers except IE werent responding, games had microfreezes etc.. it was because i had some ACPI problems, someone fixed for me Z170 bios is now ok.. for Z370 im waiting for fix. Did you have some problems with not Gigabyte boards?\n\n"
    },
    {
      "id": "210741",
      "timestamp": "2019-04-18T14:30:09+00:00",
      "author": "Dietmar",
      "content": "Hi ruthan,\n\nI think they work all.\n\nThe Adata XPG SX8200 seems to me good and cheap.\n\nThe file I call nvme.rar\n\nand you can find him at\n\n[https://www.win-raid...C-parts-13.html](https://www.win-raid.com/t4035f45-Windows-XP-SP-bit-and-modern-PC-parts-13.html \"External link\")\n\nDietmar\n\nPS: XP works for me like a charm on all boards, that I have even on i486 - z390!\n\nIt can happen, when the timer does not work correct. Read about it at the Fernando forum above and at\n\n[https://msfn.org/boa...t-winxp/?page\u003d5](https://msfn.org/board/topic/177563-newer-motherboards-that-support-winxp/?page\u003d5 \"External link\")\n\nfile ACPIcool.rar\n\n"
    },
    {
      "id": "210745",
      "timestamp": "2019-04-18T18:49:17+00:00",
      "author": "Dietmar",
      "content": "For what kind of fun the s4e method can be used ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) :\n\nI just boot one USB stick from another (clone).\n\nMay be it is possible, to do this with one USB stick alone:\n\nYou put the identic Bit by Bit copy two times on one USB stick,\n\na little bit like 2 partitions, but it is the same twice :tongue:\n\nDietmar\n\nEDIT: This works only, when the second USB stick is NOT recogniced\n\nfrom Bios before.\n\n"
    },
    {
      "id": "210746",
      "timestamp": "2019-04-18T19:09:19+00:00",
      "author": "ruthan",
      "content": "Thanks.\n\nThese identical copied? There is not tool which able to make them corrrecly, you have to use some hex editor magic? Do you tested R-Drive image, Partition Wizzard, or Acronis Trueimage, Paragon HDD suite?\n\n"
    },
    {
      "id": "210747",
      "timestamp": "2019-04-18T19:30:51+00:00",
      "author": "Dietmar",
      "content": "With Winhex it is possible.\n\nI thought about as a joke,\n\nbut now I test ![:D](http://reboot.pro/public/style_emoticons/default/biggrin.png)\n\nDietmar\n\nEDIT: Even not so easy with Winhex, but just in this moment\n\nI am copying whole USB partition with mbr and offset 2048 again on this stick,\n\ndirect after first.\n\n"
    },
    {
      "id": "210748",
      "timestamp": "2019-04-18T20:44:23+00:00",
      "author": "Dietmar",
      "content": "Alone this USB stick with clone in itself shows BSOD 0x7B.\n\nI think, XP ignores just the existence of clone.\n\nBut it still boots the nvme disk.\n\nTake a look, what Winhex tells about this USB stick:\n\nCyl: ***7551***\n\nDietmar\n\n[![f73de3-1555620078.jpg](https://www.bilder-upload.eu/thumb/f73de3-1555620078.jpg)](https://www.bilder-upload.eu/bild-f73de3-1555620078.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210755",
      "timestamp": "2019-04-19T07:58:57+00:00",
      "author": "Dietmar",
      "content": "Hi,\n\nduring my tests with the s4e method,\n\nI think I found the one and only real reason for BSOD 0x7B for USB boot\n\non so many motherboards, even with the correct modified start\u003d0 and Group\u003dSystem Reserved.\n\nOh, this lasts nearly 14 years :cool: .\n\nWhen you look at the registry into the USB entries, here usbstor:\n\nWhen the USB device is connected you get something like\n\n\\[HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\usbstor\\\\Enum\\]  \n\"0\"\u003d\"USB\\\\\\\\Vid_0bda\\\u0026Pid_0152\\\u0026MI_00\\\\\\\\6\\\u00262182afbe\\\u00260\\\u00260000\"  \n\"Count\"\u003ddword:00000002  \n\"NextInstance\"\u003ddword:00000002  \n**\"1\"\u003d\"USB\\\\\\\\Vid_0781\\\u0026Pid_5581\\\\\\\\4C531001410206112245\"**\n\nand when you disconnect this device it changes back to\n\n\\[HKEY_LOCAL_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Services\\\\usbstor\\\\Enum\\]  \n\"0\"\u003d\"USB\\\\\\\\Vid_0bda\\\u0026Pid_0152\\\u0026MI_00\\\\\\\\6\\\u00262182afbe\\\u00260\\\u00260000\"  \n\"Count\"\u003ddword:00000001  \n\"NextInstance\"\u003ddword:00000001\n\nbecause it is a removable device.\n\nMany people here in this forum thought, that it is a time problem.\n\nYES.\n\nWhen the USB device loses contact during USB boot to the Bios USB files,\n\nit needs to be ***recogniced***like written above.\n\nAnd this needs time.\n\nThis can be simple overcome: You have to add in registry all the entries,\n\nas if the USB device is connected from the beginning.\n\nThe effect is amazing:\n\nWhen you start with such a modified registry and the USB stick is even not connected,\n\nthe symbol of it is shown and when you plug it in, no sound appears and it works at once (no time lost!)\n\nDietmar\n\n"
    },
    {
      "id": "210756",
      "timestamp": "2019-04-19T08:29:31+00:00",
      "author": "wimb",
      "content": "\u003e I think I found the one and only real reason for BSOD 0x7B for USB boot\n\u003e\n\u003e on so many motherboards, even with the correct modified start\u003d0 and Group\u003dSystem Reserved.\n\u003e\n\u003e ....\n\u003e\n\u003e This can be simple overcome: You have to add in registry all the entries,\n\u003e\n\u003e as if the USB device is connected from the beginning.\n\u003e\n\u003e The effect is amazing:\n\u003e\n\u003e When you start with such a modified registry and the USB stick is even not connected,\n\u003e\n\u003e the symbol of it is shown and when you plug it in, no sound appears and it works at once (no time lost!)\n\u003e\nVery Good !\n\nThis is a nice and simple solution to the BSOD 0x7B problem for USB Boot.\n\n"
    },
    {
      "id": "210766",
      "timestamp": "2019-04-19T13:36:32+00:00",
      "author": "ruthan",
      "content": "My NVME is on the way.\n\nI have 1 more question about Z3xx chipset MB, my Gigabyte Board is not able to boot with PCI-E Graphics cards, it simply ignoring them, i tried Geforce 6 and 7 card.\n\nCan you test some PCI-E gen1 card (Geforce 5/6/7.. ATI X300-X850) with MB from other manufactors?\n\nUp to Z170, its working fine, so im able to make Windows 98 SE working on these MBs with 3D Graphics, otherwise you would have to suffer with generic VGA driver, or with Russian Beard Vesa driver - no 3D.\n\nRloew has now AHCI driver for WIn98 - he has even demo, and its working fine so slow HDD is not issue for Windows 98 and there are Z170/Z270/Z370 MB with PCI slots so sound cards support is fine too for Windows 98, other you have use USB audio, which is working too, but its a bit PITA..\n\nI contacted Gigabyte support, but even when it should work because of proper PCI-E support, they dong give a fu.. because they are saying we dont care about 10+ years old graphics card.. Would be possible somehow patch Bios for this support.\n\n"
    },
    {
      "id": "210767",
      "timestamp": "2019-04-19T14:22:50+00:00",
      "author": "Dietmar",
      "content": "Hi ruthan,\n\nI have only Asus, Asrock and some MSI boards here.\n\nOn them work GTX 980 and GT 730 from Zotac (passiv cooled),\n\nGT 610.\n\nI use the driver 344.11-desktop-winxp-32bit-international.exe\n\nwhich has native support even for the GTX 980\n\nDietmar\n\n"
    },
    {
      "id": "210768",
      "timestamp": "2019-04-19T17:53:40+00:00",
      "author": "ruthan",
      "content": "Its good that you can test on non Gigabyte MBs,\n\nbut problems are videocards, you need something much older.. and dont need Windows / Linux driver etc.. problem is that with such graphical cards, you dont get even boot scree, bios, windows logos etc.. cards are completly ignored.\n\nPCI-E gen cards really only:  \nNvidia Geforce 5/6/7 , Geforce 8 and above are PCI-E gen 2, also newer cards dont have Windows 98 drivers\n\nATI Radeon X300-X850 / Radeon X1050-X1950 and HD 200xxx - iare still PCI-Gen 1.0 good for boot test, but no Win98 drivers.\n\nLook here - collumn - Bus interface:\n\n[https://en.wikipedia...rocessing_units](https://en.wikipedia.org/wiki/List_of_Nvidia_graphics_processing_units \"External link\")\n\n"
    },
    {
      "id": "210769",
      "timestamp": "2019-04-19T18:54:08+00:00",
      "author": "Dietmar",
      "content": "@ruthan\n\nI have also a new GT 610 ***PCI*** graphiccard, Zotac 512 MB passiv cooled.\n\nThis works on older MSI boards with XP\n\nDietmar\n\n"
    },
    {
      "id": "210770",
      "timestamp": "2019-04-19T19:13:52+00:00",
      "author": "ruthan",
      "content": "This is not big deal for Win98 point of view there are not drivers, its nice if PCI cards would work there are nice for Dos and maybe if some new PCI videocard is working, so older would too and there are lots of old PCI videocards with Windows 98 support. Like Vooodo 3 PCI, or some Geforce 5 PCI cards, also Radeon 9200 / 7000, Matrox G200/G400G550.. but even than PCI-E gen 1 cards are much faster.. - PIC cards could make something like 1024x768 in games, with PCI-E you can play in 1600x1200, which count especially with LCD screen, where not native resolutions sucks..\n\n"
    },
    {
      "id": "210772",
      "timestamp": "2019-04-19T21:38:15+00:00",
      "author": "Dietmar",
      "content": "Today I make a new acpi.sys for XP SP3 32 bit.  \nIt works on AMD, Intel motherboards,  \nfor all languages,  \nDietmar\n\nPS: You can find it at the Fernando forum:\n\n[https://www.win-raid...0.html#msg76043](https://www.win-raid.com/t4035f45-Windows-XP-SP-bit-and-modern-PC-parts-20.html#msg76043 \"External link\")\n\n"
    },
    {
      "id": "210773",
      "timestamp": "2019-04-19T22:33:05+00:00",
      "author": "ruthan",
      "content": "So no more bios mods needed?\n\nOtherwise here are described my problems with new Gigabyte boards and XP - where mod bios ACPI was solution:\n\n[https://msfn.org/boa...s-microfreezes/](https://msfn.org/board/topic/178240-winxpz170z370-mb-google-chrome-firefox-opera-dont-respond-on-user-actions-games-microfreezes/ \"External link\")\n\n**Edited by ruthan, 19 April 2019 - 10:36 PM.**\n"
    },
    {
      "id": "210774",
      "timestamp": "2019-04-19T22:34:56+00:00",
      "author": "Dietmar",
      "content": "On the AMD board\n\nasrock fatal1ty ab350 gaming k4\n\nit runs without modification of the Bios.\n\nSome more tests are needed\n\nDietmar\n\n"
    },
    {
      "id": "210775",
      "timestamp": "2019-04-19T22:56:39+00:00",
      "author": "Dietmar",
      "content": "@ruthan\n\nMake a test for correct working timer in XP with Win Timertester 1.1\n\n[https://drive.google...WNlV0RTcUU/view](https://drive.google.com/file/d/0B0dpSo9k93jDZlZ6NWNlV0RTcUU/view \"External link\")\n\nIf there appear negative values, you have to install the modified hal.dll\n\nwhich forces XP to use the realtime clock\n\nDietmar\n\nPS: For each language you need to modify hal.dll for yourself.\n\n"
    },
    {
      "id": "210776",
      "timestamp": "2019-04-19T23:02:52+00:00",
      "author": "ruthan",
      "content": "I cant test it right now, i have machine in other location.. i had to install it in Multiprocessor MPS mode, after bios patching i was able to boot with ACPI - boot.in hal etc.. line, but i had issue linked above, i had some with Z170 even with patched bios, but after some more clever patching it finally started working..\n\n"
    },
    {
      "id": "210777",
      "timestamp": "2019-04-19T23:14:15+00:00",
      "author": "ruthan",
      "content": "BTW if your X79 board has PCI slot there is quite big change with right sound card - Yamaha 724/744/754 or Aureal Vortex V1/V2 pure dos sound can work too, i have X58 board with which has same block device diagram and here it is working.. So you can have pure Dos /Win 98 to Win10 machine to all in one..\n\nIm using Gigabyte MBs, because they have in Bios nice feature - primary videocard slot selection, so you can have multiple videocards depends on started OS - you only select right bios profile for that. Other vendors except some HP O.E.M board dont have such feature in the bios..\n\n**Edited by ruthan, 19 April 2019 - 11:18 PM.**\n"
    },
    {
      "id": "210778",
      "timestamp": "2019-04-19T23:26:27+00:00",
      "author": "Dietmar",
      "content": "On the Asus Apex X board\n\nyou can disable PCI-e slots one by one.\n\nI tested it with graphicard GTX 980 for XP\n\nand GTX 1070 for Win 10.\n\nBut you are right:\n\nThis board Sabertooth X79 has an PCI slot\n\nand so everything is possible. I like Siedler 2 a lot.\n\nEven boot XP from nvme disk,\n\nuntil now, because no nvme.sys based on scsiport on the market:))\n\nonly via s4e method,\n\nbut this works nice and absolut stable.\n\nDos, Win 95, Win98, XP (and may be some day Win20\\^\\^).\n\nDietmar\n\n"
    },
    {
      "id": "210787",
      "timestamp": "2019-04-20T15:52:23+00:00",
      "author": "ruthan",
      "content": "I wonder other thing, if chipset is capable M.2 NVME booting, but there is not M.2 slot, its possible that would be possible to boot through PCI-E to NVME adapter, or simply no PCI-E slot, no IRQ 13 \u003d\\\u003e no XP booting?\n\nPossiblity of disable slot, one by one is nice.. If it could be included within Bios profiles? I wonder its typical Asus feature.. and how is exact bios name for such feature, or could you just make screenshot?\n\n"
    },
    {
      "id": "210789",
      "timestamp": "2019-04-20T16:18:11+00:00",
      "author": "Dietmar",
      "content": "@ruthan\n\nAs long as you find in Bios NVMEINT13,\n\nyou can do legacy nvme boot of XP,\n\nno matter, if there is a M.2 connector.\n\nEnable, disable each PCI-e slot is via dip-switch on mainboard\n\nDietmar\n\n"
    },
    {
      "id": "210797",
      "timestamp": "2019-04-22T00:18:05+00:00",
      "author": "ruthan",
      "content": "Is there any NVMEINT13 testing utility?\n\nOtherwise my ADATA XPG SX6000 Pro SSD 256GB has arrived, so far i had time test it only in Windows 7.\n\n[https://www.dropbox..../Adata.png?dl\u003d0](https://www.dropbox.com/s/66yln8jo20tj64b/Adata.png?dl\u003d0 \"External link\")\n\nAdata utility is funny - it reports - temperature - 65 000 C and when i try to upgrade firmware i get message that my SSD is not from Adata..\n\n**Edited by ruthan, 22 April 2019 - 12:18 AM.**\n"
    },
    {
      "id": "210806",
      "timestamp": "2019-04-22T17:25:42+00:00",
      "author": "ruthan",
      "content": "I havent enough time to clone HDD to NVME, but driver installation was nice i can see NVME as second driver and i can work with it in XP.\n\nHere is XP benchmark on GB-Z170 board, its slower than in WIn7, but fast enough, i didnt do any OS for SSD registry modifications etc.. BTW is there some tool , scriptfor it and XP?\n\n[https://www.dropbox.....08.19.jpg?dl\u003d0](https://www.dropbox.com/s/lg1fk18p9qzxahv/2019-04-22%2017.08.19.jpg?dl\u003d0 \"External link\")\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "210807",
      "timestamp": "2019-04-22T17:41:46+00:00",
      "author": "Dietmar",
      "content": "Hi,\n\njust install AOMEI and copy the XP\n\nto the nvme disk.\n\nBy the way, when you give me the exact name\n\nof your motherboard,\n\nI can fetch latest Bios and look for NVMEINT13\n\nin it,\n\nDietmar\n\nPS: I just downloaded from Microsoft the \"How to to build a storport driver from a scsiport one :smile:. \"\n\nNow I go *vice versa*. I am not good in C but I have done this in summer 2005 so..\n\nBecause the OFA nvme driver can be compiled direct to Win 2003 I make\n\na try to build scsiport driver from it. Win server 2003 has scsiport and storport and can handle both.\n\nThe compiler and everything else is exact like the build nvme 1.3 from Kai, via WinDDK 7600.16385.1\n\nBecause the scsidriver model from NT is as fast as possible, interesting *IF* I succeed\n\nto compare scsiport nvme it with storport nvme under XP SP3.\n\nAnd in the end I can start XP SP3 from my Sabertooth X79\n\nand any compi with PCI-e direct from nvme via ntbootdd.sys,\n\nDietmar\n\n"
    },
    {
      "id": "210808",
      "timestamp": "2019-04-22T19:49:55+00:00",
      "author": "ruthan",
      "content": "Here are all my MBs + some which i would bo buyi near future, were it would be nice to make XP NVME boot working:  \nGA-Z170-HD3  \nGigabyte z370 aorus ultra gaming  \nGA-X79-UP4  \nGigabyte GA-EX58-UD5  \nGB GA-Z97P-D3  \nGA X99 Gaming 5P  \nAsrock Z97 Extreme 4 / 3.1  \nGA-Z170M-D3H  \nGA-X99-SOC Force;  \nGA-Z97X-Gaming  \nGA-P75-D3P\n\n"
    },
    {
      "id": "210810",
      "timestamp": "2019-04-22T20:46:26+00:00",
      "author": "Dietmar",
      "content": "I just looked at Bios from GA-Z170-HD3.\n\nThere is NVMEINT13,\n\nso to boot nvme legacy XP SP3\n\nshould work\n\nDietmar\n\n"
    },
    {
      "id": "210907",
      "timestamp": "2019-04-28T11:12:03+00:00",
      "author": "ruthan",
      "content": "I finnaly made XP booting form NVME.\n\nPerformance is half of Win7 performance i dunno why, maybe driver (1.3 community edition linked above) is not very good for Adata NVME:\n\n[https://www.dropbox....ata-XP.PNG?dl\u003d0](https://www.dropbox.com/s/u0kfm1w4sqvsap2/Adata-XP.PNG?dl\u003d0 \"External link\")\n\nI had a bit problem to make it bootable, because i didnt just copied whole HDD to NVME through AOMIE free version, because on source disc where more parttions and it was too big to make a clone and Windows 98 partition would be bootable from NVME. So i copied only XP partition, after it bios wasnt able to find any boot loader on NVME, i tried Paragon 2012 which is best for XP booting fixing - but its not supporting NVME, i tried Paragon 2015 which is able to see NVME, boot fixing was done but again not bootable disc. So i used old good Grub (boot repair after partition copy to fix MBR - [https://help.ubuntu....ity/Boot-Repair](https://help.ubuntu.com/community/Boot-Repair \"External link\") ) - through copy of my Linux partition and after i used Boyans VisualBCD / Dual boot repair - i had to use version 0.9 - newer not supports XP well:\n\n[https://www.boyans.n...dVisualBCD.html](https://www.boyans.net/DownloadVisualBCD.html \"External link\")\n\nAnd now its working, so im the XP NVME booting club.\n\nNow i will transfer all Windows 7 partition and most funny par Android x86 one, its able to boot from M.2 Sata, so we will see if NVME is will work too.\n\nNow i what to make same thing working for Gigabyte z370 aorus ultra gaming and Asrock Z97 Extreme 4 / 3.1 if you can check if INT 13 is here.\n\nAnd after i what to try X58 boot, some people reporting that its working at least on some MBs for Windows 7/10 with Legacy bios NVME like Samsung 950, so i want to try my - Gigabyte GA-EX58-UD5, it has PCI-E gen 2 so max speed would be around 1500 MB/s.\n\nI wonder if Samsung 951 has leagy bios or not? 950 seems to be hardly to get in these days.\n\n**Edited by ruthan, 28 April 2019 - 11:20 AM.**\n"
    },
    {
      "id": "210909",
      "timestamp": "2019-04-28T15:53:13+00:00",
      "author": "ruthan",
      "content": "Android X86 and Windows 7 are working fine too.\n\n"
    },
    {
      "id": "210910",
      "timestamp": "2019-04-29T10:42:35+00:00",
      "author": "Blackcrack",
      "content": "Hi Didi,\n\n(sorry for my german but in german is more understandable for Diedmar :smile: )\n\nschönen guten Morgen, Didi könntest Du da ein Deutsches readmefile machen wie und weshalb\n\ndas ganze besser funtioniert als die Standart treiber und wie das ganze zu benutzen iss..\n\nDas wäre doch sicher auch was für Reactos ? Wenn das ganze unter GPL2 währe, könnte man das doch einbinden ?\n\nSo wie ich das ganze verfolgt hab ist das ein sata Treiber, der das ganze bschleuningt im Datentransfer von Festplatte zu System... oder ?\n\nlad doch mal ne actuelle build runter und probiers in Reactos aus in vbox, warum ich nicht, Du hast da mehr erfahrung, weil wenn\n\ndas ganze funtioniert, könnte das doch in reactos mit einfließen..\n\n[https://reactos.org/getbuilds/](https://reactos.org/getbuilds/ \"External link\")\n\nliebe Grüße\n\nBlacky\n\n"
    },
    {
      "id": "210920",
      "timestamp": "2019-04-29T20:04:38+00:00",
      "author": "Dietmar",
      "content": "@ruthan\n\nTake a look, if your PCI-e slot (or M.2) with the nvme disk on the Gibabyte 170 board has\n\nx4 free lines. If not, speed is reduced (to half).\n\nThis happens to me also on brandnew motherboards,\n\nbecause only 16 lines max at all for PCI-e from CPU. Some mainboards reduce this to \\\u003c16 free Pci-e lines.\n\nRemember, the Sabertooth 79 has 40(!) lines.\n\nStrange for me, because this makes CPU \\\u003e\u003d170 slow to\n\nthe world outside. Only the CPU with for example i7980 have more free Pci-e lines.\n\nGigabyte z370 aorus ultra gaming BIOS F14 has NvmeINT13,\n\nAsrock Z97 Extreme 4/3.1 Bios 5.8 has also NvmeINT13 support.\n\nOnly the Samsung 950 pro has own, legacy Bios.\n\nIt works for Win7 32 bit with mbr, I tested it, but on most boards not for to boot legacy XP.\n\nYou get an interesting crash, like snowfall.\n\nUntil now, from about 10 mainboards I tested,\n\nonly the Asus Apex X can work together with the Bios from 950 pro for XP legacy boot,\n\nDietmar\n\n"
    },
    {
      "id": "210921",
      "timestamp": "2019-04-29T21:36:28+00:00",
      "author": "ruthan",
      "content": "@Dietmar\n\nx4 it make no sense, because if look at Windows 7 results its x2 times faster. Its possible that XP driver for MB could use only PCI-E gen2 instead of gen3 for Win7?\n\nLook at this - in Win 7 - is speed - 2 GB/s - as no system disk\n\n[https://www.dropbox..../Adata.png?dl\u003d0](https://www.dropbox.com/s/66yln8jo20tj64b/Adata.png?dl\u003d0 \"External link\")\n\nIn Win7 as system disk - 1.6 GB/s  \n[https://www.dropbox.....08.19.jpg?dl\u003d0](https://www.dropbox.com/s/lg1fk18p9qzxahv/2019-04-22%2017.08.19.jpg?dl\u003d0 \"External link\")\n\nOr can how partition is made - size of blocks such difference? I can test if performance of XP partition in Win7 is the same or not.. I also dont fully understand, how its possible that there is such difference between system and not system partition.. its strange, im not aware some big disk usage during testing by other application, but these NVME caches are magic. I read in some review etc that also ammount of free space has some impact.. so maybe at the start of testing disc was empty and now its not. I would be suprised if these Adata discs would have some flaws..\n\nMBs - ok, thanks.\n\n951 - ok.\n\nX58 - Win 7 x64 would be also ok? What has Apex X so special taht is able to boot XP with legacy? Are able to recognize, what MB feature is needed like INT 13 etc?\n\n**Edited by ruthan, 29 April 2019 - 09:43 PM.**\n"
    },
    {
      "id": "210923",
      "timestamp": "2019-04-29T21:45:58+00:00",
      "author": "Dietmar",
      "content": "I do not know,\n\nwhat is special in this Asus Apex X Bios.\n\nI only noticed, that it has a lot of other advantages also.\n\nHere, it is the work together with the Oprom Bios of the 950 pro under XP,\n\nDietmar\n\nPS: Win7 64 I have not tested on mbr with 950 pro. I think it will work on any compi.\n\nThe nvme 1.3 driver from Kai is faster than any other nvme driver, which I tested, on any OS.\n\n"
    },
    {
      "id": "210935",
      "timestamp": "2019-05-01T19:37:20+00:00",
      "author": "Dietmar",
      "content": "Today I make some fun with the new\n\nicy box ib-1817m-c31.\n\nYou can put an nvme M.2 device\n\nin it, no matter what size, how many GByte.\n\nI put an Samsung 960 pro 1 TB in it.\n\nNow it is like an ultrafast, big USB :smile: stick\n\nin XP SP3. Getting warm.\n\nDont forget to pull up BOTH plastic folies\n\nfrom the heatpad.\n\nBut I noticed also some not nice things:\n\nYou need a very good USB 3.2 cable,\n\nto make this rate come true.\n\nAnd, your USB 3.2 slot needs to be able\n\nto give a lot of power.\n\nOn the website from icy I do not found any information\n\nabout powerconsumption.\n\nNow I know why. The icy fails on asrock fatal1ty z370 gaming k6\n\nbecause not enough power. It connects, disconnect again and again\n\nand later I have problems to start the motherboard again,\n\nI think, because Bios cries about too much power need via USB 3.2.\n\nAlso on my compi for daylie work (X58 :smile: )\n\nwith a USB 3.0 Pci-e slot card,\n\nthe icy shows 0.1 Mb/s, because of not enough power.\n\nI try it also with an USB hub with external power, did not change situation\n\nDietmar\n\nPS: Photo is from EVGA z390 dark motherboard,\n\nit gives enough power for the nvme disk in the icy case.\n\nEDIT: Powerconsumption depends very much on\n\nthe used nvme SSD. Its range is from \\\u003c0.5Watt - \\\u003e10 Watt.\n\n[![b10080-1556739296.jpg](https://www.bilder-upload.eu/thumb/b10080-1556739296.jpg)](https://www.bilder-upload.eu/bild-b10080-1556739296.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210944",
      "timestamp": "2019-05-02T23:45:06+00:00",
      "author": "Dietmar",
      "content": "Now I put the Optane 32 GB\n\nin the icy case\n\nand do USB boot with it\n\non the Asrock motherboard.\n\nThis is possible, because\n\nthis Optane needs less than 2 Watt.\n\nThis XP is fast, you cant imagine\n\nDietmar\n\nPS: USB boot from nvme device ![:cheerleader:](http://reboot.pro/public/style_emoticons/default/cheerleader.gif) ![:cheerleader:](http://reboot.pro/public/style_emoticons/default/cheerleader.gif) ![:cheerleader:](http://reboot.pro/public/style_emoticons/default/cheerleader.gif)\n\n[![5e1d98-1556840468.jpg](https://www.bilder-upload.eu/thumb/5e1d98-1556840468.jpg)](https://www.bilder-upload.eu/bild-5e1d98-1556840468.jpg.html \"External link\")\n\n"
    },
    {
      "id": "210949",
      "timestamp": "2019-05-03T12:00:01+00:00",
      "author": "ruthan",
      "content": "Dietmar, how ended you X79 experiments - still no go?  \n\nIm thinkit about test it with GA-X79-UP4..\n\n"
    },
    {
      "id": "210950",
      "timestamp": "2019-05-03T12:24:06+00:00",
      "author": "Dietmar",
      "content": "@ruthan,\n\nin my summerholidays I write the driver\n\nnvme.sys new for scsiport.\n\nThen, nvme boot will work via ntbootdd\n\nfor XP SP3 for the Sabertooth X79 board.\n\nI for myself have not the possibilty,\n\nto integrate generic NVMEInt13 \\*.dxe file\n\nto the Bios\n\nDietmar\n\n"
    },
    {
      "id": "210957",
      "timestamp": "2019-05-03T19:50:57+00:00",
      "author": "Dietmar",
      "content": "Icy box mechanical writeprotected,\n\nwith EWF enabled, USB boot from nvme optane 32 GB, on Asrock board\n\nnice :smile:\n\nDietmar\n\n[![ewffff.png](https://i.ibb.co/6Zd7Tdt/ewffff.png)](https://ibb.co/6Zd7Tdt \"External link\")\n\n"
    },
    {
      "id": "210958",
      "timestamp": "2019-05-04T10:07:42+00:00",
      "author": "ruthan",
      "content": "It this optane speed real? Its way faster than even specs.\n\nWhat is exact model, i tried to find some to buy and there are lots of different models of Optane 32 GB, i dunno which one to buy?\n\n"
    },
    {
      "id": "210959",
      "timestamp": "2019-05-04T11:01:17+00:00",
      "author": "Dietmar",
      "content": "No, some files from optane are load to ram via EWF.\n\nBecause of this and only on FAT32\n\nwriteprotect boot of XP is possible\n\nDietmar\n\n"
    },
    {
      "id": "210983",
      "timestamp": "2019-05-06T18:23:50+00:00",
      "author": "ruthan",
      "content": "I wonder do you have some X79 MB with 2 PS/2 ports or its PS/2 Y cable working for some PS/2 combo port on X79. I know that some MBs, supporting it but they are Z97 and Z170 newer ones, to my Asrock Z97, it was added by Bios patched by Asrock, when i asked for it.\n\nBTW i checked X79 pure Dos sound and its working fine with Yamahas and Aureals, when you disable right things for Dos Bios boot profile.\n\n"
    },
    {
      "id": "210984",
      "timestamp": "2019-05-06T18:31:14+00:00",
      "author": "Dietmar",
      "content": "On the Sabertooth X79 board,\n\nonly the keyboard works in PS/2.\n\nSo, you have to add an USB mouse too.\n\nI looked, if I found my *serial* :smile: mouse for COM1 from 1997,\n\nbut did not find\n\nDietmar\n\n"
    },
    {
      "id": "210985",
      "timestamp": "2019-05-06T18:41:27+00:00",
      "author": "ruthan",
      "content": "I like PS/2 because is more fail proof and its and its working well with pure Dos and Win98. There are some PCI PS/2 adapter, but i never heard that someone made them working with newer MBs.\n\n"
    },
    {
      "id": "211146",
      "timestamp": "2019-05-15T15:39:10+00:00",
      "author": "ruthan",
      "content": "\u003e Today I make a new acpi.sys for XP SP3 32 bit.  \n\u003e It works on AMD, Intel motherboards,  \n\u003e for all languages,\n\nHow to use it with already installed system within MPS mode ? Just rewrite the file and reboot with ACPI HAL line through boot.ini file?\n\n"
    },
    {
      "id": "211149",
      "timestamp": "2019-05-15T16:58:08+00:00",
      "author": "Dietmar",
      "content": "@ruthan\n\nI tried this, but without success.\n\nOnly the way vice versa (Acpi-\\\u003eMPS) works for me.\n\nAnd even in this, I do not come back.\n\nA lot of values in registry changed,\n\nwhen you switch between them\n\nDietmar\n\n"
    },
    {
      "id": "211166",
      "timestamp": "2019-05-15T21:19:18+00:00",
      "author": "ruthan",
      "content": "For Z170 MB it worked me, with patched bios. With Z370, i can at least boot with ACPI, after MPS installation, but i still have that some programs are not working issues - probably broken timer.\n\nSo that new acpi file is different than modded from registry point of view?\n\nIm simply using this boot.ini line:  \nmulti(0)disk(0)rdisk(0)partition(1)\\\\WINDOWS\u003d\"Microsoft Windows ACPI\" /noexecute\u003dAlwaysOff /fastdetect /KERNEL\u003dntkrpamp.exe /HAL\u003dHalmacpi.dll\n\n"
    },
    {
      "id": "212599",
      "timestamp": "2019-09-06T00:56:02+00:00",
      "author": "Zero3K",
      "content": "The driver the OP linked to doesn\u0027t work for me in VMWare Workstation Player 15 or the latest version of VirtualBox 6. I hope that it can be fixed so it does work in them soon. I am using the driver under Windows Server 2003 x86 with all of the upgrades applied (along with the hotfix the OP mentioned).\n\n"
    },
    {
      "id": "212603",
      "timestamp": "2019-09-06T08:21:55+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e The driver the OP linked to doesn\u0027t work for me in VMWare Workstation Player 15 or the latest version of VirtualBox 6. I hope that it can be fixed so it does work in them soon. I am using the driver under Windows Server 2003 x86 with all of the upgrades applied (along with the hotfix the OP mentioned).\n\nI don\u0027t understand. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nThe NVME driver is a \"hardware\" driver for NVME devices.\n\nIn a VM there isn\u0027t any NVME device (unless of course the VM emulates also a NVME device, which I doubt).\n\n:duff.\n\nWonko\n\n"
    },
    {
      "id": "212604",
      "timestamp": "2019-09-06T08:24:38+00:00",
      "author": "Zero3K",
      "content": "VMWare Workstation Player 15 (and its other editions) and VirtualBox both support using NVMe as the controller type (along with IDE/SCSI/SATA).\n\n"
    },
    {
      "id": "212609",
      "timestamp": "2019-09-06T12:26:42+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e VMWare Workstation Player 15 (and its other editions) and VirtualBox both support using NVMe as the controller type (along with IDE/SCSI/SATA).\n\nI understand, but that remains a \"virtual\" controller.\n\nDoes the VM actually expose it as \"PCI\\\\CC_010802\" (or whatever is in the nvme.inf)?\n\nOr, if you prefer, your \"it doesn\u0027t work for me\" means \"the driver starts and hooks the (virtual) device properly but I cannot access the device contents\" or \"the driver does not hook the device and I cannot see it at all\"?\n\nAnd are you actually attaching to the VM a \"real\" NVME device (as \\\\\\\\.\\\\physicaldrive) or are you attaching an image (as it is normally done) and you want to mount it to a NVME controller (if the second, why exactly?).\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "212610",
      "timestamp": "2019-09-06T13:11:08+00:00",
      "author": "Zero3K",
      "content": "Here\u0027s a screenshot of what Device Manager in the Windows 7 x64 VM (ran using VMWare Workstation 15) shows:\n\n![mpmSJ.png](https://u.teknik.io/mpmSJ.png)\n\nWhat I mean by it not working for me in Windows Server 2003 x86 is that the Storage Controller that it shows up as shows as a ? icon with a status of \"code 10\" when there\u0027s no NVMe devices for it to connect to (when there\u0027s one, it freezes on boot or when trying to add it while the OS is loaded). I am thinking that compiling an x86 version by using its source code isn\u0027t working properly.\n\n"
    },
    {
      "id": "212612",
      "timestamp": "2019-09-06T14:46:19+00:00",
      "author": "Wonko the Sane",
      "content": "Ok, I thought I was lost before, and now it is worse.\n\nThere are two versions of the driver, a 1.3 and a 1.5:\n\n[https://sourceforge....3-server/files/](https://sourceforge.net/projects/nvme-for-windows-2003-server/files/ \"External link\")\n\nboth contain both the x86 and x64 version, but you recompiled from sources?\n\nwhich ones?\n\nEven if it seems like I am asking you random questions, they are not as random as they seem, they are an attempt to understand the issue (and/or make it more clear to other members reading the topic), it would probably be of help if you could actually answer them.\n\nIf you have two versions of the SAME driver version, pre-compiled, i.e. \"as downloaded from Sourceforge\" in the SAME version od OS, and the x86 version \"doesn\u0027t work\" whilst the x64 \"works\", post the screenshots of BOTH versions (the one that is working and the one that is not) of device manager sorted \"by connection\".\n\nCan you try the x86 version on a Windows 7 x86?\n\nI mean, is the issue Windows 2003+Nvme.sys+x86 only or is it also Winfows7+Nvme.sys+x86 (but not Windows 7+nvme.sys+x64)?\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "212614",
      "timestamp": "2019-09-06T20:12:03+00:00",
      "author": "Zero3K",
      "content": "I cannot get the compiled version of the Windows Server 2003 driver that is available in the bin directory to work on Windows Server 2003 (both the x86 and x64 versions do not work). I tried v1.5 since its the latest version.\n\nEDIT: The Windows Server 2003 driver does work in Windows 7 x64 though. So, I am thinking that it will also work in Windows 7 x86.\n\n"
    },
    {
      "id": "212628",
      "timestamp": "2019-09-07T13:18:28+00:00",
      "author": "Wonko the Sane",
      "content": "Also, try the 1.3 version (even if it is older it is seemingly more widely compatible):\n\n[http://reboot.pro/to...e-2#entry207304](http://reboot.pro/topic/21812-community-ofa-nvme-15-storport-miniport-for-windows-server-2003-r2-sp2/page-2#entry207304 \"\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "212629",
      "timestamp": "2019-09-07T13:30:19+00:00",
      "author": "Zero3K",
      "content": "I just tried v1.3. It doesn\u0027t work either. So, it seems to be a bug with virtual NVMe drives.\n\n"
    },
    {
      "id": "212633",
      "timestamp": "2019-09-07T19:52:28+00:00",
      "author": "Zero3K",
      "content": "How do I enable its debug output so I can help get the issue fixed?\n\n"
    },
    {
      "id": "212636",
      "timestamp": "2019-09-08T16:05:50+00:00",
      "author": "Zero3K",
      "content": "I asked another developer who forked the mirror of its original source code if he could get it to work on Windows Server 2003. You can see it at [https://github.com/c...vmewin/issues/1](https://github.com/csm10495/nvmewin/issues/1 \"External link\").\n\n"
    },
    {
      "id": "212800",
      "timestamp": "2019-09-26T20:44:57+00:00",
      "author": "RTS",
      "content": "Hello from Japan.  \nI have a question.  \nI want to use NVME SSD with XP SP3 32bit.  \n(I prepared a Plextor M8PEY with Oprom)  \nI read the forum, but there is a point that doesn\u0027t work.  \nHow to install storport.sys on running XP  \n(storport.sys version 5.2.3790.4173)  \nThe KB943545 patch is for windows2003 server,  \nSetup will not start.  \nJust copy the storport.sys file to the folder?  \nC: \\\\ WINDOWS \\\\ system32 \\\\ drivers  \nIs there any other special operation method required?\n\n"
    },
    {
      "id": "212801",
      "timestamp": "2019-09-26T21:28:45+00:00",
      "author": "Dietmar",
      "content": "Hi,\n\nno more operation is after this copy of storport.sys needed.\n\nWhen XP recognices a new device in device manager,\n\njust point it to the folder with nvme.sys and nvme.inf in it\n\nDietmar\n\nPS: On some Bios versions it does not work for unknown reason.\n\nTo change the Bios to an older version can help.\n\n"
    },
    {
      "id": "212802",
      "timestamp": "2019-09-26T22:36:04+00:00",
      "author": "RTS",
      "content": "Thank you for the wonderful reply!  \nUnfortunately  \nIt doesn\u0027t seem to work well in my environment.  \nI would like to change the BIOS version.  \nIf you have any advice, please.  \nMy PC specification  \nCPU AMD Phenom II X4 B50  \nMotherboard Gigabyte GA-MA785GT-UD3H-rev-13  \nOS Windows XP Pro SP3  \nNVME SSD Plextor M8PEY  \n(NVMe PCI Express PCIe HHHL: Oprom- UEFI and Legacy boot suport)  \nthankyou for regards  \n![dotup.org1954897.jpg](https://dotup.org/uploda/dotup.org1954897.jpg)\n\n"
    },
    {
      "id": "213824",
      "timestamp": "2020-01-18T18:56:43+00:00",
      "author": "ruthan",
      "content": "Any progress for X79? Summer is gone for long time.\n\n"
    },
    {
      "id": "214788",
      "timestamp": "2020-05-21T15:13:50+00:00",
      "author": "uzfclbja",
      "content": "Installed Intel 760p on ASUS 970 Pro/Gaming AURA Mobo and Windows 2003.\n\n[https://ibb.co/PrWC7Jh](https://ibb.co/PrWC7Jh \"External link\")\n\nHave extremely low 4KiB scores: ca 1.5, which makes NVMe drive worse than HDD when launching apps.\n\nSame with 1.5 driver.\n\nIs there a way to solve this?\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "214792",
      "timestamp": "2020-05-22T10:58:06+00:00",
      "author": "antonino61",
      "content": "As wonko pointed out, i can confirm that 1.3 is more compatible than 1.5, as I never got around to making the latter work. the earlier does work; I do not know to what extent it is \"better\" than the standard one chosen by the system, though.\n\n"
    },
    {
      "id": "214804",
      "timestamp": "2020-05-24T09:53:37+00:00",
      "author": "Dietmar",
      "content": "Hi Kai,\n\ndo you think that it is possible to enable TRIM support under XP SP3\n\nwith the OFA nvme driver?\n\nI know, that you disable some functions from Win7 in your nice nvme.sys\n\nfor XP, Server2003.\n\nCan some of those function set to life again for to support TRIM with this storpor.sys from Win8.1\n\nhave a nice day\n\nDietmar\n\n[https://ufile.io/q2z963ju](https://ufile.io/q2z963ju \"External link\")\n\n"
    }
  ]
}