{
  "id": "18182",
  "title": "UEFI MULTI - Make Multi-Boot USB-Drive",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "168077",
      "timestamp": "2013-02-18T06:23:42+00:00",
      "author": "wimb",
      "content": "![Posted Image](http://reboot.pro/index.php?app\u003ddownloads\u0026module\u003ddisplay\u0026section\u003dscreenshot\u0026id\u003d279)\n**File Name** : UEFI MULTI - Make Multi-Boot USB-Drive  \n**File Submitter** : [wimb](http://reboot.pro/index.php?showuser\u003d9517 \"\")  \n**File Submitted** : 18 Feb 2013  \n**File Updated** : *03 Aug 2021*   \n**File Category** : [Boot tools](http://reboot.pro/index.php?app\u003ddownloads\u0026showcat\u003d7 \"\")  \n\nDownload Encrypted with password for UEFI_MULTI-XX-E.zip is **bootwimb**   \nUse R-mouse 7-zip menu to Extract here  \n-  \n**Download:** [USB Format Tool](https://github.com/wimbrts/USB_FORMAT/releases \"External link\") and [UEFI_MULTI](https://github.com/wimbrts/UEFI_MULTI/releases \"External link\") at [wimb GitHub](https://github.com/wimbrts \"External link\")  \n-  \n**More Info:** at MSFN Forum in [USB Format Tool and UEFI MULTI](https://msfn.org/board/topic/181311-usb-format-tool-and-uefi_multi/ \"External link\")  \n-  \n**More Info:** [Install Windows 10 from USB after booting with WIM or VHDX](http://reboot.pro/topic/21883-install-windows-10-from-usb-after-booting-with-wim-or-vhdx/?p\u003d208164 \"\") and [UEFI_MULTI](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d208639 \"\")  \n-  \n**Unattended:** [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003dcc719e26bb51c749059f938e797dcf82\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16971 \"\") [**Unattended_Eng.zip**](http://reboot.pro/index.php?s\u003dcc719e26bb51c749059f938e797dcf82\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16971 \"\") **3.69KB** 45 downloads  \n-  \n**YouTube Video:** **[Make VHDX](https://youtu.be/T3hqtiH6ufM \"External link\")** and**[Make USB Win10](https://www.youtube.com/watch?v\u003dGm4TlS_1Tzk \"External link\")** and**[Make USSD Win10](https://youtu.be/-RWwCraZjbA \"External link\")** and**[USB AIO Linux](https://youtu.be/LI57gVXcYBg \"External link\")** and [UEFI_MULTI-Demo](https://youtu.be/XVDlF6irrl0 \"External link\")  \n\n**USB Format Tool - Make Bootable USB Drive with MBR and 2 Partitions**  \n**USB Multi-Boot of Linux ISO + Windows 10 VHD + Win10XPE in BIOS Or UEFI Secure mode**  \n\n1 - Format USB Drive with MBR and 2 Partitions \u003d Active FAT32 + NTFS  \n2 - UEFI_MULTI can Add VHD or PE WIM File Booting from RAMDISK  \n3 - Copy Linux ISO files to folder images on FAT32 - Boot UEFI Grub2 and BIOS Grub4dos  \n4 - USB drive Booting with Windows Boot Manager Menu in BIOS or UEFI Mode  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**Linux ISO Info:**  \nUEFI Secure boot support requires Format Drive using Mint UEFI Or Super UEFI as Grub2 Manager  \nCopy your Linux ISO files to folder **images** on FAT32 USB Boot drive U-BOOT  \nSupported filenames for Linux ISO in folder images are:  \n\nlinuxmint.iso and kali-linux.iso  \nruntimelivecd.iso and knoppix.iso  \nubuntu.iso and Porteus.iso  \n\n**Download:** [Linux-Mint](https://linuxmint.com/download.php \"External link\") and [Knoppix-Live](https://www.runtime.org/data-recovery-live-cd.htm \"External link\") and [Ubuntu](https://ubuntu.com/download/desktop \"External link\") and [Porteus x86_64](http://www.mirrorservice.org/sites/dl.porteus.org/ \"External link\") and [Kali 64-bit Live](https://www.kali.org/downloads/ \"External link\")  \n\nRename your Linux ISO files so that they correspond to supported filenames  \n\nUEFI mode - **Mint UEFI** Grub2 booting with FAT32 file \\\\EFI\\\\Boot\\\\BOOTx64.EFI and **\\\\Boot\\\\grub\\\\grub.cfg** and **\\\\Boot\\\\grub\\\\grub_Linux.cfg**   \n\nUEFI mode - **Super UEFI** Grub2 booting with FAT32 file \\\\EFI\\\\Boot\\\\BOOTx64.EFI and **\\\\grub\\\\grub.cfg** and **grub_Linux.cfg** Menu  \nMBR BIOS - a1ive Grub2 installed in MBR booting with **\\\\grub\\\\grub.cfg** and **grub_Linux.cfg** Menu  \n\n**Grub4dos** is used for booting in MBR **BIOS mode** using Menu created with **menu.lst** and **menu_Linux.lst**  \n\nIn case UEFI Grub2 is not available as Boot option in your F8 Boot Menu then you need to use BOOTICE to Add UEFI entry.  \nUnneeded for USB-Stick, but UEFI Grub2 boot entry is easily lost in case of Portable SSD.  \nSelect as UEFI Boot entry the Linux Mint Grub2 file \\\\EFI\\\\Boot\\\\BOOTx64.EFI  \n\n[![UEFI_Grub2.png](http://reboot.pro/uploads/monthly_12_2018/post-9517-0-17791600-1546174935_thumb.png)](http://reboot.pro/uploads/monthly_12_2018/post-9517-0-17791600-1546174935.png \"UEFI_Grub2.png - Size: 130.9KB\"){#ipb-attach-url-16342-0-12217700-1675916445}   \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**a1ive Grub2 File Manager Info:**  \nNot needed since booting straight with Linux ISO using Grub4dos in BIOS mode and Grub2 in UEFI mode is preferred.  \nBut if you prefer support of [a1ive Grub2 File Manager](https://github.com/a1ive/grub2-filemanager/releases \"External link\") - Download Addons at [wimb GitHub](https://github.com/wimbrts \"External link\")  \nUse R-mouse 7-zip menu to **Extract here** will Add the content of addon to existing folder and confirm Overwrites with yes  \n\nIn x64 program use **Super**UEFI**** as Grub2 Manager setting for support of a1ive Grub2 File Manager  \nIn this way the files of [a1ive Grub2 File Manager](https://github.com/a1ive/grub2-filemanager/releases \"External link\") and [Super-UEFIinSecureBoot-Disk_minimal_v3](https://github.com/ValdikSS/Super-UEFIinSecureBoot-Disk/releases \"External link\") ([more info](https://habr.com/ru/post/446238/ \"External link\")) are Added to the USB Multi-Boot Drive  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**How to Boot from USB with AIO Boot**   \n- USB_FORMAT - Format USB Drive with MBR and 2 Partitions \u003d Active FAT32 + NTFS  \n- Download [AIOBoot-v0.9.9.8.7z](https://github.com/nguyentumine/AIO-Boot/releases \"External link\") - Unpack and Copy content of folder AIOBoot-v0.9.9.8 to USB FAT32 and overwrite existing UEFI Boot files  \n- On USB run AIOCreator.exe - Select Integration Linux OS and your Linux ISO  \n- UEFI_MULTI will Keep AIO UEFI files and Add a1ive Grub2 File Manager to AIO\\\\grubfm and Add Boot Manager entry \\\\AIO\\\\grub\\\\grub2win  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**UEFI_MULTI - Make Multi-Boot USB-Drive**  \n\u003d  \n\n\u003d  \nWin8.1SE x64 boot.wim of size 400 MB is Universal WIM Boot Image file for booting BIOS and UEFI computers  \nThanks to **ChrisR** for making Win8.1SE - [http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")  \n\n[Click here to download this file](http://reboot.pro/index.php?app\u003ddownloads\u0026showfile\u003d279 \"\")   \n"
    },
    {
      "id": "168079",
      "timestamp": "2013-02-18T07:11:29+00:00",
      "author": "wimb",
      "content": "\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**\\*\\*\\* UEFI MULTI - Make Multi-Boot USB-Drive \\*\\*\\***   \n\n**Booting with Boot Manager Menu and using Boot Image files - VHD IMG ISO and WIM**   \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\nUEFI_MULTI.exe is program to make Multi-Boot USB-Drive to boot computers having BIOS or UEFI firmware  \n\nRun UEFI_MULTI and Extract to simple path\n\n**In Win 7/8 OS Set User Account Control Off and Reboot**   \n**For UEFI Boot support then Windows 8x64 or 10x64 is needed as operating system**\n\nMore Info including Windows 10 is here [http://www.msfn.org/...comment\u003d1120509](http://www.msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/?do\u003dfindComment\u0026comment\u003d1120509 \"External link\")\n\nand [http://reboot.pro/to...multi/?p\u003d168077](http://reboot.pro/topic/18182-uefi-multi/?p\u003d168077 \"\")  \nand [http://reboot.pro/to...t-usb-harddisk/](http://reboot.pro/topic/17877-uefi-windows-8-bios-grub4dos-multiboot-usb-harddisk/ \"\")  \n\nDownload - [http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\nThe zip file is protected with password **bootwimb**   \n\nUEFI_MULTI - Make Multi-Boot USB-Drive  \n\n\u003cbr /\u003e\n\n\u003d  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**Section 1. - Prepare FAT32 USB-Stick Or MBR USB-Harddisk for Booting with Boot Manager Menu**\n\n**In Win 7/8 OS Set User Account Control Off and Reboot**   \n**For UEFI Boot support then Windows 8x64 or 10x64 is needed as operating system**   \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\nUFD_FORMAT.exe - Tool to format USB-stick for Booting with Boot Manager Menu on BIOS or UEFI computer\n\nUse UFD_FORMAT in 7/8/10 OS to format USB-Stick with FAT32 and for Booting with Boot Manager Menu  \nFor fast booting into RAMDISK then USB 3.0 is advised e.g. use Kingston 100G3 32 GB  \n\nMore Info - [http://reboot.pro/to...140-ufd-format/](http://reboot.pro/topic/19140-ufd-format/ \"\")\n\n**FAT32 has size limit of 32 GB for Windows Format -**  \nUse 2nd Partition checkbox when USB-stick has size more than 32 GB, so that first Partition size is below the limit of 32 GB  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\nOr Prepare USB-Harddisk to have MBR and 3 Primary partitions\n\nMore info on using **DiskPart** script is here [http://www.msfn.org/...comment\u003d1120509](http://www.msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/?do\u003dfindComment\u0026comment\u003d1120509 \"External link\")  \n\nPreferred is to use Portable USB-harddisk e.g. Western Digital 500 GB Elements SE 2.5\" Or Samsung Portable S2  \n\nPrepare USB-Harddisk to have MBR and 3 Primary partitions  \n- Boot partition - Primary with FAT32 Format and Size e.g. 20 GB - Set Active  \n- System partition - Primary with NTFS Format and Size e.g. 100 GB  \n- Data partition - Primary with NTFS Format and Size e.g. rest of USB-harddisk  \n\nUse of the 3 partitions will be  \n- Boot FAT32 - for Boot files and Win8.1SE x64 boot.wim file and with folder images for ISO and other small Boot Image files  \n- System NTFS - for Win 7/8/10 VHD files and for Portable XP VHD running Life from USB  \n- Data NTFS - for PStart folder with Portable Apps and for all Windows Setup ISO files used by WinNTSetup3 to Install Windows on local harddisk\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\n**Section 2. - Prepare Boot Image files - 8.1SE x64 WIM or 8.1 x64 VHD Or IMG Or ISO file**\n\nMore Info on how to make Win10PE and Win8.1SE wim files is found here\n\n[http://www.msfn.org/...comment\u003d1120509](http://www.msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/?do\u003dfindComment\u0026comment\u003d1120509 \"External link\")\n\nDownload Win8.1SE from [http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")\n\nDownload Win 8.1 Enterprise Evaluation ISO from [http://technet.micro...r/hh699156.aspx](http://technet.microsoft.com/en-us/evalcenter/hh699156.aspx \"External link\")  \n9600.16384.WINBLUE_RTM.130821-1623_X64FRE_ENTERPRISE_EVAL_EN-US-IRM_CENA_X64FREE_EN-US_DV5.ISO  \n\nUse imdiskinst.exe to Install ImDisk driver (if not present already).  \nMount 8.1 x64 Setup ISO file in ImDisk Virtual drive - use Menu via R-mouse on ISO file  \n\nRun Win81SE82_Builder.exe - Select Source Drive with mounted ISO and use Play to make Win8.1SE x64 boot.wim  \nIn UEFI_MULTI.exe you will use boot.wim in ISO\\\\WIM\\\\sources and file boot.sdi from folder ISO\\\\WIM\\\\Boot\n\n**Additional Info for making other Boot Image files:**   \nThe XP/7/8 Mini Windows VHD\u0027s of 1.2 - 2.5 GB are loaded from USB into RAMDISK and can be made according to  \n[http://reboot.pro/to...ct-make-mini-8/](http://reboot.pro/topic/18467-vhd-w8-compact-make-mini-8/ \"\")  \n[http://reboot.pro/to...ct-make-mini-7/](http://reboot.pro/topic/18593-vhd-w7-compact-make-mini-7/ \"\")  \n[http://reboot.pro/to...tall-xp-in-vhd/](http://reboot.pro/topic/18547-vhd-xp-setup-install-xp-in-vhd/ \"\")  \n[http://reboot.pro/to...t-make-mini-xp/](http://reboot.pro/topic/18657-vhd-xp-compact-make-mini-xp/ \"\")  \n\n\u003cbr /\u003e\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**Section 3. - UEFI_MULTI.exe is used to make Multi-Boot USB-Drive**   \n\n0. Connect USB-Drive and start computer with Windows 7/8/10 - x64 OS version  \n1. Run UEFI_MULTI.exe  \n2. Select USB Target Boot Drive - FAT32 needed for UEFI support  \n3. Select USB Target System Drive (for USB-Stick use same as Boot Drive)  \n4. Select Boot Image File - Win8.1SE x64 - Select boot.wim in ISO\\\\WIM\\\\sources  \nVHD is Copied always to NTFS System Drive - WIM and ISO are copied to FAT32 Boot Drive  \n5. Click GO to make Multi-Boot USB-Harddisk  \n6. You can use UEFI_MULTI.exe several times to Add more Boot Image files or to Add extra Source Folder content  \nOption to Select Source Folder UEFI_MULTI\\\\MULTI_BOOT for Copy to Boot Drive  \n\n\u003d\u003d \u003d\u003d\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nBOOT_IMG can make Grub4dos Menu on Boot Drive for VHD Image Files copied to Target System Drive.  \nFix XP or Win 7/8 VHD for booting from USB-drive by using USB_XP_Fix.exe or USB_W78_Fix.exe\n\n**More Info for Install of Windows:**\n\n[http://www.msfn.org/...comment\u003d1120509](http://www.msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/page-2#entry1117324 \"External link\")\n\nDownload **Media Creation Tool** and use it to make USB-stick bootable in UEFI mode with Setup for Win10_x64\n\nor to make Win10_x64 ISO file that can be used with WinNTSetup for install of Windows 10 on existing GPT partioned harddisk.\n\n[https://www.microsof...nload/windows10](https://www.microsoft.com/en-us/software-download/windows10 \"External link\")\n\nYou can Install Win10 x64 direct in 25 GB VHD located on NTFS partition of portable USB-harddisk having MBR and FAT32 boot drive.  \n[http://www.msfn.org/...-2#entry1119716](http://www.msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/page-2#entry1119716 \"External link\")  \n\nAfter booting with WinPE from USB, then use WinNTSetup_x64.exe\n\nand Win10_x64 ISO file to prepare VHD or internal GPT partitioned harddisk drive for Install of Windows 10 x64\n\n[http://www.msfn.org/...inntsetup-v386/](http://www.msfn.org/board/topic/149612-winntsetup-v386/ \"External link\")\n\nAfter booting from USB you can use portable App WinNTSetup to mount the Setup ISO in ImDisk Virtual Drive.  \nWinNTSetup will prepare local harddisk for Install of XP/7/8/10  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**Section 4. - UEFI Secure Boot - Multi-Boot of Linux Fedora-18 + Windows 8 from USB-harddisk (option)**   \n\nDownload Fedora-18-x86_64-Live-Desktop.iso from [http://fedoraproject.org/get-fedora](http://fedoraproject.org/get-fedora \"External link\")  \nDownload and use liveusb-creator-3.11.7-setup.exe from [https://fedorahosted...iveusb-creator/](https://fedorahosted.org/liveusb-creator/ \"External link\")  \nInfo [http://docs.fedorapr..._USB_Media.html](http://docs.fedoraproject.org/en-US/Fedora/18/html/Installation_Guide/Making_USB_Media.html \"External link\")  \n\nFirst prepare Fedora 18 LIVE USB-stick with files vmlinuz0 and initrd0.img from isolinux copied to folder LiveOS  \nand using in grub.cfg the commands linuxefi and initrdefi and root\u003dlive:LABEL\u003dLIVE  \n\nThen prepare Multi-Boot of Fedora-18 + Windows 8 from USB-harddisk as follows.\n\n**Add Grub2 EFI Boot Manager for UEFI booting of Linux Fedora-18 or Parted Magic**   \n\nIn UEFI_MULTI.exe use Add Grub2 EFI Boot Manager for UEFI booting of Linux Fedora-18 or Parted Magic  \nExisting file /efi/boot/bootx64.efi of Windows 8/10 is renamed as 8bootx64.efi to enable Multi-Boot of Win8/10 and Linux.  \nFolder efi with Fedora-18 Secure Boot files is copied from UEFI_MAN to USB Boot Drive.  \n\nFedora-18 Secure Boot files efi\\\\boot\\\\BOOTX64.efi and efi\\\\boot\\\\grubx64.efi are used  \nand we use Fedora vmlinuz0 and initrd0.img in LiveOS folder of Fedora-18 copied to USB Boot Drive.  \nThe name of the USB Boot Drive with LiveOS folder must be specified and is in my case 2_BOOT  \n\n**efi\\\\boot\\\\grub.cfg**\n\n\u003e set timeout\u003d10\n\u003e set default\u003d0  \n\u003e\n\u003e menuentry \u0027Fedora-18 LIVE USB 2_BOOT\u0027 --class fedora --class gnu-linux --class gnu --class os {  \n\u003e linuxefi /LiveOS/vmlinuz0 root\u003dlive:LABEL\u003d2_BOOT ro rd.live.image rhgb   \n\u003e initrdefi /LiveOS/initrd0.img  \n\u003e }  \n\u003e\n\u003e menuentry \"Parted Magic 64\" --class gnu-linux --class gnu --class os {  \n\u003e linuxefi /pmagic/bzImage64  \n\u003e initrdefi /pmagic/initrd.img  \n\u003e }  \n\u003e\n\u003e menuentry \"Windows 8 x64 EFI\" {  \n\u003e chainloader /efi/boot/8bootx64.efi  \n\u003e }\n\nWindows 8/10 should NOT be default.\n\nFor booting Parted Magic Linux it is needed to copy pmagic folder to USB Boot Drive and in UEFI to Disable Secure Boot  \n\nBooting in BIOS mode with Fedora LiveOS folder on USB partition with LABEL 2_BOOT  \nthen we can use Grub4dos with entry in menu.lst  \n\n**menu.lst**\n\n\u003e title Fedora-18 LIVE USB 2_BOOT\n\u003e find --set-root /LiveOS/vmlinuz0  \n\u003e kernel /LiveOS/vmlinuz0 root\u003dlive:LABEL\u003d2_BOOT ro rd.live.image quiet rhgb   \n\u003e initrd /LiveOS/initrd0.img\n\nrhgb \u003d redhat graphical boot - This is a GUI mode booting screen with most of the information hidden\n\nquiet \u003d hides the majority of boot messages before rhgb starts. These are supposed to make the common user more comfortable.  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nAfter the introduction of Windows 8 in september 2012, then new computers with Windows 8 or 10 are characterized\n\nby having a GPT partitioned harddisk booting in UEFI secure mode through efi folder on hidden FAT32 boot drive.\n\nXP is not compatible with GPT partitioning and is not compatible with UEFI boot mode.\n\nXP can be used on such computers by booting in BIOS mode with grub4dos from FAT32 USB-stick\n\nand using XP installed in VHD located on NTFS partition of second internal MBR patitioned harddisk.\n\n**Install of XP in VHD** is described here\n\n[http://reboot.pro/to...tall-xp-in-vhd/](http://reboot.pro/topic/18547-vhd-xp-setup-install-xp-in-vhd/ \"\")  \n\n**- Install of XP or Windows 7/8/10**   \n\n1. Boot from USB or from Network with Win8.1SE x64 boot.wim selected in Boot Manager Menu  \n2. Use portable App WinNTSetup_x64.exe and click tab - Windows XP or Windows 7/8  \n3. Select Installation files - Use R-mouse to mount XP/7/8 Setup ISO file in ImDisk Virtual Drive  \n4. Select Boot and Installation (Target) Drive for Install of XP/7/8/10  \n5. Quick Format Target Drive via F or via R-mouse menu in My Computer - use NTFS FileSystem  \n6. WinNTSetup3 - Setup will prepare Target Drive of local harddisk for Install of XP/7/8/10  \n7. Reboot from Target Drive and Install XP/7/8/10  \n8. Open Device Manager via R-mouse on My Computer  \n9. Install missing drivers XP/7 by using extracted DriverPacks  \n\nWin8.1SE - [http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")  \nUEFI_MULTI - [http://reboot.pro/to...t-usb-harddisk/](http://reboot.pro/topic/17877-uefi-windows-8-bios-grub4dos-multiboot-usb-harddisk/ \"\")  \nTiny PXE Server - [http://reboot.pro/fi...iny-pxe-server/](http://reboot.pro/files/file/303-tiny-pxe-server/ \"\")  \nPXE wimboot 8.1 - [http://reboot.pro/to...e-2#entry182393](http://reboot.pro/topic/19015-boot-mini-windows-vhd-from-network-via-ipxe/page-2#entry182393 \"\")  \nWinNTSetup3 - [http://www.msfn.org/...612-winntsetup-](http://www.msfn.org/board/topic/149612-winntsetup- \"External link\")  \nDriverPacks - [http://driverpacks.net/downloads](http://driverpacks.net/downloads \"External link\")  \nWin 8.1 Enterprise Evaluation x64 - [http://technet.micro...r/hh699156.aspx](http://technet.microsoft.com/en-us/evalcenter/hh699156.aspx \"External link\")  \n\nFor UEFI + BIOS booting from USB then Windows 8.1 x64 need to be used as Source.  \nThere are now three Universal solutions for booting from USB on UEFI + BIOS computers:  \n- Win8.1SE x64 boot.wim of size 400 MB booting from RAMDISK  \n- Portable W864USP1.vhd of size 3.5 GB booting as FILEDISK  \n- Full Windows 8.1 Pro installed in 15 GB VHD or any Windows 8.1 on USB SYSTEM partition of size 50 GB  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**How to Install Windows 7/8 in VHD and to Make Mini 7/8 VHD for booting from USB ?**   \n\n- Direct Install Windows 7 Ultimate or 8 Pro in a 15 GB VHD file on local harddisk created by WinNTSetup_x64.exe with Ctrl + Shift + V  \n- Boot Drive can be FAT32 or NTFS USB-Stick made with UFD_FORMAT.exe so that normal booting of the internal harddisk is not changed  \n\n1. Boot from USB or from Network with Win8.1SE x64 boot.wim selected in Boot Manager Menu  \n2. Use portable App WinNTSetup_x64.exe and click tab Windows 7/8  \n3. Select Installation files - Use R-mouse to mount 7/8 Setup ISO file in ImDisk Virtual Drive  \n4. Use WinNTSetup button VHD to Create 15 GB VHD file on local harddisk  \n5. Select Boot Drive (USB-Stick) and Installation Drive (mounted VHD file) for Install of 7/8  \nIn WinNTSetup3 - Tweaks - Select all System Tweaks so that UAC is off etc.  \n6. WinNTSetup3 - Setup will prepare VHD on local harddisk for Install of 7/8  \n7. Reboot from Boot Drive and Install 7/8 in VHD  \n8. Open Device Manager via R-mouse on My Computer  \n9. Install missing drivers by using extracted DriverPacks  \n\nAfter booting with Windows 7/8 VHD then Check to have Switched Off :  \nUAC + Defender + pagefile + System Restore + Hibernate + Windows Update + Action Center settings Disable ALL options  \n\nHibernate OFF is needed via cmd window with\n\n```\npowercfg -h OFF\n```\n\nInstall FiraDisk driver with R-mouse on firadisk.inf in makebt\\\\firadisk-driver- folder  \nThe 64-bit FiraDisk driver requires to boot with testsigning switched on  \n\nOpen Command Prompt as Administrator:\n\n```\nbcdedit /set testsigning on\n```\n\nReboot to activate testsigning - Info [http://msdn.microsof...y/ff553484.aspx](http://msdn.microsoft.com/en-us/library/ff553484.aspx \"External link\")  \n\n- After Install then Copy Windows 7/8 VHD file to USB and use USB_W78_Fix.exe to fix for booting from USB-drive  \n\n\u003cbr /\u003e\n\nInstall 7/8 in VHD and Make Mini 7/8 VHD for booting from USB  \n[http://reboot.pro/to...ct-make-mini-8/](http://reboot.pro/topic/18467-vhd-w8-compact-make-mini-8/ \"\")  \n[http://reboot.pro/to...ct-make-mini-7/](http://reboot.pro/topic/18593-vhd-w7-compact-make-mini-7/ \"\")  \n\nInstall XP in VHD and Make Mini XP VHD for booting from USB  \n[http://reboot.pro/to...tall-xp-in-vhd/](http://reboot.pro/topic/18547-vhd-xp-setup-install-xp-in-vhd/ \"\")  \n[http://reboot.pro/to...t-make-mini-xp/](http://reboot.pro/topic/18657-vhd-xp-compact-make-mini-xp/ \"\")  \n\nThe XP/7/8 Mini Windows VHD\u0027s of 1.2 - 2.5 GB are loaded from USB-Stick into RAMDISK by Grub4dos and using WinVBlock or FiraDisk driver  \nGrub4dos booting with VHD loaded into RAMDISK cannot be used on UEFI computers.  \n\nFor UEFI + BIOS booting then Windows 8.1 x64 need to be used as Source.  \nYou can make Portable W864USP1.vhd of size 3.5 GB for booting from USB and direct selected in Boot Manager Menu.  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**How to prepare XP Setup Source ? - Prepare XP Setup ISO file with integrated UpdatePack and DriverPacks**   \n\nTake care that your XPSOURCE Folder is located on your Harddisk in a simple Path without SPACES.  \nCopy the Content of your Windows XP Setup CD to your XPSOURCE Folder on Harddisk  \n\nFirst Integrate ServicePack SP3 in your XP-SP2 Source (don\u0027t use here nLite).  \n[http://www.helpwithw...ice_Pack_3.html](http://www.helpwithwindows.com/WindowsXP/Slipstreaming_Windows_XP_Service_Pack_3.html \"External link\")  \nDownload from - [http://www.microsoft...aylang\u003den\\\u0026id\u003d24](http://www.microsoft.com/download/en/details.aspx?displaylang\u003den\u0026id\u003d24 \"External link\")  \n\nIn Command Window use for English version and XPSOURCE folder on drive E:\n\n```\nWindowsXP-KB936929-SP3-x86-ENU.exe /integrate:E:\\XPSOURCE\n```\n\nSiginet\u0027s RyanVM Integrator 1.6 can then be used to Integrate Windows UpdatePacks in the XP-Source.  \n[http://integrator.si...ex.php?download](http://integrator.siginetsoftware.com/index.php?download \"External link\")  \nDownload preferred version RVM Integrator 1.6.1 Beta 2.1  \n\nWindows XP UpdatePacks and Addons:  \nOnepiece XP Post-SP3 AIO Update Pack FINAL - [http://www.ryanvm.ne...opic.php?t\u003d6438](http://www.ryanvm.net/forum/viewtopic.php?t\u003d6438 \"External link\")  \nOnepiece XP Post-SP3 AIO International Update Packs FINAL - [http://www.ryanvm.ne...pic.php?t\u003d10445](http://www.ryanvm.net/forum/viewtopic.php?t\u003d10445 \"External link\")  \nDutch Update Pack - [http://www.ryanvm.ne...opic.php?t\u003d8428](http://www.ryanvm.net/forum/viewtopic.php?t\u003d8428 \"External link\")  \nRyanVM Forum - [http://www.ryanvm.net/forum/](http://www.ryanvm.net/forum/ \"External link\")  \n\nFor Install of XP on a modern system with SATA Drives it is needed to use DPsBase.exe  \nfor Integrating in your XPSOURCE DriverPack Massstorage with TXT Mode Enabled.  \n[http://driverpacks.net/downloads](http://driverpacks.net/downloads \"External link\")  \nIn that case a lot of Extra RAID SCSI and SATA Drivers (about 120 extra) are Integrated which appear in the  \nXP Setup BootFolder $WIN_NT$.\\~BT on Install-Drive and can prevent a lot of XP Install Boot Problems.  \nUse DPsBase.exe to Integrate DriverPacks Chipset + Processor + MassStorage + LAN + WLAN DriverPacks  \nwhich will then be located in OEM Folder in your XPSOURCE folder  \nAlways first use RyanVM Integrator and then use DPsBase to Improve your XP-Source  \nDPsBase makes presetup.cmd in folder I386 and changes the I386\\\\winnt.sif file for use of DriverPacks  \n\npresetup.cmd in folder I386 will start decompression of DriverPacks located in OEM folder  \nat the beginning of GUI-mode of XP Setup, which does NOT take to much time for the 5 DriverPacks  \n\nYou should select to Keep The Drivers for Chipset + Processor + MassStorage + LAN  \nThen WINDOWS\\\\DriverPacks is about 135 MB which is acceptable and provides a lot of extra driver support  \nwhich is useful to make XP Universal and adapt easily to very different hardware.  \nIn that case the DevicePath is set accordingly in key  \nHKEY_LOCAL_MACHINE\\\\SOFTWARE\\\\Microsoft\\\\Windows\\\\CurrentVersion  \nso that XP can automatically make use of these drivers for adjusting to New Hardware  \n\nWhen you don\u0027t use nLite, you can copy the supplied $OEM$ folder to your XP Source folder  \nChange $OEM$ folder to your needs for UserAccounts and Registry Tweaks and Adding Drivers  \nCMDLINES.TXT is used for making UserAccounts and install of Registry Tweaks at T-12  \nInfo see: [http://unattended.ms.../unattended.xp/](http://unattended.msfn.org/unattended.xp/ \"External link\")  \n\nUse DriverForge.v4.5.4.exe to Install from C:\\\\Drivers at T-9 of GUI XP Setup (just for the last Reboot).  \nDriverForge.v4.5.4.exe was made by kickarse [http://www.msfn.org/...howtopic\u003d110783](http://www.msfn.org/board/index.php?showtopic\u003d110783 \"External link\")  \nAt end of TXT-mode XP Setup the folder $OEM$\\\\$1\\\\Drivers is copied to C:\\\\Drivers  \nand $OEM$\\\\$1\\\\Install\\\\DriverForge.v4.5.4.exe is copied to C:\\\\Install  \nFor Auto Use of DriverForge at T-9 add uncompressed driver folders in $OEM$\\\\$1\\\\Drivers  \nand Uncomment two rules by removing ; in winnt.sif file copied from winnt_sif to your I386 folder  \nThis is very useful for Install of your well known Audio and Video driver during GUI-mode of XP Setup.\n\n```\n[SetupParams]UserExecute \u003d \"%SystemDrive%\\INSTALL\\SetupPar.cmd\"\n```\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**How to make XP Setup ISO File ?**   \n\n- Use BBIE (see below) or Isobuster to Extract Boot Image bootsect.bin from Original bootable XP Setup CD  \nbbie will make image1.bin that you can copy as bootsect.bin to XP Setup source folder  \n- Reduce Size of XP Setup Source folder (if needed to fit on CD then remove folders LANG WIN9XMIG WIN9XUPG)  \n- Use ImgBurn and bootsect.bin to make Bootable CD  \n\n1. Remove 3 folders LANG WIN9XMIG WIN9XUPG - reduction in size \u003d 135 MB  \n2. Run ImgBurn - Portable Tool in PStart Menu - IMG_XP\\\\MULTI\\\\PStart\\\\Progs\\\\ImgBurn  \n- Select Write files/folders to disc  \n- Output - Select Image File  \n- Browse Source folder and Select your XP Setup Source folder  \n- Browse Destination file - Give Name e.g. XP-Setup.iso  \n- Labels ISO 9660 - Give Name e.g. XP-Setup  \n- Advanced Restrictions - ISO9660 - Select Level X and DOS CharSet with 4x Checkbox On (allow ...)  \n- Bootable Disc - Make Image bootable - Checkbox On - Browse Boot Image - Select bootsect.bin file  \n- Bootable Disc - Emulation Type \u003d None  \nLoad Segment \u003d 07C0  \nSectors to Load \u003d 4  \n\n\u003cbr /\u003e\n\nBOOT_USB\\\\makebt\\\u003ebbie M:\\\\XP3_1307.iso  \nBBIE - Bart\u0027s Boot Image Extractor v1.0, Â© 2001, Bart Lagerweij  \nwill make BOOT_USB\\\\makebt\\\\image1.bin that you can rename as bootsect.bin  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**PXE wimboot is very handy and fast for booting of Win8.1SE boot.wim from Network**   \n\nHow to make Win8.1SE boot.wim  \n[http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")  \n\nDownload Tiny PXE Server - [http://reboot.pro/fi...iny-pxe-server/](http://reboot.pro/files/file/303-tiny-pxe-server/ \"\")  \n\nUsing iPXE and wimboot, you can boot into Windows PE via HTTP.  \n[http://ipxe.org/wimboot](http://ipxe.org/wimboot \"External link\")  \n\nIn case of Windows 8 then bootmgr.exe must be used instead of bootmgr  \n[http://blog.devicenu...ver-2012r2.html](http://blog.devicenull.org/2013/11/14/ipxe-wimboot-and-windows-server-2012r2.html \"External link\")  \n\nMore Info on how to use Tiny PXE Server for booting WIM and VHD from Network via iPXE  \n[http://reboot.pro/to...twork-via-ipxe/](http://reboot.pro/topic/19015-boot-mini-windows-vhd-from-network-via-ipxe/ \"\")  \n[http://reboot.pro/to...iny-pxe-server/](http://reboot.pro/topic/18962-bug-reports-requests-howtos-about-tiny-pxe-server/ \"\")  \n\nI copied folders Boot and sources from Win8.1SE_2014-01-30\\\\ISO\\\\WIM folder to pxesrv\\\\files folder  \n\nXP-W7-Setup\\\\pxesrv\\\\files\\\\wimboot.ipxe is auto used by pxesrv.exe when the given config.INI is used  \n\n**wimboot.ipxe**\n\n```\n#!ipxe\nset boot-url http://${dhcp-server}\nkernel ${boot-url}/wimboot\ninitrd ${boot-url}/bootmgr.exe                  bootmgr.exe\ninitrd ${boot-url}/Boot/bcd                     bcd\ninitrd ${boot-url}/Boot/fonts/segmono_boot.ttf  segmono_boot.ttf\ninitrd ${boot-url}/Boot/fonts/segoe_slboot.ttf  segoe_slboot.ttf\ninitrd ${boot-url}/Boot/fonts/segoen_slboot.ttf segoen_slboot.ttf\ninitrd ${boot-url}/Boot/fonts/wgl4_boot.ttf     wgl4_boot.ttf\ninitrd ${boot-url}/Boot/boot.sdi                boot.sdi\ninitrd ${boot-url}/sources/boot.wim             boot.wim\nimgstat\nboot\n```\n\nOr make Entry in menu.ipxe for PXE wimboot of Win8.1SE boot.wim file\n\n```\n:w81x64_wim\nkernel ${boot-url}/wimboot\ninitrd ${boot-url}/bootmgr.exe                  bootmgr.exe\ninitrd ${boot-url}/Boot/bcd                     bcd\ninitrd ${boot-url}/Boot/fonts/segmono_boot.ttf  segmono_boot.ttf\ninitrd ${boot-url}/Boot/fonts/segoe_slboot.ttf  segoe_slboot.ttf\ninitrd ${boot-url}/Boot/fonts/segoen_slboot.ttf segoen_slboot.ttf\ninitrd ${boot-url}/Boot/fonts/wgl4_boot.ttf     wgl4_boot.ttf\ninitrd ${boot-url}/Boot/boot.sdi                boot.sdi\ninitrd ${boot-url}/sources/boot.wim             boot.wim\nimgstat\nboot || goto failed\ngoto start\n```\n\nF12 hotkey can be used for PXE boot when LAN PXE Boot ROM is enabled in BIOS  \nF8 hotkey can be used to select PXE boot in BIOS Boot Menu  \n\n[http://reboot.pro/to...e-2#entry179107](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-2#entry179107 \"\")  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\n"
    },
    {
      "id": "168081",
      "timestamp": "2013-02-18T10:09:57+00:00",
      "author": "TheHive",
      "content": "![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif) If i get some time . Hope to test this.\n\n"
    },
    {
      "id": "170048",
      "timestamp": "2013-03-25T08:50:26+00:00",
      "author": "wimb",
      "content": "-  \n**\\*\\*\\* Update UEFI_MULTI Version 7.4 \\*\\*\\***  \n*  \n* Update - Fedora-18 Grub2 UEFI Secure Boot in folder UEFI_MAN\\\\efi_fedora18  \n* Update - BOOT_IMG - FileSize of Boot Images in Grub4dos Menu  \n* Changed - Program Version - latest version is 7.4  \n**Download** - [UEFI_MULTI](http://reboot.pro/files/file/279-uefi-multi/ \"\")  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\n"
    },
    {
      "id": "172271",
      "timestamp": "2013-05-11T08:24:50+00:00",
      "author": "wimb",
      "content": "-  \n**\\*\\*\\* Update UEFI_MULTI Version 7.5 \\*\\*\\***  \n*  \n* Update - AutoIt3 version 3.3.8.1  \n* Update - VHD Boot Menu also made for VHD already existing on System Drive  \n* Update - Improved text for some WARNING Message\u0027s  \n* Changed - Program Version - latest version is 7.5  \n**Download** - [UEFI_MULTI_75](http://reboot.pro/files/file/279-uefi-multi/ \"\")  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\n"
    },
    {
      "id": "174071",
      "timestamp": "2013-06-26T16:57:00+00:00",
      "author": "ktp",
      "content": "@wimb  \n\nI am new to UEFI and I am experimenting a lot using your excellent UEFI_MULTI package.  \nFollowing are my reports and understandings. Please correct me if needed.  \n\nI have an USB hard disk with multiboot-capability with only one partition, MBR mode, NTFS format, using grub4dos (called OLD_MULTIBOOT).  \nWith UEFI/GPT, I understand that grub4dos does not support GPT, so I cannot use it for GPT disks (for example for internal hard disk of systems with Windows 8).  \nMy USB HDD is MBR, so grub4dos is OK but since it is in NTFS, it cannot boot on UEFI system, so I use your UEFI_MULTI  \nwhere the first partition (bootable) must be in FAT32, and contains EFI directory and files, to be able to boot on both  \nUEFI and non-UEFI (\u003dBIOS) system.  \n\nSo I understand that using UEFI_MULTI I can boot some UEFI-aware systems (like Parted Magic, Fedora, Ubuntu and Windows 8-64).  \nImportant question : Once booted UEFI Windows 8-64, in BCD there is an entry for grub4dos, does it mean that I can then boot all entries listed in my menu.lst on my existing USB HDD OLD_MULTIBOOT? If the answer is yes, then this is fantastic!  \nIn other words, this would mean:  \na- on BIOS systems, I can boot directly grub4dos and everything in my working menu.lst\n\nb- on UEFI systems, I can boot some UEFI-aware OSes, then by chainloading grub4dos from UEFI Windows boot manager, I can boot everything as in a).  \nCould you confirm or infirm?  \n\nNow about UEFI_MULTI procedure.  \nI did not understand the need for 4 partitions. So I use only 2 partitions: one primary in FAT32 about 20 GB,  \nthe other primary in NTFS. All in MBR mode. The new multiboot USB HDD is called NEW_MULTIBOOT.  \nIn FAT32 partition, I copied the /boot directory and bootmgr from OLD_MULTIBOOT USB HDD. The FAT32 partition has grub4dos installed in MBR.  \nIn NTFS partition, I copied my existing VHD bootable from my menu.lst.  \nThen I run UEFI_MULTI.exe: checked Add EFI Boot manager, Add grub4dos to Boot manager. Add VHD and add Boot Win7/8 are greyed out.  \nBoot image file: make_pe3 iso file. I manually copy pmagic and images directory to FAT32 partition. After completion, I tested in UEFI system.  \n- Refind EFI boot manager is OK  \n- Parted Magic 64 hang on black screen at boot  \n- Parted Magic 32 is OK  \n- I cannot boot Win8 x64 EFI. 8bootx64.efi not found.  \nSo I take it from bootx64.efi from existing Win8-64 system (hidden partition). Reboot: got message:  \n---  \nfailed to start  \nStatus: 0xc000000f  \n\\\\EFI\\\\Microsoft\\\\Boot\\\\BCD  \nInfo: The Boot Configuration Data for your PC is missing or contains errors.  \nSo I copied \\\\boot from FAT32 partition to \\\\EFI\\\\Microsoft (directory to be created first). Then reboot, choose Win8 VHD entry: the system reboots instead of booting Win8 VHD!\n\nIf I choose the grub4dos - XP entry, I got the message :  \nFile: \\\\grldr  \nStatus: 0xc000007b  \nInfo: The application or operating system couldn\u0027t be loaded because a required file is missing or contains errors.  \n---  \nIn FAT32, there is boot.ini created by UEFI_MULTI with content:  \n\\[Boot Loader\\]  \nTimeout\u003d20  \nDefault\u003dC:\\\\grldr  \n\\[Operating Systems\\]  \nC:\\\\grldr\u003d\"Start GRUB4DOS - XP Menu\"  \n---  \n\nSo I am stucked now.  \nPlease comment, thank you.  \n\nEdit: I made few progressions.  \n\nThe missing 8bootx64.efi file, the missing \\\\boot directory etc... problem were due to the  \nfact that either Win8 must be installed on USB system drive, or the Win8 USB stick recovery content  \nmust be copied to UEFI_MULTI\\\\MULTI_BOOT directory. Then in the program select copy to boot drive  \nwith source folder UEFI_MULTI\\\\MULTI_BOOT.  \n\nSince I also have a VHD to boot, I use EasyBCD to add this entry to the BCD. You need to add to FAT32  \n\\\\boot and \\\\efi\\\\microboot\\\\boot.  \n\nSo now on UEFI boot, I have 3 entries: Win8 VHD, Windows Setup, and grub4dos.  \n- Win8 VHD entry gives reboot!  \n- Windows setup entry works.  \n- grub4dos entry give 0x7B error with \\\\grldr!\n\n"
    },
    {
      "id": "174096",
      "timestamp": "2013-06-27T06:05:20+00:00",
      "author": "wimb",
      "content": "UEFI-mode needs FAT32 Boot drive and does NOT allow to boot with Grub4dos.  \nBIOS-mode is required to boot with Grub4dos  \nYou do a lot of manual copy steps that are not part of the described Procedure.  \nPlease first follow more exactly the description and let UEFI_MULTI do the work.  \n\u003e **Section 5. - UEFI_MULTI.exe is used to make Multi-Boot USB-Harddisk**  \n\u003e 0. Connect Portable USB-harddisk and start computer with Windows 7/8 - x64 version  \n\u003e 1. On first use then **Format** your USB Boot Drive with FAT32 - Boot files will be renewed by UEFI_MULTI.exe  \n\u003e 2. Run UEFI_MULTI.exe  \n\u003e 3. Select FAT32 Boot Drive of USB-harddisk  \n\u003e 4. Select NTFS System Drive of USB-harddisk (has Windows 8 Installed to USB System Drive)  \n\u003e 5. Select Source Folder UEFI_MULTI\\\\MULTI_BOOT for Copy to Boot Drive (will add soources\\\\boot.wim and pmagic folder)  \n\u003e 6. Select Boot Image File - VHD is Copied always to NTFS System Drive - ISO is copied to Boot Drive  \n\u003e 7. Optionally Add EFI Boot Manager for UEFI booting of Linux Parted Magic - Requires to Disable UEFI Secure Boot  \n\u003e 8. Click GO to make Multi-Boot USB-Harddisk  \n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "174104",
      "timestamp": "2013-06-27T09:06:44+00:00",
      "author": "ktp",
      "content": "@wimb  \n\nI tried again without any manual procedure, except the preparation like pmagic, System recovery stick.  \nThen I copied them as instructed to UEFI_MULTI\\\\MULTI_BOOT directory, then run section 5, using boot image file a VHD.  \nOf course option \"Add VHD to boot manager\" is then not greyed out and checked. Then I click on GO.  \n\nThe BCD produced in case of BIOS and UEFI are:  \nBIOS : \\\\boot\\\\bcd with entries :  \n- VHD (VHD, .vhd)  \n- Start Grub4dos (partition, \\\\grldr)  \nUEFI : \\\\efi\\\\Microsoft\\\\boot\\\\bcd with entries :  \n- Windows 8 (partition, \\\\windows)  \n- Windows setup (ramdisk, boot.wim)  \n\nI can boot successfully in both BIOS and UEFI modes. But I have some remarks:  \n1- I do not check \u0027Add grub4dos to boot manager\u0027 option, this entry is still added to BIOS BCD !  \n2- the VHD entry is added in BIOS BCD but not in UEFI BCD! In UEFI BCD, there is an entry for Windows 8 instead that I did not ask! (I do not have Windows 8 installed in the \"system\" drive: second partition of USB HDD, NTFS-formatted).  \nI have to edit this entry to point to the desired VHD.\n\n3- the Windows setup (\u003d repair) entry is not present in BIOS BCD.  \n\nI hope that the problems above would be handled in future version.  \nCurrently I plan to repartition my existing USB HDD (single MBR NTFS partition) so it can be multibooted (BIOS/UEFI). ![:clapping:](http://reboot.pro/public/style_emoticons/default/clapping.gif)  \n\n"
    },
    {
      "id": "174105",
      "timestamp": "2013-06-27T09:34:05+00:00",
      "author": "wimb",
      "content": "\u003e I can boot successfully in both BIOS and UEFI modes. But I have some remarks:  \n\u003e 1- I do not check \u0027Add grub4dos to boot manager\u0027 option, this entry is still added to BIOS BCD !  \n\u003e 2- the VHD entry is added in BIOS BCD but not in UEFI BCD! In UEFI BCD, there is an entry for Windows 8 instead that I did not ask! (I do not have Windows 8 installed in the \"system\" drive: second partition of USB HDD, NTFS-formatted).  \n\u003e I have to edit this entry to point to the desired VHD.\n\u003e\n\u003e 3- the Windows setup (\u003d repair) entry is not present in BIOS BCD.  \n\nOK, you made a lot of progress then ....\n\nGrub4dos entry is always added to BIOS BCD when grldr.mbr is not found (see caption in running UEFI_MULTI.exe)\n\nSo that is normal behaviour, because it is always desired to have Grub4dos support in BIOS mode\n\nand it provides a means to avoid having Win8 as default in BCD which would cause other options to be inaccessible.\n\nWhat kind of VHD did you select as Boot Image file and what driver does it have and can you boot that VHD from USB in UEFI-mode ?\n\nIn UEFI-mode you can boot (flat) Win8 x64 from \\\\efi\\\\microsoft\\\\boot\\\\BCD\n\nSo VHD like Win7- are not bootable in UEFI-mode and so NOT added to EFI Boot Manager Menu.\n\n"
    },
    {
      "id": "174124",
      "timestamp": "2013-06-27T15:31:51+00:00",
      "author": "ktp",
      "content": "@wimb  \n\nOK finally I made good progress.  \nWhat I said previously was wrong : the UEFI BCD does have Win8 VHD entry, but since it is labeled Windows 8,  \nI thought it was the flat Win8, not the Win8 VHD I requested. So the only problem remaining is no Windows setup (repair) entry  \nin BIOS BCD.  \n\u003e /\\\u003eSo VHD like Win7- are not bootable in UEFI-mode and so NOT added to EFI Boot Manager Menu.\n\nOh really? What is the reason, since Win7-64bit could be installed in UEFI mode?  \nWithout knowing that, in UEFI mode I tried to add Win7PE Wim (Win7PE iso) and Win8PE wim (from Win8PE iso).  \nIt boots, but then I got:  \n- for Win7PE wim: \\\\windows\\\\system32\\\\boot\\\\winload.efi 0xC000000f. OK my Win7PE is 32-bit, So I add the 2 files winload.efi and winresume.efi taken from Win8 to Win7E wim, and reboot: same problem.  \n- for Win8E wim (32-bit). It does have winload.efi already. Still Got message : 0xc0000359 \\\\windows\\\\system32\\\\boot\\\\winload.efi.  \n\nIf I could replace Win7PE and Win8PE with their 64-bit version and use their wim, I wonder whether they can be booted in UEFI mode?  \nI have no 64-bit wim to try.  \n\n\u003cbr /\u003e\n\nTo summarize what I understand by using UEFI_MULTI:  \na- with BIOS system, no problem for multiboot using known loaders (grub4dos, bootmgr, syslinux, ntldr...)  \nb- with UEFI system, if you can disable Secureboot and enable CSM (compatibility support modules), then same booting capabiliy as in a).  \nIf CSM disabled, and Secureboot enabled/disabled, you can boot EFI compatible systems as grub2, Win8-64, rEFInd, PartedMagic, Fedora, Ubuntu etc...  \nWin8-64 could in flat OS ou in VHD.\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "174128",
      "timestamp": "2013-06-27T18:19:50+00:00",
      "author": "wimb",
      "content": "\u003e What I said previously was wrong : the UEFI BCD does have Win8 VHD entry, but since it is labeled Windows 8,  \n\u003e I thought it was the flat Win8, not the Win8 VHD I requested. So the only problem remaining is no Windows setup (repair) entry  \n\u003e in BIOS BCD.  \n\u003e .........\n\u003e\n\u003e I have no 64-bit wim to try.  \n\nYou have tested already x64 boot.wim :smile:\n\nWin8 x64 Recovery boot.wim (Windows Setup entry) is working for me in UEFI but also in BIOS-mode.\n\nStrange that the entry in Boot\\\\BCD for BIOS-mode booting is missing for you.\n\nThe Win8 x64 VHD entry is NOT yet made for UEFI booting by UEFI_MULTI.exe , but I will make changes to make it appear.\n\nStrange that you say that the entry labeled Windows 8 is working for you to boot Win8 x64 VHD in UEFI-mode ![:hyper:](http://reboot.pro/public/style_emoticons/default/hyper.gif)\n\nIt is not yet in the program. Did you use in some way bcdboot to make it happen ?\n\nVHD_W8_Compact.exe is already able to make such entry for booting Win8 x64 VHD from USB in UEFI-mode.\n\nIn UEFI-mode then Grub4dos booting does NOT work, it is only available in BIOS-mode.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174139",
      "timestamp": "2013-06-28T07:17:52+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI_76.exe \\*\\*\\***\n\nDownload from [http://reboot.pro/fi...t-usb-harddisk/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-harddisk/ \"\")\n\nChanges:  \n- UEFI Boot Manager entry for Win8-x64 VHD is made.  \n- Update Grub4dos to version grub4dos-0.4.5c-2013-03-03.7z  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n**@ktp**  \nBoot Manager entry for Recovery boot.wim is made in **Section 3** when Recovery USB-Stick is made.  \nWhen entry in Boot\\\\BCD is missing then the origin of the problem is NOT in UEFI_MULTI  \nbut in making Recovery USB-Stick.  \nPlease check if Stick has file Boot\\\\BCD and check that USB-Stick can boot in BIOS-mode.\n\n"
    },
    {
      "id": "174171",
      "timestamp": "2013-06-28T18:55:10+00:00",
      "author": "ktp",
      "content": "Good news! I succeeded to boot in UEFI mode through rEFInd EFI manager -\\\u003e Windows 8-64 bootmager EFI + booloader EFI a Win8PE-64 rescue environment (using the Win8PE-64 wim taken from its ISO file).  \n\nSo now in any UEFI system I can boot either:  \n- Windows 8-64 setup/repair  \n- Windows 8-64 VHD  \n- Windows 8-64 PE  \n\nNotes: I can also boot in UEFI mode Fedora 18, and Parted Magic, but they hang randomly (black screen) after some boot time activity.\n\n"
    },
    {
      "id": "174180",
      "timestamp": "2013-06-29T05:25:04+00:00",
      "author": "wimb",
      "content": "\u003e Good news! I succeeded to boot in UEFI mode through rEFInd EFI manager -\\\u003e Windows 8-64 bootmager EFI + booloader EFI a Win8PE-64 rescue environment (using the Win8PE-64 wim taken from its ISO file).  \n\u003e\n\u003e So now in any UEFI system I can boot either:  \n\u003e - Windows 8-64 setup/repair  \n\u003e - Windows 8-64 VHD  \n\u003e - Windows 8-64 PE  \n\u003e\n\u003e Notes: I can also boot in UEFI mode Fedora 18, and Parted Magic, but they hang randomly (black screen) after some boot time activity.\n\nWin 8-64 PE is included in Win 8-64 Repair boot.wim\n\nIt is nice that you can boot 8-64 PE boot.wim in UEFI-mode but it does not add something new,\n\nsince the 8-64 Repair boot.wim gives already that functionality and that boot.wim is made much easier using Configuration \\\u003e Recovery menu\n\nDo you have now also Win8 Repair boot.wim booting in BIOS-mode from Boot\\\\BCD ?\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174181",
      "timestamp": "2013-06-29T05:48:59+00:00",
      "author": "ktp",
      "content": "@wimb  \n\nYes, the latest UEFI_MULTI 7.6 works very well, I no longer have any problem.  \nThe Win8 Repair boot.wim is present in both BIOS and UEFI modes. Idem for Win8 VHD entry if checked in the application.  \nThank you for your great package.  \n\nYou are right, booting in UEFI Win8-64 PE is not new from booting boot.wim (Win8-64 Repair), just I am used  \nto boot and get quickly a PE environment with some convenience tools for rescue (shell, imdisk, network, audio, .NET framework...).The remaining function is provided by portable apps/Pstart so they are common to WinPE environments (mini-XP, mini-Win7, mini-Win8).  \nWhat is new and fantastic is that on UEFI systems, thanks to UEFI_MULTI, without changing BIOS setup to boot in legacy mode, I can still boot either Win8-64 VHD or Win8PE-64 for rescue. ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)\n\n"
    },
    {
      "id": "174189",
      "timestamp": "2013-06-29T08:57:18+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e some convenience tools for rescue (shell, imdisk, network, **audio** , **.NET framework**...).\n\nFirst time ever ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif) that someone in his right mind catalogs \"audio\" or \".Net framework\" among \"convenience tools ++*for rescue*++\".\n\nActually I am further surprised ![:hyper:](http://reboot.pro/public/style_emoticons/default/hyper.gif) that \".Net framework\" can be considered a \"tool\" and a \"convenient\" one. ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)\n\n*O tempora, o mores !*\n\n*[http://en.wikipedia....empora_o_mores!](http://en.wikipedia.org/wiki/O_tempora_o_mores! \"External link\")*\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "174192",
      "timestamp": "2013-06-29T09:18:09+00:00",
      "author": "ktp",
      "content": "Well I am not using .NET Framework directly, but some of my \"portable\" applications require it :-).\n\nBy the way, with this wonderful 1TB universal multi-boot USB 2\"5 HDD with 1 FAT32 + 1 NTFS partition used inside the Zalman ZM-VE300 (requires FAT32 firmware), I am very pleased with it.\n\nEdit:\n\nThe is however a problem of some big iso (\\\u003e 4 GB) that have to be put on second NTFS partition. But they usually can be booted with grub4dos or used after mounting with Imdisk (for Windows installation with WinNTSetup). The ZM-VE300 has also HDD write-protect function if needed, in case of use with infected systems.\n\n"
    },
    {
      "id": "174194",
      "timestamp": "2013-06-29T09:29:42+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Well I am not using .NET Framework directly, but some of my \"portable\" applications require it :-).\n\nSubverting basic equations ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif):\n\n* .Net Framework \u003d ***Evil*** Bloat\n* .Net Framework 4.0 \u003d ***Evil*** Bloat, but more bloated\n* \"portable\" application needing .Net framework \u003d **NON-**portable application\n\n![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif)\n\n![:rofl:](http://reboot.pro/public/style_emoticons/default/roll1.gif)\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "174195",
      "timestamp": "2013-06-29T09:35:46+00:00",
      "author": "ktp",
      "content": "How about Java applications? They can use portable Java run-time (cf. portableapps.com) which is the Oracle equivalent for MS .NET framework as far as I understand?\n\n"
    },
    {
      "id": "174199",
      "timestamp": "2013-06-29T14:18:11+00:00",
      "author": "ktp",
      "content": "Another good news: I succeeded to boot Win7PE-64 in UEFI mode. ![:happy_dance:](http://reboot.pro/public/style_emoticons/default/celebrate14.gif)\n\n"
    },
    {
      "id": "174201",
      "timestamp": "2013-06-29T14:46:37+00:00",
      "author": "wimb",
      "content": "\u003e Another good news: I succeeded to boot Win7PE-64 in UEFI mode. ![:happy_dance:](http://reboot.pro/public/style_emoticons/default/celebrate14.gif)\n\nThat is good news. How did you make it happen.\n\nBooting boot.wim from RAMDISK has probably less restrictions than booting Win 7-x64 VHD as Filedisk which always failed for me in UEFI-mode.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174202",
      "timestamp": "2013-06-29T14:57:00+00:00",
      "author": "ktp",
      "content": "@wimb\n\nI just take an existing Win7PE-64 iso, extract its wim then create a new entry WinPE (ramdisk) in UEFI mode (\\\\efi\\\\microsoft\\\\boot\\\\bcd) with EasyBCD, then use BcdTool under Win7PE-32 (7pe_x86_M) to change winload.exe into winload.efi.\n\nNote: BcdToold does not work under 64-bit environment :-(. EasyBCD works fine in all environement (real, or PE), 32 ou 64-bit, but it does not aware that UEFI is involved so it uses winload;exe instead of winload.efi).\n\nWhat tool do you use to edit BCD (apart from bcdedit command line)?\n\nNow I have to build 7pe_x64_M.iso by using your Make_PE3 package, it seems that it is allowed.\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "174207",
      "timestamp": "2013-06-29T15:53:27+00:00",
      "author": "wimb",
      "content": "\u003e What tool do you use to edit BCD (apart from bcdedit command line)?\n\u003e\n\u003e Now I have to build 7pe_x64_M.iso by using your Make_PE3 package, it seems that it is allowed.\n\nThanks for the Info.\n\nI use 7/8 bcdedit.exe and Win8 bcdboot.exe in admin command window and no other tool.\n\nFor VHD mounted as drive V: you can make Boot\\\\BCD and efi\\\\microsoft\\\\Boot\\\\BCD on Boot Drive T:\n\nby using Win8 bcdboot.exe with /f ALL option to support BIOS + UEFI firmware\n\n\u003e bcdboot.exe V:\\\\Windows /s T: /f ALL\n\nMay be can you try if Win7-x64.vhd can be used to boot in UEFI mode.\n\nFor me it was refused always ....\n\nCertainly 7pe_x64_M can be made with Make_PE3.exe :smile:\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174312",
      "timestamp": "2013-07-03T15:11:20+00:00",
      "author": "ktp",
      "content": "@wimb\n\nGood news: I test UEFI booting of my USB hard disk on another newer UEFI system delivered with Windows 8 (my previous tests were done on an older system, which has UEFI compatibility but mainly is BIOS, it does not have CSM or Secure boot).\n\nOn this newer UEFI system, everything is OK, with or without CSM enabled: Win8-64 full, Win8-64 VHD, Win8-64 PE, Parted Magic 32 and 64-bit, Ubuntu 64-bit (installed with BIOS mode). Fedora 18 boots OK but then the mouse is not reacting correctly, but it could be Fedora-related problem, not booting one.\n\nBy the way, I now use full Win8-32 VHD or Win8-64 VHD for rescue, boot time is fast, even faster than Win7PE, it could be even faster by booting directly from USB3.0 port (which Win7PE and earlier could not do). By using full VHD, there are many advantages over PE methods. Sample booting time: 1\u002703\" to boot on external USB 2.0 attached HDD with Win8-64 VHD. Win7PE-32 is longer: 1\u002715\".\n\n"
    },
    {
      "id": "174316",
      "timestamp": "2013-07-03T16:44:26+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e boot time is fast, even faster than Win7PE, it could be even faster by booting directly from USB3.0 port (++**which Win7PE**++ ++**and earlier could not do**++).\n\nAre you really sure-sure they could/can not? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nAFAICR it is just a matter of USB 3.x drivers ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "168077",
      "timestamp": "2013-02-18T06:23:42+00:00",
      "author": "wimb",
      "content": "![Posted Image](http://reboot.pro/index.php?app\u003ddownloads\u0026module\u003ddisplay\u0026section\u003dscreenshot\u0026id\u003d279)\n**File Name** : UEFI MULTI - Make Multi-Boot USB-Drive  \n**File Submitter** : [wimb](http://reboot.pro/index.php?showuser\u003d9517 \"\")  \n**File Submitted** : 18 Feb 2013  \n**File Updated** : *03 Aug 2021*   \n**File Category** : [Boot tools](http://reboot.pro/index.php?app\u003ddownloads\u0026showcat\u003d7 \"\")  \n\nDownload Encrypted with password for UEFI_MULTI-XX-E.zip is **bootwimb**   \nUse R-mouse 7-zip menu to Extract here  \n-  \n**Download:** [USB Format Tool](https://github.com/wimbrts/USB_FORMAT/releases \"External link\") and [UEFI_MULTI](https://github.com/wimbrts/UEFI_MULTI/releases \"External link\") at [wimb GitHub](https://github.com/wimbrts \"External link\")  \n-  \n**More Info:** at MSFN Forum in [USB Format Tool and UEFI MULTI](https://msfn.org/board/topic/181311-usb-format-tool-and-uefi_multi/ \"External link\")  \n-  \n**More Info:** [Install Windows 10 from USB after booting with WIM or VHDX](http://reboot.pro/topic/21883-install-windows-10-from-usb-after-booting-with-wim-or-vhdx/?p\u003d208164 \"\") and [UEFI_MULTI](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d208639 \"\")  \n-  \n**Unattended:** [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003dcc719e26bb51c749059f938e797dcf82\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16971 \"\") [**Unattended_Eng.zip**](http://reboot.pro/index.php?s\u003dcc719e26bb51c749059f938e797dcf82\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16971 \"\") **3.69KB** 45 downloads  \n-  \n**YouTube Video:** **[Make VHDX](https://youtu.be/T3hqtiH6ufM \"External link\")** and**[Make USB Win10](https://www.youtube.com/watch?v\u003dGm4TlS_1Tzk \"External link\")** and**[Make USSD Win10](https://youtu.be/-RWwCraZjbA \"External link\")** and**[USB AIO Linux](https://youtu.be/LI57gVXcYBg \"External link\")** and [UEFI_MULTI-Demo](https://youtu.be/XVDlF6irrl0 \"External link\")  \n\n**USB Format Tool - Make Bootable USB Drive with MBR and 2 Partitions**  \n**USB Multi-Boot of Linux ISO + Windows 10 VHD + Win10XPE in BIOS Or UEFI Secure mode**  \n\n1 - Format USB Drive with MBR and 2 Partitions \u003d Active FAT32 + NTFS  \n2 - UEFI_MULTI can Add VHD or PE WIM File Booting from RAMDISK  \n3 - Copy Linux ISO files to folder images on FAT32 - Boot UEFI Grub2 and BIOS Grub4dos  \n4 - USB drive Booting with Windows Boot Manager Menu in BIOS or UEFI Mode  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**Linux ISO Info:**  \nUEFI Secure boot support requires Format Drive using Mint UEFI Or Super UEFI as Grub2 Manager  \nCopy your Linux ISO files to folder **images** on FAT32 USB Boot drive U-BOOT  \nSupported filenames for Linux ISO in folder images are:  \n\nlinuxmint.iso and kali-linux.iso  \nruntimelivecd.iso and knoppix.iso  \nubuntu.iso and Porteus.iso  \n\n**Download:** [Linux-Mint](https://linuxmint.com/download.php \"External link\") and [Knoppix-Live](https://www.runtime.org/data-recovery-live-cd.htm \"External link\") and [Ubuntu](https://ubuntu.com/download/desktop \"External link\") and [Porteus x86_64](http://www.mirrorservice.org/sites/dl.porteus.org/ \"External link\") and [Kali 64-bit Live](https://www.kali.org/downloads/ \"External link\")  \n\nRename your Linux ISO files so that they correspond to supported filenames  \n\nUEFI mode - **Mint UEFI** Grub2 booting with FAT32 file \\\\EFI\\\\Boot\\\\BOOTx64.EFI and **\\\\Boot\\\\grub\\\\grub.cfg** and **\\\\Boot\\\\grub\\\\grub_Linux.cfg**   \n\nUEFI mode - **Super UEFI** Grub2 booting with FAT32 file \\\\EFI\\\\Boot\\\\BOOTx64.EFI and **\\\\grub\\\\grub.cfg** and **grub_Linux.cfg** Menu  \nMBR BIOS - a1ive Grub2 installed in MBR booting with **\\\\grub\\\\grub.cfg** and **grub_Linux.cfg** Menu  \n\n**Grub4dos** is used for booting in MBR **BIOS mode** using Menu created with **menu.lst** and **menu_Linux.lst**  \n\nIn case UEFI Grub2 is not available as Boot option in your F8 Boot Menu then you need to use BOOTICE to Add UEFI entry.  \nUnneeded for USB-Stick, but UEFI Grub2 boot entry is easily lost in case of Portable SSD.  \nSelect as UEFI Boot entry the Linux Mint Grub2 file \\\\EFI\\\\Boot\\\\BOOTx64.EFI  \n\n[![UEFI_Grub2.png](http://reboot.pro/uploads/monthly_12_2018/post-9517-0-17791600-1546174935_thumb.png)](http://reboot.pro/uploads/monthly_12_2018/post-9517-0-17791600-1546174935.png \"UEFI_Grub2.png - Size: 130.9KB\"){#ipb-attach-url-16342-0-12217700-1675916445}   \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**a1ive Grub2 File Manager Info:**  \nNot needed since booting straight with Linux ISO using Grub4dos in BIOS mode and Grub2 in UEFI mode is preferred.  \nBut if you prefer support of [a1ive Grub2 File Manager](https://github.com/a1ive/grub2-filemanager/releases \"External link\") - Download Addons at [wimb GitHub](https://github.com/wimbrts \"External link\")  \nUse R-mouse 7-zip menu to **Extract here** will Add the content of addon to existing folder and confirm Overwrites with yes  \n\nIn x64 program use **Super**UEFI**** as Grub2 Manager setting for support of a1ive Grub2 File Manager  \nIn this way the files of [a1ive Grub2 File Manager](https://github.com/a1ive/grub2-filemanager/releases \"External link\") and [Super-UEFIinSecureBoot-Disk_minimal_v3](https://github.com/ValdikSS/Super-UEFIinSecureBoot-Disk/releases \"External link\") ([more info](https://habr.com/ru/post/446238/ \"External link\")) are Added to the USB Multi-Boot Drive  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**How to Boot from USB with AIO Boot**   \n- USB_FORMAT - Format USB Drive with MBR and 2 Partitions \u003d Active FAT32 + NTFS  \n- Download [AIOBoot-v0.9.9.8.7z](https://github.com/nguyentumine/AIO-Boot/releases \"External link\") - Unpack and Copy content of folder AIOBoot-v0.9.9.8 to USB FAT32 and overwrite existing UEFI Boot files  \n- On USB run AIOCreator.exe - Select Integration Linux OS and your Linux ISO  \n- UEFI_MULTI will Keep AIO UEFI files and Add a1ive Grub2 File Manager to AIO\\\\grubfm and Add Boot Manager entry \\\\AIO\\\\grub\\\\grub2win  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**UEFI_MULTI - Make Multi-Boot USB-Drive**  \n\u003d  \n\n\u003d  \nWin8.1SE x64 boot.wim of size 400 MB is Universal WIM Boot Image file for booting BIOS and UEFI computers  \nThanks to **ChrisR** for making Win8.1SE - [http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")  \n\n[Click here to download this file](http://reboot.pro/index.php?app\u003ddownloads\u0026showfile\u003d279 \"\")   \n"
    },
    {
      "id": "168079",
      "timestamp": "2013-02-18T07:11:29+00:00",
      "author": "wimb",
      "content": "\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**\\*\\*\\* UEFI MULTI - Make Multi-Boot USB-Drive \\*\\*\\***   \n\n**Booting with Boot Manager Menu and using Boot Image files - VHD IMG ISO and WIM**   \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\nUEFI_MULTI.exe is program to make Multi-Boot USB-Drive to boot computers having BIOS or UEFI firmware  \n\nRun UEFI_MULTI and Extract to simple path\n\n**In Win 7/8 OS Set User Account Control Off and Reboot**   \n**For UEFI Boot support then Windows 8x64 or 10x64 is needed as operating system**\n\nMore Info including Windows 10 is here [http://www.msfn.org/...comment\u003d1120509](http://www.msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/?do\u003dfindComment\u0026comment\u003d1120509 \"External link\")\n\nand [http://reboot.pro/to...multi/?p\u003d168077](http://reboot.pro/topic/18182-uefi-multi/?p\u003d168077 \"\")  \nand [http://reboot.pro/to...t-usb-harddisk/](http://reboot.pro/topic/17877-uefi-windows-8-bios-grub4dos-multiboot-usb-harddisk/ \"\")  \n\nDownload - [http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\nThe zip file is protected with password **bootwimb**   \n\nUEFI_MULTI - Make Multi-Boot USB-Drive  \n\n\u003cbr /\u003e\n\n\u003d  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**Section 1. - Prepare FAT32 USB-Stick Or MBR USB-Harddisk for Booting with Boot Manager Menu**\n\n**In Win 7/8 OS Set User Account Control Off and Reboot**   \n**For UEFI Boot support then Windows 8x64 or 10x64 is needed as operating system**   \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\nUFD_FORMAT.exe - Tool to format USB-stick for Booting with Boot Manager Menu on BIOS or UEFI computer\n\nUse UFD_FORMAT in 7/8/10 OS to format USB-Stick with FAT32 and for Booting with Boot Manager Menu  \nFor fast booting into RAMDISK then USB 3.0 is advised e.g. use Kingston 100G3 32 GB  \n\nMore Info - [http://reboot.pro/to...140-ufd-format/](http://reboot.pro/topic/19140-ufd-format/ \"\")\n\n**FAT32 has size limit of 32 GB for Windows Format -**  \nUse 2nd Partition checkbox when USB-stick has size more than 32 GB, so that first Partition size is below the limit of 32 GB  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\nOr Prepare USB-Harddisk to have MBR and 3 Primary partitions\n\nMore info on using **DiskPart** script is here [http://www.msfn.org/...comment\u003d1120509](http://www.msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/?do\u003dfindComment\u0026comment\u003d1120509 \"External link\")  \n\nPreferred is to use Portable USB-harddisk e.g. Western Digital 500 GB Elements SE 2.5\" Or Samsung Portable S2  \n\nPrepare USB-Harddisk to have MBR and 3 Primary partitions  \n- Boot partition - Primary with FAT32 Format and Size e.g. 20 GB - Set Active  \n- System partition - Primary with NTFS Format and Size e.g. 100 GB  \n- Data partition - Primary with NTFS Format and Size e.g. rest of USB-harddisk  \n\nUse of the 3 partitions will be  \n- Boot FAT32 - for Boot files and Win8.1SE x64 boot.wim file and with folder images for ISO and other small Boot Image files  \n- System NTFS - for Win 7/8/10 VHD files and for Portable XP VHD running Life from USB  \n- Data NTFS - for PStart folder with Portable Apps and for all Windows Setup ISO files used by WinNTSetup3 to Install Windows on local harddisk\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\n**Section 2. - Prepare Boot Image files - 8.1SE x64 WIM or 8.1 x64 VHD Or IMG Or ISO file**\n\nMore Info on how to make Win10PE and Win8.1SE wim files is found here\n\n[http://www.msfn.org/...comment\u003d1120509](http://www.msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/?do\u003dfindComment\u0026comment\u003d1120509 \"External link\")\n\nDownload Win8.1SE from [http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")\n\nDownload Win 8.1 Enterprise Evaluation ISO from [http://technet.micro...r/hh699156.aspx](http://technet.microsoft.com/en-us/evalcenter/hh699156.aspx \"External link\")  \n9600.16384.WINBLUE_RTM.130821-1623_X64FRE_ENTERPRISE_EVAL_EN-US-IRM_CENA_X64FREE_EN-US_DV5.ISO  \n\nUse imdiskinst.exe to Install ImDisk driver (if not present already).  \nMount 8.1 x64 Setup ISO file in ImDisk Virtual drive - use Menu via R-mouse on ISO file  \n\nRun Win81SE82_Builder.exe - Select Source Drive with mounted ISO and use Play to make Win8.1SE x64 boot.wim  \nIn UEFI_MULTI.exe you will use boot.wim in ISO\\\\WIM\\\\sources and file boot.sdi from folder ISO\\\\WIM\\\\Boot\n\n**Additional Info for making other Boot Image files:**   \nThe XP/7/8 Mini Windows VHD\u0027s of 1.2 - 2.5 GB are loaded from USB into RAMDISK and can be made according to  \n[http://reboot.pro/to...ct-make-mini-8/](http://reboot.pro/topic/18467-vhd-w8-compact-make-mini-8/ \"\")  \n[http://reboot.pro/to...ct-make-mini-7/](http://reboot.pro/topic/18593-vhd-w7-compact-make-mini-7/ \"\")  \n[http://reboot.pro/to...tall-xp-in-vhd/](http://reboot.pro/topic/18547-vhd-xp-setup-install-xp-in-vhd/ \"\")  \n[http://reboot.pro/to...t-make-mini-xp/](http://reboot.pro/topic/18657-vhd-xp-compact-make-mini-xp/ \"\")  \n\n\u003cbr /\u003e\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**Section 3. - UEFI_MULTI.exe is used to make Multi-Boot USB-Drive**   \n\n0. Connect USB-Drive and start computer with Windows 7/8/10 - x64 OS version  \n1. Run UEFI_MULTI.exe  \n2. Select USB Target Boot Drive - FAT32 needed for UEFI support  \n3. Select USB Target System Drive (for USB-Stick use same as Boot Drive)  \n4. Select Boot Image File - Win8.1SE x64 - Select boot.wim in ISO\\\\WIM\\\\sources  \nVHD is Copied always to NTFS System Drive - WIM and ISO are copied to FAT32 Boot Drive  \n5. Click GO to make Multi-Boot USB-Harddisk  \n6. You can use UEFI_MULTI.exe several times to Add more Boot Image files or to Add extra Source Folder content  \nOption to Select Source Folder UEFI_MULTI\\\\MULTI_BOOT for Copy to Boot Drive  \n\n\u003d\u003d \u003d\u003d\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\nBOOT_IMG can make Grub4dos Menu on Boot Drive for VHD Image Files copied to Target System Drive.  \nFix XP or Win 7/8 VHD for booting from USB-drive by using USB_XP_Fix.exe or USB_W78_Fix.exe\n\n**More Info for Install of Windows:**\n\n[http://www.msfn.org/...comment\u003d1120509](http://www.msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/page-2#entry1117324 \"External link\")\n\nDownload **Media Creation Tool** and use it to make USB-stick bootable in UEFI mode with Setup for Win10_x64\n\nor to make Win10_x64 ISO file that can be used with WinNTSetup for install of Windows 10 on existing GPT partioned harddisk.\n\n[https://www.microsof...nload/windows10](https://www.microsoft.com/en-us/software-download/windows10 \"External link\")\n\nYou can Install Win10 x64 direct in 25 GB VHD located on NTFS partition of portable USB-harddisk having MBR and FAT32 boot drive.  \n[http://www.msfn.org/...-2#entry1119716](http://www.msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/page-2#entry1119716 \"External link\")  \n\nAfter booting with WinPE from USB, then use WinNTSetup_x64.exe\n\nand Win10_x64 ISO file to prepare VHD or internal GPT partitioned harddisk drive for Install of Windows 10 x64\n\n[http://www.msfn.org/...inntsetup-v386/](http://www.msfn.org/board/topic/149612-winntsetup-v386/ \"External link\")\n\nAfter booting from USB you can use portable App WinNTSetup to mount the Setup ISO in ImDisk Virtual Drive.  \nWinNTSetup will prepare local harddisk for Install of XP/7/8/10  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**Section 4. - UEFI Secure Boot - Multi-Boot of Linux Fedora-18 + Windows 8 from USB-harddisk (option)**   \n\nDownload Fedora-18-x86_64-Live-Desktop.iso from [http://fedoraproject.org/get-fedora](http://fedoraproject.org/get-fedora \"External link\")  \nDownload and use liveusb-creator-3.11.7-setup.exe from [https://fedorahosted...iveusb-creator/](https://fedorahosted.org/liveusb-creator/ \"External link\")  \nInfo [http://docs.fedorapr..._USB_Media.html](http://docs.fedoraproject.org/en-US/Fedora/18/html/Installation_Guide/Making_USB_Media.html \"External link\")  \n\nFirst prepare Fedora 18 LIVE USB-stick with files vmlinuz0 and initrd0.img from isolinux copied to folder LiveOS  \nand using in grub.cfg the commands linuxefi and initrdefi and root\u003dlive:LABEL\u003dLIVE  \n\nThen prepare Multi-Boot of Fedora-18 + Windows 8 from USB-harddisk as follows.\n\n**Add Grub2 EFI Boot Manager for UEFI booting of Linux Fedora-18 or Parted Magic**   \n\nIn UEFI_MULTI.exe use Add Grub2 EFI Boot Manager for UEFI booting of Linux Fedora-18 or Parted Magic  \nExisting file /efi/boot/bootx64.efi of Windows 8/10 is renamed as 8bootx64.efi to enable Multi-Boot of Win8/10 and Linux.  \nFolder efi with Fedora-18 Secure Boot files is copied from UEFI_MAN to USB Boot Drive.  \n\nFedora-18 Secure Boot files efi\\\\boot\\\\BOOTX64.efi and efi\\\\boot\\\\grubx64.efi are used  \nand we use Fedora vmlinuz0 and initrd0.img in LiveOS folder of Fedora-18 copied to USB Boot Drive.  \nThe name of the USB Boot Drive with LiveOS folder must be specified and is in my case 2_BOOT  \n\n**efi\\\\boot\\\\grub.cfg**\n\n\u003e set timeout\u003d10\n\u003e set default\u003d0  \n\u003e\n\u003e menuentry \u0027Fedora-18 LIVE USB 2_BOOT\u0027 --class fedora --class gnu-linux --class gnu --class os {  \n\u003e linuxefi /LiveOS/vmlinuz0 root\u003dlive:LABEL\u003d2_BOOT ro rd.live.image rhgb   \n\u003e initrdefi /LiveOS/initrd0.img  \n\u003e }  \n\u003e\n\u003e menuentry \"Parted Magic 64\" --class gnu-linux --class gnu --class os {  \n\u003e linuxefi /pmagic/bzImage64  \n\u003e initrdefi /pmagic/initrd.img  \n\u003e }  \n\u003e\n\u003e menuentry \"Windows 8 x64 EFI\" {  \n\u003e chainloader /efi/boot/8bootx64.efi  \n\u003e }\n\nWindows 8/10 should NOT be default.\n\nFor booting Parted Magic Linux it is needed to copy pmagic folder to USB Boot Drive and in UEFI to Disable Secure Boot  \n\nBooting in BIOS mode with Fedora LiveOS folder on USB partition with LABEL 2_BOOT  \nthen we can use Grub4dos with entry in menu.lst  \n\n**menu.lst**\n\n\u003e title Fedora-18 LIVE USB 2_BOOT\n\u003e find --set-root /LiveOS/vmlinuz0  \n\u003e kernel /LiveOS/vmlinuz0 root\u003dlive:LABEL\u003d2_BOOT ro rd.live.image quiet rhgb   \n\u003e initrd /LiveOS/initrd0.img\n\nrhgb \u003d redhat graphical boot - This is a GUI mode booting screen with most of the information hidden\n\nquiet \u003d hides the majority of boot messages before rhgb starts. These are supposed to make the common user more comfortable.  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nAfter the introduction of Windows 8 in september 2012, then new computers with Windows 8 or 10 are characterized\n\nby having a GPT partitioned harddisk booting in UEFI secure mode through efi folder on hidden FAT32 boot drive.\n\nXP is not compatible with GPT partitioning and is not compatible with UEFI boot mode.\n\nXP can be used on such computers by booting in BIOS mode with grub4dos from FAT32 USB-stick\n\nand using XP installed in VHD located on NTFS partition of second internal MBR patitioned harddisk.\n\n**Install of XP in VHD** is described here\n\n[http://reboot.pro/to...tall-xp-in-vhd/](http://reboot.pro/topic/18547-vhd-xp-setup-install-xp-in-vhd/ \"\")  \n\n**- Install of XP or Windows 7/8/10**   \n\n1. Boot from USB or from Network with Win8.1SE x64 boot.wim selected in Boot Manager Menu  \n2. Use portable App WinNTSetup_x64.exe and click tab - Windows XP or Windows 7/8  \n3. Select Installation files - Use R-mouse to mount XP/7/8 Setup ISO file in ImDisk Virtual Drive  \n4. Select Boot and Installation (Target) Drive for Install of XP/7/8/10  \n5. Quick Format Target Drive via F or via R-mouse menu in My Computer - use NTFS FileSystem  \n6. WinNTSetup3 - Setup will prepare Target Drive of local harddisk for Install of XP/7/8/10  \n7. Reboot from Target Drive and Install XP/7/8/10  \n8. Open Device Manager via R-mouse on My Computer  \n9. Install missing drivers XP/7 by using extracted DriverPacks  \n\nWin8.1SE - [http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")  \nUEFI_MULTI - [http://reboot.pro/to...t-usb-harddisk/](http://reboot.pro/topic/17877-uefi-windows-8-bios-grub4dos-multiboot-usb-harddisk/ \"\")  \nTiny PXE Server - [http://reboot.pro/fi...iny-pxe-server/](http://reboot.pro/files/file/303-tiny-pxe-server/ \"\")  \nPXE wimboot 8.1 - [http://reboot.pro/to...e-2#entry182393](http://reboot.pro/topic/19015-boot-mini-windows-vhd-from-network-via-ipxe/page-2#entry182393 \"\")  \nWinNTSetup3 - [http://www.msfn.org/...612-winntsetup-](http://www.msfn.org/board/topic/149612-winntsetup- \"External link\")  \nDriverPacks - [http://driverpacks.net/downloads](http://driverpacks.net/downloads \"External link\")  \nWin 8.1 Enterprise Evaluation x64 - [http://technet.micro...r/hh699156.aspx](http://technet.microsoft.com/en-us/evalcenter/hh699156.aspx \"External link\")  \n\nFor UEFI + BIOS booting from USB then Windows 8.1 x64 need to be used as Source.  \nThere are now three Universal solutions for booting from USB on UEFI + BIOS computers:  \n- Win8.1SE x64 boot.wim of size 400 MB booting from RAMDISK  \n- Portable W864USP1.vhd of size 3.5 GB booting as FILEDISK  \n- Full Windows 8.1 Pro installed in 15 GB VHD or any Windows 8.1 on USB SYSTEM partition of size 50 GB  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**How to Install Windows 7/8 in VHD and to Make Mini 7/8 VHD for booting from USB ?**   \n\n- Direct Install Windows 7 Ultimate or 8 Pro in a 15 GB VHD file on local harddisk created by WinNTSetup_x64.exe with Ctrl + Shift + V  \n- Boot Drive can be FAT32 or NTFS USB-Stick made with UFD_FORMAT.exe so that normal booting of the internal harddisk is not changed  \n\n1. Boot from USB or from Network with Win8.1SE x64 boot.wim selected in Boot Manager Menu  \n2. Use portable App WinNTSetup_x64.exe and click tab Windows 7/8  \n3. Select Installation files - Use R-mouse to mount 7/8 Setup ISO file in ImDisk Virtual Drive  \n4. Use WinNTSetup button VHD to Create 15 GB VHD file on local harddisk  \n5. Select Boot Drive (USB-Stick) and Installation Drive (mounted VHD file) for Install of 7/8  \nIn WinNTSetup3 - Tweaks - Select all System Tweaks so that UAC is off etc.  \n6. WinNTSetup3 - Setup will prepare VHD on local harddisk for Install of 7/8  \n7. Reboot from Boot Drive and Install 7/8 in VHD  \n8. Open Device Manager via R-mouse on My Computer  \n9. Install missing drivers by using extracted DriverPacks  \n\nAfter booting with Windows 7/8 VHD then Check to have Switched Off :  \nUAC + Defender + pagefile + System Restore + Hibernate + Windows Update + Action Center settings Disable ALL options  \n\nHibernate OFF is needed via cmd window with\n\n```\npowercfg -h OFF\n```\n\nInstall FiraDisk driver with R-mouse on firadisk.inf in makebt\\\\firadisk-driver- folder  \nThe 64-bit FiraDisk driver requires to boot with testsigning switched on  \n\nOpen Command Prompt as Administrator:\n\n```\nbcdedit /set testsigning on\n```\n\nReboot to activate testsigning - Info [http://msdn.microsof...y/ff553484.aspx](http://msdn.microsoft.com/en-us/library/ff553484.aspx \"External link\")  \n\n- After Install then Copy Windows 7/8 VHD file to USB and use USB_W78_Fix.exe to fix for booting from USB-drive  \n\n\u003cbr /\u003e\n\nInstall 7/8 in VHD and Make Mini 7/8 VHD for booting from USB  \n[http://reboot.pro/to...ct-make-mini-8/](http://reboot.pro/topic/18467-vhd-w8-compact-make-mini-8/ \"\")  \n[http://reboot.pro/to...ct-make-mini-7/](http://reboot.pro/topic/18593-vhd-w7-compact-make-mini-7/ \"\")  \n\nInstall XP in VHD and Make Mini XP VHD for booting from USB  \n[http://reboot.pro/to...tall-xp-in-vhd/](http://reboot.pro/topic/18547-vhd-xp-setup-install-xp-in-vhd/ \"\")  \n[http://reboot.pro/to...t-make-mini-xp/](http://reboot.pro/topic/18657-vhd-xp-compact-make-mini-xp/ \"\")  \n\nThe XP/7/8 Mini Windows VHD\u0027s of 1.2 - 2.5 GB are loaded from USB-Stick into RAMDISK by Grub4dos and using WinVBlock or FiraDisk driver  \nGrub4dos booting with VHD loaded into RAMDISK cannot be used on UEFI computers.  \n\nFor UEFI + BIOS booting then Windows 8.1 x64 need to be used as Source.  \nYou can make Portable W864USP1.vhd of size 3.5 GB for booting from USB and direct selected in Boot Manager Menu.  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**How to prepare XP Setup Source ? - Prepare XP Setup ISO file with integrated UpdatePack and DriverPacks**   \n\nTake care that your XPSOURCE Folder is located on your Harddisk in a simple Path without SPACES.  \nCopy the Content of your Windows XP Setup CD to your XPSOURCE Folder on Harddisk  \n\nFirst Integrate ServicePack SP3 in your XP-SP2 Source (don\u0027t use here nLite).  \n[http://www.helpwithw...ice_Pack_3.html](http://www.helpwithwindows.com/WindowsXP/Slipstreaming_Windows_XP_Service_Pack_3.html \"External link\")  \nDownload from - [http://www.microsoft...aylang\u003den\\\u0026id\u003d24](http://www.microsoft.com/download/en/details.aspx?displaylang\u003den\u0026id\u003d24 \"External link\")  \n\nIn Command Window use for English version and XPSOURCE folder on drive E:\n\n```\nWindowsXP-KB936929-SP3-x86-ENU.exe /integrate:E:\\XPSOURCE\n```\n\nSiginet\u0027s RyanVM Integrator 1.6 can then be used to Integrate Windows UpdatePacks in the XP-Source.  \n[http://integrator.si...ex.php?download](http://integrator.siginetsoftware.com/index.php?download \"External link\")  \nDownload preferred version RVM Integrator 1.6.1 Beta 2.1  \n\nWindows XP UpdatePacks and Addons:  \nOnepiece XP Post-SP3 AIO Update Pack FINAL - [http://www.ryanvm.ne...opic.php?t\u003d6438](http://www.ryanvm.net/forum/viewtopic.php?t\u003d6438 \"External link\")  \nOnepiece XP Post-SP3 AIO International Update Packs FINAL - [http://www.ryanvm.ne...pic.php?t\u003d10445](http://www.ryanvm.net/forum/viewtopic.php?t\u003d10445 \"External link\")  \nDutch Update Pack - [http://www.ryanvm.ne...opic.php?t\u003d8428](http://www.ryanvm.net/forum/viewtopic.php?t\u003d8428 \"External link\")  \nRyanVM Forum - [http://www.ryanvm.net/forum/](http://www.ryanvm.net/forum/ \"External link\")  \n\nFor Install of XP on a modern system with SATA Drives it is needed to use DPsBase.exe  \nfor Integrating in your XPSOURCE DriverPack Massstorage with TXT Mode Enabled.  \n[http://driverpacks.net/downloads](http://driverpacks.net/downloads \"External link\")  \nIn that case a lot of Extra RAID SCSI and SATA Drivers (about 120 extra) are Integrated which appear in the  \nXP Setup BootFolder $WIN_NT$.\\~BT on Install-Drive and can prevent a lot of XP Install Boot Problems.  \nUse DPsBase.exe to Integrate DriverPacks Chipset + Processor + MassStorage + LAN + WLAN DriverPacks  \nwhich will then be located in OEM Folder in your XPSOURCE folder  \nAlways first use RyanVM Integrator and then use DPsBase to Improve your XP-Source  \nDPsBase makes presetup.cmd in folder I386 and changes the I386\\\\winnt.sif file for use of DriverPacks  \n\npresetup.cmd in folder I386 will start decompression of DriverPacks located in OEM folder  \nat the beginning of GUI-mode of XP Setup, which does NOT take to much time for the 5 DriverPacks  \n\nYou should select to Keep The Drivers for Chipset + Processor + MassStorage + LAN  \nThen WINDOWS\\\\DriverPacks is about 135 MB which is acceptable and provides a lot of extra driver support  \nwhich is useful to make XP Universal and adapt easily to very different hardware.  \nIn that case the DevicePath is set accordingly in key  \nHKEY_LOCAL_MACHINE\\\\SOFTWARE\\\\Microsoft\\\\Windows\\\\CurrentVersion  \nso that XP can automatically make use of these drivers for adjusting to New Hardware  \n\nWhen you don\u0027t use nLite, you can copy the supplied $OEM$ folder to your XP Source folder  \nChange $OEM$ folder to your needs for UserAccounts and Registry Tweaks and Adding Drivers  \nCMDLINES.TXT is used for making UserAccounts and install of Registry Tweaks at T-12  \nInfo see: [http://unattended.ms.../unattended.xp/](http://unattended.msfn.org/unattended.xp/ \"External link\")  \n\nUse DriverForge.v4.5.4.exe to Install from C:\\\\Drivers at T-9 of GUI XP Setup (just for the last Reboot).  \nDriverForge.v4.5.4.exe was made by kickarse [http://www.msfn.org/...howtopic\u003d110783](http://www.msfn.org/board/index.php?showtopic\u003d110783 \"External link\")  \nAt end of TXT-mode XP Setup the folder $OEM$\\\\$1\\\\Drivers is copied to C:\\\\Drivers  \nand $OEM$\\\\$1\\\\Install\\\\DriverForge.v4.5.4.exe is copied to C:\\\\Install  \nFor Auto Use of DriverForge at T-9 add uncompressed driver folders in $OEM$\\\\$1\\\\Drivers  \nand Uncomment two rules by removing ; in winnt.sif file copied from winnt_sif to your I386 folder  \nThis is very useful for Install of your well known Audio and Video driver during GUI-mode of XP Setup.\n\n```\n[SetupParams]UserExecute \u003d \"%SystemDrive%\\INSTALL\\SetupPar.cmd\"\n```\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**How to make XP Setup ISO File ?**   \n\n- Use BBIE (see below) or Isobuster to Extract Boot Image bootsect.bin from Original bootable XP Setup CD  \nbbie will make image1.bin that you can copy as bootsect.bin to XP Setup source folder  \n- Reduce Size of XP Setup Source folder (if needed to fit on CD then remove folders LANG WIN9XMIG WIN9XUPG)  \n- Use ImgBurn and bootsect.bin to make Bootable CD  \n\n1. Remove 3 folders LANG WIN9XMIG WIN9XUPG - reduction in size \u003d 135 MB  \n2. Run ImgBurn - Portable Tool in PStart Menu - IMG_XP\\\\MULTI\\\\PStart\\\\Progs\\\\ImgBurn  \n- Select Write files/folders to disc  \n- Output - Select Image File  \n- Browse Source folder and Select your XP Setup Source folder  \n- Browse Destination file - Give Name e.g. XP-Setup.iso  \n- Labels ISO 9660 - Give Name e.g. XP-Setup  \n- Advanced Restrictions - ISO9660 - Select Level X and DOS CharSet with 4x Checkbox On (allow ...)  \n- Bootable Disc - Make Image bootable - Checkbox On - Browse Boot Image - Select bootsect.bin file  \n- Bootable Disc - Emulation Type \u003d None  \nLoad Segment \u003d 07C0  \nSectors to Load \u003d 4  \n\n\u003cbr /\u003e\n\nBOOT_USB\\\\makebt\\\u003ebbie M:\\\\XP3_1307.iso  \nBBIE - Bart\u0027s Boot Image Extractor v1.0, Â© 2001, Bart Lagerweij  \nwill make BOOT_USB\\\\makebt\\\\image1.bin that you can rename as bootsect.bin  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\n**PXE wimboot is very handy and fast for booting of Win8.1SE boot.wim from Network**   \n\nHow to make Win8.1SE boot.wim  \n[http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")  \n\nDownload Tiny PXE Server - [http://reboot.pro/fi...iny-pxe-server/](http://reboot.pro/files/file/303-tiny-pxe-server/ \"\")  \n\nUsing iPXE and wimboot, you can boot into Windows PE via HTTP.  \n[http://ipxe.org/wimboot](http://ipxe.org/wimboot \"External link\")  \n\nIn case of Windows 8 then bootmgr.exe must be used instead of bootmgr  \n[http://blog.devicenu...ver-2012r2.html](http://blog.devicenull.org/2013/11/14/ipxe-wimboot-and-windows-server-2012r2.html \"External link\")  \n\nMore Info on how to use Tiny PXE Server for booting WIM and VHD from Network via iPXE  \n[http://reboot.pro/to...twork-via-ipxe/](http://reboot.pro/topic/19015-boot-mini-windows-vhd-from-network-via-ipxe/ \"\")  \n[http://reboot.pro/to...iny-pxe-server/](http://reboot.pro/topic/18962-bug-reports-requests-howtos-about-tiny-pxe-server/ \"\")  \n\nI copied folders Boot and sources from Win8.1SE_2014-01-30\\\\ISO\\\\WIM folder to pxesrv\\\\files folder  \n\nXP-W7-Setup\\\\pxesrv\\\\files\\\\wimboot.ipxe is auto used by pxesrv.exe when the given config.INI is used  \n\n**wimboot.ipxe**\n\n```\n#!ipxe\nset boot-url http://${dhcp-server}\nkernel ${boot-url}/wimboot\ninitrd ${boot-url}/bootmgr.exe                  bootmgr.exe\ninitrd ${boot-url}/Boot/bcd                     bcd\ninitrd ${boot-url}/Boot/fonts/segmono_boot.ttf  segmono_boot.ttf\ninitrd ${boot-url}/Boot/fonts/segoe_slboot.ttf  segoe_slboot.ttf\ninitrd ${boot-url}/Boot/fonts/segoen_slboot.ttf segoen_slboot.ttf\ninitrd ${boot-url}/Boot/fonts/wgl4_boot.ttf     wgl4_boot.ttf\ninitrd ${boot-url}/Boot/boot.sdi                boot.sdi\ninitrd ${boot-url}/sources/boot.wim             boot.wim\nimgstat\nboot\n```\n\nOr make Entry in menu.ipxe for PXE wimboot of Win8.1SE boot.wim file\n\n```\n:w81x64_wim\nkernel ${boot-url}/wimboot\ninitrd ${boot-url}/bootmgr.exe                  bootmgr.exe\ninitrd ${boot-url}/Boot/bcd                     bcd\ninitrd ${boot-url}/Boot/fonts/segmono_boot.ttf  segmono_boot.ttf\ninitrd ${boot-url}/Boot/fonts/segoe_slboot.ttf  segoe_slboot.ttf\ninitrd ${boot-url}/Boot/fonts/segoen_slboot.ttf segoen_slboot.ttf\ninitrd ${boot-url}/Boot/fonts/wgl4_boot.ttf     wgl4_boot.ttf\ninitrd ${boot-url}/Boot/boot.sdi                boot.sdi\ninitrd ${boot-url}/sources/boot.wim             boot.wim\nimgstat\nboot || goto failed\ngoto start\n```\n\nF12 hotkey can be used for PXE boot when LAN PXE Boot ROM is enabled in BIOS  \nF8 hotkey can be used to select PXE boot in BIOS Boot Menu  \n\n[http://reboot.pro/to...e-2#entry179107](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-2#entry179107 \"\")  \n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\n"
    },
    {
      "id": "168081",
      "timestamp": "2013-02-18T10:09:57+00:00",
      "author": "TheHive",
      "content": "![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif) If i get some time . Hope to test this.\n\n"
    },
    {
      "id": "170048",
      "timestamp": "2013-03-25T08:50:26+00:00",
      "author": "wimb",
      "content": "-  \n**\\*\\*\\* Update UEFI_MULTI Version 7.4 \\*\\*\\***  \n*  \n* Update - Fedora-18 Grub2 UEFI Secure Boot in folder UEFI_MAN\\\\efi_fedora18  \n* Update - BOOT_IMG - FileSize of Boot Images in Grub4dos Menu  \n* Changed - Program Version - latest version is 7.4  \n**Download** - [UEFI_MULTI](http://reboot.pro/files/file/279-uefi-multi/ \"\")  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\n"
    },
    {
      "id": "172271",
      "timestamp": "2013-05-11T08:24:50+00:00",
      "author": "wimb",
      "content": "-  \n**\\*\\*\\* Update UEFI_MULTI Version 7.5 \\*\\*\\***  \n*  \n* Update - AutoIt3 version 3.3.8.1  \n* Update - VHD Boot Menu also made for VHD already existing on System Drive  \n* Update - Improved text for some WARNING Message\u0027s  \n* Changed - Program Version - latest version is 7.5  \n**Download** - [UEFI_MULTI_75](http://reboot.pro/files/file/279-uefi-multi/ \"\")  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n\n"
    },
    {
      "id": "174071",
      "timestamp": "2013-06-26T16:57:00+00:00",
      "author": "ktp",
      "content": "@wimb  \n\nI am new to UEFI and I am experimenting a lot using your excellent UEFI_MULTI package.  \nFollowing are my reports and understandings. Please correct me if needed.  \n\nI have an USB hard disk with multiboot-capability with only one partition, MBR mode, NTFS format, using grub4dos (called OLD_MULTIBOOT).  \nWith UEFI/GPT, I understand that grub4dos does not support GPT, so I cannot use it for GPT disks (for example for internal hard disk of systems with Windows 8).  \nMy USB HDD is MBR, so grub4dos is OK but since it is in NTFS, it cannot boot on UEFI system, so I use your UEFI_MULTI  \nwhere the first partition (bootable) must be in FAT32, and contains EFI directory and files, to be able to boot on both  \nUEFI and non-UEFI (\u003dBIOS) system.  \n\nSo I understand that using UEFI_MULTI I can boot some UEFI-aware systems (like Parted Magic, Fedora, Ubuntu and Windows 8-64).  \nImportant question : Once booted UEFI Windows 8-64, in BCD there is an entry for grub4dos, does it mean that I can then boot all entries listed in my menu.lst on my existing USB HDD OLD_MULTIBOOT? If the answer is yes, then this is fantastic!  \nIn other words, this would mean:  \na- on BIOS systems, I can boot directly grub4dos and everything in my working menu.lst\n\nb- on UEFI systems, I can boot some UEFI-aware OSes, then by chainloading grub4dos from UEFI Windows boot manager, I can boot everything as in a).  \nCould you confirm or infirm?  \n\nNow about UEFI_MULTI procedure.  \nI did not understand the need for 4 partitions. So I use only 2 partitions: one primary in FAT32 about 20 GB,  \nthe other primary in NTFS. All in MBR mode. The new multiboot USB HDD is called NEW_MULTIBOOT.  \nIn FAT32 partition, I copied the /boot directory and bootmgr from OLD_MULTIBOOT USB HDD. The FAT32 partition has grub4dos installed in MBR.  \nIn NTFS partition, I copied my existing VHD bootable from my menu.lst.  \nThen I run UEFI_MULTI.exe: checked Add EFI Boot manager, Add grub4dos to Boot manager. Add VHD and add Boot Win7/8 are greyed out.  \nBoot image file: make_pe3 iso file. I manually copy pmagic and images directory to FAT32 partition. After completion, I tested in UEFI system.  \n- Refind EFI boot manager is OK  \n- Parted Magic 64 hang on black screen at boot  \n- Parted Magic 32 is OK  \n- I cannot boot Win8 x64 EFI. 8bootx64.efi not found.  \nSo I take it from bootx64.efi from existing Win8-64 system (hidden partition). Reboot: got message:  \n---  \nfailed to start  \nStatus: 0xc000000f  \n\\\\EFI\\\\Microsoft\\\\Boot\\\\BCD  \nInfo: The Boot Configuration Data for your PC is missing or contains errors.  \nSo I copied \\\\boot from FAT32 partition to \\\\EFI\\\\Microsoft (directory to be created first). Then reboot, choose Win8 VHD entry: the system reboots instead of booting Win8 VHD!\n\nIf I choose the grub4dos - XP entry, I got the message :  \nFile: \\\\grldr  \nStatus: 0xc000007b  \nInfo: The application or operating system couldn\u0027t be loaded because a required file is missing or contains errors.  \n---  \nIn FAT32, there is boot.ini created by UEFI_MULTI with content:  \n\\[Boot Loader\\]  \nTimeout\u003d20  \nDefault\u003dC:\\\\grldr  \n\\[Operating Systems\\]  \nC:\\\\grldr\u003d\"Start GRUB4DOS - XP Menu\"  \n---  \n\nSo I am stucked now.  \nPlease comment, thank you.  \n\nEdit: I made few progressions.  \n\nThe missing 8bootx64.efi file, the missing \\\\boot directory etc... problem were due to the  \nfact that either Win8 must be installed on USB system drive, or the Win8 USB stick recovery content  \nmust be copied to UEFI_MULTI\\\\MULTI_BOOT directory. Then in the program select copy to boot drive  \nwith source folder UEFI_MULTI\\\\MULTI_BOOT.  \n\nSince I also have a VHD to boot, I use EasyBCD to add this entry to the BCD. You need to add to FAT32  \n\\\\boot and \\\\efi\\\\microboot\\\\boot.  \n\nSo now on UEFI boot, I have 3 entries: Win8 VHD, Windows Setup, and grub4dos.  \n- Win8 VHD entry gives reboot!  \n- Windows setup entry works.  \n- grub4dos entry give 0x7B error with \\\\grldr!\n\n"
    },
    {
      "id": "174096",
      "timestamp": "2013-06-27T06:05:20+00:00",
      "author": "wimb",
      "content": "UEFI-mode needs FAT32 Boot drive and does NOT allow to boot with Grub4dos.  \nBIOS-mode is required to boot with Grub4dos  \nYou do a lot of manual copy steps that are not part of the described Procedure.  \nPlease first follow more exactly the description and let UEFI_MULTI do the work.  \n\u003e **Section 5. - UEFI_MULTI.exe is used to make Multi-Boot USB-Harddisk**  \n\u003e 0. Connect Portable USB-harddisk and start computer with Windows 7/8 - x64 version  \n\u003e 1. On first use then **Format** your USB Boot Drive with FAT32 - Boot files will be renewed by UEFI_MULTI.exe  \n\u003e 2. Run UEFI_MULTI.exe  \n\u003e 3. Select FAT32 Boot Drive of USB-harddisk  \n\u003e 4. Select NTFS System Drive of USB-harddisk (has Windows 8 Installed to USB System Drive)  \n\u003e 5. Select Source Folder UEFI_MULTI\\\\MULTI_BOOT for Copy to Boot Drive (will add soources\\\\boot.wim and pmagic folder)  \n\u003e 6. Select Boot Image File - VHD is Copied always to NTFS System Drive - ISO is copied to Boot Drive  \n\u003e 7. Optionally Add EFI Boot Manager for UEFI booting of Linux Parted Magic - Requires to Disable UEFI Secure Boot  \n\u003e 8. Click GO to make Multi-Boot USB-Harddisk  \n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "174104",
      "timestamp": "2013-06-27T09:06:44+00:00",
      "author": "ktp",
      "content": "@wimb  \n\nI tried again without any manual procedure, except the preparation like pmagic, System recovery stick.  \nThen I copied them as instructed to UEFI_MULTI\\\\MULTI_BOOT directory, then run section 5, using boot image file a VHD.  \nOf course option \"Add VHD to boot manager\" is then not greyed out and checked. Then I click on GO.  \n\nThe BCD produced in case of BIOS and UEFI are:  \nBIOS : \\\\boot\\\\bcd with entries :  \n- VHD (VHD, .vhd)  \n- Start Grub4dos (partition, \\\\grldr)  \nUEFI : \\\\efi\\\\Microsoft\\\\boot\\\\bcd with entries :  \n- Windows 8 (partition, \\\\windows)  \n- Windows setup (ramdisk, boot.wim)  \n\nI can boot successfully in both BIOS and UEFI modes. But I have some remarks:  \n1- I do not check \u0027Add grub4dos to boot manager\u0027 option, this entry is still added to BIOS BCD !  \n2- the VHD entry is added in BIOS BCD but not in UEFI BCD! In UEFI BCD, there is an entry for Windows 8 instead that I did not ask! (I do not have Windows 8 installed in the \"system\" drive: second partition of USB HDD, NTFS-formatted).  \nI have to edit this entry to point to the desired VHD.\n\n3- the Windows setup (\u003d repair) entry is not present in BIOS BCD.  \n\nI hope that the problems above would be handled in future version.  \nCurrently I plan to repartition my existing USB HDD (single MBR NTFS partition) so it can be multibooted (BIOS/UEFI). ![:clapping:](http://reboot.pro/public/style_emoticons/default/clapping.gif)  \n\n"
    },
    {
      "id": "174105",
      "timestamp": "2013-06-27T09:34:05+00:00",
      "author": "wimb",
      "content": "\u003e I can boot successfully in both BIOS and UEFI modes. But I have some remarks:  \n\u003e 1- I do not check \u0027Add grub4dos to boot manager\u0027 option, this entry is still added to BIOS BCD !  \n\u003e 2- the VHD entry is added in BIOS BCD but not in UEFI BCD! In UEFI BCD, there is an entry for Windows 8 instead that I did not ask! (I do not have Windows 8 installed in the \"system\" drive: second partition of USB HDD, NTFS-formatted).  \n\u003e I have to edit this entry to point to the desired VHD.\n\u003e\n\u003e 3- the Windows setup (\u003d repair) entry is not present in BIOS BCD.  \n\nOK, you made a lot of progress then ....\n\nGrub4dos entry is always added to BIOS BCD when grldr.mbr is not found (see caption in running UEFI_MULTI.exe)\n\nSo that is normal behaviour, because it is always desired to have Grub4dos support in BIOS mode\n\nand it provides a means to avoid having Win8 as default in BCD which would cause other options to be inaccessible.\n\nWhat kind of VHD did you select as Boot Image file and what driver does it have and can you boot that VHD from USB in UEFI-mode ?\n\nIn UEFI-mode you can boot (flat) Win8 x64 from \\\\efi\\\\microsoft\\\\boot\\\\BCD\n\nSo VHD like Win7- are not bootable in UEFI-mode and so NOT added to EFI Boot Manager Menu.\n\n"
    },
    {
      "id": "174124",
      "timestamp": "2013-06-27T15:31:51+00:00",
      "author": "ktp",
      "content": "@wimb  \n\nOK finally I made good progress.  \nWhat I said previously was wrong : the UEFI BCD does have Win8 VHD entry, but since it is labeled Windows 8,  \nI thought it was the flat Win8, not the Win8 VHD I requested. So the only problem remaining is no Windows setup (repair) entry  \nin BIOS BCD.  \n\u003e /\\\u003eSo VHD like Win7- are not bootable in UEFI-mode and so NOT added to EFI Boot Manager Menu.\n\nOh really? What is the reason, since Win7-64bit could be installed in UEFI mode?  \nWithout knowing that, in UEFI mode I tried to add Win7PE Wim (Win7PE iso) and Win8PE wim (from Win8PE iso).  \nIt boots, but then I got:  \n- for Win7PE wim: \\\\windows\\\\system32\\\\boot\\\\winload.efi 0xC000000f. OK my Win7PE is 32-bit, So I add the 2 files winload.efi and winresume.efi taken from Win8 to Win7E wim, and reboot: same problem.  \n- for Win8E wim (32-bit). It does have winload.efi already. Still Got message : 0xc0000359 \\\\windows\\\\system32\\\\boot\\\\winload.efi.  \n\nIf I could replace Win7PE and Win8PE with their 64-bit version and use their wim, I wonder whether they can be booted in UEFI mode?  \nI have no 64-bit wim to try.  \n\n\u003cbr /\u003e\n\nTo summarize what I understand by using UEFI_MULTI:  \na- with BIOS system, no problem for multiboot using known loaders (grub4dos, bootmgr, syslinux, ntldr...)  \nb- with UEFI system, if you can disable Secureboot and enable CSM (compatibility support modules), then same booting capabiliy as in a).  \nIf CSM disabled, and Secureboot enabled/disabled, you can boot EFI compatible systems as grub2, Win8-64, rEFInd, PartedMagic, Fedora, Ubuntu etc...  \nWin8-64 could in flat OS ou in VHD.\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "174128",
      "timestamp": "2013-06-27T18:19:50+00:00",
      "author": "wimb",
      "content": "\u003e What I said previously was wrong : the UEFI BCD does have Win8 VHD entry, but since it is labeled Windows 8,  \n\u003e I thought it was the flat Win8, not the Win8 VHD I requested. So the only problem remaining is no Windows setup (repair) entry  \n\u003e in BIOS BCD.  \n\u003e .........\n\u003e\n\u003e I have no 64-bit wim to try.  \n\nYou have tested already x64 boot.wim :smile:\n\nWin8 x64 Recovery boot.wim (Windows Setup entry) is working for me in UEFI but also in BIOS-mode.\n\nStrange that the entry in Boot\\\\BCD for BIOS-mode booting is missing for you.\n\nThe Win8 x64 VHD entry is NOT yet made for UEFI booting by UEFI_MULTI.exe , but I will make changes to make it appear.\n\nStrange that you say that the entry labeled Windows 8 is working for you to boot Win8 x64 VHD in UEFI-mode ![:hyper:](http://reboot.pro/public/style_emoticons/default/hyper.gif)\n\nIt is not yet in the program. Did you use in some way bcdboot to make it happen ?\n\nVHD_W8_Compact.exe is already able to make such entry for booting Win8 x64 VHD from USB in UEFI-mode.\n\nIn UEFI-mode then Grub4dos booting does NOT work, it is only available in BIOS-mode.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174139",
      "timestamp": "2013-06-28T07:17:52+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI_76.exe \\*\\*\\***\n\nDownload from [http://reboot.pro/fi...t-usb-harddisk/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-harddisk/ \"\")\n\nChanges:  \n- UEFI Boot Manager entry for Win8-x64 VHD is made.  \n- Update Grub4dos to version grub4dos-0.4.5c-2013-03-03.7z  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \n**@ktp**  \nBoot Manager entry for Recovery boot.wim is made in **Section 3** when Recovery USB-Stick is made.  \nWhen entry in Boot\\\\BCD is missing then the origin of the problem is NOT in UEFI_MULTI  \nbut in making Recovery USB-Stick.  \nPlease check if Stick has file Boot\\\\BCD and check that USB-Stick can boot in BIOS-mode.\n\n"
    },
    {
      "id": "174171",
      "timestamp": "2013-06-28T18:55:10+00:00",
      "author": "ktp",
      "content": "Good news! I succeeded to boot in UEFI mode through rEFInd EFI manager -\\\u003e Windows 8-64 bootmager EFI + booloader EFI a Win8PE-64 rescue environment (using the Win8PE-64 wim taken from its ISO file).  \n\nSo now in any UEFI system I can boot either:  \n- Windows 8-64 setup/repair  \n- Windows 8-64 VHD  \n- Windows 8-64 PE  \n\nNotes: I can also boot in UEFI mode Fedora 18, and Parted Magic, but they hang randomly (black screen) after some boot time activity.\n\n"
    },
    {
      "id": "174180",
      "timestamp": "2013-06-29T05:25:04+00:00",
      "author": "wimb",
      "content": "\u003e Good news! I succeeded to boot in UEFI mode through rEFInd EFI manager -\\\u003e Windows 8-64 bootmager EFI + booloader EFI a Win8PE-64 rescue environment (using the Win8PE-64 wim taken from its ISO file).  \n\u003e\n\u003e So now in any UEFI system I can boot either:  \n\u003e - Windows 8-64 setup/repair  \n\u003e - Windows 8-64 VHD  \n\u003e - Windows 8-64 PE  \n\u003e\n\u003e Notes: I can also boot in UEFI mode Fedora 18, and Parted Magic, but they hang randomly (black screen) after some boot time activity.\n\nWin 8-64 PE is included in Win 8-64 Repair boot.wim\n\nIt is nice that you can boot 8-64 PE boot.wim in UEFI-mode but it does not add something new,\n\nsince the 8-64 Repair boot.wim gives already that functionality and that boot.wim is made much easier using Configuration \\\u003e Recovery menu\n\nDo you have now also Win8 Repair boot.wim booting in BIOS-mode from Boot\\\\BCD ?\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174181",
      "timestamp": "2013-06-29T05:48:59+00:00",
      "author": "ktp",
      "content": "@wimb  \n\nYes, the latest UEFI_MULTI 7.6 works very well, I no longer have any problem.  \nThe Win8 Repair boot.wim is present in both BIOS and UEFI modes. Idem for Win8 VHD entry if checked in the application.  \nThank you for your great package.  \n\nYou are right, booting in UEFI Win8-64 PE is not new from booting boot.wim (Win8-64 Repair), just I am used  \nto boot and get quickly a PE environment with some convenience tools for rescue (shell, imdisk, network, audio, .NET framework...).The remaining function is provided by portable apps/Pstart so they are common to WinPE environments (mini-XP, mini-Win7, mini-Win8).  \nWhat is new and fantastic is that on UEFI systems, thanks to UEFI_MULTI, without changing BIOS setup to boot in legacy mode, I can still boot either Win8-64 VHD or Win8PE-64 for rescue. ![:thumbsup:](http://reboot.pro/public/style_emoticons/default/thumbsup.gif)\n\n"
    },
    {
      "id": "174189",
      "timestamp": "2013-06-29T08:57:18+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e some convenience tools for rescue (shell, imdisk, network, **audio** , **.NET framework**...).\n\nFirst time ever ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif) that someone in his right mind catalogs \"audio\" or \".Net framework\" among \"convenience tools ++*for rescue*++\".\n\nActually I am further surprised ![:hyper:](http://reboot.pro/public/style_emoticons/default/hyper.gif) that \".Net framework\" can be considered a \"tool\" and a \"convenient\" one. ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)\n\n*O tempora, o mores !*\n\n*[http://en.wikipedia....empora_o_mores!](http://en.wikipedia.org/wiki/O_tempora_o_mores! \"External link\")*\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "174192",
      "timestamp": "2013-06-29T09:18:09+00:00",
      "author": "ktp",
      "content": "Well I am not using .NET Framework directly, but some of my \"portable\" applications require it :-).\n\nBy the way, with this wonderful 1TB universal multi-boot USB 2\"5 HDD with 1 FAT32 + 1 NTFS partition used inside the Zalman ZM-VE300 (requires FAT32 firmware), I am very pleased with it.\n\nEdit:\n\nThe is however a problem of some big iso (\\\u003e 4 GB) that have to be put on second NTFS partition. But they usually can be booted with grub4dos or used after mounting with Imdisk (for Windows installation with WinNTSetup). The ZM-VE300 has also HDD write-protect function if needed, in case of use with infected systems.\n\n"
    },
    {
      "id": "174194",
      "timestamp": "2013-06-29T09:29:42+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Well I am not using .NET Framework directly, but some of my \"portable\" applications require it :-).\n\nSubverting basic equations ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif):\n\n* .Net Framework \u003d ***Evil*** Bloat\n* .Net Framework 4.0 \u003d ***Evil*** Bloat, but more bloated\n* \"portable\" application needing .Net framework \u003d **NON-**portable application\n\n![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif)\n\n![:rofl:](http://reboot.pro/public/style_emoticons/default/roll1.gif)\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "174195",
      "timestamp": "2013-06-29T09:35:46+00:00",
      "author": "ktp",
      "content": "How about Java applications? They can use portable Java run-time (cf. portableapps.com) which is the Oracle equivalent for MS .NET framework as far as I understand?\n\n"
    },
    {
      "id": "174199",
      "timestamp": "2013-06-29T14:18:11+00:00",
      "author": "ktp",
      "content": "Another good news: I succeeded to boot Win7PE-64 in UEFI mode. ![:happy_dance:](http://reboot.pro/public/style_emoticons/default/celebrate14.gif)\n\n"
    },
    {
      "id": "174201",
      "timestamp": "2013-06-29T14:46:37+00:00",
      "author": "wimb",
      "content": "\u003e Another good news: I succeeded to boot Win7PE-64 in UEFI mode. ![:happy_dance:](http://reboot.pro/public/style_emoticons/default/celebrate14.gif)\n\nThat is good news. How did you make it happen.\n\nBooting boot.wim from RAMDISK has probably less restrictions than booting Win 7-x64 VHD as Filedisk which always failed for me in UEFI-mode.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174202",
      "timestamp": "2013-06-29T14:57:00+00:00",
      "author": "ktp",
      "content": "@wimb\n\nI just take an existing Win7PE-64 iso, extract its wim then create a new entry WinPE (ramdisk) in UEFI mode (\\\\efi\\\\microsoft\\\\boot\\\\bcd) with EasyBCD, then use BcdTool under Win7PE-32 (7pe_x86_M) to change winload.exe into winload.efi.\n\nNote: BcdToold does not work under 64-bit environment :-(. EasyBCD works fine in all environement (real, or PE), 32 ou 64-bit, but it does not aware that UEFI is involved so it uses winload;exe instead of winload.efi).\n\nWhat tool do you use to edit BCD (apart from bcdedit command line)?\n\nNow I have to build 7pe_x64_M.iso by using your Make_PE3 package, it seems that it is allowed.\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "174207",
      "timestamp": "2013-06-29T15:53:27+00:00",
      "author": "wimb",
      "content": "\u003e What tool do you use to edit BCD (apart from bcdedit command line)?\n\u003e\n\u003e Now I have to build 7pe_x64_M.iso by using your Make_PE3 package, it seems that it is allowed.\n\nThanks for the Info.\n\nI use 7/8 bcdedit.exe and Win8 bcdboot.exe in admin command window and no other tool.\n\nFor VHD mounted as drive V: you can make Boot\\\\BCD and efi\\\\microsoft\\\\Boot\\\\BCD on Boot Drive T:\n\nby using Win8 bcdboot.exe with /f ALL option to support BIOS + UEFI firmware\n\n\u003e bcdboot.exe V:\\\\Windows /s T: /f ALL\n\nMay be can you try if Win7-x64.vhd can be used to boot in UEFI mode.\n\nFor me it was refused always ....\n\nCertainly 7pe_x64_M can be made with Make_PE3.exe :smile:\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174312",
      "timestamp": "2013-07-03T15:11:20+00:00",
      "author": "ktp",
      "content": "@wimb\n\nGood news: I test UEFI booting of my USB hard disk on another newer UEFI system delivered with Windows 8 (my previous tests were done on an older system, which has UEFI compatibility but mainly is BIOS, it does not have CSM or Secure boot).\n\nOn this newer UEFI system, everything is OK, with or without CSM enabled: Win8-64 full, Win8-64 VHD, Win8-64 PE, Parted Magic 32 and 64-bit, Ubuntu 64-bit (installed with BIOS mode). Fedora 18 boots OK but then the mouse is not reacting correctly, but it could be Fedora-related problem, not booting one.\n\nBy the way, I now use full Win8-32 VHD or Win8-64 VHD for rescue, boot time is fast, even faster than Win7PE, it could be even faster by booting directly from USB3.0 port (which Win7PE and earlier could not do). By using full VHD, there are many advantages over PE methods. Sample booting time: 1\u002703\" to boot on external USB 2.0 attached HDD with Win8-64 VHD. Win7PE-32 is longer: 1\u002715\".\n\n"
    },
    {
      "id": "174316",
      "timestamp": "2013-07-03T16:44:26+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e boot time is fast, even faster than Win7PE, it could be even faster by booting directly from USB3.0 port (++**which Win7PE**++ ++**and earlier could not do**++).\n\nAre you really sure-sure they could/can not? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nAFAICR it is just a matter of USB 3.x drivers ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "174317",
      "timestamp": "2013-07-03T17:01:26+00:00",
      "author": "ktp",
      "content": "\u003e Are you really sure-sure they could/can not? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\u003e\n\u003e AFAICR it is just a matter of USB 3.x drivers ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\u003e\n\u003e Wonko\n\nWell, I had bad experience with Win7 PE before.\n\nFirst, there are many USB 3.0 controller, not the Intel which is later much supported using NUSB3. One of my system uses Fresco Logic Controller, I have integrated this driver inside Win7PE using Make_PE3.\n\n- Once booted on USB 2.0, the USB 3.0 port can be used as USB 3.0.\n\n- On my \u0027old\u0027 system, there is no option (as on newer machine) to set in BIOS to support xHCI for program requiring it at boot time (so no way to benefit from USB 3.0 boot).\n\n- The USB 3.0 port does not show up at boot time (when an external USB HDD 2.0/3.0 is plugged).\n\n- On newer machine, where USB 3.0 is supported in BIOS and presented for HDD boot selection, with Win7PE I got the classical BSOD 0x7B. No time to investigate it (probably to change the startup type of driver?).\n\nWith Win8-32/64 full VHD, now no problem direct booting with USB 3;0, no more BSOD 0x7B (or equivalent screen), no tweak required! No problem of SxS, missing .Net framework, not functioning 32-bit portable applicatons... Ubuntu got this function long time before Windows: installation to USB HDD, boot anywhere.\n\n"
    },
    {
      "id": "174322",
      "timestamp": "2013-07-03T18:36:31+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e No time to investigate it (probably to change the startup type of driver?).\n\nAnd/or CriticalDeviceDataBase or Load Order. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n[http://www.911cd.net...showtopic\u003d23637](http://www.911cd.net/forums//index.php?showtopic\u003d23637 \"External link\")\n\n[http://www.911cd.net...showtopic\u003d24566](http://www.911cd.net/forums//index.php?showtopic\u003d24566 \"External link\")\n\n[http://www.911cd.net...showtopic\u003d25100](http://www.911cd.net/forums//index.php?showtopic\u003d25100 \"External link\")\n\n[http://reboot.pro/to...30-expresscard/](http://reboot.pro/topic/12974-boot-from-usb-pendrive-through-usb-30-expresscard/ \"\")\n\n[http://reboot.pro/to...69-usb3-issues/](http://reboot.pro/topic/16769-usb3-issues/ \"\")\n\n[http://reboot.pro/to...ssues/?p\u003d153457](http://reboot.pro/topic/16769-usb3-issues/?p\u003d153457 \"\")\n\nand following...\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "174364",
      "timestamp": "2013-07-04T10:34:51+00:00",
      "author": "ktp",
      "content": "@Wonko the Sane\n\nYou are right. I just checked again booting Win7PE-x86 made with make_PE3 through a machine with BIOS supported USB 3.0. It works! It looks like wimb has included all drivers and tweaks to make this happen.\n\n"
    },
    {
      "id": "174531",
      "timestamp": "2013-07-08T14:37:24+00:00",
      "author": "ktp",
      "content": "@wimb  \n\nFor your information.  \nFirst UEFI boot of Win7-64 VHD : Status 0xc0000221  \nInfo: The header checksum for this file doesn\u0027t match the computed checksum.  \n\nLater boots are OK, no more problem (second boot has a transient patch application). I used Win7-64 Ultimate.  \n\u003e /\\\u003e\n\u003e\n\u003e May be can you try if Win7-x64.vhd can be used to boot in UEFI mode.\n\u003e\n\u003e For me it was refused always ....\n\n"
    },
    {
      "id": "174536",
      "timestamp": "2013-07-08T17:12:04+00:00",
      "author": "wimb",
      "content": "\u003e First UEFI boot of Win7-64 VHD : Status 0xc0000221  \n\u003e Info: The header checksum for this file doesn\u0027t match the computed checksum.  \n\u003e\n\u003e Later boots are OK, no more problem (second boot has a transient patch application). I used Win7-64 Ultimate.\n\nThanks for testing. Good to know that it can work.\n\nFor me Win7x64 VHD does NOT boot yet after reboot in UEFI-mode from USB .....\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "174574",
      "timestamp": "2013-07-09T15:39:36+00:00",
      "author": "ktp",
      "content": "Hello,  \n\nIt have real surprise by measuring boot time for my VHDs. They are not fragmented (1 or 2 fragments max).  \nAll VHD have System restore Off, UAC off, no pagefile, Windows Defender disabled, fresh install.  \nWith USB 3.0 hard disk on port USB 2.0, VHD located on USB hard disk :  \n- Win8-32 VHD: 1\u002703\"  \n- Win8-64 VHD: 1\u002703\"  \n\nWith USB 3.0 key on port USB 2.0, VHD located on USB key :  \n- Win8-32 VHD: 30\"  \n\nFor comparision, booting time for:\n\n- mini XP: 40\"  \n- Win7PE-32: 1\u002715\"\n\nSo the surprise is very fast boot time with USB key. I will measure boot time with USB 3.0 port too. Even Win7PE (which is not a full Win7-32) takes longer time that booting full Win8 VHD.\n\nNote: boot time \u003d time after that the user gets the desktop and can run any other programs or activities.\n\n"
    },
    {
      "id": "177216",
      "timestamp": "2013-09-18T15:00:52+00:00",
      "author": "ktp",
      "content": "In fact the method seems to work also for removable USB key (stick), and not only for hard disk.\n\nOne can use appropriate paritioning tool (e.g. bootice version 0.78) to partition the USB key into two partitions, a small one in FAT32, and another one in NTFS for data. By using either wimb\u0027s USB_part_flip utility or Pauly\u0027s bootice version 0.78 (this version precisely), it is very easy to make the desired partition visible to Windows (remember: only the first partition entry of USB key MBR is visible to Windows).\n\nSo now we could have a handy, light USB key that is UEFI Multiboot capable, without requiring changing BIOS/UEFI settings to enable legacy/CSM module and disable Secureboot.\n\n"
    },
    {
      "id": "177221",
      "timestamp": "2013-09-18T16:17:42+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e In fact the method seems to work also for removable USB key (stick), and not only for hard disk.\n\nUSB 3.0 sticks (at least the \"high end\" ones) are NOT anymore \"flash sticks\" ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)\n\nThey are actually a USB 3.0 to SATA bridge + a SSD.\n\nNo particular surprise :wink: to find out that they are as fast as or faster than a \"conventional\" hard disk, as a matter of fact their speed should be compared to that of a \"normal\" SSD inside an external USB 3.0 case.\n\nIf you prefer on a \"conventional\" stick the bottleneck is the Flash speed (and not the USB 2.0 bus), whilst with hard disk (on USB 2.0 bus) the bottleneck is the bus itself.\n\nA typical \"old\" stick is around (very roughly) 20 Mb/sec, while USB 2.0 hard disks are around the 40 Mb/sec mark.\n\nA SSD being actually faster than a hard disk, will be (on USB 2.0) as fast as the bottleneck, i.e. around 40 Mb/sec, i.e. twice the speed of a Flash stick, and thus taking roughly half the time in booting.\n\nJFYI:\n\n[http://www.thessdrev...h-drive-review/](http://www.thessdreview.com/our-reviews/kingston-datatraveler-workspace-32gb-windows-to-go-usb-3-flash-drive-review/ \"External link\")\n\n[http://www.eteknix.c...rce-controller/](http://www.eteknix.com/mushkin-unveils-usb-thunder-flash-drives-with-sandforce-controller/ \"External link\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "177222",
      "timestamp": "2013-09-18T16:41:47+00:00",
      "author": "ktp",
      "content": "@Wonko the Sane\n\nThank you for the links. These products are attractive, but still expensive. The Kingston key 250 MB/s is guaranted only 2 years (vs. lifetime with Sandisk Cruzer Extreme USB 3.0 190 MB/s). And of course from users review there are heat problem. And the announced performance is only for big files, not for small one.\n\nMaybe I have to wait few more years, with the future arrival of planned USB 3.1? :-)\n\n"
    },
    {
      "id": "177223",
      "timestamp": "2013-09-18T16:58:36+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e .... is guaranted only 2 years (vs. lifetime with Sandisk Cruzer Extreme USB 3.0 190 MB/s). ...\n\nYep :smile:, but that far exceeds the average life of a USB stick (according to my personal experience and graphs with completely faked data ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif) :wink::\n\n[http://reboot.pro/to...ss/#entry175178](http://reboot.pro/topic/18748-unreliable-and-almost-useless/#entry175178 \"\")\n\n[http://reboot.pro/to...al-pe/?p\u003d166593](http://reboot.pro/topic/18056-the-universal-pe/?p\u003d166593 \"\")\n\nAnd in the meantime you will probably be running Windows 11.9 SP1Â¾, with a BOOTMGR and \\\\boot\\\\BCD (or equivalent) needing all the Gb\u0027s of your current stick..... ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "179107",
      "timestamp": "2013-11-01T07:31:14+00:00",
      "author": "wimb",
      "content": "For my computer configured in UEFI Secure boot mode, I found a way to boot it from USB-stick with Grub4dos Menu :smile:\n\nFor this purpose I make use of **key F12** that is normally used for PXE boot from Network.\n\nI have now the following sequence:\n\nUEFI Secure boot \\\u003e press F12 at first beep \\\u003e UEFI firmware reboots \\\u003e second beep and booting into BIOS compatible mode from next device e.g. my USB-Stick with Grub4dos Menu\n\nWhen I press again F12 at the second beep then I get PXE Boot ROM and can boot from Network or press Esc to boot Next device e.g. USB-Stick with Grub4dos Menu.\n\nNext device booting in BIOS compatible mode can be USB-Stick or portable USB-Harddisk or second internal Harddisk depending on BIOS Boot sequence settings.\n\nWhen pressing F8 at second beep then I get BIOS Boot Menu that allows me to select next device for booting into BIOS mode.\n\nIn this way I can for my computer configured for UEFI Secure Boot:\n\n- boot XP or Grub4dos from second internal harddisk\n\n- boot Grub4dos Menu on USB-Stick or portable USB-harddisk\n\nMore Info on computer hardware used is here [http://reboot.pro/to...sk/#entry164379](http://reboot.pro/topic/17877-uefi-windows-8-bios-grub4dos-multiboot-usb-harddisk/#entry164379 \"\")\n\nThe reboot of UEFI Firmware by pressing **F12** is warm and almost not noticeable and simply allows to boot next device in BIOS compatible mode ![:clap:](http://reboot.pro/public/style_emoticons/default/clap.gif) ![:clap:](http://reboot.pro/public/style_emoticons/default/clap.gif) ![:clap:](http://reboot.pro/public/style_emoticons/default/clap.gif)\n\nUEFI \\\u003e F12 \\\u003e BIOS \\\u003e auto next device e.g. USB-Stick with Grub4dos Menu or XP\n\nUEFI \\\u003e F12 \\\u003e BIOS \\\u003e F8 \u003d\u003d\\\u003e Bios Boot Menu select next device\n\nUEFI \\\u003e F12 \\\u003e BIOS \\\u003e F12 \u003d\u003d\\\u003e PXE Boot from Network\n\nUEFI \\\u003e F8 \u003d\u003d\\\u003e UEFI Boot Menu\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "179121",
      "timestamp": "2013-11-01T15:19:17+00:00",
      "author": "wimb",
      "content": "-  \n**\\*\\*\\* Update UEFI_MULTI Version 7.9 \\*\\*\\***  \n- Make Multi-Boot USB-Stick or USB-Harddisk  \n- Add Boot Image files of type VHD IMG ISO or WIM to Target USB or HDD  \n- UEFI + BIOS Support for Windows 8 Recovery Or 7/8 WinPE boot.wim files booting from RAMDISK  \n- Add WIM and VHD Boot Image files to Boot Manager Menu and make Grub4dos Menu for ISO or VHD  \n- ImDisk file imdiskinst.exe version 1.7.6  \n- Portable Apps - UEFI_MULTI.exe and BOOT_IMG.exe - latest version is 7.9  \n**Download** - [UEFI_MULTI_79](http://reboot.pro/files/file/279-uefi-multi/ \"\")  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "179508",
      "timestamp": "2013-11-13T09:06:33+00:00",
      "author": "wimb",
      "content": "-  \n**\\*\\*\\* Update UEFI_MULTI Version 8.0 \\*\\*\\***  \n- Make Multi-Boot USB-Stick or USB-Harddisk booting on BIOS or UEFI computer  \nXP/7/8 VHD 2 GB located on FAT32 USB-Stick is loaded in 3 min in RAMDISK for very fast Mini OS  \n- Added UFD_FORMAT - Tool to format USB-stick for Booting with Boot Manager Menu on BIOS or UEFI computer  \nMore Info - [http://reboot.pro/to...140-ufd-format/](http://reboot.pro/topic/19140-ufd-format/ \"\")  \n- Added USB_Part_Flip - to Exchange Partition Table Entries in MBR of USB-Stick -  \nallows to change which primary partition of the USB-stick is visible in Windows  \n- Add VHD to Boot Manager Menu improved in case of Win8x64 OS  \n**Download** - [UEFI_MULTI_80](http://reboot.pro/files/file/279-uefi-multi/ \"\")  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nFAT32 USB-Stick - Booting with ISO or VHD or WIM loaded into RAMDISK  \nMini Win 8 x32 VHD \u003d\u003d WinPE 4.0 boot.wim \u003d\u003d  \n[![W8x32-RAM.png](http://reboot.pro/uploads/monthly_11_2013/post-9517-0-89486300-1384586550_thumb.png)](http://reboot.pro/uploads/monthly_11_2013/post-9517-0-89486300-1384586550.png \"W8x32-RAM.png - Size: 450.67KB\"){#ipb-attach-url-14677-0-14936400-1676066388} \u003d\u003d [![PE4-W8Rec.png](http://reboot.pro/uploads/monthly_11_2013/post-9517-0-02459000-1384586598_thumb.png)](http://reboot.pro/uploads/monthly_11_2013/post-9517-0-02459000-1384586598.png \"PE4-W8Rec.png - Size: 467.07KB\"){#ipb-attach-url-14678-0-14922200-1676066388}\n\n"
    },
    {
      "id": "179691",
      "timestamp": "2013-11-19T06:49:32+00:00",
      "author": "wimb",
      "content": "When unsigned driver like FiraDisk is present in VHD, then UEFI Secure Boot of Win8x64 VHD requires  \nin Boot Manager menu press F8 to use Advanced Boot Options - Disable Driver Signature Enforcement.\n\n[![W8_BM_294.jpg](http://reboot.pro/uploads/monthly_11_2013/post-9517-0-02502400-1384843588_thumb.jpg)](http://reboot.pro/uploads/monthly_11_2013/post-9517-0-02502400-1384843588.jpg \"W8_BM_294.jpg - Size: 82.88KB\"){#ipb-attach-url-14683-0-14944800-1676066388} \u003d\u003d\\\u003e [![W8_Fira_295.jpg](http://reboot.pro/uploads/monthly_11_2013/post-9517-0-45469700-1384843603_thumb.jpg)](http://reboot.pro/uploads/monthly_11_2013/post-9517-0-45469700-1384843603.jpg \"W8_Fira_295.jpg - Size: 101.1KB\"){#ipb-attach-url-14684-0-14951500-1676066388} \u003d\u003d\\\u003e [![W8_Adv_296.jpg](http://reboot.pro/uploads/monthly_11_2013/post-9517-0-71247000-1384843620_thumb.jpg)](http://reboot.pro/uploads/monthly_11_2013/post-9517-0-71247000-1384843620.jpg \"W8_Adv_296.jpg - Size: 107.86KB\"){#ipb-attach-url-14685-0-14958100-1676066388}\n\nTestsigning Yes in BCD Menu is NOT enough, but need to be confirmed in this way.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "180243",
      "timestamp": "2013-12-05T14:47:46+00:00",
      "author": "wimb",
      "content": "YouTube Video on How to use UEFI_MULTI to Make Multi-Boot USB-Drive\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "180382",
      "timestamp": "2013-12-10T05:39:21+00:00",
      "author": "wimb",
      "content": "-  \n**\\*\\*\\* Update UEFI_MULTI Version 8.1 \\*\\*\\***  \n**Download -** [http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")  \nAdded UFD_FORMAT 8.1  \nUFD_FORMAT.exe - Tool to format USB-stick for Booting with Boot Manager Menu on BIOS or UEFI computer and  \nTool to make USB-Stick having two partitions - FAT32 Boot partition for WIM or ISO and NTFS System partition for VHD.  \nOption to Install Grub4dos in MBR BootCode, which allows BIOS computer to boot directly from USB with Grub4dos Menu.  \nOption to make Boot Manager and Grub4dos Menu on UFD to boot UEFI + BIOS directly from USB with Boot Manager Menu.  \nWindows 7/8 or 7PE is needed to make Boot Manager Menu and Win8 x64 is needed to make UEFI Boot Manager Menu.  \nMore Info - [http://reboot.pro/to...140-ufd-format/](http://reboot.pro/topic/19140-ufd-format/ \"\")  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "182149",
      "timestamp": "2014-02-07T13:15:59+00:00",
      "author": "wimb",
      "content": "-  \n**\\*\\*\\* Update UEFI_MULTI Version 8.2 \\*\\*\\***  \n- Improvement in detection of Overflow on Target Drives  \n- In all cases set {bootmgr} nointegritychecks yes  \n**Download** - [UEFI_MULTI_82](http://reboot.pro/files/file/279-uefi-multi/ \"\")  \nRun UEFI_MULTI_82.exe and Extract to simple path  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "182264",
      "timestamp": "2014-02-13T18:45:27+00:00",
      "author": "Southerner",
      "content": "\u003e **Section 1. - Prepare USB-Harddisk to have MBR and 3 Primary partitions**  \n\u003e Preferred is to use Portable USB-harddisk e.g. Western Digital 500GB Elements SE 2.5\" Or Samsung Portable S2  \n\u003e Prepare USB-Harddisk to have MBR and 3 Primary partitions  \n\u003e - Boot partition - Primary with FAT32 Format and Size e.g. 20 GB - Set Active  \n\u003e - System partition - Primary with NTFS Format and Size e.g. 50 GB  \n\u003e - Data partition - Primary with NTFS Format and Size e.g. rest of USB-harddisk  \n\u003e Use of the 3 partitions will be  \n\u003e - Boot FAT32 - for Boot files and Win8 Recovery boot.wim file in folder sources and with folder images for ISO and other small Boot Image files  \n\u003e - System NTFS - for Windows 8 System and for Portable XP VHD and Win7 VHD Image files running Life from USB  \n\u003e - Data NTFS - for PStart folder with Portable Apps and for all Windows Setup ISO files used by WinNTSetup2 to Install Windows on local harddisk  \n\u003e \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\u003e Why is the system partition so large? Does it actually need to be 50gb?  \n\u003e\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "182274",
      "timestamp": "2014-02-14T06:38:43+00:00",
      "author": "wimb",
      "content": "\u003e Why is the system partition so large? Does it actually need to be 50gb?\n\u003e\nYou can use smaller size if it is enough for your needs.\n\nIn my case I would like to have enough space for XP/7/8_x86/x64 VHD plus space for 7 or 8 x64 installed to partition.\n\nIn that case 50 GB is really needed and I have enough space available on portable USB harddisk.\n\nMay be 30 GB will do when you locate the VHD\u0027s on the DATA partition (primary NTFS).\n\nFrequently in testing I need more space than is available ..........\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "182322",
      "timestamp": "2014-02-17T19:29:50+00:00",
      "author": "oliverjia",
      "content": "Thanks wimb.\n\nDoes this support secure boot?\n\n"
    },
    {
      "id": "182327",
      "timestamp": "2014-02-18T15:27:08+00:00",
      "author": "wimb",
      "content": "\u003e Thanks wimb.\n\u003e\n\u003e Does this support secure boot?\n\nUEFI Secrure boot is supported e.g. in case of Win 8x64 VHD\n\n[http://reboot.pro/to...ct-make-mini-8/](http://reboot.pro/topic/18467-vhd-w8-compact-make-mini-8/ \"\")\n\n[![W81x64_I5.png](http://reboot.pro/uploads/monthly_02_2014/post-9517-0-90220700-1392796528_thumb.png)](http://reboot.pro/uploads/monthly_02_2014/post-9517-0-90220700-1392796528.png \"W81x64_I5.png - Size: 727.82KB\"){#ipb-attach-url-14809-0-14972900-1676066388} \u003d\u003d [![Mini81x64_I5_VHD.png](http://reboot.pro/uploads/monthly_02_2014/post-9517-0-55328600-1392796615_thumb.png)](http://reboot.pro/uploads/monthly_02_2014/post-9517-0-55328600-1392796615.png \"Mini81x64_I5_VHD.png - Size: 740.27KB\"){#ipb-attach-url-14810-0-14979300-1676066388}\n\nOr 8x64 boot.wim made with Win8.1SE\n\n[http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")\n\n[http://www.msfn.org/...-5#entry1069090](http://www.msfn.org/board/topic/170546-win81se/page-5#entry1069090 \"External link\")\n\n[![81SE_x64.png](http://reboot.pro/uploads/monthly_02_2014/post-9517-0-39859700-1392737213_thumb.png)](http://reboot.pro/uploads/monthly_02_2014/post-9517-0-39859700-1392737213.png \"81SE_x64.png - Size: 611KB\"){#ipb-attach-url-14808-0-14966200-1676066388}\n\nAlso Win8 x64 Recovery drive and Fedora 18 can be added to UEFI Secure Multi-Boot USB-drives\n\n[http://www.911cd.net...showtopic\u003d25269](http://www.911cd.net/forums//index.php?showtopic\u003d25269 \"External link\")\n\nIn any case It requires to use UEFI_MULTI.exe in Win8 x64 OS\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "182334",
      "timestamp": "2014-02-19T00:09:49+00:00",
      "author": "oliverjia",
      "content": "Many thanks wimb!\n\n"
    },
    {
      "id": "182356",
      "timestamp": "2014-02-20T13:49:15+00:00",
      "author": "wimb",
      "content": "-  \n**\\*\\*\\* Update UEFI_MULTI Version 8.3 \\*\\*\\***  \nBoot Manager Menu for adding boot.wim improved to allow booting of Win8.1SE  \nAdded ComboBox to select Grub2 Or REFIND as optional EFI Boot Manager  \n**Download** - [UEFI_MULTI_83](http://reboot.pro/files/file/279-uefi-multi/ \"\")  \nRun UEFI_MULTI_83.exe and Extract to simple path  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "183736",
      "timestamp": "2014-04-24T05:25:40+00:00",
      "author": "Franz Ferdinand II.",
      "content": "Hi, I have a basic question, can I use this tool to setup a multiboot partition on GPT dirve? (If not, is there a chance to make partition on GPT drive multiboot?)\n\nI already have reserved space on such drive, hard to convert to MBR due drive\u0027s size is \\\u003e2TB.\n\nCan I get some hint about required partitions layout?\n\nI mainly intend this to multiboot into Windows 8 installation media together with several bootable ISOs I pick.\n\n"
    },
    {
      "id": "183738",
      "timestamp": "2014-04-24T06:32:51+00:00",
      "author": "wimb",
      "content": "\u003e Hi, I have a basic question, can I use this tool to setup a multiboot partition on GPT dirve? (If not, is there a chance to make partition on GPT drive multiboot?)\n\u003e\n\u003e I already have reserved space on such drive, hard to convert to MBR due drive\u0027s size is \\\u003e2TB.\n\u003e\n\u003e Can I get some hint about required partitions layout?\n\u003e\n\u003e I mainly intend this to multiboot into Windows 8 installation media together with several bootable ISOs I pick.\n\nI expect that UEFI_MULTI.exe can be used with GPT drive, but have not tested GPT yet.\n\nIn any case you need a FAT32 Set Active Boot partition, that is visible as Drive and can be selected in UEFI_MULTI.exe as Target USB Boot Drive.\n\nRun UEFI_MULTI.exe in 7/8 x64 OS environment (preferred is Win 8.1 x64 or boot with Win8.1SE x64 boot.wim)\n\nDownload Win8.1SE from [http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")  \n\u003e Prepare USB-Harddisk to have 3 Primary partitions  \n\u003e - Boot partition - Primary with FAT32 Format and Size e.g. 20 GB - Set Active  \n\u003e - System partition - Primary with NTFS Format and Size e.g. 50 GB  \n\u003e - Data partition - Primary with NTFS Format and Size e.g. rest of USB-harddisk  \n\u003e Use of the 3 partitions will be  \n\u003e - Boot FAT32 - for Boot files and Win8.1SE x64 boot.wim file and with folder images for ISO and other small Boot Image files  \n\u003e - System NTFS - for Win 7/8 VHD Image files and for Windows 8 x64 System and for Portable XP VHD running Life from USB  \n\u003e - Data NTFS - for PStart folder with Portable Apps and for all Windows Setup ISO files used by WinNTSetup3 to Install Windows on local harddisk  \n\u003e\nDownload WinNTSetup3 from [http://www.msfn.org/...v33-v34-beta-1/](http://www.msfn.org/board/topic/149612-winntsetup-v33-v34-beta-1/ \"External link\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "183739",
      "timestamp": "2014-04-24T06:44:32+00:00",
      "author": "Franz Ferdinand II.",
      "content": "Thanks Wonko, may I get some help about primary partitions size distribution where I have reserved starting 64GB for them all.\n\nWhat I expect to boot from the drive is Win 8.1 installation media,optionally Win 7 installation media and about 20 bootable ISOs.\n\nI\u0027m not too clear where the Win 8 installation comes. Does UEFI_MULTI handle BCD entry for it\u0027s environment or do I have to add it self using EasyBCD?\n\n"
    },
    {
      "id": "183740",
      "timestamp": "2014-04-24T06:57:36+00:00",
      "author": "wimb",
      "content": "Wonko ?\n\nThe FAT32 Set Active Boot partition should have size smaller than 32 GB e.g. 20 GB so that you can use FAT32 Format.\n\nThe BCD entries for WIM and VHD and ISO Boot Image files are made by UEFI_MULTI.exe\n\nThe Win XP/7/8 Setup ISO files used as Installation media should be copied to the DATA partition.\n\nThese Setup ISO files have no BCD entry in USB FAT32 Boot Drive.\n\nAfter booting from USB you can use portable App WinNTSetup3 to mount the Setup ISO in ImDisk Virtual Drive.\n\nWinNTSetup3 will prepare local harddisk for Install of XP/7/8\n\n[http://www.msfn.org/...v33-v34-beta-1/](http://www.msfn.org/board/topic/149612-winntsetup-v33-v34-beta-1/ \"External link\")\n\n"
    },
    {
      "id": "183743",
      "timestamp": "2014-04-24T08:53:14+00:00",
      "author": "wimb",
      "content": "\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**\\*\\*\\* UEFI MULTI - Make Multi-Boot USB-Drive \\*\\*\\***  \n**Booting with Boot Manager Menu and using Boot Image files - VHD IMG ISO and WIM**  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \nUEFI_MULTI.exe is program to make Multi-Boot USB-Drive to boot computers having BIOS or UEFI firmware  \nRun UEFI_MULTI and Extract to simple path  \nBoot with Win 7/8 x64 OS and Set User Account Control Off and Reboot  \nMore Info here [http://reboot.pro/to...multi/?p\u003d168077](http://reboot.pro/topic/18182-uefi-multi/?p\u003d168077 \"\")  \nand here [http://www.911cd.net...showtopic\u003d25269](http://www.911cd.net/forums//index.php?showtopic\u003d25269 \"External link\")  \nand [http://reboot.pro/to...t-usb-harddisk/](http://reboot.pro/topic/17877-uefi-windows-8-bios-grub4dos-multiboot-usb-harddisk/ \"\")  \nDownload - [http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")  \nUEFI_MULTI - Make Multi-Boot USB-Drive  \n\u003d  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**Section 1. - Prepare FAT32 USB-Stick Or USB-Harddisk for Booting with Boot Manager Menu**  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \nUFD_FORMAT.exe - Tool to format USB-stick for Booting with Boot Manager Menu on BIOS or UEFI computer  \nUse UFD_FORMAT in 7/8 OS to format USB-Stick with FAT32 and for Booting with Boot Manager Menu  \nFor fast booting into RAMDISK then USB 3.0 is advised e.g. use Kingston 100G3 32 GB  \nMore Info - [http://reboot.pro/to...140-ufd-format/](http://reboot.pro/topic/19140-ufd-format/ \"\")  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \nOr Prepare USB-Harddisk to have 3 Primary partitions  \nPreferred is to use Portable USB-harddisk e.g. Western Digital 500 GB Elements SE 2.5\" Or Samsung Portable S2  \nPrepare USB-Harddisk to have MBR and 3 Primary partitions  \n- Boot partition - Primary with FAT32 Format and Size e.g. 20 GB - Set Active  \n- System partition - Primary with NTFS Format and Size e.g. 50 GB  \n- Data partition - Primary with NTFS Format and Size e.g. rest of USB-harddisk  \nUse of the 3 partitions will be  \n- Boot FAT32 - for Boot files and Win8.1SE x64 boot.wim file and with folder images for ISO and other small Boot Image files  \n- System NTFS - for Win 7/8 VHD Image files and for Windows 8 x64 System and for Portable XP VHD running Life from USB  \n- Data NTFS - for PStart folder with Portable Apps and for all Windows Setup ISO files used by WinNTSetup3 to Install Windows on local harddisk  \n\nAfter booting from USB you can use portable App WinNTSetup3 to mount the Setup ISO in ImDisk Virtual Drive.  \nWinNTSetup3 will prepare local harddisk for Install of XP/7/8 - [http://www.msfn.org/...612-winntsetup-](http://www.msfn.org/board/topic/149612-winntsetup- \"External link\")  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**Section 2. - Prepare Boot Image files - 8.1SE x64 WIM or 8.1 x64 VHD Or IMG Or ISO file**  \nDownload Win8.1SE from [http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")  \nDownload Win 8.1 Enterprise Evaluation ISO from [http://technet.micro...r/hh699156.aspx](http://technet.microsoft.com/en-us/evalcenter/hh699156.aspx \"External link\")  \n9600.16384.WINBLUE_RTM.130821-1623_X64FRE_ENTERPRISE_EVAL_EN-US-IRM_CENA_X64FREE_EN-US_DV5.ISO  \nRun Win81SE82_Builder.exe to make Win8.1SE x64 boot.wim in ISO\\\\WIM\\\\sources  \nIn UEFI_MULTI.exe you need also file boot.sdi from folder ISO\\\\WIM\\\\Boot  \nThe XP/7/8 Mini Windows VHD\u0027s of 1.2 - 2.5 GB are loaded from USB into RAMDISK and can be made according to  \n[http://reboot.pro/to...ct-make-mini-8/](http://reboot.pro/topic/18467-vhd-w8-compact-make-mini-8/ \"\")  \n[http://reboot.pro/to...ct-make-mini-7/](http://reboot.pro/topic/18593-vhd-w7-compact-make-mini-7/ \"\")  \n[http://reboot.pro/to...tall-xp-in-vhd/](http://reboot.pro/topic/18547-vhd-xp-setup-install-xp-in-vhd/ \"\")  \n[http://reboot.pro/to...t-make-mini-xp/](http://reboot.pro/topic/18657-vhd-xp-compact-make-mini-xp/ \"\")  \nMake_PE3 Program to Create Portable Windows 7 PE  \n[http://www.911cd.net...showtopic\u003d23931](http://www.911cd.net/forums//index.php?showtopic\u003d23931 \"External link\")  \nIMG_XP package - Make XP and Win 7 Universal Image files  \n[http://www.911cd.net...showtopic\u003d23553](http://www.911cd.net/forums//index.php?showtopic\u003d23553 \"External link\")  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**Section 3. - UEFI_MULTI.exe is used to make Multi-Boot USB-Drive**  \n0. Connect USB-Drive and start computer with Windows 7/8 - x64 OS version  \n1. Run UEFI_MULTI.exe  \n2. Select USB Target Boot Drive - FAT32 needed for UEFI support  \n3. Select USB Target System Drive (for USB-Stick use same as Boot Drive)  \n4. Select Boot Image File - Win8.1SE x64 - Select boot.wim in ISO\\\\WIM\\\\sources  \nVHD is Copied always to NTFS System Drive - WIM and ISO are copied to FAT32 Boot Drive  \n5. Click GO to make Multi-Boot USB-Harddisk  \n6. You can use UEFI_MULTI.exe several times to Add more Boot Image files or to Add extra Source Folder content  \nOption to Select Source Folder UEFI_MULTI\\\\MULTI_BOOT for Copy to Boot Drive  \nBOOT_IMG can make Grub4dos Menu on Boot Drive for VHD Image Files copied to Target System Drive.  \nFix XP or Win 7/8 VHD for booting from USB-drive by using USB_XP_Fix.exe or USB_W78_Fix.exe  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**Section 4. - UEFI Secure Boot - Multi-Boot of Linux Fedora-18 + Windows 8 from USB-harddisk (option)**  \nDownload Fedora-18-x86_64-Live-Desktop.iso from [http://fedoraproject.org/get-fedora](http://fedoraproject.org/get-fedora \"External link\")  \nDownload and use liveusb-creator-3.11.7-setup.exe from [https://fedorahosted...iveusb-creator/](https://fedorahosted.org/liveusb-creator/ \"External link\")  \nInfo [http://docs.fedorapr..._USB_Media.html](http://docs.fedoraproject.org/en-US/Fedora/18/html/Installation_Guide/Making_USB_Media.html \"External link\")  \nFirst prepare Fedora 18 LIVE USB-stick with files vmlinuz0 and initrd0.img from isolinux copied to folder LiveOS  \nand using in grub.cfg the commands linuxefi and initrdefi and root\u003dlive:LABEL\u003dLIVE  \nThen prepare Multi-Boot of Fedora-18 + Windows 8 from USB-harddisk as follows.  \n\n**Add Grub2 EFI Boot Manager for UEFI booting of Linux Fedora-18 or Parted Magic**  \nIn UEFI_MULTI.exe use Add Grub2 EFI Boot Manager for UEFI booting of Linux Fedora-18 or Parted Magic  \nExisting file /efi/boot/bootx64.efi of Windows 8 is renamed as 8bootx64.efi to enable Multi-Boot of Win8 and Linux.  \nFolder efi with Fedora-18 Secure Boot files is copied from UEFI_MAN to USB Boot Drive.  \nFedora-18 Secure Boot files efi\\\\boot\\\\BOOTX64.efi and efi\\\\boot\\\\grubx64.efi are used  \nand we use Fedora vmlinuz0 and initrd0.img in LiveOS folder of Fedora-18 copied to USB Boot Drive.  \nThe name of the USB Boot Drive with LiveOS folder must be specified and is in my case 2_BOOT  \n**efi\\\\boot\\\\grub.cfg**  \n\n```\nset timeout\u003d10\nset default\u003d0\n\n\nmenuentry \u0027Fedora-18 LIVE USB 2_BOOT\u0027 --class fedora --class gnu-linux --class gnu --class os {\nlinuxefi /LiveOS/vmlinuz0 root\u003dlive:LABEL\u003d2_BOOT ro rd.live.image rhgbÂ \ninitrdefi /LiveOS/initrd0.img\n}\n\n\nmenuentry \"Parted Magic 64\" --class gnu-linux --class gnu --class os {\nÂ  linuxefi /pmagic/bzImage64\nÂ  initrdefi /pmagic/initrd.img\n}\n\n\nmenuentry \"Windows 8 x64 EFI\" {\nÂ  chainloader /efi/boot/8bootx64.efi\n}\n\n```\n\nWindows 8 should NOT be default.  \nFor booting Parted Magic Linux it is needed to copy pmagic folder to USB Boot Drive and in UEFI to Disable Secure Boot  \n[http://www.911cd.net...ndpost\\\u0026p\u003d173226](http://www.911cd.net/forums//index.php?showtopic\u003d25262\u0026view\u003dfindpost\u0026p\u003d173226 \"External link\")  \nBooting in BIOS mode with Fedora LiveOS folder on USB partition with LABEL 2_BOOT  \nthen we can use Grub4dos with entry in menu.lst  \n**menu.lst**  \n\n```\ntitle Fedora-18 LIVE USB 2_BOOT\nfind --set-root /LiveOS/vmlinuz0\nkernel /LiveOS/vmlinuz0 root\u003dlive:LABEL\u003d2_BOOT ro rd.live.image quiet rhgbÂ \ninitrd /LiveOS/initrd0.img\n```\n\nrhgb \u003d redhat graphical boot - This is a GUI mode booting screen with most of the information hidden  \nquiet \u003d hides the majority of boot messages before rhgb starts. These are supposed to make the common user more comfortable.  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\n"
    },
    {
      "id": "183746",
      "timestamp": "2014-04-24T09:20:09+00:00",
      "author": "Franz Ferdinand II.",
      "content": "So that I have to use BOOT (the FAT32) partition smaller than 32GB? That may be reason it didnot offer me g4d boot menu at all.\n\nMy initial layout Boot/System/Data was 40 / 16 / 8. Even when I had selected USB storage with higher prio than internal HD it jumped directly to external Windows Bootmgr-based menu and offered me only systems which I\u0027ve added as .WIM image (all ISOs registered via menu.lst, however grub4dos seems never been invoked). If I choosen UEFI USB Device from Windows 8.1 boot menu, it just restarts.\n\nOnly external system that is bootable is Paragon Backup Capsule selected from main BCD ![:(](http://reboot.pro/public/style_emoticons/default/sad.png)\n\nBTW. Mark partition as active/inactive option is not available for partitions on GPT drive. Is that problem?\n\n**Edited by Franz Ferdinand II., 24 April 2014 - 09:29 AM.**\n"
    },
    {
      "id": "183747",
      "timestamp": "2014-04-24T09:50:54+00:00",
      "author": "wimb",
      "content": "Grub4dos Menu can only be used on UEFI computer when you boot in BIOS mode\n\nIf you have UEFI firmware then for booting Grub4dos from USB you need to modify BIOS settings.\n\nIn BIOS select \"BIOS compatible\" Or \"Legacy\" Or boot \"Win7 / Other\" Setiing (different names occur)\n\nGPT cannot be used on BIOS computers and probably also NOT on UEFI computers in BIOS mode.\n\nIf you want Multi-Boot USB with support for Grub4dos then you need to use MBR and NOT GPT\n\nWin8.1 SE boot.wim can boot directly from Boot Manager Menu without changing BIOS Settings.\n\nThat is the best option to support booting from USB on BIOS and UEFI computers\n\n"
    },
    {
      "id": "183756",
      "timestamp": "2014-04-24T12:04:58+00:00",
      "author": "Franz Ferdinand II.",
      "content": "\u003e Grub4dos Menu can only be used on UEFI computer when you boot in BIOS mode\n\u003e\n\u003e If you have UEFI firmware then for booting Grub4dos from USB you need to modify BIOS settings.\n\nSo in simple, there\u0027s not yet a way to create multiboot partition on GPT drive, right?\n\nIf that conclusion is true, is that possible create more smaller partitions on GPT drive, one bootable WinPE-based environment per partition, and modify main BCD accordingly?\n\nHow should added BCD entry look like? (ie. how to identify particular partitions correctly)\n\n"
    },
    {
      "id": "183760",
      "timestamp": "2014-04-24T13:35:42+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e So in simple, there\u0027s not yet a way to create multiboot partition on GPT drive, right?\n\u003e\nNo, BUT making a hybrid MBR/GPT is still possible (with a number of limitations):\n\n[http://www.rodsbooks...isk/hybrid.html](http://www.rodsbooks.com/gdisk/hybrid.html \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "183761",
      "timestamp": "2014-04-24T13:37:10+00:00",
      "author": "wimb",
      "content": "You can have several WinPE boot.wim files (having different names) on the same FAT32 Boot partition.\n\nboot.wim is a container so there is no need at all to create more smaller partitions.\n\nYou can have Win 8.1 x64 recovery boot.wim named as w8x64rec.wim next to Win8.1SE boot.wim renamed as w81x64.wim\n\nThe BCD entries for these boot.wim files can be made easily with UEFI_MULTI.exe\n\nIn command window of Win8 then run bcdedit to view the created entries e.g.  \n\n```\nbcdedit /store M:\\efi\\microsoft\\boot\\BCD /enum all\n```\n\nwill give the entries e.g.\n\n```\nWindows Boot Loader\n-------------------\nidentifier              {391b890e-c531-11e3-824c-00501848e329}\ndevice                  ramdisk\u003d[boot]\\w81x64.wim,{38cf3db6-c531-11e3-824c-00501848e329}\ndescription             w81x64-WIM\nloadoptions             DISABLE_INTEGRITY_CHECKS\nnointegritychecks       Yes\ntestsigning             Yes\nosdevice                ramdisk\u003d[boot]\\w81x64.wim,{38cf3db6-c531-11e3-824c-00501848e329}\nsystemroot              \\Windows\nbootmenupolicy          Legacy\ndetecthal               Yes\nwinpe                   Yes\n\nDevice options\n--------------\nidentifier              {38cf3db6-c531-11e3-824c-00501848e329}\nramdisksdidevice        boot\nramdisksdipath          \\Boot\\boot.sdi\n\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "184053",
      "timestamp": "2014-05-01T05:07:26+00:00",
      "author": "wimb",
      "content": "-  \n**\\*\\*\\* Update UEFI_MULTI Version 8.5 \\*\\*\\***  \nUpdate grub4dos-0.4.5c-2013-07-24.7z  \nUpdate UFD_Format.exe - improvement for usage of format.com in x64 environment  \nAdded GetWaikTools - Thanks to **JFX** [http://www.msfn.org/...-the-huge-isos/](http://www.msfn.org/board/topic/156869-get-waik-tools-wo-downloading-the-huge-isos/ \"External link\")  \nAdded Tweaks for Windows XP/7/8 as used in WinNTSetup3 - Thanks to **JFX**  \n[http://www.msfn.org/...32#entry1070687](http://www.msfn.org/board/topic/149612-winntsetup-v34-35-beta1/page-32#entry1070687 \"External link\")  \nImprovement in all Help files - Procedures based on using Win8.1SE x64 boot.wim as Boot Image File  \nThanks to **ChrisR** for making Win8.1SE - [http://www.msfn.org/...170546-win81se/](http://www.msfn.org/board/topic/170546-win81se/ \"External link\")  \nDownload Win 8.1 x64 Enterprise Evaluation ISO from [http://technet.micro...r/hh699156.aspx](http://technet.microsoft.com/en-us/evalcenter/hh699156.aspx \"External link\")  \n**Download** - [UEFI_MULTI_85](http://reboot.pro/files/file/279-uefi-multi/ \"\") - [mirror](http://www.mediafire.com/?233dka636369k \"External link\")  \nRun UEFI_MULTI_85.exe and Extract to simple path  \n\nThis is a major (and may be final) Update to version 8.5 for all programs derived from IMG_XP project.  \n\n**Download** - [IMG_XP_85](http://www.mediafire.com/?233dka636369k \"External link\") - [mirror](http://www.datafilehost.com/d/cc30b976 \"External link\")  \n\nInstall 7/8 in VHD and Make Mini 7/8 VHD for booting from USB  \n[http://reboot.pro/to...ct-make-mini-8/](http://reboot.pro/topic/18467-vhd-w8-compact-make-mini-8/ \"\")  \n[http://reboot.pro/to...ct-make-mini-7/](http://reboot.pro/topic/18593-vhd-w7-compact-make-mini-7/ \"\")  \n\nInstall XP in VHD and Make Mini XP VHD for booting from USB  \n[http://reboot.pro/to...tall-xp-in-vhd/](http://reboot.pro/topic/18547-vhd-xp-setup-install-xp-in-vhd/ \"\")  \n[http://reboot.pro/to...t-make-mini-xp/](http://reboot.pro/topic/18657-vhd-xp-compact-make-mini-xp/ \"\")  \nVHD filename e.g. W864USP1.vhd contains Architecture 64/32 + Distribution Language + Version P/M/C + Number 1-9  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)  \nFor UEFI + BIOS booting from USB then Windows 8.1 x64 need to be used as Source.  \nThere are now three Universal solutions for booting from USB on UEFI + BIOS computers:  \n- Win8.1SE x64 boot.wim of size 400 MB booting from RAMDISK in 35 sec when using USB 3.0 USB-Stick FAT32  \n- Portable W864USP1.vhd of size 3.5 GB booting as FILEDISK from portable USB-harddisk NTFS SYSTEM partition  \n- Full Windows 8.1 Pro installed in 15 GB VHD or any Windows 8.1 on USB NTFS SYSTEM partition of size 50 GB  \nAfter booting in 35 sec from USB 3.0 with x64 boot.wim then  \nyou can use portable App WinNTSetup_x64.exe to mount XP/7/8 Setup ISO in ImDisk Virtual Drive.  \nWinNTSetup3 of **JFX** will prepare local harddisk for Install of XP/7/8 - [http://www.msfn.org/...612-winntsetup-](http://www.msfn.org/board/topic/149612-winntsetup- \"External link\")  \nLoading boot.wim into RAMDISK can take more time when USB boot speed is low e.g. 15 min for old BIOS  \nPortable W864USP1.vhd of size 3.5 GB is then much faster and boots in 2 min 30 sec on computer wth old BIOS  \n\nPXE wimboot of Win8.1SE x64 boot.wim and using portable Tiny PXE Server is very handy for booting in 1 min from Network  \nsince it can be used portable from USB without requiring extra drivers or software on the host computer.  \n[http://reboot.pro/to...twork-via-ipxe/](http://reboot.pro/topic/19015-boot-mini-windows-vhd-from-network-via-ipxe/ \"\")  \nThanks to **erwan.l** for making Tiny PXE Server :smile: [http://reboot.pro/fi...iny-pxe-server/](http://reboot.pro/files/file/303-tiny-pxe-server/ \"\")  \n\n**wimboot.ipxe**  \n\n```\n#!ipxe\nset boot-url http://${dhcp-server}\nkernel ${boot-url}/wimboot\ninitrd ${boot-url}/bootmgr.exe Â  Â  Â  Â  Â  Â  Â  Â  Â bootmgr.exe\ninitrd ${boot-url}/Boot/bcd Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bcd\ninitrd ${boot-url}/Boot/fonts/segmono_boot.ttf Â segmono_boot.ttf\ninitrd ${boot-url}/Boot/fonts/segoe_slboot.ttf Â segoe_slboot.ttf\ninitrd ${boot-url}/Boot/fonts/segoen_slboot.ttf segoen_slboot.ttf\ninitrd ${boot-url}/Boot/fonts/wgl4_boot.ttf Â  Â  wgl4_boot.ttf\ninitrd ${boot-url}/Boot/boot.sdi Â  Â  Â  Â  Â  Â  Â  Â boot.sdi\ninitrd ${boot-url}/sources/boot.wim Â  Â  Â  Â  Â  Â  boot.wim\nimgstat\nboot\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "186577",
      "timestamp": "2014-08-22T05:11:00+00:00",
      "author": "dbzrulz",
      "content": "Hi @wimb\n\nI must conratulate you and the team reoot.pro on the awsome tools. However today when I tried to download the UEFI_Multi.exe file the download was interrupted with an error message:\n\n**Gateway Anti-Virus Alert**   \n\n**This request is blocked by the Firewall Gateway Anti-Virus**\n\n**Service. Name: Ruskill.QCE (Trojan)**\n\nIs there any other source available from where I can dowload this file??\n\nCheers\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "186617",
      "timestamp": "2014-08-23T06:31:11+00:00",
      "author": "wimb",
      "content": "It is a false positive warning of your AV Software.\n\nI have the same here for AVAST AV Software.\n\nI recompiled some programs of UEFI_MULTI and now the warning is gone :smile:\n\nI have Uploaded this new version of UEFI_MULTI_85.exe (and my other programs as well ....)\n\n**Download UEFI_MULTI_85.exe** - [http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "186713",
      "timestamp": "2014-08-25T22:02:48+00:00",
      "author": "MaxPresi",
      "content": "I have some questions...  \nI\u0027ve been looking for a solution that me free from CDs, in which I can do everything with my external HD.  \nMy only problem was with UEFI, since no Multi_boot boot in UEFI.  \n\nI wonder if I can and how to put the recovery of more than one type of Windows 8 (Windows 8 SL, 8.1 SL and 8.1 Pro for example) in UEFI mode and if I can put in BIOS Mode the Hiren\u0027s Boot, Windows 7 and XP.  \n\nAt the BIOS mode, I can use it to boot another MULTI_BOOT?  \n\nSorry for so many dumb questions and the bad english.   \n\n**Edited by MaxPresi, 25 August 2014 - 10:04 PM.**\n"
    },
    {
      "id": "186715",
      "timestamp": "2014-08-26T05:31:22+00:00",
      "author": "wimb",
      "content": "**@MaxPresi**\n\nFollow the description on How to use UEFI_MULTI.exe\n\n[http://reboot.pro/to...ve/#entry168079](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/#entry168079 \"\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "186977",
      "timestamp": "2014-09-04T04:54:20+00:00",
      "author": "wimb",
      "content": "How to make Multi-Boot USB Flash Drive booting with boot.wim of Win8.1SE x64  \n[![UEFI_MULTI_85.png](http://reboot.pro/uploads/monthly_09_2014/post-9517-0-41511900-1409806382_thumb.png)](http://reboot.pro/uploads/monthly_09_2014/post-9517-0-41511900-1409806382.png \"UEFI_MULTI_85.png - Size: 12.54KB\"){#ipb-attach-url-15049-0-39194300-1676066388} \u003d\u003d\\\u003e [![W81SE_AOMEI.png](http://reboot.pro/uploads/monthly_09_2014/post-9517-0-57646200-1409806408_thumb.png)](http://reboot.pro/uploads/monthly_09_2014/post-9517-0-57646200-1409806408.png \"W81SE_AOMEI.png - Size: 540.1KB\"){#ipb-attach-url-15050-0-39206500-1676066388}  \n-  \n-  \nSupport topic - [http://reboot.pro/to...boot-usb-drive/](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/ \"\")  \n-  \nMore Info - [http://www.911cd.net...showtopic\u003d25269](http://www.911cd.net/forums//index.php?showtopic\u003d25269 \"External link\")  \n-  \nDownload - [http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")  \n-  \nHow to add AOMEI Backupper and AOMEI Partition Assistant in making Win8.1 SE x64 boot.wim Boot Image file  \n[http://www.msfn.org/...-8#entry1084947](http://www.msfn.org/board/topic/170546-win81se/page-8#entry1084947 \"External link\")  \n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "187854",
      "timestamp": "2014-10-03T15:21:09+00:00",
      "author": "Erez Sch",
      "content": "i\u0027m try to combine a uefi multiboot usb of windows 7 and windows 8.1 at the same usb disk, but everytime i choose the iso file, i get an error message that says incompatible format of iso, too large for fat32.\n\nhow can i solve this limination and combined both operating systems with this tool or another tool?\n\ni\u0027m using winsetupfromusb that is very easy to use and created a ntfs partitions for all my iso\u0027s, and i\u0027ts working great, but not on uefi systems.\n\nwhat to do?\n\nthanks\n\n"
    },
    {
      "id": "187864",
      "timestamp": "2014-10-04T09:41:17+00:00",
      "author": "wimb",
      "content": "\u003e Prepare USB-Harddisk to have MBR and 3 Primary partitions  \n\u003e - Boot partition - Primary with FAT32 Format and Size e.g. 20 GB - Set Active  \n\u003e - System partition - Primary with NTFS Format and Size e.g. 50 GB  \n\u003e - Data partition - Primary with NTFS Format and Size e.g. rest of USB-harddisk  \n\u003e Use of the 3 partitions will be  \n\u003e - Boot FAT32 - for Boot files and Win8.1SE x64 boot.wim file and with folder images for ISO and other small Boot Image files  \n\u003e - System NTFS - for Win 7/8 VHD Image files and for Windows 8 x64 System and for Portable XP VHD running Life from USB  \n\u003e - Data **NTFS** - for PStart folder with Portable Apps and for **all Windows Setup ISO files** used by WinNTSetup3 to Install Windows on local harddisk  \n\u003e\n\u003e After booting from USB you can use portable App WinNTSetup3 to mount the Setup ISO in ImDisk Virtual Drive.  \n\u003e WinNTSetup3 will prepare local harddisk for Install of XP/7/8 - [http://www.msfn.org/...inntsetup-v370/](http://www.msfn.org/board/topic/149612-winntsetup- \"External link\")  \n\u003e\n[http://reboot.pro/to...boot-usb-drive/](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\nInstead of FAT32 USB-Stick you should use Portable USB-Harddisk with 3 partitions according to description.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "188638",
      "timestamp": "2014-11-18T01:08:14+00:00",
      "author": "Master.ZizO",
      "content": "Error linux not found... In Grub2  \nI was wondering where to put grub2 modules?   \nI put it in boot/grub/i386-PC  \nBut same issue   \nAny help?   \n"
    },
    {
      "id": "188954",
      "timestamp": "2014-12-01T07:59:40+00:00",
      "author": "wimb",
      "content": "\u003e Error linux not found... In Grub2  \n\u003e I was wondering where to put grub2 modules?  \n\u003e I put it in boot/grub/i386-PC  \n\u003e But same issue  \n\u003e Any help?\n\nSome more info is given here [http://www.911cd.net...showtopic\u003d25269](http://www.911cd.net/forums//index.php?showtopic\u003d25269 \"External link\") for the case of Fedora-18\n\nThe name of the USB Boot Drive with**LiveOS** folder **must be specified** and is in my case **2_BOOT**  \nSee Section 4 and may be you can first try Fedora 18\n\n"
    },
    {
      "id": "189113",
      "timestamp": "2014-12-07T00:12:00+00:00",
      "author": "Echtzeit",
      "content": "Hi,\n\nI followed your instructions to the letter and created the USB stick together with a \"8.1SE x64 WIM\". On a normal BIOS everything works fine, but when I try to boot on secure UEFI I get the following message:\n\n\"*Failed* to *verify image* with \\**ACCESS DENIED\\*\"*\n\nWhat did I do wrong?\n\n"
    },
    {
      "id": "189119",
      "timestamp": "2014-12-09T06:31:56+00:00",
      "author": "wimb",
      "content": "\u003e Hi,\n\u003e\n\u003e I followed your instructions to the letter and created the USB stick together with a \"8.1SE x64 WIM\". On a normal BIOS everything works fine, but when I try to boot on secure UEFI I get the following message:\n\u003e\n\u003e \"*Failed* to *verify image* with \\**ACCESS DENIED\\*\"*\n\u003e\n\u003e What did I do wrong?\n\nIn my case UEFI Secure booting of 8.1SE x64 WIM from USB-stick is doing fine.\n\nDid you use Win 8.1 Enterprise Evaluation ISO to prepare 8.1SE x64 WIM and what is the precise version nr e.g. 9600.17050 or 9600.16384 or .... ?\n\nWhat you can try is to disable Secure Boot in the UEFI BIOS Settings (Boot access via press Delete or F2 or Esc or F12)\n\nAlso you might try to use F8 key to select 8.1SE x64 WIM and so use Advanced Boot Options, where you select Disable Driver Signature Enforcement.\n\nTry the above and report about it.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "189380",
      "timestamp": "2014-12-22T18:45:03+00:00",
      "author": "ktp",
      "content": "Hello,  \n\nI would like to share my findings about **UEFI boot with Secure Boot enabled** .  \n\nReferences:  \nAltLinux:  \n[http://en.altlinux.org/Rescue](http://en.altlinux.org/Rescue \"External link\")\n\n[http://en.altlinux.o...Boot_mini-HOWTO](http://en.altlinux.org/UEFI_SecureBoot_mini-HOWTO \"External link\")  \n[http://nightly.altli...test-x86_64.iso](http://nightly.altlinux.org/sisyphus/tested/regular-rescue-latest-x86_64.iso \"External link\")  \n\nELILO : EFI boot loader  \n[http://sourceforge.n...ts/elilo/files/](http://sourceforge.net/projects/elilo/files/ \"External link\")  \n\nThe rEFInd Boot Manager  \n[http://www.rodsbooks.com/refind/](http://www.rodsbooks.com/refind/ \"External link\")  \n\nManaging EFI Boot Loaders for Linux  \n[http://www.rodsbooks...fi-bootloaders/](http://www.rodsbooks.com/efi-bootloaders/ \"External link\")  \n\nAssumption: some knowledge on UEFI boot.  \n\n\u003cbr /\u003e\n\nI followed **wimb** \u0027s UEFI_MULTI method with success, however I had problem with Secure Boot enabled.  \nIn **wimb** \u0027s method Parted Magic has to be run with Secure Boot disabled.  \nAlso latest refind.efi\u003dbootx64.efi is denied when Secure boot is enabled. So am I stuck with only  \n/efi/boot/bootx64.efi \u003d /EFI/Microsoft/boot/bootmgfw.efi, this means I can only boot Windows 8.x 64-bit  \nwhen Secure Boot is enabled, requiring copy from /EFI/Microsoft/boot/bootmgfw.efi to /EFI/bootx64.efi.  \n\nNow I find a way to boot, in addition to Windows 8.x 64-bit, other non-signed or signed Linux kernels  \nlike Parted Magic, Ubuntu 14.04..., without changing anything.  \nThe method is taken from AltLinux.  \nYou have to adapt the configuration files (refind.conf, elilo.conf).  \nIt works because \\*.efi files have been signed by AltLinux, and thanks the trick of using ELILO to chainload  \nunsigned Linux kernels.  \n\n\u003cbr /\u003e\n\nInside /EFI/boot/ directory I have:  \n\nicons\\\\ \u003d\\\u003e from refind included with Alt Linux  \nrefind.conf \u003d\\\u003e see below  \nelilo.conf \u003d\\\u003e see below  \ntextmenu-message.msg \u003d\\\u003e from ELILO  \ngrubx64.efi \u003d\\\u003e from AltLinux (\u003d signed refind.efi)  \nelilo.efi \u003d\\\u003e from AltLinux  \nbootx64.efi \u003d\\\u003e from AltLinux  \nMokManager.efi \u003d\\\u003e from AltLinux  \ngeneral.msg \u003d\\\u003e from ELILO  \nparams.msg \u003d\\\u003e from ELILO  \n\nrefind.conf content:\n\n```\ntimeout 20\nscanfor manual\nscan_driver_dirs /EFI/refind/drivers_x64\nbanner /EFI/refind/icons/bg.png\n\nmenuentry \"Windows 8 x64 (PE/VHD) EFI\" {\nÂ  icon /EFI/boot/icons/os_win.png\nÂ  loader /EFI/Microsoft/boot/bootmgfw.efi\nÂ  #disabled\n}\n\n# ELILO used as Secure Boot trampoline for unsigned kernels\nmenuentry \"Ubuntu, PartedMagic...\" {\nÂ  icon /EFI/boot/icons/os_linux.png\nÂ  loader /EFI/BOOT/elilo.efi\n}\n\nmenuentry \"others\" {\nÂ  # others: Mokmanager, UEFI shell etc...\nÂ  icon /EFI/refind/icons/os_unknown.png\nÂ  loader /EFI/refind/refind_x64.efi\n}\n\n```\n\nelilo.conf content:\n\n```\nprompt\n# wait 20 seconds before booting default\ntimeout\u003d200\ndefault\u003dUbuntu\nchooser\u003dtextmenu\nmessage\u003dtextmenu-message.msg\n\n###\n\nimage\u003d\"/EFI/ubuntu/vmlinuz-3.13.0-43-generic\"\nÂ Â  label\u003d\"Ubuntu\"\nÂ Â  description\u003d\"Ubuntu 14.04\"\nÂ Â  initrd\u003d/EFI/ubuntu/initrd.img-3.13.0-43-generic\nÂ Â  read-only\nÂ Â  # note: you need to change UUID to the UUID of your Linux partition\nÂ Â  append\u003d\"root\u003dUUID\u003db08a3f56-9df0-4a91-b7a5-27b854f2b5d8 roÂ  quiet splash $vt_handoff\"\n\n###\nimage\u003d\"/pmagic/bzImage64\" Â \nÂ Â  label\u003d\"PartedMagic\"\nÂ Â  description\u003d\"Parted Magic (2014-11-19)\"\nÂ Â  initrd\u003d/pmagic/initrd64.img\nÂ Â  read-only\nÂ Â  append\u003d\"edd\u003doff load_ramdisk\u003d1 prompt_ramdisk\u003d0 rw vga\u003dnormal loglevel\u003d9 max_loop\u003d256 vmalloc\u003d288MiB directory\u003d/ keymap\u003dfr\"\n\nTo summarize, using this method, my multiboot USB hard disk has following structure:\n```\n\n- grub4dos in MBR  \n- 1 FAT32 primary partition with Easy2boot  \n- 1 NTFS primary partition for data, WIM and big (\\\u003e 4 GB) ISO, VHD  \n- 1 Linux ext4 logical partition for Ubuntu 14.04  \n- 1 Linux swap logical partition for Linux swap  \n\nSo Easy2boot still has 4th primary partition to work.  \nImportant: the NTFS partition needs to be primary and not logical, because if logical, the VHD files will not be found in UEFI mode (no BCD entry displayed for them, while in BIOS mode there is n   \n"
    },
    {
      "id": "189871",
      "timestamp": "2015-01-16T21:16:12+00:00",
      "author": "Zoso",
      "content": "hi ktp, good to see your still around! that is ALOT of useful info. it looks like exactly what is needed too for if/when I ever get UEFI system. actually, I wouldnt have even considered one until now since reading your post here!   \n\nthanks   \n"
    },
    {
      "id": "190947",
      "timestamp": "2015-02-24T14:37:53+00:00",
      "author": "Nexon_2014",
      "content": "Hi to all I want to run slax in uefi mode/secured boot is this uefi multi applicable? Can some share the link or procedure?  \n\nSent from my ASUS_T00G using Tapatalk   \n"
    },
    {
      "id": "190954",
      "timestamp": "2015-02-24T21:58:58+00:00",
      "author": "bruss",
      "content": "\u003e It is a false positive warning of your AV Software.\n\u003e\n\u003e I have the same here for AVAST AV Software.\n\u003e\n\u003e I recompiled some programs of UEFI_MULTI and now the warning is gone :smile:\n\u003e\n\u003e I have Uploaded this new version of UEFI_MULTI_85.exe (and my other programs as well ....)\n\u003e\n\u003e **Download UEFI_MULTI_85.exe** - [http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nHi !\n\nI got the same again . Avast keeps modifiing the new downloaded file ,reporting something-like Malwaregen-32 .(?)\n\nbye\n\n"
    },
    {
      "id": "191625",
      "timestamp": "2015-03-25T21:06:54+00:00",
      "author": "Flux",
      "content": "Any chance this can be updated to make use of UEFI:NTFS? It works great as is, but it would be nice to be able to use images larger than the 4GB file limit in FAT32.\n\nHere\u0027s the github link:\n\n[https://github.com/pbatard/uefi-ntfs](https://github.com/pbatard/uefi-ntfs \"External link\")\n\nBasically it creates two partitions, an NTFS and a FAT one, the NTFS gets ignored on 32-bit systems with EFI and the FAT one contains relevant boot code to load the NTFS one and boot from it.\n\nIt\u0027s pretty neat!\n\n"
    },
    {
      "id": "193253",
      "timestamp": "2015-06-21T04:08:44+00:00",
      "author": "koesherbacon",
      "content": "This is my first post here, so I hope I\u0027m not asking something that\u0027s been answered a hundred times before...\n\nSince I\u0027m using Windows 8.1 my current boot method is UEFI. I stumbled upon these forums while trying to find a way to put a number of different Linux OSes, my Windows 8.1, and some Rescue Utilities onto a 32gb USB.\n\nThe USB drive I ended up with at the end of the process was not recognized by my UEFI. It was, however, recognized by the CSM but in that situation none of the OSes I put onto the USB showed up!\n\nHere\u0027s what I ended up doing, maybe when you look at my steps, you\u0027ll be able to tell me what happened and how I can fix it when I try again.\n\nI downloaded UEFI_MULTI_85.exe from [http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/download/279-uefi-multi-make-multi-boot-usb-drive/ \"\"). When I opened the file, it used 7zip to auto-extract everything into a \\\\UEFI-Multi\\\\ folder. That part I\u0027m pretty sure I got right. Since it\u0027d be really difficult to do that wrong! From there, I read the UEFI_MULTI_Help.txt file and though I understood how to use the software. I inserted the USB drive I wanted to use and ran UFD_Format.exe and believe everything worked perfectly find there as well. I then had what I think is a properly formatted FAT32 USB drive.\n\nI then went into the \\\\MULTI_BOOT\\\\Images folder. I put all the OS and Rescue ISOs I wanted to be available:\n\n*Windows*:\n\nWindows.8.1.blah.blah.blah.iso\n\n*Linux*:\n\nantergos-2015.04.12-x86_64.iso\n\narchlinux-2015.06.01-dual.iso\n\nBella-OS-2.2-64bit.iso\n\nblack-lab-linux-2015_6-x86_64.iso\n\nblack-lab-linux-Xfce4.12-x64_86.iso\n\nbridge-xfce-2014.02-x86_64.iso\n\nchakra-2015.03-euler-x86_64.iso\n\nchaletos14.04.2-feb2015-light-amd64.iso\n\ndeepin_2014.3_amd64.iso\n\nelementaryos-freya-amd64.20150411.iso\n\nhandylinux-2.1.iso\n\nKaOS-2015.06-x86_64.iso\n\nkubuntu-15.04-desktop-amd64.iso\n\nMakuluLinux-8-LxFce.iso\n\nMakuluLinux-9-Aero-x64.iso\n\nMakuluLinux-9-XfceLite-x64.iso\n\nmanjaro-kde-0.8.13-x86_64.iso\n\nmanjaro-xfce-0.8.13-x86_64.iso\n\nmaui-0.5.1-x86_64.iso\n\nnetrunner-16-dvd-64bit.iso\n\nnetrunner-rolling-2014.09.1-dvd-64bit.iso\n\nPinguy_OS_14.04.2-LTS-x86-64.iso\n\nSolus-Beta2.iso\n\nsymphonyos-15.0_amd64.iso\n\nwattOS-R9-64.iso\n\n*Rescue*:\n\nHiren\u0027s.BootCD.15.2.iso\n\nPING-3.02-WithAddons.iso\n\nubcd535.iso\n\nIn total, all of the above was just under 28gb. Luckily, the USB drive I just formatted had 29gb available.\n\nI then went back to the main UEFI_MULTI folder and ran UEFI_MULTI.exe as Administrator. I told it that my USB Boot was D: (the USB drive I just formatted) and my System Drive was C: (where Windows 8.1 is currently installed, of course). I kept the Copy to: Boot Drive option and told it that the Source Folder was \\\\MULTI_BOOT\\\\Images.\n\nAt this point, I might have made the error by selecting all the available options:\n\nâ Add G4D to Boot Manager\n\nâ Add XP to Boot Manager\n\nâ Update MBR Boot Code\n\nâ Add Boot Win 7/8 System\n\nâ Update Grub4Dos gldr\n\nâ Grub 2 EFI Mgr\n\nShould I not have selected everything? If not, which of those options should I select, and which should I leave alone?\n\nIt did its thing and everything seemed fine when it finished. But like I said at the beginning, when I rebooted my computer the UEFI did not detect the USB and went straight to Windows 8.1. When I switched my BIOS to CSM, it did detect the USB, but nothing was selectable except for the default options such as editing the Grub4Dos menu.\n\nWhat can you tell me about what I might have done incorrectly? Is there anything that obviously jumps out at you?\n\nMaybe someone can walk me through this process again so the next time I will be successful attempt to make a Multi-Boot USB with the above listed OSes and Rescue ISOs.\n\nThanks a lot!\n\nã Ev\n\n"
    },
    {
      "id": "194217",
      "timestamp": "2015-08-04T11:55:59+00:00",
      "author": "Lukys",
      "content": "Hi. How i can edit created boot menu on USB after build manually? Thanks\n\n"
    },
    {
      "id": "194271",
      "timestamp": "2015-08-05T08:43:03+00:00",
      "author": "S466531257BOSS",
      "content": "@koesherbacon @Lukys\n\n*As you stated you thought anything went fine and the \u0027 only \u0027 obvious problem is that Windows 8.1 boots directly in UEFI-Mode without hesitating \\| showing up the BootMGR-Menu displaying other options*\n\n*; Have a look at the BCD-Store on the drive you created by plugging in the FlashDrive on a running Windows NT 6+ System, means from Vista upwards ( in your case most likely Windows 8.1 ) and use an administrative Command Prompt to be sure to read out the BCD of the stick by using*\n\n:\n\n```\nbcdedit /store U:\\Boot\\bcd /enum\n```\n\n: or use your already booted Windows 8.1, whereas you have to use the drive-letter of the system ; mostly\n\n```\nC: \n```\n\n\u003dINFO\n\n```\nbcdedit\n```\n\n: *tool to manipulate the BootCode used by BootMGR*\n\n```\n/Store\n```\n\n: *Parameter \u0027 Store \u0027 followed by the path to the bcd-file you wish to read \\| edit*\n\n```\nU:\\Boot\\BCD\n```\n\n: *The path to the BCD-Store on your Flash-Drive*\n\n```\n U:\n```\n\n--- *Assuming you used drive-letter \u0027 U \u0027 ( e.g.: U for USB )*\n\n```\n\\Boot\\\n```\n\n--- *Standard-Directory generated by \u0027 bcdboot \u0027-tool when using \u0027 /f ALL \u0027 or \u0027 /f BIOS \u0027 as Parameter for FirmWare-Type of Target-Partition*\n\n```\nBCD\n```\n\n*--- Standard-Naming for the BCD-Store created by \u0027 bcdboot \u0027*\n\n; The \u0027 Boot \u0027-folder is a hidden- system- -folder so either you have to change your view-settings of Windows Explorer to show up hidden and system files or you just type the path \u0027 \\\u003cdrive-letter\\\u003e:\\\\Boot\\\\ \u0027 ( e.g.: U:\\\\Boot\\\\ ) directly into the path-\\|adress- -bar to access the contents of it .\n\n```\n /enum\n```\n\n--- *enumerates \\| lists the entries of the BCD-Store you are loading*\n\n*; That\u0027s how you can get an insight of what really is inside , likewise to say you can check if other options have been stored by the script or not*\n\n*; and if you you find out there are other entries , then you might wish to have a lookout for the options \u0027 displaybootmenu\u0027 \\| \u0027 displayorder \u0027 \\| \u0027 timeout \u0027*\n\n\u003d EXAM\n\n:  \n\n```\nBezeichner Â  Â  Â  Â  Â  Â  Â {bootmgr}\ndevice Â  Â  Â  Â  Â  Â  Â  Â  Â partition\u003dO:\ndescription Â  Â  Â  Â  Â  Â  Windows Boot Manager\nlocale Â  Â  Â  Â  Â  Â  Â  Â  Â de-DE\ninherit Â  Â  Â  Â  Â  Â  Â  Â  {globalsettings}\ndefault Â  Â  Â  Â  Â  Â  Â  Â  {default}\nresumeobject Â  Â  Â  Â  Â  Â {7e05cdb8-3afa-11e5-975d-0022190d3ea7}\ndisplayorder Â  Â  Â  Â  Â  Â {default}\ntoolsdisplayorder Â  Â  Â  {memdiag}\ntimeout Â  Â  Â  Â  Â  Â  Â  Â  30\n\n\nWindows-Startladeprogramm\n-------------------------\nBezeichner Â  Â  Â  Â  Â  Â  Â {default}\ndevice Â  Â  Â  Â  Â  Â  Â  Â  Â vhd\u003d[O:]\\_ISO\\AUTO\\WIRT\\BMWN63SC\\BMWN63SC.vhd\npath Â  Â  Â  Â  Â  Â  Â  Â  Â  Â \\Windows\\system32\\winload.exe\ndescription Â  Â  Â  Â  Â  Â  Hyper-V Server 2012 R2 (VHD)\nlocale Â  Â  Â  Â  Â  Â  Â  Â  Â de-DE\ninherit Â  Â  Â  Â  Â  Â  Â  Â  {bootloadersettings}\nrecoverysequence Â  Â  Â  Â {a1c28fef-3ab4-11e5-8124-002264cbf2c3}\nrecoveryenabled Â  Â  Â  Â  Yes\nallowedinmemorysettings 0x15000075\nosdevice Â  Â  Â  Â  Â  Â  Â  Â vhd\u003d[O:]\\_ISO\\AUTO\\WIRT\\BMWN63SC\\BMWN63SC.vhd\nsystemroot Â  Â  Â  Â  Â  Â  Â \\Windows\nresumeobject Â  Â  Â  Â  Â  Â {7e05cdb8-3afa-11e5-975d-0022190d3ea7}\nnx Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â OptOut\nhypervisorlaunchtype Â  Â Auto\n```\n\n\u003dEDIT\n\n--- To show up the bootmenu\n\n```\nbcdedit /set {bootmgr} displaybootmenu yes\n```\n\n--- if you use \u0027 no \u0027 instead of \u0027 yes \u0027 it will not show up .\n\n\u003dEXAM\n\n--- after EDIT  \n\n```\nWindows-Start-Manager\n---------------------\nBezeichner Â  Â  Â  Â  Â  Â  Â {bootmgr}\ndevice Â  Â  Â  Â  Â  Â  Â  Â  Â partition\u003dO:\ndescription Â  Â  Â  Â  Â  Â  Windows Boot Manager\nlocale Â  Â  Â  Â  Â  Â  Â  Â  Â de-DE\ninherit Â  Â  Â  Â  Â  Â  Â  Â  {globalsettings}\ndefault Â  Â  Â  Â  Â  Â  Â  Â  {default}\nresumeobject Â  Â  Â  Â  Â  Â {7e05cdb8-3afa-11e5-975d-0022190d3ea7}\ndisplayorder Â  Â  Â  Â  Â  Â {default}\ntoolsdisplayorder Â  Â  Â  {memdiag}\ntimeout Â  Â  Â  Â  Â  Â  Â  Â  30\ndisplaybootmenu Â  Â  Â  Â  Yes\n\n\nWindows-Startladeprogramm\n-------------------------\nBezeichner Â  Â  Â  Â  Â  Â  Â {default}\ndevice Â  Â  Â  Â  Â  Â  Â  Â  Â vhd\u003d[O:]\\_ISO\\AUTO\\WIRT\\BMWN63SC\\BMWN63SC.vhd\npath Â  Â  Â  Â  Â  Â  Â  Â  Â  Â \\Windows\\system32\\winload.exe\ndescription Â  Â  Â  Â  Â  Â  Hyper-V Server 2012 R2 (VHD)\nlocale Â  Â  Â  Â  Â  Â  Â  Â  Â de-DE\ninherit Â  Â  Â  Â  Â  Â  Â  Â  {bootloadersettings}\nrecoverysequence Â  Â  Â  Â {a1c28fef-3ab4-11e5-8124-002264cbf2c3}\nrecoveryenabled Â  Â  Â  Â  Yes\nallowedinmemorysettings 0x15000075\nosdevice Â  Â  Â  Â  Â  Â  Â  Â vhd\u003d[O:]\\_ISO\\AUTO\\WIRT\\BMWN63SC\\BMWN63SC.vhd\nsystemroot Â  Â  Â  Â  Â  Â  Â \\Windows\nresumeobject Â  Â  Â  Â  Â  Â {7e05cdb8-3afa-11e5-975d-0022190d3ea7}\nnx Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â OptOut\nhypervisorlaunchtype Â  Â Auto\n```\n\n\u003dINFO\n\n[BCDEdit Command-Line Options](https://technet.microsoft.com/en-us/library/cc709667(v\u003dws.10).aspx \"External link\")\n\n; For sure it can be told leaner , but maybe you / another reader is tickled enough to start having some fun by directly editing via a command-line instead of avoiding it and just hoping that scripts and tools do some automagical secret stuff ; the least is comfortable , but if i am using something that i do not understand i ( for myself ) at least like to know what has happened in the end .\n\n\u003dNOTE\n\n--- for those that have gained interest in editing via command line and especially bcdedit\n\n: If you wish to understand what options you have available and how they are used\n\n```\nbcdedit /?\n```\n\n--- general help\n\n```\nbcdedit /? /store\n```\n\n--- displays the help-information specific to the parameter \u0027 /store \u0027\n\nHOPE IT HELPS .\n\nTHANKS FOR YOUR INTEREST .\n\nS466531257 BOSS\n\nPAETH CLAUDIUSRAPHAEL\n\n**Edited by S466531257BOSS, 05 August 2015 - 08:53 AM.**\n"
    },
    {
      "id": "194290",
      "timestamp": "2015-08-05T13:38:37+00:00",
      "author": "Wonko the Sane",
      "content": "Well, on UEFI the BOOTMGR may not exist, since what is booted is bootmgfw.efi and the BCD is not in \\\\boot\\\\BCD but rather in \\\\EFI\\\\Microsoft\\\\boot\\\\BCD\n\nCasually Misty recently published a very detailed guide/how to related to BCDediit and BCD stores:\n\n[http://reboot.pro/to...and-bcd-stores/](http://reboot.pro/topic/20599-bcd-edit-and-bcd-stores/ \"\")\n\n[http://www.mistyrebo...Edit/index.html](http://www.mistyrebootfiles.altervista.org/documents/BCDEdit/index.html \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "195955",
      "timestamp": "2015-10-18T12:27:43+00:00",
      "author": "Franz Ferdinand II.",
      "content": "Greetings, I\u0027ve come back to the tool now and need some things cleared:\n\nIf I intend build a drive booting on both BIOS and UEFI systems to :\n\n-Win81SE\n\n-Win 10 installation DVD\n\n-Ubuntu ISO\n\n-Parted Magic (and eventually other Linux-based ISOs)\n\n-Hirens BootCD 15.2\n\n-UBCD 5.3.5\n\n-Paragon recovery ISO based on Win10PE\n\n-Macrium Reflect ISO based on Win8PE\n\nWhere all the ISO\u0027s (except Win81SE) should be defined?\n\nDoes UEFI_MULTI give another option except grub4dos?\n\nNow I tried to perform UEFI_FORMAT on empty USB stick. getting some internal app error (using default presets)\n\nIs it OK to format using standard Windows formatting tool?\n\n"
    },
    {
      "id": "195956",
      "timestamp": "2015-10-18T13:34:55+00:00",
      "author": "wimb",
      "content": "\u003e If I intend build a drive booting on both BIOS and UEFI systems to :\n\u003e\n\u003e -Win81SE\n\u003e\n\u003e Now I tried to perform UEFI_FORMAT on empty USB stick. getting some internal app error (using default presets)\n\u003e\n\u003e Is it OK to format using standard Windows formatting tool?\n\nIn what OS environment did you use **UFD_FORMAT.exe** and what is exactly the error that you get ?\n\nDoes it help when you Uncheck Make Boot Menu ? What type of USB-Stick did you use (is it a removable drive) ?\n\nFor Win81SE Builder take care in Build \\\u003e CdDrive - X: Y: to Select *Run ALL Programs from RAM*\n\nIn UEFI_MULTI Select boot.wim file and boot.sdi file as described [http://reboot.pro/to...ve/#entry168079](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/#entry168079 \"\")\n\nYou use wim booting which is compatible with BIOS and UEFI BootManager menu and you don\u0027t use ISO booting.\n\nWin10 Setup ISO is Not installed, but is simply copied to NTFS Drive (can be internal harddisk or second / third partition of portable USB-harddisk - advised for this purpose).\n\nAll Windows Setup ISO\u0027s can be used by WinNTSetup3 as described [http://www.msfn.org/...nntsetup-v3853/](http://www.msfn.org/board/topic/149612-winntsetup-v3853/ \"External link\")\n\n\u003e If I intend build a drive booting on both BIOS and UEFI systems to :\n\u003e\n\u003e -Ubuntu ISO\n\u003e\n\u003e -Parted Magic (and eventually other Linux-based ISOs)\n\u003e\n\u003e -Hirens BootCD 15.2\n\u003e\n\u003e -UBCD 5.3.5\n\u003e\n\u003e -Paragon recovery ISO based on Win10PE\n\u003e\n\u003e -Macrium Reflect ISO based on Win8PE\n\u003e\n\u003e Where all the ISO\u0027s (except Win81SE) should be defined?\n\u003e\n\u003e Does UEFI_MULTI give another option except grub4dos?\n\u003e\nGrub4dos booting is not compatible with UEFI\n\nIn case of 8PE and 10PE it is better to use the **WIM** file for booting from BootManager Menu in BIOS and UEFI.\n\nGrub2 can be used for booting Ubuntu and PartedMagic in UEFI [http://reboot.pro/to...ve/#entry168079](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/#entry168079 \"\")\n\nUBCD 5.3.5 can be booted in BIOS grub4dos menu as ISO (copied by UEFI_MULTI to USB boot drive).\n\n"
    },
    {
      "id": "196876",
      "timestamp": "2015-12-26T07:20:22+00:00",
      "author": "Camiel",
      "content": "getting this error\n\u003e AutoIt Error  \n\u003e Line 7209 (File \"G:\\\\Deposit\\\\Win_Uefi_Multi\\\\UEFI_MULTI.exe\"):  \n\u003e Error: Subscript used with non-Array variable.\n\n[https://imgur.com/Y2gJmrJ](https://imgur.com/Y2gJmrJ \"External link\")\n\nusing win7 x64 sp1\n\nwith various settings, same error\n\n[https://imgur.com/Y77X1pA](https://imgur.com/Y77X1pA \"External link\")\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "205248",
      "timestamp": "2017-12-26T08:26:11+00:00",
      "author": "wimb",
      "content": "UEFI_MULTI_85.exe is reported as broken. ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)\n\nHowever, it is a false positive virus warning due to using a SFX Selfextractor !! ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)\n\nSo I removed the SFX Selfextractor and simply use zip compression so that the problem is gone. :cool:\n\nDownload UEFI_MULTI-85.zip from\n\n[http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif) and best wishes for 2018\n\n"
    },
    {
      "id": "205249",
      "timestamp": "2017-12-26T08:49:39+00:00",
      "author": "Blackcrack",
      "content": "thank you :smile:  \n\nand a grate Year 2018 for you :smile:  \nand a good slip :smile:  \n\nbest regards  \nBlacky   \n"
    },
    {
      "id": "206734",
      "timestamp": "2018-04-27T00:55:40+00:00",
      "author": "alacran",
      "content": "\u003e UEFI_MULTI_85.exe is reported as broken. ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)\n\u003e\n\u003e However, it is a false positive virus warning due to using a SFX Selfextractor !! ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)\n\u003e\n\u003e So I removed the SFX Selfextractor and simply use zip compression so that the problem is gone. :cool:\n\u003e\n\u003e Download UEFI_MULTI-85.zip from\n\u003e\n\u003e [https://1drv.ms/f/s!...na78xaVPrpcR2sA](https://1drv.ms/f/s!AqA1-Hg3ltssgbYna78xaVPrpcR2sA \"External link\")\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif) and best wishes for 2018\n\n@ wimb\n\nWhen trying to download it says: One drive has detected UEFI_MULTI-85.zip has a virus and stoped the download.\n\nI\u0027m sure it is clean, as I have downloaded and used your Great Tool in the past, so to avoid this I suggest you may use a 7zip high compressed file **with password** to avoid this false detection.\n\nThanks in advance\n\n"
    },
    {
      "id": "206735",
      "timestamp": "2018-04-27T08:16:03+00:00",
      "author": "wimb",
      "content": "\u003e @ wimb\n\u003e\n\u003e When trying to download it says: One drive has detected UEFI_MULTI-85.zip has a virus and stoped the download.\n\u003e\n\u003e I\u0027m sure it is clean, as I have downloaded and used your Great Tool in the past, so to avoid this I suggest you may use a 7zip high compressed file **with password** to avoid this false detection.\n\u003e\n\u003e Thanks in advance\n\nHi **alacran,**\n\nThanks for reporting the security problem of OneDrive in case of UEFI_MULTI-85.zip\n\nI followed your advice and have uploaded the 7-zip compressed file with password**bootwimb85**\n\nwimb\n\n"
    },
    {
      "id": "206736",
      "timestamp": "2018-04-27T09:34:25+00:00",
      "author": "Wonko the Sane",
      "content": "Well, if you click (clicked) on the top left \"Download\" you obtain (could obtain) a \"Forum.zip\" file containing the UEFI_MULTI-85.zip (the same that provoked the stupid antivirus block) just fine.\n\nYou should contact OneDrive, it seems like a \"quirk\".\n\nPutting a password to the whole file will likely make the file unusable in the future (when people will have forgotten or misplaced the password, etc., etc.) , unless you put a non-encrypted file within the archive with the actual password or provide a plain text file with the password on the same OneDrive folder.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "206737",
      "timestamp": "2018-04-27T14:43:14+00:00",
      "author": "wimb",
      "content": "\u003e Well, if you click (clicked) on the top left \"Download\" you obtain (could obtain) a \"Forum.zip\" file containing the UEFI_MULTI-85.zip (the same that provoked the stupid antivirus block) just fine.\n\u003e\n\u003e You should contact OneDrive, it seems like a \"quirk\".\n\u003e\n\u003e Putting a password to the whole file will likely make the file unusable in the future (when people will have forgotten or misplaced the password, etc., etc.) , unless you put a non-encrypted file within the archive with the actual password or provide a plain text file with the password on the same OneDrive folder.\n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\u003e\n\u003e Wonko\n\nThanks for your help.\n\nI have added to the OneDrive folder a plain text file with the password\n\nPlease refresh and try again the download link [http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "206740",
      "timestamp": "2018-04-27T20:00:55+00:00",
      "author": "alacran",
      "content": "@ wimb\n\nJust to report download is working fine, with the password no more problems, it was good idea to add a text file with the password, but for future uploads I recomend using as password your user/author name (wimb), this is easy to remember and applicable to all your uploads.\n\nIn fact I have a folder (wimb) on my HDD, with almost all your tools, but haven\u0027t updated it in a long time (It had Uefi Multi 81), and as I am updating my USB sticks wanted to update the tools too.\n\nOnce again, thanks for your Great tools.\n\nalacran\n\n"
    },
    {
      "id": "206742",
      "timestamp": "2018-04-28T08:40:27+00:00",
      "author": "Wonko the Sane",
      "content": "Meh. ![:blink:](http://reboot.pro/public/style_emoticons/default/blink.png)\n\nAttached example.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko  \n\n#### Attached Files {#attach_wrap}\n\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003de4ec6839f71665090c664e7643cbc689\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16106 \"Download attachment\") [**YouCantRead.zip**](http://reboot.pro/index.php?s\u003de4ec6839f71665090c664e7643cbc689\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16106 \"Download attachment\") **417bytes** 1643 downloads\n\n"
    },
    {
      "id": "206743",
      "timestamp": "2018-04-28T09:17:48+00:00",
      "author": "wimb",
      "content": "If you read this, you have decrypted me.\n\n@Wonko\n\nI took the second of your proposals by adding to the OneDrive folder a plain text file with the password.\n\nFrom your reply I understand that you prefer the first of your proposals .... ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)\n\n"
    },
    {
      "id": "206744",
      "timestamp": "2018-04-28T11:43:24+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e If you read this, you have decrypted me.\n\u003e\n\u003e @Wonko\n\u003e\n\u003e I took the second of your proposals by adding to the OneDrive folder a plain text file with the password.\n\u003e\n\u003e From your reply I understand that you prefer the first of your proposals .... ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif)\n\nThe point only revolves on how much foolproof can a solution be, suggestions were provided in my personal order of likeness to be foolproof.\n\nAs Douglas Adams stated:\n\u003e\n\u003e A common mistake that people make when trying to design something completely foolproof is to underestimate the ingenuity of complete fools.\n\nQuestions:\n\n1) Would a common user actually attempt to open a file called ReadMe.1st or ReadMe.txt?\n\n2) Would a common user actually always download AND store (and move/backup/etc.) the \"password file\" alongside with the actual encrypted archive?\n\nAnswers:\n\n1) Not necessarily, often he/she will post here or somewhere else *whining* about the archive being password protected and that the password cannot be found anywhere.\n\n2) Not necessarily, often he/she will post here or somewhere else *whining* about the archive being password protected and that the password cannot be found anywhere.\n\nWhat will be the average reply by an old, grumpy bastard to the *whining*?\n\n1) Too bad you didn\u0027t also download the password file. Go to the download page and download it \\\u003c- i.e. maybe there is a solution (or may be there isn\u0027t because in the meantime the download is not anymore available)\n\n2) Just *Â§@Ã§#ing* **read** the ReadMe.1st inside the archive. \\\u003c- i.e. an easy solution is not only available, but actually \"embedded\"\n\nDecisions, always decisions ....\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "206745",
      "timestamp": "2018-04-28T12:23:11+00:00",
      "author": "wimb",
      "content": "Well then I combine both options so that the chance of loosing the password file is completely removed :wink:\n\nSo the encrypted file UEFI_MULTI-85.zip together with the password file UEFI_MULTI-85.pw.txt are zipped in a new container UEFI_MULTI_85.zip\n\n**Download UEFI_MULTI_85.zip** [http://reboot.pro/fi...boot-usb-drive/](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "206746",
      "timestamp": "2018-04-28T12:35:32+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Well then I combine both options so that the chance of loosing the password file is completely removed :wink:\n\nVery good :smile:.\n\n![redundancy.jpg](http://2.bp.blogspot.com/-jk_P_z_GdHA/TqVoqFQ-tNI/AAAAAAAAILM/GS2ET_t6GwE/s1600/redundancy.jpg)\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "206829",
      "timestamp": "2018-05-22T01:54:57+00:00",
      "author": "bob.omb",
      "content": "Do you make UFD_Format and UEFI_Multi both?\n\nCan any cmd line flags be used for the tool?\n\nIm trying to automate burning a simple PE ISO to a USB with 2 partition format (minimal fat32/max NTFS) then copying the WIM and bootfiles to the fat32 -\\\u003ewithout\\\u003c- a boot menu, followed with the remaining files from the ISO being copied to the NTFS partition...\n\nIt sucks theres nothing as simple as Rufus that does this..\n\nYour tool is awesome and can easily do this but its all manual and are more like advanced options than simple... You could dethrone Rufus in a heartbeat with a 1 click Legacy/UEFI boot USB burner especially if you just pick an ISO and it goes in and finds the WIM for you, and ignores the boot files in the ISO, and hide the advanced options in a submenu to keep your features... (This works great with a marker file on the NTFS partition, like CDDrive X Y plugin for PE SE version that assigns the letter Y to the USB, this makes it super easy for this setup to work)\n\nI have it working but I have to go in and remove the boot menu afterwards(I just set boot-wim to defaut with EasyBCD then skip the timer for both bcds)\n\nBefore that I was unsuccessfully trying to select the UFD format created Fat32 partition as the boot partition, then picking the WIM, and selecting the NTFS partition as the system partition? Then picking \"copy to\" and \"system\" and picking the extracted folder from the ISO containing only the files I wanted on the system partition from the but I get an error, maybe I was using it wrong. But I can manually get the same effect...\n\nAmazing work...\n\n**Edited by bob.omb, 22 May 2018 - 02:09 AM.**\n"
    },
    {
      "id": "207848",
      "timestamp": "2018-10-02T13:03:29+00:00",
      "author": "wimb",
      "content": "**Install Windows 10 from USB after booting with WIM or VHDX**  \n- [MediaCreationTool1803.exe](https://www.microsoft.com/en-us/software-download/windows10 \"External link\") makes USB stick 32 GB for Installing Win10x64 and Win10x86  \n- Add **WIM** file for USB boot from RAMDISK - filename \u003d w10x64A.wim  \n- Add **VHDX** file to Portable SSD 250 GB for booting with FILEDISK filename \u003d W10x64.vhdx  \n- Add **ISO** file used by [WinNTSetup](https://msfn.org/board/topic/149612-winntsetup-v391-392-beta-4/ \"External link\") for Installing Win10x64 in VHDX or hard disk  \n- **Update BCD** files in folders **boot** and **efi** using reserved BCD copies to add WIM and VHDX to USB Boot Menu  \n- Or [BOOTICE](http://www.ipauly.com/ \"External link\") x64 is used to add New WIM or VHD entry to BCD files in **boot** and **efi**folders on USB  \n- Keep BCD files in **boot** and **efi**folders as copy for future boot repair  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**A. Microsoft Method** - also needed for New hard disk - via option **New** the**EFI** Partition is created  \n1. Download [MediaCreationTool1803.exe](https://www.microsoft.com/en-us/software-download/windows10 \"External link\")  \n2. Make USB-stick 32 GB for Installing Win10x64 and Win10x86 (choose option both)  \n3. Boot from USB after beep via **F8 menu** and choose from menu: Windows 10 Setup (64 bits) to **Install**  \n**Shift F10** gives Command Window for **Repair** with [bcdedit](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/bcdedit-command-line-options \"External link\") and [bcdboot](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/bcdboot-command-line-options-techref-di \"External link\") and [bootsect](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/bootsect-command-line-options \"External link\") and [DiskPart](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc770877(v\u003dws.10) \"External link\") and [DISM](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/dism-image-management-command-line-options-s14 \"External link\")  \n**Cmd** Window run **notepad** - File Open - All files - R-mouse Run as admin on file **WinNTSetup** x64 - allows **method B.**  \nIn WinNTSetup select in USB folder **x64\\\\sources** file install.wim or **install.esd** or install.swm and use **Setup**  \n**Update of Windows 10** with preservation of Programs and User Data  \n- After starting up Windows 10 then **setup.exe** from USB will allow Update  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n**B. WinNTSetup Method - Boot from USB with WIM or VHDX file and use WinNTSetup and ISO file**  \nThis method gives more control to existing hard disk and you can simply install Windows 10 in **VHDX**  \n1. Download [MediaCreationTool1803.exe](https://www.microsoft.com/en-us/software-download/windows10 \"External link\") and Create Win10x64_1803.iso for Installing Win10x64  \nFirst create the ISO file on an internal hard disk and then copy the ISO file to USB  \n2. Boot from USB after beep via **F8 menu** and with **WIM** from RAMDISK or with **VHDX** as FILEDISK  \n3. Use **WinNTSetup** x64 and **ISO** file for**Install** of Windows 10 x64 in **VHDX** or hard disk  \nMore Info : [Forum](https://msfn.org/board/topic/121446-install-from-usb-after-booting-with-pe/?page\u003d3\u0026tab\u003dcomments#comment-1117324 \"External link\") and [WinNTSetup](https://msfn.org/board/topic/149612-winntsetup-v391-392-beta-4/ \"External link\") and [Boot from USB](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/boot-to-uefi-mode-or-legacy-bios-mode \"External link\") and [VHDX](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/boot-to-vhd--native-boot--add-a-virtual-hard-disk-to-the-boot-menu \"External link\") and [Native Boot](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/deploy-windows-on-a-vhd--native-boot \"External link\")  \n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\nYouTube Video **[Make VHDX](https://youtu.be/T3hqtiH6ufM \"External link\")** and**[Make USB Win10](https://www.youtube.com/watch?v\u003dGm4TlS_1Tzk \"External link\")** and**[Make USSD Win10](https://youtu.be/-RWwCraZjbA \"External link\")**  \n**More Info:** [Install Windows 10 from USB after booting with WIM or VHDX](http://reboot.pro/topic/21883-install-windows-10-from-usb-after-booting-with-wim-or-vhdx/?p\u003d208164 \"\")  \n\n**How to use WinNTSetup with Microsoft USB Boot Media**\n\n[![Media2_VHDX.png](http://reboot.pro/uploads/monthly_10_2018/post-9517-0-93644200-1539677430_thumb.png)](http://reboot.pro/uploads/monthly_10_2018/post-9517-0-93644200-1539677430.png \"Media2_VHDX.png - Size: 295.6KB\"){#ipb-attach-url-16154-0-65378900-1676066388} \u003d\u003d [![Media3_VHDX.png](http://reboot.pro/uploads/monthly_10_2018/post-9517-0-50952900-1539677438_thumb.png)](http://reboot.pro/uploads/monthly_10_2018/post-9517-0-50952900-1539677438.png \"Media3_VHDX.png - Size: 378.9KB\"){#ipb-attach-url-16155-0-65393500-1676066388} \u003d\u003d [![Media4_ShowHidden.png](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-57865700-1541597409_thumb.png)](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-57865700-1541597409.png \"Media4_ShowHidden.png - Size: 365.73KB\"){#ipb-attach-url-16181-0-65403400-1676066388}\n\n**ShowHidden.reg** can be used with double click in Explorer++ after booting with Microsoft USB Media\n\n```\nWindows Registry Editor Version 5.00\n\n; Show all hidden files\n[HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Advanced]\n\"SuperHidden\"\u003ddword:00000001\n\"WebViewBarricade\"\u003ddword:00000001\n\"Hidden\"\u003ddword:00000001\n\"ShowSuperHidden\"\u003ddword:00000001\n\n; Show all file extentions\n[HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Advanced]\n\"HideFileExt\"\u003ddword:00000000\n\n```\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "207893",
      "timestamp": "2018-10-15T04:15:11+00:00",
      "author": "911CD.net",
      "content": "FWIW I found a way to multi-boot a Linux system on a Secure Boot UEFI system. I installed Porteus on a USB drive and it supported booting on BIOS and UEFI systems but Secure Boot had to be disabled for UEFI, which is fine if you own the pc or you can change it\u0027s configuration. But this is not always permitted or possible on some machines.\n\nThe solution I found was to add Ubuntu\u0027s grub2 files to the USB drive. Ubuntu\u0027s grub2 supports Secure Boot.\n\nThis is the bash script I used to copy the Ubuntu grub2 file from a live Ubuntu ISO to the USB system.\n\n```\n#!/bin/bash\n# Add Ubuntu grub2 Secure Boot support to Porteus USB system.\nÂ \nUbuntuISO\u003d/mnt/sda6/ISOs/ubuntu-18.04.1-desktop-amd64.isoÂ Â Â  # Change to fit your system\nUSBdrv\u003d/mnt/sdb1Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  # Change to fit your system\nÂ \nif [ `whoami` !\u003d \"root\" ]; then\nÂ Â  echo -e \"Enter root\u0027s password\"\nÂ Â  su -c \"sh $0 $1\"\nÂ Â  exit\nfi\nif [ ! -f $USBdrv/USB_INSTALLATION.txt ]; then               # Change to fit your system\nÂ Â  echo \"Porteus USB drive not found.\"\nÂ Â  read\nÂ Â  exit\nfi\nif [ ! -f $UbuntuISO ]; then\nÂ Â  echo \"Ubuntu ISO not found.\"\nÂ Â  read\nÂ Â  exit\nfi\nmloop $UbuntuISO\n#read\nmv $USBdrv/EFI/bootÂ Â Â Â Â Â Â Â Â Â Â Â Â  $USBdrv/EFI/PorteusbootÂ Â Â Â Â Â Â Â Â Â  # Backup Porteus EFI\nmkdirÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  $USBdrv/EFI/BOOT\nmkdirÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  $USBdrv/boot/grub\ncp -ar /mnt/loop/EFI/BOOT/*Â Â Â Â Â  $USBdrv/EFI/BOOT/\ncp -ar /mnt/loop/boot/grub/*Â Â Â Â  $USBdrv/boot/grub/\nmv $USBdrv/boot/grub/grub.cfgÂ Â Â  $USBdrv/boot/grub/Ubuntugrub.cfgÂ  # Backup Ubuntu grub.cfg\necho \" \"\necho \"Now add the posted grub.cfg file to the $USBdrv/boot/grub/ folder.\"\necho \"Customize the new grub.cfg\u0027s porteus_parms in the Secure Boot menu.\"\necho \" \"\nread\nlsÂ  $USBdrv/EFI/BOOT\nlsÂ  $USBdrv/boot\nlsÂ  $USBdrv/boot/grub\ncat $USBdrv/boot/grub/grub.cfg\nuloop\n```\n\nAnd the grub2 cfg file I used is:\n\n```\nif loadfont /boot/grub/font.pf2 ; then\n# set gfxmode\u003dauto\nset gfxmode\u003d800x600,auto\ninsmod efi_gop\ninsmod efi_uga\ninsmod gfxterm\nterminal_output gfxterm\nfi\nset menu_color_normal\u003dwhite/black\nset menu_color_highlight\u003dblack/light-gray\nset timeout\u003d60\nset gfxpayload\u003d1024x768\n\nmenuentry \" 1. Porteus 4.0 - UEFI Secure Boot\" {\nÂ Â Â Â \nÂ Â Â Â  set porteus_parms\u003d\"volume\u003d33 reboot\u003dcold extramod\u003d/Modules;/Modsavedat noload\u003dsave.dat;cinnamon\" # Change to fit your system needs\nÂ Â Â Â  set bootdrv\u003d$root\nÂ Â Â Â  search -f /boot/syslinux/vmlinuz\nÂ Â Â Â  if [ $? \u003d\u003d 0 ]; then\nÂ Â Â Â Â Â Â  linuxÂ  /boot/syslinux/vmlinuz $porteus_parms\nÂ Â Â Â Â Â Â  initrd /boot/syslinux/initrd.xz\nÂ Â Â Â  else\nÂ Â Â Â Â Â Â  echo \"----------------------------------------\"\nÂ Â Â Â Â Â Â  echo Porteus drive NOT found.\nÂ Â Â Â Â Â Â  echo\nÂ Â Â Â Â Â Â  sleep -v -i 10\nÂ Â Â Â  fi\nÂ Â Â Â  set root\u003d$bootdrv\nÂ Â Â Â  }\nmenuentry \" 2. Porteus 4.0 menu - UEFI system\" {\nÂ Â Â Â  set efibootmgr\u003d/EFI/Porteusboot/bootx64.efi\nÂ Â Â Â  set bootdrv\u003d$root\nÂ Â Â Â  search -f $efibootmgr\nÂ Â Â Â  if [ $? \u003d\u003d 0 ]; then\nÂ Â Â Â Â Â Â  chainloader $efibootmgr\nÂ Â Â Â  else\nÂ Â Â Â Â Â Â  echo \"----------------------------------------\"\nÂ Â Â Â Â Â Â  echo Porteus drive NOT found.\nÂ Â Â Â Â Â Â  echo\nÂ Â Â Â Â Â Â  sleep -v -i 10\nÂ Â Â Â  fi\nÂ Â Â Â  set root\u003d$bootdrv\nÂ Â Â Â  }\nmenuentry \" 3. Porteus 4.0 menu - BIOS system\" {\nÂ Â Â Â  set bootmgr\u003d/boot/syslinux/chain.c32\nÂ Â Â Â  set bootdrv\u003d$root\nÂ Â Â Â  search -f $bootmgr\nÂ Â Â Â  if [ $? \u003d\u003d 0 ]; then\nÂ Â Â Â Â Â Â  chainloader +1\nÂ Â Â Â  else\nÂ Â Â Â Â Â Â  echo \"----------------------------------------\"\nÂ Â Â Â Â Â Â  echo Porteus drive NOT found.\nÂ Â Â Â Â Â Â  echo\nÂ Â Â Â Â Â Â  sleep -v -i 10\nÂ Â Â Â  fi\nÂ Â Â Â  set root\u003d$bootdrv\nÂ Â Â Â  }\nmenuentry \" \" { echo }\nmenuentry \" 4. Reboot\" {\nÂ Â Â Â  reboot\nÂ Â Â Â  }\n```\n\nThis approach may work with other USB installed Linux systems.\n\nI found the Ubunto ISO from here: [https://duckduckgo.c...o\\\u0026t\u003dffcm\\\u0026ia\u003dweb](https://duckduckgo.com/?q\u003dubuntu-18.04.1-desktop-amd64.iso\u0026t\u003dffcm\u0026ia\u003dweb \"External link\")\n\n"
    },
    {
      "id": "208221",
      "timestamp": "2018-11-13T05:07:14+00:00",
      "author": "911CD.net",
      "content": "ERROR!! When I try booting my Porteus USB drive with the Ubuntu Grub2 on it like posted above on a x86_64 non-UEFI machine it fails to boot. ![:o](http://reboot.pro/public/style_emoticons/default/ohmy.png)\n\nInitially it failed because it couldn\u0027t find a normal.mod file in a /boot/grub/i386-pc folder! Since the machine is x86_64 that was a little strange and if required why isn\u0027t in the ISO. My Grub2Win system has an i386-pc folder so I copied it to the USB drive. Now when the Porteus USB drive boots on the non-UEFI machine, and on an older x486 machine, it boots to a GNU GRUB version 2.02 terminal screen stating Minimal BASH-line editing is supported and a grub\\\u003e prompt. Why it\u0027s not finding the grub.cfg it finds when booting on my UEFI machine I have NO IDEA. ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)\n\nAny ideas?\n\n"
    },
    {
      "id": "208413",
      "timestamp": "2018-11-29T09:43:07+00:00",
      "author": "wimb",
      "content": "I have added [AIOBoot-v0.9.8.17.7z](http://reboot.pro/topic/21297-aio-boot-create-a-bootable-usb-drive-or-hdd-with-grub2-clover-and-syslinux/ \"\") to my USB-stick booting with **BootManager** as described in **Win_Inst_Eng.pdf** as given [here](http://reboot.pro/topic/21883-install-windows-10-from-usb-after-booting-with-wim-or-vhdx/ \"\").\n\nI did not auto install new Bootloader, but kept my Windows BootManager as Bootloader.\n\nI am using **Linux Mint** files **bootx64.efi** and **grubx64.efi** in EFI\\\\BOOT folder for support of **UEFI Secure booting**.  \n**grubx64.efi** expects for UEFI booting **grub.cfg** in folder **boot\\\\grub**  \nThe **grub** folder of **AIO** was copied to my **boot** folder made by Microsoft MediaCreationTool.\n\nIn file **Main.cfg** of folder **boot\\\\grub** make new boot entry for **UEFI** booting of Windows BootManager\n\n```\nmenuentry \"[b] Windows 10 x64 EFI USB BootManager\" --hotkey\u003db {\n  chainloader /efi/microsoft/boot/bootmgfw.efi\n}\n\n```\n\nI have used **BOOTICE** to add **Grub2** entry to **boot\\\\bcd** Windows BootManager for **BIOS** booting support with Boot file**\\\\AIO\\\\grub\\\\grub2win**\n\nThen I have used **AIOCreator.exe** to Integrate Linux ISO files.\n\nNow I have [**Linux Mint**](https://linuxmint.com/download.php \"External link\") and [**Knoppix Live**](https://www.runtime.org/data-recovery-live-cd.htm \"External link\") and Porteus and Ubuntu booting in **BIOS** and in **UEFI Secure mode**\n\n**YouTube Video: [USB AIO Linux](https://youtu.be/LI57gVXcYBg \"External link\")**\n\n[![W10_AIO-7.png](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-30239400-1543485166_thumb.png)](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-30239400-1543485166.png \"W10_AIO-7.png - Size: 85.74KB\"){#ipb-attach-url-16221-0-65412200-1676066388} \u003d\u003d [![W10_AIO-8.png](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-03356900-1543485174_thumb.png)](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-03356900-1543485174.png \"W10_AIO-8.png - Size: 49.04KB\"){#ipb-attach-url-16222-0-65419900-1676066388} \u003d\u003d [![W10_AIO-9.png](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-15163900-1543485183_thumb.png)](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-15163900-1543485183.png \"W10_AIO-9.png - Size: 49.76KB\"){#ipb-attach-url-16223-0-65428100-1676066388} \u003d\u003d [![W10_AIO-5.png](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-35625500-1543485575_thumb.png)](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-35625500-1543485575.png \"W10_AIO-5.png - Size: 69.63KB\"){#ipb-attach-url-16224-0-65435300-1676066388} \u003d\u003d [![W10_AIO-6.png](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-14437300-1543485587_thumb.png)](http://reboot.pro/uploads/monthly_11_2018/post-9517-0-14437300-1543485587.png \"W10_AIO-6.png - Size: 31.2KB\"){#ipb-attach-url-16225-0-65441900-1676066388}\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "208415",
      "timestamp": "2018-11-29T19:00:41+00:00",
      "author": "911CD.net",
      "content": "The grub2.cfg menu file I\u0027ve ended up with for booting Porteus with Secure Boot enabled and disabled is this:\n\n```\nif loadfont /boot/grub/font.pf2 ; then\n# set gfxmode\u003dauto\nset gfxmode\u003d800x600,auto\ninsmod efi_gop\ninsmod efi_uga\ninsmod gfxterm\nterminal_output gfxterm\nfi\nset menu_color_normal\u003dwhite/black\nset menu_color_highlight\u003dblack/light-gray\nset timeout\u003d60\nset gfxpayload\u003d1024x768\n\nmenuentry \" 1. UEFI Porteus 4.0 system - for Secure Boot enabled\" {\nÂ Â Â Â \nÂ Â Â Â  set efibootmgr\u003d/EFI/boot/grubx64.efi\nÂ Â Â Â  set porteus_parms\u003d\"volume\u003d33 reboot\u003dcold extramod\u003d/Modules;/Modsavedat noload\u003dsave.dat;cinnamon\"\n#Â Â Â  Change parms to fit your needs.\nÂ Â Â Â  set bootdrv\u003d$root\nÂ Â Â Â  search -f $efibootmgr\nÂ Â Â Â  if [ $? \u003d\u003d 0 ]; then\nÂ Â Â Â Â Â Â  linuxÂ  /boot/syslinux/vmlinuz $porteus_parms\nÂ Â Â Â Â Â Â  initrd /boot/syslinux/initrd.xz\nÂ Â Â Â Â Â Â  echo \" \"\nÂ Â Â Â Â Â Â  echo \" -\u003e \"\nÂ Â Â Â Â Â Â  echo \" -\u003e If /boot/grub/x86-64-efi errors appear, disregard.\"\nÂ Â Â Â Â Â Â  echo \" -\u003e Secure Boot has not been enabled.\"\nÂ Â Â Â Â Â Â  echo \" -\u003e \"\nÂ Â Â Â Â Â Â  sleep -i 4\nÂ Â Â Â  else\nÂ Â Â Â Â Â Â  echo \"----------------------------------------\"\nÂ Â Â Â Â Â Â  echo $efibootmgr NOT found.\nÂ Â Â Â Â Â Â  echo\nÂ Â Â Â Â Â Â  sleep -i 10\nÂ Â Â Â  fi\nÂ Â Â Â  set root\u003d$bootdrv\nÂ Â Â Â  }\nmenuentry \" 2. UEFI Porteus 4.0 menu - aborts if Secure Boot enabled\" {\nÂ Â Â Â  set efibootmgr\u003d/EFI/Porteusboot/bootx64.efi\nÂ Â Â Â  set bootdrv\u003d$root\nÂ Â Â Â  search -f $efibootmgr\nÂ Â Â Â  if [ $? \u003d\u003d 0 ]; then\nÂ Â Â Â Â Â Â  chainloader $efibootmgr\nÂ Â Â Â Â Â Â  echo \" \"\nÂ Â Â Â Â Â Â  echo \" -\u003e \"\nÂ Â Â Â Â Â Â  echo \" -\u003e If /boot/grub/x86-64-efi errors appear, disregard.\"\nÂ Â Â Â Â Â Â  echo \" -\u003e \"\nÂ Â Â Â Â Â Â  sleep -i 4\nÂ Â Â Â  else\nÂ Â Â Â Â Â Â  echo \"----------------------------------------\"\nÂ Â Â Â Â Â Â  echo $efibootmgr NOT found.\nÂ Â Â Â Â Â Â  echo\nÂ Â Â Â Â Â Â  sleep -i 10\nÂ Â Â Â  fi\nÂ Â Â Â  set root\u003d$bootdrv\nÂ Â Â Â  }\nmenuentry \" \" { echo }\nmenuentry \" 3. Reboot\" {\nÂ Â Â Â  reboot\nÂ Â Â Â  }\nmenuentry \" 4. Shutdown\" {\nÂ Â Â Â  halt\nÂ Â Â Â  }\nmenuentry \" \" { echo }\nmenuentry \" Notes\" {\nÂ Â Â Â  echo\nÂ Â Â Â  echo \"To switch the USB drive\u0027s boot mode to BIOS mode \"\nÂ Â Â Â  echo \"run the BIOSboot.sh script in the /EFI directory.\"\nÂ Â Â Â  echo\nÂ Â Â Â  echo \"To switch the USB drive boot mode back to EFI mode\"\nÂ Â Â Â  echo \"run the Secureboot.sh script in the /EFI directory.\"\nÂ Â Â Â  echo\nÂ Â Â Â  sleep -i 10\nÂ Â Â Â  }\n```\n\nNo folders added other than the Ubuntu grub folders that the [script above](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-4#entry207893 \"\") copies to the USB drive.\n\nTwo small scripts were added to the /EFI folder. These are optional for testing the boot options.\n\nSecureboot.sh\n\n```\n#!/bin/sh\n# Switch standard Porteus boot config to UEFI Secure Boot config.\nUSBdrv\u003d/mnt/sdb1Â Â  # USB drive\nif [ -d $USBdrv/EFI/UbuntuBOOT ]; then\nÂ Â  mv $USBdrv/EFI/bootÂ Â Â Â Â Â Â Â  $USBdrv/EFI/Porteusboot\nÂ Â  mv $USBdrv/EFI/UbuntuBOOTÂ Â  $USBdrv/EFI/boot\nelse\nÂ Â  echo \"Â  UEFI Secure Boot config already in place.\"\nfi\n```\n\nBIOSboot.sh\n\n```\n#!/bin/sh\n# Switch UEFI Secure Boot config to standard Porteus boot config.\nUSBdrv\u003d/mnt/sdb1Â Â  # USB drive\nif [ -d $USBdrv/EFI/Porteusboot ]; then\nÂ Â  mv -f $USBdrv/EFI/bootÂ Â Â Â Â Â Â Â  $USBdrv/EFI/UbuntuBOOT\nÂ Â  mv -f $USBdrv/EFI/PorteusbootÂ  $USBdrv/EFI/boot\nelse\nÂ Â  echo \"Â  Porteus boot config already in place.\"\nfi\n```\n\nSo the system works on both Secure Boot and disabled Secure Boot systems. But it\u0027s not as clean as I would like.\n\nSo I\u0027ve been working with trying to get the automatic switching mode code to work again. And it still doesn\u0027t work in Secure Boot mode..\n\n```\nif loadfont /boot/grub/font.pf2 ; then\n# set gfxmode\u003dauto\nset gfxmode\u003d800x600,auto\ninsmod efi_gop\ninsmod efi_uga\ninsmod gfxterm\nterminal_output gfxterm\nfi\nset menu_color_normal\u003dwhite/black\nset menu_color_highlight\u003dblack/light-gray\nset timeout\u003d60\nset gfxpayload\u003d1024x768\nset SB\u003d0\nset efibootmgr\u003d/EFI/Porteusboot/bootx64.efi\nset porteus_parms\u003d\"volume\u003d33 reboot\u003dcold extramod\u003d/Modules;/Modsavedat noload\u003dsave.dat;cinnamon\"\n#Â  Change parms to fit your needs.\n\ninsmod /boot/grub/x86_64-efi/cat\nif rmmod -v cat; then set SB\u003d1; fi\n#echo SB\u003d$SB; sleep -v 8\nif [ $SB \u003d\u003d 1 ]; then\nÂ Â  linuxÂ  /boot/syslinux/vmlinuz $porteus_parms\nÂ Â  initrd /boot/syslinux/initrd.xz\nÂ Â  boot\nÂ Â  exit\nfi\nchainloader $efibootmgr\nboot\nexit\n\n```\n\nThe \"home\" missing error I was getting previously was due to no home.mod module in the /boot/grub/x86_64-efi folder. So I changed the name to a file that does exist. But the various config options I tried with insmod and rmmod failed. One senario was the Secure Boot code was being executed in both Secure Boot and disabled Secure Boot mode. Not a bad scenario, just not the desired scenario.\n\n\u003cbr /\u003e\n\n```\nguest@porteus:~$ tree /mnt/sdb1 -d\n/mnt/sdb1\nâââ EFI\nâÂ Â  âââ Porteusboot\nâÂ Â  âââ boot\n\nâââ boot\nâÂ Â  âââ docs\nâÂ Â  âââ grub\nâÂ Â  âÂ Â  âââ x86_64-efi\nâÂ Â  âââ syslinux\nâââ changes\nâââ porteus\nÂ Â Â  âââ base\nÂ Â Â  âââ modules\nÂ Â Â  âââ optional\nÂ Â Â  âââ rootcopy\n```\n\n\u003cbr /\u003e\n\n**Edited by 911CD.net, 29 November 2018 - 07:17 PM.**\n"
    },
    {
      "id": "208639",
      "timestamp": "2018-12-14T08:10:36+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI - Version 86 \\*\\*\\***  \n- Add VHDX to Boot Manager Menu for BIOS and UEFI Secure booting with Windows 10 x64 VHDX as FILEDISK  \n- Add WIM to Boot Manager Menu for BIOS and UEFI Secure booting with Windows 10 x64 WIM from RAMDISK  \n- Add Grub2 of Linux Mint to boot various Linux versions in BIOS and UEFI Secure mode  \n- AIO Boot is supported in BIOS mode by adding Grub4dos and Grub2 entry to Boot Manager Menu  \n- AIO Boot is supported in UEFI Secure mode by booting with Grub2 EFI Manager of Linux Mint  \n- Update Grub4dos to version [grub4dos-0.4.6a-2018-09-19](http://grub4dos.chenall.net/categories/downloads/ \"External link\") for booting in BIOS mode  \n**Download :** **[UEFI_MULTI](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\") -** password is **bootwimb**  \n**How to make USB Drive booting with various AIO Linux versions in BIOS and in UEFI Secure mode**  \n1. Make **FAT32 USB Drive** (Max \u003d 32 GB) booting with Microsoft **Boot Manager Menu**  \n[**Microsoft Media Creation Tool**](https://www.microsoft.com/en-us/software-download/windows10 \"External link\") (Architecture both 32 and 64 bits) Or Other Format Tool can be used  \n2. Download and Unpack [**AIOBoot-v0.9.8.17.7z**](https://sourceforge.net/projects/aioboot/ \"External link\") - Don\u0027t use Extractor and Don\u0027t Overwrite existing Microsoft files  \nUnpack and Copy content of folder AIOBoot-v0.9.8.17 to FAT32 USB Drive, but keep existing Microsoft Boot files  \n3. Use **UEFI_MULTI** to Add **Grub2** EFI Manager of **Linux Mint,** which fixes AIO Boot for booting in BIOS and UEFI Secure mode  \n4. On USB run **AIOCreator.exe** - Select Integration Linux OS and your Linux ISO [linuxmint-19-cinnamon-64bit-v2.iso](https://linuxmint.com/download.php \"External link\") - preferred  \n5. **Boot from USB** after beep via F8 menu in UEFI or in BIOS mode with Grub2 menu and Select your Linux OS  \n**More Info** in  \n- [Linux Mint](https://linuxmint.com/download.php \"External link\") - [Knoppix Live](https://www.runtime.org/data-recovery-live-cd.htm \"External link\") - [Ubuntu](https://www.ubuntu.com/download/desktop \"External link\") - [Porteus](http://www.porteus.org/ \"External link\")  \n**More Info:** [Install Windows 10 from USB after booting with WIM or VHDX](http://reboot.pro/topic/21883-install-windows-10-from-usb-after-booting-with-wim-or-vhdx/?p\u003d208164 \"\")  \n**YouTube Video:** [Make VHDX](https://youtu.be/T3hqtiH6ufM \"External link\") and [Make USB Win10](https://www.youtube.com/watch?v\u003dGm4TlS_1Tzk \"External link\") and [Make USSD Win10](https://youtu.be/-RWwCraZjbA \"External link\") and [USB AIO Linux](https://youtu.be/LI57gVXcYBg \"External link\") and [UEFI_MULTI-Demo](https://youtu.be/XVDlF6irrl0 \"External link\")  \n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "208817",
      "timestamp": "2018-12-27T13:20:23+00:00",
      "author": "wimb",
      "content": "**UEFI_MULTI-86** has been improved so that the extraction of Linux ISO by AIO Boot is not needed anymore.  \nWe can simply add various Linux ISO files to folder **images** on USB.  \n**Grub4dos entries present in menu.lst for booting in BIOS mode various Linux ISO files**  \n\n```\niftitle [if exist /images/linuxmint-19-cinnamon-64bit-v2.iso] ISO Linux Mint - linuxmint-19-cinnamon-64bit-v2.iso\nset iso_path\u003d/images/linuxmint-19-cinnamon-64bit-v2.iso\nmap %iso_path% (0xff)\nmap --hook\nroot (0xff)\nkernel /casper/vmlinuz file\u003d/cdrom/preseed/linuxmint.seed boot\u003dcasper iso-scan/filename\u003d%iso_path% quiet splash --\ninitrd /casper/initrd.lz\n\niftitle [if exist /images/runtimelivecd.iso] ISO Knoppix - runtimelivecd.iso\nset iso_path\u003d/images/runtimelivecd.iso\nmap %iso_path% (0xff)\nmap --hook\nroot (0xff)\nkernel /boot/isolinux/linux bootfrom\u003d/dev/*%iso_path% knoppix_dir\u003d/KNOPPIX ramdisk_size\u003d100000 lang\u003den apm\u003dpower-off nomce libata.force\u003dnoncq hpsa.hpsa_allow_any\u003d1 loglevel\u003d1 noswap tz\u003dlocaltime\ninitrd /boot/isolinux/minirt.gz\n\niftitle [if exist /images/ubuntu-18.10-desktop-amd64.iso] ISO Ubuntu - ubuntu-18.10-desktop-amd64.iso\nset iso_path\u003d/images/ubuntu-18.10-desktop-amd64.iso\nmap %iso_path% (0xff)\nmap --hook\nroot (0xff)\nkernel /casper/vmlinuz file\u003d/cdrom/preseed/ubuntu.seed boot\u003dcasper iso-scan/filename\u003d%iso_path% quiet splash ---\ninitrd /casper/initrd\n\niftitle [if exist /images/Porteus-CINNAMON-v4.0-x86_64.iso] ISO Linux Porteus - Porteus-CINNAMON-v4.0-x86_64.iso\nset iso_path\u003d/images/Porteus-CINNAMON-v4.0-x86_64.iso\nmap %iso_path% (0xff)\nmap --hook\nroot (0xff)\nkernel /boot/syslinux/vmlinuz nomagic base_only norootcopy from\u003d%iso_path%\ninitrd /boot/syslinux/initrd.xz\n\n\n```\n\n\u003d  \n**Grub2 entries present in grub.cfg for booting in UEFI Secure mode various Linux ISO files**  \n\n```\nif [ -e \"/images/linuxmint-19-cinnamon-64bit-v2.iso\" ]; then\nmenuentry \"ISO Linux Mint - linuxmint-19-cinnamon-64bit-v2.iso\" {\n  set iso_path\u003d/images/linuxmint-19-cinnamon-64bit-v2.iso\n  loopback loop $iso_path\n  linux (loop)/casper/vmlinuz file\u003d/cdrom/preseed/linuxmint.seed boot\u003dcasper iso-scan/filename\u003d$iso_path quiet splash --\n  initrd (loop)/casper/initrd.lz\n}\nfi\n\nif [ -e \"/images/runtimelivecd.iso\" ]; then\nmenuentry \"ISO Knoppix - runtimelivecd.iso\" {\n  set iso_path\u003d/images/runtimelivecd.iso\n  loopback loop $iso_path\n  linux (loop)/boot/isolinux/linux bootfrom\u003d/dev/*$iso_path lang\u003den apm\u003dpower-off nomce libata.force\u003dnoncq hpsa.hpsa_allow_any\u003d1 loglevel\u003d1 noswap tz\u003dlocaltime\n  initrd (loop)/boot/isolinux/minirt.gz\n  loopback --delete loop\n}\nfi\n\nif [ -e \"/images/ubuntu-18.10-desktop-amd64.iso\" ]; then\nmenuentry \"ISO Ubuntu - ubuntu-18.10-desktop-amd64.iso\" {\n  set iso_path\u003d/images/ubuntu-18.10-desktop-amd64.iso\n  loopback loop $iso_path\n  linux (loop)/casper/vmlinuz file\u003d/cdrom/preseed/ubuntu.seed boot\u003dcasper iso-scan/filename\u003d$iso_path quiet splash ---\n  initrd (loop)/casper/initrd\n}\nfi\n\nif [ -e \"/images/Porteus-CINNAMON-v4.0-x86_64.iso\" ]; then\nmenuentry \"ISO Linux Porteus - Porteus-CINNAMON-v4.0-x86_64.iso\" {\n  set iso_path\u003d/images/Porteus-CINNAMON-v4.0-x86_64.iso\n  loopback loop $iso_path\n  linux\t(loop)/boot/syslinux/vmlinuz nomagic base_only norootcopy from\u003d$iso_path\n  initrd (loop)/boot/syslinux/initrd.xz\n}\nfi\n\n```\n\n\u003d  \n**Download :** **[UEFI_MULTI](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\") -** password is **bootwimb**  \n**How to make USB Drive booting with various Linux ISO versions in BIOS and in UEFI Secure mode**  \n1. Make **FAT32 USB Drive** (Max \u003d 32 GB) booting with Microsoft **Boot Manager Menu**  \n[**Microsoft Media Creation Tool**](https://www.microsoft.com/en-us/software-download/windows10 \"External link\") (Architecture both 32 and 64 bits) Or Other Format Tool can be used  \n2. Use **UEFI_MULTI** to Add **Grub4dos** for booting in BIOS mode and **Grub2** EFI Manager of **Linux Mint** for booting in UEFI Secure mode  \n3. In USB folder **images** Add your Linux ISO file - preferred is [linuxmint-19-cinnamon-64bit-v2.iso](https://linuxmint.com/download.php \"External link\")  \n4. **Boot from USB** after beep via F8 menu in BIOS mode with **Grub4dos** menu Or in **UEFI Secure** mode with **Grub2** menu and Select your Linux OS  \n**More Info** - [Linux Mint](https://linuxmint.com/download.php \"External link\") - [Knoppix Live](https://www.runtime.org/data-recovery-live-cd.htm \"External link\") - [Ubuntu](https://www.ubuntu.com/download/desktop \"External link\") - [Porteus](http://www.porteus.org/ \"External link\") - All booting in **UEFI Secure** mode using **Grub2** EFI Manager of**Linux Mint**  \nIn case UEFI Grub2 is not available as Boot option in your F8 Boot Menu for your Portable SSD  \nthen you need to use BOOTICE to Add UEFI entry.  \nUnneeded for USB-Stick, but UEFI Grub2 boot entry is easily lost in case of Portable SSD.  \nSelect as UEFI Boot entry on USB the Linux Mint Grub2 file \\\\EFI\\\\Boot\\\\BOOTx64.EFI  \n[![UEFI_Grub2.png](http://reboot.pro/uploads/monthly_12_2018/post-9517-0-17791600-1546174935_thumb.png)](http://reboot.pro/uploads/monthly_12_2018/post-9517-0-17791600-1546174935.png \"UEFI_Grub2.png - Size: 130.9KB\"){#ipb-attach-url-16342-0-93408200-1676066388}  \n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)  \n**More Info:** [Install Windows 10 from USB after booting with WIM or VHDX](http://reboot.pro/topic/21883-install-windows-10-from-usb-after-booting-with-wim-or-vhdx/?p\u003d208164 \"\")  \n**YouTube Video:** [Make VHDX](https://youtu.be/T3hqtiH6ufM \"External link\") and [Make USB Win10](https://www.youtube.com/watch?v\u003dGm4TlS_1Tzk \"External link\") and [Make USSD Win10](https://youtu.be/-RWwCraZjbA \"External link\") and [USB AIO Linux](https://youtu.be/LI57gVXcYBg \"External link\") and [UEFI_MULTI-Demo](https://youtu.be/XVDlF6irrl0 \"External link\")  \n\n"
    },
    {
      "id": "208818",
      "timestamp": "2018-12-27T14:32:09+00:00",
      "author": "Wonko the Sane",
      "content": "Question/doubt. ![:dubbio:](https://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\nIF:  \nif exist /images/linuxmint-19-cinnamon-64bit-v2.iso  \nis satisfied, isn\u0027t this:  \nfind --set-root /images/linuxmint-19-cinnamon-64bit-v2.iso  \nredundant?  \n\nI mean, if the condition is satisfied, root is already established to the \"right\" parent dir, and the result of find --set-root in the best of cases won\u0027t change root (but will take some time to execute), in the worse will establish root to another device that is searched before the current root one.  \n\nOr, in other words, either of:  \n\n\u003e iftitle \\[find --set-root /images/linuxmint-19-cinnamon-64bit-v2.iso\\] ISO Linux Mint - linuxmint-19-cinnamon-64bit-v2.iso  \n\u003e map /images/linuxmint-19-cinnamon-64bit-v2.iso (0xff)  \n\u003e etc.\n\nor:  \n\u003e iftitle \\[if exist /images/linuxmint-19-cinnamon-64bit-v2.iso\\] ISO Linux Mint - linuxmint-19-cinnamon-64bit-v2.iso  \n\u003e map /images/linuxmint-19-cinnamon-64bit-v2.iso (0xff)  \n\u003e etc.\n\nseems to make more sense to me.  \n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)  \nWonko   \n"
    },
    {
      "id": "208820",
      "timestamp": "2018-12-27T15:00:11+00:00",
      "author": "wimb",
      "content": "\u003e Question/doubt. ![:dubbio:](https://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\u003e\n\u003e IF:  \n\u003e if exist /images/linuxmint-19-cinnamon-64bit-v2.iso  \n\u003e is satisfied, isn\u0027t this:  \n\u003e find --set-root /images/linuxmint-19-cinnamon-64bit-v2.iso  \n\u003e redundant?  \n\nThanks for your comment. You are quite right :smile:\n\nThe find statement is redundant and I will make changes accordingly.\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "208821",
      "timestamp": "2018-12-27T16:39:30+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Thanks for your comment. You are quite right :smile:   \n\u003e The find statement is redundant and I will make changes accordingly.  \n\u003e\n\u003e ![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nGood :smile: , then, only for symmetry with GRUB2 ![:w00t:](https://reboot.pro/public/style_emoticons/default/w00t.gif)  \n\nHow about something \\*like\\*:\n\n```\n\niftitle [if exist /images/linuxmint-19-cinnamon-64bit-v2.iso] ISO Linux Mint - linuxmint-19-cinnamon-64bit-v2.iso\nset iso_path\u003d/images/linuxmint-19-cinnamon-64bit-v2.iso\nmap %iso_path% (0xff)\nmap --hook\nroot (0xff)\nkernel /casper/vmlinuz file\u003d/cdrom/preseed/linuxmint.seed boot\u003dcasper iso-scan/filename\u003d%iso_path% quiet splash --\ninitrd /casper/initrd.lz\n```\n\n![:unsure:](https://reboot.pro/public/style_emoticons/default/unsure.png)\n\n![:duff:](https://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "208822",
      "timestamp": "2018-12-27T19:13:11+00:00",
      "author": "wimb",
      "content": "\u003e Good :smile: , then, only for symmetry with GRUB2 ![:w00t:](https://reboot.pro/public/style_emoticons/default/w00t.gif)  \n\u003e\n\u003e How about something \\*like\\*:\n\u003e\n\u003e ```\n\u003e\n\u003e iftitle [if exist /images/linuxmint-19-cinnamon-64bit-v2.iso] ISO Linux Mint - linuxmint-19-cinnamon-64bit-v2.iso\n\u003e set iso_path\u003d/images/linuxmint-19-cinnamon-64bit-v2.iso\n\u003e map %iso_path% (0xff)\n\u003e map --hook\n\u003e root (0xff)\n\u003e kernel /casper/vmlinuz file\u003d/cdrom/preseed/linuxmint.seed boot\u003dcasper iso-scan/filename\u003d%iso_path% quiet splash --\n\u003e initrd /casper/initrd.lz\n\u003e ```\n\nGood idea :smile:\n\nThe [Grub4dos Menu entries](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d208817 \"\") as published earlier are now according to your proposal\n\nand present in the available [**UEFI_MULTI**](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\") download.\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "209075",
      "timestamp": "2019-01-25T08:00:42+00:00",
      "author": "wimb",
      "content": "**How to Make Computer booting with Linux and Windows**\n\n**A. UEFI Secure Multi-Boot Computer booting with Linux and Windows**(New Computer \\\u003e 2012)\n\n- In Windows Disk Management use R-mouse menu to Shrink partition of drive C: by 10 GB\n\n- Create a **FAT32** primary partition of 10 GB to host the Linux ISO files\n\n- Make folder **images** on FAT32 drive and copy [Ubuntu](https://www.ubuntu.com/download/desktop \"External link\") and other Linux ISO files to folder images\n\n- In Windows 10 x64 run WinNTSetup_x64.exe so that EFI partition is mounted as drive Z:\n\n- Or use R-mouse to open **admin cmd** window and mount the EFI partition using\n\n```\nmountvol Z: /s\n```\n\n- Use R-mouse menu to **run as administrator** Explorer-x64.exe of [Explorer++](https://explorerplusplus.com/ \"External link\")  \n- Rename Microsoft file **bootx64.efi** in folder Z:\\\\EFI as file **org-bootx64.efi**  \n- Use download [Linux_MULTI](http://reboot.pro/topic/22001-linux-multi/ \"\") Or Mount [Linux Mint](https://linuxmint.com/download.php \"External link\") ISO file in Explorer using double-click  \n- Copy folder **boot** and **EFI** of Linux Mint to your EFI drive Z: so that computer can boot with Grub2 of Linux Mint  \n- Edit file **boot\\\\grub\\\\grub.cfg** in drive Z: [according](http://reboot.pro/topic/21926-having-problems-booting-a-vhd-on-a-machine-with-separate-efi-partition/?p\u003d208971 \"\") to [samples](http://reboot.pro/topic/21926-having-problems-booting-a-vhd-on-a-machine-with-separate-efi-partition/?p\u003d208973 \"\") given or as given in download [Linux_MULTI](http://reboot.pro/topic/22001-linux-multi/ \"\")  \n- Take into account your FAT32 disk number and partitioning type and partition number e.g. use **(hd0,gpt3)** or **(hd1,msdos1)**  \n- In Windows 10 use [BOOTICE](http://www.ipauly.com/ \"External link\") to make **UEFI Grub2** entry for the internal disk having FAT32 partition.\n\n- If desired move the UEFI Grub2 entry with **Up** to the first place so that Grub2 has the highest **Boot Priority**\n\n- Use [BOOTICE](http://www.ipauly.com/ \"External link\") to adjust the BCD of current system in Professional mode\n\n- Adjust Windows Boot entry setting **BootMenuPolicy Legacy** so that there is no reboot of Windows 10\n\n[![UEFI_Grub2_SSD.png](https://reboot.pro/uploads/monthly_01_2019/post-9517-0-92848300-1547659892_thumb.png)](https://reboot.pro/uploads/monthly_01_2019/post-9517-0-92848300-1547659892.png \"UEFI_Grub2_SSD.png - Size: 152.78KB\"){#ipb-attach-url-16377-0-75283400-1676016903} \u003d\u003d [![Grub2_Linux_MULTI.png](http://reboot.pro/uploads/monthly_01_2019/post-9517-0-42530200-1548419793_thumb.png)](http://reboot.pro/uploads/monthly_01_2019/post-9517-0-42530200-1548419793.png \"Grub2_Linux_MULTI.png - Size: 567.41KB\"){#ipb-attach-url-16385-0-93421800-1676066388}  \n\n- Use **F8** Boot Menu to Select **UEFI Grub2** entry Or use the **auto** sequence for booting the computer:\n\n**UEFI Grub2 Menu** with Linux ISO entries \\\u003e\\\u003e **Windows Boot Manager Menu** with Win 10 x64 and WIM and VHDX entries \\\u003e\\\u003e **Windows 10 x64 OS**  \n[BOOTICE](http://www.ipauly.com/ \"External link\") can be used to Add WIM and VHDX to Boot Manager Menu as described in Win10_Inst_Eng.pdf.  \n\nMore Info - - [Install Windows 10 from USB after booting with WIM or VHDX](http://reboot.pro/topic/21883-install-windows-10-from-usb-after-booting-with-wim-or-vhdx/?p\u003d208164 \"\")\n\nMore Info - [Linux Mint](https://linuxmint.com/download.php \"External link\") - [Knoppix Live](https://www.runtime.org/data-recovery-live-cd.htm \"External link\") - [Ubuntu](https://www.ubuntu.com/download/desktop \"External link\") - [Porteus](http://www.porteus.org/ \"External link\") - [UEFI_MULTI](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d208639 \"\") - [Grub2 Manual](https://www.gnu.org/software/grub/manual/grub/grub.html \"External link\") - [Grub4dos Guide](http://diddy.boot-land.net/grub4dos/Grub4dos.htm \"External link\")\n\nDownload - [Explorer++](https://explorerplusplus.com/ \"External link\") and [WinNTSetup](https://msfn.org/board/topic/149612-winntsetup-v391-392-beta-4/ \"External link\") and [BOOTICE](http://www.ipauly.com/ \"External link\") and [Linux_MULTI](http://reboot.pro/topic/22001-linux-multi/ \"\") and [UEFI MULTI](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\n**Ubuntu Or Linux Mint ISO with persistence** in UEFI Secure Multi-Boot with Windows 10 x64 can be realised as follows:\n\n- Download [Make_Ext](http://reboot.pro/topic/22001-linux-multi/ \"\") Or Download [Easy2Boot](http://www.easy2boot.com/ \"External link\")\n\n- In folder Easy2Boot_v1.A8\\\\_ISO\\\\docs\\\\Make_Ext Run **Make_Ext.exe**\n\n- Use **File Name** and Volume Name **casper-rw** with ext3 filesystem and size e.g. 1000 MB\n\n- Make Ext file **casper-rw** to be located in FAT32 drive folder **\\\\images\\\\ubuntu** and /or **\\\\images\\\\linuxmint**\n\n- In Windows 10 x64 run WinNTSetup_x64.exe so that EFI partition is mounted as drive Z:\n\n- Use R-mouse menu to **run as administrator** Explorer-x64.exe of [Explorer++](https://explorerplusplus.com/ \"External link\")\n\n- Edit file **boot\\\\grub\\\\grub.cfg** created earlier on EFI drive Z: and add the following entry\n\n-\n\n```\nif [ -e \"(hd0,gpt3)/images/ubuntu-18.10-desktop-amd64.iso\" ] -a [ -e \"(hd0,gpt3)/images/ubuntu/casper-rw\" ]; then\nmenuentry \"ISO Ubuntu - ubuntu-18.10-desktop-amd64.iso (hd0,gpt3) persistence\" {\n  set iso_path\u003d/images/ubuntu-18.10-desktop-amd64.iso\n  loopback loop (hd0,gpt3)$iso_path\n  linux (loop)/casper/vmlinuz file\u003d/cdrom/preseed/ubuntu.seed boot\u003dcasper persistent persistent-path\u003d/images/ubuntu/ iso-scan/filename\u003d$iso_path quiet splash ---\n  initrd (loop)/casper/initrd\n}\nfi\n\n```\n\n- Boot with **UEFI Grub2** of Linux Mint and select ISO Ubuntu - persistence menuentry Or Select **Windows Boot Manager**  \n\n**B. BIOS Multi-Boot Computer booting with Linux and Windows**(Old Computer \\\u003c 2012)  \n- In Windows Disk Management use R-mouse menu to Shrink partition of C: drive by 10 GB\n\n- Create a **FAT32** primary partition of 10 GB to host the Linux ISO files\n\n- Make folder **images** on FAT32 drive and copy [Ubuntu](https://www.ubuntu.com/download/desktop \"External link\") and other Linux ISO files to folder images\n\n- For Persistence Use [Make_Ext](http://reboot.pro/topic/22001-linux-multi/ \"\") to create file **casper-rw** with ext3 filesystem and size 500 MB in folder **images\\\\ubuntu**  \n- [BOOTICE](http://www.ipauly.com/ \"External link\") is used to add New RealMode **Grub4dos** entry to **boot\\\\bcd** Windows BootManager  \nfor **BIOS** booting support with Boot file**\\\\grldr.mbr**\n\n[![BOOTICE_GRUB4DOS.png](http://reboot.pro/uploads/monthly_01_2019/post-9517-0-83723700-1548422294_thumb.png)](http://reboot.pro/uploads/monthly_01_2019/post-9517-0-83723700-1548422294.png \"BOOTICE_GRUB4DOS.png - Size: 261.47KB\"){#ipb-attach-url-16386-0-93431700-1676066388}\n\n- Add to Drive C: files **grldr** and **grldr.mbr** and **menu.lst** and **menu_Linux.lst** with [entries for booting Linux ISO files](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d208817 \"\") given in [Linux_MULTI](http://reboot.pro/topic/22001-linux-multi/ \"\")\n\n```\niftitle [if exist (hd0,1)/images/ubuntu-18.10-desktop-amd64.iso \u0026\u0026 if exist (hd0,1)/images/ubuntu/casper-rw] ISO Ubuntu Persist - ubuntu-18.10-desktop-amd64.iso\nset iso_path\u003d/images/ubuntu-18.10-desktop-amd64.iso\nmap (hd0,1)%iso_path% (0xff)\nmap --hook\nroot (0xff)\nkernel /casper/vmlinuz file\u003d/cdrom/preseed/ubuntu.seed boot\u003dcasper persistent persistent-path\u003d/images/ubuntu/ iso-scan/filename\u003d%iso_path% quiet splash ---\ninitrd /casper/initrd\n\n```\n\n- Boot and in Windows Boot Manager Menu Select **Grub4dos** and then in Grub4dos Menu - Select ISO Linux Menu and your Linux ISO file\n\n"
    },
    {
      "id": "209173",
      "timestamp": "2019-02-03T20:06:05+00:00",
      "author": "sebus",
      "content": "No idea why, but it fails\n\n![multi.jpg](https://i.postimg.cc/C1JwQ0F1/multi.jpg)\n\nIt only works if I do not select Source folder (no idea what that is for, I expected it to be Destination folder), but in that case it only copies .wim to the root of the USB (which is less than handy - ofcourse I can edit it by hand, but that is not the point, right?)\n\nsebus\n\n"
    },
    {
      "id": "209179",
      "timestamp": "2019-02-04T09:34:39+00:00",
      "author": "wimb",
      "content": "\u003e It only works if I do not select Source folder (no idea what that is for, I expected it to be Destination folder), but in that case it only copies .wim to the root of the USB (which is less than handy - ofcourse I can edit it by hand, but that is not the point, right?)\n\u003e\nThanks for feedback and reporting problem with program UEFI_MULTI.\n\nThe Source Folder is meant for Content that you want to be copied to USB Target.\n\nWhen that Source Folder is an Empty folder then the reported Error occurs.\n\nIn the dialogue I have made things clear by using the Label **Content Folder** instead of Source Folder.\n\nTooltip text is available as Help and will be displayed when the mouse is hovered over the control.\n\nYou want the WinPE - WIM file to be copied to a Destination Folder on USB Target.\n\nFor that purpose you must select as USB Target a **folder on Boot Drive** (max 8 characters) instead of selecting a drive.\n\nI have fixed the program UEFI_MULTI and version 8.7 is available for download.\n\n**\\*\\*\\* Update UEFI_MULTI - Version 87 \\*\\*\\***\n\n**Download :** **[UEFI_MULTI](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\") -** password is **bootwimb**\n\n[![UEFI_MULTI-87.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-77607700-1549273459_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-77607700-1549273459.png \"UEFI_MULTI-87.png - Size: 14.34KB\"){#ipb-attach-url-16391-0-93440300-1676066388} \u003d\u003d [![UEFI_MULTI-87-2.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-76842300-1549290095_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-76842300-1549290095.png \"UEFI_MULTI-87-2.png - Size: 12.95KB\"){#ipb-attach-url-16392-0-93447900-1676066388}\n\nSelected VHD or VHDX files are copied to USB Target System Drive\n\nSelected WinPE - WIM file is Copied to USB Target Boot Drive Or to a Folder on Boot Drive\n\nIn the case as shown the Destination Folder for WinPE - WIM file is folder O:\\\\Sources\n\nContent of Folder MULTI_BOOT is Copied to Boot Drive\n\n"
    },
    {
      "id": "209195",
      "timestamp": "2019-02-06T09:19:06+00:00",
      "author": "sebus",
      "content": "Sorry, does not make sense to me. If I have EXTERNAL .wim \\\u0026 want to copy it to subfolder on USB, it simply does NOT happen\n\n![wim-still-in-root.png](https://i.postimg.cc/c41LF0dt/wim-still-in-root.png)\n\nOK, I see it, I must select destination FOLDER in USB Target Boot Drive (maybe wording could be adjusted ie Boot Drive/Folder)\n\n"
    },
    {
      "id": "209197",
      "timestamp": "2019-02-06T09:54:34+00:00",
      "author": "sebus",
      "content": "Can I boot Windows (8/10) ISO from grub2 in UEFI mode?\n\n![iso-no-go.png](https://i.postimg.cc/9fFw6ZPV/iso-no-go.png)\n\n"
    },
    {
      "id": "209198",
      "timestamp": "2019-02-06T10:21:02+00:00",
      "author": "wimb",
      "content": "It is not supported to direct Select **Win10XPE_x64.ISO** file, but there is the following solution:\n\n**In UEFI mode:**\n\nGrub2 can be used as Boot Manager for booting **Linux ISO** files found in folder **images** and\n\nGrub2 can be used to chainload Windows Boot Manager and then boot with **WIM** or VHDX file.\n\nIt is supported to use the **boot.wim** file from your **Win10XPE\\\\ISO\\\\sources** directory\n\nOr you can use double click to **Mount** your Win10XPE_x64.ISO file as drive\n\nand then in UEFI_MULTI_x64.exe select the **boot.wim** file of that ISO.\n\nIn this way you can create on USB the boot entry for your **boot.wim** file.\n\nIn WinBuilder \\\u003e Build Core \\\u003e Select **Run ALL Programs From RAM**\n\nIn WinBuilder \\\u003e Apps \\\u003e System Tools DeSelect **XPE Startup**(when Selected build fails)\n\n[![WinBuilder-RunFromRAM-2019-02-06_120404.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-83273100-1549452960_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-83273100-1549452960.png \"WinBuilder-RunFromRAM-2019-02-06_120404.png - Size: 47.65KB\"){#ipb-attach-url-16395-0-93468300-1676066388} \u003d\u003d [![XPEStartup-2019-02-06_124114.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-69269900-1549453325_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-69269900-1549453325.png \"XPEStartup-2019-02-06_124114.png - Size: 50.94KB\"){#ipb-attach-url-16396-0-93474700-1676066388} \u003d\u003d [![UEFI-boot-wim2019-02-06_122506.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-76490800-1549452948_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-76490800-1549452948.png \"UEFI-boot-wim2019-02-06_122506.png - Size: 13.88KB\"){#ipb-attach-url-16394-0-93461500-1676066388} \u003d\u003d [![Win10XPE-2019-02-06_123035.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-45226100-1549452939_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-45226100-1549452939.png \"Win10XPE-2019-02-06_123035.png - Size: 293.03KB\"){#ipb-attach-url-16393-0-93454700-1676066388}\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nIf desired you can have WinBuilder \\\u003e Build Core \\\u003e DeSelect **Run ALL Programs From RAM**  \nand have the **Programs** Folder on USB.  \nIn that case you need **UEFI_MULTI** Settings as shown so that Programs folder is copied as Folder on Boot Drive.\n\n[![UEFI-Grub2-2019-02-06_152719.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-16042600-1549475649_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-16042600-1549475649.png \"UEFI-Grub2-2019-02-06_152719.png - Size: 14.54KB\"){#ipb-attach-url-16403-0-93487500-1676066388} \u003d\u003d [![Ubuntu-2019-02-06 20-10-27.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-35437100-1549484015_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-35437100-1549484015.png \"Ubuntu-2019-02-06 20-10-27.png - Size: 395.41KB\"){#ipb-attach-url-16404-0-93481100-1676066388} \u003d\u003d [![Win10XPE-2019-02-06_153938.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-81230200-1549468377_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-81230200-1549468377.png \"Win10XPE-2019-02-06_153938.png - Size: 278.11KB\"){#ipb-attach-url-16401-0-93494400-1676066388}\n\nI have Updated **UEFI_MULTI** program so that the file **CDUsb.y** needed for this purpose is copied to USB root.\n\n**Download :** **[UEFI_MULTI](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\") -** password is **bootwimb**  \n\n**Multi-Boot** in UEFI Secure mode using **Grub2** Boot Manager and **Ubuntu Linux ISO** file in folder **images** is possible as shown.\n\n**Multi-Boot** in BIOS mode using **Grub4dos** in Windows Boot Manager and using **Ubuntu Linux ISO** in folder **images** file is possible as well.\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "209201",
      "timestamp": "2019-02-06T19:01:54+00:00",
      "author": "sebus",
      "content": "I know I can run wim. But I used to do iso boot (notably in BIOS) mode years ago with grub.exe from pxe\n\nAnd I believe Easy2Boot made the UEFI mode possible (did not check it fully, read just bits, maybe as above only for Linux isos)\n\nBut it would be nice to boot full iso directly in UEFI mode...\n\n"
    },
    {
      "id": "209203",
      "timestamp": "2019-02-06T19:44:16+00:00",
      "author": "wimb",
      "content": "\u003e I know I can run wim. But I used to do iso boot (notably in BIOS) mode years ago with grub.exe from pxe\n\u003e\n\u003e And I believe Easy2Boot made the UEFI mode possible (did not check it fully, read just bits, maybe as above only for Linux isos)\n\u003e\n\u003e But it would be nice to boot full iso directly in UEFI mode...\n\n[Easy2Boot](http://www.easy2boot.com/uefi-grub2-ptn2/ \"External link\") does not support UEFI **Multi-Boot**for your ISO and it is rather complicated to switch e.g. from Win10XPE ISO to Ubuntu ISO ....\n\n\u003e The [standard method to UEFI-boot](http://www.easy2boot.com/add-payload-files/adding-uefi-images \"External link\") from an E2B drive is to make a .imgPTN file from the original payload file and then \u0027switch-in\u0027 the image file to replace the E2B partition. This allows us to UEFI-boot or MBR boot from that partition (and Secure Boot if the payload\u0027s boot files support it). However, we can only boot **one payload at a time** and we can only boot to payloads which already support UEFI-booting.\n\n"
    },
    {
      "id": "209205",
      "timestamp": "2019-02-06T22:23:47+00:00",
      "author": "sebus",
      "content": "That is the Standard method, but I believe [Beta 10](http://www.easy2boot.com/uefi-grub2-ptn2/ \"External link\") allows Windows iso boot (I have not yet tried)\n\n"
    },
    {
      "id": "209207",
      "timestamp": "2019-02-07T07:43:27+00:00",
      "author": "wimb",
      "content": "\u003e That is the Standard method, but I believe [Beta 10](http://www.easy2boot.com/uefi-grub2-ptn2/ \"External link\") allows Windows iso boot (I have not yet tried)\n\nThat is about UEFI Grub2 booting of Linux ISO files and about [**MBR** wimboot](https://www.rmprepusb.com/tutorials/145-grub2winiso \"External link\") of Windows ISO file.\n\n**UEFI** wimboot of Windows ISO file is not supported yet .... and Secure will be most likely impossible.\n\u003e * It only works for MBR\\\\Legacy booting (wimboot for UEFI does not work unless you boot to iPXE via UEFI).\n\nWhat would be the advantage of using an ISO instead of a WIM file for you ?\n\nFor me the functionality is the same.\n\nIn both cases we can have **one file** that contains all the information for booting with Win10XPE in RAMDISK.\n\nUsing a Win10XPE WIM file is more convenient than using a Win10XPE ISO file.\n\nUEFI Secure Grub2 booting supports quite well Multi-Boot of Linux ISO + Windows Boot Manager for WIM and VHDX\n\nBIOS Windows Boot Manager supports quite well Multi-Boot of WIM + VHDX + Grub4dos for Linux ISO\n\n**All** boot options are made with UEFI_MULTI and are **direct** available on booting.\n\n"
    },
    {
      "id": "209208",
      "timestamp": "2019-02-07T16:53:18+00:00",
      "author": "sebus",
      "content": "Personal preference I assume. As to me I would like to be able to have (greedy) both...\n\n"
    },
    {
      "id": "209300",
      "timestamp": "2019-02-13T11:07:52+00:00",
      "author": "wimb",
      "content": "**Win 7 x64 VHD file 3.9 GB and OS Size \u003d 2.8 GB with SVBus driver booting from RAMDISK**\n\n**Grub4dos** loads the 3.9 GB VHD into RAM in 1 minute and then Win7 x64 boots from RAMDISK in 8 seconds.\n\nAll drivers were installed in source so that OS Source \u003d 8 GB and all drivers are working OK.\n\nAdvantage: VHD Size 3.9 GB can be located on **FAT32** USB-Stick for booting from RAMDISK.\n\nFor VHD Size \\\u003e 4 GB and for booting as FILEDISK, then VHD must always be located on NTFS partition.\n\nUEFI_MULTI can make **Grub4dos** menu entry for VHD booting with [SVBus driver](http://reboot.pro/topic/21787-svbus-virtual-scsi-host-adapter-for-grub4dos/ \"\") as FILEDISK or as RAMDISK.\n\nUEFI_MULTI makes entry in Windows Boot Manager for booting VHD as FILEDISK using Microsoft vhdmp.sys driver.\n\n[![W7x64_SVBus-RAM-2019-02-13_130448.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-15968600-1550059644_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-15968600-1550059644.png \"W7x64_SVBus-RAM-2019-02-13_130448.png - Size: 492.66KB\"){#ipb-attach-url-16417-0-93501400-1676066388} \u003d\u003d [![UEFI_MULTI-SVBus-2019-02-13_122952.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-69589100-1550057471_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-69589100-1550057471.png \"UEFI_MULTI-SVBus-2019-02-13_122952.png - Size: 13.62KB\"){#ipb-attach-url-16416-0-93509200-1676066388} \u003d\u003d [![Win10XPE-2019-02-15_082142.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-60756800-1550216026_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-60756800-1550216026.png \"Win10XPE-2019-02-15_082142.png - Size: 144.02KB\"){#ipb-attach-url-16419-0-93523800-1676066388}\n\n[![W864_SVBus-RAM-2019-02-11_141504.png](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-83872000-1549891559_thumb.png)](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-83872000-1549891559.png \"W864_SVBus-RAM-2019-02-11_141504.png - Size: 490.2KB\"){#ipb-attach-url-16414-0-84129900-1676016903} \u003d\u003d [![W10x86-RAM-G4d-top-2019-02-10_222425.png](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-03647400-1549834248_thumb.png)](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-03647400-1549834248.png \"W10x86-RAM-G4d-top-2019-02-10_222425.png - Size: 589.98KB\"){#ipb-attach-url-16411-0-84166000-1676016903} \u003d\u003d [![W10x64-SVBus-RAM-2019-02-14_185106.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-14620900-1550166906_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-14620900-1550166906.png \"W10x64-SVBus-RAM-2019-02-14_185106.png - Size: 444.04KB\"){#ipb-attach-url-16418-0-93516500-1676066388}\n\n[![W10x64_WIM_VHD-Setup-2019-02-17_115046.png](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-22810100-1550405737_thumb.png)](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-22810100-1550405737.png \"W10x64_WIM_VHD-Setup-2019-02-17_115046.png - Size: 27.23KB\"){#ipb-attach-url-16423-0-84201500-1676016903} \u003d\u003d [![W10x64_WIM_VHD-SVBus-RAMDISK-2019-02-17_131143.png](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-11903900-1550405769_thumb.png)](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-11903900-1550405769.png \"W10x64_WIM_VHD-SVBus-RAMDISK-2019-02-17_131143.png - Size: 486.21KB\"){#ipb-attach-url-16424-0-84234800-1676016903} \u003d\u003d [![W10x64_W3-SVBus-RAM-2019-02-18_174409.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-09991600-1550508482_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-09991600-1550508482.png \"W10x64_W3-SVBus-RAM-2019-02-18_174409.png - Size: 162.43KB\"){#ipb-attach-url-16425-0-93538100-1676066388} \u003d\u003d [![W10x64_W3-SVBus-RAMDISK-2019-02-19_084056.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-14718100-1550562290_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-14718100-1550562290.png \"W10x64_W3-SVBus-RAMDISK-2019-02-19_084056.png - Size: 492.92KB\"){#ipb-attach-url-16427-0-93530800-1676066388}\n\n[WinNTSetup](https://msfn.org/board/topic/149612-winntsetup-v3931/ \"External link\") can be used for [WIMBOOT](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-8.1-and-8/dn594399(v\u003dwin.10) \"External link\") [Install](http://reboot.pro/topic/19715-windows-image-file-boot-wimboot/ \"\") of Win10 x64 in VHD connected to file install.wim elsewhere on harddisk.\n\nGrub4dos does NOT support VHDX file format, so you must use Install in VHD for support of Grub4dos.\n\nInstall of Win10 in VHD is refused when VHD is located on USB. Best is to locate VHD on C drive and to use UEFI booting.\n\nAdditional drivers can be installed by using MoBo driver CD  \n\nBooting with Grub4dos from RAMDISK using SVBus driver is not simple, but possible for such WIMBOOT VHD.\n\nInstall of SVBus driver is refused when VHD is booting in UEFI mode.\n\nUse [UEFI MULTI](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\") to make boot entry in USB Boot Manager menu for VHD located on internal harddisk.\n\nAfter booting from USB with WIMBOOT VHD then you can **run as admin** file **instx64.exe** of SVBus bin folder to install the driver.\n\nwimlib-clc CAPTURE followed by APPLY is important to reduce the size of the WIMBOOT Operating System from 3,5 GB down to 600 MB\n\nso that it can be located in VHD on USB of Size 2 GB with total boottime 30 seconds which is OK.  \nThanks to **alacran** for pointing me to [wimlib](https://wimlib.net/index.html \"External link\") of **synchronicity** (More Info: [here](http://reboot.pro/topic/18345-wimlib-with-imagex-implementation/ \"\")) combined with [wimlib-clc](http://reboot.pro/topic/21861-wimlib-clc/ \"\") of **ReTokener** :smile:  \nThe CAPTURE WIM file is copied to folder sources on NTFS drive of Portable SSD.  \n[WinNTSetup](https://msfn.org/board/topic/149612-winntsetup-v3931/ \"External link\") can be used for WIMBOOT Install of Win10 x64 in small VHD of Size 2 GB on same NTFS drive of Portable SSD.\n\nThen use [UEFI_MULTI](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209572 \"\") again to make Grub4dos menu entry for booting VHD WIMBOOT as RAMDISK.\n\nReboot from USB and Select in Grub4dos menu your WIMBOOT VHD for booting from RAMDISK.\n\nThe VHD of Size 2 GB is loaded into RAM in 20 seconds and then Win10 x64 is booting in 10 seconds from RAMDISK.\n\nA drawback is that RAMDISK booting is only available in BIOS mode booting and not in UEFI mode ....\n\nThis is due to the fact that **Grub4dos** booting is needed for using **SVBus** driver in booting from RAMDISK.  \n\n**Download :** **[UEFI_MULTI](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\") -** password **bootwimb**\n\nMake Portable and Mini 8 with [VHD_W8C_88](http://reboot.pro/files/file/299-vhd-w8-compact-make-mini-8/ \"\") - (apply only on Win 8.1 fresh installed in source VHD)\n\nMake Portable and Mini 7 with [VHD_W7C_87-E](http://reboot.pro/files/file/321-vhd-w7-compact-make-mini-7/ \"\") - (apply only on Win 7 fresh installed in source VHD)\n\nMore Info:  \n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n**How to make Filelist**\n\n- Use WinNTSetup for fresh Install of Win 7/8/10 into Created VHD\n\n- Boot with Win 7/8/10 VHD Or Mount with double click Win 7/8/10 VHD File\n\n- Open admin command window at root C:\\\\ Or at root of Mounted drive and then Run\n\n```\ndir /b /s /on /a-d-l \u003edir-w7x64-vhd.txt\n```\n\n**How to make Folder List in given directory**\n\n```\nC:\\Windows\\system32\u003edir /b /on /ad-l \u003eC:\\folders-system32.txt\n```\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d  \n\nBetter Solution is **Win10XPE** WIM file Size \u003d 775 MB for [booting from RAMDISK](https://msfn.org/board/topic/121446-install-from-usb-after-booting-with-wim-or-vhdx/?do\u003dfindComment\u0026comment\u003d1159506 \"External link\")\n\nIt includes AOMEI Partition Assistant and Macrium Reflect to make Backup Image.\n\n**Win10XPE**WIM file is booting in UEFI Secure and in BIOS mode from Windows Boot Manager Menu,\n\nwhereas in case of VHD and SVBus driver booting with **Grub4dos** then you are limited to BIOS mode only.\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\n**DiskPart script to make UEFI/MBR-based portable SSD or USB-harddisk for UEFI / BIOS booting with WIM or VHDX**\n\n```\nrem \u003d\u003d\nrem \u003d\u003d CreaPartMBR-USB-Disk5.txt \u003d\u003d\nrem \u003d\u003d\nrem \u003d\u003d These commands are used with DiskPart to create two partitions\nrem \u003d\u003d for a UEFI/MBR-based portable SSD or USB-harddisk\nrem \u003d\u003d In DiskPart use list disk to find disk number and adjust partition sizes and label as necessary\nrem \u003d\u003d\nlist disk\nselect disk 5\nclean\nrem \u003d\u003d 1. Boot partition FAT32 20 GB - WinPE 8/10 x64 WIM files UEFI /BIOS booting \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\ncreate partition primary size\u003d20480\nformat quick fs\u003dfat32 label\u003d\"U-BOOT\"\nassign\nactive\nrem \u003d\u003d 2. Data partition NTFS - UEFI 8/10 x64 VHD files - BIOS XP/7/8/10 VHD \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nrem \u003d\u003d partition contains also  7/8/10 ISO files for Install with WinNTSetup \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\ncreate partition primary\nformat quick fs\u003dntfs label\u003d\"U-DATA\"\nassign\nlist volume\nexit\nrem \u003d\u003d\nrem \u003d\u003d Info https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/configure-uefigpt-based-hard-drive-partitions\nrem \u003d\u003d Info https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/configure-biosmbr-based-hard-drive-partitions\nrem \u003d\u003d\nrem \u003d\u003d In admin command window use: DiskPart /s G:\\DiskPart\\CreaPartMBR-USB-Disk5.txt\nrem \u003d\u003d\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "209354",
      "timestamp": "2019-02-17T22:57:00+00:00",
      "author": "alacran",
      "content": "W864ESP1 wimboot VHD size of 1 or 1.5 GB + 2 GB source wim file: [http://reboot.pro/to...e-4#entry209349](http://reboot.pro/topic/21687-ramloading-windows-10-vhd-core/page-4#entry209349 \"\")\n\nBy the way wimb a suggestion: all WinPE Isos could be replaced with a boot.wim located into its own named folder as AIOCreator does, giving us then more options to boot in UEFI, not a single boot.wim as now.\n\nI will start puting some boot.wim files and modifiying both BCD\u0027s to test this approach.\n\n"
    },
    {
      "id": "209364",
      "timestamp": "2019-02-18T07:54:45+00:00",
      "author": "wimb",
      "content": "\u003e W864ESP1 wimboot VHD size of 1 or 1.5 GB + 2 GB source wim file: [http://reboot.pro/to...e-4#entry209349](http://reboot.pro/topic/21687-ramloading-windows-10-vhd-core/page-4#entry209349 \"\")\n\u003e\n\u003e By the way wimb a suggestion: all WinPE Isos could be replaced with a boot.wim located into its own named folder as AIOCreator does, giving us then more options to boot in UEFI, not a single boot.wim as now.\n\u003e\n\u003e I will start puting some boot.wim files and modifiying both BCD\u0027s to test this approach.\n\nVery nice reduction in size for your wimboot VHD of Win 8 x64. :smile:\n\nMy program to make Portable and Mini 8 is available as [VHD_W8C_87-E](http://reboot.pro/files/file/299-vhd-w8-compact-make-mini-8/ \"\")\n\nSimilarly to make Portable and Mini 7 you can use [VHD_W7C_87-E](http://reboot.pro/files/file/321-vhd-w7-compact-make-mini-7/ \"\")\n\nI will have a look at your suggestion on WinPE ISO, but in fact a single WIM file is already a very convenient solution.\n\nSuch WinPE WIM file is booting in UEFI Secure and in BIOS mode direct from Windows Boot Manager into RAMDISK.\n\nYou can combine different boot.wim files easily by giving them a proper name e.g. Win10XPE.wim and Win10PESE.wim\n\nand you can in UEFI_MULTI Select a folder e.g. WinPE as Target Boot Drive U:\\\\WinPE if you want to combine them in such folder.\n\nI tested AIO Creator, but it fails in case of Win10XPE ISO having separate Programs folder ....\n\nIn my case a separate Programs folder can be selected as Content folder, which is Copied then as folder to USB.\n\n[![UEFI_MULTI-Grub2-2019-02-06_141433.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-52830200-1550514837_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-52830200-1550514837.png \"UEFI_MULTI-Grub2-2019-02-06_141433.png - Size: 14.91KB\"){#ipb-attach-url-16426-0-93545900-1676066388}\n\n"
    },
    {
      "id": "209371",
      "timestamp": "2019-02-18T22:41:23+00:00",
      "author": "alacran",
      "content": "@ wimb\n\n\u003e Very nice reduction in size for your wimboot VHD of Win 8 x64.\n\u003e\n\u003e My program to make Portable and Mini 8 is now compatible with Win 10 OS and is available as [VHD_W8C_87-E](http://reboot.pro/files/file/299-vhd-w8-compact-make-mini-8/ \"\")\n\nIt is in fact 8.1x64 ESP1.\n\nThis are good news, I will try it ASAP. I think the only advantage over 8.1 is going to be more drivers, and remembering starting with 1709 version you can see more than a single partition on portable (USB stick) drives, then I will not need diskmod anymore.\n\n"
    },
    {
      "id": "209372",
      "timestamp": "2019-02-18T22:52:38+00:00",
      "author": "alacran",
      "content": "@ wimb\n\nOn a [post](http://reboot.pro/topic/21687-ramloading-windows-10-vhd-core/page-4#entry209343 \"\") in another thread you said:\n\n\u003e [WinNTSetup](https://msfn.org/board/topic/149612-winntsetup-v3931/ \"External link\") can indeed be used for [**WIMBOOT**](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-8.1-and-8/dn594399(v\u003dwin.10) \"External link\") [Install](http://reboot.pro/topic/19715-windows-image-file-boot-wimboot/ \"\") of Win10 x64 in small VHD of Size 5 GB connected to file install.wim elsewhere on harddisk.\n\u003e\n\u003e That does not mean that booting with Grub4dos from RAMDISK using SVBus driver is possible for such WIMBOOT VHD.\n\u003e\n\u003e Nevertheless, it can be realised .... The VHD of Size 5GB is loaded into RAM in 45 seconds and then Win10 x64 is booting in 10 seconds from RAMDISK.\n\nI would appreciate if you can elaborate a few more starting with SVBus driver install up to the final RAMboot of wimboot VHD from grub4dos. I want to follow same approach I used with W864ESP1, to try to get the smaller size.\n\nThanks in advance\n\n"
    },
    {
      "id": "209374",
      "timestamp": "2019-02-19T06:31:07+00:00",
      "author": "alacran",
      "content": "My test finished with troubles, made a fresh install of 10x64 Home 1803 on a VHD, and all was fine, I booted it several times untill finally get the desktop, only thing I did there was make the required changes to see all icons on desktop on Personalize/Themes and rebooted to my 8.1x64 VHD to use VHD_W8C_87 to make the Portable version on a 7 GB VHD, when tried to boot from it, all was runing fine, but after some time and before reaching desktop my PC freezed and I had to reboot (as you know no usefull info on the BSOD), now every time I want to boot my 7x64 main OS the PC starts cheking all partition on both disks, when it finish allways says every thing is fine, it is making me crazy.\n\nAny ideas to fix this behaviour will be appreciated, before I make use of my OS backup.\n\n**EDIT:** After last reboot, finally no more checking of all partitions every boot. But I will not try this again, 10 is like Russian roulette. I\u0027m happy with my 8.1x64 mini VHD, and anyway I hate 10.\n\n@ wimb\n\nAfter reading again your last post, what I finally did in my UEFI MULTI is rename 4 boot.wim(s) as following: Win10x64-XPE.wim, ChrisPE-8.1x64.wim, MT-PartitionWizard-10_2.wim and PC-unlocker.wim and that created the respective lines on both BCDs to boot from each one of them on MBR and UEFI, of course also added some Isos and had to make some changes to menu.lst, but, I have now my own menu.\n\n"
    },
    {
      "id": "209375",
      "timestamp": "2019-02-19T06:48:42+00:00",
      "author": "wimb",
      "content": "VHD_W8C_87 is not meant to be used to reduce size of 10 x64 installed in VHD.\n\nThat will not work.\n\nThe program VHD_W8C_87 is compatible with Win 10 OS means that you can use the program in Win 10 OS\n\nto make Portable 8 Or Mini 8 VHD from source VHD with fresh installed Win 8.1\n\nNow to solve your trouble:\n\nUse R-mouse to Open Administrator Command Window  \nTo check NTFS filesystem on drive C: D: and E: use  \n\n```\nchkntfs C: D: E:\n```\n\nIt shows you which drives are dirty  \nTo repair NTFS filesystem on drive C: use  \n\n```\nchkdsk /F C:\n```\n\nAnd do this also for the other dirty drives\n\n"
    },
    {
      "id": "209376",
      "timestamp": "2019-02-19T06:52:25+00:00",
      "author": "wimb",
      "content": "\u003e I would appreciate if you can elaborate a few more starting with SVBus driver install up to the final RAMboot of wimboot VHD from grub4dos. I want to follow same approach I used with W864ESP1, to try to get the smaller size.\n\u003e\nMore Info from [here](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209300 \"\")\n\n[WinNTSetup](https://msfn.org/board/topic/149612-winntsetup-v3931/ \"External link\") can be used for [**WIMBOOT**](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-8.1-and-8/dn594399(v\u003dwin.10) \"External link\") [Install](http://reboot.pro/topic/19715-windows-image-file-boot-wimboot/ \"\") of Win10 x64 in small VHD of Size 5 GB connected to file install.wim elsewhere on harddisk.\n\nGrub4dos does NOT support VHDX file format, so you must use Install in VHD for support of Grub4dos needed later for RAMDISK booting.\n\nInstall of Win10 in VHD is refused when VHD is located on USB. Best is to locate VHD on C drive and to use UEFI booting.  \n\nBooting with Grub4dos from RAMDISK using SVBus driver is not simple, but possible for such WIMBOOT VHD.\n\nInstall of SVBus driver is refused when VHD is located on GPT partition.\n\nCopy the WIMBOOT VHD to NTFS partition of UEFI/MBR USB SSD as [described earlier](http://reboot.pro/topic/21883-install-windows-10-from-usb-after-booting-with-wim-or-vhdx/?p\u003d208252 \"\").\n\nUse UEFI_MULTI to make boot entry in USB Boot Manager menu.\n\nAfter booting from USB with WIMBOOT VHD then you can run as admin file **instx64.exe** of SVBus **bin** folder to install the driver.\n\nReboot to finalise Install of SVBus driver and shutdown the WIMBOOT VHD.\n\nThen use UEFI_MULTI again to make Grub4dos menu entriy for booting WIMBOOT VHD as RAMDISK.\n\nReboot from USB and Select in Grub4dos menu your WIMBOOT VHD for booting from RAMDISK.  \n[![W10x64_WIM_VHD-Setup-2019-02-17_115046.png](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-22810100-1550405737_thumb.png)](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-22810100-1550405737.png \"W10x64_WIM_VHD-Setup-2019-02-17_115046.png - Size: 27.23KB\"){#ipb-attach-url-16423-0-90325900-1676016903} \u003d\u003d [![W10x64_W3-SVBus-RAMDISK-2019-02-19_084056.png](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-98127100-1550562696_thumb.png)](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-98127100-1550562696.png \"W10x64_W3-SVBus-RAMDISK-2019-02-19_084056.png - Size: 492.92KB\"){#ipb-attach-url-16428-0-90363800-1676016903} \u003d\u003d [![W10x64_W3-SVBus-RAMDISK-2019-02-19_103832.png](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-36548600-1550569280_thumb.png)](https://reboot.pro/uploads/monthly_02_2019/post-9517-0-36548600-1550569280.png \"W10x64_W3-SVBus-RAMDISK-2019-02-19_103832.png - Size: 511.13KB\"){#ipb-attach-url-16429-0-90394500-1676016903}\n\nThe size of the **WIMBOOT** Install of Win10x64 in VHD can be reduced to **1 GB** when we take care to have no internet connection during Install of Win 10 x64\n\nAdditional drivers can be installed later by using a known Driverstore as source instead of letting Windows Update from internet doing this thing.  \n\nA drawback is that RAMDISK booting is only available in BIOS mode booting and not in UEFI mode ....\n\nThis is due to the fact that **Grub4dos** booting is needed for using **SVBus** driver in booting from RAMDISK.\n\n[Additional reduction](http://reboot.pro/topic/21687-ramloading-windows-10-vhd-core/?p\u003d209417 \"\") is possible to make Win10 x64 Size less than 600 MB\n\nI have used wimlib CAPTURE to make WIM file used by WinNTSetup for Install in 2 GB VHD.\n\nThanks to **alacran** for pointing me to [wimlib](https://wimlib.net/index.html \"External link\") of **synchronicity** (More Info: [here](http://reboot.pro/topic/18345-wimlib-with-imagex-implementation/ \"\")) combined with [wimlib-clc](http://reboot.pro/topic/21861-wimlib-clc/ \"\") of **ReTokener** :smile:\n\nThe VHD of Size 2 GB is loaded into RAM in 20 seconds and then Win10 x64 is booting in 10 seconds from RAMDISK.\n\n[![wimlib-w8-2019-02-23_114013.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-61787500-1550918551_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-61787500-1550918551.png \"wimlib-w8-2019-02-23_114013.png - Size: 259.16KB\"){#ipb-attach-url-16444-0-93558400-1676066388} \u003d\u003d [![W10x64_W32-SVBus-RAM-2019-02-21_142257.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-24783100-1550840040_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-24783100-1550840040.png \"W10x64_W32-SVBus-RAM-2019-02-21_142257.png - Size: 489.53KB\"){#ipb-attach-url-16442-0-93552000-1676066388}  \n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "209401",
      "timestamp": "2019-02-19T22:21:13+00:00",
      "author": "alacran",
      "content": "@ wimb\n\n\u003e VHD_W8C_87 is not meant to be used to reduce size of 10 x64 installed in VHD.\n\u003e\n\u003e That will not work.\n\u003e\n\u003e The program VHD_W8C_87 is compatible with Win 10 OS means that you can use the program in Win 10 OS\n\u003e\n\u003e to make Portable 8 Or Mini 8 VHD from source VHD with fresh installed Win 8.1\n\nMy mistake, it is obvious I missunderstood this.\n\n\u003e Now to solve your trouble:\n\u003e\n\u003e Use R-mouse to Open Administrator Command Window  \n\u003e To check NTFS filesystem on drive C: D: and E: use  \n\u003e chkntfs C: D: E:\n\u003e\n\u003e It shows you which drives are dirty  \n\u003e To repair NTFS filesystem on drive C: use  \n\u003e chkdsk /F C:\n\u003e\n\u003e And do this also for the other dirty drives\n\nThanks. It is not urgent right now anymore, but I will keep this info for future troubles, as 10 is very prone to mark the dirty bit on HD.\n\nAlso thanks for the info for Ram booting through grub4dos a WIMBOOT Install of Win10x64 in VHD in your previous post, it is in fact a little tricky, I\u0027m glad you found the way to make it work.\n\nalacran\n\n"
    },
    {
      "id": "209404",
      "timestamp": "2019-02-20T08:04:56+00:00",
      "author": "wimb",
      "content": "\u003e Also thanks for the info for Ram booting through grub4dos a WIMBOOT Install of Win10x64 in VHD in your previous post, it is in fact a little tricky, I\u0027m glad you found the way to make it work.\n\u003e\nBooting from RAMDISK with Win10x64 in WIMBOOT VHD was a funny experiment.\n\nBetter and a very convenient solution is **Win10XPE** **WIM** file Size \u003d 775 MB for [booting from RAMDISK](https://msfn.org/board/topic/121446-install-from-usb-after-booting-with-wim-or-vhdx/?do\u003dfindComment\u0026comment\u003d1159506 \"External link\")\n\nIt is a single WIM file that can be located everywhere, whereas the Win10x64 WIMBOOT VHD solution has 2 files and is not portable.\n\nWin10XPE includes AOMEI Partition Assistant and Macrium Reflect to make Backup Image.\n\n**Win10XPE**WIM file is booting in UEFI Secure and in BIOS mode from Windows Boot Manager Menu,\n\nwhereas in case of VHD and SVBus driver booting with **Grub4dos** then you are limited to BIOS mode only.\n\n**Win10 x64** installed in 25 GB **VHDX** by WinNTSetupis the most interesting solution and allows booting as**FILEDISK**.\n\nSuch VHDX allows you to install any program and to use printers and it boots from Portable SSD very fast on any hardware in BIOS and UEFI Secure mode.\n\nIt is a universal learning system that contains far more drivers than Win 8.1 and in case of 10 x64 booting from USB and USB 3.0 is supported out of the box.\n\n"
    },
    {
      "id": "209415",
      "timestamp": "2019-02-20T23:21:12+00:00",
      "author": "alacran",
      "content": "@ wimb\n\n\u003e Booting from RAMDISK with Win10x64 in WIMBOOT VHD was a funny experiment, but it has no practical value for me.\n\u003e\n\u003e Better and a very convenient solution is **Win10XPE** **WIM** file Size \u003d 775 MB for [booting from RAMDISK](https://msfn.org/board/topic/121446-install-from-usb-after-booting-with-wim-or-vhdx/?do\u003dfindComment\u0026comment\u003d1159506 \"External link\")\n\u003e\n\u003e It is a single WIM file that can be located everywhere, whereas the Win10x64 WIMBOOT VHD solution has 2 files and is not portable.\n\nYes, you are right, a good WinPE is always smaller and boots faster, I\u0027m totally agree and it\u0027s my prefered option, but this do not decrease in any way the merit of your experiment to RamBoot a 10x64 VHD wimboot mode install, **AFAIK nobody has done it before**, my friend.\n\n\u003e **Win10 x64** installed in 25 GB **VHDX** by WinNTSetupis the most interesting solution and allows booting as**FILEDISK**.\n\u003e\n\u003e Such VHDX allows you to install any program and to use printers and it boots from Portable SSD very fast on any hardware in BIOS and UEFI Secure mode.\n\u003e\n\u003e It is a universal learning system that contains far more drivers than Win 8.1 and in case of 10 x64 booting from USB and USB 3.0 is supported out of the box.\n\nI have since about 6 months ago two Win10 VHDs (a 1709 x64 and a 1809 x86 \\[this is LTSC 2019 on 6.5 GB, full install, + FireFox, 1.5 GB free\\]), working very fine, (updates blocked, this may be the reason). Also have available a 120 GB SSD that I may use for this, just need to buy a new disk case for it.\n\nAs always it is a pleasure to talk with you.\n\nalacran\n\n"
    },
    {
      "id": "209462",
      "timestamp": "2019-02-23T23:32:29+00:00",
      "author": "alacran",
      "content": "After making a new 10x64 1809 full install, (of course no AV, no pagefile and no swap file) on a 10 GB VHD (not compressed) located on a partition of my MBR HDD, latter installing 7z, Classic Shell, CCleaner and puting several Portables on documents folder, still has 2.49 GB free.\n\n**EDIT:** Forgot to say it is also installed Word and Excell from Office 2003 + compatibility package to read/write Office 2007 and following formats.\n\nThen I made a wimboot capture (10x64-WB.wim file is 3.95 GB) and a new wimboot install on a 1 GB VHD (located on internal HDD) having 662 MB free yet, so OS and format is consuming only 362 MB, this is after booting from it.\n\nAll done upto now using only wimlib-clc and BootIce for editing BCD. So far only Windows boot manager is used, not tested RamBoot yet.\n\nI think now run a 1 GB (or maybe 512 MB) 10x64 VHD on RAM looks a little more attractive. Win10XPE_x64.ISO is 742 MB.\n\nNow I need to move the wimboot VHD and the source 10x64-WB.wim file to an external device, I could use a 120 GB SSD as wimb suggested, but I would prefer something more compact as a High Speed U1 SD or MicroSD card on a USB 3.0 adapter as I\u0027m using for my UEFI MULTI up to now.\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![10x64-Wimboot-VHD.png](http://reboot.pro/uploads/monthly_02_2019/post-26560-0-07490500-1550975517_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-26560-0-07490500-1550975517.png \"10x64-Wimboot-VHD.png - Size: 690.66KB\"){#ipb-attach-url-16454-0-27360400-1676066389}\n\n"
    },
    {
      "id": "209463",
      "timestamp": "2019-02-24T01:49:25+00:00",
      "author": "alacran",
      "content": "This is what I got when I made a 512 MB 10x64 wimboot VHD hard linked to source 10x64-WB.wim file of 3.95 GB:\n\n387 MB used and 123 MB Free, from 510 MB available. See attached picture.\n\nBy the way on previous post forgot to say it is also installed Word and Excell from Office 2003 + compatibility package to read/write Office 2007 and following formats.\n\nWell now it is even smaller than Win10XPE_x64.ISO \u003d 775 MB or Win10XPE_x64 boot.wim \u003d 718 MB\n\nAnd it has also the best and FREE tools to capture/deploy \\*.wim files (usefull for make/recover backups too), as wimlib-clc and WinNTSetup.\n\nNext will be to put this 512 MB VHD on a portable device and see how it boots.\n\nWimb procedure to make it Ram Bootable is a little tricky, I will try to follow it after booting normally with Windows bootmanager from a portable USB device.\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![10x64-WB.png](http://reboot.pro/uploads/monthly_02_2019/post-26560-0-96240300-1550972636_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-26560-0-96240300-1550972636.png \"10x64-WB.png - Size: 684.29KB\"){#ipb-attach-url-16453-0-27369700-1676066389}\n\n"
    },
    {
      "id": "209466",
      "timestamp": "2019-02-24T05:47:18+00:00",
      "author": "wimb",
      "content": "\u003e This is what I got when I made a 512 MB 10x64 wimboot VHD hard linked to source 10x64-WB.wim file of 3.95 GB:\n\u003e\n\u003e 387 MB used and 123 MB Free, from 510 MB available. See attached picture.\n\u003e\nVery nice reduction in size again. Very GOOD ![:magic:](http://reboot.pro/public/style_emoticons/default/magic.gif) ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)\n\nIt will be interesting if you can make it portable e.g. booting from RAMDISK and as FILEDISK from such small WIMBOOT VHD + WIM file located on portable SSD.\n\nDid you do any special things besides the things I know and do already to get this impressive size reduction ?\n\n"
    },
    {
      "id": "209468",
      "timestamp": "2019-02-24T06:41:17+00:00",
      "author": "alacran",
      "content": "I\u0027m starting a new thread for this topic, I wouldn\u0027t like to keep hijacking your thread anymore, and now also think the subject deserves its own thead to keep all info together and let other people find it easier, hope you can visit it to see the little details if you want deeper info, and also to help me with RamBooting, as I am specting some troubles with it.\n\nSo far the new thread is under costruction, it will be ready very soon.\n\n**EDIT:** This is topic [Making the smallest Win10 install (wimboot mode)](http://reboot.pro/topic/21957-making-the-smallest-win10-install-wimboot-mode-on-512-mb-vhd/#entry209502 \"\")\n\nBy now I have USB booted from the VHD and source .wim located both (to be totally portable) on same secondary NTFS partition of a USB 2.0 device, (AData UV100 32 GB), it feels as slow like old times booting my first BartPE from a CD, it took about a minute or maybe a minute and a half to get desktop, once there and after waiting about 20 seconds the task manager showed no more disk activity and all was a little slow but fine.\n\nThis USB 2.0 device is about 24 to 25 MB/sec in reading and writting speed, wich is not bad for a USB 2.0, My MicroSD Kingston with an USB 3.0 adapter is capable of upto real 74 to 75 MB/seg reading speed but only about 14 to 15 MB/seg writing speed, this are real speeds I have observed during real files transfer on daily tasks.\n\nOf course once RamBoted all will be very fast, By now my system is consuming about 800 MB, but will check carefully.\n\n**Have you seen how much Ram is consumed when you RamBoot your wimboot VHD?**, I\u0027m on an old I3 with 8 GB RAM, hope this can be enought, but would like to make sure.\n\n**EDIT:** This time I made the VHD on my MicroSDHC 32GB UHS-I Kingston SDCS/32GB CL10, 80R ([Canvas Select](https://www.amazon.com/Kingston-32GB-microSDHC-microSD-SDCS/dp/B079GTYCW4 \"External link\")) connected with my [USB 3.0 adapter](https://www.sabrent.com/product/CR-UMSS/mini-usb-3-0-micro-sd-sd-card-reader-black/#description \"External link\") to a USB 2.0 port and it took only 48 seconds to reach desktop, and all was working very fine OS do not feel slow.\n\nBut I would reccomend you to better buy the new Kingston model [Canvas Go!](https://www.amazon.com/Kingston-Canvas-32GB-Memory-SDG/dp/B079SR21JM?ref_\u003dbl_dp_s_web_2529734011 \"External link\") with 90 MB/sec on reading speed and 45 MB/sec on writing speed.\n\nalacran\n\n"
    },
    {
      "id": "209473",
      "timestamp": "2019-02-24T08:48:34+00:00",
      "author": "wimb",
      "content": "I have succeeded in making it portable.\n\nNow I have WIMBOOT VHD + WIM file located on USB and booting from RAMDISK\n\nAs you can see From 13.9 GB Free RAM there is 1.4 GB in use and 12.5 GB available\n\n[![W10x64_W82-Portable-2019-02-24_093657.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-19891000-1550997856_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-19891000-1550997856.png \"W10x64_W82-Portable-2019-02-24_093657.png - Size: 514.51KB\"){#ipb-attach-url-16455-0-27376100-1676066389} \u003d\u003d [![W10x64_W82-Portable-2019-02-24_093935.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-10995800-1550997888_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-10995800-1550997888.png \"W10x64_W82-Portable-2019-02-24_093935.png - Size: 528.22KB\"){#ipb-attach-url-16456-0-27384700-1676066389} \u003d\u003d [![W10x64_W82-Memory-2019-02-24_101035.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-19488900-1550999567_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-19488900-1550999567.png \"W10x64_W82-Memory-2019-02-24_101035.png - Size: 520.91KB\"){#ipb-attach-url-16457-0-27392000-1676066389} \u003d\u003d [![W10x64_W82-Disks-2019-02-24_103303.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-19587600-1551000904_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-19587600-1551000904.png \"W10x64_W82-Disks-2019-02-24_103303.png - Size: 499.74KB\"){#ipb-attach-url-16458-0-27398700-1676066389}\n\n```\ntitle W10x64_W82.vhd - SVBus  RAMDISK  - 2048 MB - map as hd3\nfind --set-root --ignore-floppies /W10x64_W82.vhd\nmap --top --mem /W10x64_W82.vhd (hd3)\nmap --hook\nroot (hd3,0)\nchainloader /bootmgr\n\n```\n\nThe issue is that you need to map the VHD in RAMDISK as the real Windows Disk number of the location of the Backing WIM File, in my case hd3\n\nI have in my computer three internal harddisks - the SSD is hd0 and my USB-SSD gets number hd3\n\nWhat will be a better menu.lst entry so that the VHD in RAMDISK is always mounted as the real Windows disk number of the Backing WIM file ?\n\n"
    },
    {
      "id": "209482",
      "timestamp": "2019-02-24T12:36:59+00:00",
      "author": "alacran",
      "content": "Isn\u0027t this good enought, having the VHD and source .wim on same partition?:\n\ntitle W10x64_W82.vhd - SVBus RAMDISK - 2048 MB  \nfind --set-root --ignore-floppies /W10x64_W82.vhd  \nmap --top --mem /W10x64_W82.vhd  \nmap --hook  \nchainloader /bootmgr\n\n"
    },
    {
      "id": "209484",
      "timestamp": "2019-02-24T12:51:05+00:00",
      "author": "wimb",
      "content": "\u003e Isn\u0027t this good enought, having the VHD and source .wim on same partition?:\n\u003e\n\u003e title W10x64_W82.vhd - SVBus RAMDISK - 2048 MB  \n\u003e find --set-root --ignore-floppies /W10x64_W82.vhd  \n\u003e map --top --mem /W10x64_W82.vhd  \n\u003e map --hook  \n\u003e chainloader /bootmgr\n\nthis does NOT work, but I will try to find a solution.\n\nHopefully **Wonko** or **steve6375** can help to find a solution ....\n\n"
    },
    {
      "id": "209489",
      "timestamp": "2019-02-24T14:42:35+00:00",
      "author": "alacran",
      "content": "This could have been a nightmare for all people having more than one internal disk as myself if you haven\u0027t found it.\n\nI have 2 internal HDDs on this desktop so on grub4dos I should have for this PC a menu like this one:\n\ntitle W10x64_W82.vhd - SVBus RAMDISK - 2048 MB - map as hd2  \nfind --set-root --ignore-floppies /W10x64_W82.vhd  \nmap --top --mem /W10x64_W82.vhd (hd2)  \nmap --hook  \nroot (hd2,0)  \nchainloader /bootmgr\n\nBut also have other PCs with single disk, so at least for now I will need 2 diferent Titles on my menu.lst\n\nAnd what are your BCD(s) entries into Boot\\\\BCD and the other on efi\\\\microsoft\\\\boot\\\\BCD?, Could you post a picture of one of them opened in easy mode from BootIce please?\n\nI assume after installing the SVBus driver as it is unsigned we need to use Test Mode and No integrity checks. But since you have allready booted it, it is easier to ask.\n\nI want to avoid me troubles as much as possible. Thanks in advance.\n\n"
    },
    {
      "id": "209492",
      "timestamp": "2019-02-24T15:23:40+00:00",
      "author": "wimb",
      "content": "You need in BOOTICE to Add New entry AllowPrereleaseSignatures \"Yes\"\n\nI did that for the USSD Boot\\\\BCD and also for the VHD Internal Boot\\\\BCD file\n\nFor EFI booting as Filedisk with Microsoft driver this is not yet sufficient and I need to use then F8 in Boot Manager menu to Allow unsigned driver\n\n[![W10x64_W82-BOOTICE-2019-02-24_161505.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-85680400-1551021450_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-85680400-1551021450.png \"W10x64_W82-BOOTICE-2019-02-24_161505.png - Size: 600.29KB\"){#ipb-attach-url-16463-0-27405700-1676066389}\n\n"
    },
    {
      "id": "209493",
      "timestamp": "2019-02-24T15:25:16+00:00",
      "author": "blackbalfur",
      "content": "\u003e I have succeeded in making it portable.\n\u003e\n\u003e Now I have WIMBOOT VHD + WIM file located on USB and booting from RAMDISK\n\u003e\n\u003e As you can see From 13.9 GB Free RAM there is 1.4 GB in use and 12.5 GB available\n\u003e\n\u003e ![attachicon.gif](http://reboot.pro/public/style_images/metro/attachicon.gif)[W10x64_W82-Portable-2019-02-24_093657.png](http://reboot.pro/index.php?app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_rel_module\u003dpost\u0026attach_id\u003d16455 \"\") \u003d\u003d ![attachicon.gif](http://reboot.pro/public/style_images/metro/attachicon.gif)[W10x64_W82-Portable-2019-02-24_093935.png](http://reboot.pro/index.php?app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_rel_module\u003dpost\u0026attach_id\u003d16456 \"\") \u003d\u003d ![attachicon.gif](http://reboot.pro/public/style_images/metro/attachicon.gif)[W10x64_W82-Memory-2019-02-24_101035.png](http://reboot.pro/index.php?app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_rel_module\u003dpost\u0026attach_id\u003d16457 \"\") \u003d\u003d ![attachicon.gif](http://reboot.pro/public/style_images/metro/attachicon.gif)[W10x64_W82-Disks-2019-02-24_103303.png](http://reboot.pro/index.php?app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_rel_module\u003dpost\u0026attach_id\u003d16458 \"\")\n\u003e\n\u003e ```\n\u003e title W10x64_W82.vhd - SVBus  RAMDISK  - 2048 MB - map as hd3\n\u003e find --set-root --ignore-floppies /W10x64_W82.vhd\n\u003e map --top --mem /W10x64_W82.vhd (hd3)\n\u003e map --hook\n\u003e root (hd3,0)\n\u003e chainloader /bootmgr\n\u003e\n\u003e ```\n\u003e\n\u003e The issue is that you need to map the VHD in RAMDISK as the real Windows Disk number of the location of the Backing WIM File, in my case hd3\n\u003e\n\u003e I have in my computer three internal harddisks - the SSD is hd0 and my USB-SSD gets number hd3\n\u003e\n\u003e What will be a better menu.lst entry so that the VHD in RAMDISK is always mounted as the real Windows disk number of the Backing WIM file ?\n\nWhat i do is making more entries.  \n\nSo not only hd3 but also hd0 up to let say hd5.\n\nWhen an entry does not work you will get back to the screen where you can choose again in seconds.\n\njust try untill you get the one that works for your PC and harddisk setup.\n\nI know not ideal but at least it works fast.\n\n"
    },
    {
      "id": "209494",
      "timestamp": "2019-02-24T15:30:09+00:00",
      "author": "Wonko the Sane",
      "content": "I am not sure to understand the problem.\n\nIf the .vhd is on the same (physical) hard disk (or hard disk like device) can\u0027t one parse the output of the root command?\n\nI mean, after:\n\nfind --set-root --ignore-floppies /W10x64_W82.vhd\n\nthe output of the root command will be (say):\n\n(hd2,0) .....\n\nSo:\n\n```\n\nroot | set myroot\u003d\nset mypart\u003d%myroot:~0,7%\nset mydisk\u003d%myroot:~0,4%)\nset mydisk\nset mypart\n```\n\nShould be good for hard disks (and partitions) 0 to 9 (I know that someone will soon be posting that he/she has 10 or 11 hard disks or 10 or 11 partitions on the disk where he/she puts the .vhd ....)\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209496",
      "timestamp": "2019-02-24T15:41:15+00:00",
      "author": "wimb",
      "content": "The point is that after booting from RAMDISK then Windows has to find the Backing WIM file.\n\nThis Backing WIM file is only found when the VHD from USB loaded into RAM is mounted with disk number\n\ncorresponding to the disknumber that Windows will give the USB device where the WIM Backing file is located.\n\nIn my case I have 3 internal harddisks that Windows will number as hd0, hd1, hd2\n\nMy USB device gets in Windows number hd3\n\nSo when I ask Grub4dos to mount the VHD into RAMDISK as (hd3) then the WIMBOOT VHD when booting is able to find the Backing WIM file on hd3\n\nIn all other case e.g. mounting as hd0 then after loading into RAMDISK then booting fails with Error 225 which means file not found.\n\n@blackbalfur\n\nYour solution does not work for WIMBOOT\n\nAfter loading into RAMDISK or after trying to boot as FILEDISK you get Error 225 and cannot return into Grub4dos menu\n\n@jaclaz\n\nIn Grub4dos I can determine the root where my VHD is located with your proposal.\n\nBut what I need is to set in Grub4dos menu the disknumber that the device will get as given by Windows when booting from RAMDISK\n\nSo for my configuration I have it working.\n\nBut when I will try to boot from RAMDISK on machine with two harddisks then I have to use hd2 instead of hd3.\n\nYou can of course have several menu.lst entries, but using them will then quite often result in Error 225 after loading the RAMDISK followed by boot failure needing Reset.\n\n"
    },
    {
      "id": "209497",
      "timestamp": "2019-02-24T15:57:44+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e The point is that after booting from RAMDISK then Windows has to find the Backing WIM file.\n\u003e\n\u003e This Backing WIM file is only found when the VHD from USB loaded into RAM is mounted with disk number\n\u003e\n\u003e corresponding to the disknumber that Windows will give the USB device where the WIM Backing file is located.\n\u003e\n\u003e In my case I have 3 internal harddisks that Windows will number as hd0, hd1, hd2\n\u003e\n\u003e My USB device gets in Windows number hd3\n\u003e\n\u003e So when I ask Grub4dos to mount the VHD into RAMDISK as (hd3) then the WIMBOOT VHD when booting is able to find the Backing WIM file on hd3\n\nYep :smile:, and IF the .vhd is on (hd3) the proposed snippet will work just fine.\n\nExpanded, yours, hardcoded to (hd3):\n\n```\ntitle W10x64_W82.vhd - SVBus  RAMDISK  - 2048 MB - map as hd3\nfind --set-root --ignore-floppies /W10x64_W82.vhd\nmap --top --mem /W10x64_W82.vhd (hd3)\nmap --hook\nroot (hd3,0)\nchainloader /bootmgr\n```\n\nproposed:\n\n```\ntitle W10x64_W82.vhd - SVBus  RAMDISK  - 2048 MB - map as hd3\nfind --set-root --ignore-floppies /W10x64_W82.vhd\nroot | set myroot\u003d\nset mypart\u003d%myroot:~0,7%\nset mydisk\u003d%myroot:~0,4%)\nmap --top --mem /W10x64_W82.vhd %mydisk%\nmap --hook\nroot %mypart%\nchainloader /bootmgr\n```\n\nOf course feel free to make any needed changes/variations.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209499",
      "timestamp": "2019-02-24T16:36:44+00:00",
      "author": "wimb",
      "content": "Thanks Wonko for your proposed menu.lst entry.\n\nIt does not work as published but it will be helpful for me to parse grub4dos output and to set values in the entry.\n\nWhen I do just the grub4dos command **find** then I get the list of hardisks and partitions.\n\nWhat I need to do is to parse the output and to get the hd number of the last entry.\n\nThat is in fact the number that I must use in the menu.lst entry\n\n"
    },
    {
      "id": "209500",
      "timestamp": "2019-02-24T17:07:36+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Thanks Wonko for your proposed menu.lst entry.\n\u003e\n\u003e It does not work as published but it will be helpful for me to parse grub4dos output and to set values in the entry.\n\u003e\n\u003e When I do just the grub4dos command **find** then I get the list of hardisks and partitions.\n\u003e\n\u003e What I need to do is to parse the output and to get the hd number of the last entry.\n\u003e\n\u003e That is in fact the number that I must use in the menu.lst entry\n\nNo you don\u0027t. ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)\n\nI don\u0027t understand why the posted example wouldn\u0027t work.\n\nI *CLAIM* that *IF* the .vhd is on (hd3,0) the posted proposal will output *EXACTLY THE SAME* of your hardcoded entry (that you reported as successful), namely\n\nset mydisk\n\nwill output\n\n(hd3)\n\nand\n\nset mypart\n\nwill output\n\n(hd3,0)\n\nso, if it doesn\u0027t work it means that also your original hardcoded one doesn\u0027t work ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)\n\nMaybe you could post the actual output of\n\nset mydisk\n\nand\n\nset mypart\n\non your system (the SAME one where the hardcoded (hd3) and (hd3,0) work).\n\nWHAT is the ACTUAL info you want to get?\n\nLast disk? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nLast disk is (hd-1).\n\nI.e.\n\nthe disk is (hd-1)\n\nfirst partition on it is (hd-1,0)\n\ni.e.:\n\n\u003e title W10x64_W82.vhd - SVBus RAMDISK - 2048 MB - map as hd3  \n\u003e find --set-root --ignore-floppies /W10x64_W82.vhd  \n\u003e map --top --mem /W10x64_W82.vhd (hd-1)  \n\u003e map --hook  \n\u003e root (hd-1,0)  \n\u003e chainloader /bootmgr\n\nIs that what you want? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209501",
      "timestamp": "2019-02-24T17:54:54+00:00",
      "author": "wimb",
      "content": "\u003e WHAT is the ACTUAL info you want to get?\n\u003e\n\u003e Last disk? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\u003e\n\u003e Last disk is (hd-1).\n\u003e\n\u003e I.e.\n\u003e\n\u003e the disk is (hd-1)\n\u003e\n\u003e first partition on it is (hd-1,0)\n\u003e\n\u003e i.e.:\n\u003e\n\u003e Is that what you want? ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\u003e\n\u003e Wonko\n\nExcellent solution :cool: ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)\n\nThat works very good .\n\n```\ntitle W10x64_W82.vhd - SVBus RAMDISK - 2048 MB - map for WIMBOOT\nfind --set-root --ignore-floppies /W10x64_W82.vhd\nmap --top --mem /W10x64_W82.vhd (hd-1)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "209512",
      "timestamp": "2019-02-27T09:41:51+00:00",
      "author": "alacran",
      "content": "@ wimb\n\nAfter making some experiments in order to Ramboot a VHD installed on Wimboot mode, IMHO this is a better option for your menu.lst, (to make it more suitable for this project):\n\n```\niftitle [if exist (hd0,0)/8.1x64ESP1-WB.vhd] 8.1x64ESP1-WB.vhd - SVBus RAMDISK - 1024 MB - map for WIMBOOT\nmap --top --mem (hd0,0)/8.1x64ESP1-WB.vhd (hd-1)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n\niftitle [if exist (hd0,1)/8.1x64ESP1-WB.vhd] 8.1x64ESP1-WB.vhd - SVBus RAMDISK - 1024 MB - map for WIMBOOT\nmap --top --mem (hd0,1)/8.1x64ESP1-WB.vhd (hd-1)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n\niftitle [if exist (hd0,0)/10x64-WB.vhd] 10x64-WB.vhd - SVBus RAMDISK - 1024 MB - map for WIMBOOT\nmap --top --mem (hd0,0)/10x64-WB.vhd (hd-1)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n\niftitle [if exist (hd0,1)/10x64-WB.vhd] 10x64-WB.vhd - SVBus RAMDISK - 1024 MB - map for WIMBOOT\nmap --top --mem (hd0,1)/10x64-WB.vhd (hd-1)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n```\n\nAlso good for external USB devices with one or two (MBR/legacy) partitions, and also helps to tests if grub4dos can access or not a secondary NTFS partition on your **actual device** , a problem I had, as grub4dos can\u0027t acces files on secondary NTFS partition of my MicroSDHC 32GB UHS-I Kingston SDCS/32GB CL10, 80R ([Canvas Select](https://www.amazon.com/Kingston-32GB-microSDHC-microSD-SDCS/dp/B079GTYCW4 \"External link\")) connected with my [USB 3.0 adapter](https://www.sabrent.com/product/CR-UMSS/mini-usb-3-0-micro-sd-sd-card-reader-black/#description \"External link\") , some internal driver used into the MicroSD or the adapter is not fully compatable with the very last version (2018.12.22) of grub4dos, tried other versions but same thing.\n\nI can run the VHD with Windows bootmanager from second partition, of course not as Ramboot so secondary partition is seen on Windows, but nothing from second NTFS partition can be booted with grub4dos, I was forced to make a second MicroSD with a single NTFS primary partition (it was good I had 3 of them available) in order to be able to Ramboot this VHD (it takes a minute and 48 seconds to load 1 GB in Ram and reach desktop, and it was pluged to a USB 2.0 port on PC \\[my mistake\\]). I can reduce the size of VHD to 512 MB and it will be loaded in half time + the time to reach desktop. But to me it doesn\u0027t seems excesive as it is now.\n\nOf course there are many factors involved here, the USB device reading speed, the CPU speed and Ram speed, so every case will be unique.\n\nBut from another device, an Adata UV100 USB 2.0 stick with 2 partitions (only empty stick avilable at the time) I have no problem to Ramboot the VHD and it works flawlessly once loaded on Ram but of course it takes longer to load in Ram, just wanted to confirm on other devices can work fine.\n\n**EDIT:** Fixed some typing mistakes (thanks to **wimb** for find them), please excuse me but it was about 4:00 am in my country when I made the lines this way first time for my menu.lst, and as they worked fine (even with mistakes), just copy paste here and never reviewed them again.\n\nalacran\n\n"
    },
    {
      "id": "209522",
      "timestamp": "2019-02-28T06:01:20+00:00",
      "author": "wimb",
      "content": "\u003e After making some experiments in order to Ramboot a VHD installed on Wimboot mode, IMHO this is a better option for your menu.lst, (to make it more suitable for this project):\n\nThanks **alacran,** that is a good idea to use **iftitle** and avoid find in menu.lst entries. :smile:\n\nThere is a new version of [UEFI MULTI](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\") available with new grub4dos SVBus menu entries using **iftitle**\n\nand for **booting from USB** using**(hd-1)**for mapping for WIMBOOT\n\nIn case of VHD and WIM file located on **USB** NTFS partition we use:\n\n```\niftitle [if exist (hd0,1)/W10x64_S3.vhd] (hd0,1)/W10x64_S3.vhd - SVBus  FILEDISK - 2048 MB - map for WIMBOOT\nmap (hd0,1)/W10x64_S3.vhd (hd-1)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n\niftitle [if exist (hd0,1)/W10x64_S3.vhd] (hd0,1)/W10x64_S3.vhd - SVBus  RAMDISK  - 2048 MB - map for WIMBOOT\nmap --top --mem (hd0,1)/W10x64_S3.vhd (hd-1)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n\n```\n\nIn VHD WIMBOOT we have a**two** file Operating System, where first grub4dos loads the VHD into RAM.\n\nWhen booting from RAMDISK as WIMBOOT, then Windows has to find the location of the Backing WIM file.\n\nIn **grub4dos** the USB Boot disk with our VHD and WIM files on NTFS partition has the **lowest** disk number hd0\n\nbut **Windows** will give the same USB disk the**highest**disk number.\n\nThis highest disk number strongly depends on the number of internal harddisks and varies from one computer to another.\n\nThat is why I am so happy with the solution given by **Wonko** to use (hd-1) as value for the highest disk number which is valid for all configurations ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)\n\nWhen the VHD booting from RAMDISK is mapped as (hd-1) then it is always able to find the Backing WIM file on USB :cool:\n\nIn this way we have a portable reliable full Win10x64 Operating System on USB booting very fast from RAMDISK and that it will not change e.g. by malware.\n\nVHD size 2 GB with full Win10x64 OS + Office Word and Excel + VLC player total size **600 MB** in RAMDISK connected to WIM file of size 6 GB on USB NTFS drive\n\nAs compared to WinPE the VHD WIMBOOT has the advantage to have support for Office and Printer and any program can be installed which is all not the case for WinPE.\n\n[![capt_us2-2019-02-26_214323.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-62031800-1551339525_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-62031800-1551339525.png \"capt_us2-2019-02-26_214323.png - Size: 37.1KB\"){#ipb-attach-url-16471-0-27411900-1676066389} \u003d\u003d [![S3-Setup-2019-02-26_214651.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-44979500-1551339543_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-44979500-1551339543.png \"S3-Setup-2019-02-26_214651.png - Size: 23.41KB\"){#ipb-attach-url-16472-0-27418500-1676066389} \u003d\u003d [![W10x64_S3-RAM-2019-02-26_222259.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-14989900-1551339555_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-14989900-1551339555.png \"W10x64_S3-RAM-2019-02-26_222259.png - Size: 584.64KB\"){#ipb-attach-url-16473-0-27425000-1676066389} \u003d\u003d [![W10x64_S3-USB-RAMDISK-2019-02-26_224720.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-60120800-1551339567_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-60120800-1551339567.png \"W10x64_S3-USB-RAMDISK-2019-02-26_224720.png - Size: 554.62KB\"){#ipb-attach-url-16474-0-27431500-1676066389} \u003d\u003d [![W10x64-RAM-HelloWorld-2019-02-28_214228.png](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-92261400-1551386787_thumb.png)](http://reboot.pro/uploads/monthly_02_2019/post-9517-0-92261400-1551386787.png \"W10x64-RAM-HelloWorld-2019-02-28_214228.png - Size: 727.19KB\"){#ipb-attach-url-16480-0-27438000-1676066389} \u003d\u003d [![W10x64-RAM-HelloWorld-2019-03-01_155130.png](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-43065300-1551452098_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-43065300-1551452098.png \"W10x64-RAM-HelloWorld-2019-03-01_155130.png - Size: 736.73KB\"){#ipb-attach-url-16485-0-27444800-1676066389}\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "209523",
      "timestamp": "2019-02-28T08:21:14+00:00",
      "author": "alacran",
      "content": "@ wimb\n\nGood, well done, you are the man who Rambooted the first time a full wimboot Windows 10 OS, (and I think I\u0027m the second, HA, HA, HA).\n\nThere is something I want to comment to you, take a carefull look at your second picture on your last post, your VHD first sector is 64.\n\nI know this does not seems very relevant but it increase the wear on Solid State devices.\n\nI found Windows, WinNTSetup and also BootIce sometimes/manytimes create VHDs with an starting sector different (to the usual) 2048 on external drives see:\n\n\u003e You can use any good partition tool as [PartitionGuru Free edition](http://www.eassos.com/partitionguru-free.php \"External link\") to partition your disk as required, also BootIce can do it but I allways prefer to do it with PartitionGuru as BootIce and Windows 7, 8.x, (haven\u0027t tested 10) when making small partitions on VHDs located on USB sticks have the tendency to do not use 2048 as first sector as usually done by OS, they sometimes use 63 or 128 and PartitionGuru allways uses 2048 (but can be changed if required) as starting LBA and automatically make the first partition MBR 6.x and activate it, also installs bootmanager PBR on it and on second partition too.\n\nFrom this post: [http://reboot.pro/to...hd/#entry209488](http://reboot.pro/topic/21957-making-the-smallest-win10-install-wimboot-mode-on-512-mb-vhd/#entry209488 \"\")\n\nalacran\n\n"
    },
    {
      "id": "209525",
      "timestamp": "2019-02-28T08:58:02+00:00",
      "author": "wimb",
      "content": "\u003e There is something I want to comment to you, take a carefull look at your second picture on your last post, your VHD first sector is 64.\n\u003e\n\u003e I know this does not seems very relevant but it increase the wear on Solid State devices.\n\u003e\n\u003e I found Windows, WinNTSetup and also BootIce sometimes/manytimes create VHDs with an starting sector different (to the usual) 2048 on external drives see:\n\u003e\nProbably I can adjust settings in WinNTSetup to Create VHD with other value of partition first sector.\n\nI was not aware of the possible wear problem for SSD, so I have to study on that subject.\n\nAnyway I used tinyhexer and saw that actually the first partition sector in that **VHD** is **sector 128** which I think is normal for VHD\u0027s\n\nI doubt that there is a wear problem since the value of 128 is an internal VHD count and the **USSD** hosting the VHD has partition **first sector on 2048**\n\n"
    },
    {
      "id": "209528",
      "timestamp": "2019-02-28T10:07:40+00:00",
      "author": "Wonko the Sane",
      "content": "Hold your horses.\n\nLet\u0027s debunk these myths at their very start.\n\nThe \"new paradigm\" (re:offset of partitions) is (as often happens with anything MS originated) more myths than anything else.\n\nThe idea of using (as opposed to the head boundary) the 2048 sector for first partition is entirely arbitrary.\n\nWhat was initially a way to have faster access to rotational disks (with - believe me - very little actual gain in terms of speed and only noticeable with database use) became senselessly standard.\n\n**BUT** when it came to SSD\u0027s (or more generally flash based devices) it started to make a lot of sense.\n\nThe first (obvious) advantage (at file system level) is that clusters (usually on NTFS 8 sectors or 4096 bytes) become inherently aligned.\n\nThe second one (specific for flash and solid state devices) is that the page size (which is the actual unit at which some operations are performed on SSD) is also aligned.\n\nThe first one is reached with \\*any\\* multiple of 8 sectors, though usually powers are used (for slightly different reasons) with an offset of 8, 16, 32, 64, 128, 256, 512, 1024 or 2048 sectors BUT the specific SSD (or flash device) may have a internal \"structures\", let\u0027s call them \"page size\" and \"erase block size\" which may (or may not) provide a further slight enhancement, among them, the \"page size\" is actually be a good idea (while aligning to the \"erase block size\" makes little sense).\n\nThese values are (usually but not always) respectively 16 sectors (or 8 kb) and 4096 sectors (256\\*page size).\n\nSome previous related discussion is here:\n\n[http://reboot.pro/to...-memory-drives/](http://reboot.pro/topic/16783-rmprepusb-faster-fat32-write-access-on-flash-memory-drives/ \"\")\n\nSo, in a nutshell an offset to the first NTFS partition volume of:\n\n16, 32, 64, 128, 256, 512, 1024 or 2048\n\nis \"good\" and there is NO difference in using the one or the other (if the page size is 8 kb)\n\nIf the page size is 16 Kb (or 8 Kb), any of:\n\n32, 64, 128, 256, 512, 1024 or 2048\n\nis \"good\" and there is NO difference in using the one or the other.\n\nIn practice besides 2048:\n\n64, 128, 256, 512 and 1024\n\nwill \"cover\" page sizes up to 32 Kb in EXACTLY the same manner, and\n\n128, 256, 512 and 1024 will \"cover\" page sizes up to 64 Kb in EXACTLY the same manner.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209529",
      "timestamp": "2019-02-28T10:19:38+00:00",
      "author": "alacran",
      "content": "@ Wonko\n\nGood info as allways.\n\nalacran\n\n"
    },
    {
      "id": "209530",
      "timestamp": "2019-02-28T10:21:06+00:00",
      "author": "wimb",
      "content": "\u003e So, in a nutshell an offset to the first NTFS partition volume of:\n\u003e\n\u003e 16, 32, 64, 128, 256, 512 or 2048\n\u003e\n\u003e is \"good\" and there is NO difference in using the one or the other (if the page size is 8 kb)\n\u003e\n\u003e If the page size is 16 Kb (or 8 Kb), any of:\n\u003e\n\u003e 32, 64, 128, 256, 512 or 2048\n\u003e\n\u003e is \"good\" and there is NO difference in using the one or the other.\n\u003e\n\u003e In practice:\n\u003e\n\u003e 64, 128, 256, 512 and 1024\n\u003e\n\u003e will \"cover\" page sizes up to 32 Kb in EXACTLY the same manner, and\n\u003e\n\u003e 128, 256, 512 and 1024 will \"cover\" page sizes up to 64 Kb in EXACTLY the same manner.\n\u003e\nThanks **Wonko** for giving details on first sector value and page sizes.\n\nSo I may conclude that my USSD hosting VHD is OK in this respect :smile:\n\n"
    },
    {
      "id": "209572",
      "timestamp": "2019-03-02T09:49:24+00:00",
      "author": "wimb",
      "content": "There is a new version of [UEFI MULTI](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\") available with new **Grub4dos** **SVBus** [menu entries](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209522 \"\").\n\nMapping for **VHD WIMBOOT** is taken into account for various cases e.g VHD + WIM on USB Or on Internal Harddisk.\n\nUEFI_MULTI determines the Drive Number for the MountPoint of the selected NTFS System Drive where the VHD resides.\n\nUEFI_MULTI determines the DriveType and Bus Type of the selected NTFS System Drive.\n\nIn this way the program knows where VHD + WIM are located e.g. on USB Or on Internal Harddisk\n\nand the program knows the Windows **disk number** which is used in menu.lst entries for WIMBOOT mapping in case the VHD + WIM are located on Internal Harddisk.\n\n**VHD + WIM located on NTFS drive of USB Harddisk Or Portable SSD**\n\n```\niftitle [if exist (hd0,1)/W10x64_S3.vhd] (hd0,1)/W10x64_S3.vhd - SVBus  RAMDISK  - 2048 MB - map for WIMBOOT\nmap --top --mem (hd0,1)/W10x64_S3.vhd (hd-1)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n\n```\n\n\u003d\n\n**VHD + WIM located on NTFS drive of Internal Disk**\n\n```\ntitle W10x64_NL_1.vhd - SVBus  RAMDISK  - 2.0 GB - map as hd for WIMBOOT\nfind --set-root --ignore-floppies /W10x64_NL_1.vhd\nmap --top --mem /W10x64_NL_1.vhd (hd)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n\n```\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n**How to Make VHD WIMBOOT on USB and to use Grub4dos menu and SVBus driver for booting from RAMDISK**\n\n**Download:** [VHD_WIMBOOT](http://reboot.pro/topic/21977-vhd-wimboot-apply-and-capture-of-wim-files-for-os-in-vhd/ \"\") and **Manual:**\n\nBest Results for speed of Portable **VHD WIMBOOT** obtained with [SAMSUNG Portable SSD T5 250 GB](https://www.samsung.com/nl/memory-storage/portable-ssd/ \"External link\") with [UEFI/MBR Partitioning](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209300 \"\") with 20 GB FAT32 and 230 GB NTFS partition.\n\n[![UEFI_MULTI-2019-03-02_140545.png](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-66752700-1551532032_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-66752700-1551532032.png \"UEFI_MULTI-2019-03-02_140545.png - Size: 17.02KB\"){#ipb-attach-url-16488-0-58499900-1676066389} \u003d\u003d [![W10x64-RAM-HelloWorld-2019-03-01_155130.png](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-79909200-1551523738_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-79909200-1551523738.png \"W10x64-RAM-HelloWorld-2019-03-01_155130.png - Size: 736.73KB\"){#ipb-attach-url-16487-0-58486400-1676066389} \u003d\u003d [![F2-VHD-USB-Ready-2019-03-03_113112.png](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-53175000-1551609288_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-53175000-1551609288.png \"F2-VHD-USB-Ready-2019-03-03_113112.png - Size: 530.5KB\"){#ipb-attach-url-16493-0-58509200-1676066389}\n\nWith VHD WIMBOOT from USB Portable SSD we can have a full Win10 x64 of Size 600 MB booting from RAMDISK\n\nas very fast Portable and always **FRESH** Operating System.\n\nThe only limitation is that booting from **RAMDISK** requires booting in **BIOS** mode with **Grub4dos**.\n\nHopefully we can have **UEFI Secure** support when **Grub2** in future might be able to load such VHD into memory and launch Windows by chainloading **bootmgfw.efi** ![:rolleyes:](http://reboot.pro/public/style_emoticons/default/rolleyes.gif) ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nBut anyway booting from Windows Boot Manager menu as **FILEDISK** using Microsoft vhdmp.sys driver is available in **BIOS and in UEFI Secure mode**.\n\nwimlib-clc CAPTURE followed by APPLY is important to reduce the size of the WIMBOOT Operating System from 3,5 GB down to 600 MB\n\nso that it can be located in VHD of Size 2 GB with total boottime 30 seconds which is OK.\n\n[Thanks to **alacran**](http://reboot.pro/topic/21957-making-the-smallest-win10-install-wimboot-mode-on-512-mb-vhd/ \"\") for pointing me to [wimlib](https://wimlib.net/index.html \"External link\") of **synchronicity** (More Info: [here](http://reboot.pro/topic/18345-wimlib-with-imagex-implementation/ \"\")) combined with [wimlib-clc](http://reboot.pro/topic/21861-wimlib-clc/ \"\") of **ReTokener** :smile:\n\nThanks to **steve6375** for --top --mem and **Wonko the Sane** for (hd-1) and **karyonix** for (hd) map for [WIMBOOT solution](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209754 \"\") in Grub4dos menu ![:worship:](http://reboot.pro/public/style_emoticons/default/worship.gif)\n\nVHD size 2 GB with full Win10x64 OS + Office Word and Excel + VLC player total size **600 MB** in RAMDISK connected to WIM file of size 6 GB on USB NTFS drive\n\nAs compared to WinPE the VHD WIMBOOT has the advantage to have support for Office and Printer and any program can be installed which is all not the case for WinPE\n\nIn case of VHD WIMBOOT on each machine it takes extra boottime and space to adjust the drivers for that machine  \nThe VHD WIMBOOT solution is Portable, but not as flexible as Win10XPE, where boottime is not dependant on machine hardware  \nFor **Portability** it is good to have two VHD\u0027s  \n- On couple of other machines boot first with **25 GB VHD** WIMBOOT as **FILEDISK** from Boot Manager Menu and let Win10 Install all drivers  \n- At Home After booting with Win10 x64 OS then CAPTURE WIM of 25 GB VHD - Format and APPLY WIM on 1.5 GB VHD  \n- Next time Boot with **1.5 GB VHD** WIMBOOT on USB with Grub4dos menu from **RAMDISK** on all other machines  \nThe 1.5 GB VHD will be handy for booting from RAMDISK on 4GB RAM machines, but in other cases a 3.9 GB VHD is preferred  \nIn this way you have some learning on a couple of machines, but then the WIM has improved and can be used on all machines ....  \nThat principle of learning, where the SYSTEM registry is improving, is already working since the days of Windows e**XP**erience\n\n"
    },
    {
      "id": "209628",
      "timestamp": "2019-03-03T18:23:34+00:00",
      "author": "alacran",
      "content": "Tested on 2 external USB devices and working great.\n\nThanks for all your work adding new code to make appropiate changes to all BCDs (op to 4 on wimboot OSs when the USB device has Fat-32 and NTFS drives), and also the new grub4dos lines on menu.lst\n\nVery usefull for creating Multibootable portable devices. I haven\u0027t tested the program with my wimboot VHDs located on internal (hd1,5), also having source wimboot file on same partition, since only wanted RamBoot, then was easier to just add the titles to my menu.lst\n\nalacran\n\n"
    },
    {
      "id": "209629",
      "timestamp": "2019-03-03T18:52:57+00:00",
      "author": "wimb",
      "content": "Thanks **alacran** for testing UEFI_MULTI in making BCD and menu.lst entries on USB for VHD WIMBOOT.\n\nI have used UEFI_MULTI also for the case of booting from USB and VHD + WIM located on NTFS partition of GPT Or MBR internal hardddisk.\n\nAnd I have also tested booting from Internal harddisk and VHD + WIM located on Internal harddisk\n\nI think now all possible cases are treated allright by UEFI_MULTI for making the boot entries.\n\n"
    },
    {
      "id": "209631",
      "timestamp": "2019-03-03T22:49:50+00:00",
      "author": "alacran",
      "content": "\u003e And I have also tested booting from Internal harddisk and VHD + WIM located on Internal harddisk\n\u003e\n\u003e I think now all possible cases are treated allright by UEFI_MULTI for making the boot entries.\n\nYou read my mind, I was thinking on this scenario and coming to comment it to you, but as you allready said now all possible cases are allready covered by your great tool.\n\nBy the way thinking in diferences and benefits from Ramboot and WinPEs, when running a portable wimboot install only thing I miss from WinPE\u0027s is usually they do not care about NTFS permissions, to facilitate the work when making offline changes to other OSs. I know ChrisPE uses [AccessGain](http://www.hobeanu.com/accessgain/ \"External link\"), but since you have your own tools to make WinPE\u0027s since long time ago, I think you may have some other candidates we may add to our VHD before wimboot Capture and Install.\n\nalacran\n\n"
    },
    {
      "id": "209640",
      "timestamp": "2019-03-04T05:59:25+00:00",
      "author": "wimb",
      "content": "\u003e By the way thinking in diferences and benefits from Ramboot and WinPEs, when running a portable wimboot install only thing I miss from WinPE\u0027s is usually they do not care about NTFS permissions, to facilitate the work when making offline changes to other OSs. I know ChrisPE uses [AccessGain](http://www.hobeanu.com/accessgain/ \"External link\"), but since you have your own tools to make WinPE\u0027s since long time ago, I think you may have some other candidates we may add to our VHD before wimboot Capture and Install.\n\u003e\nI think [AccessGain](http://www.hobeanu.com/accessgain/ \"External link\") is the way to go and I don\u0027t have another tool for this purpose.\n\n"
    },
    {
      "id": "209643",
      "timestamp": "2019-03-04T11:52:20+00:00",
      "author": "wimb",
      "content": "**How to Make VHD WIMBOOT on USB and to use Grub4dos menu and SVBus driver for booting from RAMDISK**\n\nManual available:\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nActually the Full Win10 x64 in 2GB VHD at rest uses only **206 MB** ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif) and all drivers including the large NVIDIA driver are working properly ![:magic:](http://reboot.pro/public/style_emoticons/default/magic.gif)\n\n[![F2-C-206MB-2019-03-04_160039.png](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-33734000-1551711732_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-33734000-1551711732.png \"F2-C-206MB-2019-03-04_160039.png - Size: 750.99KB\"){#ipb-attach-url-16500-0-58517700-1676066389} \u003d\u003d [![F2-VHD-USB-Ready-2019-03-03_113112.png](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-53175000-1551609288_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-53175000-1551609288.png \"F2-VHD-USB-Ready-2019-03-03_113112.png - Size: 530.5KB\"){#ipb-attach-url-16493-0-93557200-1675490611}\n\n"
    },
    {
      "id": "209671",
      "timestamp": "2019-03-06T15:03:13+00:00",
      "author": "wimb",
      "content": "I have used VHD WIMBOOT booting from Portable SSD now on different hardware.\n\nOn Unknown hardware first a VHD of 5 GB is preferred in booting as FILEDISK so that there is enough space to install all drivers.  \nAfter this learning step we can do CAPTURE and APPLY to VHD of Size 2 GB and boot from USB with Grub4dos from RAMDISK.  \nOn each machine it takes extra boottime to adjust the drivers for that machine.  \nAlso returning on original machine takes extra time to readjust the drivers.  \nThe VHD WIMBOOT solution is Portable, but not as flexible as Win10XPE, where boottime is not dependant on machine hardware.\n\n"
    },
    {
      "id": "209672",
      "timestamp": "2019-03-06T15:26:32+00:00",
      "author": "alacran",
      "content": "@ wimb\n\nAfter reading your [**VHD_WIMBOOT.pdf**](http://reboot.pro/index.php?app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d16501 \"\") I noticed you capture with wimboot option twice (capt_f.wim and capt_f2.wim), and install as wimboot twice too. Do you have any particular reason for doing it twice? If not, then you may consider doing it this way:\n\nI use to create my first full standard install on VHD from 10 or 15 GB and I have used also expandable VHD only on this first install, (yes now WinNTSetup let you use smaller sizes, some time ago 25 GB was the minimun possible), then on this VHD I install all I will need running on my final OS, and a single wimboot mode capture is enought, and finally a wimboot mode install to VHD is required.\n\nSVBus driver can be added latter on FileDisk booted small wimboot VHD, or could be installed on first Full size VHD and if we want, for some reason, it not compressed latter on our wimboot VHD and (only in this case) just add to your WimBootCompress_BCD.ini on \\[PrepopulateList\\] before capture, as the other you recommed (good idea by the way):\n\n\\\\Windows\\\\System32\\\\drivers\\\\svbusx64.sys -----\\\u003e This should be the only required (if any).  \n\\\\Windows\\\\System32\\\\DriverStore\\\\FileRepository\\\\svbus.inf_amd64_de3077296e6085bf\\\\\\* -----\\\u003e I think this is not mandatory, but it do not hurt.\n\nAnd the full section \\[PinningFolderList\\] can be deleted to do not have anymore the warning about Unrecogniced Section: \\[PinningFolderList\\], this section is a new addition on 1809, it do not exists on the WimBootCompress.ini of my running 1709.\n\nAnother comment is select tricks during WinNTSetup install (like disable hibernate and no pagefile) is required only the first time you make an install, since when we capture the OS on the VHD all this is allready done and we do not need to do it againg next time we deploy new captured image, since it is as a Backup image, for that reason I usually run CCleaner and defragment before a capture.\n\nBest Regards\n\nalacran\n\n"
    },
    {
      "id": "209673",
      "timestamp": "2019-03-06T15:45:27+00:00",
      "author": "wimb",
      "content": "Twice using Capture is not really needed, but it reduced again the used size inside the VHD after Install of the driver and booting from USB.\n\nAlso I found it a nice illustration on how you can reduce the size after install of extra programs or after adding drivers of other machines.\n\nIn that case the sequence CAPTURE - Format - APPLY carried out on mounted VHD results quickly in the original present free space, since all file data go in the WIM file.\n\nGood idea to further improve the custom WimBootCompress_BCD.ini file by adding svbus driver and removing the \\[PinningFolderList\\] Section :smile:\n\nYou are quite right that the second time in WinNTSetup we must not use any tweaks or tricks since they are already present in the CAPTURE wim file.\n\nNice to hear your comments on the VHD_WIMBOOT.pdf manual.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "209694",
      "timestamp": "2019-03-07T13:32:32+00:00",
      "author": "alacran",
      "content": "@ wimb\n\n\u003e Twice using Capture is not really needed, but it reduced again the used size inside the VHD after Install of the driver and booting from USB.\n\u003e\n\u003e Also I found it a nice illustration on how you can reduce the size after install of extra programs or after adding drivers of other machines.\n\u003e\n\u003e In that case the sequence CAPTURE - Format - APPLY carried out on mounted VHD results quickly in the original present free space, since all file data go in the WIM file.\n\u003e\n\u003e ![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nYes, this is a good way to re-gain space on the VHD after some time of use and/or installing more programs since first install.\n\nalacran\n\n"
    },
    {
      "id": "209719",
      "timestamp": "2019-03-10T12:50:51+00:00",
      "author": "alacran",
      "content": "@ wimb\n\nI am sorry to tell you I found an issue on UEFI_MULTI my friend, From your post No. [152](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-7#entry209572 \"\")\n\n\u003e **VHD + WIM located on NTFS drive of Internal Disk 1**\n\u003e title W10x64_S3_1D.vhd - SVBus RAMDISK - 2048 MB - map for WIMBOOT  \n\u003e find --set-root --ignore-floppies /W10x64_S3_1D.vhd  \n\u003e map --top --mem /W10x64_S3_1D.vhd (hd1)  \n\u003e map --hook  \n\u003e root (hd1,0)  \n\u003e chainloader /bootmgr\n\nSomething like this are the lines for grub4dos menu.lst, applied by UEFI_MULTI when VHD is located on any partition of internal HD 1 (hd1), but they generate a BSOD.\n\nThe lines quoted are used as an example, actual title applied is a little different.\n\nAfter some tests I have found the following:\n\nThe right lines when VHD is located on internal disk 1 (hd1,X) are:\n\n```\nVHD + WIM located on NTFS drive of Internal Disk 1\ntitle W10x64_S3_1D.vhd - SVBus RAMDISK - 2048 MB - map for WIMBOOT\nfind --set-root --ignore-floppies /W10x64_S3_1D.vhd\nmap --top --mem /W10x64_S3_1D.vhd (hd2)\nmap --hook\nroot (hd2,0)\nchainloader /bootmgr\n```\n\nThis is when VHD is located on internal disk 2 (hd2,X) are:\n\n```\nVHD + WIM located on NTFS drive of Internal Disk 2\ntitle W10x64_S3_1D.vhd - SVBus RAMDISK - 2048 MB - map for WIMBOOT\nfind --set-root --ignore-floppies /W10x64_S3_1D.vhd\nmap --top --mem /W10x64_S3_1D.vhd (hd3)\nmap --hook\nroot (hd3,0)\nchainloader /bootmgr\n```\n\nAnd when VHD is located on internal disk 0 (hd0,X) are:\n\n```\nVHD + WIM located on NTFS drive of Internal Disk 0\ntitle W10x64_S3_1D.vhd - SVBus RAMDISK - 2048 MB - map for WIMBOOT\nfind --set-root --ignore-floppies /W10x64_S3_1D.vhd\nmap --top --mem /W10x64_S3_1D.vhd (hd1)\nmap --hook\nroot (hd1,0)\nchainloader /bootmgr\n```\n\n**So we may say for RamBooting a VHD from internal disks, we need to use hd number (according to grub4dos) where VHD is located + 1 in our menu.lst for grub4dos RamBoot.**\n\n**EDIT:**On one PC VHD and wim file are located on internal MBR HD (hd1,5), on another PC VHD and wim file are located on internal MBR HD (hd0,6), and both work fine with my approach.\n\nBest Regards\n\nalacran\n\n"
    },
    {
      "id": "209723",
      "timestamp": "2019-03-10T15:46:00+00:00",
      "author": "Wonko the Sane",
      "content": "@alacran\n\nI suspect that the way different BIOSes will react may be different.\n\nAnyway AGAIN the \"right\" approach REMAINS dynamically getting the disk/drive numbers \\*like\\*:\n\n[http://reboot.pro/to...drive/?p\u003d209497](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209497 \"\")\n\nOf course if needed increasing the disk number, i.e.:\n\n```\n\ntitle W10x64_W82.vhd - SVBus  RAMDISK  - 2048 MB - map as disk+1\nfind --set-root --ignore-floppies /W10x64_W82.vhd\nroot | set myroot\u003d\nset mydisk\u003d%myroot:~3,1%\nmap --top --mem /W10x64_W82.vhd (hd%mydisk%)\nmap --hook\nroot (hd%mydisk%,0)\nchainloader /bootmgr\n```\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209726",
      "timestamp": "2019-03-10T19:24:10+00:00",
      "author": "karyonix",
      "content": "@alacran  \n@Wonko the Sane  \n\nHow about map mem as (hd1) and WIM-containing drive as (hd0). This will make sure WIM-containing drive is not hidden.  \n\n```\ntitle W10x64_S3_1D.vhd - SVBus RAMDISK - 2048 MB - map for WIMBOOT\nfind --set-root --ignore-floppies /W10x64_S3_1D.vhd\nmap --top --mem /W10x64_S3_1D.vhd (hd1)\n# read saved_drive\nset /a drive\u003d*0x82A0\u00260xFF\nmap (%drive%) (hd0)\nmap --hook\nroot (hd1,0)\nchainloader /bootmgr\n```\n\nor  \nmem as (hd0) and WIM-containing drive as (hd1).  \n\n```\ntitle W10x64_S3_1D.vhd - SVBus RAMDISK - 2048 MB - map for WIMBOOT\nfind --set-root --ignore-floppies /W10x64_S3_1D.vhd\nmap --top --mem /W10x64_S3_1D.vhd (hd0)\n# read saved_drive\nset /a drive\u003d*0x82A0\u00260xFF\nmap (%drive%) (hd1)\nmap --hook\nroot (hd0,0)\nchainloader /bootmgr\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "209727",
      "timestamp": "2019-03-10T20:47:05+00:00",
      "author": "alacran",
      "content": "@ Wonko\n\n\u003e @alacran\n\u003e\n\u003e Of course if needed increasing the disk number, i.e.:\n\u003e\n\u003e ```\n\u003e\n\u003e title W10x64_W82.vhd - SVBus  RAMDISK  - 2048 MB - map as disk+1\n\u003e find --set-root --ignore-floppies /W10x64_W82.vhd\n\u003e root | set myroot\u003d\n\u003e set mydisk\u003d%myroot:~3,1%\n\u003e map --top --mem /W10x64_W82.vhd (hd%mydisk%)\n\u003e map --hook\n\u003e root (hd%mydisk%,0)\n\u003e chainloader /bootmgr\n\u003e ```\n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\u003e\n\u003e Wonko\n\nOnce again you had the answer.\n\nThis **map as disk+1** worked fine, thanks, I think now having it working as it should be, will be easier for wimb to code this grub4dos menu lines into UEFI_MULTI\n\n**EDIT:** JFYI VHD and wim file on this PC are located on internal MBR HD (hd1,5).\n\nHaven\u0027t tested on another PC where VHD and wim file are located on internal MBR HD (hd0,6), but I don\u0027t see any reason to fail.\n\nalacran\n\n"
    },
    {
      "id": "209728",
      "timestamp": "2019-03-10T21:01:59+00:00",
      "author": "alacran",
      "content": "@ karyonix\n\n\u003e @alacran  \n\u003e @Wonko the Sane  \n\u003e\n\u003e How about map mem as (hd1) and WIM-containing drive as (hd0). This will make sure WIM-containing drive is not hidden.\n\u003e\nThanks very much for your interest in trying to help in this subject.\n\nTested first Wonko suggestion and it worked fine, haven\u0027t tested any of your suggestions since the problem seems solved.\n\nOn the other hand IMHO it is better to deal only with one variable (the VHD location) than two (the VHD location + the souce wim file location) since the number of possible combinations will be increased. Anyway that\u0027s only my opinion as user, I am not the developer of UEFI_MULTI, wimb will have to take all decisions.\n\nalacran\n\n"
    },
    {
      "id": "209731",
      "timestamp": "2019-03-11T10:30:27+00:00",
      "author": "Wonko the Sane",
      "content": "@alacran  \n@karyonix  \nI don\u0027t know. ![:huh:](http://reboot.pro/public/style_emoticons/default/huh.png)  \nwimb reported something, and then reported that that same something once automated in grub4dos didn\u0027t work, and that something else (automated in grub4dos) worked, then alacran reported yet something else, and that yet something else once automated in grub4dos worked, now you propose yet another something.  \n\nAs said I suspect that different BIOSes may number disks differently (or that how many disks are present in a given system may make a difference) and I am ++pretty sure++ that reports are either incorrect or partial or \"a suffusion of yellow\" ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)  \n\n@alacran  \nWhat you reported makes no sense.  \nThe snippet I posted was an **example** to let you make tests, it cannot possibly work as \"disk+1\" because I simply (intentionally) did NOT increase the disk number, and ONLY showed a way to have the disk number.  \nLet\u0027s see together the posted snippet:\n\u003e title W10x64_W82.vhd - SVBus RAMDISK - 2048 MB - map as disk+1  \n\u003e find --set-root --ignore-floppies /W10x64_W82.vhd \\\u003c- let\u0027s say that the .vhd is on disk 1 (hd1,0)  \n\u003e root \\| set myroot\u003d \\\u003c- root and thus myroot value is (hd1,0) Filesystem type bla bla bla ...  \n\u003e set mydisk\u003d%myroot:\\~3,1% \\\u003c- mydisk value becomes 1  \n\u003e map --top --mem /W10x64_W82.vhd (hd%mydisk%) \\\u003c- this becomes map --top --mem /W10x64_W82.vhd (hd1)  \n\u003e map --hook  \n\u003e root (hd%mydisk%,0) \\\u003c- this becomes root (hd1,0)  \n\u003e chainloader /bootmgr\n\n\u003cbr /\u003e\n\nNow this actually makes \"disk+1\":  \n\u003e title W10x64_W82.vhd - SVBus RAMDISK - 2048 MB - map as disk+1  \n\u003e find --set-root --ignore-floppies /W10x64_W82.vhd \\\u003c- let\u0027s say that the .vhd is on disk 1 (hd1,0)  \n\u003e root \\| set myroot\u003d \\\u003c- root and thus myroot value is (hd1,0) Filesystem type bla bla bla ...  \n\u003e set mydisk\u003d%myroot:\\~3,1% \\\u003c- mydisk value becomes 1  \n\u003e set /a mydisk\u003d%mydisk%+1 \\\u003c- mydisk value becomes 2  \n\u003e map --top --mem /W10x64_W82.vhd (hd%mydisk%) \\\u003c- this becomes map --top --mem /W10x64_W82.vhd (hd2)  \n\u003e map --hook  \n\u003e root (hd%mydisk%,0) \\\u003c- this becomes root (hd2,0)  \n\u003e chainloader /bootmgr\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209735",
      "timestamp": "2019-03-11T14:08:32+00:00",
      "author": "alacran",
      "content": "@ Wonko\n\n~~Yes there was a mistake on my previous test, I had duplicated the entrance used to test, sorry my mistake, see my menu.lst~~\n\n~~**EDIT: I thought I was selected the wrong title, but it was not the case. I was using this time **8.1x64-WB.vhd to run the test.****~~\n\n~~**After all I have found 8.1x64-WB.vhd do not matter what hd we map it Ramboots anyway, see post No. 170 for detailed tests.**~~\n\nAll this were wrong assumtions generated because files are located on a drive diferent to hd0 and on this case then this applies:\n\n**Mapped drive number has to be the drive number of files location **+/- 1**.**\n\nSee: [http://reboot.pro/to...er/#entry209844](http://reboot.pro/topic/21968-more-deeper-understanding-of-mapped-drive-number-for-rambooting-wimboot-vhds-from-internal-hd-using-grub4dos-svbus-driver/#entry209844 \"\")  \n\n[http://reboot.pro/to...er/#entry209846](http://reboot.pro/topic/21968-more-deeper-understanding-of-mapped-drive-number-for-rambooting-wimboot-vhds-from-internal-hd-using-grub4dos-svbus-driver/#entry209846 \"\")  \n\nBut the only condition that can satisfy all cases is:\n\n**Mapped drive number has to be the drive number of files location + 1.**\n\nSee: [http://reboot.pro/to...er/#entry209851](http://reboot.pro/topic/21968-more-deeper-understanding-of-mapped-drive-number-for-rambooting-wimboot-vhds-from-internal-hd-using-grub4dos-svbus-driver/#entry209851 \"\")\n\nalacran\n\n"
    },
    {
      "id": "209736",
      "timestamp": "2019-03-11T14:33:45+00:00",
      "author": "wimb",
      "content": "Thanks **alacran** for reporting issue with WIMBOOT menu.lst entry for the case of VHD + WIM located on internal harddisk and booting from RAMDISK.\n\nI am working now on other computer and have similar issue as you reported.\n\nThanks to **Wonko** for giving elegant solution ![:worship:](http://reboot.pro/public/style_emoticons/default/worship.gif) which is working here OK for that other computer.\n\nNext week I will be able to test on my original computer, but hopefully the menu.lst code will be good for that case too.\n\nThanks **karyonix** for help in finding a solution, but I think the code given by **Wonko** can be used quite well.\n\n"
    },
    {
      "id": "209741",
      "timestamp": "2019-03-11T16:01:00+00:00",
      "author": "alacran",
      "content": "@Wonko\n\n@ wimb\n\nWell, after some more extensive tests this are my findings:\n\n**After all, my previous report was correct. I thought I was selected the wrong title, but it was not the case.**\n\nHaving VHD and source wimboot wim file on (hd1,5)\n\n**8.1x64-WB.vhd do not matter what hd we map it Ramboots anyway, as on:**\n\n```\ntitle 8.1x64-WB.vhd - SVBus  RAMDISK  - 1024 MB - map for WIMBOOT root (hd0,0)\nfind --set-root --ignore-floppies /8.1x64-WB.vhd\nmap --top --mem /8.1x64-WB.vhd (hd1)\nmap --hook\nroot (hd0,0)\nchainloader /bootmgr\n\ntitle 8.1x64-WB.vhd - SVBus  RAMDISK  - 1024 MB - map for WIMBOOT root (hd2,0)\nfind --set-root --ignore-floppies /8.1x64-WB.vhd\nmap --top --mem /8.1x64-WB.vhd (hd2)\nmap --hook\nroot (hd2,0)\nchainloader /bootmgr\n\nAlso on wonko codes:\n\ntitle 8.1x64-WB.vhd - SVBus RAMDISK - 1024 MB - map as disk+1 (FAKE)\nfind --set-root --ignore-floppies /8.1x64-WB.vhd\nroot | set myroot\u003d\nset mydisk\u003d%myroot:~3,1%\nmap --top --mem /8.1x64-WB.vhd (hd%mydisk%)\nmap --hook\nroot (hd%mydisk%,0)\nchainloader /bootmgr\n\ntitle 8.1x64-WB.vhd - SVBus  RAMDISK  - 1024 MB - map as disk+1 (RIGHT)\nfind --set-root --ignore-floppies /8.1x64-WB.vhd\nroot | set myroot\u003d\nset /a mydisk\u003d%mydisk%+1 \nmap --top --mem /8.1x64-WB.vhd (hd%mydisk%)\nmap --hook\nroot (hd%mydisk%,0)\nchainloader /bootmgr\n```\n\n**But 10x64-WB.vhd is another beast, it only Ramboots on this titles:**\n\n```\ntitle 10x64-WB.vhd - SVBus  RAMDISK  - 1536 MB - map for WIMBOOT root (hd2,0)\nfind --set-root --ignore-floppies /10x64-WB.vhd\nmap --top --mem /10x64-WB.vhd (hd2)\nmap --hook\nroot (hd2,0)\nchainloader /bootmgr\n\nOr Wonko code:\n\ntitle 10x64-WB.vhd - SVBus  RAMDISK  - 1536 MB - map as disk+1 (RIGHT)\nfind --set-root --ignore-floppies /10x64-WB.vhd\nroot | set myroot\u003d\nset /a mydisk\u003d%mydisk%+1 \nmap --top --mem /10x64-WB.vhd (hd%mydisk%)\nmap --hook\nroot (hd%mydisk%,0)\nchainloader /bootmgr\n\n```\n\nAnd DO NOT run on following:\n\n```\ntitle 10x64-WB.vhd - SVBus  RAMDISK  - 1536 MB - map for WIMBOOT root (hd1,0)\nfind --set-root --ignore-floppies /10x64-WB.vhd\nmap --top --mem /10x64-WB.vhd (hd1)\nmap --hook\nroot (hd1,0)\nchainloader /bootmgr\n\nOr Wonko code:\n\ntitle 10x64-WB.vhd - SVBus RAMDISK - 1536 MB - map as disk+1 (FAKE)\nfind --set-root --ignore-floppies /10x64-WB.vhd\nroot | set myroot\u003d\nset mydisk\u003d%myroot:~3,1%\nmap --top --mem /10x64-WB.vhd (hd%mydisk%)\nmap --hook\nroot (hd%mydisk%,0)\nchainloader /bootmgr\n\n```\n\nThen the option to satisfy 10 also satisfy 8 , and it is:\n\n\u003e **So we may say for RamBooting a VHD from internal disks, we need to use hd number (according to grub4dos) where VHD is located + 1 in our menu.lst for grub4dos RamBoot.**\n\nAs said on [post No. 162](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-7#entry209719 \"\")\n\nalacran\n\n"
    },
    {
      "id": "209742",
      "timestamp": "2019-03-11T16:03:03+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Thanks **karyonix** for help in finding a solution, but I think the code given by **Wonko** can be used quite well.\n\nTo be fair, my code is (I believe) more readable, as it uses the common grub4dos convention of (hd0) first disk, (hd1) second disk, etc., BUT falls short in case (rare) there are more than 10 disks (i.e. any disk higher than (hd9)).\n\nThe code by karyonix uses the BIOS disk number, i.e. (128) first disk, (129) second disk, etc. and has not the same (not common to happen in practice) issue as mine.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209743",
      "timestamp": "2019-03-11T16:37:13+00:00",
      "author": "wimb",
      "content": "@alacran\n\nThe code given by **Wonko** and according to my tests working OK contains the**two** lines\n\n```\nset mydisk\u003d%myroot:~3,1%\nset /a mydisk\u003d%mydisk%+1\n\n```\n\nwheras you published in [post #170](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209741 \"\") only one of these lines, so it is difficult to decide which code you have found to be working ok and which one fails and why it fails\n\nMay be a typing error ?\n\n"
    },
    {
      "id": "209746",
      "timestamp": "2019-03-11T17:11:37+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e @alacran\n\u003e\n\u003e The code given by **Wonko** and according to my tests working OK contains the**two** lines\n\u003e\n\u003e ```\n\u003e\n\u003e set mydisk\u003d%myroot:~3,1%\n\u003e set /a mydisk\u003d%mydisk%+1\n\u003e\n\u003e ```\n\u003e\n\u003e wheras you published in [post #170](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209741 \"\") only one of these lines, so it is difficult to decide which code you have found to be working ok and which one fails and why it fails\n\u003e\n\u003e May be a typing error ?\n\nAnd - not so surprisingly - we can make those a single line:\n\n```\nset /a mydisk\u003d%myroot:~3,1%+1\n```\n\nthough what alacran posted:\n\n```\nroot | set myroot\u003d\nset /a mydisk\u003d%mydisk%+1\n```\n\ncannot actually work (again typos/copy\\\u0026paste error/whatever. ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)\n\nmydisk is NOT DEFINED\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "209748",
      "timestamp": "2019-03-11T17:24:43+00:00",
      "author": "alacran",
      "content": "@ wimb\n\nIn fact I deleted: **set mydisk\u003d%myroot:\\~3,1%**\n\nAnd only used.\n\ntitle 10x64-WB.vhd - SVBus RAMDISK - 1536 MB - map as disk+1 (RIGHT-1)  \nfind --set-root --ignore-floppies /10x64-WB.vhd  \nroot \\| set myroot\u003d  \nset /a mydisk\u003d%mydisk%+1  \nmap --top --mem /10x64-WB.vhd (hd%mydisk%)  \nmap --hook  \nroot (hd%mydisk%,0)  \nchainloader /bootmgr\n\nAnd it worked fine, I deleted intentionally the line, thinking it was not required in my case.\n\nFrom Wonko post:\n\n\u003e title W10x64_W82.vhd - SVBus RAMDISK - 2048 MB - map as disk+1  \n\u003e find --set-root --ignore-floppies /W10x64_W82.vhd \\\u003c- let\u0027s say that the .vhd is on disk 1 (hd1,0)  \n\u003e root \\| set myroot\u003d \\\u003c- root and thus myroot value is (hd1,0) Filesystem type bla bla bla ...  \n\u003e set mydisk\u003d%myroot:\\~3,1% \\\u003c- mydisk value becomes 1  \n\u003e set /a mydisk\u003d%mydisk%+1 \\\u003c- mydisk value becomes 2  \n\u003e map --top --mem /W10x64_W82.vhd (hd%mydisk%) \\\u003c- this becomes map --top --mem /W10x64_W82.vhd (hd2)  \n\u003e map --hook  \n\u003e root (hd%mydisk%,0) \\\u003c- this becomes root (hd2,0)  \n\u003e chainloader /bootmgr\n\nI understud it this way:\n\n1 - Use: **set mydisk\u003d%myroot:\\~3,1%** \\\u003c- mydisk value becomes 1 -----------------\\\u003e If you want actual hd where VHD is located\n\n2 - Use: **set /a mydisk\u003d%mydisk%+1** \\\u003c- mydisk value becomes 2 ----------------\\\u003e If you want actual hd where VHD is located + 1\n\nSince from: **root \\| set myroot\u003d**\\\u003c- root and thus myroot value is (hd1,0) Filesystem type bla bla bla ------\\\u003e we are rooted on hd where VHD is located.\n\nAnyway I already tested again without and with the line I errased, (just as Wonko example) and both ways Ramboot fine, it seems to me line 2 overwrites line 1.\n\nalacran\n\n"
    },
    {
      "id": "209749",
      "timestamp": "2019-03-11T18:01:36+00:00",
      "author": "wimb",
      "content": "\u003e In fact I deleted: **set mydisk\u003d%myroot:\\~3,1%**\n\u003e\n**Wonko** is right in saying that in that case mydisk is undefined as used in your menu.lst entry.\n\nThe single line that **Wonko** [proposes](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209746 \"\") is OK.\n\nTomorrow I will do some more testing ....\n\n"
    },
    {
      "id": "209751",
      "timestamp": "2019-03-11T18:20:16+00:00",
      "author": "alacran",
      "content": "I understand now I should not have deleted that line, but the funny thing is: it runs even without it.\n\nI\u0027m totally agree with you about single line, I also like better that way. I\u0027ll start using it since now.\n\nI\u0027ll run some test on several diferent machines I have at home and let you know, just to discart some potential troubles caused by any stupid Bios.\n\nSee you latter\n\n"
    },
    {
      "id": "209753",
      "timestamp": "2019-03-11T19:36:20+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e **Wonko** is right in saying that in that case mydisk is undefined as used in your menu.lst entry.\n\nWell, Wonko is right *by definition* . :wink:  \n\nThe ***fun*** fact is actually that  \n\n```\n\nset /a mydisk\u003d%mydisk%+1\n```\n\nwith mydisk UNDEFINED results in:  \n\n```\n\nset mydysk\nmydisk\u003d0\n```\n\n(which is clearly a \"quirk\" in grub4dos)  \n\nSo (unless mydisk is defined earlier the result of:  \n\n\u003e find --set-root --ignore-floppies /10x64-WB.vhd  \n\u003e root \\| set myroot\u003d  \n\u003e set /a mydisk\u003d%mydisk%+1  \n\u003e map --top --mem /10x64-WB.vhd (hd%mydisk%)  \n\u003e map --hook  \n\u003e root (hd%mydisk%,0)  \n\u003e chainloader /bootmgr\nis actually same as:  \n\u003e find --set-root --ignore-floppies /10x64-WB.vhd  \n\u003e map --top --mem /10x64-WB.vhd (hd0)  \n\u003e map --hook  \n\u003e root (hd0,0)  \n\u003e chainloader /bootmgr\n\nand we are back to square #1, after all these posts I cannot make head or tail of the reports both alacran and wimb made. ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif)  \n\nThe sheer fact that both of you insist on adding lines to menu.lst entries and blindly running them (as opposed to running commands on command line, checking the values variables get, etc.) is mindboggling (of course in my perverted mind)   \n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)  \nWonko   \n"
    },
    {
      "id": "209754",
      "timestamp": "2019-03-11T19:51:14+00:00",
      "author": "karyonix",
      "content": "There is internal variable @root, so you can remove this line and use @root instead of myroot.  \n\n```\nroot | set myroot\u003d\n```\n\nThis can handle the cases where hd number is 1 digits.  \n\n```\nset /a mydisk\u003d%@root:~3,1%+1\n```\n\nWhat happens if root hd number is more than 1 digit.  \nroot is (hd10,0)..(hd19,0) \u003d\\\u003e mydisk\u003d2  \nroot is (hd20,0)..(hd29,0) \u003d\\\u003e mydisk\u003d3  \nroot is (hd90,0)..(hd99,0) \u003d\\\u003e mydisk\u003d10  \nroot is (hd100,0)..(hd127,0) \u003d\\\u003e mydisk\u003d2  \nIt will override one of (hd2)..(hd10) but it should be OK because mydisk will not be equal to root hd number.  \n\nIf you really want to calculate mydisk \u003d root_hd_number+1, this handle the case where root hd number is 1 to 3 digit. hd number overflows at 128.  \nThis will not be used but since I have already think about it, I write it here as an example.  \n\n```\nif _%@root:~4,1%\u003d\u003d_, set /a mydisk\u003d%@root:~3,1%+1 || if _%@root:~5,1%\u003d\u003d_, set /a mydisk\u003d%@root:~3,2%+1 || set /a mydisk\u003d%@root:~3,3%+1\n```\n\n\u003cbr /\u003e\n\nThere is (hd) which means next available driver number for hard drive. You can use together with (hd-1) (last existing harddrive). (ref : [rmprebusb](https://www.rmprepusb.com/tutorials/grub4dos/grub4dos-internal-variables-and-functions#TOC-Mapping-a-new-hard-disk \"External link\"))  \nMap as (hd), then, after hook, it becomes (hd-1).  \nYou don\u0027t have to use set, variable, string manipulation, calculation. It looks simple.  \n\n```\ntitle win.vhd map next to last hd\nfind --set-root --ignore-floppies /win.vhd\nmap --mem --top /win.vhd (hd)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "209755",
      "timestamp": "2019-03-11T22:39:04+00:00",
      "author": "alacran",
      "content": "\u003e The sheer fact that both of you insist on adding lines to menu.lst entries and blindly running them (as opposed to running commands on command line, checking the values variables get, etc.) is mindboggling (of course in my perverted mind)   \n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)  \n\u003e Wonko\n\u003e\nI already know since long time ago this is your prefered way to work.\n\nI can\u0027t talk for wimb, but in my case using an Spanish keyboard is a nightmare try to type something on grub4dos command line, even if it takes more time and more reboots it is easier for me to make changes to a menu.lst title on running OS, or WinPE.\n\nalacran\n\n"
    },
    {
      "id": "209759",
      "timestamp": "2019-03-12T08:06:15+00:00",
      "author": "wimb",
      "content": "\u003e There is (hd) which means next available driver number for hard drive. You can use together with (hd-1) (last existing harddrive). (ref : [rmprebusb](https://www.rmprepusb.com/tutorials/grub4dos/grub4dos-internal-variables-and-functions#TOC-Mapping-a-new-hard-disk \"External link\"))  \n\u003e Map as (hd), then, after hook, it becomes (hd-1).  \n\u003e You don\u0027t have to use set, variable, string manipulation, calculation. It looks simple.  \n\u003e\n\u003e ```\n\u003e title win.vhd map next to last hd\n\u003e find --set-root --ignore-floppies /win.vhd\n\u003e map --mem --top /win.vhd (hd)\n\u003e map --hook\n\u003e root (hd-1,0)\n\u003e chainloader /bootmgr\n\u003e ```\n\nThanks for interesting solution using mapping as (hd), which is working here ok. :smile:\n\nI have tested on one (not my own) computer, but next week I will be able to test on my own computer.\n\n"
    },
    {
      "id": "209762",
      "timestamp": "2019-03-12T09:46:11+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I already know since long time ago this is your prefered way to work.  \n\u003e\n\u003e I can\u0027t talk for wimb, but in my case using an Spanish keyboard is a nightmare try to type something on grub4dos command line, even if it takes more time and more reboots it is easier for me to make changes to a menu.lst title on running OS, or WinPE.  \n\u003e\n\u003e alacran\nIf you cannot memorize the English keyboard \"by touch\", just Â§@Ã§#ing create a Spanish keyboard layout file and use it ![:frusty:](http://reboot.pro/public/style_emoticons/default/frusty.gif) :  \n[http://reboot.pro/to...eyboard-layout/](http://reboot.pro/topic/8056-keyboard-layout/ \"\")  \n[http://reboot.pro/to...layout/?p\u003d68522](http://reboot.pro/topic/8056-keyboard-layout/?p\u003d68522 \"\")  \nAs expected at the time, after the initial interest, the whole thing \"faded away\" into oblivion, maybe this is the occasion to re-vamp the spreadsheet I made. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)  \n\n\u003cbr /\u003e\n\n@karyonix  \nAs always your is the \"correct\" approach :smile:, though I still wonder if this is what is actually \"required\" and \"why\" it is actually required. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \nI mean, it seems like all is needed is that the vhd is mapped to a \"non-existing-till-then\" hard disk number.  \nAnd the report by alacran with the \"undefined\" variable (resulting in (hd0)) working remains puzzling.  \n\nAnyway, one could well use a \"high\" (and \"fixed\") disk number - say - (hd27) or (hd31) and be done with it?  \n\nUnless I am mistaken, (hd31) should be the last \"hard disk\" mappable, (hd32) is a CD-like device.  \n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)  \nWonko   \n"
    },
    {
      "id": "209763",
      "timestamp": "2019-03-12T10:38:52+00:00",
      "author": "steve6375",
      "content": "Easy2Boot contains a number of keyboard scan code translation files for different languages, including Spanish, in the \\\\_ISO\\\\e2b\\\\grub folder.\n\n"
    },
    {
      "id": "209764",
      "timestamp": "2019-03-12T12:25:53+00:00",
      "author": "alacran",
      "content": "\u003e @karyonix  \n\u003e As always your is the \"correct\" approach :smile:, though **I still wonder if this is what is actually \"required\" and \"why\" it is actually required.** ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\u003e I mean, it seems like all is needed is that the vhd is mapped to a \"non-existing-till-then\" hard disk number.  \n\u003e And the report by alacran with the \"undefined\" variable (resulting in (hd0)) working remains puzzling.  \n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)  \n\u003e Wonko\n\nYes it is required, WinSetup itself creates an internal BCD that we latter will use when Rambooting.\n\nWimb program only thing does to it is made some changes (all this can be seen/done on BootIce BCD tab easy mode) to adaptate it as: select Test Mode (testsingning), detect Hal and Kernell, select Optim, select No integrity Checks (not mandatory, it is mandatory for WinPE boot wims) and Unselecting Metro Boot Manager, some changes are required to let us install and boot using the unsingned SVBus driver, and also on BootIce BCD tab professional mode it verifies/changes BootMenuPolicy to legacy if required.\n\nAttached two images from BCDs located into the VHD:\n\nOn **10 VHD on internal HD.png** (VHD located on internal hd1), when VHD is loaded on Ram during Ramboot it becomes virtual hd2.\n\nOn **10 VHD on external HD.png** (VHD located now on external USB disk hd2) the external USB disk adds another device before yet Rambooting so now VHD is located on hd2, then when Rambooting and VHD is loaded on Ram it becomes virtual hd3.\n\nThen if the 10 VHD is not loaded on Ram on the right hd it can\u0027t find this path: \\\\Windows\\\\system32\\\\winload.exe to boot.\n\nAbout:\n\u003e\n\u003e And the report by alacran with the \"undefined\" variable (resulting in (hd0)) working remains puzzling.\n\nI perfectly understand you are right reading and interpreting the instructions but the fact is the 10 VHD had to be loaded in Ram on the right hd since if not it can\u0027t boot. You may try to load it directly to the hd0 and it won\u0027t work, wimb have tested this since the first time as this was the clasical/obvious option to start with.\n\nI have found on grub4dos, because on my frecuent misstyping of commands several cases where the program should not do something because latter i found it has a wrong syntax, but it does do the action fine, don\u0027t ask me why, it is obviously caused because the program itself allows it, this is not the place to talk about all this cases, but maybe I start a diferent thread about this latter.\n\nRight now the important subject is the right/proper command to use. And I can say karyonix command is very clear and easy to remember and it works fantastic on my tests on 10 VHDs.\n\nThis is a winner:\n\n```\ntitle win.vhd map next to last hd\nfind --set-root --ignore-floppies /win.vhd\nmap --mem --top /win.vhd (hd)\nmap --hook\nroot (hd-1,0)\nchainloader /bootmgr\n```\n\nBest Regards\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![10 VHD on internal HD.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-33622000-1552394425_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-33622000-1552394425.png \"10 VHD on internal HD.png - Size: 25.54KB\"){#ipb-attach-url-16504-0-88568700-1676066389}\n* [![10 VHD on external HD.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-01807900-1552394442_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-01807900-1552394442.png \"10 VHD on external HD.png - Size: 26.21KB\"){#ipb-attach-url-16505-0-88577900-1676066389}\n\n"
    },
    {
      "id": "209765",
      "timestamp": "2019-03-12T12:35:41+00:00",
      "author": "alacran",
      "content": "@steve6375\n\n\u003e Easy2Boot contains a number of keyboard scan code translation files for different languages, including Spanish, in the \\\\_ISO\\\\e2b\\\\grub folder.\n\nI have your Great Tool on my arsenal, and I think is the file KBD_SPANISH.G4B\n\nNow, please tell me how I select on grub4dos to use the spanish keyboard (command to run this file).\n\nalacran\n\n"
    },
    {
      "id": "209766",
      "timestamp": "2019-03-12T12:39:58+00:00",
      "author": "steve6375",
      "content": "It is a grub4dos batch file - so just run it from grub4dos\n\n"
    },
    {
      "id": "209767",
      "timestamp": "2019-03-12T13:01:05+00:00",
      "author": "steve6375",
      "content": "re. 10 VHD on external USB - so if you try using that grub4dos menu on a different system with a different number of hard disks - does it boot?\n\n"
    },
    {
      "id": "209770",
      "timestamp": "2019-03-12T14:15:09+00:00",
      "author": "karyonix",
      "content": "\u003e As always your is the \"correct\" approach :smile:, though I still wonder if this is what is actually \"required\" and \"why\" it is actually required. ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)  \n\u003e I mean, it seems like all is needed is that the vhd is mapped to a \"non-existing-till-then\" hard disk number.\nI guess the requirement that is not met in some recent failure reports is \"WIM file must be accessible to boot loader\" (via INT13H in legacy BIOS mode).  \nIf drive number of the WIM-containing drive is mapped to RAMDISK, WIM-containing drive and WIM file would be inaccessible.  \nRAMDISK should have drive number different form WIM-containing drive.  \nA \"non-existing-till-then\" hard disk number is a sufficient condition but not a necessary condition.  \n\u003e And the report by alacran with the \"undefined\" variable (resulting in (hd0)) working remains puzzling.\nIn that test, WIM file is in a drive other than (hd0), so it is still accessible.  \n\nIf WIM is in (hd0), and you simply make RAMDISK as (hd0), it would fail. But there is still a way to resolve the situation by mapping WIM-containing drive as (hd1), so it becomes visible.  \n\nThese are unproven. It remains to be tested.   \n"
    },
    {
      "id": "209771",
      "timestamp": "2019-03-12T15:08:31+00:00",
      "author": "alacran",
      "content": "\u003e re. 10 VHD on external USB - so if you try using that grub4dos menu on a different system with a different number of hard disks - does it boot?\n\nYes, I have tested it on PCs with 1 and 2 internal HDs and wimb on his PC with 3 internal HDs.\n\n"
    },
    {
      "id": "209772",
      "timestamp": "2019-03-12T15:10:20+00:00",
      "author": "steve6375",
      "content": "The question was - if you use exactly the same grub4dos menu and exactly the same VHD, can you boot it on many different systems which have a different number of internal hard disks?\n\n"
    },
    {
      "id": "209773",
      "timestamp": "2019-03-12T15:21:45+00:00",
      "author": "alacran",
      "content": "\u003e The question was - if you use exactly the same grub4dos menu and exactly the same VHD, can you boot it on many different systems which have a different number of internal hard disks?\n\n~~NO, the VHD needs to load drivers and it fails (if VHD is too small), you can use same wimboot source, but VHD needs to be rebuild if hardware is diferent.~~\n\n**EDIT:** It seems it is solved now, see this post: [http://reboot.pro/to...e-8#entry209810](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-8#entry209810 \"\")\n\nThe menu works on diferent number of internal drives.\n\nQuote from wimb\n\n\u003e For **Portability** it is good to have two VHD\u0027s  \n\u003e - On couple of other machines boot first with **10 GB VHD** WIMBOOT as **FILEDISK** from Boot Manager Menu and let Win10 Install all drivers  \n\u003e - At Home After booting with Win10 x64 OS then CAPTURE WIM of 10 GB VHD - Format and APPLY WIM on 1 or 2 GB VHD  \n\u003e - Next time Boot with **1-2 GB VHD** WIMBOOT on USB with Grub4dos menu from **RAMDISK** on all other machines  \n\u003e The 1 GB VHD will be handy for booting from RAMDISK on 4GB RAM machines, but in other cases a 2 GB VHD is preferred  \n\u003e In this way you have some learning on a couple of machines, but then the WIM has improved and can be used on all machines ....  \n\u003e That principle of learning, where the SYSTEM registry is improving, is already working since the days of Windows e**XP**erience\n\n"
    },
    {
      "id": "209774",
      "timestamp": "2019-03-12T15:30:20+00:00",
      "author": "steve6375",
      "content": "OK - in post #183, you are setting the BCD in BootIce to boot from a disk, not from RAM or VHD.\n\nHave you tried changing it to RAM or VHD?\n\n"
    },
    {
      "id": "209775",
      "timestamp": "2019-03-12T15:39:38+00:00",
      "author": "alacran",
      "content": "In post 183 all talk is about Ramboot and the 2 pictures are of the BCDs located into the OS contained into the VHD, those BCDs are called by bootmanager to boot the VHD that is allready loaded on Ram.\n\nPlease read it again carefully.\n\ntitle win.vhd map next to last hd  \nfind --set-root --ignore-floppies /win.vhd  \nmap --mem --top /win.vhd (hd)  \nmap --hook  \nroot (hd-1,0)  \nchainloader /bootmgr \\\u003e\\\u003e\\\u003e\\\u003e\\\u003e This is the bootmanager allready loaded on Ram.\n\n\u003e On **10 VHD on internal HD.png** (VHD located on internal hd1), when VHD is loaded on Ram during Ramboot it becomes virtual hd2.\n\u003e\n\u003e On **10 VHD on external HD.png** (VHD located now on external USB disk hd2) the external USB disk adds another device before yet Rambooting so now VHD is located on hd2, then when Rambooting and VHD is loaded on Ram it becomes virtual hd3.\n\n"
    },
    {
      "id": "209776",
      "timestamp": "2019-03-12T15:42:14+00:00",
      "author": "wimb",
      "content": "There is a new version of [UEFI MULTI](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")[](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")available with new **Grub4dos** **SVBus [menu entries](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/page-7#entry209572 \"\")**\n\nThanks to **karyonix** for [solution](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209754 \"\") to use map as (hd) for WIMBOOT ![:worship:](http://reboot.pro/public/style_emoticons/default/worship.gif) More Info [here](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d209770 \"\")\n\n"
    },
    {
      "id": "209777",
      "timestamp": "2019-03-12T15:54:03+00:00",
      "author": "wimb",
      "content": "\u003e The question was - if you use exactly the same grub4dos menu and exactly the same VHD, can you boot it on many different systems which have a different number of internal hard disks?\n\nThe answer is YES, but you need sufficient FREE space inside the VHD for drivers to be loaded for the new hardware, but the grub4dos menu works on systems with variable configuration.\n\nAfter booting 10-15 GB VHD as **FILEDISK** and having installed drivers on various equipment,\n\nyou can re-gain FREE space by doing **CAPTURE - Format - APPLY** sequence on the VHD.\n\nThe WIM file then contains all driver files instead of the VHD and you are able also to install that improved Vwim file on small 2 GB VHD.\n\nWIMBOOT Capture of Full Win10x64 and Applied on VHD, occupies in VHD only 200 MB at rest, but on booting about 600 MB.\n\nFor booting from RAMDISK then a small 2 GB VHD is desired, which has limited space to install new drivers on unknown hardware.\n\n"
    },
    {
      "id": "209793",
      "timestamp": "2019-03-13T17:50:31+00:00",
      "author": "alacran",
      "content": "@wimb\n\nJust to let you know here all is working fine now, still trying on some other PCs, if I find any trouble I\u0027ll let you know ASAP.\n\nalacran\n\n"
    },
    {
      "id": "209810",
      "timestamp": "2019-03-14T10:29:05+00:00",
      "author": "alacran",
      "content": "Please see this post: [http://reboot.pro/to...hd/#entry209809](http://reboot.pro/topic/21957-making-the-smallest-win10-install-wimboot-mode-on-512-mb-vhd/#entry209809 \"\")\n\n\u003e **Portability seems to be feasible without the learning process, of course we need more test on more PCs to confirm this in a total way.**\n\nalacran\n\n"
    },
    {
      "id": "210049",
      "timestamp": "2019-03-22T10:34:26+00:00",
      "author": "wimb",
      "content": "**VHD_WIMBOOT - Apply and Capture of WIM Files for OS in VHD**\n\n**Download** - coming later\n\n[![VHD_WIMBOOT-2019-03-22_095511.png](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-88133300-1553250747_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-88133300-1553250747.png \"VHD_WIMBOOT-2019-03-22_095511.png - Size: 12.17KB\"){#ipb-attach-url-16547-0-88584000-1676066389} \u003d\u003d [![VHD_WIMBOOT-2019-03-22_095752.png](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-46644900-1553250773_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-46644900-1553250773.png \"VHD_WIMBOOT-2019-03-22_095752.png - Size: 14.11KB\"){#ipb-attach-url-16548-0-88592400-1676066389}\n\n"
    },
    {
      "id": "210051",
      "timestamp": "2019-03-22T15:49:06+00:00",
      "author": "alacran",
      "content": "I used to test my 10x64-WB-LZX.wim (2.92 GB LZX compressed), VHD build was made on USB SSD drive using Win7 (just to test) without any issue.\n\nMy friend, I\u0027m sorry to tell you all BCD(s) are wrong, no Ramboot, no bootmanager boot. But I thing it will be easy for you to fix this.\n\nBut **after fixing the BCDs my W10x64_MX_1.vhd Rambooted very fine.**\n\nWell, after the report, let me tell you to make this tool was a very good idea, all is done with one single tool (fool prof).\n\nIt was also a good idea to find the OS lang and apply it to VHD name and BCDs.\n\n**I noticed VHD_WIMBOOT\\\\makebt\\\\WimBootCompress.ini, I assume it is not hard coded into your program, and there is only a call to it, because sometime we may need to edit it, is that right?**\n\nAlso let me suggest some additions to your program:\n\n**Add \"Wimboot capture using LZX compression\" as optional** - it saves a lot of room, (20 % less) see: [http://reboot.pro/to...am/#entry210021](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-compression-to-save-room-and-also-load-faster-on-ram/#entry210021 \"\")\n\n**Add \"GZ compress the VHD\" as optional** - (only useful for Ramboot), it saves a lot of room (85 % less on my test with10x64-WB.vhd.gz) and improves loading times on Ram, (and very useful for backup pourposes too), you could use 7-zip Format: gzip, Compression Livel: Maximum, not Ultra as I did, it is not almost as good as Ultra but it is very much faster, see: [http://reboot.pro/to...am/#entry210031](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-compression-to-save-room-and-also-load-faster-on-ram/#entry210031 \"\")\n\nAttached BCDs pictures, the first tree are as per the program is making them now, the second tree are the corrected BCDs.\n\nBest Regards\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![BCD on Boot partition-Wrong.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-86965200-1553268713_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-86965200-1553268713.png \"BCD on Boot partition-Wrong.png - Size: 76.69KB\"){#ipb-attach-url-16549-0-88600300-1676066389}\n* [![BCD into VHD-Wrong.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-20836100-1553268929_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-20836100-1553268929.png \"BCD into VHD-Wrong.png - Size: 74.99KB\"){#ipb-attach-url-16555-0-88605700-1676066389}\n* [![EFI BCD on Boot partition-Wrong.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-54261800-1553268899_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-54261800-1553268899.png \"EFI BCD on Boot partition-Wrong.png - Size: 76.51KB\"){#ipb-attach-url-16554-0-88610300-1676066389}\n* [![BCD on Boot partition-Right.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-40904900-1553268942_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-40904900-1553268942.png \"BCD on Boot partition-Right.png - Size: 76.37KB\"){#ipb-attach-url-16556-0-88614700-1676066389}\n* [![EFI BCD on Boot partition-Right.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-34467900-1553268955_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-34467900-1553268955.png \"EFI BCD on Boot partition-Right.png - Size: 78.19KB\"){#ipb-attach-url-16557-0-88618900-1676066389}\n* [![BCD into VHD- Right.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-07011000-1553268965_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-07011000-1553268965.png \"BCD into VHD- Right.png - Size: 75.75KB\"){#ipb-attach-url-16558-0-88623000-1676066389}\n\n"
    },
    {
      "id": "210053",
      "timestamp": "2019-03-22T16:36:51+00:00",
      "author": "wimb",
      "content": "I need to test in Win 7 OS, which might be the cause of the problem.\n\nCan you test in Windows 10 x64 OS and using XPRESS 4K ? That is what I used.\n\nThere are some strange things like Boot into WinPE, which setting is not done by my program.\n\nAlso the Internal BCD is certainly wrong as made in your case and working fine in my case when using Win10 x64 OS.\n\nThe WimBootCompress.ini file can be modified and is not hardcoded in the program, but the filename is hardcoded.\n\nThe LZX Compression can be added as option.\n\nGZ Compression has as disadvantage that you can only boot from RAMDISK.\n\nThat seems for me a matter of personal preference.\n\nI like to have files that boot as FILEDISK and as RAMDISK.\n\nBooting from RAMDISK is already very fast for the 1.5 GB, so the GZ Compression does not seem such an advantage.\n\nThanks for testing in Win 7 OS. I will try to fix it also for Win 7 OS\n\n"
    },
    {
      "id": "210060",
      "timestamp": "2019-03-22T17:33:39+00:00",
      "author": "alacran",
      "content": "Now this time running VHD_WIMBOOT_x64.exe from 10x64 Pro 1709, this are my findings:  \n\nSince the only one VHD not made in the USB SSD, this time copied 8.1x64-WB.wim to Wimboot folder and selected it to create the VHD:  \n\nVHD file was created with wrong name W10x64_ES_1.vhd, it should be W8.1x64_ES_1.vhd or 8.1x64_ES_1.vhd.  \n\nOn external legacy BCD (on Fat 32 drive): Wrong boot file, wrong OS name and wrong language.  \n\nOn external EFI BCD (on Fat 32 drive): Same as previous.  \n\nOn internal legacy BCD (on VHD drive): Wrong OS name and wrong language.  \n\nAlso on menu.lst wrong VHD name.\n\nBut anyway without fixing anything I decided to Ramboot the VHD and it booted very fine, **also confirmed this way it is in fact 8.1x64, without any dubt.**   \n\nalacran\n\n"
    },
    {
      "id": "210061",
      "timestamp": "2019-03-22T17:40:36+00:00",
      "author": "wimb",
      "content": "In other words:\n\nApparently the VHD was not given the name that it should have.\n\nBut given that filename, everything is as expected and booting is OK.\n\nCan you give me the makebt\\\\wim_info\\\\wiminfo.txt file for that Win 8.1 case ?\n\nThere is something not as expected in that file, so that parsing goes wrong.\n\n"
    },
    {
      "id": "210063",
      "timestamp": "2019-03-22T17:48:04+00:00",
      "author": "alacran",
      "content": "\u003e In other words:\n\u003e\n\u003e Apparently the VHD was not given the name that it should have.\n\u003e\n\u003e But given that filename, everything is as expected and booting is OK.\n\nWell yes, I only wanted to report item by item to let you know all was checked carefully, not only just reporting the first thing saw.\n\nalacran\n\n"
    },
    {
      "id": "210064",
      "timestamp": "2019-03-22T17:51:15+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e VHD file was created with wrong name W10x64_ES_1.vhd, it should be W8.1x64_ES_1.vhd or 8.1x64_ES_1.vhd.\n\nI would anyway advise against using a multidot file name, W81x64_ES_1.vhd would have BTW the same length of W10x64_ES_1.vhd\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "210065",
      "timestamp": "2019-03-22T17:54:49+00:00",
      "author": "wimb",
      "content": "\u003e I would anyway advise against using a multidot file name, W81x64_ES_1.vhd would have BTW the same length of W10x64_ES_1.vhd\n\u003e\nYes you are right. It is Microsoft that introduced this extra dot in the Name. So may be we need to remove it again ...\n\nI hope **alacran** can provide the makebt\\\\wim_info\\\\wiminfo.txt file so that I can see why parsing goes wrong in his case.\n\n"
    },
    {
      "id": "210069",
      "timestamp": "2019-03-22T19:04:34+00:00",
      "author": "alacran",
      "content": "Sure:\n\nSpoiler  \n\n```\nWIM Information:\n----------------\nPath:           K:\\Wimboot\\8.1x64-WB.wim\nGUID:           0x0dad0b8b5c4306f922b32ed59b1337c6\nVersion:        68864\nImage Count:    1\nCompression:    XPRESS\nChunk Size:     4096 bytes\nPart Number:    1/1\nBoot Index:     0\nSize:           4554505150 bytes\nAttributes:     Integrity info, Relative path junction\n\nAvailable Images:\n-----------------\nIndex:                  1\nName:                   8.1x64_190309_153621\nDescription:            L:/\nDisplay Name:           Windows 8.1 Pro\nDisplay Description:    Windows 8.1 Pro\nDirectory Count:        18208\nFile Count:             94293\nTotal Bytes:            13938063169\nHard Link Bytes:        5469458254\nCreation Time:          Sat Mar 09 21:36:39 2019 UTC\nLast Modification Time: Sat Mar 09 21:36:55 2019 UTC\nArchitecture:           x86_64\nProduct Name:           Windows 8.1 Pro\nEdition ID:             Professional\nInstallation Type:      Client\nHAL:                    acpiapic\nProduct Type:           WinNT\nProduct Suite:          Terminal Server\nLanguages:              es-ES \nDefault Language:       es-ES\nSystem Root:            WINDOWS\nMajor Version:          6\nMinor Version:          3\nBuild:                  9600\nService Pack Build:     16384\nService Pack Level:     0\nFlags:                  Professional\nWIMBoot compatible:     yes\n\n```\n\nalacran\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "210079",
      "timestamp": "2019-03-23T11:03:18+00:00",
      "author": "wimb",
      "content": "**Download** - coming later\n\n@alacran\n\nIn Windows 7 OS then bcdboot.exe 7/8/10 cannot make the VHD internal BCD entry and that is the cause of the problem that you encountered.\n\nI have no solution for this problem and so the program VHD_WIMBOOT needs Windows 10 Or Windows 8 / 8.1 OS.\n\nThe failure in giving the VHD the right name is solved and for Windows 8.1 the extra dot in the VHD filename is removed.\n\n"
    },
    {
      "id": "210080",
      "timestamp": "2019-03-23T12:15:07+00:00",
      "author": "alacran",
      "content": "Thanks for this new version, if the program is not compatible with 7, it may not be a big issue, but it is good we now are aware of that before running it.\n\nAbout the dot on 8.1 I\u0027m glad you fixed it. but also a warning like: Do not use dot(s) or espaces on files names could be enough, sorry for the extra work my friend.\n\nJust downloaded, I\u0027ll run some tests ASAP and let you know of my findings.\n\nalacran\n\n"
    },
    {
      "id": "210091",
      "timestamp": "2019-03-23T19:01:49+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e In Windows 7 OS then bcdboot.exe 7/8/10 cannot make the VHD internal BCD entry and that is the cause of the problem that you encountered.\n\u003e\n\u003e I have no solution for this problem and so the program VHD_WIMBOOT needs Windows 10 Or Windows 8 / 8.1 OS.\n\nIf I get this right, you could boot (Wimboot) Windows 7 but you stop because the BCDBOOT cannot make a \"correct\" BCD entry for it? ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)\n\nA possible solution is here (whether you will like it or not is another thing):\n\n[http://reboot.pro/to...ch-using-linux/](http://reboot.pro/topic/20468-create-a-windows-system-from-scratch-using-linux/ \"\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "210110",
      "timestamp": "2019-03-23T22:52:10+00:00",
      "author": "alacran",
      "content": "@ wimb\n\n\u003e **Download** - [VHD_WIMBOOT](https://1drv.ms/f/s!AqA1-Hg3ltssgbYna78xaVPrpcR2sA \"External link\") New Version 1.1 available for testing\n\u003e\n\u003e @alacran\n\u003e\n\u003e In Windows 7 OS then bcdboot.exe 7/8/10 cannot make the VHD internal BCD entry and that is the cause of the problem that you encountered.\n\u003e\n\u003e I have no solution for this problem and so the program VHD_WIMBOOT needs Windows 10 Or Windows 8 / 8.1 OS.\n\u003e\n\u003e The failure in giving the VHD the right name is solved and for Windows 8.1 the extra dot in the VHD filename is removed.\n\nSorry for the delate but I was busy with other things.\n\nI can confirm the dot problem is fixed, but this time on W81x64_ES_1.vhd and also on W10x64_MX_1.vhd even if lang is correct on VHD name, it was not applied to all the BCDs as it was before on first version, I assume when you edited the code you just forgot to add this feature, (it was working fine before, at least on W10x64_MX_1.vhd the right lang was selected on BCDs).\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![Lang.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-85542000-1553381765_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-85542000-1553381765.png \"Lang.png - Size: 25.69KB\"){#ipb-attach-url-16560-0-19291400-1676066390}\n\n"
    },
    {
      "id": "210119",
      "timestamp": "2019-03-24T10:53:02+00:00",
      "author": "wimb",
      "content": "**Download** - coming later\n\n**@alacran**\n\n- Option Added - Capture WIM File with LZX Compression\n\n- Added - Locale Language in BCD is taken into account\n\nFor making new BCD entries there was only code to use default Language en-US, but now the Locale value is taken into account.\n\n"
    },
    {
      "id": "210161",
      "timestamp": "2019-03-24T19:19:33+00:00",
      "author": "wimb",
      "content": "\u003e If I get this right, you could boot (Wimboot) Windows 7 but you stop because the BCDBOOT cannot make a \"correct\" BCD entry for it? ![:w00t:](http://reboot.pro/public/style_emoticons/default/w00t.gif)\n\u003e\n\u003e A possible solution is here (whether you will like it or not is another thing):\n\u003e\n\u003e [http://reboot.pro/to...ch-using-linux/](http://reboot.pro/topic/20468-create-a-windows-system-from-scratch-using-linux/ \"\")\n\u003e\nIt is **not Wimboot** Windows 7, but **Boot with Windows 7 x64**\n\nThen **Mount Win10x64 VHD** as Drive N: and try to make new entry into the **VHD internal BCD** e.g. N:\\\\Boot\\\\BCD\n\nWhen I use W10x64 version of bcdboot and command as given Or W7 bcdboot without /f ALL, it all fails, wheras I can use such command with succes in Win10x64 or Win8/8.1OS\n\n```\nbcdboot.exe N:\\Windows /s N: /f ALL\n```\n\nI tried your suggestion to use bcdedit for that purpose to create new entry in BCD\n\nUsing **Windows 7 x64 OS Or Win 10 x64 OS** then I can create such entry in the N:\\\\Boot\\\\BCD but it is **not correct**\n\n```\nbcdedit /store N:\\Boot\\BCD /create /d W10x64_NL_7-VHD /application osloader\ngives guid {513f748d-4e64-11e9-b210-3052cb53659e}\nbcdedit /store N:\\Boot\\BCD /set {513f748d-4e64-11e9-b210-3052cb53659e} device partition\u003dN:\nbcdedit /store N:\\Boot\\BCD /set {513f748d-4e64-11e9-b210-3052cb53659e} path \\Windows\\system32\\winload.exe\nbcdedit /store N:\\Boot\\BCD /set {513f748d-4e64-11e9-b210-3052cb53659e} osdevice partition\u003dN:\nbcdedit /store N:\\Boot\\BCD /set {513f748d-4e64-11e9-b210-3052cb53659e} systemroot \\Windows\nbcdedit /store N:\\Boot\\BCD /displayorder {513f748d-4e64-11e9-b210-3052cb53659e} /addlast\nbcdedit /store N:\\Boot\\BCD /default {513f748d-4e64-11e9-b210-3052cb53659e}\n\n```\n\nThe problem is that the generated entry refers to the VHD instead of to the mounted partition.\n\nStrange enough enum and enum /v show total different info for the last entry\n\n```\nC:\\Windows\\system32\u003ebcdedit /store N:\\Boot\\BCD /enum\n\nid                      {default}\ndevice                  partition\u003dN:\npath                    \\Windows\\system32\\winload.exe\ndescription             W10x64_NL_7-VHD\nosdevice                partition\u003dN:\nsystemroot              \\Windows\n\n\nC:\\Windows\\system32\u003ebcdedit /store N:\\Boot\\BCD /enum /v\n\nid                      {513f748d-4e64-11e9-b210-3052cb53659e}\ndevice                  vhd\u003d[M:]\\W10x64_NL_2.vhd,locate\u003dcustom:12000002\npath                    \\Windows\\system32\\winload.exe\ndescription             W10x64_NL_7-VHD\nosdevice                vhd\u003d[M:]\\W10x64_NL_2.vhd,locate\u003dcustom:22000002\nsystemroot              \\Windows\n\n\n```\n\nDo you you know the commands to get the correct entry for**BCD inside VHD booting Windows of that VHD** ?\n\nI need probably something else than **device partition\u003dN:** but what code will give succes ?\n\n"
    },
    {
      "id": "210162",
      "timestamp": "2019-03-24T20:21:20+00:00",
      "author": "karyonix",
      "content": "@wimb  \nbcdedit /store N:\\\\Boot\\\\BCD /set {bootmgr} device boot  \nbcdedit /store N:\\\\Boot\\\\BCD /set {513f748d-4e64-11e9-b210-3052cb53659e} device boot  \nbcdedit /store N:\\\\Boot\\\\BCD /set {513f748d-4e64-11e9-b210-3052cb53659e} osdevice boot   \n"
    },
    {
      "id": "210167",
      "timestamp": "2019-03-24T23:44:29+00:00",
      "author": "alacran",
      "content": "\u003e **Download** - [VHD_WIMBOOT](https://1drv.ms/f/s!AqA1-Hg3ltssgbYna78xaVPrpcR2sA \"External link\") New Version 1.2 available for testing\n\u003e\n\u003e **@alacran**\n\u003e\n\u003e - Option Added - Capture WIM File with LZX Compression\n\u003e\n\u003e - Added - Locale Language in BCD is taken into account\n\u003e\n\u003e For making new BCD entries there was only code to use default Language en-US, but now the Locale value is taken into account.\n\nThis time I used 10x64-WB.wim LZX compressed as source, located on Wimboot file on the USB, the program created W10x86_MX_1.vhd in a few minutes on USB device.\n\nAll working as expected, not a single issue during building or during Rambooting the created VHD of 1.5 GB fixed size.\n\nSo the program is totally fine as far as Apply, haven\u0027t tested Capture yet.\n\nAs a personal test I manually changed grub4dos version from 0.4.6a-2018-12-23 to 0.4.6a-2017-12-20 and tested Rambooting the W10x86_MX_1.vhd without making any change to munu.lst, I mean the command **map --top --mem** was not changed to **map --mem** for use on the older version, and W10x86_MX_1.vhd Rambooted as fine as before.\n\nThis was done with the idea to suggest you 2 optional additions to your program:\n\n1 - An option for the user to select/use grub4dos 0.4.6a-2017-12-20 ([the last known version capable to Ramboot Dynamic Expandable VHDs](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-compression-to-save-room-and-also-load-faster-on-ram/page-2#entry210089 \"\"))\n\n2 - An option for the user to create Dynamic Expandable VHDs ([They load on RAM like a lightning](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-compression-to-save-room-and-also-load-faster-on-ram/page-2#entry210086 \"\")), not capable to Filedisk boot using grub4dos, but Windows manager boots them without any issue, and also we save more than 2/3 of VHD size \u003d [more than 66.6 % less espace used for the VHD.](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-compression-to-save-room-and-also-load-faster-on-ram/page-3#entry210115 \"\")\n\nalacran\n\n"
    },
    {
      "id": "210172",
      "timestamp": "2019-03-25T09:14:13+00:00",
      "author": "Wonko the Sane",
      "content": "@wimb\n\nBesides the suggestion by karyonix, I was suggesting more to use bcdboot and/or bcdedit to create a \"base\" BCD and then use reg.exe as cdob detailed in the given thread to \"tweak it\" as needed, and/or erwan.l\u0027s offlinereg:\n\n[http://reboot.pro/to...linux/?p\u003d192410](http://reboot.pro/topic/20468-create-a-windows-system-from-scratch-using-linux/?p\u003d192410 \"\")\n\nand/or (if needed) direct binary editing to further refine it.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "210180",
      "timestamp": "2019-03-25T12:55:19+00:00",
      "author": "wimb",
      "content": "\u003e @wimb  \n\u003e bcdedit /store N:\\\\Boot\\\\BCD /set {bootmgr} device boot  \n\u003e bcdedit /store N:\\\\Boot\\\\BCD /set {513f748d-4e64-11e9-b210-3052cb53659e} device boot  \n\u003e bcdedit /store N:\\\\Boot\\\\BCD /set {513f748d-4e64-11e9-b210-3052cb53659e} osdevice boot\n\nIt is useful in Windows 7 x64 OS to make existing \\\u003cUnknown\\\u003e entry of BCD in Win10x64 VHD bootable.\n\nI can create also new working BCD entry using your code.\n\nImportant is to use the [addlast](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d210161 \"\") for adding the entry to the menu\n\nThanks for your solution :smile:\n\n"
    },
    {
      "id": "210186",
      "timestamp": "2019-03-25T14:41:03+00:00",
      "author": "wimb",
      "content": "**Download** - coming later\n\n- bcdboot not used anymore in code to update internal BCD of VHD\n\n- Program now compatible with Windows 7/8/10 OS\n\n- added new grub4dos-0.4.6a-2019-03-25 version\n\nThanks to **karyonix** for giving [solution](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d210162 \"\") to make the program compatible with Windows 7 :smile:\n\n"
    },
    {
      "id": "210188",
      "timestamp": "2019-03-25T15:40:59+00:00",
      "author": "alacran",
      "content": "Better use new grub4dos-0.4.6a-2019-03-25, see: [http://reboot.pro/to...e-3#entry210171](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-compression-to-save-room-and-also-load-faster-on-ram/page-3#entry210171 \"\")\n\nIt is restoring again the lost (by mistake) capability to load to Ram and Ramboot expandable VHDs. Download: [http://grub4dos.chenall.net/](http://grub4dos.chenall.net/ \"External link\")\n\nSo my two previous suggestions are reduced to only one now:\n\nAn option for the user to create Dynamic Expandable VHDs ([They load on RAM like a lightning](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-compression-to-save-room-and-also-load-faster-on-ram/page-2#entry210086 \"\")), not capable to Filedisk boot using grub4dos, but Windows manager boots them without any issue, and also we save more than 2/3 of VHD size \u003d [more than 66.6 % less espace used for the VHD.](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-compression-to-save-room-and-also-load-faster-on-ram/page-3#entry210115 \"\")\n\nalacran\n\n"
    },
    {
      "id": "210189",
      "timestamp": "2019-03-25T15:47:51+00:00",
      "author": "wimb",
      "content": "\u003e Better use new grub4dos-0.4.6a-2019-03-25, see: [http://reboot.pro/to...e-3#entry210171](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-compression-to-save-room-and-also-load-faster-on-ram/page-3#entry210171 \"\")\n\u003e\n\u003e It is restoring again the lost (by mistake) capability to load to Ram and Ramboot expandable VHDs. Download: [http://grub4dos.chenall.net/](http://grub4dos.chenall.net/ \"External link\")\n\nThanks, I have just added the new grub4dos-0.4.6a-2019-03-25 version.\n\n"
    },
    {
      "id": "210193",
      "timestamp": "2019-03-25T17:04:05+00:00",
      "author": "alacran",
      "content": "W81x64_ES_1.vhd was created running VHD_WIMBOOT from Win 7x64, external BCD is fine, including lang selection, internal BCD includes lang selection fine too, but the HD and partition to boot from are not selected, see attached picture.\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![8.1x64 made from 7.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-33301000-1553533440_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-33301000-1553533440.png \"8.1x64 made from 7.png - Size: 67.93KB\"){#ipb-attach-url-16563-0-19300800-1676066390}\n\n"
    },
    {
      "id": "210196",
      "timestamp": "2019-03-25T17:14:47+00:00",
      "author": "wimb",
      "content": "\u003e W81x64_ES_1.vhd was created running VHD_WIMBOOT from Win 7x64, external BCD is fine, including lang selection, internal BCD includes lang selection fine too, but the HD and partition to boot from are not selected, see attached picture.\n\u003e\n\u003e alacran\n\nProbably there is only one entry which is not set as default.\n\nI will check it and find a solution.\n\nWhat does the entry look like in Professional mode ?\n\n"
    },
    {
      "id": "210197",
      "timestamp": "2019-03-25T17:22:11+00:00",
      "author": "alacran",
      "content": "This is it on Professional mode.  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![Pro view 8.1x64 made from 7.png](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-86508900-1553534528_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-26560-0-86508900-1553534528.png \"Pro view 8.1x64 made from 7.png - Size: 79.64KB\"){#ipb-attach-url-16564-0-19306900-1676066390}\n\n"
    },
    {
      "id": "210198",
      "timestamp": "2019-03-25T17:31:33+00:00",
      "author": "wimb",
      "content": "Somehow the default entry has been removed.\n\nSo I have to check if a default entry is present and otherwise create one.\n\nNormally Install creates a default entry.\n\n"
    },
    {
      "id": "210200",
      "timestamp": "2019-03-25T18:39:28+00:00",
      "author": "alacran",
      "content": "I haven\u0027t noticed it before because I have about 10 entries on my BCD, but during running VHD_WIMBOOT to create W81x64_ES_1.vhd from Win 7, my win10x64 Pro that was selected as default on BCD, was overwrited by W81x64_ES_1.vhd entry, so better delete the link to download that version 1.4, since it may create big troubles to non advanced users.\n\n"
    },
    {
      "id": "210202",
      "timestamp": "2019-03-25T18:57:57+00:00",
      "author": "wimb",
      "content": "\u003e I haven\u0027t noticed it before because I have about 10 entries on my BCD, but during running VHD_WIMBOOT to create W81x64_ES_1.vhd from Win 7, my win10x64 Pro that was selected as default on BCD, was overwrited by W81x64_ES_1.vhd entry, so better delete the link to download that version 1.4, since it may create big troubles to non advanced users.\n\nOK, File has been removed.\n\nThanks for the Info.\n\n"
    },
    {
      "id": "210227",
      "timestamp": "2019-03-26T08:28:02+00:00",
      "author": "wimb",
      "content": "**Download:** [VHD_WIMBOOT](http://reboot.pro/files/file/593-vhd-wimboot-apply-and-capture-of-wim-files-for-os-in-vhd/ \"\") Version 1.7\n\n- internal BCD create entry improved - solution also working without default entry present\n\n- external BCD create entry improved so that default entry cannot be overwritten anymore\n\n- VHD Expandable option added\n\n- SVBus Filedisk entry removed, since it does not work with expandable VHD and Microsoft VHD entry in Boot Manager menu is better option\n\nThanks to **karyonix, alacran, Wonko the Sane, tinybit, yaya, chenall, cdob, JFX, steve6375, ReTokener, synchronicity,** **schtrom** and **Microsoft :smile:**\n\n[![VHD_WIMBOOT-2019-03-26_150940.png](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-75388600-1553609443_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-75388600-1553609443.png \"VHD_WIMBOOT-2019-03-26_150940.png - Size: 11.31KB\"){#ipb-attach-url-16567-0-19319700-1676066390} \u003d\u003d [![W10x64-RAM-HelloWorld-2019-03-01_155130.png](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-36112900-1553618927_thumb.png)](http://reboot.pro/uploads/monthly_03_2019/post-9517-0-36112900-1553618927.png \"W10x64-RAM-HelloWorld-2019-03-01_155130.png - Size: 736.73KB\"){#ipb-attach-url-16568-0-19311900-1676066390}\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nMore Info in Support Topic on **[VHD_WIMBOOT](http://reboot.pro/topic/21977-vhd-wimboot-apply-and-capture-of-wim-files-for-os-in-vhd/?p\u003d210235 \"\")** **- Apply and Capture of WIM Files for OS in VHD**\n\n"
    },
    {
      "id": "210663",
      "timestamp": "2019-04-13T09:22:43+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI - Version 88 \\*\\*\\***\n\n**Download :** **[UEFI_MULTI-88.zip](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\") -** password is **bootwimb**\n\n- internal BCD create entry improved - solution also working without default entry present\n\n- external BCD create entry improved so that default entry cannot be overwritten anymore\n\n- Language Version is taken into account in making BCD entries\n\n"
    },
    {
      "id": "210851",
      "timestamp": "2019-04-24T18:48:30+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI - Version 88 \\*\\*\\***\n\n- Solution for missing file **Boot\\\\bootvhd.dll** in case Boot Manager BCD menu was made earlier by MediaCreationTool\n\nFile Boot\\\\bootvhd.dll is essential to make the VHD entry appear in BIOS Boot Manager menu.  \n\n**Download :** **[UEFI_MULTI-88.zip](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")** - Encrypted with password \u003d **bootwimb**\n\n"
    },
    {
      "id": "211770",
      "timestamp": "2019-06-20T07:09:58+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI - Version 90 \\*\\*\\***\n\n- [Grub4dos Updated](http://grub4dos.chenall.net/ \"External link\") to version grub4dos-0.4.6a-2019-06-17\n\n- Partition Style (GPT Or MBR) and Firmware (UEFI Or Legacy) detected\n\n- grub4dos and Boot\\\\BCD are NOT added to EFI GPT Partition, but are only added to Boot Drive in case of MBR Partition Style\n\n- In Win 8/10 x64 OS then UEFI Boot Manager menu is created or modified in efi\\\\microsoft\\\\boot\\\\BCD in all cases for booting WIM, VHD and VHDX files\n\n- Get Access to your Hidden EFI Boot Drive to Add VHD Or WIM as Boot option to your machine  \n- In Windows 10 x64 run WinNTSetup x64 so that EFI partition is mounted as drive Z:  \n- Or use R-mouse to open admin cmd window and mount the EFI partition using **mountvol Z: /s**\n\n**Download :** **[UEFI_MULTI-90.zip](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")** - Encrypted with password \u003d **bootwimb**\n\n"
    },
    {
      "id": "211771",
      "timestamp": "2019-06-20T07:20:32+00:00",
      "author": "steve6375",
      "content": "Do you know what the latest grub4dos version fixes? Was there an issue with it?\n\n"
    },
    {
      "id": "211772",
      "timestamp": "2019-06-20T07:24:02+00:00",
      "author": "wimb",
      "content": "\u003e Do you know what the latest grub4dos version fixes? Was there an issue with it?\n\nI don\u0027t know but simply has updated to latest grub4dos version when updating UEFI_MULTI.\n\nAnyway latest grub4dos version was tested by me and is working OK.\n\n"
    },
    {
      "id": "211773",
      "timestamp": "2019-06-20T07:54:00+00:00",
      "author": "steve6375",
      "content": "Seems that the original code was changed in 2018-12-23 version...\n\n```\n2018-12-23 (yaya)Â Â  Fixed reading the disk out of bounds without alarm.\n```\n\nand changed back to pre-2018-12-23 code in this new version!\n\n"
    },
    {
      "id": "211774",
      "timestamp": "2019-06-20T08:21:16+00:00",
      "author": "wimb",
      "content": "\u003e Seems that the original code was changed in 2018-12-23 version...\n\nYes I know, but that was already fixed in previous UEFI_MULTI version having grub4dos-0.4.6a-2019-03-25 version\n\nNeeded for booting **expandable** VHD from RAMDISK using grub4dos and SVBus driver, See also [here](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-or-lz4-compression-to-save-room-and-also-load-faster-on-ram/?p\u003d210171 \"\") and [here](http://reboot.pro/topic/21972-reducing-wimboot-source-wim-file-using-lzx-compression-and-vhd-using-gzip-or-lz4-compression-to-save-room-and-also-load-faster-on-ram/?p\u003d210204 \"\")\n\n"
    },
    {
      "id": "211776",
      "timestamp": "2019-06-20T08:55:16+00:00",
      "author": "steve6375",
      "content": "No - you misunderstand.\n\nIn the 2018-12-23 version, some code was change in disk_io.c (to do with accessing a file outside of partition)\n\nThis appears to have introduced a bug because the old code lines were restored back again in the 2019-06-17 version.\n\nSo all versions from 2018-12-23 to 2019-06-13 apparently have this bad code.\n\nAs far as I can tell however, you would only see the affects of this buggy code if there was a file very near the end of a partition.\n\n"
    },
    {
      "id": "211777",
      "timestamp": "2019-06-20T09:08:59+00:00",
      "author": "wimb",
      "content": "Ok thanks for giving explanation.\n\n"
    },
    {
      "id": "212136",
      "timestamp": "2019-07-12T08:02:29+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI - Version 91 \\*\\*\\***\n\n- VHD can be in Folder max 8 chars located on NTFS System Drive\n\n- VHD is never Copied to System drive, but must be located in Root or Folder of NTFS System Drive\n\n- Solved - Failure in Windows PE to create fresh working Boot Manager on empty disk\n\n**Download :** **[UEFI_MULTI-91.zip](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")**\n\n"
    },
    {
      "id": "212653",
      "timestamp": "2019-09-12T09:23:05+00:00",
      "author": "wimb",
      "content": "**How to Add Windows 10XPE as Boot Option to your Internal Harddisk Or SSD**\n\n1. Create on your Internal Harddisk / SSD the folder Win10XPE with files **Win10XPE.wim** and **boot.sdi**  \n2. Run BOOTICEx64.exe of [BOOTICE v1.3.3.2](https://sites.google.com/site/gbrtools/home/software/bootice-portable/bootice-downloads \"External link\") or [as given by **alacran**](http://reboot.pro/files/file/592-bootice-v1332/ \"\") and select BCD of current system in Easy mode  \n3. Add New WIM Boot entry and Select Disk and Partition of Win10XPE and Edit File, SDI file and OS title as indicated  \n4. Save Current System and Close  \n5. In BOOTICEx64.exe select BCD of current system in Professional mode  \n6. In Win10XPE entry with R-mouse Add New element - **BootMenuPolicy** with setting **Legacy**  \n7. In Win10XPE entry with R-mouse Add New element - **LoadOptionsString** with value **DISABLE_INTEGRITY_CHECKS**  \n8. In {ramdiskoptions} or other guid entry use doubleclick on SdiDevice to Select Boot disk and Boot part  \n9. In {ramdiskoptions} or other guid entry use doubleclick on SdiPath to edit and give value \\\\Win10XPE\\\\boot.sdi  \n10. Edit normal Windows 10 entry so that BootMenuPolicy is **Legacy**, which allows on booting straight to select Windows 10 Or Win10XPE  \nHow to make Win10XPE WIM file for booting from RAMDISK is described in\n\n[![W10XPE_Easy_2019-09-12_104342.png](http://reboot.pro/uploads/monthly_09_2019/post-9517-0-88890700-1568279785_thumb.png)](http://reboot.pro/uploads/monthly_09_2019/post-9517-0-88890700-1568279785.png \"W10XPE_Easy_2019-09-12_104342.png - Size: 123KB\"){#ipb-attach-url-16833-0-40364800-1676066390} \u003d\u003d [![W10XPE_2019-09-12_102847.png](http://reboot.pro/uploads/monthly_09_2019/post-9517-0-87970900-1568279808_thumb.png)](http://reboot.pro/uploads/monthly_09_2019/post-9517-0-87970900-1568279808.png \"W10XPE_2019-09-12_102847.png - Size: 193.26KB\"){#ipb-attach-url-16834-0-40378000-1676066390} \u003d\u003d [![W10XPE_ramdiskoptions_2019-09-12_112052.png](http://reboot.pro/uploads/monthly_09_2019/post-9517-0-89269900-1568280102_thumb.png)](http://reboot.pro/uploads/monthly_09_2019/post-9517-0-89269900-1568280102.png \"W10XPE_ramdiskoptions_2019-09-12_112052.png - Size: 182.56KB\"){#ipb-attach-url-16836-0-40387500-1676066390}  \nBooting with Win10XPE from RAMDISK loaded from Internal SSD is powerful, convenient and extremely fast :cool:\n\n"
    },
    {
      "id": "212659",
      "timestamp": "2019-09-12T23:33:00+00:00",
      "author": "alacran",
      "content": "Hi wimb\n\nNice finding, my friend,**LoadOptionsString \u003d DISABLE_INTEGRITY_CHECKS** let us disable the integrity check for this especifical item in BCD, keeping the integrity check enabled for all the other entries.\n\nI don\u0027t know if you could implement this on UEFI MULTI for all entries added by the program to BCD (on internal or external) storage device, but it seems as a good improvement if possible.\n\nI like to boot my VHDs, \\*.wims and/or Isos from internal disk/drive as much as possible, nevertheless I always have also an UEFI MULTI USB device just in case.\n\nalacran\n\n"
    },
    {
      "id": "212660",
      "timestamp": "2019-09-13T04:56:50+00:00",
      "author": "wimb",
      "content": "**LoadOptionsString** with value **DISABLE_INTEGRITY_CHECKS** solution for Win10XPE and other PE was given by JFX long ago (around 2013 ?)\n\nand has been implemented in UEFI_MULTI since then for making boot entries for Windows PE located on FAT32 boot drive for booting from RAMDISK.\n\nFor the internal harddisk the existing FAT32 boot partition is mostly too small to accomodate Win10XPE and the FAT32 drive is hidden and not easily accessible.\n\nIn the present solution the Win10XPE can be accomodated on the Windows NTFS partition or other primary NTFS partition.\n\nBOOTICE can modify the BCD of the current system to Add entry for WIM file and allows to indicate disk and partition where the Win10XPE.wim and boot.sdi file are located.\n\nLoading Win10XPE from internal SSD is extremely fast whereas loading from USB can be rather slow, however a portable SSD is also fast.\n\n"
    },
    {
      "id": "212662",
      "timestamp": "2019-09-13T17:16:30+00:00",
      "author": "alacran",
      "content": "Sorry, I use bootIce a lot, but as almost all can be done on easy mode and I rarely use professional mode never noticed is was implemented on UEFI MULTI for .wim(s) located on FAT-32 pÃ rtition, so this **LoadOptionsString \u003d DISABLE_INTEGRITY_CHECKS** was new for me.\n\nalacran\n\n"
    },
    {
      "id": "212665",
      "timestamp": "2019-09-14T07:27:56+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI - Version 92 \\*\\*\\***\n\n- Win10XPE or other PE WIM file + boot.sdi file can be located (also in folder) on **NTFS System Drive** ![:thumbup:](https://reboot.pro/public/style_emoticons/default/thumbup.gif) e.g. of Internal Harddisk / SSD\n\n- The Hidden FAT32 EFI Boot Drive of Internal Harddisk / SSD is auto mounted as Drive Z: Y: S: Or T: so that it can be selected in UEFI_MULTI\n\nThis allows to add simply Win10XPE or other PE WIM as boot entry in BCD of Boot Manager menu for your Internal Harddisk or SSD\n\nLoading Win10XPE.wim size 775 MB **from Internal SSD into RAMDISK** takes only **3 seconds** ![:w00t:](https://reboot.pro/public/style_emoticons/default/w00t.gif) and 7 seconds from Portable SSD connected via USB 3.0\n\nTotal Boot time for Win10XPE is then about 30 seconds from Boot Manager menu until Desktop.\n\n**Download :** **[UEFI_MULTI-92.zip](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")**\n\n**How to make Win10XPE WIM file for booting from RAMDISK** at [MSFN Forum](https://msfn.org/board/topic/121446-install-from-usb-after-booting-with-wim-or-vhdx/?do\u003dfindComment\u0026comment\u003d1159506 \"External link\")\n\n[![Win10XPE-2019-09-14_133643.png](http://reboot.pro/uploads/monthly_09_2019/post-9517-0-73428200-1568461146_thumb.png)](http://reboot.pro/uploads/monthly_09_2019/post-9517-0-73428200-1568461146.png \"Win10XPE-2019-09-14_133643.png - Size: 383.21KB\"){#ipb-attach-url-16840-0-40395800-1676066390}\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "212839",
      "timestamp": "2019-09-30T07:09:28+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI - Version 93 \\*\\*\\***\n\n- Calculation of Overflow improved for case of Win10XPE located on NTFS System Drive\n\n**Download:** [UEFI_MULTI-93.zip](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\n"
    },
    {
      "id": "213163",
      "timestamp": "2019-10-26T12:28:46+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI - Version 94 \\*\\*\\***\n\n- The selected USB **Boot Drive** of USB Fixed Disk with MBR partitioning is always **Set Active**\n\n- **bootsect.exe** is used if needed to [Fix the MBR and PBR Boot code](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/bootsect-command-line-options \"External link\") of **USB Boot Drive** for booting in BIOS mode with Boot Manager Menu\n\n- **Update MBR Boot Code** checkbox will force to use **bootsect.exe** on USB Boot Drive of **USB Fixed Disk**\n\n- removal of old stuff like MbrFix64.exe MBRWiz.exe and grubinst.exe and more ....\n\n**Download:** [UEFI_MULTI-94.zip](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\nFor **USB Boot Drive** P: of MBR partitioned disk we can [Fix the MBR and PBR Boot code](https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/bootsect-command-line-options \"External link\") for booting in BIOS mode with Boot Manager Menu using:\n\n```\nbootsect.exe /nt60 P: /mbr\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "214038",
      "timestamp": "2020-03-06T13:36:38+00:00",
      "author": "wimb",
      "content": "**\\*\\*\\* Update UEFI_MULTI - Version 95 \\*\\*\\***\n\n- Grub4dos Update to Version grub4dos-0.4.6a-2020-02-29\n\n- Update of Grub4dos files **menu.lst** and **menu_Linux.lst** in folder makebt\n\n- Update of Grub2 Menu files **grub_Linux.cfg** and **Main.cfg** in folder UEFI_MAN\n\nDownload: [UEFI_MULTI-95](http://reboot.pro/files/file/279-uefi-multi-make-multi-boot-usb-drive/ \"\")\n\nUEFI_MULTI Program compatible with [USB Format Tool](http://reboot.pro/topic/22254-usb-format-tool/ \"\")\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "214166",
      "timestamp": "2020-03-28T11:52:35+00:00",
      "author": "wimb",
      "content": "**Update of Manual:** and Short Info :\n\n- Added Section: How to make USB Drive booting with various Linux ISO versions in BIOS and in UEFI Secure mode\n\nUEFI_MULTI supports three ways to Boot Linux ISO files:\n\n1. Boot from USB straight with Grub4dos menu entry in BIOS mode Or with Grub2 menu entry in UEFI Secure mode - method is fast and reliable\n\nmenu entries are already available e.g. for linuxmint.iso - runtimelivecd.iso - knoppix.iso - ubuntu.iso - ubuntu-19.10-desktop-amd64.iso\n\n2. Boot from USB with **a1ive Grub2 File Manager**, which is a blackbox that enables to select Linux ISO - available in BIOS and UEFI Secure mode\n\n3. Boot from USB with **AIO Boot** - previous Integration of Linux ISO generates Grub4dos and Grub2 menu entries\n\nMethod 2 and 3 are useful in case menu entry for method 1 is not (yet) available, but otherwise method 1 is preferred\n\nAt MSFN there is topic [USB Format Tool and UEFI_MULTI](https://msfn.org/board/topic/181311-usb-format-tool-and-uefi_multi/ \"External link\")\n\nAll my projects are now available for Download as Releases at [wimb GitHub](https://github.com/wimbrts \"External link\")\n\n**Download:** [USB_FORMAT](https://github.com/wimbrts/USB_FORMAT/releases \"External link\") and [UEFI_MULTI](https://github.com/wimbrts/UEFI_MULTI/releases \"External link\") and [VHD_WIMBOOT](https://github.com/wimbrts/VHD_WIMBOOT/releases \"External link\") and [System_Info](https://github.com/wimbrts/System_Info/releases \"External link\") and [MBR_Backup](https://github.com/wimbrts/MBR_Backup/releases \"External link\")\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "214572",
      "timestamp": "2020-05-11T12:18:31+00:00",
      "author": "wimb",
      "content": "**Update USB_FORMAT-51 and UEFI_MULTI-51**\n\n**Download:** from [wimb GitHub](https://github.com/wimbrts \"External link\") - [USB_FORMAT-51](https://github.com/wimbrts/USB_FORMAT/releases \"External link\") and [UEFI_MULTI-51](https://github.com/wimbrts/UEFI_MULTI/releases \"External link\") and [VHD_WIMBOOT-41](https://github.com/wimbrts/VHD_WIMBOOT/releases \"External link\") and [Win_Reduce_Trusted-40](https://github.com/wimbrts/VHD_WIMBOOT/releases \"External link\")\n\nDownload File E \u003d Encrypted Password \u003d bootwimb\n\n**Manual:** [VHD_WIMBOOT.pdf](https://github.com/wimbrts/VHD_WIMBOOT/releases \"External link\") and [Win10_Install.pdf](https://github.com/wimbrts/VHD_WIMBOOT/releases \"External link\") to make Mini 7/8/10 x64 in VHD with UsedSize about 2 GB\n\nAt MSFN there is topic [USB Format Tool and UEFI_MULTI](https://msfn.org/board/topic/181311-usb-format-tool-and-uefi_multi/ \"External link\")\n\nAll my projects are now available for Download as Releases at [wimb GitHub](https://github.com/wimbrts \"External link\")\n\n**Download:** [USB_FORMAT](https://github.com/wimbrts/USB_FORMAT/releases \"External link\") and [UEFI_MULTI](https://github.com/wimbrts/UEFI_MULTI/releases \"External link\") and [VHD_WIMBOOT](https://github.com/wimbrts/VHD_WIMBOOT/releases \"External link\") and [WOF_Compress](https://github.com/wimbrts/WOF_Compress/releases \"External link\") and [System_Info](https://github.com/wimbrts/System_Info/releases \"External link\") and [MBR_Backup](https://github.com/wimbrts/MBR_Backup/releases \"External link\")\n\n**More Info:** [VHD_WIMBOOT](http://reboot.pro/topic/21977-vhd-wimboot-apply-and-capture-of-wim-files-for-os-in-vhd/page-14#entry217123 \"\") Mini 7/8/10 x64 and [Grub4dos for UEFI](http://reboot.pro/topic/22400-grub4dos-for-uefi/ \"\") and [USB_FORMAT Tool and UEFI_MULTI](http://reboot.pro/topic/22254-usb-format-tool-and-uefi-multi/ \"\")\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "214811",
      "timestamp": "2020-05-24T17:48:56+00:00",
      "author": "wimb",
      "content": "**Update UEFI_MULTI-42 plus the Addon-glim-agFM file**  \n- Update of [a1ive Grub2 File Manager](https://github.com/a1ive/grub2-filemanager/releases \"External link\") to v7.2.0  \n- UEFI_MULTI-42 Grub4dos menu.lst has entries to boot in BIOS mode straight with Win10XPE_x64.ISO and WinPE.iso  \n- UEFI_MULTI-42 can make new entries for booting Windows ISO files with Grub4dos in BIOS mode  \n- UEFI_MULTI-42 is compatible with [Ventoy USB Drive](https://github.com/ventoy/Ventoy/releases \"External link\") that was modified to have unhidden 130 MB FAT32 EFI Drive  \n- requires to adjust Ventoy EFI file grub\\\\grub.cfg to make Ventoy Boot Menu with added Boot options for Windows Boot Manager and for Grub4dos and Grub2 Menu  \nUSB Portable SSD - MultiBoot Ventoy Drive with support for booting VHD and WIM files in Windows BootManager Menu and booting Grub4dos Menu and Grub2 Menu  \n**Download:** [UEFI_MULTI](https://github.com/wimbrts/UEFI_MULTI/releases \"External link\")  \n**Ventoy EFI file grub\\\\grub.cfg** - File given in UEFI_MULTI-42\\\\UEFI_MAN\\\\ventoy-1.0.11\\\\grub folder  \n\n```\n......\n\nterminal_output  console\n\n#colect all image files (iso files)\nset ventoy_img_count\u003d0\nvt_list_img $iso_path ventoy_img_count\n\n#Main menu\nif [ $ventoy_img_count -gt 0 ]; then\n    if [ $VTOY_DEFAULT_MENU_MODE -eq 0 ]; then\n        vt_dynamic_menu 0 0 \n    else\n        vt_dynamic_menu 0 1\n    fi\n\n    if [ \"${grub_platform}\" \u003d\u003d \"efi\" ] -a [ -e \"/EFI/Microsoft/Boot/bootmgfw.efi\" ]; then\n    menuentry \"Windows EFI BootManager\" {\n      chainloader /EFI/Microsoft/Boot/bootmgfw.efi\n    }\n    fi\n\n    if [ \"${grub_platform}\" \u003d\u003d \"pc\" ] -a [ -e \"/bootmgr\" ]; then\n    menuentry \"Windows BootManager\" {\n      chainloader +1\n    }\n    fi\n\n    if [ \"${grub_platform}\" \u003d\u003d \"pc\" ] -a [ -e \"/grub.exe\" ]; then\n    menuentry \"Grub4dos Menu\" {\n        linux /grub.exe\n    }\n    fi\n\n    if [ -e /grub_Linux.cfg ] -a [ -e \"(hd0,msdos1)/images\" ]; then\n    menuentry \"Grub2 Menu\" {\n      set iso_drive\u003d(hd0,msdos1)\n      export iso_drive\n      configfile /grub_Linux.cfg\n    }\n    fi\n\nelse\n    menuentry \"No ISO files found (Press enter to reboot ...)\" {\n        echo -e \"\\n    Rebooting ... \"\n        reboot\n    }\nfi\n\n```\n\n-  \n**How to modify [Ventoy USB Drive](https://github.com/ventoy/Ventoy/releases \"External link\") to have unhidden 130 MB FAT32 EFI Drive**  \n1. Ventoy2Disk.exe is used first to Format USB Portable SSD  \n2. Ventoy Hidden EFI Drive on USB must be made visible  \n- In Windows 10x64 use DiskPart \\\u003e**list vol** and than **select vol** of EFI (in my case nr 14) - **assign** - EFI drive is mounted as e.g. Q:  \n- Also possible is: After booting with Win10XPE from RAMDISK the Hidden EFI Drive is auto mounted  \n3. Copy folders and files from Ventoy EFI drive to folder e.g. V_EFI on your harddisk  \n4. In Windows Explorer Format Ventoy and EFI drive with NTFS FileSystem  \n5. In Windows Disk Management Remove Ventoy EFI partition  \n6. Reduce Size of Ventoy NTFS drive by 100 MB  \n7. In unused space Create New simple Volume with Label EFI and Size 130 MB and Format with FAT32 FileSystem  \n8. Copy folders and files from V_EFI folder back to your new created EFI partition  \n9. Modify or Replace on Ventoy EFI drive file grub\\\\grub.cfg as indicated above  \n10. Copy some Linux ISO file and / or Win10XPE_x64.ISO and WinPE.iso file and folder Win10XPE with WIM file to Ventoy NTFS drive  \n11. Use UEFI_MULTI_x64.exe in Win10x64 OS - Select EFI drive as Boot Drive and Ventoy drive as System drive  \n12. Use UEFI_MULTI_x64.exe in Win10x64 OS - Select PE WIM e.g. boot.wim or Win10XPE.wim file Or Win10x64.vhd as Boot Image file  \n13. Click GO to make MultiBoot Ventoy Drive booting with WIM and VHD file in Windows BootManager and booting with Grub4dos Menu and Grub2 Menu  \n[![UEFI_MULTI_Ventoy-2020-05-24_143621.jpg](http://reboot.pro/uploads/monthly_05_2020/post-9517-0-01985400-1590342441_thumb.jpg)](http://reboot.pro/uploads/monthly_05_2020/post-9517-0-01985400-1590342441.jpg \"UEFI_MULTI_Ventoy-2020-05-24_143621.jpg - Size: 71.53KB\"){#ipb-attach-url-17118-0-40402900-1676066390} \u003d\u003d [![Ventoy_EFI_2020-05-24_143833.jpg](http://reboot.pro/uploads/monthly_05_2020/post-9517-0-12926100-1590342451_thumb.jpg)](http://reboot.pro/uploads/monthly_05_2020/post-9517-0-12926100-1590342451.jpg \"Ventoy_EFI_2020-05-24_143833.jpg - Size: 168.04KB\"){#ipb-attach-url-17119-0-40410100-1676066390} \u003d\u003d [![Ventoy_NTFS_2020-05-24_144735.jpg](http://reboot.pro/uploads/monthly_05_2020/post-9517-0-37400600-1590342460_thumb.jpg)](http://reboot.pro/uploads/monthly_05_2020/post-9517-0-37400600-1590342460.jpg \"Ventoy_NTFS_2020-05-24_144735.jpg - Size: 137.04KB\"){#ipb-attach-url-17120-0-40417100-1676066390} \u003d\u003d\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "214816",
      "timestamp": "2020-05-25T06:13:21+00:00",
      "author": "alacran",
      "content": "Nice approach, just tested and all working fine.\n\nalacran\n\n"
    },
    {
      "id": "214817",
      "timestamp": "2020-05-25T06:31:28+00:00",
      "author": "wimb",
      "content": "\u003e Nice approach, just tested and all working fine.\n\u003e\n\u003e alacran\n\nThank you for testing UEFI_MULTI-42 to make Multi-Boot Ventoy drive :smile:\n\nIt makes the Ventoy Drive more versatile so that it can be used to boot ISO, VHD and WIM files.\n\n"
    },
    {
      "id": "214821",
      "timestamp": "2020-05-25T22:42:42+00:00",
      "author": "alacran",
      "content": "JFYI\n\nForgot to comment as now menu.lst is on second partition and the folder images and also some other items are on first partition, menu.lst requires to be edited since some items are not located and then not seen on menu, here a couple of examples:\n\n\u003e iftitle \\[if exist **(hd0,0)**/grubfm_multiarch.iso\\] Grub2 File Manager of a1ive - grubfm_multiarch.iso  \n\u003e map --mem **(hd0,0)**/grubfm_multiarch.iso (0xff)  \n\u003e map --hook  \n\u003e chainloader (0xff)  \n\u003e\n\u003e iftitle \\[if exist **(hd0,0**)/images/7pe_x86_E.iso\\] 7pe_x86_E - images/7pe_x86_E.iso  \n\u003e set pe86e\u003d**(hd0,0)**/images/7pe_x86_E.iso  \n\u003e map %pe86e% (0xff)  \n\u003e map --hook  \n\u003e root (0xff)  \n\u003e chainloader (0xff)/BOOTMGR \\|\\| chainloader (0xff)/bootmgr\n\n**Added is remarked in blue.**\n\nNot a big deal, but it may create some confusion to non advanced users.\n\nI haven\u0027t checked any other \\*.lst file.\n\nYour friend\n\nalacran\n\n"
    },
    {
      "id": "214823",
      "timestamp": "2020-05-26T12:47:38+00:00",
      "author": "wimb",
      "content": "Yes you are right, some of the preconfigured entries don\u0027t work for Ventoy drives.\n\nIt is not a real problem since these preconfigured entries do not appear in the Grub4dos Menu.\n\nAlso new entries for these ISO files made with UEFI_MULT_x64.exe are working OK for Ventoy drives.\n\nThe preconfigured entries for Win10XPE_x64.ISO and WinPE.iso given in menu.lst are most important and working for Ventoy and other USB drives.\n\nThe preconfigured entries for Ventoy drives that you propose are OK.  \nInstead of specifying the disk and partition we might use ventoy folder as a marker according to\n\n```\niftitle [ls /ventoy] 7pe_x86_E.iso - ISO - 264 MB\nfind --set-root --ignore-floppies /7pe_x86_E.iso\nmap /7pe_x86_E.iso (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)/BOOTMGR || chainloader (0xff)/bootmgr\n\niftitle [ls /ventoy \u0026\u0026 if exist (hd0,0)/grubfm_multiarch.iso] Grub2 File Manager of a1ive - (hd0,0)/grubfm_multiarch.iso\nmap --mem (hd0,0)/grubfm_multiarch.iso (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)\n\n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "214829",
      "timestamp": "2020-05-27T01:13:06+00:00",
      "author": "alacran",
      "content": "\u003e Instead of specifying the disk and partition we might use ventoy folder as a marker according to\n\u003e\n\u003e ```\n\u003e iftitle [ls /ventoy] 7pe_x86_E.iso - ISO - 264 MB\n\u003e find --set-root --ignore-floppies /7pe_x86_E.iso\n\u003e map /7pe_x86_E.iso (0xff)\n\u003e map --hook\n\u003e root (0xff)\n\u003e chainloader (0xff)/BOOTMGR || chainloader (0xff)/bootmgr\n\u003e\n\u003e iftitle [ls /ventoy \u0026\u0026 if exist (hd0,0)/grubfm_multiarch.iso] Grub2 File Manager of a1ive - (hd0,0)/grubfm_multiarch.iso\n\u003e map --mem (hd0,0)/grubfm_multiarch.iso (0xff)\n\u003e map --hook\n\u003e root (0xff)\n\u003e chainloader (0xff)\n\u003e\n\u003e ```\n\nThis is the same as not doing any change, since Ventoy folder and menu.lst are on same second partition.\n\nAnd what we really have is images folder on NTFS first partition and menu.lst on small FAT-32 active second partition, when using this approach wich is not the same as usuall UEFI_MULTI layout (menu.lst on a big FAT-32 first active partition) and images folder usually on same partition too.\n\nThis is my modified menu.lst:\n\n```\ncolor black/green  red/light-gray\nsetmenu --string\u003d75\u003d0\u003d0xff0000\u003d\"date\u0026time\"\n#general command to pick highest mode available up to 1000 xres - recommended if you have a wide variety of systems\n#pick highest resolution up to 1000x10000 and either 24-bit or 32-bit colour only\ngraphicsmode -1 100:1000 100:10000 24:32\ntimeout 30\ndefault 0\n \niftitle [if exist /bootmgr] Boot Manager Menu - Win 7/8/10 VHD and WIM\nchainloader /bootmgr\n\niftitle [if exist (hd1,0)/bootmgr] Boot Windows from first primary partition of first hard disk \nchainloader (hd1,0)/bootmgr\n\niftitle [if exist (hd0,0)/Win10XPE_x64.ISO] Win10XPE_x64 ISO or ISO from RAM\nfind --set-root --ignore-floppies /Win10XPE_x64.ISO\nmap /Win10XPE_x64.ISO (0xff) || map --mem /Win10XPE_x64.ISO (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)\n\niftitle [if exist (hd0,1)/Win10XPE_x64.ISO] Win10XPE_x64 ISO or ISO from RAM\nfind --set-root --ignore-floppies /Win10XPE_x64.ISO\nmap /Win10XPE_x64.ISO (0xff) || map --mem /Win10XPE_x64.ISO (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)\n\niftitle [if exist (hd0,0)/WinPE.iso] WinPE.iso - ISO or ISO from RAM\nfind --set-root --ignore-floppies /WinPE.iso\nmap /WinPE.iso (0xff) || map --mem /WinPE.iso (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)\n\niftitle [if exist (hd0,1)/WinPE.iso] WinPE.iso - ISO or ISO from RAM\nfind --set-root --ignore-floppies /WinPE.iso\nmap /WinPE.iso (0xff) || map --mem /WinPE.iso (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)\n\niftitle [if exist /vhds.lst] VHDs menu\n# find --set-root /vhds.lst\nconfigfile /vhds.lst\n\niftitle [if exist /grubfm.iso] Grub2 File Manager of a1ive - /grubfm.iso\n# find --set-root /grubfm.iso\nmap --mem /grubfm.iso (0xff)\nmap --hook\nchainloader (0xff)\n\niftitle [if exist /efi/boot/grubfm.iso] Grub2 File Manager of a1ive - /efi/boot/grubfm.iso\n# find --set-root /efi/boot/grubfm.iso\nmap --mem /efi/boot/grubfm.iso (0xff)\nmap --hook\nchainloader (0xff)\n\niftitle [if exist (hd0,0)/images/grubfm_multiarch.iso] Grub2 File Manager of a1ive - (hd0,0)/images/grubfm_multiarch.iso\nset iso_path\u003d(hd0,0)/images/grubfm_multiarch.iso\nmap --mem %iso_path% (0xff)\nmap --hook\nchainloader (0xff)\n\niftitle [if exist (hd0,1)/images/grubfm_multiarch.iso] Grub2 File Manager of a1ive - (hd0,1)/images/grubfm_multiarch.iso\nset iso_path\u003d(hd0,1)/images/grubfm_multiarch.iso\nmap --mem %iso_path% (0xff)\nmap --hook\nchainloader (0xff)\n\ntitle Reboot Main Menu\nchainloader (hd0)+1\n\niftitle [ls (hd0,0)/iso] ISO Linux Menu - (hd0,0)/iso\nset iso_drive\u003d(hd0,0)\nconfigfile /menu_Linux.lst\n\niftitle [ls (hd0,0)/images] ISO Linux Menu - (hd0,0)/images\nset iso_drive\u003d(hd0,0)\nconfigfile /menu_Linux.lst\n\niftitle [ls (hd0,1)/images] ISO Linux Menu - (hd0,1)/images\nset iso_drive\u003d(hd0,1)\nconfigfile /menu_Linux.lst\n\niftitle [if exist /AIO/Menu/Linux.lst] AIO Linux OS\nconfigfile /AIO/Menu/Linux.lst\n\niftitle [if exist (hd0,0)/images/memtest.bin] MemTest86+\nkernel (hd0,0)/images/memtest.bin\n\niftitle [if exist (hd0,1)/images/memtest.bin] MemTest86+\nkernel (hd0,1)/images/memtest.bin\n\niftitle [if exist (hd0,0)/images/7pe_x86_E.iso] 7pe_x86_E.iso - (hd0,0)/images/7pe_x86_E.iso\nmap  (hd0,0)/images/7pe_x86_E.iso (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)/BOOTMGR || chainloader (0xff)/bootmgr\n\niftitle [if exist (hd0,1)/images/7pe_x86_E.iso] 7pe_x86_E.iso - (hd0,1)/images/7pe_x86_E.iso\nmap  (hd0,1)/images/7pe_x86_E.iso (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)/BOOTMGR || chainloader (0xff)/bootmgr\n\niftitle [if exist (hd0,0)/images/7pe_amd64_E.iso] 7pe_amd64_E - (hd0,0)/images/7pe_amd64_E.iso\nmap (hd0,0)/images/7pe_amd64_E.iso (0xFF)\nmap --hook\nchainloader (0xFF)\n\niftitle [if exist (hd0,1)/images/7pe_amd64_E.iso] 7pe_amd64_E - (hd0,1)/images/7pe_amd64_E.iso\nmap (hd0,1)/images/7pe_amd64_E.iso (0xFF)\nmap --hook\nchainloader (0xFF)\n\niftitle [if exist (hd0,0)/images/HDDR2011.gz] Hard Disk Drive Regenerator 2011\nmap --mem (hd0,0)/images/HDDR2011.gz (0xFF)\nmap --hook\nchainloader (0xFF)\n\niftitle [if exist (hd0,1)/images/HDDR2011.gz] Hard Disk Drive Regenerator 2011\nmap --mem (hd0,1)/images/HDDR2011.gz (0xFF)\nmap --hook\nchainloader (0xFF)\n\ntitle Reboot\nreboot\n \ntitle Switch Off\nhalt\n\n```\n\nI think this menu.lst is the bare minimal we can use and is capable to locate image folder and its content on both partitions, same applies for Win10XPE_x64.ISO and WinPE.iso but only if they are present on some partition root, as some users (as I do) may want to create a WinPE folder with all the WinPE WIM files into it.  \n\nHope you don\u0027t mind for this suggestion, the only intention is make things easier, I removed many Linux entries as they seem unnecessary since the USB device only has 2 partitions (or Ventoy DO NOT work), and they can be booted from menu_Linux.lst, about the great XP I think it is time to let it rest in peace.\n\nAttached pictures of folders images and WinPE, both located on Ventoy NTFS first partition.\n\nalacran  \n\n#### Attached Thumbnails {#attach_wrap}\n\n* [![images.png](http://reboot.pro/uploads/monthly_05_2020/post-26560-0-72431300-1590542194_thumb.png)](http://reboot.pro/uploads/monthly_05_2020/post-26560-0-72431300-1590542194.png \"images.png - Size: 119.59KB\"){#ipb-attach-url-17123-0-67583300-1676066390}\n* [![WimPE.png](http://reboot.pro/uploads/monthly_05_2020/post-26560-0-87152400-1590542207_thumb.png)](http://reboot.pro/uploads/monthly_05_2020/post-26560-0-87152400-1590542207.png \"WimPE.png - Size: 109.73KB\"){#ipb-attach-url-17124-0-67591100-1676066390}  \n\n#### Attached Files {#attach_wrap}\n\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003dba11d579ec492f9a3de9ec3c0ae70592\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d17126 \"Download attachment\") [**menu.7z**](http://reboot.pro/index.php?s\u003dba11d579ec492f9a3de9ec3c0ae70592\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d17126 \"Download attachment\") **1.05KB** 710 downloads\n\n"
    },
    {
      "id": "214830",
      "timestamp": "2020-05-27T06:18:07+00:00",
      "author": "wimb",
      "content": "I agree with most of the ideas and it is good that you removed a lot of Linux entries in menu.lst\n\nAt the same time I think that the first Grub4dos menu should not be overcrowded with iftitle entries.\n\nIt might be good idea to make also a configfile for the Windows ISO files located in images folder.\n\nIn this way we can set iso_drive as (hd0,0) or (hd0,1)\n\n```\niftitle [ls (hd0,0)/images] Windows ISO and IMG Menu - (hd0,0)/images\nset iso_drive\u003d(hd0,0)\nconfigfile /menu_Win_ISO.lst\n\niftitle [ls (hd0,1)/images] Windows ISO and IMG Menu - (hd0,1)/images\nset iso_drive\u003d(hd0,1)\nconfigfile /menu_Win_ISO.lst\n\n```\n\nThen all the preconfigured entries for the images folder will not appear twice anymore and will occur in the menu_Win_ISO.lst\n\nAnd the first Grub4dos Menu will appear faster.\n\n"
    },
    {
      "id": "214831",
      "timestamp": "2020-05-27T06:47:21+00:00",
      "author": "alacran",
      "content": "I like the idea about a secondary config file to boot all preconfigured entries in order to call them same way as on menu_Linux.lst, and I think it is the best way to do it. In fact I\u0027m going to implement it right now on my test USB device.\n\nalacran\n\n"
    },
    {
      "id": "214833",
      "timestamp": "2020-05-27T09:16:49+00:00",
      "author": "alacran",
      "content": "I had an idea to reduce menu entries as much as possible and verified that it works fine, this are my proposed menu.lst and menu_Win_ISO.lst\n\n**menu.lst**  \nSpoiler  \n\n```\ncolor black/green  red/light-gray\nsetmenu --string\u003d75\u003d0\u003d0xff0000\u003d\"date\u0026time\"\n#general command to pick highest mode available up to 1000 xres - recommended if you have a wide variety of systems\n#pick highest resolution up to 1000x10000 and either 24-bit or 32-bit colour only\ngraphicsmode -1 100:1000 100:10000 24:32\ntimeout 30\ndefault 0\n\ntitle Reboot Main Menu\nchainloader (hd0)+1\n \niftitle [if exist /bootmgr] Boot Manager Menu - Win 7/8/10 VHD and WIM\nchainloader /bootmgr\n\niftitle [if exist (hd1,0)/bootmgr] Boot Windows from first primary partition of first hard disk \nchainloader (hd1,0)/bootmgr\n\niftitle [ls (hd0,0)/images || ls (hd0,1)/images] Windows ISO Menu\nfind --set-root /menu_Win_ISO.lst\nconfigfile /menu_Win_ISO.lst\n\niftitle [ls (hd0,0)/images] ISO Linux Menu - (hd0,0)/images\nset iso_drive\u003d(hd0,0)\nconfigfile /menu_Linux.lst\n\niftitle [ls (hd0,1)/images] ISO Linux Menu - (hd0,1)/images\nset iso_drive\u003d(hd0,1)\nconfigfile /menu_Linux.lst\n\niftitle [ls (hd0,0)/iso] ISO Linux Menu - (hd0,0)/iso\nset iso_drive\u003d(hd0,0)\nconfigfile /menu_Linux.lst\n\niftitle [ls (hd0,1)/iso] ISO Linux Menu - (hd0,1)/iso\nset iso_drive\u003d(hd0,1)\nconfigfile /menu_Linux.lst\n\ntitle Reboot\nreboot\n \ntitle Switch Off\nhalt\n\n\n```\n\n**menu_Win_ISO.lst**  \nSpoiler  \n\n```\ntitle Reboot Main Menu\nchainloader (hd0)+1\n\ntitle Grub4dos Menu\nfind --set-root /menu.lst\nconfigfile /menu.lst\n \ntitle Boot Manager Menu - Win 7/8/10 VHD and WIM\nfind --set-root /bootmgr\nchainloader /bootmgr\n\niftitle [if exist (hd0,0)/Win10XPE_x64.ISO || (hd0,1)/Win10XPE_x64.ISO] Win10XPE_x64 ISO or ISO from RAM\nfind --set-root --ignore-floppies /Win10XPE_x64.ISO\nmap /Win10XPE_x64.ISO (0xff) || map --mem /Win10XPE_x64.ISO (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)\n\niftitle [if exist (hd0,0)/WinPE.iso || (hd0,1)/WinPE.iso] WinPE.iso - ISO or ISO from RAM\nfind --set-root --ignore-floppies /WinPE.iso\nmap /WinPE.iso (0xff) || map --mem /WinPE.iso (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)\n\niftitle [if exist (hd0,0)/vhds.lst || (hd0,1)/vhds.lst] VHDs menu\nfind --set-root /vhds.lst\nconfigfile /vhds.lst\n\niftitle [if exist (hd0,0)/grubfm.iso || (hd0,1)/grubfm.iso] Grub2 File Manager of a1ive - /grubfm.iso\nfind --set-root /grubfm.iso\nmap --mem /grubfm.iso (0xff)\nmap --hook\nchainloader (0xff)\n\niftitle [if exist (hd0,0)/efi/boot/grubfm.iso || (hd0,1)/efi/boot/grubfm.iso] Grub2 File Manager of a1ive - /efi/boot/grubfm.iso\nfind --set-root /efi/boot/grubfm.iso\nmap --mem /efi/boot/grubfm.iso (0xff)\nmap --hook\nchainloader (0xff)\n\niftitle [if exist (hd0,0)/grubfm_multiarch.iso || (hd0,1)/grubfm_multiarch.iso] Grub2 File Manager of a1ive - /grubfm_multiarch.iso\nfind --set-root /grubfm_multiarch.iso\nmap --mem /grubfm_multiarch.iso\nmap --hook\nchainloader (0xff)\n\niftitle [if exist (hd0,0)/images/grubfm_multiarch.iso || (hd0,1)/images/grubfm_multiarch.iso] Grub2 File Manager of a1ive - /images/grubfm_multiarch.iso\nfind --set-root /images/grubfm_multiarch.iso\nmap --mem /images/grubfm_multiarch.iso (0xff)\nmap --hook\nchainloader (0xff)\n\niftitle [if exist (hd0,0)/AIO/Menu/Linux.lst || (hd0,1)/AIO/Menu/Linux.lst] AIO Linux OS\nfind --set-root /AIO/Menu/Linux.lst\nconfigfile /AIO/Menu/Linux.lst\n\niftitle [if exist (hd0,0)/images/memtest.bin || (hd0,1)/images/memtest.bin] MemTest86+\nfind --set-root /images/memtest.bin\nkernel (hd0,0)/images/memtest.bin\n\niftitle [if exist (hd0,0)/images/7pe_x86_E.iso || (hd0,1)/images/7pe_x86_E.iso] 7pe_x86_E.iso\nfind --set-root /images/7pe_x86_E.iso\nmap  /images/7pe_x86_E.iso (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)/BOOTMGR || chainloader (0xff)/bootmgr\n\niftitle [if exist (hd0,0)/images/7pe_amd64_E.iso || (hd0,1)/images/7pe_amd64_E.iso] 7pe_amd64_E.iso\nfind --set-root /images/7pe_amd64_E.iso\nmap /images/7pe_amd64_E.iso (0xFF)\nmap --hook\nchainloader (0xFF)\n\niftitle [if exist (hd0,0)/images/HDDR2011.gz || (hd0,1)/images/HDDR2011.gz] Hard Disk Drive Regenerator 2011\nfind --set-root /images/HDDR2011.gz\nmap --mem /images/HDDR2011.gz (0xFF)\nmap --hook\nchainloader (0xFF)\n\niftitle [if exist (hd0,0)/images/HDDR2013.gz || (hd0,1)/images/HDDR2013.gz] Hard Disk Drive Regenerator 2013\nfind --set-root /images/HDDR2013.gz\nmap --mem /images/HDDR2011.gz (0xFF)\nmap --hook\nchainloader (0xFF)\n\ntitle Reboot\nreboot\n \ntitle Switch Off\nhalt\n\n```\n\nAs you can see if we use:\n\n```\niftitle [if exist (hd0,0)/Win10XPE_x64.ISO || (hd0,1)/Win10XPE_x64.ISO] Win10XPE_x64 ISO or ISO from RAM\nfind --set-root --ignore-floppies /Win10XPE_x64.ISO\nmap /Win10XPE_x64.ISO (0xff) || map --mem /Win10XPE_x64.ISO (0xff)\nmap --hook\nroot (0xff)\nchainloader (0xff)\n\n```\n\nThere is no need to make 2 entries, one for each partition, this way a single entrie is good enought, I used this code in almost all entries but not on entries for ISO Linux Menu, just tell me if you like the commands this way and I will edit them and also menu_Linux.lst if you want.\n\nAFAIK the additional advantage is when dealing with menus containing iftittle entries as we have less iftitle entries the menu is faster.\n\nalacran\n\n**EDIT:** JFYI I have tested the commands on this entries and they work very fine from a USB stick or MicroSD + USB 3.0 adapter.\n\nBut when trying same lines on my internal HD they DO NOT see/find the second option on the iftitle line.  \n\n#### Attached Files {#attach_wrap}\n\n* [![Attached File](http://reboot.pro/public/style_extra/mime_types/zip.gif)](http://reboot.pro/index.php?s\u003dba11d579ec492f9a3de9ec3c0ae70592\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d17127 \"Download attachment\") [**Menus.7z**](http://reboot.pro/index.php?s\u003dba11d579ec492f9a3de9ec3c0ae70592\u0026app\u003dcore\u0026module\u003dattach\u0026section\u003dattach\u0026attach_id\u003d17127 \"Download attachment\") **1.19KB** 706 downloads\n\n**Edited by alacran, 30 May 2020 - 02:26 PM.**\n"
    },
    {
      "id": "214835",
      "timestamp": "2020-05-27T09:59:01+00:00",
      "author": "wimb",
      "content": "I prefer for menu_Win_ISO.lst to use **set iso_drive** as used for Linux ISO instead of using **find**\n\nThis better ensures that the ISO is used from the drive as intended and not from other harddisk ...\n\nAn exception could be to use your iftitle for Win10XPE_x64.ISO (and WinPE.iso ?), but then occurring in the main menu.lst as most important Boot entry\n\nAlso grubfm_multiarch.iso and grubfm.iso and the vhds.lst and some more entries should occur in main menu.lst\n\n"
    },
    {
      "id": "214836",
      "timestamp": "2020-05-27T10:37:04+00:00",
      "author": "alacran",
      "content": "To better ensure that the ISO is used from the drive as intended and not from other harddisk, instead of using **find**, you could use a code like this (tested and working fine):\n\n```\niftitle [if exist (hd0,0)/images/7pe_amd64_E.iso || (hd0,1)/images/7pe_amd64_E.iso] 7pe_amd64_E.iso\nmap (hd0,0)/images/7pe_amd64_E.iso (0xFF) || map (hd0,1)/images/7pe_amd64_E.iso Â (0xFF)\nmap --hook\nchainloader (0xFF)\n```\n\nThis also help reduce to one half the number of entries compared with **set iso_drive**\n\nOf course final decision is yours, as you are the author of the program, I\u0027m only making suggestions trying to reduce the code lines to the minimum required.\n\nYour friend\n\nalacran  \n\n**EDIT:** JFYI I have tested the commands on this entries and they work very fine from a USB stick or MicroSD + USB 3.0 adapter.\n\nBut when trying same lines on my internal HD they DO NOT see/find the second option on the iftitle line.\n\n**Edited by alacran, 30 May 2020 - 02:25 PM.**\n"
    },
    {
      "id": "214837",
      "timestamp": "2020-05-27T10:52:07+00:00",
      "author": "wimb",
      "content": "Interesting menu entry proposal, but I prefer to use **set iso_drive**\n\nThe use of **configfile /menu_Win_ISO.** **lst** [as proposed here](http://reboot.pro/topic/18182-uefi-multi-make-multi-boot-usb-drive/?p\u003d214830 \"\") is sufficient to reduce the number of preconfigured iftitle entries in the main menu.lst\n\nAnd I would like to keep in the main **menu.lst** the most used and important entries like Win10XPE_x64.ISO and WinPE.iso and grubfm_multiarch.iso and grubfm.iso ....\n\n"
    },
    {
      "id": "214862",
      "timestamp": "2020-05-30T11:20:14+00:00",
      "author": "wimb",
      "content": "**Update USB_FORMAT-43 and UEFI_MULTI-43 plus the Addon-glim-agFM files**\n\n- Grub4dos Menu improved taking the effects of two partition USB drives and Ventoy into account  \n- Added **menu_Win_ISO.lst** with preconfigured Grub4dos entries for Windows ISO Boot Image files in folder images  \n- UEFI_MULTI_x64.exe allows **Run Again to Add Other Boot Image**\n\n**Download:** [USB_FORMAT](https://github.com/wimbrts/USB_FORMAT/releases \"External link\") and [UEFI_MULTI](https://github.com/wimbrts/UEFI_MULTI/releases \"External link\")\n\n"
    },
    {
      "id": "214868",
      "timestamp": "2020-05-30T20:34:28+00:00",
      "author": "alacran",
      "content": "@ wimb\n\nJust downloaded and tested **UEFI_MULTI-43 plus the Addon-glim-agFM files** and I liked the improved grub4dos menus, all working fine and menus are now more clear and less crowded.\n\nI noticed you added on menu.lst the commands for date, time and auto sizing screen, as an user option, I took them from **steve6375** info on his pages and I liked it, it looks nice.\n\n**Run Again to Add Other Boot Image** was a good addition, thanks.\n\n@ Other members.\n\nBy the way during taking a look to the files and folders into **UEFI_MULTI-43** subdirectory I noticed there is a new Ventoy version (1.0.12) available see my post for more relevant info and links: [http://reboot.pro/to...fi/#entry214867](http://reboot.pro/topic/22277-ventoy-open-source-usb-boot-utility-for-both-bios-and-uefi/#entry214867 \"\")\n\nalacran\n\n"
    },
    {
      "id": "214915",
      "timestamp": "2020-05-31T18:12:41+00:00",
      "author": "wimb",
      "content": "\u003e Just downloaded and tested **UEFI_MULTI-43 plus the Addon-glim-agFM files** and I liked the improved grub4dos menus, all working fine and menus are now more clear and less crowded.\n\u003e\n\u003e I noticed you added on menu.lst the commands for date, time and auto sizing screen, as an user option, I took them from **steve6375** info on his pages and I liked it, it looks nice.\n\u003e\n\u003e **Run Again to Add Other Boot Image** was a good addition, thanks.\n\u003e\nHi alacran, Thank you for testing latest version of UEFI_MULTI. :smile:\n\nHappy that you like the improved grub4dos menu and the **Run Again to Add Other Boot Image** addition to UEFI_MULTI program.\n\nSome settings in menu.lst are indeed meant as user option, where the default is just my personal preference.\n\n"
    },
    {
      "id": "214929",
      "timestamp": "2020-06-01T09:35:19+00:00",
      "author": "wimb",
      "content": "\u003e **EDIT:** JFYI I have tested the commands on this entries and they work very fine from a USB stick or MicroSD + USB 3.0 adapter.\n\u003e\n\u003e But when trying same lines on my internal HD they DO NOT see/find the second option on the iftitle line.\n\nIndeed there is a problem with the complex iftitle entries having \\|\\| when booting from internal harddisk.\n\nAlso /menu.lst Or /AIO/Menu/Linux.ls Or /vhds.lst cannot be used in iftitle entry\n\nTesting all the time .... and code improval ....\n\n**Update USB_FORMAT-44 and UEFI_MULTI-44 plus the Addon-glim-agFM files**\n\n- Grub4dos Menu improved for non working iftitle entries when booting from internal harddisk  \n- UEFI_MULTI_x64.exe supports to Make or Modify booting of internal harddisk having MBR or GPT partitioning\n\nYou can Copy to folder **images**the Windows and Linux ISO files for preconfigured Grub4dos entries as given in menu_Win_ISO.lst and menu_Linux.lst\n\n**Download:** [USB_FORMAT](https://github.com/wimbrts/USB_FORMAT/releases \"External link\") and [UEFI_MULTI](https://github.com/wimbrts/UEFI_MULTI/releases \"External link\")\n\n![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\n"
    },
    {
      "id": "214933",
      "timestamp": "2020-06-01T14:55:35+00:00",
      "author": "alacran",
      "content": "\u003e Indeed there is a problem with the complex iftitle entries having \\|\\| when booting from internal harddisk.\n\u003e\n\u003e - Grub4dos Menu improved for non working iftitle entries when booting from internal harddisk\n\u003e\n\u003e **- UEFI_MULTI_x64.exe supports to Make or Modify booting of internal harddisk having MBR or GPT partitioning**\n\u003e\n\u003e ![:cheers:](https://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nI forgot about **UEFI_MULTI_x64.exe supports to Make or Modify booting of internal harddisk having MBR or GPT partitioning** and then I didn\u0027t let you know about this in a more direct way, and only made an edit to previous post.\n\nSorry for the inconveniece my friend it was an involuntary mistake, this makes me feel very bad.\n\nalacran\n\n"
    },
    {
      "id": "214935",
      "timestamp": "2020-06-01T15:47:01+00:00",
      "author": "wimb",
      "content": "\u003e I forgot about **UEFI_MULTI_x64.exe supports to Make or Modify booting of internal harddisk having MBR or GPT partitioning** and then I didn\u0027t let you know about this in a more direct way, and only made an edit to previous post.\n\u003e\n\u003e Sorry for the inconveniece my friend it was an involuntary mistake, this makes me feel very bad.\n\u003e\nNo problem :smile:\n\nYour remark about booting from internal harddisk triggered me to test booting Windows ISO files located on internal harddisk.\n\nThat has helped me to improve the program and the Grub4dos menu files.\n\nOn testing I discovered that versions 98, 40, 41, 42 and 43 don\u0027t support to **create** Boot folder for MBR internal harddisk.\n\nThe bug has been removed and I have made entirely new code for booting from MBR internal harddisk.\n\nAlso I made a WARNING when booting of the internal harddisk will change when user selects internal drive as Boot Drive.\n\nI think adding Boot Image files as Boot option of internal harddisk, until now has never been officially documented for UEFI_MULTI.\n\nBooting with various 7/8/10 VHD and PE-WIM files from internal harddisk is quite useful for me and enables to change and boot fast with different environments.\n\n"
    }
  ]
}