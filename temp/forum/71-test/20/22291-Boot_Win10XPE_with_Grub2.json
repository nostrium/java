{
  "id": "22291",
  "title": "Boot Win10XPE with Grub2",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "214587",
      "timestamp": "2020-05-11T16:59:58+00:00",
      "author": "alz52879",
      "content": "I\u0027ve installed **grub-2.02-for-windows**on one partition of my USB Flash Disk. The second partition contains a dd\u0027ed Porteus-Kiosk.\n\n```\nmenuentry \u0027Porteus-Kiosk\u0027 {\n    set root\u003d\u0027hd0,msdos0\u0027\n    search --no-floppy --fs-uuid --set\u003droot xxxx-xx-xx-xx-xx-xx-xx\n    linux /boot/vmlinuz\n    initrd /boot/initrd.xz\n}\n```\n\nI\u0027d like to boot **Win10XPE.iso** as well but I just don\u0027t seem to find the right **menuentry**for that.\n\nAny help would be appreciated.\n\n**Edited by alz52879, 11 May 2020 - 05:03 PM.**\n"
    },
    {
      "id": "214606",
      "timestamp": "2020-05-12T09:47:20+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I\u0027ve installed **grub-2.02-for-windows**\n\nFrom where?\n\nLink please.\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "214608",
      "timestamp": "2020-05-12T10:19:29+00:00",
      "author": "alz52879",
      "content": "[https://www.aioboot....ub2-for-windows](https://www.aioboot.com/out/grub2-for-windows \"External link\")\n\n"
    },
    {
      "id": "214609",
      "timestamp": "2020-05-12T10:23:02+00:00",
      "author": "a1ive",
      "content": "UEFI or Legacy BIOS?\n\n"
    },
    {
      "id": "214610",
      "timestamp": "2020-05-12T10:28:46+00:00",
      "author": "alz52879",
      "content": "For BIOS for a start as explained [here](https://www.aioboot.com/en/install-grub2-from-windows/ \"External link\").\n\n"
    },
    {
      "id": "214612",
      "timestamp": "2020-05-12T10:43:12+00:00",
      "author": "a1ive",
      "content": "For BIOS-booting,\n\nuse memdisk ([https://wiki.syslinu...p?title\u003dMEMDISK](https://wiki.syslinux.org/wiki/index.php?title\u003dMEMDISK \"External link\"))\n\n```\nmenuentry \"Boot WinPE\" {\n    linux16 /path/to/memdisk iso raw\n    initrd16 /path/to/WIN10XPE.iso\n}\n```\n\nor call grub4dos grub.exe ([https://github.com/chenall/grub4dos](https://github.com/chenall/grub4dos \"External link\"))\n\n```\nmenuentry \"Boot WinPE\" {\n    set g4d_cmd\u003d\"find --set-root --ignore-floppies /path/to/WIN10XPE.iso; map /path/to/WIN10XPE.iso (0xff); map --hook; chainloader (0xff)\"\n    linux /path/to/grub.exe --config-file\u003d${g4d_cmd}\n}\n```\n\n\u003cbr /\u003e\n\n**Edited by a1ive, 12 May 2020 - 10:47 AM.**\n"
    },
    {
      "id": "214614",
      "timestamp": "2020-05-12T12:00:57+00:00",
      "author": "alz52879",
      "content": "**@ a1ive**\n\nThanks very much for the input.\n\n```\nmenuentry \"Boot WinPE\" {\n    linux16 /path/to/memdisk iso raw\n    initrd16 /path/to/WIN10XPE.iso\n}\n```\n\n.... works fine but it\u0027s considerably slower than ++unpacking++ the WIN10XPE.iso to the USB Flash Disk and using the code below:\n\n```\nmenuentry \"Win10XPE\" {\nif [ ${grub_platform} \u003d\u003d \"pc\" ]; then ntldr /bootmgr; fi\nif [ ${grub_platform} \u003d\u003d \"efi\" ]; then chainloader /efi/boot/bootx64.efi; fi\n}   \n```\n\n\u003cbr /\u003e\n\n"
    },
    {
      "id": "214615",
      "timestamp": "2020-05-12T12:19:15+00:00",
      "author": "Wonko the Sane",
      "content": "Sure, the memdisk entry loads the .iso in RAM, so there is the additional time to transfer the whole .iso into RAM.\n\nThe other one, via grub4dos, maps it directly, and should be very fast.\n\nOr you could use the \"partnew\" approach, that will work with grub4dos and should also work with the GRUB2 from A1ive:\n\n[https://translate.go...o/grub2_zh.html](https://translate.google.com/translate?hl\u003den\u0026tab\u003dwT\u0026sl\u003dzh-CN\u0026tl\u003den\u0026u\u003dhttps%3A%2F%2Fa1ive.github.io%2Fgrub2_zh.html \"External link\")\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "214616",
      "timestamp": "2020-05-12T12:22:09+00:00",
      "author": "a1ive",
      "content": "\u003e Sure, the memdisk entry loads the .iso in RAM, so there is the additional time to transfer the whole .iso into RAM.\n\u003e\n\u003e The other one, via grub4dos, maps it directly, and should be very fast.\n\u003e\n\u003e Or you could use the \"partnew\" approach, that will work with grub4dos and should also work with the GRUB2 from A1ive:\n\u003e\n\u003e [https://translate.go...o/grub2_zh.html](https://translate.google.com/translate?hl\u003den\u0026tab\u003dwT\u0026sl\u003dzh-CN\u0026tl\u003den\u0026u\u003dhttps%3A%2F%2Fa1ive.github.io%2Fgrub2_zh.html \"External link\")\n\u003e\n\u003e ![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\u003e\n\u003e Wonko\n\nwe don\u0027t have \"map\" module for BIOS GRUB2 ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n"
    },
    {
      "id": "214617",
      "timestamp": "2020-05-12T12:23:52+00:00",
      "author": "wimb",
      "content": "\u003e The other one, via grub4dos, maps it directly, and should be very fast.\n\u003e\nTested the other one using grub.exe and booting of 10XPE is indeed fast.\n\n"
    },
    {
      "id": "214620",
      "timestamp": "2020-05-12T12:34:08+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e we don\u0027t have \"map\" module for BIOS GRUB2 ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\nYep, sorry for having been confusing :blush: , I meant not for the Win10XPE.ISO, for a Linux one, my bad ![:(](http://reboot.pro/public/style_emoticons/default/sad.png) .\n\nIf \"partnew\" and partition recognition in the MBR in your GRUB2 build works \"correctly\" (or \"as it does on grub4dos\"), the original method (largely used by Steve6375 in Easy2boot) is here:\n\n[http://reboot.pro/to...brided/?p\u003d88531](http://reboot.pro/topic/9916-grub4dos-isohybrided/?p\u003d88531 \"\")\n\nIn grub4dos we use map because it is what we have to make the kernel and initrd initially chainloadable, in GRUB2 this could be a loopback to the .iso in order to be able to chainload the kernel and initrd initially, can\u0027t it?. ![:unsure:](http://reboot.pro/public/style_emoticons/default/unsure.png)\n\n![:duff:](http://reboot.pro/public/style_emoticons/default/duff.gif)\n\nWonko\n\n"
    },
    {
      "id": "214625",
      "timestamp": "2020-05-12T13:58:32+00:00",
      "author": "alz52879",
      "content": "\u003e ```\n\u003e menuentry \"Boot WinPE\" {\n\u003e     set g4d_cmd\u003d\"find --set-root --ignore-floppies /path/to/WIN10XPE.iso; map /path/to/WIN10XPE.iso (0xff); map --hook; chainloader (0xff)\"\n\u003e     linux /path/to/grub.exe --config-file\u003d${g4d_cmd}\n\u003e }\n\u003e ```\n\nRunning flawlessly as well, thank you very much indeed :smile:\n\n**Edited by alz52879, 12 May 2020 - 01:58 PM.**\n"
    }
  ]
}