{
  "id": "18101",
  "title": "M$ and USB MaximumTransferLength calculation",
  "isPinned": false,
  "isFirstTopic": false,
  "isLocked": false,
  "tags": [],
  "forumNotes": [
    {
      "id": "166958",
      "timestamp": "2013-02-01T22:32:14+00:00",
      "author": "MedEvil",
      "content": "Someone is getting dumber. Not sure it is me or the world. Help me find out! ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png)  \n\nSince i fiddled last week with M$ turbo USB patch, i had this nagging feeling that something was wrong, but couldn\u0027t quite put my finger on it.  \n\nNow it hit me. Why is there an even number?  \n\u003e In the Value data box, type a value in the 64 KB-to-2 MB range. For example, select Decimal,and type a value in the range of 65535 (64 KB) to 2097120 (2 MB)\n[http://support.micro....com/kb/2581464](http://support.microsoft.com/kb/2581464 \"External link\")  \n\n64 \\* 1024 \u003d 65536  \n65536 - 1 \u003d 65535  \n\n2 \\* 1024 \\* 1024 \u003d 2097152  \n2097152 - 1 \u003d 2097151   \n\nHow does M$ get 2097120? ![:confused1:](http://reboot.pro/public/style_emoticons/default/confused1.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)   \n"
    },
    {
      "id": "166988",
      "timestamp": "2013-02-02T14:43:11+00:00",
      "author": "0scar",
      "content": "Maybe 65535\\*32 ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\n"
    },
    {
      "id": "166999",
      "timestamp": "2013-02-02T16:56:39+00:00",
      "author": "MedEvil",
      "content": "Nice detective work, Oscar! ![:thumbup:](http://reboot.pro/public/style_emoticons/default/thumbup.gif)  \nBut does that number make any sense to you?  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)   \n"
    },
    {
      "id": "167037",
      "timestamp": "2013-02-03T01:43:51+00:00",
      "author": "0scar",
      "content": "I think it makes sense that 2097120 is a multiple of 65535 (or FFFF)\n\n"
    },
    {
      "id": "167040",
      "timestamp": "2013-02-03T11:35:18+00:00",
      "author": "MedEvil",
      "content": "![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png) :tongue:  \nI mean to set the size in an absolute number, in case it only increments in 64kB steps.  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)   \n"
    },
    {
      "id": "167045",
      "timestamp": "2013-02-03T12:43:19+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e I think it makes sense that 2097120 is a multiple of 65535 (or FFFF)\n\nNot really \"sense\" ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif), the kind of \"steps\" most similar to these are cluster size on a filesystem, that by definition need to be multiple of 2, 512,1024,2048,4096, etc.\n\nBTW, that is the \"unit\" with which data is accessed on a filesystem, so it would be logical that it would reflect a multiple of this unit, not entirely unlike what the bs\u003d (block size) switch does on dd.\n\nAnd \\*anything\\* dealing with sectors/clusters etc. are always \"even\" numbers, including the known \"new alignement paradigm\".\n\nIn other words, it\u0027s the \"base\" number 6553**5** that makes little sense. ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)\n\nIt would be more logical if the value would be something multiple of (choose what better fits) sector or cluster size, actually the latter would be the one that would make the most sense.\n\nOf course, for all we know there could be an algorithm re-rounding the value (in excess) to get the \"right\" multiple of a cluster value\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "167047",
      "timestamp": "2013-02-03T13:08:06+00:00",
      "author": "0scar",
      "content": "Remember that FFFF\u003d65365 is a multiple of 2 because it actually means 65366\u003d2\\^16 bytes since the count begins with cero (0,1, 2...65365)\n\n"
    },
    {
      "id": "167049",
      "timestamp": "2013-02-03T13:40:05+00:00",
      "author": "MedEvil",
      "content": "\u003e In other words, it\u0027s the \"base\" number 6553**5** that makes little sense. ![:ph34r:](http://reboot.pro/public/style_emoticons/default/scared9.gif)\nWell, 65535 is an even number in Hex (FFFF) it only becomes an odd one in decimal writing, since computers start counting with 0, while humans start counting with 1.  \n\n\u003e Of course, for all we know there could be an algorithm re-rounding the value (in excess) to get the \"right\" multiple of a cluster value\nWouldn\u0027t it have been easier in that case, to simple set the multiplier in the registry key, instead of an absolute number, which needs postprocessing?  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)   \n"
    },
    {
      "id": "167050",
      "timestamp": "2013-02-03T13:43:03+00:00",
      "author": "MedEvil",
      "content": "I think we can add another mystery. Oscars math! ![:lol:](http://reboot.pro/public/style_emoticons/default/laugh.png) ![:poke:](http://reboot.pro/public/style_emoticons/default/poke.gif)  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)   \n"
    },
    {
      "id": "167052",
      "timestamp": "2013-02-03T13:48:45+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Remember that FFFF\u003d65365 is a multiple of 2 because it actually means 65366\u003d2\\^16 bytes since the count begins with cero (0,1, 2...65365)\n\nWell, NO.\n\nA filesystem with 64 KB clusters has a cluster size of 65536 bytes.\n\nA sector is made of 512 bytes ( or 4096 in the new AF disks) these bytes are generally referred as having an offset going from 0 to 511.\n\nCluster sizes are multiple of that.\n\n512 -\\\u003e 0200\n\n1024-\\\u003e0400\n\n2048-\\\u003e0800\n\n4096-\\\u003e1000\n\n8192-\\\u003e2000\n\n16384-\\\u003e4000\n\n32768-\\\u003e8000\n\n65536-\\\u003e010000\n\nOn the right are the hex values actually used in BPB\u0027s.\n\nBy definition an even number is a number that divided by 2 gives no rest.\n\nFFFF is not even.\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "167053",
      "timestamp": "2013-02-03T13:50:35+00:00",
      "author": "paraglider",
      "content": "Maybe what MS really meant was \\~2MB or it could be a typo.\n\n"
    },
    {
      "id": "167056",
      "timestamp": "2013-02-03T14:03:36+00:00",
      "author": "Wonko the Sane",
      "content": "\u003e Maybe what MS really meant was \\~2MB or it could be a typo.\n\nYes, but the point is not about the exact correspondence of 2 Mb to 2097152 instead of 2097120.\n\nIt is about the \"block size\" that sounds \"queer\".\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "167057",
      "timestamp": "2013-02-03T14:27:19+00:00",
      "author": "MedEvil",
      "content": "@Wonko  \nLike i said above, computers start counting with 0, not with 1 like humans.  \n\nThe first item in a row for a human is number 1. Hence FFFF \u003d 65535  \nThe first item in a row for a computer is number 0. Hence FFFF \u003d 65536  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)   \n"
    },
    {
      "id": "167066",
      "timestamp": "2013-02-03T16:03:08+00:00",
      "author": "Wonko the Sane",
      "content": "But this does not make odd numbers become even.\n\nAnd - as said - blocks are always even, in decimal as in hex.\n\nIn the range 0รท65535 there are 65536 values.\n\nOne thing is indexing, another one is counting, we have a good example using with base 0 in CHS, where the Cylinders are at the most 1024 (written in a partition table as 1023) and Heads are at the most 255 (written in a partition table as 254), but these represent indexing and not counting.\n\nAs well we have a good example in LBA, where first sector is sector 0, but still it is \"indexing\".\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\n"
    },
    {
      "id": "167091",
      "timestamp": "2013-02-03T18:57:46+00:00",
      "author": "MedEvil",
      "content": "Ok, one more try.  \nFor humans the 10 number blocks end with 10, 20 30, 40, ...  \nFor computers they start with 0, 10, 20 30, 40, ...  \n\nFor computers 0 marks the beginning, for humans 1 marks the beginning.   \nFor humans 0 represents \u0027Nothing\u0027, for computers it represents something, as computers don\u0027t \u0027know\u0027 the concept of nothing.  \n\n\"Search for nothing\" is a concept, which means to a human \"Don\u0027t search.\", but every computer will get busy searching for \"Nothing\".  \n\n\u003e And - as said - blocks are always even, in decimal as in hex.\nThat\u0027s not possible.  \nThe higest 4 Byte value possible is FFFF, which consists of 65536 numbers, reaching from 0 to 65535.  \nTo get the even number of 65536, the hex value would have to be 10000 (a 5 Byte value) with 65537 numbers, reaching from 0 to 65536.  \n\n64KB block is a block with an address space of 64k (65536 numbers), not an address space ending with number 65536.  \n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)   \n"
    },
    {
      "id": "167097",
      "timestamp": "2013-02-03T19:26:54+00:00",
      "author": "Wonko the Sane",
      "content": "No need to try, I am perfectly happy being right, I do understand your point, and I respect it, but I find it not valid.\n\nIF it was valid, in a bootsector BPB you would have found values like 01FF instead of 0200 to indicate a SIZE (counting, not indexing).\n\nAnd you did not read attentively post #10 (or actually verified the given data, otherwise you would have noticed \\*something\\* ![:whistling:](http://reboot.pro/public/style_emoticons/default/happy22.gif)).\n\n![:cheers:](http://reboot.pro/public/style_emoticons/default/cheers.gif)\n\nWonko\n\nP.S.: If your approach was right, wouldn\u0027t the minimum here:\n\n[http://support.micro...kb/223140/en-us](http://support.microsoft.com/kb/223140/en-us \"External link\")\n\nbe 511? ![:dubbio:](http://reboot.pro/public/style_emoticons/default/dubbio.gif)\n\nAnd check this for something really \"queer\":\n\n[http://ask.adaptec.c...-under-windows?](http://ask.adaptec.com/app/answers/detail/a_id/17088/~/how-to-change-the-block-size-%2F-transfer-size-under-windows%3F \"External link\")\n\n"
    }
  ]
}